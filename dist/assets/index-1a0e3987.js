var Ix=Object.defineProperty;var Px=(i,t,e)=>t in i?Ix(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Rx=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var nt=(i,t,e)=>(Px(i,typeof t!="symbol"?t+"":t,e),e);var nF=Rx((lF,ma)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function st(){}function j_(i,t){for(const e in t)i[e]=t[e];return i}function X_(i){return i()}function Yf(){return Object.create(null)}function es(i){i.forEach(X_)}function Lo(i){return typeof i=="function"}function $t(i,t){return i!=i?t==t:i!==t||i&&typeof i=="object"||typeof i=="function"}let Sa;function Ji(i,t){return Sa||(Sa=document.createElement("a")),Sa.href=t,i===Sa.href}function Dx(i){return Object.keys(i).length===0}function Ox(i,...t){if(i==null)return st;const e=i.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function ii(i,t,e){i.$$.on_destroy.push(Ox(t,e))}function Ne(i,t,e,s){if(i){const n=Y_(i,t,e,s);return i[0](n)}}function Y_(i,t,e,s){return i[1]&&s?j_(e.ctx.slice(),i[1](s(t))):e.ctx}function Ue(i,t,e,s){if(i[2]&&s){const n=i[2](s(e));if(t.dirty===void 0)return n;if(typeof n=="object"){const r=[],o=Math.max(t.dirty.length,n.length);for(let a=0;a<o;a+=1)r[a]=t.dirty[a]|n[a];return r}return t.dirty|n}return t.dirty}function Ge(i,t,e,s,n,r){if(n){const o=Y_(t,e,s,r);i.p(o,n)}}function He(i){if(i.ctx.length>32){const t=[],e=i.ctx.length/32;for(let s=0;s<e;s++)t[s]=-1;return t}return-1}function kx(i){const t={};for(const e in i)t[e]=!0;return t}function Ll(i){return i&&Lo(i.destroy)?i.destroy:st}function Z(i,t){i.appendChild(t)}function ct(i,t,e){i.insertBefore(t,e||null)}function ht(i){i.parentNode&&i.parentNode.removeChild(i)}function Sh(i,t){for(let e=0;e<i.length;e+=1)i[e]&&i[e].d(t)}function J(i){return document.createElement(i)}function Mr(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ie(i){return document.createTextNode(i)}function xt(){return Ie(" ")}function Vr(){return Ie("")}function kt(i,t,e,s){return i.addEventListener(t,e,s),()=>i.removeEventListener(t,e,s)}function Xs(i){return function(t){return t.preventDefault(),i.call(this,t)}}function Ir(i){return function(t){return t.stopPropagation(),i.call(this,t)}}function H(i,t,e){e==null?i.removeAttribute(t):i.getAttribute(t)!==e&&i.setAttribute(t,e)}function $f(i,t){const e=Object.getOwnPropertyDescriptors(i.__proto__);for(const s in t)t[s]==null?i.removeAttribute(s):s==="style"?i.style.cssText=t[s]:s==="__value"?i.value=i[s]=t[s]:e[s]&&e[s].set?i[s]=t[s]:H(i,s,t[s])}function Fx(i){return Array.from(i.childNodes)}function qe(i,t){t=""+t,i.data!==t&&(i.data=t)}function Kf(i,t){i.value=t??""}function No(i,t,e,s){e===null?i.style.removeProperty(t):i.style.setProperty(t,e,s?"important":"")}function Et(i,t,e){i.classList[e?"add":"remove"](t)}function Bx(i,t,{bubbles:e=!1,cancelable:s=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(i,e,s,t),n}let Uo;function So(i){Uo=i}function Eh(){if(!Uo)throw new Error("Function called outside component initialization");return Uo}function Lx(i){Eh().$$.before_update.push(i)}function ui(i){Eh().$$.on_mount.push(i)}function Wr(i){Eh().$$.on_destroy.push(i)}function $_(){const i=Eh();return(t,e,{cancelable:s=!1}={})=>{const n=i.$$.callbacks[t];if(n){const r=Bx(t,e,{cancelable:s});return n.slice().forEach(o=>{o.call(i,r)}),!r.defaultPrevented}return!0}}function Ea(i,t){const e=i.$$.callbacks[t.type];e&&e.slice().forEach(s=>s.call(this,t))}const sr=[],Xi=[];let pr=[];const qf=[],Nx=Promise.resolve();let gu=!1;function Ux(){gu||(gu=!0,Nx.then(K_))}function mu(i){pr.push(i)}const uc=new Set;let Kn=0;function K_(){if(Kn!==0)return;const i=Uo;do{try{for(;Kn<sr.length;){const t=sr[Kn];Kn++,So(t),Gx(t.$$)}}catch(t){throw sr.length=0,Kn=0,t}for(So(null),sr.length=0,Kn=0;Xi.length;)Xi.pop()();for(let t=0;t<pr.length;t+=1){const e=pr[t];uc.has(e)||(uc.add(e),e())}pr.length=0}while(sr.length);for(;qf.length;)qf.pop()();gu=!1,uc.clear(),So(i)}function Gx(i){if(i.fragment!==null){i.update(),es(i.before_update);const t=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,t),i.after_update.forEach(mu)}}function Hx(i){const t=[],e=[];pr.forEach(s=>i.indexOf(s)===-1?t.push(s):e.push(s)),e.forEach(s=>s()),pr=t}const ul=new Set;let wn;function de(){wn={r:0,c:[],p:wn}}function fe(){wn.r||es(wn.c),wn=wn.p}function $(i,t){i&&i.i&&(ul.delete(i),i.i(t))}function tt(i,t,e,s){if(i&&i.o){if(ul.has(i))return;ul.add(i),wn.c.push(()=>{ul.delete(i),s&&(e&&i.d(1),s())}),i.o(t)}else s&&s()}function zx(i,t){const e={},s={},n={$$scope:1};let r=i.length;for(;r--;){const o=i[r],a=t[r];if(a){for(const l in o)l in a||(s[l]=1);for(const l in a)n[l]||(e[l]=a[l],n[l]=1);i[r]=a}else for(const l in o)n[l]=1}for(const o in s)o in e||(e[o]=void 0);return e}function Kt(i){i&&i.c()}function Vt(i,t,e,s){const{fragment:n,after_update:r}=i.$$;n&&n.m(t,e),s||mu(()=>{const o=i.$$.on_mount.map(X_).filter(Lo);i.$$.on_destroy?i.$$.on_destroy.push(...o):es(o),i.$$.on_mount=[]}),r.forEach(mu)}function Wt(i,t){const e=i.$$;e.fragment!==null&&(Hx(e.after_update),es(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Vx(i,t){i.$$.dirty[0]===-1&&(sr.push(i),Ux(),i.$$.dirty.fill(0)),i.$$.dirty[t/31|0]|=1<<t%31}function Qt(i,t,e,s,n,r,o,a=[-1]){const l=Uo;So(i);const h=i.$$={fragment:null,ctx:[],props:r,update:st,not_equal:n,bound:Yf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Yf(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(h.root);let c=!1;if(h.ctx=e?e(i,t.props||{},(u,d,...f)=>{const p=f.length?f[0]:d;return h.ctx&&n(h.ctx[u],h.ctx[u]=p)&&(!h.skip_bound&&h.bound[u]&&h.bound[u](p),c&&Vx(i,u)),d}):[],h.update(),c=!0,es(h.before_update),h.fragment=s?s(h.ctx):!1,t.target){if(t.hydrate){const u=Fx(t.target);h.fragment&&h.fragment.l(u),u.forEach(ht)}else h.fragment&&h.fragment.c();t.intro&&$(i.$$.fragment),Vt(i,t.target,t.anchor,t.customElement),K_()}So(l)}class te{$destroy(){Wt(this,1),this.$destroy=st}$on(t,e){if(!Lo(e))return st;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const n=s.indexOf(e);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!Dx(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function q_(i,t){return function(){return i.apply(t,arguments)}}const{toString:Z_}=Object.prototype,{getPrototypeOf:Ld}=Object,Nd=(i=>t=>{const e=Z_.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),As=i=>(i=i.toLowerCase(),t=>Nd(t)===i),Th=i=>t=>typeof t===i,{isArray:jr}=Array,Go=Th("undefined");function Wx(i){return i!==null&&!Go(i)&&i.constructor!==null&&!Go(i.constructor)&&Ys(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const J_=As("ArrayBuffer");function jx(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&J_(i.buffer),t}const Xx=Th("string"),Ys=Th("function"),Q_=Th("number"),Ud=i=>i!==null&&typeof i=="object",Yx=i=>i===!0||i===!1,dl=i=>{if(Nd(i)!=="object")return!1;const t=Ld(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},$x=As("Date"),Kx=As("File"),qx=As("Blob"),Zx=As("FileList"),Jx=i=>Ud(i)&&Ys(i.pipe),Qx=i=>{const t="[object FormData]";return i&&(typeof FormData=="function"&&i instanceof FormData||Z_.call(i)===t||Ys(i.toString)&&i.toString()===t)},tv=As("URLSearchParams"),ev=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ha(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let s,n;if(typeof i!="object"&&(i=[i]),jr(i))for(s=0,n=i.length;s<n;s++)t.call(null,i[s],s,i);else{const r=e?Object.getOwnPropertyNames(i):Object.keys(i),o=r.length;let a;for(s=0;s<o;s++)a=r[s],t.call(null,i[a],a,i)}}function t0(i,t){t=t.toLowerCase();const e=Object.keys(i);let s=e.length,n;for(;s-- >0;)if(n=e[s],t===n.toLowerCase())return n;return null}const e0=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),i0=i=>!Go(i)&&i!==e0;function _u(){const{caseless:i}=i0(this)&&this||{},t={},e=(s,n)=>{const r=i&&t0(t,n)||n;dl(t[r])&&dl(s)?t[r]=_u(t[r],s):dl(s)?t[r]=_u({},s):jr(s)?t[r]=s.slice():t[r]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&ha(arguments[s],e);return t}const iv=(i,t,e,{allOwnKeys:s}={})=>(ha(t,(n,r)=>{e&&Ys(n)?i[r]=q_(n,e):i[r]=n},{allOwnKeys:s}),i),sv=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),nv=(i,t,e,s)=>{i.prototype=Object.create(t.prototype,s),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},rv=(i,t,e,s)=>{let n,r,o;const a={};if(t=t||{},i==null)return t;do{for(n=Object.getOwnPropertyNames(i),r=n.length;r-- >0;)o=n[r],(!s||s(o,i,t))&&!a[o]&&(t[o]=i[o],a[o]=!0);i=e!==!1&&Ld(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},ov=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const s=i.indexOf(t,e);return s!==-1&&s===e},av=i=>{if(!i)return null;if(jr(i))return i;let t=i.length;if(!Q_(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},lv=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&Ld(Uint8Array)),hv=(i,t)=>{const s=(i&&i[Symbol.iterator]).call(i);let n;for(;(n=s.next())&&!n.done;){const r=n.value;t.call(i,r[0],r[1])}},cv=(i,t)=>{let e;const s=[];for(;(e=i.exec(t))!==null;)s.push(e);return s},uv=As("HTMLFormElement"),dv=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,n){return s.toUpperCase()+n}),Zf=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),fv=As("RegExp"),s0=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),s={};ha(e,(n,r)=>{t(n,r,i)!==!1&&(s[r]=n)}),Object.defineProperties(i,s)},pv=i=>{s0(i,(t,e)=>{if(Ys(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const s=i[e];if(Ys(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},gv=(i,t)=>{const e={},s=n=>{n.forEach(r=>{e[r]=!0})};return jr(i)?s(i):s(String(i).split(t)),e},mv=()=>{},_v=(i,t)=>(i=+i,Number.isFinite(i)?i:t),dc="abcdefghijklmnopqrstuvwxyz",Jf="0123456789",n0={DIGIT:Jf,ALPHA:dc,ALPHA_DIGIT:dc+dc.toUpperCase()+Jf},yv=(i=16,t=n0.ALPHA_DIGIT)=>{let e="";const{length:s}=t;for(;i--;)e+=t[Math.random()*s|0];return e};function bv(i){return!!(i&&Ys(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const xv=i=>{const t=new Array(10),e=(s,n)=>{if(Ud(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[n]=s;const r=jr(s)?[]:{};return ha(s,(o,a)=>{const l=e(o,n+1);!Go(l)&&(r[a]=l)}),t[n]=void 0,r}}return s};return e(i,0)},W={isArray:jr,isArrayBuffer:J_,isBuffer:Wx,isFormData:Qx,isArrayBufferView:jx,isString:Xx,isNumber:Q_,isBoolean:Yx,isObject:Ud,isPlainObject:dl,isUndefined:Go,isDate:$x,isFile:Kx,isBlob:qx,isRegExp:fv,isFunction:Ys,isStream:Jx,isURLSearchParams:tv,isTypedArray:lv,isFileList:Zx,forEach:ha,merge:_u,extend:iv,trim:ev,stripBOM:sv,inherits:nv,toFlatObject:rv,kindOf:Nd,kindOfTest:As,endsWith:ov,toArray:av,forEachEntry:hv,matchAll:cv,isHTMLForm:uv,hasOwnProperty:Zf,hasOwnProp:Zf,reduceDescriptors:s0,freezeMethods:pv,toObjectSet:gv,toCamelCase:dv,noop:mv,toFiniteNumber:_v,findKey:t0,global:e0,isContextDefined:i0,ALPHABET:n0,generateString:yv,isSpecCompliantForm:bv,toJSONObject:xv};function Tt(i,t,e,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),s&&(this.request=s),n&&(this.response=n)}W.inherits(Tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const r0=Tt.prototype,o0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{o0[i]={value:i}});Object.defineProperties(Tt,o0);Object.defineProperty(r0,"isAxiosError",{value:!0});Tt.from=(i,t,e,s,n,r)=>{const o=Object.create(r0);return W.toFlatObject(i,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Tt.call(o,i.message,t,e,s,n),o.cause=i,o.name=i.name,r&&Object.assign(o,r),o};const vv=null;function yu(i){return W.isPlainObject(i)||W.isArray(i)}function a0(i){return W.endsWith(i,"[]")?i.slice(0,-2):i}function Qf(i,t,e){return i?i.concat(t).map(function(n,r){return n=a0(n),!e&&r?"["+n+"]":n}).join(e?".":""):t}function wv(i){return W.isArray(i)&&!i.some(yu)}const Sv=W.toFlatObject(W,{},null,function(t){return/^is[A-Z]/.test(t)});function Ah(i,t,e){if(!W.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=W.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!W.isUndefined(m[g])});const s=e.metaTokens,n=e.visitor||c,r=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(n))throw new TypeError("visitor must be a function");function h(p){if(p===null)return"";if(W.isDate(p))return p.toISOString();if(!l&&W.isBlob(p))throw new Tt("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(p)||W.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,g,m){let _=p;if(p&&!m&&typeof p=="object"){if(W.endsWith(g,"{}"))g=s?g:g.slice(0,-2),p=JSON.stringify(p);else if(W.isArray(p)&&wv(p)||(W.isFileList(p)||W.endsWith(g,"[]"))&&(_=W.toArray(p)))return g=a0(g),_.forEach(function(b,v){!(W.isUndefined(b)||b===null)&&t.append(o===!0?Qf([g],v,r):o===null?g:g+"[]",h(b))}),!1}return yu(p)?!0:(t.append(Qf(m,g,r),h(p)),!1)}const u=[],d=Object.assign(Sv,{defaultVisitor:c,convertValue:h,isVisitable:yu});function f(p,g){if(!W.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(p),W.forEach(p,function(_,y){(!(W.isUndefined(_)||_===null)&&n.call(t,_,W.isString(y)?y.trim():y,g,d))===!0&&f(_,g?g.concat(y):[y])}),u.pop()}}if(!W.isObject(i))throw new TypeError("data must be an object");return f(i),t}function tp(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Gd(i,t){this._pairs=[],i&&Ah(i,this,t)}const l0=Gd.prototype;l0.append=function(t,e){this._pairs.push([t,e])};l0.toString=function(t){const e=t?function(s){return t.call(this,s,tp)}:tp;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function Ev(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function h0(i,t,e){if(!t)return i;const s=e&&e.encode||Ev,n=e&&e.serialize;let r;if(n?r=n(t,e):r=W.isURLSearchParams(t)?t.toString():new Gd(t,e).toString(s),r){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+r}return i}class Tv{constructor(){this.handlers=[]}use(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){W.forEach(this.handlers,function(s){s!==null&&t(s)})}}const ep=Tv,c0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Av=typeof URLSearchParams<"u"?URLSearchParams:Gd,Cv=typeof FormData<"u"?FormData:null,Mv=typeof Blob<"u"?Blob:null,Iv=(()=>{let i;return typeof navigator<"u"&&((i=navigator.product)==="ReactNative"||i==="NativeScript"||i==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Pv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),zi={isBrowser:!0,classes:{URLSearchParams:Av,FormData:Cv,Blob:Mv},isStandardBrowserEnv:Iv,isStandardBrowserWebWorkerEnv:Pv,protocols:["http","https","file","blob","url","data"]};function Rv(i,t){return Ah(i,new zi.classes.URLSearchParams,Object.assign({visitor:function(e,s,n,r){return zi.isNode&&W.isBuffer(e)?(this.append(s,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function Dv(i){return W.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ov(i){const t={},e=Object.keys(i);let s;const n=e.length;let r;for(s=0;s<n;s++)r=e[s],t[r]=i[r];return t}function u0(i){function t(e,s,n,r){let o=e[r++];const a=Number.isFinite(+o),l=r>=e.length;return o=!o&&W.isArray(n)?n.length:o,l?(W.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!a):((!n[o]||!W.isObject(n[o]))&&(n[o]=[]),t(e,s,n[o],r)&&W.isArray(n[o])&&(n[o]=Ov(n[o])),!a)}if(W.isFormData(i)&&W.isFunction(i.entries)){const e={};return W.forEachEntry(i,(s,n)=>{t(Dv(s),n,e,0)}),e}return null}const kv={"Content-Type":void 0};function Fv(i,t,e){if(W.isString(i))try{return(t||JSON.parse)(i),W.trim(i)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(i)}const Ch={transitional:c0,adapter:["xhr","http"],transformRequest:[function(t,e){const s=e.getContentType()||"",n=s.indexOf("application/json")>-1,r=W.isObject(t);if(r&&W.isHTMLForm(t)&&(t=new FormData(t)),W.isFormData(t))return n&&n?JSON.stringify(u0(t)):t;if(W.isArrayBuffer(t)||W.isBuffer(t)||W.isStream(t)||W.isFile(t)||W.isBlob(t))return t;if(W.isArrayBufferView(t))return t.buffer;if(W.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Rv(t,this.formSerializer).toString();if((a=W.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ah(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||n?(e.setContentType("application/json",!1),Fv(t)):t}],transformResponse:[function(t){const e=this.transitional||Ch.transitional,s=e&&e.forcedJSONParsing,n=this.responseType==="json";if(t&&W.isString(t)&&(s&&!this.responseType||n)){const o=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Tt.from(a,Tt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zi.classes.FormData,Blob:zi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};W.forEach(["delete","get","head"],function(t){Ch.headers[t]={}});W.forEach(["post","put","patch"],function(t){Ch.headers[t]=W.merge(kv)});const Hd=Ch,Bv=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Lv=i=>{const t={};let e,s,n;return i&&i.split(`
`).forEach(function(o){n=o.indexOf(":"),e=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!e||t[e]&&Bv[e])&&(e==="set-cookie"?t[e]?t[e].push(s):t[e]=[s]:t[e]=t[e]?t[e]+", "+s:s)}),t},ip=Symbol("internals");function Zr(i){return i&&String(i).trim().toLowerCase()}function fl(i){return i===!1||i==null?i:W.isArray(i)?i.map(fl):String(i)}function Nv(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=e.exec(i);)t[s[1]]=s[2];return t}const Uv=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function fc(i,t,e,s,n){if(W.isFunction(s))return s.call(this,t,e);if(n&&(t=e),!!W.isString(t)){if(W.isString(s))return t.indexOf(s)!==-1;if(W.isRegExp(s))return s.test(t)}}function Gv(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,s)=>e.toUpperCase()+s)}function Hv(i,t){const e=W.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(i,s+e,{value:function(n,r,o){return this[s].call(this,t,n,r,o)},configurable:!0})})}class Mh{constructor(t){t&&this.set(t)}set(t,e,s){const n=this;function r(a,l,h){const c=Zr(l);if(!c)throw new Error("header name must be a non-empty string");const u=W.findKey(n,c);(!u||n[u]===void 0||h===!0||h===void 0&&n[u]!==!1)&&(n[u||l]=fl(a))}const o=(a,l)=>W.forEach(a,(h,c)=>r(h,c,l));return W.isPlainObject(t)||t instanceof this.constructor?o(t,e):W.isString(t)&&(t=t.trim())&&!Uv(t)?o(Lv(t),e):t!=null&&r(e,t,s),this}get(t,e){if(t=Zr(t),t){const s=W.findKey(this,t);if(s){const n=this[s];if(!e)return n;if(e===!0)return Nv(n);if(W.isFunction(e))return e.call(this,n,s);if(W.isRegExp(e))return e.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Zr(t),t){const s=W.findKey(this,t);return!!(s&&this[s]!==void 0&&(!e||fc(this,this[s],s,e)))}return!1}delete(t,e){const s=this;let n=!1;function r(o){if(o=Zr(o),o){const a=W.findKey(s,o);a&&(!e||fc(s,s[a],a,e))&&(delete s[a],n=!0)}}return W.isArray(t)?t.forEach(r):r(t),n}clear(t){const e=Object.keys(this);let s=e.length,n=!1;for(;s--;){const r=e[s];(!t||fc(this,this[r],r,t,!0))&&(delete this[r],n=!0)}return n}normalize(t){const e=this,s={};return W.forEach(this,(n,r)=>{const o=W.findKey(s,r);if(o){e[o]=fl(n),delete e[r];return}const a=t?Gv(r):String(r).trim();a!==r&&delete e[r],e[a]=fl(n),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return W.forEach(this,(s,n)=>{s!=null&&s!==!1&&(e[n]=t&&W.isArray(s)?s.join(", "):s)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const s=new this(t);return e.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[ip]=this[ip]={accessors:{}}).accessors,n=this.prototype;function r(o){const a=Zr(o);s[a]||(Hv(n,o),s[a]=!0)}return W.isArray(t)?t.forEach(r):r(t),this}}Mh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.freezeMethods(Mh.prototype);W.freezeMethods(Mh);const vs=Mh;function pc(i,t){const e=this||Hd,s=t||e,n=vs.from(s.headers);let r=s.data;return W.forEach(i,function(a){r=a.call(e,r,n.normalize(),t?t.status:void 0)}),n.normalize(),r}function d0(i){return!!(i&&i.__CANCEL__)}function ca(i,t,e){Tt.call(this,i??"canceled",Tt.ERR_CANCELED,t,e),this.name="CanceledError"}W.inherits(ca,Tt,{__CANCEL__:!0});function zv(i,t,e){const s=e.config.validateStatus;!e.status||!s||s(e.status)?i(e):t(new Tt("Request failed with status code "+e.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const Vv=zi.isStandardBrowserEnv?function(){return{write:function(e,s,n,r,o,a){const l=[];l.push(e+"="+encodeURIComponent(s)),W.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),W.isString(r)&&l.push("path="+r),W.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){const s=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Wv(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function jv(i,t){return t?i.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):i}function f0(i,t){return i&&!Wv(t)?jv(i,t):t}const Xv=zi.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let s;function n(r){let o=r;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return s=n(window.location.href),function(o){const a=W.isString(o)?n(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}();function Yv(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function $v(i,t){i=i||10;const e=new Array(i),s=new Array(i);let n=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const h=Date.now(),c=s[r];o||(o=h),e[n]=l,s[n]=h;let u=r,d=0;for(;u!==n;)d+=e[u++],u=u%i;if(n=(n+1)%i,n===r&&(r=(r+1)%i),h-o<t)return;const f=c&&h-c;return f?Math.round(d*1e3/f):void 0}}function sp(i,t){let e=0;const s=$v(50,250);return n=>{const r=n.loaded,o=n.lengthComputable?n.total:void 0,a=r-e,l=s(a),h=r<=o;e=r;const c={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&h?(o-r)/l:void 0,event:n};c[t?"download":"upload"]=!0,i(c)}}const Kv=typeof XMLHttpRequest<"u",qv=Kv&&function(i){return new Promise(function(e,s){let n=i.data;const r=vs.from(i.headers).normalize(),o=i.responseType;let a;function l(){i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}W.isFormData(n)&&(zi.isStandardBrowserEnv||zi.isStandardBrowserWebWorkerEnv)&&r.setContentType(!1);let h=new XMLHttpRequest;if(i.auth){const f=i.auth.username||"",p=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";r.set("Authorization","Basic "+btoa(f+":"+p))}const c=f0(i.baseURL,i.url);h.open(i.method.toUpperCase(),h0(c,i.params,i.paramsSerializer),!0),h.timeout=i.timeout;function u(){if(!h)return;const f=vs.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:f,config:i,request:h};zv(function(_){e(_),l()},function(_){s(_),l()},g),h=null}if("onloadend"in h?h.onloadend=u:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(u)},h.onabort=function(){h&&(s(new Tt("Request aborted",Tt.ECONNABORTED,i,h)),h=null)},h.onerror=function(){s(new Tt("Network Error",Tt.ERR_NETWORK,i,h)),h=null},h.ontimeout=function(){let p=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const g=i.transitional||c0;i.timeoutErrorMessage&&(p=i.timeoutErrorMessage),s(new Tt(p,g.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,i,h)),h=null},zi.isStandardBrowserEnv){const f=(i.withCredentials||Xv(c))&&i.xsrfCookieName&&Vv.read(i.xsrfCookieName);f&&r.set(i.xsrfHeaderName,f)}n===void 0&&r.setContentType(null),"setRequestHeader"in h&&W.forEach(r.toJSON(),function(p,g){h.setRequestHeader(g,p)}),W.isUndefined(i.withCredentials)||(h.withCredentials=!!i.withCredentials),o&&o!=="json"&&(h.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&h.addEventListener("progress",sp(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",sp(i.onUploadProgress)),(i.cancelToken||i.signal)&&(a=f=>{h&&(s(!f||f.type?new ca(null,i,h):f),h.abort(),h=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const d=Yv(c);if(d&&zi.protocols.indexOf(d)===-1){s(new Tt("Unsupported protocol "+d+":",Tt.ERR_BAD_REQUEST,i));return}h.send(n||null)})},pl={http:vv,xhr:qv};W.forEach(pl,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const Zv={getAdapter:i=>{i=W.isArray(i)?i:[i];const{length:t}=i;let e,s;for(let n=0;n<t&&(e=i[n],!(s=W.isString(e)?pl[e.toLowerCase()]:e));n++);if(!s)throw s===!1?new Tt(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(W.hasOwnProp(pl,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!W.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:pl};function gc(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new ca(null,i)}function np(i){return gc(i),i.headers=vs.from(i.headers),i.data=pc.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),Zv.getAdapter(i.adapter||Hd.adapter)(i).then(function(s){return gc(i),s.data=pc.call(i,i.transformResponse,s),s.headers=vs.from(s.headers),s},function(s){return d0(s)||(gc(i),s&&s.response&&(s.response.data=pc.call(i,i.transformResponse,s.response),s.response.headers=vs.from(s.response.headers))),Promise.reject(s)})}const rp=i=>i instanceof vs?i.toJSON():i;function Pr(i,t){t=t||{};const e={};function s(h,c,u){return W.isPlainObject(h)&&W.isPlainObject(c)?W.merge.call({caseless:u},h,c):W.isPlainObject(c)?W.merge({},c):W.isArray(c)?c.slice():c}function n(h,c,u){if(W.isUndefined(c)){if(!W.isUndefined(h))return s(void 0,h,u)}else return s(h,c,u)}function r(h,c){if(!W.isUndefined(c))return s(void 0,c)}function o(h,c){if(W.isUndefined(c)){if(!W.isUndefined(h))return s(void 0,h)}else return s(void 0,c)}function a(h,c,u){if(u in t)return s(h,c);if(u in i)return s(void 0,h)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(h,c)=>n(rp(h),rp(c),!0)};return W.forEach(Object.keys(i).concat(Object.keys(t)),function(c){const u=l[c]||n,d=u(i[c],t[c],c);W.isUndefined(d)&&u!==a||(e[c]=d)}),e}const p0="1.3.5",zd={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{zd[i]=function(s){return typeof s===i||"a"+(t<1?"n ":" ")+i}});const op={};zd.transitional=function(t,e,s){function n(r,o){return"[Axios v"+p0+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(t===!1)throw new Tt(n(o," has been removed"+(e?" in "+e:"")),Tt.ERR_DEPRECATED);return e&&!op[o]&&(op[o]=!0,console.warn(n(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,a):!0}};function Jv(i,t,e){if(typeof i!="object")throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const s=Object.keys(i);let n=s.length;for(;n-- >0;){const r=s[n],o=t[r];if(o){const a=i[r],l=a===void 0||o(a,r,i);if(l!==!0)throw new Tt("option "+r+" must be "+l,Tt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Tt("Unknown option "+r,Tt.ERR_BAD_OPTION)}}const bu={assertOptions:Jv,validators:zd},Is=bu.validators;class Nl{constructor(t){this.defaults=t,this.interceptors={request:new ep,response:new ep}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Pr(this.defaults,e);const{transitional:s,paramsSerializer:n,headers:r}=e;s!==void 0&&bu.assertOptions(s,{silentJSONParsing:Is.transitional(Is.boolean),forcedJSONParsing:Is.transitional(Is.boolean),clarifyTimeoutError:Is.transitional(Is.boolean)},!1),n!=null&&(W.isFunction(n)?e.paramsSerializer={serialize:n}:bu.assertOptions(n,{encode:Is.function,serialize:Is.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o;o=r&&W.merge(r.common,r[e.method]),o&&W.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),e.headers=vs.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(e)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const h=[];this.interceptors.response.forEach(function(g){h.push(g.fulfilled,g.rejected)});let c,u=0,d;if(!l){const p=[np.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,h),d=p.length,c=Promise.resolve(e);u<d;)c=c.then(p[u++],p[u++]);return c}d=a.length;let f=e;for(u=0;u<d;){const p=a[u++],g=a[u++];try{f=p(f)}catch(m){g.call(this,m);break}}try{c=np.call(this,f)}catch(p){return Promise.reject(p)}for(u=0,d=h.length;u<d;)c=c.then(h[u++],h[u++]);return c}getUri(t){t=Pr(this.defaults,t);const e=f0(t.baseURL,t.url);return h0(e,t.params,t.paramsSerializer)}}W.forEach(["delete","get","head","options"],function(t){Nl.prototype[t]=function(e,s){return this.request(Pr(s||{},{method:t,url:e,data:(s||{}).data}))}});W.forEach(["post","put","patch"],function(t){function e(s){return function(r,o,a){return this.request(Pr(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Nl.prototype[t]=e(),Nl.prototype[t+"Form"]=e(!0)});const gl=Nl;class Vd{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const s=this;this.promise.then(n=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](n);s._listeners=null}),this.promise.then=n=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(n);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,a){s.reason||(s.reason=new ca(r,o,a),e(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new Vd(function(n){t=n}),cancel:t}}}const Qv=Vd;function tw(i){return function(e){return i.apply(null,e)}}function ew(i){return W.isObject(i)&&i.isAxiosError===!0}const xu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xu).forEach(([i,t])=>{xu[t]=i});const iw=xu;function g0(i){const t=new gl(i),e=q_(gl.prototype.request,t);return W.extend(e,gl.prototype,t,{allOwnKeys:!0}),W.extend(e,t,null,{allOwnKeys:!0}),e.create=function(n){return g0(Pr(i,n))},e}const ce=g0(Hd);ce.Axios=gl;ce.CanceledError=ca;ce.CancelToken=Qv;ce.isCancel=d0;ce.VERSION=p0;ce.toFormData=Ah;ce.AxiosError=Tt;ce.Cancel=ce.CanceledError;ce.all=function(t){return Promise.all(t)};ce.spread=tw;ce.isAxiosError=ew;ce.mergeConfig=Pr;ce.AxiosHeaders=vs;ce.formToJSON=i=>u0(W.isHTMLForm(i)?new FormData(i):i);ce.HttpStatusCode=iw;ce.default=ce;const Wd=ce;var gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vu={},sw={get exports(){return vu},set exports(i){vu=i}};(function(i,t){(function(e,s){i.exports=s()})(gr,function(){var e=1e3,s=6e4,n=36e5,r="millisecond",o="second",a="minute",l="hour",h="day",c="week",u="month",d="quarter",f="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var w=["th","st","nd","rd"],T=R%100;return"["+R+(w[(T-20)%10]||w[T]||w[0])+"]"}},b=function(R,w,T){var B=String(R);return!B||B.length>=w?R:""+Array(w+1-B.length).join(T)+R},v={s:b,z:function(R){var w=-R.utcOffset(),T=Math.abs(w),B=Math.floor(T/60),P=T%60;return(w<=0?"+":"-")+b(B,2,"0")+":"+b(P,2,"0")},m:function R(w,T){if(w.date()<T.date())return-R(T,w);var B=12*(T.year()-w.year())+(T.month()-w.month()),P=w.clone().add(B,u),L=T-P<0,k=w.clone().add(B+(L?-1:1),u);return+(-(B+(T-P)/(L?P-k:k-P))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:u,y:f,w:c,d:h,D:p,h:l,m:a,s:o,ms:r,Q:d}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},x="en",E={};E[x]=y;var S=function(R){return R instanceof C},A=function R(w,T,B){var P;if(!w)return x;if(typeof w=="string"){var L=w.toLowerCase();E[L]&&(P=L),T&&(E[L]=T,P=L);var k=w.split("-");if(!P&&k.length>1)return R(k[0])}else{var O=w.name;E[O]=w,P=O}return!B&&P&&(x=P),P||!B&&x},M=function(R,w){if(S(R))return R.clone();var T=typeof w=="object"?w:{};return T.date=R,T.args=arguments,new C(T)},I=v;I.l=A,I.i=S,I.w=function(R,w){return M(R,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var C=function(){function R(T){this.$L=A(T.locale,null,!0),this.parse(T)}var w=R.prototype;return w.parse=function(T){this.$d=function(B){var P=B.date,L=B.utc;if(P===null)return new Date(NaN);if(I.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var k=P.match(m);if(k){var O=k[2]-1||0,U=(k[7]||"0").substring(0,3);return L?new Date(Date.UTC(k[1],O,k[3]||1,k[4]||0,k[5]||0,k[6]||0,U)):new Date(k[1],O,k[3]||1,k[4]||0,k[5]||0,k[6]||0,U)}}return new Date(P)}(T),this.$x=T.x||{},this.init()},w.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},w.$utils=function(){return I},w.isValid=function(){return this.$d.toString()!==g},w.isSame=function(T,B){var P=M(T);return this.startOf(B)<=P&&P<=this.endOf(B)},w.isAfter=function(T,B){return M(T)<this.startOf(B)},w.isBefore=function(T,B){return this.endOf(B)<M(T)},w.$g=function(T,B,P){return I.u(T)?this[B]:this.set(P,T)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(T,B){var P=this,L=!!I.u(B)||B,k=I.p(T),O=function(G,z){var V=I.w(P.$u?Date.UTC(P.$y,z,G):new Date(P.$y,z,G),P);return L?V:V.endOf(h)},U=function(G,z){return I.w(P.toDate()[G].apply(P.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(z)),P)},j=this.$W,q=this.$M,Y=this.$D,it="set"+(this.$u?"UTC":"");switch(k){case f:return L?O(1,0):O(31,11);case u:return L?O(1,q):O(0,q+1);case c:var pt=this.$locale().weekStart||0,N=(j<pt?j+7:j)-pt;return O(L?Y-N:Y+(6-N),q);case h:case p:return U(it+"Hours",0);case l:return U(it+"Minutes",1);case a:return U(it+"Seconds",2);case o:return U(it+"Milliseconds",3);default:return this.clone()}},w.endOf=function(T){return this.startOf(T,!1)},w.$set=function(T,B){var P,L=I.p(T),k="set"+(this.$u?"UTC":""),O=(P={},P[h]=k+"Date",P[p]=k+"Date",P[u]=k+"Month",P[f]=k+"FullYear",P[l]=k+"Hours",P[a]=k+"Minutes",P[o]=k+"Seconds",P[r]=k+"Milliseconds",P)[L],U=L===h?this.$D+(B-this.$W):B;if(L===u||L===f){var j=this.clone().set(p,1);j.$d[O](U),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else O&&this.$d[O](U);return this.init(),this},w.set=function(T,B){return this.clone().$set(T,B)},w.get=function(T){return this[I.p(T)]()},w.add=function(T,B){var P,L=this;T=Number(T);var k=I.p(B),O=function(q){var Y=M(L);return I.w(Y.date(Y.date()+Math.round(q*T)),L)};if(k===u)return this.set(u,this.$M+T);if(k===f)return this.set(f,this.$y+T);if(k===h)return O(1);if(k===c)return O(7);var U=(P={},P[a]=s,P[l]=n,P[o]=e,P)[k]||1,j=this.$d.getTime()+T*U;return I.w(j,this)},w.subtract=function(T,B){return this.add(-1*T,B)},w.format=function(T){var B=this,P=this.$locale();if(!this.isValid())return P.invalidDate||g;var L=T||"YYYY-MM-DDTHH:mm:ssZ",k=I.z(this),O=this.$H,U=this.$m,j=this.$M,q=P.weekdays,Y=P.months,it=function(z,V,X,rt){return z&&(z[V]||z(B,L))||X[V].slice(0,rt)},pt=function(z){return I.s(O%12||12,z,"0")},N=P.meridiem||function(z,V,X){var rt=z<12?"AM":"PM";return X?rt.toLowerCase():rt},G={YY:String(this.$y).slice(-2),YYYY:this.$y,M:j+1,MM:I.s(j+1,2,"0"),MMM:it(P.monthsShort,j,Y,3),MMMM:it(Y,j),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:it(P.weekdaysMin,this.$W,q,2),ddd:it(P.weekdaysShort,this.$W,q,3),dddd:q[this.$W],H:String(O),HH:I.s(O,2,"0"),h:pt(1),hh:pt(2),a:N(O,U,!0),A:N(O,U,!1),m:String(U),mm:I.s(U,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:k};return L.replace(_,function(z,V){return V||G[z]||k.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(T,B,P){var L,k=I.p(B),O=M(T),U=(O.utcOffset()-this.utcOffset())*s,j=this-O,q=I.m(this,O);return q=(L={},L[f]=q/12,L[u]=q,L[d]=q/3,L[c]=(j-U)/6048e5,L[h]=(j-U)/864e5,L[l]=j/n,L[a]=j/s,L[o]=j/e,L)[k]||j,P?q:I.a(q)},w.daysInMonth=function(){return this.endOf(u).$D},w.$locale=function(){return E[this.$L]},w.locale=function(T,B){if(!T)return this.$L;var P=this.clone(),L=A(T,B,!0);return L&&(P.$L=L),P},w.clone=function(){return I.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},R}(),F=C.prototype;return M.prototype=F,[["$ms",r],["$s",o],["$m",a],["$H",l],["$W",h],["$M",u],["$y",f],["$D",p]].forEach(function(R){F[R[1]]=function(w){return this.$g(w,R[0],R[1])}}),M.extend=function(R,w){return R.$i||(R(w,C,M),R.$i=!0),M},M.locale=A,M.isDayjs=S,M.unix=function(R){return M(1e3*R)},M.en=E[x],M.Ls=E,M.p={},M})})(sw);const Vi=vu;var wu={},nw={get exports(){return wu},set exports(i){wu=i}};(function(i,t){(function(e,s){i.exports=s()})(gr,function(){var e="minute",s=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,o,a){var l=o.prototype;a.utc=function(g){var m={date:g,utc:!0,args:arguments};return new o(m)},l.utc=function(g){var m=a(this.toDate(),{locale:this.$L,utc:!0});return g?m.add(this.utcOffset(),e):m},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var h=l.parse;l.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),h.call(this,g)};var c=l.init;l.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else c.call(this)};var u=l.utcOffset;l.utcOffset=function(g,m){var _=this.$utils().u;if(_(g))return this.$u?0:_(this.$offset)?u.call(this):this.$offset;if(typeof g=="string"&&(g=function(x){x===void 0&&(x="");var E=x.match(s);if(!E)return null;var S=(""+E[0]).match(n)||["-",0,0],A=S[0],M=60*+S[1]+ +S[2];return M===0?0:A==="+"?M:-M}(g),g===null))return this;var y=Math.abs(g)<=16?60*g:g,b=this;if(m)return b.$offset=y,b.$u=g===0,b;if(g!==0){var v=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(y+v,e)).$offset=y,b.$x.$localOffset=v}else b=this.utc();return b};var d=l.format;l.format=function(g){var m=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,m)},l.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*g},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var f=l.toDate;l.toDate=function(g){return g==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var p=l.diff;l.diff=function(g,m,_){if(g&&this.$u===g.$u)return p.call(this,g,m,_);var y=this.local(),b=a(g).local();return p.call(y,b,m,_)}}})})(nw);const m0=wu;var Su={},rw={get exports(){return Su},set exports(i){Su=i}};(function(i,t){(function(e,s){i.exports=s()})(gr,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},s={};return function(n,r,o){var a,l=function(d,f,p){p===void 0&&(p={});var g=new Date(d),m=function(_,y){y===void 0&&(y={});var b=y.timeZoneName||"short",v=_+"|"+b,x=s[v];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:_,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),s[v]=x),x}(f,p);return m.formatToParts(g)},h=function(d,f){for(var p=l(d,f),g=[],m=0;m<p.length;m+=1){var _=p[m],y=_.type,b=_.value,v=e[y];v>=0&&(g[v]=parseInt(b,10))}var x=g[3],E=x===24?0:x,S=g[0]+"-"+g[1]+"-"+g[2]+" "+E+":"+g[4]+":"+g[5]+":000",A=+d;return(o.utc(S).valueOf()-(A-=A%1e3))/6e4},c=r.prototype;c.tz=function(d,f){d===void 0&&(d=a);var p=this.utcOffset(),g=this.toDate(),m=g.toLocaleString("en-US",{timeZone:d}),_=Math.round((g-new Date(m))/1e3/60),y=o(m).$set("millisecond",this.$ms).utcOffset(15*-Math.round(g.getTimezoneOffset()/15)-_,!0);if(f){var b=y.utcOffset();y=y.add(p-b,"minute")}return y.$x.$timezone=d,y},c.offsetName=function(d){var f=this.$x.$timezone||o.tz.guess(),p=l(this.valueOf(),f,{timeZoneName:d}).find(function(g){return g.type.toLowerCase()==="timezonename"});return p&&p.value};var u=c.startOf;c.startOf=function(d,f){if(!this.$x||!this.$x.$timezone)return u.call(this,d,f);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return u.call(p,d,f).tz(this.$x.$timezone,!0)},o.tz=function(d,f,p){var g=p&&f,m=p||f||a,_=h(+o(),m);if(typeof d!="string")return o(d).tz(m);var y=function(E,S,A){var M=E-60*S*1e3,I=h(M,A);if(S===I)return[M,S];var C=h(M-=60*(I-S)*1e3,A);return I===C?[M,I]:[E-60*Math.min(I,C)*1e3,Math.max(I,C)]}(o.utc(d,g).valueOf(),_,m),b=y[0],v=y[1],x=o(b).utcOffset(v);return x.$x.$timezone=m,x},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(rw);const _0=Su;function ow(i){let t;return{c(){t=J("div"),t.innerHTML=`<h1>ðŸ’€</h1> 
	<h1>Uh oh...</h1> 
	<p class="svelte-1n84pnv">Something went wrong.</p> 
	<p class="svelte-1n84pnv">Try refreshing the page.</p>`,H(t,"class","error svelte-1n84pnv")},m(e,s){ct(e,t,s)},p:st,i:st,o:st,d(e){e&&ht(t)}}}let aw=class extends te{constructor(t){super(),Qt(this,t,null,ow,$t,{})}};const lw="/assets/logo-b904ad33.svg",hw="/assets/help-icon-1ee29c03.svg",qn=[];function di(i,t=st){let e;const s=new Set;function n(a){if($t(i,a)&&(i=a,e)){const l=!qn.length;for(const h of s)h[1](),qn.push(h,i);if(l){for(let h=0;h<qn.length;h+=2)qn[h][0](qn[h+1]);qn.length=0}}}function r(a){n(a(i))}function o(a,l=st){const h=[a,l];return s.add(h),s.size===1&&(e=t(n)||st),a(i),()=>{s.delete(h),s.size===0&&e&&(e(),e=null)}}return{set:n,update:r,subscribe:o}}const y0=di(null),Ul=di(!1),jd=di(!1);function cw(i){let t,e,s,n,r;return{c(){t=J("button"),e=J("img"),Ji(e.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${i[1].toLowerCase()}.svg`)||H(e,"src",s),H(e,"alt","flag"),H(e,"class","svelte-1kk75fg"),H(t,"class","flag svelte-1kk75fg")},m(o,a){ct(o,t,a),Z(t,e),n||(r=kt(t,"click",i[3]),n=!0)},p:st,d(o){o&&ht(t),n=!1,r()}}}function uw(i){let t,e,s,n,r;return{c(){t=J("button"),e=J("img"),Ji(e.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${i[0].toLowerCase()}.svg`)||H(e,"src",s),H(e,"alt","flag"),H(e,"class","svelte-1kk75fg"),H(t,"class","flag svelte-1kk75fg")},m(o,a){ct(o,t,a),Z(t,e),n||(r=kt(t,"click",i[2]),n=!0)},p(o,a){a&1&&!Ji(e.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${o[0].toLowerCase()}.svg`)&&H(e,"src",s)},d(o){o&&ht(t),n=!1,r()}}}function dw(i){let t,e,s,n,r,o,a,l,h,c,u,d,f;function p(_,y){if(_[0])return uw;if(_[1])return cw}let g=p(i),m=g&&g(i);return{c(){t=J("header"),e=J("div"),s=J("img"),r=xt(),o=J("h1"),o.textContent="KUBEL.io",a=xt(),m&&m.c(),l=xt(),h=J("button"),c=J("img"),Ji(s.src,n=lw)||H(s,"src",n),H(s,"alt","Kubel"),H(s,"class","svelte-1kk75fg"),H(o,"class","svelte-1kk75fg"),H(e,"class","logo svelte-1kk75fg"),Ji(c.src,u=hw)||H(c,"src",u),H(c,"alt","help"),H(c,"class","svelte-1kk75fg"),H(h,"class","help svelte-1kk75fg"),H(t,"class","svelte-1kk75fg")},m(_,y){ct(_,t,y),Z(t,e),Z(e,s),Z(e,r),Z(e,o),Z(t,a),m&&m.m(t,null),Z(t,l),Z(t,h),Z(h,c),d||(f=kt(h,"click",i[4]),d=!0)},p(_,[y]){g===(g=p(_))&&m?m.p(_,y):(m&&m.d(1),m=g&&g(_),m&&(m.c(),m.m(t,l)))},i:st,o:st,d(_){_&&ht(t),m&&m.d(),d=!1,f()}}}function fw(i,t,e){let s;ii(i,y0,l=>e(0,s=l));let n=localStorage.getItem("userCountry");return[s,n,()=>Ul.set(!0),()=>Ul.set(!0),()=>{jd.set(!0)}]}class pw extends te{constructor(t){super(),Qt(this,t,fw,dw,$t,{})}}const b0=di(null),hr=di(0),Eo=di(!1),Gl=di(!0),Eu=di(!1),gw=di([[]]),Hl=di(),zl=di(!1),ml=di(null);var Hn=(i=>(i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2",i))(Hn||{}),x0=(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS",i))(x0||{}),Tu=(i=>(i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL",i))(Tu||{}),mt=(i=>(i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR",i))(mt||{}),Wi=(i=>(i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN",i))(Wi||{}),K=(i=>(i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.RG=33319]="RG",i[i.RED=6403]="RED",i[i.RGBA_INTEGER=36249]="RGBA_INTEGER",i[i.RGB_INTEGER=36248]="RGB_INTEGER",i[i.RG_INTEGER=33320]="RG_INTEGER",i[i.RED_INTEGER=36244]="RED_INTEGER",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",i))(K||{}),mr=(i=>(i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i))(mr||{}),gt=(i=>(i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",i[i.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",i[i.BYTE=5120]="BYTE",i[i.SHORT=5122]="SHORT",i[i.INT=5124]="INT",i[i.FLOAT=5126]="FLOAT",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",i[i.HALF_FLOAT=36193]="HALF_FLOAT",i))(gt||{}),Au=(i=>(i[i.FLOAT=0]="FLOAT",i[i.INT=1]="INT",i[i.UINT=2]="UINT",i))(Au||{}),_s=(i=>(i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR",i))(_s||{}),Hs=(i=>(i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",i))(Hs||{}),Qi=(i=>(i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL",i))(Qi||{}),Oi=(i=>(i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",i))(Oi||{}),Ui=(i=>(i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT",i))(Ui||{}),Xd=(i=>(i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL",i))(Xd||{}),si=(i=>(i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp",i))(si||{}),oe=(i=>(i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",i[i.COLOR=4]="COLOR",i))(oe||{}),se=(i=>(i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH",i))(se||{}),Yi=(i=>(i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",i))(Yi||{});const mw={createCanvas:(i,t)=>{const e=document.createElement("canvas");return e.width=i,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,t)=>fetch(i,t),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")},Q={ADAPTER:mw,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var mc=/iPhone/i,ap=/iPod/i,lp=/iPad/i,hp=/\biOS-universal(?:.+)Mac\b/i,_c=/\bAndroid(?:.+)Mobile\b/i,cp=/Android/i,Zn=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ta=/Silk/i,ls=/Windows Phone/i,up=/\bWindows(?:.+)ARM\b/i,dp=/BlackBerry/i,fp=/BB10/i,pp=/Opera Mini/i,gp=/\b(CriOS|Chrome)(?:.+)Mobile/i,mp=/Mobile(?:.+)Firefox\b/i,_p=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function _w(i){return function(t){return t.test(i)}}function yp(i){var t={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?t.userAgent=i:i&&i.userAgent&&(t={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var e=t.userAgent,s=e.split("[FBAN");typeof s[1]<"u"&&(e=s[0]),s=e.split("Twitter"),typeof s[1]<"u"&&(e=s[0]);var n=_w(e),r={apple:{phone:n(mc)&&!n(ls),ipod:n(ap),tablet:!n(mc)&&(n(lp)||_p(t))&&!n(ls),universal:n(hp),device:(n(mc)||n(ap)||n(lp)||n(hp)||_p(t))&&!n(ls)},amazon:{phone:n(Zn),tablet:!n(Zn)&&n(Ta),device:n(Zn)||n(Ta)},android:{phone:!n(ls)&&n(Zn)||!n(ls)&&n(_c),tablet:!n(ls)&&!n(Zn)&&!n(_c)&&(n(Ta)||n(cp)),device:!n(ls)&&(n(Zn)||n(Ta)||n(_c)||n(cp))||n(/\bokhttp\b/i)},windows:{phone:n(ls),tablet:n(up),device:n(ls)||n(up)},other:{blackberry:n(dp),blackberry10:n(fp),opera:n(pp),firefox:n(mp),chrome:n(gp),device:n(dp)||n(fp)||n(pp)||n(mp)||n(gp)},any:!1,phone:!1,tablet:!1};return r.any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}const yw=yp.default??yp,ys=yw(globalThis.navigator);Q.RETINA_PREFIX=/@([0-9\.]+)x/;Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var On={},bw={get exports(){return On},set exports(i){On=i}};(function(i){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function n(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function r(l,h,c,u,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new n(c,u||l,d),p=e?e+h:h;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new s:delete l._events[h]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],c,u;if(this._eventsCount===0)return h;for(u in c=this._events)t.call(c,u)&&h.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},a.prototype.listeners=function(h){var c=e?e+h:h,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},a.prototype.listenerCount=function(h){var c=e?e+h:h,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(h,c,u,d,f,p){var g=e?e+h:h;if(!this._events[g])return!1;var m=this._events[g],_=arguments.length,y,b;if(m.fn){switch(m.once&&this.removeListener(h,m.fn,void 0,!0),_){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,u),!0;case 4:return m.fn.call(m.context,c,u,d),!0;case 5:return m.fn.call(m.context,c,u,d,f),!0;case 6:return m.fn.call(m.context,c,u,d,f,p),!0}for(b=1,y=new Array(_-1);b<_;b++)y[b-1]=arguments[b];m.fn.apply(m.context,y)}else{var v=m.length,x;for(b=0;b<v;b++)switch(m[b].once&&this.removeListener(h,m[b].fn,void 0,!0),_){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,c);break;case 3:m[b].fn.call(m[b].context,c,u);break;case 4:m[b].fn.call(m[b].context,c,u,d);break;default:if(!y)for(x=1,y=new Array(_-1);x<_;x++)y[x-1]=arguments[x];m[b].fn.apply(m[b].context,y)}}return!0},a.prototype.on=function(h,c,u){return r(this,h,c,u,!1)},a.prototype.once=function(h,c,u){return r(this,h,c,u,!0)},a.prototype.removeListener=function(h,c,u,d){var f=e?e+h:h;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!d||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var g=0,m=[],_=p.length;g<_;g++)(p[g].fn!==c||d&&!p[g].once||u&&p[g].context!==u)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(h){var c;return h?(c=e?e+h:h,this._events[c]&&o(this,c)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,i.exports=a})(bw);var Vl={},xw={get exports(){return Vl},set exports(i){Vl=i}};xw.exports=Ih;Vl.default=Ih;function Ih(i,t,e){e=e||2;var s=t&&t.length,n=s?t[0]*e:i.length,r=v0(i,0,n,e,!0),o=[];if(!r||r.next===r.prev)return o;var a,l,h,c,u,d,f;if(s&&(r=Tw(i,t,r,e)),i.length>80*e){a=h=i[0],l=c=i[1];for(var p=e;p<n;p+=e)u=i[p],d=i[p+1],u<a&&(a=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);f=Math.max(h-a,c-l),f=f!==0?32767/f:0}return Ho(r,o,e,a,l,f,0),o}function v0(i,t,e,s,n){var r,o;if(n===Iu(i,t,e,s)>0)for(r=t;r<e;r+=s)o=bp(r,i[r],i[r+1],o);else for(r=e-s;r>=t;r-=s)o=bp(r,i[r],i[r+1],o);return o&&Ph(o,o.next)&&(Vo(o),o=o.next),o}function kn(i,t){if(!i)return i;t||(t=i);var e=i,s;do if(s=!1,!e.steiner&&(Ph(e,e.next)||jt(e.prev,e,e.next)===0)){if(Vo(e),e=t=e.prev,e===e.next)break;s=!0}else e=e.next;while(s||e!==t);return t}function Ho(i,t,e,s,n,r,o){if(i){!o&&r&&Pw(i,s,n,r);for(var a=i,l,h;i.prev!==i.next;){if(l=i.prev,h=i.next,r?ww(i,s,n,r):vw(i)){t.push(l.i/e|0),t.push(i.i/e|0),t.push(h.i/e|0),Vo(i),i=h.next,a=h.next;continue}if(i=h,i===a){o?o===1?(i=Sw(kn(i),t,e),Ho(i,t,e,s,n,r,2)):o===2&&Ew(i,t,e,s,n,r):Ho(kn(i),t,e,s,n,r,1);break}}}}function vw(i){var t=i.prev,e=i,s=i.next;if(jt(t,e,s)>=0)return!1;for(var n=t.x,r=e.x,o=s.x,a=t.y,l=e.y,h=s.y,c=n<r?n<o?n:o:r<o?r:o,u=a<l?a<h?a:h:l<h?l:h,d=n>r?n>o?n:o:r>o?r:o,f=a>l?a>h?a:h:l>h?l:h,p=s.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=u&&p.y<=f&&cr(n,a,r,l,o,h,p.x,p.y)&&jt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function ww(i,t,e,s){var n=i.prev,r=i,o=i.next;if(jt(n,r,o)>=0)return!1;for(var a=n.x,l=r.x,h=o.x,c=n.y,u=r.y,d=o.y,f=a<l?a<h?a:h:l<h?l:h,p=c<u?c<d?c:d:u<d?u:d,g=a>l?a>h?a:h:l>h?l:h,m=c>u?c>d?c:d:u>d?u:d,_=Cu(f,p,t,e,s),y=Cu(g,m,t,e,s),b=i.prevZ,v=i.nextZ;b&&b.z>=_&&v&&v.z<=y;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=m&&b!==n&&b!==o&&cr(a,c,l,u,h,d,b.x,b.y)&&jt(b.prev,b,b.next)>=0||(b=b.prevZ,v.x>=f&&v.x<=g&&v.y>=p&&v.y<=m&&v!==n&&v!==o&&cr(a,c,l,u,h,d,v.x,v.y)&&jt(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;b&&b.z>=_;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=m&&b!==n&&b!==o&&cr(a,c,l,u,h,d,b.x,b.y)&&jt(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;v&&v.z<=y;){if(v.x>=f&&v.x<=g&&v.y>=p&&v.y<=m&&v!==n&&v!==o&&cr(a,c,l,u,h,d,v.x,v.y)&&jt(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Sw(i,t,e){var s=i;do{var n=s.prev,r=s.next.next;!Ph(n,r)&&w0(n,s,s.next,r)&&zo(n,r)&&zo(r,n)&&(t.push(n.i/e|0),t.push(s.i/e|0),t.push(r.i/e|0),Vo(s),Vo(s.next),s=i=r),s=s.next}while(s!==i);return kn(s)}function Ew(i,t,e,s,n,r){var o=i;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Ow(o,a)){var l=S0(o,a);o=kn(o,o.next),l=kn(l,l.next),Ho(o,t,e,s,n,r,0),Ho(l,t,e,s,n,r,0);return}a=a.next}o=o.next}while(o!==i)}function Tw(i,t,e,s){var n=[],r,o,a,l,h;for(r=0,o=t.length;r<o;r++)a=t[r]*s,l=r<o-1?t[r+1]*s:i.length,h=v0(i,a,l,s,!1),h===h.next&&(h.steiner=!0),n.push(Dw(h));for(n.sort(Aw),r=0;r<n.length;r++)e=Cw(n[r],e);return e}function Aw(i,t){return i.x-t.x}function Cw(i,t){var e=Mw(i,t);if(!e)return t;var s=S0(e,i);return kn(s,s.next),kn(e,e.next)}function Mw(i,t){var e=t,s=i.x,n=i.y,r=-1/0,o;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var a=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=s&&a>r&&(r=a,o=e.x<e.next.x?e:e.next,a===s))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,h=o.x,c=o.y,u=1/0,d;e=o;do s>=e.x&&e.x>=h&&s!==e.x&&cr(n<c?s:r,n,h,c,n<c?r:s,n,e.x,e.y)&&(d=Math.abs(n-e.y)/(s-e.x),zo(e,i)&&(d<u||d===u&&(e.x>o.x||e.x===o.x&&Iw(o,e)))&&(o=e,u=d)),e=e.next;while(e!==l);return o}function Iw(i,t){return jt(i.prev,i,t.prev)<0&&jt(t.next,i,i.next)<0}function Pw(i,t,e,s){var n=i;do n.z===0&&(n.z=Cu(n.x,n.y,t,e,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==i);n.prevZ.nextZ=null,n.prevZ=null,Rw(n)}function Rw(i){var t,e,s,n,r,o,a,l,h=1;do{for(e=i,i=null,r=null,o=0;e;){for(o++,s=e,a=0,t=0;t<h&&(a++,s=s.nextZ,!!s);t++);for(l=h;a>0||l>0&&s;)a!==0&&(l===0||!s||e.z<=s.z)?(n=e,e=e.nextZ,a--):(n=s,s=s.nextZ,l--),r?r.nextZ=n:i=n,n.prevZ=r,r=n;e=s}r.nextZ=null,h*=2}while(o>1);return i}function Cu(i,t,e,s,n){return i=(i-e)*n|0,t=(t-s)*n|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function Dw(i){var t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function cr(i,t,e,s,n,r,o,a){return(n-o)*(t-a)>=(i-o)*(r-a)&&(i-o)*(s-a)>=(e-o)*(t-a)&&(e-o)*(r-a)>=(n-o)*(s-a)}function Ow(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!kw(i,t)&&(zo(i,t)&&zo(t,i)&&Fw(i,t)&&(jt(i.prev,i,t.prev)||jt(i,t.prev,t))||Ph(i,t)&&jt(i.prev,i,i.next)>0&&jt(t.prev,t,t.next)>0)}function jt(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Ph(i,t){return i.x===t.x&&i.y===t.y}function w0(i,t,e,s){var n=Ca(jt(i,t,e)),r=Ca(jt(i,t,s)),o=Ca(jt(e,s,i)),a=Ca(jt(e,s,t));return!!(n!==r&&o!==a||n===0&&Aa(i,e,t)||r===0&&Aa(i,s,t)||o===0&&Aa(e,i,s)||a===0&&Aa(e,t,s))}function Aa(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function Ca(i){return i>0?1:i<0?-1:0}function kw(i,t){var e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&w0(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function zo(i,t){return jt(i.prev,i,i.next)<0?jt(i,t,i.next)>=0&&jt(i,i.prev,t)>=0:jt(i,t,i.prev)<0||jt(i,i.next,t)<0}function Fw(i,t){var e=i,s=!1,n=(i.x+t.x)/2,r=(i.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&n<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(s=!s),e=e.next;while(e!==i);return s}function S0(i,t){var e=new Mu(i.i,i.x,i.y),s=new Mu(t.i,t.x,t.y),n=i.next,r=t.prev;return i.next=t,t.prev=i,e.next=n,n.prev=e,s.next=e,e.prev=s,r.next=s,s.prev=r,s}function bp(i,t,e,s){var n=new Mu(i,t,e);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function Vo(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Mu(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ih.deviation=function(i,t,e,s){var n=t&&t.length,r=n?t[0]*e:i.length,o=Math.abs(Iu(i,0,r,e));if(n)for(var a=0,l=t.length;a<l;a++){var h=t[a]*e,c=a<l-1?t[a+1]*e:i.length;o-=Math.abs(Iu(i,h,c,e))}var u=0;for(a=0;a<s.length;a+=3){var d=s[a]*e,f=s[a+1]*e,p=s[a+2]*e;u+=Math.abs((i[d]-i[p])*(i[f+1]-i[d+1])-(i[d]-i[f])*(i[p+1]-i[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function Iu(i,t,e,s){for(var n=0,r=t,o=e-s;r<e;r+=s)n+=(i[o]-i[r])*(i[r+1]+i[o+1]),o=r;return n}Ih.flatten=function(i){for(var t=i[0][0].length,e={vertices:[],holes:[],dimensions:t},s=0,n=0;n<i.length;n++){for(var r=0;r<i[n].length;r++)for(var o=0;o<t;o++)e.vertices.push(i[n][r][o]);n>0&&(s+=i[n-1].length,e.holes.push(s))}return e};var Wl={},Bw={get exports(){return Wl},set exports(i){Wl=i}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(i,t){(function(e){var s=t&&!t.nodeType&&t,n=i&&!i.nodeType&&i,r=typeof gr=="object"&&gr;(r.global===r||r.window===r||r.self===r)&&(e=r);var o,a=2147483647,l=36,h=1,c=26,u=38,d=700,f=72,p=128,g="-",m=/^xn--/,_=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=l-h,x=Math.floor,E=String.fromCharCode,S;function A(O){throw RangeError(b[O])}function M(O,U){for(var j=O.length,q=[];j--;)q[j]=U(O[j]);return q}function I(O,U){var j=O.split("@"),q="";j.length>1&&(q=j[0]+"@",O=j[1]),O=O.replace(y,".");var Y=O.split("."),it=M(Y,U).join(".");return q+it}function C(O){for(var U=[],j=0,q=O.length,Y,it;j<q;)Y=O.charCodeAt(j++),Y>=55296&&Y<=56319&&j<q?(it=O.charCodeAt(j++),(it&64512)==56320?U.push(((Y&1023)<<10)+(it&1023)+65536):(U.push(Y),j--)):U.push(Y);return U}function F(O){return M(O,function(U){var j="";return U>65535&&(U-=65536,j+=E(U>>>10&1023|55296),U=56320|U&1023),j+=E(U),j}).join("")}function R(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:l}function w(O,U){return O+22+75*(O<26)-((U!=0)<<5)}function T(O,U,j){var q=0;for(O=j?x(O/d):O>>1,O+=x(O/U);O>v*c>>1;q+=l)O=x(O/v);return x(q+(v+1)*O/(O+u))}function B(O){var U=[],j=O.length,q,Y=0,it=p,pt=f,N,G,z,V,X,rt,at,lt,re;for(N=O.lastIndexOf(g),N<0&&(N=0),G=0;G<N;++G)O.charCodeAt(G)>=128&&A("not-basic"),U.push(O.charCodeAt(G));for(z=N>0?N+1:0;z<j;){for(V=Y,X=1,rt=l;z>=j&&A("invalid-input"),at=R(O.charCodeAt(z++)),(at>=l||at>x((a-Y)/X))&&A("overflow"),Y+=at*X,lt=rt<=pt?h:rt>=pt+c?c:rt-pt,!(at<lt);rt+=l)re=l-lt,X>x(a/re)&&A("overflow"),X*=re;q=U.length+1,pt=T(Y-V,q,V==0),x(Y/q)>a-it&&A("overflow"),it+=x(Y/q),Y%=q,U.splice(Y++,0,it)}return F(U)}function P(O){var U,j,q,Y,it,pt,N,G,z,V,X,rt=[],at,lt,re,fi;for(O=C(O),at=O.length,U=p,j=0,it=f,pt=0;pt<at;++pt)X=O[pt],X<128&&rt.push(E(X));for(q=Y=rt.length,Y&&rt.push(g);q<at;){for(N=a,pt=0;pt<at;++pt)X=O[pt],X>=U&&X<N&&(N=X);for(lt=q+1,N-U>x((a-j)/lt)&&A("overflow"),j+=(N-U)*lt,U=N,pt=0;pt<at;++pt)if(X=O[pt],X<U&&++j>a&&A("overflow"),X==U){for(G=j,z=l;V=z<=it?h:z>=it+c?c:z-it,!(G<V);z+=l)fi=G-V,re=l-V,rt.push(E(w(V+fi%re,0))),G=x(fi/re);rt.push(E(w(G,0))),it=T(j,lt,q==Y),j=0,++q}++j,++U}return rt.join("")}function L(O){return I(O,function(U){return m.test(U)?B(U.slice(4).toLowerCase()):U})}function k(O){return I(O,function(U){return _.test(U)?"xn--"+P(U):U})}if(o={version:"1.3.2",ucs2:{decode:C,encode:F},decode:B,encode:P,toASCII:k,toUnicode:L},s&&n)if(i.exports==s)n.exports=o;else for(S in o)o.hasOwnProperty(S)&&(s[S]=o[S]);else e.punycode=o})(gr)})(Bw,Wl);var Lw={isString:function(i){return typeof i=="string"},isObject:function(i){return typeof i=="object"&&i!==null},isNull:function(i){return i===null},isNullOrUndefined:function(i){return i==null}},Wo={};function Nw(i,t){return Object.prototype.hasOwnProperty.call(i,t)}var Uw=function(i,t,e,s){t=t||"&",e=e||"=";var n={};if(typeof i!="string"||i.length===0)return n;var r=/\+/g;i=i.split(t);var o=1e3;s&&typeof s.maxKeys=="number"&&(o=s.maxKeys);var a=i.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var h=i[l].replace(r,"%20"),c=h.indexOf(e),u,d,f,p;c>=0?(u=h.substr(0,c),d=h.substr(c+1)):(u=h,d=""),f=decodeURIComponent(u),p=decodeURIComponent(d),Nw(n,f)?Array.isArray(n[f])?n[f].push(p):n[f]=[n[f],p]:n[f]=p}return n},Jr=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}},Gw=function(i,t,e,s){return t=t||"&",e=e||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(n){var r=encodeURIComponent(Jr(n))+e;return Array.isArray(i[n])?i[n].map(function(o){return r+encodeURIComponent(Jr(o))}).join(t):r+encodeURIComponent(Jr(i[n]))}).join(t):s?encodeURIComponent(Jr(s))+e+encodeURIComponent(Jr(i)):""};Wo.decode=Wo.parse=Uw;Wo.encode=Wo.stringify=Gw;var Hw=Wl,Gi=Lw,zw=Rh,Vw=tS,Ww=Qw;function Ti(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var jw=/^([a-z0-9.+-]+:)/i,Xw=/:[0-9]*$/,Yw=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,$w=["<",">",'"',"`"," ","\r",`
`,"	"],Kw=["{","}","|","\\","^","`"].concat($w),Pu=["'"].concat(Kw),xp=["%","/","?",";","#"].concat(Pu),vp=["/","?","#"],qw=255,wp=/^[+a-z0-9A-Z_-]{0,63}$/,Zw=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Jw={javascript:!0,"javascript:":!0},Ru={javascript:!0,"javascript:":!0},_r={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Du=Wo;function Rh(i,t,e){if(i&&Gi.isObject(i)&&i instanceof Ti)return i;var s=new Ti;return s.parse(i,t,e),s}Ti.prototype.parse=function(i,t,e){if(!Gi.isString(i))throw new TypeError("Parameter 'url' must be a string, not "+typeof i);var s=i.indexOf("?"),n=s!==-1&&s<i.indexOf("#")?"?":"#",r=i.split(n),o=/\\/g;r[0]=r[0].replace(o,"/"),i=r.join(n);var a=i;if(a=a.trim(),!e&&i.split("#").length===1){var l=Yw.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Du.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=jw.exec(a);if(h){h=h[0];var c=h.toLowerCase();this.protocol=c,a=a.substr(h.length)}if(e||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=a.substr(0,2)==="//";u&&!(h&&Ru[h])&&(a=a.substr(2),this.slashes=!0)}if(!Ru[h]&&(u||h&&!_r[h])){for(var d=-1,f=0;f<vp.length;f++){var p=a.indexOf(vp[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var g,m;d===-1?m=a.lastIndexOf("@"):m=a.lastIndexOf("@",d),m!==-1&&(g=a.slice(0,m),a=a.slice(m+1),this.auth=decodeURIComponent(g)),d=-1;for(var f=0;f<xp.length;f++){var p=a.indexOf(xp[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var y=this.hostname.split(/\./),f=0,b=y.length;f<b;f++){var v=y[f];if(v&&!v.match(wp)){for(var x="",E=0,S=v.length;E<S;E++)v.charCodeAt(E)>127?x+="x":x+=v[E];if(!x.match(wp)){var A=y.slice(0,f),M=y.slice(f+1),I=v.match(Zw);I&&(A.push(I[1]),M.unshift(I[2])),M.length&&(a="/"+M.join(".")+a),this.hostname=A.join(".");break}}}this.hostname.length>qw?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=Hw.toASCII(this.hostname));var C=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+C,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!Jw[c])for(var f=0,b=Pu.length;f<b;f++){var R=Pu[f];if(a.indexOf(R)!==-1){var w=encodeURIComponent(R);w===R&&(w=escape(R)),a=a.split(R).join(w)}}var T=a.indexOf("#");T!==-1&&(this.hash=a.substr(T),a=a.slice(0,T));var B=a.indexOf("?");if(B!==-1?(this.search=a.substr(B),this.query=a.substr(B+1),t&&(this.query=Du.parse(this.query)),a=a.slice(0,B)):t&&(this.search="",this.query={}),a&&(this.pathname=a),_r[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var C=this.pathname||"",P=this.search||"";this.path=C+P}return this.href=this.format(),this};function Qw(i){return Gi.isString(i)&&(i=Rh(i)),i instanceof Ti?i.format():Ti.prototype.format.call(i)}Ti.prototype.format=function(){var i=this.auth||"";i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":"),i+="@");var t=this.protocol||"",e=this.pathname||"",s=this.hash||"",n=!1,r="";this.host?n=i+this.host:this.hostname&&(n=i+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Gi.isObject(this.query)&&Object.keys(this.query).length&&(r=Du.stringify(this.query));var o=this.search||r&&"?"+r||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||_r[t])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),s&&s.charAt(0)!=="#"&&(s="#"+s),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+n+e+o+s};function tS(i,t){return Rh(i,!1,!0).resolve(t)}Ti.prototype.resolve=function(i){return this.resolveObject(Rh(i,!1,!0)).format()};Ti.prototype.resolveObject=function(i){if(Gi.isString(i)){var t=new Ti;t.parse(i,!1,!0),i=t}for(var e=new Ti,s=Object.keys(this),n=0;n<s.length;n++){var r=s[n];e[r]=this[r]}if(e.hash=i.hash,i.href==="")return e.href=e.format(),e;if(i.slashes&&!i.protocol){for(var o=Object.keys(i),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(e[l]=i[l])}return _r[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(i.protocol&&i.protocol!==e.protocol){if(!_r[i.protocol]){for(var h=Object.keys(i),c=0;c<h.length;c++){var u=h[c];e[u]=i[u]}return e.href=e.format(),e}if(e.protocol=i.protocol,!i.host&&!Ru[i.protocol]){for(var b=(i.pathname||"").split("/");b.length&&!(i.host=b.shift()););i.host||(i.host=""),i.hostname||(i.hostname=""),b[0]!==""&&b.unshift(""),b.length<2&&b.unshift(""),e.pathname=b.join("/")}else e.pathname=i.pathname;if(e.search=i.search,e.query=i.query,e.host=i.host||"",e.auth=i.auth,e.hostname=i.hostname||i.host,e.port=i.port,e.pathname||e.search){var d=e.pathname||"",f=e.search||"";e.path=d+f}return e.slashes=e.slashes||i.slashes,e.href=e.format(),e}var p=e.pathname&&e.pathname.charAt(0)==="/",g=i.host||i.pathname&&i.pathname.charAt(0)==="/",m=g||p||e.host&&i.pathname,_=m,y=e.pathname&&e.pathname.split("/")||[],b=i.pathname&&i.pathname.split("/")||[],v=e.protocol&&!_r[e.protocol];if(v&&(e.hostname="",e.port=null,e.host&&(y[0]===""?y[0]=e.host:y.unshift(e.host)),e.host="",i.protocol&&(i.hostname=null,i.port=null,i.host&&(b[0]===""?b[0]=i.host:b.unshift(i.host)),i.host=null),m=m&&(b[0]===""||y[0]==="")),g)e.host=i.host||i.host===""?i.host:e.host,e.hostname=i.hostname||i.hostname===""?i.hostname:e.hostname,e.search=i.search,e.query=i.query,y=b;else if(b.length)y||(y=[]),y.pop(),y=y.concat(b),e.search=i.search,e.query=i.query;else if(!Gi.isNullOrUndefined(i.search)){if(v){e.hostname=e.host=y.shift();var x=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;x&&(e.auth=x.shift(),e.host=e.hostname=x.shift())}return e.search=i.search,e.query=i.query,(!Gi.isNull(e.pathname)||!Gi.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!y.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var E=y.slice(-1)[0],S=(e.host||i.host||y.length>1)&&(E==="."||E==="..")||E==="",A=0,M=y.length;M>=0;M--)E=y[M],E==="."?y.splice(M,1):E===".."?(y.splice(M,1),A++):A&&(y.splice(M,1),A--);if(!m&&!_)for(;A--;A)y.unshift("..");m&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),S&&y.join("/").substr(-1)!=="/"&&y.push("");var I=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(v){e.hostname=e.host=I?"":y.length?y.shift():"";var x=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;x&&(e.auth=x.shift(),e.host=e.hostname=x.shift())}return m=m||e.host&&y.length,m&&!I&&y.unshift(""),y.length?e.pathname=y.join("/"):(e.pathname=null,e.path=null),(!Gi.isNull(e.pathname)||!Gi.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=i.auth||e.auth,e.slashes=e.slashes||i.slashes,e.href=e.format(),e};Ti.prototype.parseHost=function(){var i=this.host,t=Xw.exec(i);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),i=i.substr(0,i.length-t.length)),i&&(this.hostname=i)};const eS={parse:zw,format:Ww,resolve:Vw};function pi(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Qr(i){return i.split("?")[0].split("#")[0]}function iS(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function sS(i,t,e){return i.replace(new RegExp(iS(t),"g"),e)}function nS(i,t){let e="",s=0,n=-1,r=0,o=-1;for(let a=0;a<=i.length;++a){if(a<i.length)o=i.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||r===1))if(n!==a-1&&r===2){if(e.length<2||s!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",s=0):(e=e.slice(0,l),s=e.length-1-e.lastIndexOf("/")),n=a,r=0;continue}}else if(e.length===2||e.length===1){e="",s=0,n=a,r=0;continue}}t&&(e.length>0?e+="/..":e="..",s=2)}else e.length>0?e+=`/${i.slice(n+1,a)}`:e=i.slice(n+1,a),s=a-n-1;n=a,r=0}else o===46&&r!==-1?++r:r=-1}return e}const Te={toPosix(i){return sS(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},hasProtocol(i){return/^[^/:]+:\//.test(this.toPosix(i))},getProtocol(i){pi(i),i=this.toPosix(i);let t="";const e=/^file:\/\/\//.exec(i),s=/^[^/:]+:\/\//.exec(i),n=/^[^/:]+:\//.exec(i);if(e||s||n){const r=(e==null?void 0:e[0])||(s==null?void 0:s[0])||(n==null?void 0:n[0]);t=r,i=i.slice(r.length)}return t},toAbsolute(i,t,e){if(this.isDataUrl(i))return i;const s=Qr(this.toPosix(t??Q.ADAPTER.getBaseUrl())),n=Qr(this.toPosix(e??this.rootname(s)));return pi(i),i=this.toPosix(i),i.startsWith("/")?Te.join(n,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(i=this.toPosix(i),pi(i),i.length===0)return".";let t="";const e=i.startsWith("/");this.hasProtocol(i)&&(t=this.rootname(i),i=i.slice(t.length));const s=i.endsWith("/");return i=nS(i,!1),i.length>0&&s&&(i+="/"),e?`/${i}`:t+i},isAbsolute(i){return pi(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let t;for(let e=0;e<i.length;++e){const s=i[e];if(pi(s),s.length>0)if(t===void 0)t=s;else{const n=i[e-1]??"";this.extname(n)?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(i){if(pi(i),i.length===0)return".";i=this.toPosix(i);let t=i.charCodeAt(0);const e=t===47;let s=-1,n=!0;const r=this.getProtocol(i),o=i;i=i.slice(r.length);for(let a=i.length-1;a>=1;--a)if(t=i.charCodeAt(a),t===47){if(!n){s=a;break}}else n=!1;return s===-1?e?"/":this.isUrl(o)?r+i:r:e&&s===1?"//":r+i.slice(0,s)},rootname(i){pi(i),i=this.toPosix(i);let t="";if(i.startsWith("/")?t="/":t=this.getProtocol(i),this.isUrl(i)){const e=i.indexOf("/",t.length);e!==-1?t=i.slice(0,e):t=i,t.endsWith("/")||(t+="/")}return t},basename(i,t){pi(i),t&&pi(t),i=Qr(this.toPosix(i));let e=0,s=-1,n=!0,r;if(t!==void 0&&t.length>0&&t.length<=i.length){if(t.length===i.length&&t===i)return"";let o=t.length-1,a=-1;for(r=i.length-1;r>=0;--r){const l=i.charCodeAt(r);if(l===47){if(!n){e=r+1;break}}else a===-1&&(n=!1,a=r+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(s=r):(o=-1,s=a))}return e===s?s=a:s===-1&&(s=i.length),i.slice(e,s)}for(r=i.length-1;r>=0;--r)if(i.charCodeAt(r)===47){if(!n){e=r+1;break}}else s===-1&&(n=!1,s=r+1);return s===-1?"":i.slice(e,s)},extname(i){pi(i),i=Qr(this.toPosix(i));let t=-1,e=0,s=-1,n=!0,r=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===47){if(!n){e=o+1;break}continue}s===-1&&(n=!1,s=o+1),a===46?t===-1?t=o:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||s===-1||r===0||r===1&&t===s-1&&t===e+1?"":i.slice(t,s)},parse(i){pi(i);const t={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return t;i=Qr(this.toPosix(i));let e=i.charCodeAt(0);const s=this.isAbsolute(i);let n;t.root=this.rootname(i),s||this.hasProtocol(i)?n=1:n=0;let r=-1,o=0,a=-1,l=!0,h=i.length-1,c=0;for(;h>=n;--h){if(e=i.charCodeAt(h),e===47){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),e===46?r===-1?r=h:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||a===-1||c===0||c===1&&r===a-1&&r===o+1?a!==-1&&(o===0&&s?t.base=t.name=i.slice(1,a):t.base=t.name=i.slice(o,a)):(o===0&&s?(t.name=i.slice(1,r),t.base=i.slice(1,a)):(t.name=i.slice(o,r),t.base=i.slice(o,a)),t.ext=i.slice(r,a)),t.dir=this.dirname(i),t},sep:"/",delimiter:":"},Sp={};function vt(i,t,e=3){if(Sp[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`):(s=s.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${i}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`),console.warn(s))),Sp[t]=!0}let yc;function rS(){return typeof yc>"u"&&(yc=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Q.ADAPTER.getWebGLRenderingContext())return!1;const s=Q.ADAPTER.createCanvas();let n=s.getContext("webgl",t)||s.getContext("experimental-webgl",t);const r=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,r}catch{return!1}}()),yc}var oS={grad:.9,turn:360,rad:360/(2*Math.PI)},hs=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},ue=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*i)/e+0},ni=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),i>e?e:i>t?i:t},E0=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},Ep=function(i){return{r:ni(i.r,0,255),g:ni(i.g,0,255),b:ni(i.b,0,255),a:ni(i.a)}},bc=function(i){return{r:ue(i.r),g:ue(i.g),b:ue(i.b),a:ue(i.a,3)}},aS=/^#([0-9a-f]{3,8})$/i,Ma=function(i){var t=i.toString(16);return t.length<2?"0"+t:t},T0=function(i){var t=i.r,e=i.g,s=i.b,n=i.a,r=Math.max(t,e,s),o=r-Math.min(t,e,s),a=o?r===t?(e-s)/o:r===e?2+(s-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:r?o/r*100:0,v:r/255*100,a:n}},A0=function(i){var t=i.h,e=i.s,s=i.v,n=i.a;t=t/360*6,e/=100,s/=100;var r=Math.floor(t),o=s*(1-e),a=s*(1-(t-r)*e),l=s*(1-(1-t+r)*e),h=r%6;return{r:255*[s,a,o,o,l,s][h],g:255*[l,s,s,a,o,o][h],b:255*[o,o,l,s,s,a][h],a:n}},Tp=function(i){return{h:E0(i.h),s:ni(i.s,0,100),l:ni(i.l,0,100),a:ni(i.a)}},Ap=function(i){return{h:ue(i.h),s:ue(i.s),l:ue(i.l),a:ue(i.a,3)}},Cp=function(i){return A0((e=(t=i).s,{h:t.h,s:(e*=((s=t.l)<50?s:100-s)/100)>0?2*e/(s+e)*100:0,v:s+e,a:t.a}));var t,e,s},To=function(i){return{h:(t=T0(i)).h,s:(n=(200-(e=t.s))*(s=t.v)/100)>0&&n<200?e*s/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,e,s,n},lS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,hS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,cS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ou={string:[[function(i){var t=aS.exec(i);return t?(i=t[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?ue(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?ue(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var t=cS.exec(i)||uS.exec(i);return t?t[2]!==t[4]||t[4]!==t[6]?null:Ep({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(i){var t=lS.exec(i)||hS.exec(i);if(!t)return null;var e,s,n=Tp({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(oS[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Cp(n)},"hsl"]],object:[[function(i){var t=i.r,e=i.g,s=i.b,n=i.a,r=n===void 0?1:n;return hs(t)&&hs(e)&&hs(s)?Ep({r:Number(t),g:Number(e),b:Number(s),a:Number(r)}):null},"rgb"],[function(i){var t=i.h,e=i.s,s=i.l,n=i.a,r=n===void 0?1:n;if(!hs(t)||!hs(e)||!hs(s))return null;var o=Tp({h:Number(t),s:Number(e),l:Number(s),a:Number(r)});return Cp(o)},"hsl"],[function(i){var t=i.h,e=i.s,s=i.v,n=i.a,r=n===void 0?1:n;if(!hs(t)||!hs(e)||!hs(s))return null;var o=function(a){return{h:E0(a.h),s:ni(a.s,0,100),v:ni(a.v,0,100),a:ni(a.a)}}({h:Number(t),s:Number(e),v:Number(s),a:Number(r)});return A0(o)},"hsv"]]},Mp=function(i,t){for(var e=0;e<t.length;e++){var s=t[e][0](i);if(s)return[s,t[e][1]]}return[null,void 0]},dS=function(i){return typeof i=="string"?Mp(i.trim(),Ou.string):typeof i=="object"&&i!==null?Mp(i,Ou.object):[null,void 0]},xc=function(i,t){var e=To(i);return{h:e.h,s:ni(e.s+100*t,0,100),l:e.l,a:e.a}},vc=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},Ip=function(i,t){var e=To(i);return{h:e.h,s:e.s,l:ni(e.l+100*t,0,100),a:e.a}},ku=function(){function i(t){this.parsed=dS(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return ue(vc(this.rgba),2)},i.prototype.isDark=function(){return vc(this.rgba)<.5},i.prototype.isLight=function(){return vc(this.rgba)>=.5},i.prototype.toHex=function(){return t=bc(this.rgba),e=t.r,s=t.g,n=t.b,o=(r=t.a)<1?Ma(ue(255*r)):"","#"+Ma(e)+Ma(s)+Ma(n)+o;var t,e,s,n,r,o},i.prototype.toRgb=function(){return bc(this.rgba)},i.prototype.toRgbString=function(){return t=bc(this.rgba),e=t.r,s=t.g,n=t.b,(r=t.a)<1?"rgba("+e+", "+s+", "+n+", "+r+")":"rgb("+e+", "+s+", "+n+")";var t,e,s,n,r},i.prototype.toHsl=function(){return Ap(To(this.rgba))},i.prototype.toHslString=function(){return t=Ap(To(this.rgba)),e=t.h,s=t.s,n=t.l,(r=t.a)<1?"hsla("+e+", "+s+"%, "+n+"%, "+r+")":"hsl("+e+", "+s+"%, "+n+"%)";var t,e,s,n,r},i.prototype.toHsv=function(){return t=T0(this.rgba),{h:ue(t.h),s:ue(t.s),v:ue(t.v),a:ue(t.a,3)};var t},i.prototype.invert=function(){return Fi({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},i.prototype.saturate=function(t){return t===void 0&&(t=.1),Fi(xc(this.rgba,t))},i.prototype.desaturate=function(t){return t===void 0&&(t=.1),Fi(xc(this.rgba,-t))},i.prototype.grayscale=function(){return Fi(xc(this.rgba,-1))},i.prototype.lighten=function(t){return t===void 0&&(t=.1),Fi(Ip(this.rgba,t))},i.prototype.darken=function(t){return t===void 0&&(t=.1),Fi(Ip(this.rgba,-t))},i.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},i.prototype.alpha=function(t){return typeof t=="number"?Fi({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):ue(this.rgba.a,3);var e},i.prototype.hue=function(t){var e=To(this.rgba);return typeof t=="number"?Fi({h:t,s:e.s,l:e.l,a:e.a}):ue(e.h)},i.prototype.isEqual=function(t){return this.toHex()===Fi(t).toHex()},i}(),Fi=function(i){return i instanceof ku?i:new ku(i)},Pp=[],fS=function(i){i.forEach(function(t){Pp.indexOf(t)<0&&(t(ku,Ou),Pp.push(t))})};function pS(i,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var n in e)s[e[n]]=n;var r={};i.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,h=s[this.toHex()];if(h)return h;if(o!=null&&o.closest){var c=this.toRgb(),u=1/0,d="black";if(!r.length)for(var f in e)r[f]=new i(e[f]).toRgb();for(var p in e){var g=(a=c,l=r[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<u&&(u=g,d=p)}return d}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":e[a];return l?new i(l).toRgb():null},"name"])}fS([pS]);const yr=class{constructor(i=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=i}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(i){return this.value=i,this}set value(i){if(i instanceof yr)this._value=this.cloneSource(i._value),this._int=i._int,this._components.set(i._components);else{if(i===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,i))&&(this.normalize(i),this._value=this.cloneSource(i))}}get value(){return this._value}cloneSource(i){return typeof i=="string"||typeof i=="number"||i instanceof Number||i===null?i:Array.isArray(i)||ArrayBuffer.isView(i)?i.slice(0):typeof i=="object"&&i!==null?{...i}:i}isSourceEqual(i,t){const e=typeof i;if(e!==typeof t)return!1;if(e==="number"||e==="string"||i instanceof Number)return i===t;if(Array.isArray(i)&&Array.isArray(t)||ArrayBuffer.isView(i)&&ArrayBuffer.isView(t))return i.length!==t.length?!1:i.every((n,r)=>n===t[r]);if(i!==null&&t!==null){const n=Object.keys(i),r=Object.keys(t);return n.length!==r.length?!1:n.every(o=>i[o]===t[o])}return i===t}toRgba(){const[i,t,e,s]=this._components;return{r:i,g:t,b:e,a:s}}toRgb(){const[i,t,e]=this._components;return{r:i,g:t,b:e}}toRgbaString(){const[i,t,e]=this.toUint8RgbArray();return`rgba(${i},${t},${e},${this.alpha})`}toUint8RgbArray(i){const[t,e,s]=this._components;return i=i??[],i[0]=Math.round(t*255),i[1]=Math.round(e*255),i[2]=Math.round(s*255),i}toRgbArray(i){i=i??[];const[t,e,s]=this._components;return i[0]=t,i[1]=e,i[2]=s,i}toNumber(){return this._int}toLittleEndianNumber(){const i=this._int;return(i>>16)+(i&65280)+((i&255)<<16)}multiply(i){const[t,e,s,n]=yr.temp.setValue(i)._components;return this._components[0]*=t,this._components[1]*=e,this._components[2]*=s,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(i,t=!0){return t&&(this._components[0]*=i,this._components[1]*=i,this._components[2]*=i),this._components[3]=i,this.refreshInt(),this._value=null,this}toPremultiplied(i,t=!0){if(i===1)return(255<<24)+this._int;if(i===0)return t?0:this._int;let e=this._int>>16&255,s=this._int>>8&255,n=this._int&255;return t&&(e=e*i+.5|0,s=s*i+.5|0,n=n*i+.5|0),(i*255<<24)+(e<<16)+(s<<8)+n}toHex(){const i=this._int.toString(16);return`#${"000000".substring(0,6-i.length)+i}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(i){return this._components[3]=this._clamp(i),this}round(i){const[t,e,s]=this._components;return this._components[0]=Math.round(t*i)/i,this._components[1]=Math.round(e*i)/i,this._components[2]=Math.round(s*i)/i,this.refreshInt(),this._value=null,this}toArray(i){i=i??[];const[t,e,s,n]=this._components;return i[0]=t,i[1]=e,i[2]=s,i[3]=n,i}normalize(i){let t,e,s,n;if((typeof i=="number"||i instanceof Number)&&i>=0&&i<=16777215){const r=i;t=(r>>16&255)/255,e=(r>>8&255)/255,s=(r&255)/255,n=1}else if((Array.isArray(i)||i instanceof Float32Array)&&i.length>=3&&i.length<=4)i=this._clamp(i),[t,e,s,n=1]=i;else if((i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&i.length>=3&&i.length<=4)i=this._clamp(i,0,255),[t,e,s,n=255]=i,t/=255,e/=255,s/=255,n/=255;else if(typeof i=="string"||typeof i=="object"){if(typeof i=="string"){const o=yr.HEX_PATTERN.exec(i);o&&(i=`#${o[2]}`)}const r=Fi(i);r.isValid()&&({r:t,g:e,b:s,a:n}=r.rgba,t/=255,e/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=e,this._components[2]=s,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${i}`)}refreshInt(){this._clamp(this._components);const[i,t,e]=this._components;this._int=(i*255<<16)+(t*255<<8)+(e*255|0)}_clamp(i,t=0,e=1){return typeof i=="number"?Math.min(Math.max(i,t),e):(i.forEach((s,n)=>{i[n]=Math.min(Math.max(s,t),e)}),i)}};let Pt=yr;Pt.shared=new yr;Pt.temp=new yr;Pt.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function gS(i){return vt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Pt.shared.setValue(i).toHex()}function mS(i){return vt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Pt.shared.setValue(i).toNumber()}function _S(){const i=[],t=[];for(let s=0;s<32;s++)i[s]=s,t[s]=s;i[mt.NORMAL_NPM]=mt.NORMAL,i[mt.ADD_NPM]=mt.ADD,i[mt.SCREEN_NPM]=mt.SCREEN,t[mt.NORMAL]=mt.NORMAL_NPM,t[mt.ADD]=mt.ADD_NPM,t[mt.SCREEN]=mt.SCREEN_NPM;const e=[];return e.push(t),e.push(i),e}const C0=_S();function M0(i,t){return C0[t?1:0][i]}function yS(i,t=null){const e=i*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let s=0,n=0;s<e;s+=6,n+=4)t[s+0]=n+0,t[s+1]=n+1,t[s+2]=n+2,t[s+3]=n+0,t[s+4]=n+2,t[s+5]=n+3;return t}function I0(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}function jl(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Rp(i){return!(i&i-1)&&!!i}function Dp(i){let t=(i>65535?1:0)<<4;i>>>=t;let e=(i>255?1:0)<<3;return i>>>=e,t|=e,e=(i>15?1:0)<<2,i>>>=e,t|=e,e=(i>3?1:0)<<1,i>>>=e,t|=e,t|i>>1}function br(i,t,e){const s=i.length;let n;if(t>=s||e===0)return;e=t+e>s?s-t:e;const r=s-e;for(n=t;n<r;++n)i[n]=i[n+e];i.length=r}function Ds(i){return i===0?0:i<0?-1:1}let bS=0;function Fn(){return++bS}const P0=class{constructor(i,t,e,s){this.left=i,this.top=t,this.right=e,this.bottom=s}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Fu=P0;Fu.EMPTY=new P0(0,0,0,0);const Op={},Bi=Object.create(null),Ps=Object.create(null);class xS{constructor(t,e,s){this._canvas=Q.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=s||Q.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function kp(i,t,e){for(let s=0,n=4*e*t;s<t;++s,n+=4)if(i[n+3]!==0)return!1;return!0}function Fp(i,t,e,s,n){const r=4*t;for(let o=s,a=s*r+4*e;o<=n;++o,a+=r)if(i[a+3]!==0)return!1;return!0}function vS(i){const{width:t,height:e}=i,s=i.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");const r=s.getImageData(0,0,t,e).data;let o=0,a=0,l=t-1,h=e-1;for(;a<e&&kp(r,t,a);)++a;if(a===e)return Fu.EMPTY;for(;kp(r,t,h);)--h;for(;Fp(r,t,o,a,h);)++o;for(;Fp(r,t,l,a,h);)--l;return++l,++h,new Fu(o,a,l,h)}function wS(i){const t=vS(i),{width:e,height:s}=t;let n=null;if(!t.isEmpty()){const r=i.getContext("2d");if(r===null)throw new TypeError("Failed to get canvas 2D context");n=r.getImageData(t.left,t.top,e,s)}return{width:e,height:s,data:n}}let Ia;function SS(i,t=globalThis.location){if(i.startsWith("data:"))return"";t=t||globalThis.location,Ia||(Ia=document.createElement("a")),Ia.href=i;const e=eS.parse(Ia.href),s=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!s||e.protocol!==t.protocol?"anonymous":""}function $s(i,t=1){var s;const e=(s=Q.RETINA_PREFIX)==null?void 0:s.exec(i);return e?parseFloat(e[1]):t}var et=(i=>(i.Renderer="renderer",i.Application="application",i.RendererSystem="renderer-webgl-system",i.RendererPlugin="renderer-webgl-plugin",i.CanvasRendererSystem="renderer-canvas-system",i.CanvasRendererPlugin="renderer-canvas-plugin",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i))(et||{});const Bu=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},Bp=(i,t)=>Bu(i).priority??t,ft={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(Bu).forEach(t=>{t.type.forEach(e=>{var s,n;return(n=(s=this._removeHandlers)[e])==null?void 0:n.call(s,t)})}),this},add(...i){return i.map(Bu).forEach(t=>{t.type.forEach(e=>{const s=this._addHandlers,n=this._queue;s[e]?s[e](t):(n[e]=n[e]||[],n[e].push(t))})}),this},handle(i,t,e){const s=this._addHandlers,n=this._removeHandlers;if(s[i]||n[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=t,n[i]=e;const r=this._queue;return r[i]&&(r[i].forEach(o=>t(o)),delete r[i]),this},handleByMap(i,t){return this.handle(i,e=>{t[e.name]=e.ref},e=>{delete t[e.name]})},handleByList(i,t,e=-1){return this.handle(i,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((n,r)=>Bp(r,e)-Bp(n,e)))},s=>{const n=t.indexOf(s.ref);n!==-1&&t.splice(n,1)})}};class Lu{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const ES=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function TS(i){let t="";for(let e=0;e<i;++e)e>0&&(t+=`
else `),e<i-1&&(t+=`if(test == ${e}.0){}`);return t}function AS(i,t){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const s=ES.replace(/%forloop%/gi,TS(i));if(t.shaderSource(e,s),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))i=i/2|0;else break}return i}const wc=0,Sc=1,Ec=2,Tc=3,Ac=4,Cc=5;class Cs{constructor(){this.data=0,this.blendMode=mt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<wc)}set blend(t){!!(this.data&1<<wc)!==t&&(this.data^=1<<wc)}get offsets(){return!!(this.data&1<<Sc)}set offsets(t){!!(this.data&1<<Sc)!==t&&(this.data^=1<<Sc)}get culling(){return!!(this.data&1<<Ec)}set culling(t){!!(this.data&1<<Ec)!==t&&(this.data^=1<<Ec)}get depthTest(){return!!(this.data&1<<Tc)}set depthTest(t){!!(this.data&1<<Tc)!==t&&(this.data^=1<<Tc)}get depthMask(){return!!(this.data&1<<Cc)}set depthMask(t){!!(this.data&1<<Cc)!==t&&(this.data^=1<<Cc)}get clockwiseFrontFace(){return!!(this.data&1<<Ac)}set clockwiseFrontFace(t){!!(this.data&1<<Ac)!==t&&(this.data^=1<<Ac)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==mt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Cs;return t.depthTest=!1,t.blend=!0,t}}const Nu=[];function R0(i,t){if(!i)return null;let e="";if(typeof i=="string"){const s=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);s&&(e=s[1].toLowerCase())}for(let s=Nu.length-1;s>=0;--s){const n=Nu[s];if(n.test&&n.test(i,e))return new n(i,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ai{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,s,n,r,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:c}=this;this._aliasCount++;for(let u=0,d=c.length;u<d;u++)c[u][h](t,e,s,n,r,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ai.prototype,{dispatch:{value:Ai.prototype.emit},run:{value:Ai.prototype.emit}});class jo{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Ai("setRealSize"),this.onUpdate=new Ai("update"),this.onError=new Ai("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,s){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class ua extends jo{constructor(t,e){const{width:s,height:n}=e||{};if(!s||!n)throw new Error("BufferResource width or height invalid");super(s,n),this.data=t}upload(t,e,s){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Oi.UNPACK);const r=e.realWidth,o=e.realHeight;return s.width===r&&s.height===o?n.texSubImage2D(e.target,0,0,0,r,o,e.format,s.type,this.data):(s.width=r,s.height=o,n.texImage2D(e.target,0,s.internalFormat,r,o,0,e.format,s.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const CS={scaleMode:_s.NEAREST,format:K.RGBA,alphaMode:Oi.NPM},nr=class extends On{constructor(i=null,t=null){super(),t=Object.assign({},nr.defaultOptions,t);const{alphaMode:e,mipmap:s,anisotropicLevel:n,scaleMode:r,width:o,height:a,wrapMode:l,format:h,type:c,target:u,resolution:d,resourceOptions:f}=t;i&&!(i instanceof jo)&&(i=R0(i,f),i.internal=!0),this.resolution=d||Q.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=n,this._wrapMode=l,this._scaleMode=r,this.format=h,this.type=c,this.target=u,this.alphaMode=e,this.uid=Fn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(i)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(i){this._mipmap!==i&&(this._mipmap=i,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(i){this._scaleMode!==i&&(this._scaleMode=i,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(i){this._wrapMode!==i&&(this._wrapMode=i,this.dirtyStyleId++)}setStyle(i,t){let e;return i!==void 0&&i!==this.scaleMode&&(this.scaleMode=i,e=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,e=!0),e&&this.dirtyStyleId++,this}setSize(i,t,e){return e=e||this.resolution,this.setRealSize(i*e,t*e,e)}setRealSize(i,t,e){return this.resolution=e||this.resolution,this.width=Math.round(i)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Rp(this.realWidth)&&Rp(this.realHeight)}setResolution(i){const t=this.resolution;return t===i?this:(this.resolution=i,this.valid&&(this.width=Math.round(this.width*t)/i,this.height=Math.round(this.height*t)/i,this.emit("update",this)),this._refreshPOT(),this)}setResource(i){if(this.resource===i)return this;if(this.resource)throw new Error("Resource can be set only once");return i.bind(this),this.resource=i,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(i){this.emit("error",this,i)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ps[this.cacheId],delete Bi[this.cacheId],this.cacheId=null),this.dispose(),nr.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(i,t,e=Q.STRICT_TEXTURE_CACHE){const s=typeof i=="string";let n=null;if(s)n=i;else{if(!i._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";i._pixiId=`${o}_${Fn()}`}n=i._pixiId}let r=Ps[n];if(s&&e&&!r)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return r||(r=new nr(i,t),r.cacheId=n,nr.addToCache(r,n)),r}static fromBuffer(i,t,e,s){i=i||new Float32Array(t*e*4);const n=new ua(i,{width:t,height:e}),r=i instanceof Float32Array?gt.FLOAT:gt.UNSIGNED_BYTE;return new nr(n,Object.assign({},CS,{type:r},s))}static addToCache(i,t){t&&(i.textureCacheIds.includes(t)||i.textureCacheIds.push(t),Ps[t]&&Ps[t]!==i&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Ps[t]=i)}static removeFromCache(i){if(typeof i=="string"){const t=Ps[i];if(t){const e=t.textureCacheIds.indexOf(i);return e>-1&&t.textureCacheIds.splice(e,1),delete Ps[i],t}}else if(i!=null&&i.textureCacheIds){for(let t=0;t<i.textureCacheIds.length;++t)delete Ps[i.textureCacheIds[t]];return i.textureCacheIds.length=0,i}return null}};let _t=nr;_t.defaultOptions={mipmap:Qi.POW2,anisotropicLevel:0,scaleMode:_s.LINEAR,wrapMode:Hs.CLAMP,alphaMode:Oi.UNPACK,target:mr.TEXTURE_2D,format:K.RGBA,type:gt.UNSIGNED_BYTE};_t._globalBatch=0;class Uu{constructor(){this.texArray=null,this.blend=0,this.type=Wi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let MS=0,le=class D0{constructor(t,e=!0,s=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=s,this.static=e,this.id=MS++,this.disposeRunner=new Ai("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Yi.ELEMENT_ARRAY_BUFFER:Yi.ARRAY_BUFFER}get index(){return this.type===Yi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new D0(t)}};class Xl{constructor(t,e=0,s=!1,n=gt.FLOAT,r,o,a,l=1){this.buffer=t,this.size=e,this.normalized=s,this.type=n,this.stride=r,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,s,n,r){return new Xl(t,e,s,n,r)}}const IS={Float32Array,Uint32Array,Int32Array,Uint8Array};function PS(i,t){let e=0,s=0;const n={};for(let l=0;l<i.length;l++)s+=t[l],e+=i[l].length;const r=new ArrayBuffer(e*4);let o=null,a=0;for(let l=0;l<i.length;l++){const h=t[l],c=i[l],u=I0(c);n[u]||(n[u]=new IS[u](r)),o=n[u];for(let d=0;d<c.length;d++){const f=(d/h|0)*s+a,p=d%h;o[f+p]=c[d]}a+=h}return new Float32Array(r)}const Lp={5126:4,5123:2,5121:1};let RS=0;const DS={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Ks{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=RS++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ai("disposeGeometry"),this.refCount=0}addAttribute(t,e,s=0,n=!1,r,o,a,l=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof le||(e instanceof Array&&(e=new Float32Array(e)),e=new le(e));const h=t.split("|");if(h.length>1){for(let u=0;u<h.length;u++)this.addAttribute(h[u],e,s,n,r);return this}let c=this.buffers.indexOf(e);return c===-1&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new Xl(c,s,n,r,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof le||(t instanceof Array&&(t=new Uint16Array(t)),t=new le(t)),t.type=Yi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],s=new le;let n;for(n in this.attributes){const r=this.attributes[n],o=this.buffers[r.buffer];t.push(o.data),e.push(r.size*Lp[r.type]/4),r.buffer=0}for(s.data=PS(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Ks;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new le(this.buffers[e].data.slice(0));for(const e in this.attributes){const s=this.attributes[e];t.attributes[e]=new Xl(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Yi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new Ks,s=[],n=[],r=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,r[l]=0}for(let a=0;a<o.buffers.length;a++)s[a]=new DS[I0(o.buffers[a].data)](n[a]),e.buffers[a]=new le(s[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)s[l].set(o.buffers[l].data,r[l]),r[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=Yi.ELEMENT_ARRAY_BUFFER;let a=0,l=0,h=0,c=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){c=u;break}for(const u in o.attributes){const d=o.attributes[u];(d.buffer|0)===c&&(l+=d.size*Lp[d.type]/4)}for(let u=0;u<t.length;u++){const d=t[u].indexBuffer.data;for(let f=0;f<d.length;f++)e.indexBuffer.data[f+h]+=a;a+=t[u].buffers[c].data.length/l,h+=d.length}}return e}}class O0 extends Ks{constructor(t=!1){super(),this._buffer=new le(null,t,!1),this._indexBuffer=new le(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,gt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,gt.FLOAT).addAttribute("aColor",this._buffer,4,!0,gt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,gt.FLOAT).addIndex(this._indexBuffer)}}const Yl=Math.PI*2,OS=180/Math.PI,kS=Math.PI/180;var be=(i=>(i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC",i))(be||{});class At{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new At(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Pa=[new At,new At,new At,new At];class bt{constructor(t=0,e=0,s=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(s),this.height=Number(n),this.type=be.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new bt(0,0,0,0)}clone(){return new bt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const A=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=A)return!1;const I=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>I}const s=this.left,n=this.right,r=this.top,o=this.bottom;if(n<=s||o<=r)return!1;const a=Pa[0].set(t.left,t.top),l=Pa[1].set(t.left,t.bottom),h=Pa[2].set(t.right,t.top),c=Pa[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(u===0||(e.apply(a,a),e.apply(l,l),e.apply(h,h),e.apply(c,c),Math.max(a.x,l.x,h.x,c.x)<=s||Math.min(a.x,l.x,h.x,c.x)>=n||Math.max(a.y,l.y,h.y,c.y)<=r||Math.min(a.y,l.y,h.y,c.y)>=o))return!1;const d=u*(l.y-a.y),f=u*(a.x-l.x),p=d*s+f*r,g=d*n+f*r,m=d*s+f*o,_=d*n+f*o;if(Math.max(p,g,m,_)<=d*a.x+f*a.y||Math.min(p,g,m,_)>=d*c.x+f*c.y)return!1;const y=u*(a.y-h.y),b=u*(h.x-a.x),v=y*s+b*r,x=y*n+b*r,E=y*s+b*o,S=y*n+b*o;return!(Math.max(v,x,E,S)<=y*a.x+b*a.y||Math.min(v,x,E,S)>=y*c.x+b*c.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(s-e,0),this.y=n,this.height=Math.max(r-n,0),this}ceil(t=1,e=.001){const s=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=s-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=s-e,this.y=n,this.height=r-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Yd{constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.radius=s,this.type=be.CIRC}clone(){return new Yd(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const s=this.radius*this.radius;let n=this.x-t,r=this.y-e;return n*=n,r*=r,n+r<=s}getBounds(){return new bt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class $d{constructor(t=0,e=0,s=0,n=0){this.x=t,this.y=e,this.width=s,this.height=n,this.type=be.ELIP}clone(){return new $d(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let s=(t-this.x)/this.width,n=(e-this.y)/this.height;return s*=s,n*=n,s+n<=1}getBounds(){return new bt(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class xr{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const s=[];for(let n=0,r=e.length;n<r;n++)s.push(e[n].x,e[n].y);e=s}this.points=e,this.type=be.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new xr(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let s=!1;const n=this.points.length/2;for(let r=0,o=n-1;r<n;o=r++){const a=this.points[r*2],l=this.points[r*2+1],h=this.points[o*2],c=this.points[o*2+1];l>e!=c>e&&t<(h-a)*((e-l)/(c-l))+a&&(s=!s)}return s}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}}class Kd{constructor(t=0,e=0,s=0,n=0,r=20){this.x=t,this.y=e,this.width=s,this.height=n,this.radius=r,this.type=be.RREC}clone(){return new Kd(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+s&&e<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let n=t-(this.x+s),r=e-(this.y+s);const o=s*s;if(n*n+r*r<=o||(n=t-(this.x+this.width-s),n*n+r*r<=o)||(r=e-(this.y+this.height-s),n*n+r*r<=o)||(n=t-(this.x+s),n*n+r*r<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Lt{constructor(t=1,e=0,s=0,n=1,r=0,o=0){this.array=null,this.a=t,this.b=e,this.c=s,this.d=n,this.tx=r,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,s,n,r,o){return this.a=t,this.b=e,this.c=s,this.d=n,this.tx=r,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const s=e||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,e){e=e||new At;const s=t.x,n=t.y;return e.x=this.a*s+this.c*n+this.tx,e.y=this.b*s+this.d*n+this.ty,e}applyInverse(t,e){e=e||new At;const s=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*s*n+-this.c*s*r+(this.ty*this.c-this.tx*this.d)*s,e.y=this.a*s*r+-this.b*s*n+(-this.ty*this.a+this.tx*this.b)*s,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*e-this.b*s,this.b=n*s+this.b*e,this.c=r*e-this.d*s,this.d=r*s+this.d*e,this.tx=o*e-this.ty*s,this.ty=o*s+this.ty*e,this}append(t){const e=this.a,s=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*s+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*s+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*s+t.ty*r+this.ty,this}setTransform(t,e,s,n,r,o,a,l,h){return this.a=Math.cos(a+h)*r,this.b=Math.sin(a+h)*r,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(s*this.a+n*this.c),this.ty=e-(s*this.b+n*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,n=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,s=this.b,n=this.c,r=this.d,o=t.pivot,a=-Math.atan2(-n,r),l=Math.atan2(s,e),h=Math.abs(a+l);return h<1e-5||Math.abs(Yl-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+s*s),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*s+o.y*r),t}invert(){const t=this.a,e=this.b,s=this.c,n=this.d,r=this.tx,o=t*n-e*s;return this.a=n/o,this.b=-e/o,this.c=-s/o,this.d=t/o,this.tx=(s*this.ty-n*r)/o,this.ty=-(t*this.ty-e*r)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Lt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Lt}static get TEMP_MATRIX(){return new Lt}}const gn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],mn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],_n=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],yn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Gu=[],k0=[],Ra=Math.sign;function FS(){for(let i=0;i<16;i++){const t=[];Gu.push(t);for(let e=0;e<16;e++){const s=Ra(gn[i]*gn[e]+_n[i]*mn[e]),n=Ra(mn[i]*gn[e]+yn[i]*mn[e]),r=Ra(gn[i]*_n[e]+_n[i]*yn[e]),o=Ra(mn[i]*_n[e]+yn[i]*yn[e]);for(let a=0;a<16;a++)if(gn[a]===s&&mn[a]===n&&_n[a]===r&&yn[a]===o){t.push(a);break}}}for(let i=0;i<16;i++){const t=new Lt;t.set(gn[i],mn[i],_n[i],yn[i],0,0),k0.push(t)}}FS();const Ht={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>gn[i],uY:i=>mn[i],vX:i=>_n[i],vY:i=>yn[i],inv:i=>i&8?i&15:-i&7,add:(i,t)=>Gu[i][t],sub:(i,t)=>Gu[i][Ht.inv(t)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,t)=>Math.abs(i)*2<=Math.abs(t)?t>=0?Ht.S:Ht.N:Math.abs(t)*2<=Math.abs(i)?i>0?Ht.E:Ht.W:t>0?i>0?Ht.SE:Ht.SW:i>0?Ht.NE:Ht.NW,matrixAppendRotationInv:(i,t,e=0,s=0)=>{const n=k0[Ht.inv(t)];n.tx=e,n.ty=s,i.append(n)}};class Os{constructor(t,e,s=0,n=0){this._x=s,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Os(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const F0=class{constructor(){this.worldTransform=new Lt,this.localTransform=new Lt,this.position=new Os(this.onChange,this,0,0),this.scale=new Os(this.onChange,this,1,1),this.pivot=new Os(this.onChange,this,0,0),this.skew=new Os(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(i){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){const e=i.worldTransform,s=this.worldTransform;s.a=t.a*e.a+t.b*e.c,s.b=t.a*e.b+t.b*e.d,s.c=t.c*e.a+t.d*e.c,s.d=t.c*e.b+t.d*e.d,s.tx=t.tx*e.a+t.ty*e.c+e.tx,s.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=i._worldID,this._worldID++}}setFromMatrix(i){i.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())}};let qd=F0;qd.IDENTITY=new F0;var BS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,LS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Np(i,t,e){const s=i.createShader(t);return i.shaderSource(s,e),i.compileShader(s),s}function Mc(i){const t=new Array(i);for(let e=0;e<t.length;e++)t[e]=!1;return t}function B0(i,t){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Mc(2*t);case"bvec3":return Mc(3*t);case"bvec4":return Mc(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const vr=[{test:i=>i.type==="float"&&i.size===1&&!i.isArray,code:i=>`
            if(uv["${i}"] !== ud["${i}"].value)
            {
                ud["${i}"].value = uv["${i}"]
                gl.uniform1f(ud["${i}"].location, uv["${i}"])
            }
            `},{test:(i,t)=>(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray&&(t==null||t.castToBaseTexture!==void 0),code:i=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${i}"], t);

            if(ud["${i}"].value !== t)
            {
                ud["${i}"].value = t;
                gl.uniform1i(ud["${i}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(i,t)=>i.type==="mat3"&&i.size===1&&!i.isArray&&t.a!==void 0,code:i=>`
            gl.uniformMatrix3fv(ud["${i}"].location, false, uv["${i}"].toArray(true));
            `,codeUbo:i=>`
                var ${i}_matrix = uv.${i}.toArray(true);

                data[offset] = ${i}_matrix[0];
                data[offset+1] = ${i}_matrix[1];
                data[offset+2] = ${i}_matrix[2];
        
                data[offset + 4] = ${i}_matrix[3];
                data[offset + 5] = ${i}_matrix[4];
                data[offset + 6] = ${i}_matrix[5];
        
                data[offset + 8] = ${i}_matrix[6];
                data[offset + 9] = ${i}_matrix[7];
                data[offset + 10] = ${i}_matrix[8];
            `},{test:(i,t)=>i.type==="vec2"&&i.size===1&&!i.isArray&&t.x!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${i}"].location, v.x, v.y);
                }`,codeUbo:i=>`
                v = uv.${i};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:i=>i.type==="vec2"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${i}"].location, v[0], v[1]);
                }
            `},{test:(i,t)=>i.type==="vec4"&&i.size===1&&!i.isArray&&t.width!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${i}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(i,t)=>i.type==="vec4"&&i.size===1&&!i.isArray&&t.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${i}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(i,t)=>i.type==="vec3"&&i.size===1&&!i.isArray&&t.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${i}"].location, v.red, v.green, v.blue)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:i=>i.type==="vec4"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${i}"].location, v[0], v[1], v[2], v[3])
                }`}],NS={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},US={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function GS(i,t){var s;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in i.uniforms){const r=t[n];if(!r){(s=i.uniforms[n])!=null&&s.group&&(i.uniforms[n].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=i.uniforms[n];let a=!1;for(let l=0;l<vr.length;l++)if(vr[l].test(r,o)){e.push(vr[l].code(n,o)),a=!0;break}if(!a){const h=(r.size===1&&!r.isArray?NS:US)[r.type].replace("location",`ud["${n}"].location`);e.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const L0={};let Jn=L0;function HS(){if(Jn===L0||Jn!=null&&Jn.isContextLost()){const i=Q.ADAPTER.createCanvas();let t;Q.PREFER_ENV>=Hn.WEBGL2&&(t=i.getContext("webgl2",{})),t||(t=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Jn=t}return Jn}let Da;function zS(){if(!Da){Da=si.MEDIUM;const i=HS();i&&i.getShaderPrecisionFormat&&(Da=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?si.HIGH:si.MEDIUM)}return Da}function Up(i,t){const e=i.getShaderSource(t).split(`
`).map((h,c)=>`${c}: ${h}`),s=i.getShaderInfoLog(t),n=s.split(`
`),r={},o=n.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!r[h]?(r[h]=!0,!0):!1),a=[""];o.forEach(h=>{e[h-1]=`%c${e[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=e.join(`
`);a[0]=l,console.error(s),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function VS(i,t,e,s){i.getProgramParameter(t,i.LINK_STATUS)||(i.getShaderParameter(e,i.COMPILE_STATUS)||Up(i,e),i.getShaderParameter(s,i.COMPILE_STATUS)||Up(i,s),console.error("PixiJS Error: Could not initialize shader."),i.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(t)))}const WS={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function N0(i){return WS[i]}let Oa=null;const Gp={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function U0(i,t){if(!Oa){const e=Object.keys(Gp);Oa={};for(let s=0;s<e.length;++s){const n=e[s];Oa[i[n]]=Gp[n]}}return Oa[t]}function Hp(i,t,e){if(i.substring(0,9)!=="precision"){let s=t;return t===si.HIGH&&e!==si.HIGH&&(s=si.MEDIUM),`precision ${s} float;
${i}`}else if(e!==si.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}let to;function jS(){if(typeof to=="boolean")return to;try{to=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{to=!1}return to}let XS=0;const ka={},rr=class{constructor(i,t,e="pixi-shader",s={}){this.extra={},this.id=XS++,this.vertexSrc=i||rr.defaultVertexSrc,this.fragmentSrc=t||rr.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(e=e.replace(/\s+/g,"-"),ka[e]?(ka[e]++,e+=`-${ka[e]}`):ka[e]=1,this.vertexSrc=`#define SHADER_NAME ${e}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${e}
${this.fragmentSrc}`,this.vertexSrc=Hp(this.vertexSrc,rr.defaultVertexPrecision,si.HIGH),this.fragmentSrc=Hp(this.fragmentSrc,rr.defaultFragmentPrecision,zS())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return LS}static get defaultFragmentSrc(){return BS}static from(i,t,e){const s=i+t;let n=Op[s];return n||(Op[s]=n=new rr(i,t,e)),n}};let Si=rr;Si.defaultVertexPrecision=si.HIGH;Si.defaultFragmentPrecision=ys.apple.device?si.HIGH:si.MEDIUM;let YS=0;class Ci{constructor(t,e,s){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=YS++,this.static=!!e,this.ubo=!!s,t instanceof le?(this.buffer=t,this.buffer.type=Yi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new le(new Float32Array(1)),this.buffer.type=Yi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,s){if(!this.ubo)this.uniforms[t]=new Ci(e,s);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,s){return new Ci(t,e,s)}static uboFrom(t,e){return new Ci(t,e??!0,!0)}}class $i{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Ci?this.uniformGroup=e:this.uniformGroup=new Ci(e):this.uniformGroup=new Ci({}),this.disposeRunner=new Ai("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const s in e.uniforms){const n=e.uniforms[s];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,s){const n=Si.from(t,e);return new $i(n,s)}}class $S{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const s=new Int32Array(t);for(let r=0;r<t;r++)s[r]=r;this.defaultGroupCache[t]=Ci.from({uSamplers:s},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Si(this.vertexSrc,n)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Lt,default:this.defaultGroupCache[t]};return new $i(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let s=0;s<t;s++)s>0&&(e+=`
else `),s<t-1&&(e+=`if(vTextureId < ${s}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${s}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class Hu{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function KS(){return!ys.apple.device}function qS(i){let t=!0;const e=Q.ADAPTER.getNavigator();if(ys.tablet||ys.phone){if(ys.apple.device){const s=e.userAgent.match(/OS (\d+)_(\d+)?/);s&&parseInt(s[1],10)<11&&(t=!1)}if(ys.android.device){const s=e.userAgent.match(/Android\s([0-9.]*)/);s&&parseInt(s[1],10)<7&&(t=!1)}}return t?i:4}class Dh{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var ZS=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,JS=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const mi=class extends Dh{constructor(i){super(i),this.setShaderGenerator(),this.geometryClass=O0,this.vertexSize=6,this.state=Cs.for2d(),this.size=mi.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),i.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??qS(32),this._defaultMaxTextures}static set defaultMaxTextures(i){this._defaultMaxTextures=i}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??KS(),this._canUploadSameBuffer}static set canUploadSameBuffer(i){this._canUploadSameBuffer=i}get MAX_TEXTURES(){return vt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return JS}static get defaultFragmentTemplate(){return ZS}setShaderGenerator({vertex:i=mi.defaultVertexSrc,fragment:t=mi.defaultFragmentTemplate}={}){this.shaderGenerator=new $S(i,t)}contextChange(){const i=this.renderer.gl;Q.PREFER_ENV===Hn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),mi.defaultMaxTextures),this.maxTextures=AS(this.maxTextures,i)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:i,_textureArrayPool:t}=mi,e=this.size/4,s=Math.floor(e/this.maxTextures)+1;for(;i.length<e;)i.push(new Uu);for(;t.length<s;)t.push(new Hu);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(i){i._texture.valid&&(this._vertexCount+i.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=i.vertexData.length/2,this._indexCount+=i.indices.length,this._bufferedTextures[this._bufferSize]=i._texture.baseTexture,this._bufferedElements[this._bufferSize++]=i)}buildTexturesAndDrawCalls(){const{_bufferedTextures:i,maxTextures:t}=this,e=mi._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,r=this.renderer.textureGC.count;let o=++_t._globalBatch,a=0,l=e[0],h=0;s.copyBoundTextures(n,t);for(let c=0;c<this._bufferSize;++c){const u=i[c];i[c]=null,u._batchEnabled!==o&&(l.count>=t&&(s.boundArray(l,n,o,t),this.buildDrawCalls(l,h,c),h=c,l=e[++a],++o),u._batchEnabled=o,u.touched=r,l.elements[l.count++]=u)}l.count>0&&(s.boundArray(l,n,o,t),this.buildDrawCalls(l,h,this._bufferSize),++a,++o);for(let c=0;c<n.length;c++)n[c]=null;_t._globalBatch=o}buildDrawCalls(i,t,e){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:r,vertexSize:o}=this,a=mi._drawCallPool;let l=this._dcIndex,h=this._aIndex,c=this._iIndex,u=a[l];u.start=this._iIndex,u.texArray=i;for(let d=t;d<e;++d){const f=s[d],p=f._texture.baseTexture,g=C0[p.alphaMode?1:0][f.blendMode];s[d]=null,t<d&&u.blend!==g&&(u.size=c-u.start,t=d,u=a[++l],u.texArray=i,u.start=c),this.packInterleavedGeometry(f,n,r,h,c),h+=f.vertexData.length/2*o,c+=f.indices.length,u.blend=g}t<e&&(u.size=c-u.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(i){const t=this.renderer.texture;for(let e=0;e<i.count;e++)t.bind(i.elements[e],i.ids[e]),i.elements[e]=null;i.count=0}updateGeometry(){const{_packedGeometries:i,_attributeBuffer:t,_indexBuffer:e}=this;mi.canUploadSameBuffer?(i[this._flushId]._buffer.update(t.rawBinaryData),i[this._flushId]._indexBuffer.update(e),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(t.rawBinaryData),i[this._flushId]._indexBuffer.update(e),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const i=this._dcIndex,{gl:t,state:e}=this.renderer,s=mi._drawCallPool;let n=null;for(let r=0;r<i;r++){const{texArray:o,type:a,size:l,start:h,blend:c}=s[r];n!==o&&(n=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,e.set(this.state),t.drawElements(a,l,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),mi.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]&&this._packedGeometries[i].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(i){const t=jl(Math.ceil(i/8)),e=Dp(t),s=t*8;this._aBuffers.length<=e&&(this._iBuffers.length=e+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new Lu(s*this.vertexSize*4)),n}getIndexBuffer(i){const t=jl(Math.ceil(i/12)),e=Dp(t),s=t*12;this._iBuffers.length<=e&&(this._iBuffers.length=e+1);let n=this._iBuffers[e];return n||(this._iBuffers[e]=n=new Uint16Array(s)),n}packInterleavedGeometry(i,t,e,s,n){const{uint32View:r,float32View:o}=t,a=s/this.vertexSize,l=i.uvs,h=i.indices,c=i.vertexData,u=i._texture.baseTexture._batchLocation,d=Math.min(i.worldAlpha,1),f=Pt.shared.setValue(i._tintRGB).toPremultiplied(d,i._texture.baseTexture.alphaMode>0);for(let p=0;p<c.length;p+=2)o[s++]=c[p],o[s++]=c[p+1],o[s++]=l[p],o[s++]=l[p+1],r[s++]=f,o[s++]=u;for(let p=0;p<h.length;p++)e[n++]=a+h[p]}};let xi=mi;xi.defaultBatchSize=4096;xi.extension={name:"batch",type:et.RendererPlugin};xi._drawCallPool=[];xi._textureArrayPool=[];ft.add(xi);var QS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,tE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const co=class extends $i{constructor(i,t,e){const s=Si.from(i||co.defaultVertexSrc,t||co.defaultFragmentSrc);super(s,e),this.padding=0,this.resolution=co.defaultResolution,this.multisample=co.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Cs}apply(i,t,e,s,n){i.applyFilter(this,t,e,s)}get blendMode(){return this.state.blendMode}set blendMode(i){this.state.blendMode=i}get resolution(){return this._resolution}set resolution(i){this._resolution=i}static get defaultVertexSrc(){return tE}static get defaultFragmentSrc(){return QS}};let xe=co;xe.defaultResolution=1;xe.defaultMultisample=se.NONE;class Oh{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Pt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:s,backgroundAlpha:n}=t,r=s??e;r!==void 0&&(this.color=r),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Oh.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Oh.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"background"};ft.add(Oh);class G0{constructor(t){this.renderer=t,this.emptyRenderer=new Dh(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:s}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=s[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,s,n){const{elements:r,ids:o,count:a}=t;let l=0;for(let h=0;h<a;h++){const c=r[h],u=c._batchLocation;if(u>=0&&u<n&&e[u]===c){o[h]=u;continue}for(;l<n;){const d=e[l];if(d&&d._batchEnabled===s&&d._batchLocation===l){l++;continue}o[h]=l,c._batchLocation=l,e[l]=c;break}}}destroy(){this.renderer=null}}G0.extension={type:et.RendererSystem,name:"batch"};ft.add(G0);let zp=0;class kh{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=zp++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,s=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:s,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=zp++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let s;if(Q.PREFER_ENV>=Hn.WEBGL2&&(s=t.getContext("webgl2",e)),s)this.webGLVersion=2;else if(this.webGLVersion=1,s=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!s)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=s,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),s="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;s&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=s||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}kh.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};kh.extension={type:et.RendererSystem,name:"context"};ft.add(kh);class eE extends ua{upload(t,e,s){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Oi.UNPACK);const r=e.realWidth,o=e.realHeight;return s.width===r&&s.height===o?n.texSubImage2D(e.target,0,0,0,r,o,e.format,s.type,this.data):(s.width=r,s.height=o,n.texImage2D(e.target,0,s.internalFormat,r,o,0,e.format,s.type,this.data)),!0}}class zu{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ai("disposeFramebuffer"),this.multisample=se.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new _t(null,{scaleMode:_s.NEAREST,resolution:1,mipmap:Qi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new _t(new eE(null,{width:this.width,height:this.height}),{scaleMode:_s.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Qi.OFF,format:K.DEPTH_COMPONENT,type:gt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let s=0;s<this.colorTextures.length;s++){const n=this.colorTextures[s],r=n.resolution;n.setSize(t/r,e/r)}if(this.depthTexture){const s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class H0 extends _t{constructor(t={}){if(typeof t=="number"){const e=arguments[0],s=arguments[1],n=arguments[2],r=arguments[3];t={width:e,height:s,scaleMode:n,resolution:r}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=se.NONE),super(null,t),this.mipmap=Qi.OFF,this.valid=!0,this._clear=new Pt([0,0,0,0]),this.framebuffer=new zu(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class qs extends jo{constructor(t){const e=t,s=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;super(s,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,s){s===void 0&&!e.startsWith("data:")?t.crossOrigin=SS(e):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}upload(t,e,s,n){const r=t.gl,o=e.realWidth,a=e.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1&&n.buffered.length===0)return!1;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Oi.UNPACK),!this.noSubImage&&e.target===r.TEXTURE_2D&&s.width===o&&s.height===a?r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,s.type,n):(s.width=o,s.height=a,r.texImage2D(e.target,0,s.internalFormat,e.format,s.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,s=t.naturalHeight||t.videoHeight||t.height;this.resize(e,s),super.update()}dispose(){this.source=null}}class z0 extends qs{constructor(t,e){if(e=e||{},typeof t=="string"){const s=new Image;qs.crossOrigin(s,t,e.crossorigin),s.src=t,t=s}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??Q.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,s)=>{const n=this.source;this.url=n.src;const r=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.resize(n.width,n.height),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?r():(n.onload=r,n.onerror=o=>{s(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,s=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:s?"cors":"no-cors"}).then(n=>n.blob()).then(n=>e(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Oi.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,s){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,s,this.bitmap),!this.preserveBitmap){let n=!0;const r=e._glTextures;for(const o in r){const a=r[o];if(a!==s&&a.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class V0{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,s){const n=e.width,r=e.height;if(s){const o=t.width/2/n,a=t.height/2/r,l=t.x/n+o,h=t.y/r+a;s=Ht.add(s,Ht.NW),this.x0=l+o*Ht.uX(s),this.y0=h+a*Ht.uY(s),s=Ht.add(s,2),this.x1=l+o*Ht.uX(s),this.y1=h+a*Ht.uY(s),s=Ht.add(s,2),this.x2=l+o*Ht.uX(s),this.y2=h+a*Ht.uY(s),s=Ht.add(s,2),this.x3=l+o*Ht.uX(s),this.y3=h+a*Ht.uY(s)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Vp=new V0;function Fa(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}class dt extends On{constructor(t,e,s,n,r,o,a){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new bt(0,0,1,1)),t instanceof dt&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this._uvs=Vp,this.uvMatrix=null,this.orig=s||e,this._rotate=Number(r||0),r===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new At(o.x,o.y):new At(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&Bi[e.url]&&dt.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,dt.removeFromCache(this),this.textureCacheIds=null}clone(){var n;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),s=new dt(this.baseTexture,!this.noFrame&&t,e,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(s._frame=t),s}updateUvs(){this._uvs===Vp&&(this._uvs=new V0),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},s=Q.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let r=null;if(n)r=t;else if(t instanceof _t){if(!t.cacheId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${Fn()}`,_t.addToCache(t,t.cacheId)}r=t.cacheId}else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Fn()}`}r=t._pixiId}let o=Bi[r];if(n&&s&&!o)throw new Error(`The cacheId "${r}" does not exist in TextureCache.`);return!o&&!(t instanceof _t)?(e.resolution||(e.resolution=$s(t)),o=new dt(new _t(t,e)),o.baseTexture.cacheId=r,_t.addToCache(o.baseTexture,r),dt.addToCache(o,r)):!o&&t instanceof _t&&(o=new dt(t),dt.addToCache(o,r)),o}static fromURL(t,e){const s=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),n=dt.from(t,Object.assign({resourceOptions:s},e),!1),r=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):r.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,s,n){return new dt(_t.fromBuffer(t,e,s,n))}static fromLoader(t,e,s,n){const r=new _t(t,Object.assign({scaleMode:_t.defaultOptions.scaleMode,resolution:$s(e)},n)),{resource:o}=r;o instanceof z0&&(o.url=e);const a=new dt(r);return s||(s=e),_t.addToCache(a.baseTexture,s),dt.addToCache(a,s),s!==e&&(_t.addToCache(a.baseTexture,e),dt.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Bi[e]&&Bi[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),Bi[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Bi[t];if(e){const s=e.textureCacheIds.indexOf(t);return s>-1&&e.textureCacheIds.splice(s,1),delete Bi[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)Bi[t.textureCacheIds[e]]===t&&delete Bi[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:s,width:n,height:r}=t,o=e+n>this.baseTexture.width,a=s+r>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",h=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,c=`Y: ${s} + ${r} = ${s+r} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${l} ${c}`)}this.valid=n&&r&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return dt._EMPTY||(dt._EMPTY=new dt(new _t),Fa(dt._EMPTY),Fa(dt._EMPTY.baseTexture)),dt._EMPTY}static get WHITE(){if(!dt._WHITE){const t=Q.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),dt._WHITE=new dt(_t.from(t)),Fa(dt._WHITE),Fa(dt._WHITE.baseTexture)}return dt._WHITE}}class zn extends dt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,s=!0){const n=this.baseTexture.resolution,r=Math.round(t*n)/n,o=Math.round(e*n)/n;this.valid=r>0&&o>0,this._frame.width=this.orig.width=r,this._frame.height=this.orig.height=o,s&&this.baseTexture.resize(r,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new zn(new H0(t))}}class W0{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,s=se.NONE){const n=new H0(Object.assign({width:t,height:e,resolution:1,multisample:s},this.textureOptions));return new zn(n)}getOptimalTexture(t,e,s=1,n=se.NONE){let r;t=Math.ceil(t*s-1e-6),e=Math.ceil(e*s-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=jl(t),e=jl(e),r=((t&65535)<<16|e&65535)>>>0,n>1&&(r+=n*4294967296)):r=n>1?-n:-1,this.texturePool[r]||(this.texturePool[r]=[]);let o=this.texturePool[r].pop();return o||(o=this.createTexture(t,e,n)),o.filterPoolKey=r,o.setResolution(s),o}getFilterTexture(t,e,s){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,s||se.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const s=this.texturePool[e];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const s=this.texturePool[e];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}W0.SCREEN_KEY=-1;class iE extends Ks{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class j0 extends Ks{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new le(this.vertices),this.uvBuffer=new le(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let s=0,n=0;return this.uvs[0]=s,this.uvs[1]=n,this.uvs[2]=s+e.width/t.width,this.uvs[3]=n,this.uvs[4]=s+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=s,this.uvs[7]=n+e.height/t.height,s=e.x,n=e.y,this.vertices[0]=s,this.vertices[1]=n,this.vertices[2]=s+e.width,this.vertices[3]=n,this.vertices[4]=s+e.width,this.vertices[5]=n+e.height,this.vertices[6]=s,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class sE{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=se.NONE,this.sourceFrame=new bt,this.destinationFrame=new bt,this.bindingSourceFrame=new bt,this.bindingDestinationFrame=new bt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ba=[new At,new At,new At,new At],Ic=new Lt;class X0{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new W0,this.statePool=[],this.quad=new iE,this.quadUv=new j0,this.tempRect=new bt,this.activeState={},this.globalUniforms=new Ci({outputFrame:new bt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const s=this.renderer,n=this.defaultFilterStack,r=this.statePool.pop()||new sE,o=this.renderer.renderTexture;let a=e[0].resolution,l=e[0].multisample,h=e[0].padding,c=e[0].autoFit,u=e[0].legacy??!0;for(let p=1;p<e.length;p++){const g=e[p];a=Math.min(a,g.resolution),l=Math.min(l,g.multisample),h=this.useMaxPadding?Math.max(h,g.padding):h+g.padding,c=c&&g.autoFit,u=u||(g.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(r),r.resolution=a,r.multisample=l,r.legacy=u,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(h);const d=this.tempRect.copyFrom(o.sourceFrame);s.projection.transform&&this.transformAABB(Ic.copyFrom(s.projection.transform).invert(),d),c?(r.sourceFrame.fit(d),(r.sourceFrame.width<=0||r.sourceFrame.height<=0)&&(r.sourceFrame.width=0,r.sourceFrame.height=0)):r.sourceFrame.intersects(d)||(r.sourceFrame.width=0,r.sourceFrame.height=0),this.roundFrame(r.sourceFrame,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,a,l),r.filters=e,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=r.sourceFrame.width,f.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,r.bindingSourceFrame.copyFrom(o.sourceFrame),r.bindingDestinationFrame.copyFrom(o.destinationFrame),r.transform=s.projection.transform,s.projection.transform=null,o.bind(r.renderTexture,r.sourceFrame,f),s.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),s=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const r=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(r[0]=e.destinationFrame.width,r[1]=e.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],o[0]=Math.round(r[0]*e.resolution),o[1]=Math.round(r[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*r[2]-.5*o[2],a[3]=e.sourceFrame.height*r[3]-.5*o[3],e.legacy){const h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),s.length===1)s[0].apply(this,e.renderTexture,l.renderTexture,Ui.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let h=e.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,e.resolution);c.filterFrame=h.filterFrame;let u=0;for(u=0;u<s.length-1;++u){u===1&&e.multisample>1&&(c=this.getOptimalFilterTexture(h.width,h.height,e.resolution),c.filterFrame=h.filterFrame),s[u].apply(this,h,c,Ui.CLEAR,e);const d=h;h=c,c=d}s[u].apply(this,h,l.renderTexture,Ui.BLEND,e),u>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=Ui.CLEAR){const{renderTexture:s,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,s.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const r=n.stateId&1||this.forceClear;(e===Ui.CLEAR||e===Ui.BLIT&&r)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,s,n){const r=this.renderer;r.state.set(t.state),this.bindAndClear(s,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,r.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(Wi.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(Wi.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:s,destinationFrame:n}=this.activeState,{orig:r}=e._texture,o=t.set(n.width,0,0,n.height,s.x,s.y),a=e.worldTransform.copyTo(Lt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/r.width,1/r.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,s=1,n=se.NONE){return this.texturePool.getOptimalTexture(t,e,s,n)}getFilterTexture(t,e,s){if(typeof t=="number"){const r=t;t=e,e=r}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,s||se.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const s=Ba[0],n=Ba[1],r=Ba[2],o=Ba[3];s.set(e.left,e.top),n.set(e.left,e.bottom),r.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(s,s),t.apply(n,n),t.apply(r,r),t.apply(o,o);const a=Math.min(s.x,n.x,r.x,o.x),l=Math.min(s.y,n.y,r.y,o.y),h=Math.max(s.x,n.x,r.x,o.x),c=Math.max(s.y,n.y,r.y,o.y);e.x=a,e.y=l,e.width=h-a,e.height=c-l}roundFrame(t,e,s,n,r){if(!(t.width<=0||t.height<=0||s.width<=0||s.height<=0)){if(r){const{a:o,b:a,c:l,d:h}=r;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}r=r?Ic.copyFrom(r):Ic.identity(),r.translate(-s.x,-s.y).scale(n.width/s.width,n.height/s.height).translate(n.x,n.y),this.transformAABB(r,t),t.ceil(e),this.transformAABB(r.invert(),t)}}}X0.extension={type:et.RendererSystem,name:"filter"};ft.add(X0);class nE{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=se.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const rE=new bt;class Y0{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new zu(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new bt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,s=this.renderer.context.extensions.depthTexture;Q.PREFER_ENV===Hn.WEBGL_LEGACY&&(e=null,s=null),e?t.drawBuffers=n=>e.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),s||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,s=0){const{gl:n}=this;if(t){const r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,r.framebuffer)),r.mipLevel!==s&&(t.dirtyId++,t.dirtyFormat++,r.mipLevel=s),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,r.dirtySize=t.dirtySize,this.updateFramebuffer(t,s)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>s,a=e.height>>s,l=o/e.width;this.setViewport(e.x*l,e.y*l,o,a)}else{const o=t.width>>s,a=t.height>>s;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,s,n){const r=this.viewport;t=Math.round(t),e=Math.round(e),s=Math.round(s),n=Math.round(n),(r.width!==s||r.height!==n||r.x!==t||r.y!==e)&&(r.x=t,r.y=e,r.width=s,r.height=n,this.gl.viewport(t,e,s,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,s,n,r=Tu.COLOR|Tu.DEPTH){const{gl:o}=this;o.clearColor(t,e,s,n),o.clear(r)}initFramebuffer(t){const{gl:e}=this,s=new nE(e.createFramebuffer());return s.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(t),t.disposeRunner.add(this),s}resizeFramebuffer(t){const{gl:e}=this,s=t.glFramebuffers[this.CONTEXT_UID];s.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,s.stencil),s.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let r=n.length;e.drawBuffers||(r=Math.min(r,1));for(let o=0;o<r;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&s.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,s.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:s}=this,n=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures;let o=r.length;s.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||s.createRenderbuffer():n.msaaBuffer&&(s.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const h=r[l],c=h.parentTextureArray||h;this.renderer.texture.bind(c,0),l===0&&n.msaaBuffer?(s.bindRenderbuffer(s.RENDERBUFFER,n.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,n.msaaBuffer)):(s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+l,h.target,c._glTextures[this.CONTEXT_UID].texture,e),a.push(s.COLOR_ATTACHMENT0+l))}if(a.length>1&&s.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const h=t.depthTexture;this.renderer.texture.bind(h,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,e)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,n.stencil),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,t.width,t.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n.stencil)):n.stencil&&(s.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let s=se.NONE;if(t<=1||e===null)return s;for(let n=0;n<e.length;n++)if(e[n]<=t){s=e[n];break}return s===1&&(s=se.NONE),s}blit(t,e,s){const{current:n,renderer:r,gl:o,CONTEXT_UID:a}=this;if(r.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const c=n.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new zu(n.width,n.height),l.blitFramebuffer.addColorTexture(0,c)),t=l.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=rE,e.width=n.width,e.height=n.height),s||(s=e);const h=e.width===s.width&&e.height===s.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,s.left,s.top,s.right,s.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const s=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!s)return;delete t.glFramebuffers[this.CONTEXT_UID];const r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(s.framebuffer),s.msaaBuffer&&n.deleteRenderbuffer(s.msaaBuffer),s.stencil&&n.deleteRenderbuffer(s.stencil)),s.blitFramebuffer&&this.disposeFramebuffer(s.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let s=0;s<e.length;s++)this.disposeFramebuffer(e[s],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const s=t.width,n=t.height,r=this.gl,o=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,o),e.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,e.multisample,r.DEPTH24_STENCIL8,s,n):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,s,n),e.stencil=o,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new bt}destroy(){this.renderer=null}}Y0.extension={type:et.RendererSystem,name:"framebuffer"};ft.add(Y0);const Pc={5126:4,5123:2,5121:1};class $0{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let s=this.renderer.context.extensions.vertexArrayObject;Q.PREFER_ENV===Hn.WEBGL_LEGACY&&(s=null),s?(t.createVertexArray=()=>s.createVertexArrayOES(),t.bindVertexArray=n=>s.bindVertexArrayOES(n),t.deleteVertexArray=n=>s.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=(n,r)=>s.vertexAttribDivisorANGLE(n,r),t.drawElementsInstanced=(n,r,o,a,l)=>s.drawElementsInstancedANGLE(n,r,o,a,l),t.drawArraysInstanced=(n,r,o,a)=>s.drawArraysInstancedANGLE(n,r,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:s}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},r=!0);const o=n[e.program.id]||this.initGeometryVao(t,e,r);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?s.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let s=0;s<t.buffers.length;s++){const n=t.buffers[s];e.update(n)}}checkCompatibility(t,e){const s=t.attributes,n=e.attributeData;for(const r in n)if(!s[r])throw new Error(`shader and geometry incompatible, geometry missing the "${r}" attribute`)}getSignature(t,e){const s=t.attributes,n=e.attributeData,r=["g",t.id];for(const o in s)n[o]&&r.push(o,n[o].location);return r.join("-")}initGeometryVao(t,e,s=!0){const n=this.gl,r=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[r]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const l=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID];let c=h[l];if(c)return h[a.id]=c,c;const u=t.buffers,d=t.attributes,f={},p={};for(const g in u)f[g]=0,p[g]=0;for(const g in d)!d[g].size&&a.attributeData[g]?d[g].size=a.attributeData[g].size:d[g].size||console.warn(`PIXI Geometry attribute '${g}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[g].buffer]+=d[g].size*Pc[d[g].type];for(const g in d){const m=d[g],_=m.size;m.stride===void 0&&(f[m.buffer]===_*Pc[m.type]?m.stride=0:m.stride=f[m.buffer]),m.start===void 0&&(m.start=p[m.buffer],p[m.buffer]+=_*Pc[m.type])}c=n.createVertexArray(),n.bindVertexArray(c);for(let g=0;g<u.length;g++){const m=u[g];o.bind(m),s&&m._glBuffers[r].refCount++}return this.activateVao(t,a),h[a.id]=c,h[l]=c,n.bindVertexArray(null),o.unbind(Yi.ARRAY_BUFFER),c}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const s=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,r=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!s){if(o)for(let l=0;l<r.length;l++){const h=r[l]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!e&&o.dispose(r[l],e))}if(!e){for(const l in s)if(l[0]==="g"){const h=s[l];this._activeVao===h&&this.unbind(),n.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let s=0;s<e.length;s++)this.disposeGeometry(this.managedGeometries[e[s]],t)}activateVao(t,e){const s=this.gl,n=this.CONTEXT_UID,r=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&r.bind(t.indexBuffer);let l=null;for(const h in a){const c=a[h],u=o[c.buffer],d=u._glBuffers[n];if(e.attributeData[h]){l!==d&&(r.bind(u),l=d);const f=e.attributeData[h].location;if(s.enableVertexAttribArray(f),s.vertexAttribPointer(f,c.size,c.type||s.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)s.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,s,n){const{gl:r}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?r.UNSIGNED_SHORT:r.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?r.drawElementsInstanced(t,e||o.indexBuffer.data.length,l,(s||0)*a,n||1):r.drawElements(t,e||o.indexBuffer.data.length,l,(s||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?r.drawArraysInstanced(t,s,e||o.getSize(),n||1):r.drawArrays(t,s,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}$0.extension={type:et.RendererSystem,name:"geometry"};ft.add($0);const Wp=new Lt;class K0{constructor(t,e){this._texture=t,this.mapCoord=new Lt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const s=this.mapCoord;for(let n=0;n<t.length;n+=2){const r=t[n],o=t[n+1];e[n]=r*s.a+o*s.c+s.tx,e[n+1]=r*s.b+o*s.d+s.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const s=e._uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const n=e.orig,r=e.trim;r&&(Wp.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Wp));const o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(e._frame.x+l+h)/o.width,a[1]=(e._frame.y+l+h)/o.height,a[2]=(e._frame.x+e._frame.width-l+h)/o.width,a[3]=(e._frame.y+e._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}}var oE=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,aE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class lE extends xe{constructor(t,e,s){let n=null;typeof t!="string"&&e===void 0&&s===void 0&&(n=t,t=void 0,e=void 0,s=void 0),super(t||aE,e||oE,s),this.maskSprite=n,this.maskMatrix=new Lt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,s,n){const r=this._maskSprite,o=r._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new K0(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,s,n))}}class hE{constructor(t=null){this.type=oe.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=xe.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=oe.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class q0{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let s=e;if(!s.isMaskData){const r=this.maskDataPool.pop()||new hE;r.pooled=!0,r.maskObject=e,s=r}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(s.copyCountersOrReset(n),s._colorMask=n?n._colorMask:15,s.autoDetect&&this.detect(s),s._target=t,s.type!==oe.SPRITE&&this.maskStack.push(s),s.enabled)switch(s.type){case oe.SCISSOR:this.renderer.scissor.push(s);break;case oe.STENCIL:this.renderer.stencil.push(s);break;case oe.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s);break;case oe.COLOR:this.pushColorMask(s);break}s.type===oe.SPRITE&&this.maskStack.push(s)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case oe.SCISSOR:this.renderer.scissor.pop(e);break;case oe.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case oe.SPRITE:this.popSpriteMask(e);break;case oe.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const s=this.maskStack[this.maskStack.length-1];s.type===oe.SPRITE&&s._filters&&(s._filters[0].maskSprite=s.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=oe.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=oe.SCISSOR:t.type=oe.STENCIL:t.type=oe.COLOR}pushSpriteMask(t){const{maskObject:e}=t,s=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new lE]));const r=this.renderer,o=r.renderTexture;let a,l;if(o.current){const c=o.current;a=t.resolution||c.resolution,l=t.multisample??c.multisample}else a=t.resolution||r.resolution,l=t.multisample??r.multisample;n[0].resolution=a,n[0].multisample=l,n[0].maskSprite=e;const h=s.filterArea;s.filterArea=e.getBounds(!0),r.filter.push(s,n),s.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,s=t._colorMask=e&t.colorMask;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}popColorMask(t){const e=t._colorMask,s=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}destroy(){this.renderer=null}}q0.extension={type:et.RendererSystem,name:"mask"};ft.add(q0);class Z0{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,s=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==s&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const jp=new Lt,Xp=[],_l=class extends Z0{constructor(i){super(i),this.glConst=Q.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const i=this.maskStack[this.maskStack.length-1];return i?i._scissorCounter:0}calcScissorRect(i){if(i._scissorRectLocal)return;const t=i._scissorRect,{maskObject:e}=i,{renderer:s}=this,n=s.renderTexture,r=e.getBounds(!0,Xp.pop()??new bt);this.roundFrameToPixels(r,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),t&&r.fit(t),i._scissorRectLocal=r}static isMatrixRotated(i){if(!i)return!1;const{a:t,b:e,c:s,d:n}=i;return(Math.abs(e)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)}testScissor(i){const{maskObject:t}=i;if(!t.isFastRect||!t.isFastRect()||_l.isMatrixRotated(t.worldTransform)||_l.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(i);const e=i._scissorRectLocal;return e.width>0&&e.height>0}roundFrameToPixels(i,t,e,s,n){_l.isMatrixRotated(n)||(n=n?jp.copyFrom(n):jp.identity(),n.translate(-e.x,-e.y).scale(s.width/e.width,s.height/e.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,i),i.fit(s),i.x=Math.round(i.x*t),i.y=Math.round(i.y*t),i.width=Math.round(i.width*t),i.height=Math.round(i.height*t))}push(i){i._scissorRectLocal||this.calcScissorRect(i);const{gl:t}=this.renderer;i._scissorRect||t.enable(t.SCISSOR_TEST),i._scissorCounter++,i._scissorRect=i._scissorRectLocal,this._useCurrent()}pop(i){const{gl:t}=this.renderer;i&&Xp.push(i._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const i=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=i.y:t=this.renderer.height-i.height-i.y,this.renderer.gl.scissor(i.x,t,i.width,i.height)}};let J0=_l;J0.extension={type:et.RendererSystem,name:"scissor"};ft.add(J0);class Q0 extends Z0{constructor(t){super(t),this.glConst=Q.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:s}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),t._stencilCounter++;const r=t._colorMask;r!==0&&(t._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,n,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,r!==0&&(t._colorMask=r,s.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=s?s._colorMask:15;n!==0&&(s._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(s._colorMask=n,e.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Q0.extension={type:et.RendererSystem,name:"stencil"};ft.add(Q0);class ty{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return vt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return vt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return vt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}ty.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"_plugin"};ft.add(ty);class ey{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Lt,this.transform=null}update(t,e,s,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,s,n),this.transform&&this.projectionMatrix.append(this.transform);const r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)}calculateProjection(t,e,s,n){const r=this.projectionMatrix,o=n?-1:1;r.identity(),r.a=1/e.width*2,r.d=o*(1/e.height*2),r.tx=-1-e.x*r.a,r.ty=-o-e.y*r.d}setTransform(t){}destroy(){this.renderer=null}}ey.extension={type:et.RendererSystem,name:"projection"};ft.add(ey);const cE=new qd;class iy{constructor(t){this.renderer=t,this._tempMatrix=new Lt}generateTexture(t,e){const{region:s,...n}=e||{},r=s||t.getLocalBounds(null,!0);r.width===0&&(r.width=1),r.height===0&&(r.height=1);const o=zn.create({width:r.width,height:r.height,...n});this._tempMatrix.tx=-r.x,this._tempMatrix.ty=-r.y;const a=t.transform;return t.transform=cE,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}iy.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"textureGenerator"};ft.add(iy);const an=new bt,eo=new bt;class sy{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new bt,this.destinationFrame=new bt,this.viewportFrame=new bt}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,s){const n=this.renderer;this.current=t;let r,o,a;t?(r=t.baseTexture,a=r.resolution,e||(an.width=t.frame.width,an.height=t.frame.height,e=an),s||(eo.x=t.frame.x,eo.y=t.frame.y,eo.width=e.width,eo.height=e.height,s=eo),o=r.framebuffer):(a=n.resolution,e||(an.width=n._view.screen.width,an.height=n._view.screen.height,e=an),s||(s=an,s.width=e.width,s.height=e.height));const l=this.viewportFrame;l.x=s.x*a,l.y=s.y*a,l.width=s.width*a,l.height=s.height*a,t||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(s,e,a,!o),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(s)}clear(t,e){const s=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=Pt.shared.setValue(t||s);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const r=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=r.width!==o.width||r.height!==o.height;if(a){let{x:l,y:h,width:c,height:u}=this.viewportFrame;l=Math.round(l),h=Math.round(h),c=Math.round(c),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,h,c,u)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,e),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}sy.extension={type:et.RendererSystem,name:"renderTexture"};ft.add(sy);class uE{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function dE(i,t){const e={},s=t.getProgramParameter(i,t.ACTIVE_ATTRIBUTES);for(let n=0;n<s;n++){const r=t.getActiveAttrib(i,n);if(r.name.startsWith("gl_"))continue;const o=U0(t,r.type),a={type:o,name:r.name,size:N0(o),location:t.getAttribLocation(i,r.name)};e[r.name]=a}return e}function fE(i,t){const e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS);for(let n=0;n<s;n++){const r=t.getActiveUniform(i,n),o=r.name.replace(/\[.*?\]$/,""),a=!!r.name.match(/\[.*?\]$/),l=U0(t,r.type);e[o]={name:o,index:n,type:l,size:r.size,isArray:a,value:B0(l,r.size)}}return e}function pE(i,t){var l;const e=Np(i,i.VERTEX_SHADER,t.vertexSrc),s=Np(i,i.FRAGMENT_SHADER,t.fragmentSrc),n=i.createProgram();i.attachShader(n,e),i.attachShader(n,s);const r=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(r&&(typeof i.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):i.transformFeedbackVaryings(n,r.names,r.bufferMode==="separate"?i.SEPARATE_ATTRIBS:i.INTERLEAVED_ATTRIBS)),i.linkProgram(n),i.getProgramParameter(n,i.LINK_STATUS)||VS(i,n,e,s),t.attributeData=dE(n,i),t.uniformData=fE(n,i),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((c,u)=>c>u?1:-1);for(let c=0;c<h.length;c++)t.attributeData[h[c]].location=c,i.bindAttribLocation(n,c,h[c]);i.linkProgram(n)}i.deleteShader(e),i.deleteShader(s);const o={};for(const h in t.uniformData){const c=t.uniformData[h];o[h]={location:i.getUniformLocation(n,h),value:B0(c.type,c.size)}}return new uE(n,o)}function gE(i,t,e,s,n){e.buffer.update(n)}const mE={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},ny={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function _E(i){const t=i.map(r=>({data:r,offset:0,dataLen:0,dirty:0}));let e=0,s=0,n=0;for(let r=0;r<t.length;r++){const o=t[r];if(e=ny[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,s%e!==0&&s<16){const a=s%e%16;s+=a,n+=a}s+e>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=e,s=e):(o.offset=n,s+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function yE(i,t){const e=[];for(const s in i)t[s]&&e.push(t[s]);return e.sort((s,n)=>s.index-n.index),e}function bE(i,t){if(!i.autoManage)return{size:0,syncFunc:gE};const e=yE(i.uniforms,t),{uboElements:s,size:n}=_E(e),r=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<s.length;o++){const a=s[o],l=i.uniforms[a.data.name],h=a.data.name;let c=!1;for(let u=0;u<vr.length;u++){const d=vr[u];if(d.codeUbo&&d.test(a.data,l)){r.push(`offset = ${a.offset/4};`,vr[u].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const u=N0(a.data.type),d=Math.max(ny[a.data.type]/16,1),f=u/d,p=(4-f%4)%4;r.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const u=mE[a.data.type];r.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${u};
                `)}}return r.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",r.join(`
`))}}let xE=0;const La={textureCount:0,uboCount:0};class ry{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=xE++}systemCheck(){if(!jS())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const s=t.program,n=s.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==s&&(this.program=s,this.gl.useProgram(n.program)),e||(La.textureCount=0,La.uboCount=0,this.syncUniformGroup(t.uniformGroup,La)),n}setUniforms(t){const e=this.shader.program,s=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(s.uniformData,t,this.renderer)}syncUniformGroup(t,e){const s=this.getGlProgram();(!t.static||t.dirtyId!==s.uniformDirtyGroups[t.id])&&(s.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,s,e))}syncUniforms(t,e,s){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,s)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=GS(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const s=this.getGlProgram();if(!t.static||t.dirtyId!==0||!s.uniformGroups[t.id]){t.dirtyId=0;const n=s.uniformGroups[t.id]||this.createSyncBufferGroup(t,s,e);t.buffer.update(),n(s.uniformData,t.uniforms,this.renderer,La,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,s.uniformBufferBindings[e])}createSyncBufferGroup(t,e,s){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const r=this.gl.getUniformBlockIndex(e.program,s);e.uniformBufferBindings[s]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,r,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=bE(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,s){const n=t.uniforms,r=[`${s}-`];for(const o in n)r.push(o),e[o]&&r.push(e[o].type);return r.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,s=t.program,n=pE(e,s);return s.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ry.extension={type:et.RendererSystem,name:"shader"};ft.add(ry);class Fh{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.2.4 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}Fh.defaultOptions={hello:!1};Fh.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"startup"};ft.add(Fh);function vE(i,t=[]){return t[mt.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.ADD]=[i.ONE,i.ONE],t[mt.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.NONE]=[0,0],t[mt.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],t[mt.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[mt.SRC_IN]=[i.DST_ALPHA,i.ZERO],t[mt.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],t[mt.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[mt.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],t[mt.DST_IN]=[i.ZERO,i.SRC_ALPHA],t[mt.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],t[mt.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],t[mt.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[mt.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],t}const wE=0,SE=1,EE=2,TE=3,AE=4,CE=5,Vu=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=mt.NONE,this._blendEq=!1,this.map=[],this.map[wE]=this.setBlend,this.map[SE]=this.setOffset,this.map[EE]=this.setCullFace,this.map[TE]=this.setDepthTest,this.map[AE]=this.setFrontFace,this.map[CE]=this.setDepthMask,this.checks=[],this.defaultState=new Cs,this.defaultState.blend=!0}contextChange(i){this.gl=i,this.blendModes=vE(i),this.set(this.defaultState),this.reset()}set(i){if(i=i||this.defaultState,this.stateId!==i.data){let t=this.stateId^i.data,e=0;for(;t;)t&1&&this.map[e].call(this,!!(i.data&1<<e)),t=t>>1,e++;this.stateId=i.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,i)}forceState(i){i=i||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(i.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,i);this.stateId=i.data}setBlend(i){this.updateCheck(Vu.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)}setOffset(i){this.updateCheck(Vu.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(i){this.gl[i?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(i){this.gl.depthMask(i)}setCullFace(i){this.gl[i?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(i){this.gl.frontFace(this.gl[i?"CW":"CCW"])}setBlendMode(i){if(i===this.blendMode)return;this.blendMode=i;const t=this.blendModes[i],e=this.gl;t.length===2?e.blendFunc(t[0],t[1]):e.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,e.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD))}setPolygonOffset(i,t){this.gl.polygonOffset(i,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(i,t){const e=this.checks.indexOf(i);t&&e===-1?this.checks.push(i):!t&&e!==-1&&this.checks.splice(e,1)}static checkBlendMode(i,t){i.setBlendMode(t.blendMode)}static checkPolygonOffset(i,t){i.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let oy=Vu;oy.extension={type:et.RendererSystem,name:"state"};ft.add(oy);class ME extends On{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(n=>t.systems[n]),s=[...e,...Object.keys(t.systems).filter(n=>!e.includes(n))];for(const n of s)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(e=>{this.runners[e]=new Ai(e)})}addSystem(t,e){const s=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=s,this._systemsHash[e]=s;for(const n in this.runners)this.runners[n].add(s);return this}emitWithCustomOptions(t,e){const s=Object.keys(this._systemsHash);t.items.forEach(n=>{const r=s.find(o=>this._systemsHash[o]===n);n[t.name](e[r])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const yl=class{constructor(i){this.renderer=i,this.count=0,this.checkCount=0,this.maxIdle=yl.defaultMaxIdle,this.checkCountMax=yl.defaultCheckCountMax,this.mode=yl.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Xd.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const i=this.renderer.texture,t=i.managedTextures;let e=!1;for(let s=0;s<t.length;s++){const n=t[s];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(i.destroyTexture(n,!0),t[s]=null,e=!0)}if(e){let s=0;for(let n=0;n<t.length;n++)t[n]!==null&&(t[s++]=t[n]);t.length=s}}unload(i){const t=this.renderer.texture,e=i._texture;e&&!e.framebuffer&&t.destroyTexture(e);for(let s=i.children.length-1;s>=0;s--)this.unload(i.children[s])}destroy(){this.renderer=null}};let vi=yl;vi.defaultMode=Xd.AUTO;vi.defaultMaxIdle=60*60;vi.defaultCheckCountMax=60*10;vi.extension={type:et.RendererSystem,name:"textureGC"};ft.add(vi);class Rc{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=gt.UNSIGNED_BYTE,this.internalFormat=K.RGBA,this.samplerType=0}}function IE(i){let t;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?t={[gt.UNSIGNED_BYTE]:{[K.RGBA]:i.RGBA8,[K.RGB]:i.RGB8,[K.RG]:i.RG8,[K.RED]:i.R8,[K.RGBA_INTEGER]:i.RGBA8UI,[K.RGB_INTEGER]:i.RGB8UI,[K.RG_INTEGER]:i.RG8UI,[K.RED_INTEGER]:i.R8UI,[K.ALPHA]:i.ALPHA,[K.LUMINANCE]:i.LUMINANCE,[K.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[gt.BYTE]:{[K.RGBA]:i.RGBA8_SNORM,[K.RGB]:i.RGB8_SNORM,[K.RG]:i.RG8_SNORM,[K.RED]:i.R8_SNORM,[K.RGBA_INTEGER]:i.RGBA8I,[K.RGB_INTEGER]:i.RGB8I,[K.RG_INTEGER]:i.RG8I,[K.RED_INTEGER]:i.R8I},[gt.UNSIGNED_SHORT]:{[K.RGBA_INTEGER]:i.RGBA16UI,[K.RGB_INTEGER]:i.RGB16UI,[K.RG_INTEGER]:i.RG16UI,[K.RED_INTEGER]:i.R16UI,[K.DEPTH_COMPONENT]:i.DEPTH_COMPONENT16},[gt.SHORT]:{[K.RGBA_INTEGER]:i.RGBA16I,[K.RGB_INTEGER]:i.RGB16I,[K.RG_INTEGER]:i.RG16I,[K.RED_INTEGER]:i.R16I},[gt.UNSIGNED_INT]:{[K.RGBA_INTEGER]:i.RGBA32UI,[K.RGB_INTEGER]:i.RGB32UI,[K.RG_INTEGER]:i.RG32UI,[K.RED_INTEGER]:i.R32UI,[K.DEPTH_COMPONENT]:i.DEPTH_COMPONENT24},[gt.INT]:{[K.RGBA_INTEGER]:i.RGBA32I,[K.RGB_INTEGER]:i.RGB32I,[K.RG_INTEGER]:i.RG32I,[K.RED_INTEGER]:i.R32I},[gt.FLOAT]:{[K.RGBA]:i.RGBA32F,[K.RGB]:i.RGB32F,[K.RG]:i.RG32F,[K.RED]:i.R32F,[K.DEPTH_COMPONENT]:i.DEPTH_COMPONENT32F},[gt.HALF_FLOAT]:{[K.RGBA]:i.RGBA16F,[K.RGB]:i.RGB16F,[K.RG]:i.RG16F,[K.RED]:i.R16F},[gt.UNSIGNED_SHORT_5_6_5]:{[K.RGB]:i.RGB565},[gt.UNSIGNED_SHORT_4_4_4_4]:{[K.RGBA]:i.RGBA4},[gt.UNSIGNED_SHORT_5_5_5_1]:{[K.RGBA]:i.RGB5_A1},[gt.UNSIGNED_INT_2_10_10_10_REV]:{[K.RGBA]:i.RGB10_A2,[K.RGBA_INTEGER]:i.RGB10_A2UI},[gt.UNSIGNED_INT_10F_11F_11F_REV]:{[K.RGB]:i.R11F_G11F_B10F},[gt.UNSIGNED_INT_5_9_9_9_REV]:{[K.RGB]:i.RGB9_E5},[gt.UNSIGNED_INT_24_8]:{[K.DEPTH_STENCIL]:i.DEPTH24_STENCIL8},[gt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[K.DEPTH_STENCIL]:i.DEPTH32F_STENCIL8}}:t={[gt.UNSIGNED_BYTE]:{[K.RGBA]:i.RGBA,[K.RGB]:i.RGB,[K.ALPHA]:i.ALPHA,[K.LUMINANCE]:i.LUMINANCE,[K.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[gt.UNSIGNED_SHORT_5_6_5]:{[K.RGB]:i.RGB},[gt.UNSIGNED_SHORT_4_4_4_4]:{[K.RGBA]:i.RGBA},[gt.UNSIGNED_SHORT_5_5_5_1]:{[K.RGBA]:i.RGBA}},t}class ay{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new _t,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=IE(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const s=new Rc(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Rc(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:s}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[s.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:s}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<s.length;n++)s[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<s.length;n++)s[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),s[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:s,CONTEXT_UID:n}=this;if(s)for(let r=t-1;r>=0;--r){const o=e[r];o&&o._glTextures[n].samplerType!==Au.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new Rc(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var s;e.internalFormat=((s=this.internalFormats[t.type])==null?void 0:s[t.format])??t.format,this.webGLVersion===2&&t.type===gt.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var n;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const s=this.renderer;if(this.initTextureType(t,e),(n=t.resource)!=null&&n.upload(s,t,e))e.samplerType!==Au.FLOAT&&(this.hasIntegerTextures=!0);else{const r=t.realWidth,o=t.realHeight,a=s.gl;(e.width!==r||e.height!==o||e.dirtyId<0)&&(e.width=r,e.height=o,a.texImage2D(t.target,0,e.internalFormat,r,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:s}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),s.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const n=this.managedTextures.indexOf(t);n!==-1&&br(this.managedTextures,n,1)}}updateTextureStyle(t){var s;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Qi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Hs.CLAMP:e.wrapMode=t.wrapMode,(s=t.resource)!=null&&s.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const s=this.gl;if(e.mipmap&&t.mipmap!==Qi.ON_MANUAL&&s.generateMipmap(t.target),s.texParameteri(t.target,s.TEXTURE_WRAP_S,e.wrapMode),s.texParameteri(t.target,s.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===_s.LINEAR?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===_s.LINEAR){const r=Math.min(t.anisotropicLevel,s.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));s.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===_s.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(t.target,s.TEXTURE_MAG_FILTER,t.scaleMode===_s.LINEAR?s.LINEAR:s.NEAREST)}destroy(){this.renderer=null}}ay.extension={type:et.RendererSystem,name:"texture"};ft.add(ay);class ly{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,n=t._glTransformFeedbacks[s]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:s,renderer:n}=this;e&&n.shader.bind(e),s.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:s,CONTEXT_UID:n}=this,r=e.createTransformFeedback();t._glTransformFeedbacks[n]=r,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,r);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(s.buffer.update(a),a._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),r}disposeTransformFeedback(t,e){const s=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const r=this.renderer.buffer;if(r)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&r.dispose(a,e))}s&&(e||n.deleteTransformFeedback(s),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}ly.extension={type:et.RendererSystem,name:"transformFeedback"};ft.add(ly);class Bh{constructor(t){this.renderer=t}init(t){this.screen=new bt(0,0,t.width,t.height),this.element=t.view||Q.ADAPTER.createCanvas(),this.resolution=t.resolution||Q.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const s=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=s,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${s}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",s,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Bh.defaultOptions={width:800,height:600,resolution:Q.RESOLUTION,autoDensity:!1};Bh.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"_view"};ft.add(Bh);Q.PREFER_ENV=Hn.WEBGL2;Q.STRICT_TEXTURE_CACHE=!1;Q.RENDER_OPTIONS={...kh.defaultOptions,...Oh.defaultOptions,...Bh.defaultOptions,...Fh.defaultOptions};Object.defineProperties(Q,{WRAP_MODE:{get(){return _t.defaultOptions.wrapMode},set(i){vt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),_t.defaultOptions.wrapMode=i}},SCALE_MODE:{get(){return _t.defaultOptions.scaleMode},set(i){vt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),_t.defaultOptions.scaleMode=i}},MIPMAP_TEXTURES:{get(){return _t.defaultOptions.mipmap},set(i){vt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),_t.defaultOptions.mipmap=i}},ANISOTROPIC_LEVEL:{get(){return _t.defaultOptions.anisotropicLevel},set(i){vt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),_t.defaultOptions.anisotropicLevel=i}},FILTER_RESOLUTION:{get(){return vt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),xe.defaultResolution},set(i){xe.defaultResolution=i}},FILTER_MULTISAMPLE:{get(){return vt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),xe.defaultMultisample},set(i){xe.defaultMultisample=i}},SPRITE_MAX_TEXTURES:{get(){return xi.defaultMaxTextures},set(i){vt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),xi.defaultMaxTextures=i}},SPRITE_BATCH_SIZE:{get(){return xi.defaultBatchSize},set(i){vt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),xi.defaultBatchSize=i}},CAN_UPLOAD_SAME_BUFFER:{get(){return xi.canUploadSameBuffer},set(i){vt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),xi.canUploadSameBuffer=i}},GC_MODE:{get(){return vi.defaultMode},set(i){vt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),vi.defaultMode=i}},GC_MAX_IDLE:{get(){return vi.defaultMaxIdle},set(i){vt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),vi.defaultMaxIdle=i}},GC_MAX_CHECK_COUNT:{get(){return vi.defaultCheckCountMax},set(i){vt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),vi.defaultCheckCountMax=i}},PRECISION_VERTEX:{get(){return Si.defaultVertexPrecision},set(i){vt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Si.defaultVertexPrecision=i}},PRECISION_FRAGMENT:{get(){return Si.defaultFragmentPrecision},set(i){vt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Si.defaultFragmentPrecision=i}}});var Bn=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Bn||{});class Dc{constructor(t,e=null,s=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=s,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Ve=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Dc(null,null,1/0),this.deltaMS=1/Ve.targetFPMS,this.elapsedMS=1/Ve.targetFPMS,this._tick=i=>{this._requestId=null,this.started&&(this.update(i),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(i,t,e=Bn.NORMAL){return this._addListener(new Dc(i,t,e))}addOnce(i,t,e=Bn.NORMAL){return this._addListener(new Dc(i,t,e,!0))}_addListener(i){let t=this._head.next,e=this._head;if(!t)i.connect(e);else{for(;t;){if(i.priority>t.priority){i.connect(e);break}e=t,t=t.next}i.previous||i.connect(e)}return this._startIfPossible(),this}remove(i,t){let e=this._head.next;for(;e;)e.match(i,t)?e=e.destroy():e=e.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let i=0,t=this._head;for(;t=t.next;)i++;return i}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let i=this._head.next;for(;i;)i=i.destroy(!0);this._head.destroy(),this._head=null}}update(i=performance.now()){let t;if(i>this.lastTime){if(t=this.elapsedMS=i-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=i-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=i-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Ve.targetFPMS;const e=this._head;let s=e.next;for(;s;)s=s.emit(this.deltaTime);e.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(i){const t=Math.min(this.maxFPS,i),e=Math.min(Math.max(0,t)/1e3,Ve.targetFPMS);this._maxElapsedMS=1/e}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(i){if(i===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,i);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Ve._shared){const i=Ve._shared=new Ve;i.autoStart=!0,i._protected=!0}return Ve._shared}static get system(){if(!Ve._system){const i=Ve._system=new Ve;i.autoStart=!0,i._protected=!0}return Ve._system}};let we=Ve;we.targetFPMS=.06;Object.defineProperties(Q,{TARGET_FPMS:{get(){return we.targetFPMS},set(i){vt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),we.targetFPMS=i}}});class hy{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Bn.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?we.shared:new we,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}hy.extension=et.Application;ft.add(hy);const cy=[];ft.handleByList(et.Renderer,cy);function PE(i){for(const t of cy)if(t.test(i))return new t(i);throw new Error("Unable to auto-detect a suitable renderer.")}var RE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,DE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const OE=RE,uy=DE;class dy{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const s=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,s)}else{const s=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,s)}e>=se.HIGH?this.multisample=se.HIGH:e>=se.MEDIUM?this.multisample=se.MEDIUM:e>=se.LOW?this.multisample=se.LOW:this.multisample=se.NONE}destroy(){}}dy.extension={type:et.RendererSystem,name:"_multisample"};ft.add(dy);class kE{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class fy{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,n=t._glBuffers[s]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:s,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const r=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,s.bindBufferBase(s.UNIFORM_BUFFER,e,r.buffer)}}bindBufferRange(t,e,s){const{gl:n,CONTEXT_UID:r}=this;s=s||0;const o=t._glBuffers[r]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,o.buffer,s*256,256)}update(t){const{gl:e,CONTEXT_UID:s}=this,n=t._glBuffers[s]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const r=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,r)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const s=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),s&&(e||n.deleteBuffer(s.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let s=0;s<e.length;s++)this.dispose(this.managedBuffers[e[s]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:s}=this;return t._glBuffers[e]=new kE(s.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}fy.extension={type:et.RendererSystem,name:"buffer"};ft.add(fy);class py{constructor(t){this.renderer=t}render(t,e){const s=this.renderer;let n,r,o,a;if(e&&(n=e.renderTexture,r=e.clear,o=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!n,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=o,!s.context.isLost){if(n||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}s.renderTexture.bind(n),s.batch.currentRenderer.start(),(r??s.background.clearBeforeRender)&&s.renderTexture.clear(),t.render(s),s.batch.currentRenderer.flush(),n&&(e.blit&&s.framebuffer.blit(),n.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}py.extension={type:et.RendererSystem,name:"objectRenderer"};ft.add(py);const Wu=class extends ME{constructor(i){super(),this.type=x0.WEBGL,i=Object.assign({},Q.RENDER_OPTIONS,i),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ci({projectionMatrix:new Lt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Wu.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in i&&(vt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),i.premultipliedAlpha=i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",i.backgroundAlpha=i.useContextAlpha===!1?1:i.backgroundAlpha),this._plugin.rendererPlugins=Wu.__plugins,this.options=i,this.startup.run(this.options)}static test(i){return i!=null&&i.forceCanvas?!1:rS()}render(i,t){this.objectRenderer.render(i,t)}resize(i,t){this._view.resizeView(i,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(i=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:i}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(i){this._view.resolution=i,this.runners.resolutionChange.emit(i)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return vt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return vt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return vt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return vt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(i){vt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=i}get backgroundAlpha(){return vt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(i){vt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=i}get powerPreference(){return vt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(i,t){return this.textureGenerator.generateTexture(i,t)}};let Xr=Wu;Xr.extension={type:et.Renderer,priority:1};Xr.__plugins={};Xr.__systems={};ft.handleByMap(et.RendererPlugin,Xr.__plugins);ft.handleByMap(et.RendererSystem,Xr.__systems);ft.add(Xr);class gy extends jo{constructor(t,e){const{width:s,height:n}=e||{};super(s,n),this.items=[],this.itemDirtyIds=[];for(let r=0;r<t;r++){const o=new _t;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let s=0;s<this.length;s++)t[s]&&(t[s].castToBaseTexture?this.addBaseTextureAt(t[s].castToBaseTexture(),s):t[s]instanceof jo?this.addResourceAt(t[s],s):this.addResourceAt(R0(t[s],e),s))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const e=this.items.map(s=>s.resource).filter(s=>s).map(s=>s.load());return this._load=Promise.all(e).then(()=>{const{realWidth:s,realHeight:n}=this.items[0];return this.resize(s,n),Promise.resolve(this)}),this._load}}class FE extends gy{constructor(t,e){const{width:s,height:n}=e||{};let r,o;Array.isArray(t)?(r=t,o=t.length):o=t,super(o,{width:s,height:n}),r&&this.initFromArray(r,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=mr.TEXTURE_2D_ARRAY}upload(t,e,s){const{length:n,itemDirtyIds:r,items:o}=this,{gl:a}=t;s.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,n,0,e.format,s.type,null);for(let l=0;l<n;l++){const h=o[l];r[l]<h.dirtyId&&(r[l]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,h.resource.width,h.resource.height,1,e.format,s.type,h.resource.source))}return!0}}class BE extends qs{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const uo=class extends gy{constructor(i,t){const{width:e,height:s,autoLoad:n,linkBaseTexture:r}=t||{};if(i&&i.length!==uo.SIDES)throw new Error(`Invalid length. Got ${i.length}, expected 6`);super(6,{width:e,height:s});for(let o=0;o<uo.SIDES;o++)this.items[o].target=mr.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=r!==!1,i&&this.initFromArray(i,t),n!==!1&&this.load()}bind(i){super.bind(i),i.target=mr.TEXTURE_CUBE_MAP}addBaseTextureAt(i,t,e){if(e===void 0&&(e=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||i.parentTextureArray||Object.keys(i._glTextures).length>0)if(i.resource)this.addResourceAt(i.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else i.target=mr.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.parentTextureArray=this.baseTexture,this.items[t]=i;return i.valid&&!this.valid&&this.resize(i.realWidth,i.realHeight),this.items[t]=i,this}upload(i,t,e){const s=this.itemDirtyIds;for(let n=0;n<uo.SIDES;n++){const r=this.items[n];(s[n]<r.dirtyId||e.dirtyId<t.dirtyId)&&(r.valid&&r.resource?(r.resource.upload(i,r,e),s[n]=r.dirtyId):s[n]<-1&&(i.gl.texImage2D(r.target,0,e.internalFormat,t.realWidth,t.realHeight,0,t.format,e.type,null),s[n]=-1))}return!0}static test(i){return Array.isArray(i)&&i.length===uo.SIDES}};let my=uo;my.SIDES=6;class ur extends qs{constructor(t,e){e=e||{};let s,n;typeof t=="string"?(s=ur.EMPTY,n=t):(s=t,n=null),super(s),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const s=await Q.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await s.blob();if(this.destroyed)return;const r=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Oi.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=r,this.update(),t(this)}catch(s){if(this.destroyed)return;e(s),this.onError.emit(s)}}),this._load)}upload(t,e,s){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,s)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return ur._EMPTY=ur._EMPTY??Q.ADAPTER.createCanvas(0,0),ur._EMPTY}}const bl=class extends qs{constructor(i,t){t=t||{},super(Q.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=i,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(i=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),i(this)},bl.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const i=new Image;qs.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=t=>{this._resolve&&(i.onerror=null,this.onError.emit(t))},i.onload=()=>{if(!this._resolve)return;const t=i.width,e=i.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,n=e*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/e*t,n=this._overrideHeight||this._overrideWidth/t*e),s=Math.round(s),n=Math.round(n);const r=this.source;r.width=s,r.height=n,r._pixiId=`canvas_${Fn()}`,r.getContext("2d").drawImage(i,0,0,t,e,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(i){const t=bl.SVG_SIZE.exec(i),e={};return t&&(e[t[1]]=Math.round(parseFloat(t[3])),e[t[5]]=Math.round(parseFloat(t[7]))),e}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(i,t){return t==="svg"||typeof i=="string"&&i.startsWith("data:image/svg+xml")||typeof i=="string"&&bl.SVG_XML.test(i)}};let Xo=bl;Xo.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Xo.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const ju=class extends qs{constructor(i,t){if(t=t||{},!(i instanceof HTMLVideoElement)){const e=document.createElement("video");e.setAttribute("preload","auto"),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),typeof i=="string"&&(i=[i]);const s=i[0].src||i[0];qs.crossOrigin(e,s,t.crossorigin);for(let n=0;n<i.length;++n){const r=document.createElement("source");let{src:o,mime:a}=i[n];o=o||i[n];const l=o.split("?").shift().toLowerCase(),h=l.slice(l.lastIndexOf(".")+1);a=a||ju.MIME_TYPES[h]||`video/${h}`,r.src=o,r.type=a,e.appendChild(r)}i=e}super(i),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(i=0){if(!this.destroyed){const t=we.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,i.load())}),this._load}_onError(i){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(i)}_isSourcePlaying(){const i=this.source;return!i.paused&&!i.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(we.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(we.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const i=this.source;i.removeEventListener("canplay",this._onCanPlay),i.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(i.videoWidth,i.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&i.play()}dispose(){this._isConnectedToTicker&&(we.shared.remove(this.update,this),this._isConnectedToTicker=!1);const i=this.source;i&&(i.removeEventListener("error",this._onError,!0),i.pause(),i.src="",i.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(i){i!==this._autoUpdate&&(this._autoUpdate=i,!this._autoUpdate&&this._isConnectedToTicker?(we.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(we.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(i){i!==this._updateFPS&&(this._updateFPS=i)}static test(i,t){return globalThis.HTMLVideoElement&&i instanceof HTMLVideoElement||ju.TYPES.includes(t)}};let Zd=ju;Zd.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Zd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Nu.push(ur,z0,BE,Zd,Xo,ua,my,FE);class $l{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?bt.EMPTY:(t=t||new bt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:s,b:n,c:r,d:o,tx:a,ty:l}=t,h=s*e.x+r*e.y+a,c=n*e.x+o*e.y+l;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let e=this.minX,s=this.minY,n=this.maxX,r=this.maxY,o=t[0],a=t[1];e=o<e?o:e,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,o=t[2],a=t[3],e=o<e?o:e,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,o=t[4],a=t[5],e=o<e?o:e,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,o=t[6],a=t[7],e=o<e?o:e,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,this.minX=e,this.minY=s,this.maxX=n,this.maxY=r}addFrame(t,e,s,n,r){this.addFrameMatrix(t.worldTransform,e,s,n,r)}addFrameMatrix(t,e,s,n,r){const o=t.a,a=t.b,l=t.c,h=t.d,c=t.tx,u=t.ty;let d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,m=o*e+l*s+c,_=a*e+h*s+u;d=m<d?m:d,f=_<f?_:f,p=m>p?m:p,g=_>g?_:g,m=o*n+l*s+c,_=a*n+h*s+u,d=m<d?m:d,f=_<f?_:f,p=m>p?m:p,g=_>g?_:g,m=o*e+l*r+c,_=a*e+h*r+u,d=m<d?m:d,f=_<f?_:f,p=m>p?m:p,g=_>g?_:g,m=o*n+l*r+c,_=a*n+h*r+u,d=m<d?m:d,f=_<f?_:f,p=m>p?m:p,g=_>g?_:g,this.minX=d,this.minY=f,this.maxX=p,this.maxY=g}addVertexData(t,e,s){let n=this.minX,r=this.minY,o=this.maxX,a=this.maxY;for(let l=e;l<s;l+=2){const h=t[l],c=t[l+1];n=h<n?h:n,r=c<r?c:r,o=h>o?h:o,a=c>a?c:a}this.minX=n,this.minY=r,this.maxX=o,this.maxY=a}addVertices(t,e,s,n){this.addVerticesMatrix(t.worldTransform,e,s,n)}addVerticesMatrix(t,e,s,n,r=0,o=r){const a=t.a,l=t.b,h=t.c,c=t.d,u=t.tx,d=t.ty;let f=this.minX,p=this.minY,g=this.maxX,m=this.maxY;for(let _=s;_<n;_+=2){const y=e[_],b=e[_+1],v=a*y+h*b+u,x=c*b+l*y+d;f=Math.min(f,v-r),g=Math.max(g,v+r),p=Math.min(p,x-o),m=Math.max(m,x+o)}this.minX=f,this.minY=p,this.maxX=g,this.maxY=m}addBounds(t){const e=this.minX,s=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<s?t.minY:s,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r}addBoundsMask(t,e){const s=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(s<=r&&n<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=s<a?s:a,this.minY=n<l?n:l,this.maxX=r>h?r:h,this.maxY=o>c?o:c}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const s=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(s<=r&&n<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=s<a?s:a,this.minY=n<l?n:l,this.maxX=r>h?r:h,this.maxY=o>c?o:c}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,s,n,r,o){t-=r,e-=o,s+=r,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>s?this.maxX:s,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}}class Yt extends On{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new qd,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new $l,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let s=0;s<e.length;++s){const n=e[s];Object.defineProperty(Yt.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new bt),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new bt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new $l);const e=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,r=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=s,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-r,o}toGlobal(t,e,s=!1){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,s,n){return e&&(t=e.toGlobal(t,s,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,s=1,n=1,r=0,o=0,a=0,l=0,h=0){return this.position.x=t,this.position.y=e,this.scale.x=s||1,this.scale.y=n||1,this.rotation=r,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new LE),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*OS}set angle(t){this.transform.rotation=t*kS}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class LE extends Yt{constructor(){super(...arguments),this.sortDirty=null}}Yt.prototype.displayObjectUpdateTransform=Yt.prototype.updateTransform;const NE=new Lt;function UE(i,t){return i.zIndex===t.zIndex?i._lastSortedIndex-t._lastSortedIndex:i.zIndex-t.zIndex}const Xu=class extends Yt{constructor(){super(),this.children=[],this.sortableChildren=Xu.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(i){}addChild(...i){if(i.length>1)for(let t=0;t<i.length;t++)this.addChild(i[t]);else{const t=i[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return i[0]}addChildAt(i,t){if(t<0||t>this.children.length)throw new Error(`${i}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.splice(t,0,i),this._boundsID++,this.onChildrenChange(t),i.emit("added",this),this.emit("childAdded",i,this,t),i}swapChildren(i,t){if(i===t)return;const e=this.getChildIndex(i),s=this.getChildIndex(t);this.children[e]=t,this.children[s]=i,this.onChildrenChange(e<s?e:s)}getChildIndex(i){const t=this.children.indexOf(i);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(i,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const e=this.getChildIndex(i);br(this.children,e,1),this.children.splice(t,0,i),this.onChildrenChange(t)}getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]}removeChild(...i){if(i.length>1)for(let t=0;t<i.length;t++)this.removeChild(i[t]);else{const t=i[0],e=this.children.indexOf(t);if(e===-1)return null;t.parent=null,t.transform._parentID=-1,br(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e)}return i[0]}removeChildAt(i){const t=this.getChildAt(i);return t.parent=null,t.transform._parentID=-1,br(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i),t}removeChildren(i=0,t=this.children.length){const e=i,s=t,n=s-e;let r;if(n>0&&n<=s){r=this.children.splice(e,n);for(let o=0;o<r.length;++o)r[o].parent=null,r[o].transform&&(r[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(i);for(let o=0;o<r.length;++o)r[o].emit("removed",this),this.emit("childRemoved",r[o],this,o);return r}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let i=!1;for(let t=0,e=this.children.length;t<e;++t){const s=this.children[t];s._lastSortedIndex=t,!i&&s.zIndex!==0&&(i=!0)}i&&this.children.length>1&&this.children.sort(UE),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let i=0,t=this.children.length;i<t;++i){const e=this.children[i];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let i=0;i<this.children.length;i++){const t=this.children[i];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(i,t=!1){const e=super.getLocalBounds(i);if(!t)for(let s=0,n=this.children.length;s<n;++s){const r=this.children[s];r.visible&&r.updateTransform()}return e}_calculateBounds(){}_renderWithCulling(i){const t=i.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let e,s;this.cullArea?(e=this.cullArea,s=this.worldTransform):this._render!==Xu.prototype._render&&(e=this.getBounds(!0));const n=i.projection.transform;if(n&&(s?(s=NE.copyFrom(s),s.prepend(n)):s=n),e&&t.intersects(e,s))this._render(i);else if(this.cullArea)return;for(let r=0,o=this.children.length;r<o;++r){const a=this.children[r],l=a.cullable;a.cullable=l||!this.cullArea,a.render(i),a.cullable=l}}render(i){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(i);else if(this.cullable)this._renderWithCulling(i);else{this._render(i);for(let e=0,s=this.children.length;e<s;++e)this.children[e].render(i)}}renderAdvanced(i){var n,r,o;const t=this.filters,e=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const s=t&&((n=this._enabledFilters)==null?void 0:n.length)||e&&(!e.isMaskData||e.enabled&&(e.autoDetect||e.type!==oe.NONE));if(s&&i.batch.flush(),t&&((r=this._enabledFilters)!=null&&r.length)&&i.filter.push(this,this._enabledFilters),e&&i.mask.push(this,this._mask),this.cullable)this._renderWithCulling(i);else{this._render(i);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(i)}s&&i.batch.flush(),e&&i.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&i.filter.pop()}_render(i){}destroy(i){super.destroy(),this.sortDirty=!1;const t=typeof i=="boolean"?i:i==null?void 0:i.children,e=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<e.length;++s)e[s].destroy(i)}get width(){return this.scale.x*this.getLocalBounds().width}set width(i){const t=this.getLocalBounds().width;t!==0?this.scale.x=i/t:this.scale.x=1,this._width=i}get height(){return this.scale.y*this.getLocalBounds().height}set height(i){const t=this.getLocalBounds().height;t!==0?this.scale.y=i/t:this.scale.y=1,this._height=i}};let li=Xu;li.defaultSortableChildren=!1;li.prototype.containerUpdateTransform=li.prototype.updateTransform;Object.defineProperties(Q,{SORTABLE_CHILDREN:{get(){return li.defaultSortableChildren},set(i){vt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),li.defaultSortableChildren=i}}});const io=new At,GE=new Uint16Array([0,1,2,0,2,3]);class Yr extends li{constructor(t){super(),this._anchor=new Os(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Pt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=mt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||dt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=GE,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Q.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ds(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ds(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,s=e.a,n=e.b,r=e.c,o=e.d,a=e.tx,l=e.ty,h=this.vertexData,c=t.trim,u=t.orig,d=this._anchor;let f=0,p=0,g=0,m=0;if(c?(p=c.x-d._x*u.width,f=p+c.width,m=c.y-d._y*u.height,g=m+c.height):(p=-d._x*u.width,f=p+u.width,m=-d._y*u.height,g=m+u.height),h[0]=s*p+r*m+a,h[1]=o*m+n*p+l,h[2]=s*f+r*m+a,h[3]=o*m+n*f+l,h[4]=s*f+r*g+a,h[5]=o*g+n*f+l,h[6]=s*p+r*g+a,h[7]=o*g+n*p+l,this._roundPixels){const _=Q.RESOLUTION;for(let y=0;y<h.length;++y)h[y]=Math.round(h[y]*_)/_}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,s=t.orig,n=this._anchor,r=this.transform.worldTransform,o=r.a,a=r.b,l=r.c,h=r.d,c=r.tx,u=r.ty,d=-n._x*s.width,f=d+s.width,p=-n._y*s.height,g=p+s.height;e[0]=o*d+l*p+c,e[1]=h*p+a*d+u,e[2]=o*f+l*p+c,e[3]=h*p+a*f+u,e[4]=o*f+l*g+c,e[5]=h*g+a*f+u,e[6]=o*d+l*g+c,e[7]=h*g+a*d+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new $l),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new bt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,io);const e=this._texture.orig.width,s=this._texture.orig.height,n=-e*this.anchor.x;let r=0;return io.x>=n&&io.x<n+e&&(r=-s*this.anchor.y,io.y>=r&&io.y<r+s)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!s)}this._texture=null}static from(t,e){const s=t instanceof dt?t:dt.from(t,e);return new Yr(s)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Ds(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Ds(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||dt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const _y=new Lt;Yt.prototype._cacheAsBitmap=!1;Yt.prototype._cacheData=null;Yt.prototype._cacheAsBitmapResolution=null;Yt.prototype._cacheAsBitmapMultisample=null;class HE{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Yt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(i){i!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(i){i!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(i){if(this._cacheAsBitmap===i)return;this._cacheAsBitmap=i;let t;i?(this._cacheData||(this._cacheData=new HE),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});Yt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Yt.prototype._initCachedDisplayObject=function(t){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const s=this.getLocalBounds(null,!0).clone();if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;s.pad(p)}s.ceil(Q.RESOLUTION);const n=t.renderTexture.current,r=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=zn.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${Fn()}`;this._cacheData.textureCacheId=h,_t.addToCache(l.baseTexture,h),dt.addToCache(l,h);const c=this.transform.localTransform.copyTo(_y).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(n,r,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const u=new Yr(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(s.x/s.width),u.anchor.y=-(s.y/s.height),u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)};Yt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Yt.prototype._initCachedDisplayObjectCanvas=function(t){var c;if((c=this._cacheData)!=null&&c.sprite)return;const e=this.getLocalBounds(null,!0),s=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,r=t._projTransform;e.ceil(Q.RESOLUTION);const o=zn.create({width:e.width,height:e.height}),a=`cacheAsBitmap_${Fn()}`;this._cacheData.textureCacheId=a,_t.addToCache(o.baseTexture,a),dt.addToCache(o,a);const l=_y;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=s;const h=new Yr(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(e.x/e.width),h.anchor.y=-(e.y/e.height),h.alpha=s,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};Yt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Yt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Yt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_t.removeFromCache(this._cacheData.textureCacheId),dt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Yt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};Yt.prototype.name=null;li.prototype.getChildByName=function(t,e){for(let s=0,n=this.children.length;s<n;s++)if(this.children[s].name===t)return this.children[s];if(e)for(let s=0,n=this.children.length;s<n;s++){const r=this.children[s];if(!r.getChildByName)continue;const o=r.getChildByName(t,!0);if(o)return o}return null};Yt.prototype.getGlobalPosition=function(t=new At,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var zE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class VE extends xe{constructor(t=1){super(OE,zE,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const WE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},jE=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function XE(i){const t=WE[i],e=t.length;let s=jE,n="";const r="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<i;a++){let l=r.replace("%index%",a.toString());o=a,a>=e&&(o=i-a-1),l=l.replace("%value%",t[o].toString()),n+=l,n+=`
`}return s=s.replace("%blur%",n),s=s.replace("%size%",i.toString()),s}const YE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function $E(i,t){const e=Math.ceil(i/2);let s=YE,n="",r;t?r="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":r="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<i;o++){let a=r.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(e-1)}.0`),n+=a,n+=`
`}return s=s.replace("%blur%",n),s=s.replace("%size%",i.toString()),s}class Yu extends xe{constructor(t,e=8,s=4,n=xe.defaultResolution,r=5){const o=$E(r,t),a=XE(r);super(o,a),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=s,this.blur=e}apply(t,e,s,n){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/e.width):this.uniforms.strength=1/s.height*(s.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,s,n);else{const r=t.getFilterTexture(),o=t.renderer;let a=e,l=r;this.state.blend=!1,t.applyFilter(this,a,l,Ui.CLEAR);for(let h=1;h<this.passes-1;h++){t.bindAndClear(a,Ui.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,s,n),t.returnFilterTexture(r)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class KE extends xe{constructor(t=8,e=4,s=xe.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Yu(!0,t,e,s,n),this.blurYFilter=new Yu(!1,t,e,s,n),this.resolution=s,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,s,n){const r=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(r&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,Ui.CLEAR),this.blurYFilter.apply(t,a,s,n),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,s,n):this.blurXFilter.apply(t,e,s,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var qE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class $u extends xe{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(uy,qE,t),this.alpha=1}_loadMatrix(t,e=!1){let s=t;e&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s}_multiply(t,e,s){return t[0]=e[0]*s[0]+e[1]*s[5]+e[2]*s[10]+e[3]*s[15],t[1]=e[0]*s[1]+e[1]*s[6]+e[2]*s[11]+e[3]*s[16],t[2]=e[0]*s[2]+e[1]*s[7]+e[2]*s[12]+e[3]*s[17],t[3]=e[0]*s[3]+e[1]*s[8]+e[2]*s[13]+e[3]*s[18],t[4]=e[0]*s[4]+e[1]*s[9]+e[2]*s[14]+e[3]*s[19]+e[4],t[5]=e[5]*s[0]+e[6]*s[5]+e[7]*s[10]+e[8]*s[15],t[6]=e[5]*s[1]+e[6]*s[6]+e[7]*s[11]+e[8]*s[16],t[7]=e[5]*s[2]+e[6]*s[7]+e[7]*s[12]+e[8]*s[17],t[8]=e[5]*s[3]+e[6]*s[8]+e[7]*s[13]+e[8]*s[18],t[9]=e[5]*s[4]+e[6]*s[9]+e[7]*s[14]+e[8]*s[19]+e[9],t[10]=e[10]*s[0]+e[11]*s[5]+e[12]*s[10]+e[13]*s[15],t[11]=e[10]*s[1]+e[11]*s[6]+e[12]*s[11]+e[13]*s[16],t[12]=e[10]*s[2]+e[11]*s[7]+e[12]*s[12]+e[13]*s[17],t[13]=e[10]*s[3]+e[11]*s[8]+e[12]*s[13]+e[13]*s[18],t[14]=e[10]*s[4]+e[11]*s[9]+e[12]*s[14]+e[13]*s[19]+e[14],t[15]=e[15]*s[0]+e[16]*s[5]+e[17]*s[10]+e[18]*s[15],t[16]=e[15]*s[1]+e[16]*s[6]+e[17]*s[11]+e[18]*s[16],t[17]=e[15]*s[2]+e[16]*s[7]+e[17]*s[12]+e[18]*s[17],t[18]=e[15]*s[3]+e[16]*s[8]+e[17]*s[13]+e[18]*s[18],t[19]=e[15]*s[4]+e[16]*s[9]+e[17]*s[14]+e[18]*s[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const s=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}tint(t,e){const[s,n,r]=Pt.shared.setValue(t).toArray(),o=[s,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const s=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const s=Math.cos(t),n=Math.sin(t),r=Math.sqrt,o=1/3,a=r(o),l=s+(1-s)*o,h=o*(1-s)-a*n,c=o*(1-s)+a*n,u=o*(1-s)+a*n,d=s+o*(1-s),f=o*(1-s)-a*n,p=o*(1-s)-a*n,g=o*(1-s)+a*n,m=s+o*(1-s),_=[l,h,c,0,0,u,d,f,0,0,p,g,m,0,0,0,0,0,1,0];this._loadMatrix(_,e)}contrast(t,e){const s=(t||0)+1,n=-.5*(s-1),r=[s,0,0,0,n,0,s,0,0,n,0,0,s,0,n,0,0,0,1,0];this._loadMatrix(r,e)}saturate(t=0,e){const s=t*2/3+1,n=(s-1)*-.5,r=[s,n,n,0,0,n,s,n,0,0,n,n,s,0,0,0,0,0,1,0];this._loadMatrix(r,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,s,n,r){t=t||.2,e=e||.15,s=s||16770432,n=n||3375104;const o=Pt.shared,[a,l,h]=o.setValue(s).toArray(),[c,u,d]=o.setValue(n).toArray(),f=[.3,.59,.11,0,0,a,l,h,t,0,c,u,d,e,0,a-c,l-u,h-d,0,0];this._loadMatrix(f,r)}night(t,e){t=t||.1;const s=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(s,e)}predator(t,e){const s=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(s,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}$u.prototype.grayscale=$u.prototype.greyscale;var ZE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,JE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class QE extends xe{constructor(t,e){const s=new Lt;t.renderable=!1,super(JE,ZE,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=s,e==null&&(e=20),this.scale=new At(e,e)}apply(t,e,s,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const r=this.maskSprite.worldTransform,o=Math.sqrt(r.a*r.a+r.b*r.b),a=Math.sqrt(r.c*r.c+r.d*r.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=r.a/o,this.uniforms.rotation[1]=r.b/o,this.uniforms.rotation[2]=r.c/a,this.uniforms.rotation[3]=r.d/a),t.applyFilter(this,e,s,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var tT=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,eT=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class iT extends xe{constructor(){super(eT,tT)}}var sT=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class nT extends xe{constructor(t=.5,e=Math.random()){super(uy,sT,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Yp={AlphaFilter:VE,BlurFilter:KE,BlurFilterPass:Yu,ColorMatrixFilter:$u,DisplacementFilter:QE,FXAAFilter:iT,NoiseFilter:nT};Object.entries(Yp).forEach(([i,t])=>{Object.defineProperty(Yp,i,{get(){return vt("7.1.0",`filters.${i} has moved to ${i}`),t}})});class rT{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(we.system.add(this.tickerUpdate,this,Bn.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(we.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Rs=new rT;class da{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=da.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new At,this.page=new At,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,s,n,r){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Kl extends da{constructor(){super(...arguments),this.client=new At,this.movement=new At,this.offset=new At,this.global=new At,this.screen=new At}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,s){return t.worldTransform.applyInverse(s||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,s,n,r,o,a,l,h,c,u,d,f,p,g){throw new Error("Method not implemented.")}}class _i extends Kl{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Rr extends Kl{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Rr.DOM_DELTA_PIXEL=0;Rr.DOM_DELTA_LINE=1;Rr.DOM_DELTA_PAGE=2;const oT=2048,aT=new At,Oc=new At;class lT{constructor(t){this.dispatch=new On,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((s,n)=>s.priority-n.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let s=0,n=e.length;s<n;s++)e[s].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Rs.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[n](this.rootTarget,this.rootTarget.eventMode,aT.set(t,e),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,e){if(!t.target)return;const s=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,r=s.length-1;n<r;n++)if(t.currentTarget=s[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=s.length-2;n>=0;n--)if(t.currentTarget=s[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,s=this._allInteractiveElements){if(s.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const n=Array.isArray(e)?e:[e];for(let r=s.length-1;r>=0;r--)n.forEach(o=>{t.currentTarget=s[r],this.notifyTarget(t,o)})}propagationPath(t){const e=[t];for(let s=0;s<oT&&t!==this.rootTarget;s++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,s,n,r,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Rs.pauseUpdate=!1),t.interactiveChildren&&t.children){const c=t.children;for(let u=c.length-1;u>=0;u--){const d=c[u],f=this.hitTestMoveRecursive(d,this._isInteractive(e)?e:d.eventMode,s,n,r,o||r(t,s));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=t.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(t),f.push(t)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(e),h=t.isInteractive();return h&&h&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!r(t,s)&&n(t,s)?h?[t]:[]:null}hitTestRecursive(t,e,s,n,r){if(this._interactivePrune(t)||r(t,s))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Rs.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let h=l.length-1;h>=0;h--){const c=l[h],u=this.hitTestRecursive(c,this._isInteractive(e)?e:c.eventMode,s,n,r);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const d=t.isInteractive();return(u.length>0||d)&&u.push(t),u}}}const o=this._isInteractive(e),a=t.isInteractive();return o&&n(t,s)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var s;if(t.hitArea&&(t.worldTransform.applyInverse(e,Oc),!t.hitArea.contains(Oc.x,Oc.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!((s=n.containsPoint)!=null&&s.call(n,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var r,o;e=e??t.type;const s=`on${e}`;(o=(r=t.currentTarget)[s])==null||o.call(r,t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof _i)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const n=e.button===2;this.dispatchEvent(e,n?"rightdown":"mousedown")}const s=this.trackingData(t.pointerId);s.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var l,h;if(!(t instanceof _i)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const s=e.pointerType==="mouse"||e.pointerType==="pen",n=this.trackingData(t.pointerId),r=this.findMountedTarget(n.overTargets);if(((l=n.overTargets)==null?void 0:l.length)>0&&r!==e.target){const c=t.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(t,c,r);if(this.dispatchEvent(u,"pointerout"),s&&this.dispatchEvent(u,"mouseout"),!e.composedPath().includes(r)){const d=this.createPointerEvent(t,"pointerleave",r);for(d.eventPhase=d.AT_TARGET;d.target&&!e.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),s&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(u)}if(r!==e.target){const c=t.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(e,c);this.dispatchEvent(u,"pointerover"),s&&this.dispatchEvent(u,"mouseover");let d=r==null?void 0:r.parent;for(;d&&d!==this.rootTarget.parent&&d!==e.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(e,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==r&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),s&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(u)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&o.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&o.push("globaltouchmove")),s&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(h=e.target)==null?void 0:h.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof _i)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.createPointerEvent(t),n=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),n&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(o=s.target)==null?void 0:o.cursor);const r=this.clonePointerEvent(s,"pointerenter");for(r.eventPhase=r.AT_TARGET;r.target&&r.target!==this.rootTarget.parent;)r.currentTarget=r.target,this.notifyTarget(r),n&&this.notifyTarget(r,"mouseenter"),r.target=r.target.parent;e.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(r)}mapPointerOut(t){if(!(t instanceof _i)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const s=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(e.overTargets),r=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(r),s&&this.dispatchEvent(r,"mouseout");const o=this.createPointerEvent(t,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(r),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof _i)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),s=this.createPointerEvent(t);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const a=s.button===2;this.dispatchEvent(s,a?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[t.button]);let o=r;if(r&&!s.composedPath().includes(r)){let a=r;for(;a&&!s.composedPath().includes(a);){if(s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const l=s.button===2;this.notifyTarget(s,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(s,"click");a.target=o,a.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});const l=n.clicksByButton[t.button];if(l.target===a.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=e,a.detail=l.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(s)}mapPointerUpOutside(t){if(!(t instanceof _i)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(s){let r=s;for(;r;)n.currentTarget=r,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),r=r.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof Rr)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let s=1;s<t.length&&t[s].parent===e;s++)e=t[s];return e}createPointerEvent(t,e,s){const n=this.allocateEvent(_i);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=s??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof e=="string"&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent(Rr);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const s=this.allocateEvent(_i);return s.nativeEvent=t.nativeEvent,s.originalEvent=t.originalEvent,this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.target=t.target,s.path=t.composedPath().slice(),s.type=e??s.type,s}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof _i&&e instanceof _i&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Kl&&e instanceof Kl&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const s=t.currentTarget._events[e];if(s&&t.currentTarget.isInteractive())if("fn"in s)s.once&&t.currentTarget.removeListener(e,s.fn,void 0,!0),s.fn.call(s.context,t);else for(let n=0,r=s.length;n<r&&!t.propagationImmediatelyStopped;n++)s[n].once&&t.currentTarget.removeListener(e,s[n].fn,void 0,!0),s[n].fn.call(s[n].context,t)}}const hT=1,cT={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Ku=class{constructor(i){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=i,this.rootBoundary=new lT(null),Rs.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new _i(null),this.rootWheelEvent=new Rr(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Ku.defaultEventFeatures},{set:(t,e,s)=>(e==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[e]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(i){const{view:t,resolution:e}=this.renderer;this.setTargetElement(t),this.resolution=e,Ku._defaultEventMode=i.eventMode??"auto",Object.assign(this.features,i.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(i){this.resolution=i}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(i){i=i||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===i)return;this.currentCursor=i;const e=this.cursorStyles[i];if(e)switch(typeof e){case"string":t&&(this.domElement.style.cursor=e);break;case"function":e(i);break;case"object":t&&Object.assign(this.domElement.style,e);break}else t&&typeof i=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,i)&&(this.domElement.style.cursor=i)}get pointer(){return this.rootPointerEvent}onPointerDown(i){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&i.pointerType==="touch"))return;const t=this.normalizeToPointerData(i);this.autoPreventDefault&&t[0].isNormalized&&(i.cancelable||!("cancelable"in i))&&i.preventDefault();for(let e=0,s=t.length;e<s;e++){const n=t[e],r=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(i){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&i.pointerType==="touch"))return;Rs.pointerMoved();const t=this.normalizeToPointerData(i);for(let e=0,s=t.length;e<s;e++){const n=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(i){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&i.pointerType==="touch"))return;let t=i.target;i.composedPath&&i.composedPath().length>0&&(t=i.composedPath()[0]);const e=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(i);for(let n=0,r=s.length;n<r;n++){const o=this.bootstrapEvent(this.rootPointerEvent,s[n]);o.type+=e,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(i){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&i.pointerType==="touch"))return;const t=this.normalizeToPointerData(i);for(let e=0,s=t.length;e<s;e++){const n=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(i){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(i);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(i){this.removeEvents(),this.domElement=i,Rs.domElement=i,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Rs.addTickerListener();const i=this.domElement.style;i&&(globalThis.navigator.msPointerEnabled?(i.msContentZooming="none",i.msTouchAction="none"):this.supportsPointerEvents&&(i.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Rs.removeTickerListener();const i=this.domElement.style;globalThis.navigator.msPointerEnabled?(i.msContentZooming="",i.msTouchAction=""):this.supportsPointerEvents&&(i.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(i,t,e){let s;this.domElement.parentElement?s=this.domElement.getBoundingClientRect():s={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const n=1/this.resolution;i.x=(t-s.left)*(this.domElement.width/s.width)*n,i.y=(e-s.top)*(this.domElement.height/s.height)*n}normalizeToPointerData(i){const t=[];if(this.supportsTouchEvents&&i instanceof TouchEvent)for(let e=0,s=i.changedTouches.length;e<s;e++){const n=i.changedTouches[e];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=i.touches.length===1&&i.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=i.type,t.push(n)}else if(!globalThis.MouseEvent||i instanceof MouseEvent&&(!this.supportsPointerEvents||!(i instanceof globalThis.PointerEvent))){const e=i;typeof e.isPrimary>"u"&&(e.isPrimary=!0),typeof e.width>"u"&&(e.width=1),typeof e.height>"u"&&(e.height=1),typeof e.tiltX>"u"&&(e.tiltX=0),typeof e.tiltY>"u"&&(e.tiltY=0),typeof e.pointerType>"u"&&(e.pointerType="mouse"),typeof e.pointerId>"u"&&(e.pointerId=hT),typeof e.pressure>"u"&&(e.pressure=.5),typeof e.twist>"u"&&(e.twist=0),typeof e.tangentialPressure>"u"&&(e.tangentialPressure=0),e.isNormalized=!0,t.push(e)}else t.push(i);return t}normalizeWheelEvent(i){const t=this.rootWheelEvent;return this.transferMouseData(t,i),t.deltaX=i.deltaX,t.deltaY=i.deltaY,t.deltaZ=i.deltaZ,t.deltaMode=i.deltaMode,this.mapPositionToPoint(t.screen,i.clientX,i.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=i,t.type=i.type,t}bootstrapEvent(i,t){return i.originalEvent=null,i.nativeEvent=t,i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist,this.transferMouseData(i,t),this.mapPositionToPoint(i.screen,t.clientX,t.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.isTrusted=t.isTrusted,i.type==="pointerleave"&&(i.type="pointerout"),i.type.startsWith("mouse")&&(i.type=i.type.replace("mouse","pointer")),i.type.startsWith("touch")&&(i.type=cT[i.type]||i.type),i}transferMouseData(i,t){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.x=t.clientX,i.client.y=t.clientY,i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.x=t.movementX,i.movement.y=t.movementY,i.page.x=t.pageX,i.page.y=t.pageY,i.relatedTarget=null,i.shiftKey=t.shiftKey}};let Yo=Ku;Yo.extension={name:"events",type:[et.RendererSystem,et.CanvasRendererSystem]};Yo.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};ft.add(Yo);function $p(i){return i==="dynamic"||i==="static"}const uT={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??$p(Yo.defaultEventMode)},set interactive(i){vt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=i,this.eventMode=i?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Yo.defaultEventMode},set eventMode(i){this._internalInteractive=$p(i),this._internalEventMode=i},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(i,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof t=="function"?void 0:t;i=s?`${i}capture`:i,t=typeof t=="function"?t:t.handleEvent,this.on(i,t,n)},removeEventListener(i,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof t=="function"?void 0:t;i=s?`${i}capture`:i,t=typeof t=="function"?t:t.handleEvent,this.off(i,t,n)},dispatchEvent(i){if(!(i instanceof da))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return i.defaultPrevented=!1,i.path=null,i.target=this,i.manager.dispatchEvent(i),!i.defaultPrevented}};Yt.mixin(uT);const dT={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Yt.mixin(dT);const fT=9,Na=100,pT=0,gT=0,Kp=2,qp=1,mT=-1e3,_T=-1e3,yT=2;class yy{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ys.tablet||ys.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${Na}px`,e.style.height=`${Na}px`,e.style.position="absolute",e.style.top=`${pT}px`,e.style.left=`${gT}px`,e.style.zIndex=Kp.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${qp}px`,t.style.height=`${qp}px`,t.style.position="absolute",t.style.top=`${mT}px`,t.style.left=`${_T}px`,t.style.zIndex=yT.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let s=0;s<e.length;s++)this.updateAccessibleObjects(e[s])}update(){const t=performance.now();if(ys.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:s,width:n,height:r}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,h=n/o*l,c=r/a*l;let u=this.div;u.style.left=`${e}px`,u.style.top=`${s}px`,u.style.width=`${o}px`,u.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,br(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{u=f._accessibleDiv;let p=f.hitArea;const g=f.worldTransform;f.hitArea?(u.style.left=`${(g.tx+p.x*g.a)*h}px`,u.style.top=`${(g.ty+p.y*g.d)*c}px`,u.style.width=`${p.width*g.a*h}px`,u.style.height=`${p.height*g.d*c}px`):(p=f.getBounds(),this.capHitArea(p),u.style.left=`${p.x*h}px`,u.style.top=`${p.y*c}px`,u.style.width=`${p.width*h}px`,u.style.height=`${p.height*c}px`,u.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(u.title=f.accessibleTitle),u.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&u.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==u.title||f.tabIndex!==u.tabIndex)&&(u.title=f.accessibleTitle,u.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:s}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>s&&(t.height=s-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${Na}px`,e.style.height=`${Na}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Kp.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:s}=t.target,n=this.renderer.events.rootBoundary,r=Object.assign(new da(n),{target:s});n.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>n.dispatchEvent(r,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===fT&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}yy.extension={name:"accessibility",type:[et.RendererPlugin,et.CanvasRendererPlugin]};ft.add(yy);const qu=class{constructor(i){this.stage=new li,i=Object.assign({forceCanvas:!1},i),this.renderer=PE(i),qu._plugins.forEach(t=>{t.init.call(this,i)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(i,t){const e=qu._plugins.slice(0);e.reverse(),e.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(i),this.renderer=null}};let Jd=qu;Jd._plugins=[];ft.handleByList(et.Application,Jd._plugins);class by{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,s;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:r}=this._resizeTo;e=n,s=r}this.renderer.resize(e,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}by.extension=et.Application;ft.add(by);const Zp={loader:et.LoadParser,resolver:et.ResolveParser,cache:et.CacheParser,detection:et.DetectionParser};ft.handle(et.Asset,i=>{const t=i.ref;Object.entries(Zp).filter(([e])=>!!t[e]).forEach(([e,s])=>ft.add(Object.assign(t[e],{extension:t[e].extension??s})))},i=>{const t=i.ref;Object.keys(Zp).filter(e=>!!t[e]).forEach(e=>ft.remove(t[e]))});class bT{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<e;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function fa(i,t){if(Array.isArray(t)){for(const e of t)if(i.startsWith(`data:${e}`))return!0;return!1}return i.startsWith(`data:${t}`)}function Vn(i,t){const e=i.split("?")[0],s=Te.extname(e).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const ws=(i,t)=>(Array.isArray(i)||(i=[i]),t?i.map(e=>typeof e=="string"?t(e):e):i),Zu=(i,t)=>{const e=t.split("?")[1];return e&&(i+=`?${e}`),i};function xy(i,t,e,s,n){const r=t[e];for(let o=0;o<r.length;o++){const a=r[o];e<t.length-1?xy(i.replace(s[e],a),t,e+1,s,n):n.push(i.replace(s[e],a))}}function xT(i){const t=/\{(.*?)\}/g,e=i.match(t),s=[];if(e){const n=[];e.forEach(r=>{const o=r.substring(1,r.length-1).split(",");n.push(o)}),xy(i,n,0,e,s)}else s.push(i);return s}const ql=i=>!Array.isArray(i);class vT{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const s=ws(t);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(e)){n=l.getCacheableAssets(s,e);break}}n||(n={},s.forEach(a=>{n[a]=e}));const r=Object.keys(n),o={cacheKeys:r,keys:s};if(s.forEach(a=>{this._cacheMap.set(a,o)}),r.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==e&&console.warn("[Cache] already has key:",a),this._cache.set(a,n[a])}),e instanceof dt){const a=e;s.forEach(l=>{a.baseTexture!==dt.EMPTY.baseTexture&&_t.addToCache(a.baseTexture,l),dt.addToCache(a,l)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(n=>{this._cache.delete(n)}),e.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const so=new vT;class wT{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,s)=>(this._parsersValidated=!1,t[e]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const s={promise:null,parser:null};return s.promise=(async()=>{var o,a;let n=null,r=null;if(e.loadParser&&(r=this._parserHash[e.loadParser],r||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!r){for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.load&&((o=h.test)!=null&&o.call(h,t,e,this))){r=h;break}}if(!r)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await r.load(t,e,this),s.parser=r;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];h.parse&&h.parse&&await((a=h.testParse)==null?void 0:a.call(h,n,e,this))&&(n=await h.parse(n,e,this)||n,s.parser=h)}return n})(),s}async load(t,e){this._parsersValidated||this._validateParsers();let s=0;const n={},r=ql(t),o=ws(t,h=>({src:h})),a=o.length,l=o.map(async h=>{const c=Te.toAbsolute(h.src);if(!n[h.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,h)),n[h.src]=await this.promiseCache[c].promise,e&&e(++s/a)}catch(u){throw delete this.promiseCache[c],delete n[h.src],new Error(`[Loader.load] Failed to load ${c}.
${u}`)}});return await Promise.all(l),r?n[o[0].src]:n}async unload(t){const s=ws(t,n=>({src:n})).map(async n=>{var a,l;const r=Te.toAbsolute(n.src),o=this.promiseCache[r];if(o){const h=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,h,n,this),delete this.promiseCache[r]}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var is=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(is||{});const ST=".json",ET="application/json",TT={extension:{type:et.LoadParser,priority:is.Low},name:"loadJson",test(i){return fa(i,ET)||Vn(i,ST)},async load(i){return await(await Q.ADAPTER.fetch(i)).json()}};ft.add(TT);const AT=".txt",CT="text/plain",MT={name:"loadTxt",extension:{type:et.LoadParser,priority:is.Low},test(i){return fa(i,CT)||Vn(i,AT)},async load(i){return await(await Q.ADAPTER.fetch(i)).text()}};ft.add(MT);const IT=["normal","bold","100","200","300","400","500","600","700","800","900"],PT=[".ttf",".otf",".woff",".woff2"],RT=["font/ttf","font/otf","font/woff","font/woff2"],DT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function OT(i){const t=Te.extname(i),n=Te.basename(i,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let r=n.length>0;for(const a of n)if(!a.match(DT)){r=!1;break}let o=n.join(" ");return r||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const kT={extension:{type:et.LoadParser,priority:is.Low},name:"loadWebFont",test(i){return fa(i,RT)||Vn(i,PT)},async load(i,t){var s,n,r;const e=Q.ADAPTER.getFontFaceSet();if(e){const o=[],a=((s=t.data)==null?void 0:s.family)??OT(i),l=((r=(n=t.data)==null?void 0:n.weights)==null?void 0:r.filter(c=>IT.includes(c)))??["normal"],h=t.data??{};for(let c=0;c<l.length;c++){const u=l[c],d=new FontFace(a,`url(${encodeURI(i)})`,{...h,weight:u});await d.load(),e.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){(Array.isArray(i)?i:[i]).forEach(t=>Q.ADAPTER.getFontFaceSet().delete(t))}};ft.add(kT);let Jp=0,kc;const FT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",BT={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${FT}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},LT={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Fc;class NT{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const e=URL.createObjectURL(new Blob([BT.code],{type:"application/javascript"})),s=new Worker(e);s.addEventListener("message",n=>{s.terminate(),URL.revokeObjectURL(e),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){kc===void 0&&(kc=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<kc&&(Fc||(Fc=URL.createObjectURL(new Blob([LT.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Fc),t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const s=new Promise((n,r)=>{this.queue.push({id:t,arguments:e,resolve:n,reject:r})});return this.next(),s}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),s=e.id;this.resolveHash[Jp]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Jp++,id:s})}}const Qp=new NT;function Lh(i,t,e){const s=new dt(i);return s.baseTexture.on("dispose",()=>{delete t.promiseCache[e]}),s}const UT=[".jpeg",".jpg",".png",".webp",".avif"],GT=["image/jpeg","image/png","image/webp","image/avif"];async function HT(i){const t=await Q.ADAPTER.fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const Nh={name:"loadTextures",extension:{type:et.LoadParser,priority:is.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return fa(i,GT)||Vn(i,UT)},async load(i,t,e){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Qp.isImageBitmapSupported()?s=await Qp.loadImageBitmap(i):s=await HT(i):s=await new Promise(r=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=i,s.complete?r(s):s.onload=()=>{r(s)}});const n=new _t(s,{resolution:$s(i),...t.data});return n.resource.src=i,Lh(n,e,i)},unload(i){i.destroy(!0)}};ft.add(Nh);const zT=".svg",VT="image/svg+xml",WT={extension:{type:et.LoadParser,priority:is.High},name:"loadSVG",test(i){return fa(i,VT)||Vn(i,zT)},async testParse(i){return Xo.test(i)},async parse(i,t,e){var o;const s=new Xo(i,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);await s.load();const n=new _t(s,{resolution:$s(i),...t==null?void 0:t.data});return n.resource.src=i,Lh(n,e,i)},async load(i,t){return(await Q.ADAPTER.fetch(i)).text()},unload:Nh.unload};ft.add(WT);class jT{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const s=[];Array.isArray(e)?e.forEach(n=>{if(typeof n.name=="string"){const r=this._createBundleAssetId(t,n.name);s.push(r),this.add([n.name,r],n.srcs,n.data)}else{const r=n.name.map(o=>this._createBundleAssetId(t,o));r.forEach(o=>{s.push(o)}),this.add([...n.name,...r],n.srcs)}}):Object.keys(e).forEach(n=>{s.push(this._createBundleAssetId(t,n)),this.add([n,this._createBundleAssetId(t,n)],e[n])}),this._bundles[t]=s}add(t,e,s){const n=ws(t);n.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(e)||(typeof e=="string"?e=xT(e):e=[e]);const r=e.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let h=0;h<this._parsers.length;h++){const c=this._parsers[h];if(c.test(o)){a=c.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=n),(this._basePath||this._rootPath)&&(a.src=Te.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??s,a});n.forEach(o=>{this._assetMap[o]=r})}resolveBundle(t){const e=ql(t);t=ws(t);const s={};return t.forEach(n=>{const r=this._bundles[n];if(r){const o=this.resolve(r),a={};for(const l in o){const h=o[l];a[this._extractAssetIdFromBundle(n,l)]=h}s[n]=a}}),e?s[t[0]]:s}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const s={};for(const n in e)s[n]=e[n].src;return s}return e.src}resolve(t){const e=ql(t);t=ws(t);const s={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let r=this._assetMap[n];const o=this._getPreferredOrder(r),a=r[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(h=>{const c=r.filter(u=>u[l]?u[l]===h:!1);c.length&&(r=c)})}),this._resolverHash[n]=r[0]??a}else{let r=n;(this._basePath||this._rootPath)&&(r=Te.toAbsolute(r,this._basePath,this._rootPath)),r=this._appendDefaultSearchParams(r),this._resolverHash[n]={src:r}}s[n]=this._resolverHash[n]}),e?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const s=t[0],n=this._preferredOrder.find(r=>r.params.format.includes(s.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}}class XT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new jT,this.loader=new wT,this.cache=so,this._backgroundLoader=new bT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var r,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const e=((r=t.texturePreference)==null?void 0:r.resolution)??1,s=typeof e=="number"?[e]:e;let n=[];if((o=t.texturePreference)!=null&&o.format){const l=(a=t.texturePreference)==null?void 0:a.format;n=typeof l=="string"?[l]:l;for(const h of this._detections)await h.test()||(n=await h.remove(n))}else for(const l of this._detections)await l.test()&&(n=await l.add(n));this.resolver.prefer({params:{format:n,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,s){this.resolver.add(t,e,s)}async load(t,e){this._initialized||await this.init();const s=ql(t),n=ws(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),r=this.resolver.resolve(n),o=await this._mapLoadToResolve(r,e);return s?o[n[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const n=this.resolver.resolveBundle(t),r={},o=Object.keys(n);let a=0,l=0;const h=()=>{e==null||e(++a/l)},c=o.map(u=>{const d=n[u];return l+=Object.keys(d).length,this._mapLoadToResolve(d,h).then(f=>{r[u]=f})});return await Promise.all(c),s?r[t[0]]:r}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return so.get(t);const e={};for(let s=0;s<t.length;s++)e[s]=so.get(t[s]);return e}async _mapLoadToResolve(t,e){const s=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const r=await this.loader.load(s,e);this._backgroundLoader.active=!0;const o={};return s.forEach((a,l)=>{const h=r[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[n[l]]=h,so.set(c,h)}),o}async unload(t){this._initialized||await this.init();const e=ws(t).map(n=>typeof n!="string"?n.src:n),s=this.resolver.resolve(e);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=ws(t);const e=this.resolver.resolveBundle(t),s=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(s)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(s=>{so.remove(s.src)}),await this.loader.unload(e)}get detections(){return this._detections}get preferWorkers(){return Nh.config.preferWorkers}set preferWorkers(t){vt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(s=>s in t).forEach(s=>{e.config[s]=t[s]})})}}const Ua=new XT;ft.handleByList(et.LoadParser,Ua.loader.parsers).handleByList(et.ResolveParser,Ua.resolver.parsers).handleByList(et.CacheParser,Ua.cache.parsers).handleByList(et.DetectionParser,Ua.detections);const YT={extension:et.CacheParser,test:i=>Array.isArray(i)&&i.every(t=>t instanceof dt),getCacheableAssets:(i,t)=>{const e={};return i.forEach(s=>{t.forEach((n,r)=>{e[s+(r===0?"":r+1)]=n})}),e}};ft.add(YT);const $T={extension:{type:et.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const i="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await Q.ADAPTER.fetch(i).then(e=>e.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async i=>[...i,"avif"],remove:async i=>i.filter(t=>t!=="avif")};ft.add($T);const KT={extension:{type:et.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const i="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await Q.ADAPTER.fetch(i).then(e=>e.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async i=>[...i,"webp"],remove:async i=>i.filter(t=>t!=="webp")};ft.add(KT);const tg=["png","jpg","jpeg"],qT={extension:{type:et.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...tg],remove:async i=>i.filter(t=>!tg.includes(t))};ft.add(qT);const ZT={extension:et.ResolveParser,test:Nh.test,parse:i=>{var t;return{resolution:parseFloat(((t=Q.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:i.split(".").pop(),src:i}}};ft.add(ZT);var je=(i=>(i[i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",i[i.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",i[i.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",i[i.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",i[i.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",i[i.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",i[i.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",i[i.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",i[i.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",i))(je||{});const Zl={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let us,or;function eg(){or={s3tc:us.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:us.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:us.getExtension("WEBGL_compressed_texture_etc"),etc1:us.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:us.getExtension("WEBGL_compressed_texture_pvrtc")||us.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:us.getExtension("WEBGL_compressed_texture_atc"),astc:us.getExtension("WEBGL_compressed_texture_astc")}}const JT={extension:{type:et.DetectionParser,priority:2},test:async()=>{const t=Q.ADAPTER.createCanvas().getContext("webgl");return t?(us=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async i=>{or||eg();const t=[];for(const e in or)or[e]&&t.push(e);return[...t,...i]},remove:async i=>(or||eg(),i.filter(t=>!(t in or)))};ft.add(JT);class QT extends ua{constructor(t,e={width:1,height:1,autoLoad:!0}){let s,n;typeof t=="string"?(s=t,n=new Uint8Array):(s=null,n=t),super(n,e),this.origin=s,this.buffer=n?new Lu(n):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new Lu(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class An extends QT{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=An._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||An._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,s){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:h,levelHeight:c,levelBuffer:u}=this._levelBuffers[o];n.compressedTexImage2D(n.TEXTURE_2D,l,this.format,h,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=An._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,s,n,r,o,a){const l=new Array(s);let h=t.byteOffset,c=o,u=a,d=c+n-1&~(n-1),f=u+r-1&~(r-1),p=d*f*Zl[e];for(let g=0;g<s;g++)l[g]={levelID:g,levelWidth:s>1?c:d,levelHeight:s>1?u:f,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,c=c>>1||1,u=u>>1||1,d=c+n-1&~(n-1),f=u+r-1&~(r-1),p=d*f*Zl[e];return l}}const Bc=4,Ga=124,tA=32,ig=20,eA=542327876,Ha={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},iA={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},za={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},sA=1,nA=2,rA=4,oA=64,aA=512,lA=131072,hA=827611204,cA=861165636,uA=894720068,dA=808540228,fA=4,pA={[hA]:je.COMPRESSED_RGBA_S3TC_DXT1_EXT,[cA]:je.COMPRESSED_RGBA_S3TC_DXT3_EXT,[uA]:je.COMPRESSED_RGBA_S3TC_DXT5_EXT},gA={[70]:je.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:je.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:je.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:je.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:je.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:je.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:je.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:je.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:je.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function mA(i){const t=new Uint32Array(i);if(t[0]!==eA)throw new Error("Invalid DDS file magic word");const s=new Uint32Array(i,0,Ga/Uint32Array.BYTES_PER_ELEMENT),n=s[Ha.HEIGHT],r=s[Ha.WIDTH],o=s[Ha.MIPMAP_COUNT],a=new Uint32Array(i,Ha.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,tA/Uint32Array.BYTES_PER_ELEMENT),l=a[sA];if(l&rA){const h=a[iA.FOURCC];if(h!==dA){const b=pA[h],v=Bc+Ga,x=new Uint8Array(i,v);return[new An(x,{format:b,width:r,height:n,levels:o})]}const c=Bc+Ga,u=new Uint32Array(t.buffer,c,ig/Uint32Array.BYTES_PER_ELEMENT),d=u[za.DXGI_FORMAT],f=u[za.RESOURCE_DIMENSION],p=u[za.MISC_FLAG],g=u[za.ARRAY_SIZE],m=gA[d];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(p===fA)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const _=new Array,y=Bc+Ga+ig;if(g===1)_.push(new Uint8Array(i,y));else{const b=Zl[m];let v=0,x=r,E=n;for(let A=0;A<o;A++){const M=Math.max(1,x+3&-4),I=Math.max(1,E+3&-4),C=M*I*b;v+=C,x=x>>>1,E=E>>>1}let S=y;for(let A=0;A<g;A++)_.push(new Uint8Array(i,S,v)),S+=v}return _.map(b=>new An(b,{format:m,width:r,height:n,levels:o}))}throw l&oA?new Error("DDSParser does not support uncompressed texture data."):l&aA?new Error("DDSParser does not supported YUV uncompressed texture data."):l&lA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&nA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const sg=[171,75,84,88,32,49,49,187,13,10,26,10],_A=67305985,gi={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Ju=64,ng={[gt.UNSIGNED_BYTE]:1,[gt.UNSIGNED_SHORT]:2,[gt.INT]:4,[gt.UNSIGNED_INT]:4,[gt.FLOAT]:4,[gt.HALF_FLOAT]:8},yA={[K.RGBA]:4,[K.RGB]:3,[K.RG]:2,[K.RED]:1,[K.LUMINANCE]:1,[K.LUMINANCE_ALPHA]:2,[K.ALPHA]:1},bA={[gt.UNSIGNED_SHORT_4_4_4_4]:2,[gt.UNSIGNED_SHORT_5_5_5_1]:2,[gt.UNSIGNED_SHORT_5_6_5]:2};function xA(i,t,e=!1){const s=new DataView(t);if(!vA(i,s))return null;const n=s.getUint32(gi.ENDIANNESS,!0)===_A,r=s.getUint32(gi.GL_TYPE,n),o=s.getUint32(gi.GL_FORMAT,n),a=s.getUint32(gi.GL_INTERNAL_FORMAT,n),l=s.getUint32(gi.PIXEL_WIDTH,n),h=s.getUint32(gi.PIXEL_HEIGHT,n)||1,c=s.getUint32(gi.PIXEL_DEPTH,n)||1,u=s.getUint32(gi.NUMBER_OF_ARRAY_ELEMENTS,n)||1,d=s.getUint32(gi.NUMBER_OF_FACES,n),f=s.getUint32(gi.NUMBER_OF_MIPMAP_LEVELS,n),p=s.getUint32(gi.BYTES_OF_KEY_VALUE_DATA,n);if(h===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");const g=4,m=4,_=l+3&-4,y=h+3&-4,b=new Array(u);let v=l*h;r===0&&(v=_*y);let x;if(r!==0?ng[r]?x=ng[r]*yA[o]:x=bA[r]:x=Zl[a],x===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const E=e?SA(s,p,n):null;let A=v*x,M=l,I=h,C=_,F=y,R=Ju+p;for(let w=0;w<f;w++){const T=s.getUint32(R,n);let B=R+4;for(let P=0;P<u;P++){let L=b[P];L||(L=b[P]=new Array(f)),L[w]={levelID:w,levelWidth:f>1||r!==0?M:C,levelHeight:f>1||r!==0?I:F,levelBuffer:new Uint8Array(t,B,A)},B+=A}R+=T+4,R=R%4!==0?R+4-R%4:R,M=M>>1||1,I=I>>1||1,C=M+g-1&~(g-1),F=I+m-1&~(m-1),A=C*F*x}return r!==0?{uncompressed:b.map(w=>{let T=w[0].levelBuffer,B=!1;return r===gt.FLOAT?T=new Float32Array(w[0].levelBuffer.buffer,w[0].levelBuffer.byteOffset,w[0].levelBuffer.byteLength/4):r===gt.UNSIGNED_INT?(B=!0,T=new Uint32Array(w[0].levelBuffer.buffer,w[0].levelBuffer.byteOffset,w[0].levelBuffer.byteLength/4)):r===gt.INT&&(B=!0,T=new Int32Array(w[0].levelBuffer.buffer,w[0].levelBuffer.byteOffset,w[0].levelBuffer.byteLength/4)),{resource:new ua(T,{width:w[0].levelWidth,height:w[0].levelHeight}),type:r,format:B?wA(o):o}}),kvData:E}:{compressed:b.map(w=>new An(null,{format:a,width:l,height:h,levels:f,levelBuffers:w})),kvData:E}}function vA(i,t){for(let e=0;e<sg.length;e++)if(t.getUint8(e)!==sg[e])return console.error(`${i} is not a valid *.ktx file!`),!1;return!0}function wA(i){switch(i){case K.RGBA:return K.RGBA_INTEGER;case K.RGB:return K.RGB_INTEGER;case K.RG:return K.RG_INTEGER;case K.RED:return K.RED_INTEGER;default:return i}}function SA(i,t,e){const s=new Map;let n=0;for(;n<t;){const r=i.getUint32(Ju+n,e),o=Ju+n+4,a=3-(r+3)%4;if(r===0||r>t-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<r&&i.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(i.buffer,o,l)),c=new DataView(i.buffer,o+l+1,r-l-1);s.set(h,c),n+=4+r+a}return s}const EA={extension:{type:et.LoadParser,priority:is.High},name:"loadDDS",test(i){return Vn(i,".dds")},async load(i,t,e){const n=await(await Q.ADAPTER.fetch(i)).arrayBuffer(),o=mA(n).map(a=>{const l=new _t(a,{mipmap:Qi.OFF,alphaMode:Oi.NO_PREMULTIPLIED_ALPHA,resolution:$s(i),...t.data});return Lh(l,e,i)});return o.length===1?o[0]:o},unload(i){Array.isArray(i)?i.forEach(t=>t.destroy(!0)):i.destroy(!0)}};ft.add(EA);const TA={extension:{type:et.LoadParser,priority:is.High},name:"loadKTX",test(i){return Vn(i,".ktx")},async load(i,t,e){const n=await(await Q.ADAPTER.fetch(i)).arrayBuffer(),{compressed:r,uncompressed:o,kvData:a}=xA(i,n),l=r??o,h={mipmap:Qi.OFF,alphaMode:Oi.NO_PREMULTIPLIED_ALPHA,resolution:$s(i),...t.data},c=l.map(u=>{l===o&&Object.assign(h,{type:u.type,format:u.format});const d=new _t(u,h);return d.ktxKeyValueData=a,Lh(d,e,i)});return c.length===1?c[0]:c},unload(i){Array.isArray(i)?i.forEach(t=>t.destroy(!0)):i.destroy(!0)}};ft.add(TA);const AA={extension:et.ResolveParser,test:i=>{const e=i.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(e)},parse:i=>{var s,n;if(i.split("?")[0].split(".").pop()==="ktx"){const r=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(r.some(o=>i.endsWith(o)))return{resolution:parseFloat(((s=Q.RETINA_PREFIX.exec(i))==null?void 0:s[1])??"1"),format:r.find(o=>i.endsWith(o)),src:i}}return{resolution:parseFloat(((n=Q.RETINA_PREFIX.exec(i))==null?void 0:n[1])??"1"),format:i.split(".").pop(),src:i}}};ft.add(AA);const CA=new bt,MA=4,fo=class{constructor(i){this.renderer=i}async image(i,t,e){const s=new Image;return s.src=await this.base64(i,t,e),s}async base64(i,t,e){const s=this.canvas(i);if(s.toBlob!==void 0)return new Promise((n,r)=>{s.toBlob(o=>{if(!o){r(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>n(a.result),a.onerror=r,a.readAsDataURL(o)},t,e)});if(s.toDataURL!==void 0)return s.toDataURL(t,e);if(s.convertToBlob!==void 0){const n=await s.convertToBlob({type:t,quality:e});return new Promise((r,o)=>{const a=new FileReader;a.onload=()=>r(a.result),a.onerror=o,a.readAsDataURL(n)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(i,t){const{pixels:e,width:s,height:n,flipY:r}=this._rawPixels(i,t);r&&fo._flipY(e,s,n),fo._unpremultiplyAlpha(e);const o=new xS(s,n,1),a=new ImageData(new Uint8ClampedArray(e.buffer),s,n);return o.context.putImageData(a,0,0),o.canvas}pixels(i,t){const{pixels:e,width:s,height:n,flipY:r}=this._rawPixels(i,t);return r&&fo._flipY(e,s,n),fo._unpremultiplyAlpha(e),e}_rawPixels(i,t){const e=this.renderer;if(!e)throw new Error("The Extract has already been destroyed");let s,n=!1,r,o=!1;if(i&&(i instanceof zn?r=i:(r=e.generateTexture(i,{resolution:e.resolution,multisample:e.multisample}),o=!0)),r){if(s=r.baseTexture.resolution,t=t??r.frame,n=!1,!o){e.renderTexture.bind(r);const u=r.framebuffer.glFramebuffers[e.CONTEXT_UID];u.blitFramebuffer&&e.framebuffer.bind(u.blitFramebuffer)}}else s=e.resolution,t||(t=CA,t.width=e.width/s,t.height=e.height/s),n=!0,e.renderTexture.bind();const a=Math.round(t.width*s),l=Math.round(t.height*s),h=new Uint8Array(MA*a*l),c=e.gl;return c.readPixels(Math.round(t.x*s),Math.round(t.y*s),a,l,c.RGBA,c.UNSIGNED_BYTE,h),o&&(r==null||r.destroy(!0)),{pixels:h,width:a,height:l,flipY:n}}destroy(){this.renderer=null}static _flipY(i,t,e){const s=t<<2,n=e>>1,r=new Uint8Array(s);for(let o=0;o<n;o++){const a=o*s,l=(e-o-1)*s;r.set(i.subarray(a,a+s)),i.copyWithin(a,l,l+s),i.set(r,l)}}static _unpremultiplyAlpha(i){i instanceof Uint8ClampedArray&&(i=new Uint8Array(i.buffer));const t=i.length;for(let e=0;e<t;e+=4){const s=i[e+3];if(s!==0){const n=255.001/s;i[e]=i[e]*n+.5,i[e+1]=i[e+1]*n+.5,i[e+2]=i[e+2]*n+.5}}}};let vy=fo;vy.extension={name:"extract",type:et.RendererSystem};ft.add(vy);const Jl={build(i){const t=i.points;let e,s,n,r,o,a;if(i.type===be.CIRC){const p=i.shape;e=p.x,s=p.y,o=a=p.radius,n=r=0}else if(i.type===be.ELIP){const p=i.shape;e=p.x,s=p.y,o=p.width,a=p.height,n=r=0}else{const p=i.shape,g=p.width/2,m=p.height/2;e=p.x+g,s=p.y+m,o=a=Math.max(0,Math.min(p.radius,Math.min(g,m))),n=g-o,r=m-a}if(!(o>=0&&a>=0&&n>=0&&r>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),h=l*8+(n?4:0)+(r?4:0);if(t.length=h,h===0)return;if(l===0){t.length=8,t[0]=t[6]=e+n,t[1]=t[3]=s+r,t[2]=t[4]=e-n,t[5]=t[7]=s-r;return}let c=0,u=l*4+(n?2:0)+2,d=u,f=h;{const p=n+o,g=r,m=e+p,_=e-p,y=s+g;if(t[c++]=m,t[c++]=y,t[--u]=y,t[--u]=_,r){const b=s-g;t[d++]=_,t[d++]=b,t[--f]=b,t[--f]=m}}for(let p=1;p<l;p++){const g=Math.PI/2*(p/l),m=n+Math.cos(g)*o,_=r+Math.sin(g)*a,y=e+m,b=e-m,v=s+_,x=s-_;t[c++]=y,t[c++]=v,t[--u]=v,t[--u]=b,t[d++]=b,t[d++]=x,t[--f]=x,t[--f]=y}{const p=n,g=r+a,m=e+p,_=e-p,y=s+g,b=s-g;t[c++]=m,t[c++]=y,t[--f]=b,t[--f]=m,n&&(t[c++]=_,t[c++]=y,t[--f]=b,t[--f]=_)}},triangulate(i,t){const e=i.points,s=t.points,n=t.indices;if(e.length===0)return;let r=s.length/2;const o=r;let a,l;if(i.type!==be.RREC){const c=i.shape;a=c.x,l=c.y}else{const c=i.shape;a=c.x+c.width/2,l=c.y+c.height/2}const h=i.matrix;s.push(i.matrix?h.a*a+h.c*l+h.tx:a,i.matrix?h.b*a+h.d*l+h.ty:l),r++,s.push(e[0],e[1]);for(let c=2;c<e.length;c+=2)s.push(e[c],e[c+1]),n.push(r++,o,r);n.push(o+1,o,r)}};function rg(i,t=!1){const e=i.length;if(e<6)return;let s=0;for(let n=0,r=i[e-2],o=i[e-1];n<e;n+=2){const a=i[n],l=i[n+1];s+=(a-r)*(l+o),r=a,o=l}if(!t&&s>0||t&&s<=0){const n=e/2;for(let r=n+n%2;r<e;r+=2){const o=e-r-2,a=e-r-1,l=r,h=r+1;[i[o],i[l]]=[i[l],i[o]],[i[a],i[h]]=[i[h],i[a]]}}}const wy={build(i){i.points=i.shape.points.slice()},triangulate(i,t){let e=i.points;const s=i.holes,n=t.points,r=t.indices;if(e.length>=6){rg(e,!1);const o=[];for(let h=0;h<s.length;h++){const c=s[h];rg(c.points,!0),o.push(e.length/2),e=e.concat(c.points)}const a=Vl(e,o,2);if(!a)return;const l=n.length/2;for(let h=0;h<a.length;h+=3)r.push(a[h]+l),r.push(a[h+1]+l),r.push(a[h+2]+l);for(let h=0;h<e.length;h++)n.push(e[h])}}},IA={build(i){const t=i.shape,e=t.x,s=t.y,n=t.width,r=t.height,o=i.points;o.length=0,n>=0&&r>=0&&o.push(e,s,e+n,s,e+n,s+r,e,s+r)},triangulate(i,t){const e=i.points,s=t.points;if(e.length===0)return;const n=s.length/2;s.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},PA={build(i){Jl.build(i)},triangulate(i,t){Jl.triangulate(i,t)}};var bi=(i=>(i.MITER="miter",i.BEVEL="bevel",i.ROUND="round",i))(bi||{}),Sn=(i=>(i.BUTT="butt",i.ROUND="round",i.SQUARE="square",i))(Sn||{});const Dr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(i,t=20){if(!this.adaptive||!i||isNaN(i))return t;let e=Math.ceil(i/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class og{static curveTo(t,e,s,n,r,o){const a=o[o.length-2],h=o[o.length-1]-e,c=a-t,u=n-e,d=s-t,f=Math.abs(h*d-c*u);if(f<1e-8||r===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const p=h*h+c*c,g=u*u+d*d,m=h*u+c*d,_=r*Math.sqrt(p)/f,y=r*Math.sqrt(g)/f,b=_*m/p,v=y*m/g,x=_*d+y*c,E=_*u+y*h,S=c*(y+b),A=h*(y+b),M=d*(_+v),I=u*(_+v),C=Math.atan2(A-E,S-x),F=Math.atan2(I-E,M-x);return{cx:x+t,cy:E+e,radius:r,startAngle:C,endAngle:F,anticlockwise:c*u>d*h}}static arc(t,e,s,n,r,o,a,l,h){const c=a-o,u=Dr._segmentsCount(Math.abs(c)*r,Math.ceil(Math.abs(c)/Yl)*40),d=c/(u*2),f=d*2,p=Math.cos(d),g=Math.sin(d),m=u-1,_=m%1/m;for(let y=0;y<=m;++y){const b=y+_*y,v=d+o+f*b,x=Math.cos(v),E=-Math.sin(v);h.push((p*x+g*E)*r+s,(p*-E+g*x)*r+n)}}}class RA{constructor(){this.reset()}begin(t,e,s){this.reset(),this.style=t,this.start=e,this.attribStart=s}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Qd{static curveLength(t,e,s,n,r,o,a,l){let c=0,u=0,d=0,f=0,p=0,g=0,m=0,_=0,y=0,b=0,v=0,x=t,E=e;for(let S=1;S<=10;++S)u=S/10,d=u*u,f=d*u,p=1-u,g=p*p,m=g*p,_=m*t+3*g*u*s+3*p*d*r+f*a,y=m*e+3*g*u*n+3*p*d*o+f*l,b=x-_,v=E-y,x=_,E=y,c+=Math.sqrt(b*b+v*v);return c}static curveTo(t,e,s,n,r,o,a){const l=a[a.length-2],h=a[a.length-1];a.length-=2;const c=Dr._segmentsCount(Qd.curveLength(l,h,t,e,s,n,r,o));let u=0,d=0,f=0,p=0,g=0;a.push(l,h);for(let m=1,_=0;m<=c;++m)_=m/c,u=1-_,d=u*u,f=d*u,p=_*_,g=p*_,a.push(f*l+3*d*_*t+3*u*p*s+g*r,f*h+3*d*_*e+3*u*p*n+g*o)}}function ag(i,t,e,s,n,r,o,a){const l=i-e*n,h=t-s*n,c=i+e*r,u=t+s*r;let d,f;o?(d=s,f=-e):(d=-s,f=e);const p=l+d,g=h+f,m=c+d,_=u+f;return a.push(p,g,m,_),2}function ln(i,t,e,s,n,r,o,a){const l=e-i,h=s-t;let c=Math.atan2(l,h),u=Math.atan2(n-i,r-t);a&&c<u?c+=Math.PI*2:!a&&c>u&&(u+=Math.PI*2);let d=c;const f=u-c,p=Math.abs(f),g=Math.sqrt(l*l+h*h),m=(15*p*Math.sqrt(g)/Math.PI>>0)+1,_=f/m;if(d+=_,a){o.push(i,t,e,s);for(let y=1,b=d;y<m;y++,b+=_)o.push(i,t,i+Math.sin(b)*g,t+Math.cos(b)*g);o.push(i,t,n,r)}else{o.push(e,s,i,t);for(let y=1,b=d;y<m;y++,b+=_)o.push(i+Math.sin(b)*g,t+Math.cos(b)*g,i,t);o.push(n,r,i,t)}return m*2}function DA(i,t){const e=i.shape;let s=i.points||e.points.slice();const n=t.closePointEps;if(s.length===0)return;const r=i.lineStyle,o=new At(s[0],s[1]),a=new At(s[s.length-2],s[s.length-1]),l=e.type!==be.POLY||e.closeStroke,h=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){s=s.slice(),h&&(s.pop(),s.pop(),a.set(s[s.length-2],s[s.length-1]));const P=(o.x+a.x)*.5,L=(a.y+o.y)*.5;s.unshift(P,L),s.push(P,L)}const c=t.points,u=s.length/2;let d=s.length;const f=c.length/2,p=r.width/2,g=p*p,m=r.miterLimit*r.miterLimit;let _=s[0],y=s[1],b=s[2],v=s[3],x=0,E=0,S=-(y-v),A=_-b,M=0,I=0,C=Math.sqrt(S*S+A*A);S/=C,A/=C,S*=p,A*=p;const F=r.alignment,R=(1-F)*2,w=F*2;l||(r.cap===Sn.ROUND?d+=ln(_-S*(R-w)*.5,y-A*(R-w)*.5,_-S*R,y-A*R,_+S*w,y+A*w,c,!0)+2:r.cap===Sn.SQUARE&&(d+=ag(_,y,S,A,R,w,!0,c))),c.push(_-S*R,y-A*R,_+S*w,y+A*w);for(let P=1;P<u-1;++P){_=s[(P-1)*2],y=s[(P-1)*2+1],b=s[P*2],v=s[P*2+1],x=s[(P+1)*2],E=s[(P+1)*2+1],S=-(y-v),A=_-b,C=Math.sqrt(S*S+A*A),S/=C,A/=C,S*=p,A*=p,M=-(v-E),I=b-x,C=Math.sqrt(M*M+I*I),M/=C,I/=C,M*=p,I*=p;const L=b-_,k=y-v,O=b-x,U=E-v,j=L*O+k*U,q=k*O-U*L,Y=q<0;if(Math.abs(q)<.001*Math.abs(j)){c.push(b-S*R,v-A*R,b+S*w,v+A*w),j>=0&&(r.join===bi.ROUND?d+=ln(b,v,b-S*R,v-A*R,b-M*R,v-I*R,c,!1)+4:d+=2,c.push(b-M*w,v-I*w,b+M*R,v+I*R));continue}const it=(-S+_)*(-A+v)-(-S+b)*(-A+y),pt=(-M+x)*(-I+v)-(-M+b)*(-I+E),N=(L*pt-O*it)/q,G=(U*it-k*pt)/q,z=(N-b)*(N-b)+(G-v)*(G-v),V=b+(N-b)*R,X=v+(G-v)*R,rt=b-(N-b)*w,at=v-(G-v)*w,lt=Math.min(L*L+k*k,O*O+U*U),re=Y?R:w,fi=lt+re*re*g,Ms=z<=fi;let ss=r.join;if(ss===bi.MITER&&z/g>m&&(ss=bi.BEVEL),Ms)switch(ss){case bi.MITER:{c.push(V,X,rt,at);break}case bi.BEVEL:{Y?c.push(V,X,b+S*w,v+A*w,V,X,b+M*w,v+I*w):c.push(b-S*R,v-A*R,rt,at,b-M*R,v-I*R,rt,at),d+=2;break}case bi.ROUND:{Y?(c.push(V,X,b+S*w,v+A*w),d+=ln(b,v,b+S*w,v+A*w,b+M*w,v+I*w,c,!0)+4,c.push(V,X,b+M*w,v+I*w)):(c.push(b-S*R,v-A*R,rt,at),d+=ln(b,v,b-S*R,v-A*R,b-M*R,v-I*R,c,!1)+4,c.push(b-M*R,v-I*R,rt,at));break}}else{switch(c.push(b-S*R,v-A*R,b+S*w,v+A*w),ss){case bi.MITER:{Y?c.push(rt,at,rt,at):c.push(V,X,V,X),d+=2;break}case bi.ROUND:{Y?d+=ln(b,v,b+S*w,v+A*w,b+M*w,v+I*w,c,!0)+2:d+=ln(b,v,b-S*R,v-A*R,b-M*R,v-I*R,c,!1)+2;break}}c.push(b-M*R,v-I*R,b+M*w,v+I*w),d+=2}}_=s[(u-2)*2],y=s[(u-2)*2+1],b=s[(u-1)*2],v=s[(u-1)*2+1],S=-(y-v),A=_-b,C=Math.sqrt(S*S+A*A),S/=C,A/=C,S*=p,A*=p,c.push(b-S*R,v-A*R,b+S*w,v+A*w),l||(r.cap===Sn.ROUND?d+=ln(b-S*(R-w)*.5,v-A*(R-w)*.5,b-S*R,v-A*R,b+S*w,v+A*w,c,!1)+2:r.cap===Sn.SQUARE&&(d+=ag(b,v,S,A,R,w,!1,c)));const T=t.indices,B=Dr.epsilon*Dr.epsilon;for(let P=f;P<d+f-2;++P)_=c[P*2],y=c[P*2+1],b=c[(P+1)*2],v=c[(P+1)*2+1],x=c[(P+2)*2],E=c[(P+2)*2+1],!(Math.abs(_*(v-E)+b*(E-y)+x*(y-v))<B)&&T.push(P,P+1,P+2)}function OA(i,t){let e=0;const s=i.shape,n=i.points||s.points,r=s.type!==be.POLY||s.closeStroke;if(n.length===0)return;const o=t.points,a=t.indices,l=n.length/2,h=o.length/2;let c=h;for(o.push(n[0],n[1]),e=1;e<l;e++)o.push(n[e*2],n[e*2+1]),a.push(c,c+1),c++;r&&a.push(c,h)}function lg(i,t){i.lineStyle.native?OA(i,t):DA(i,t)}class tf{static curveLength(t,e,s,n,r,o){const a=t-2*s+r,l=e-2*n+o,h=2*s-2*t,c=2*n-2*e,u=4*(a*a+l*l),d=4*(a*h+l*c),f=h*h+c*c,p=2*Math.sqrt(u+d+f),g=Math.sqrt(u),m=2*u*g,_=2*Math.sqrt(f),y=d/g;return(m*p+g*d*(p-_)+(4*f*u-d*d)*Math.log((2*g+y+p)/(y+_)))/(4*m)}static curveTo(t,e,s,n,r){const o=r[r.length-2],a=r[r.length-1],l=Dr._segmentsCount(tf.curveLength(o,a,t,e,s,n));let h=0,c=0;for(let u=1;u<=l;++u){const d=u/l;h=o+(t-o)*d,c=a+(e-a)*d,r.push(h+(t+(s-t)*d-h)*d,c+(e+(n-e)*d-c)*d)}}}const Lc={[be.POLY]:wy,[be.CIRC]:Jl,[be.ELIP]:Jl,[be.RECT]:IA,[be.RREC]:PA},hg=[],Va=[];class Ql{constructor(t,e=null,s=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=s,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new Ql(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Qn=new At,Sy=class extends O0{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new $l,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),Va.push(this.drawCalls[i]);this.drawCalls.length=0;for(let i=0;i<this.batches.length;i++){const t=this.batches[i];t.reset(),hg.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(i,t=null,e=null,s=null){const n=new Ql(i,t,e,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(i,t=null){if(!this.graphicsData.length)return null;const e=new Ql(i,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return e.lineStyle=s.lineStyle,s.holes.push(e),this.dirty++,this}destroy(){super.destroy();for(let i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(i){const t=this.graphicsData;for(let e=0;e<t.length;++e){const s=t[e];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(i,Qn):Qn.copyFrom(i),s.shape.contains(Qn.x,Qn.y))){let n=!1;if(s.holes){for(let r=0;r<s.holes.length;r++)if(s.holes[r].shape.contains(Qn.x,Qn.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const i=this.uvs,t=this.graphicsData;let e=null,s=null;this.batches.length>0&&(e=this.batches[this.batches.length-1],s=e.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const l=t[a],h=l.fillStyle,c=l.lineStyle;Lc[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(h.visible||c.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?h:c;if(!f.visible)continue;const p=f.texture.baseTexture,g=this.indices.length,m=this.points.length/2;p.wrapMode=Hs.REPEAT,d===0?this.processFill(l):this.processLine(l);const _=this.points.length/2-m;_!==0&&(e&&!this._compareStyles(s,f)&&(e.end(g,m),e=null),e||(e=hg.pop()||new RA,e.begin(f,g,m),this.batches.push(e),s=f),this.addUvs(this.points,i,f.texture,m,_,f.matrix))}}const n=this.indices.length,r=this.points.length/2;if(e&&e.end(n,r),this.batches.length===0){this.batchable=!0;return}const o=r>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(i,t){return!(!i||!t||i.texture.baseTexture!==t.texture.baseTexture||i.color+i.alpha!==t.color+t.alpha||!!i.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let i=0,t=this.graphicsData.length;i<t;i++){const e=this.graphicsData[i],s=e.fillStyle,n=e.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const i=this.batches;for(let t=0,e=i.length;t<e;t++){const s=i[t];for(let n=0;n<s.size;n++){const r=s.start+n;this.indicesUint16[r]=this.indicesUint16[r]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const i=this.batches;for(let t=0;t<i.length;t++)if(i[t].style.native)return!1;return this.points.length<Sy.BATCHABLE_SIZE*2}buildDrawCalls(){let i=++_t._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),Va.push(this.drawCalls[c]);this.drawCalls.length=0;const t=this.colors,e=this.textureIds;let s=Va.pop();s||(s=new Uu,s.texArray=new Hu),s.texArray.count=0,s.start=0,s.size=0,s.type=Wi.TRIANGLES;let n=0,r=null,o=0,a=!1,l=Wi.TRIANGLES,h=0;this.drawCalls.push(s);for(let c=0;c<this.batches.length;c++){const u=this.batches[c],d=8,f=u.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?Wi.LINES:Wi.TRIANGLES,r=null,n=d,i++),r!==p&&(r=p,p._batchEnabled!==i&&(n===d&&(i++,n=0,s.size>0&&(s=Va.pop(),s||(s=new Uu,s.texArray=new Hu),this.drawCalls.push(s)),s.start=h,s.size=0,s.texArray.count=0,s.type=l),p.touched=1,p._batchEnabled=i,p._batchLocation=n,p.wrapMode=Hs.REPEAT,s.texArray.elements[s.texArray.count++]=p,n++)),s.size+=u.size,h+=u.size,o=p._batchLocation,this.addColors(t,f.color,f.alpha,u.attribSize,u.attribStart),this.addTextureIds(e,o,u.attribSize,u.attribStart)}_t._globalBatch=i,this.packAttributes()}packAttributes(){const i=this.points,t=this.uvs,e=this.colors,s=this.textureIds,n=new ArrayBuffer(i.length*3*4),r=new Float32Array(n),o=new Uint32Array(n);let a=0;for(let l=0;l<i.length/2;l++)r[a++]=i[l*2],r[a++]=i[l*2+1],r[a++]=t[l*2],r[a++]=t[l*2+1],o[a++]=e[l],r[a++]=s[l];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(i){i.holes.length?wy.triangulate(i,this):Lc[i.type].triangulate(i,this)}processLine(i){lg(i,this);for(let t=0;t<i.holes.length;t++)lg(i.holes[t],this)}processHoles(i){for(let t=0;t<i.length;t++){const e=i[t];Lc[e.type].build(e),e.matrix&&this.transformPoints(e.points,e.matrix)}}calculateBounds(){const i=this._bounds;i.clear(),i.addVertexData(this.points,0,this.points.length),i.pad(this.boundsPadding,this.boundsPadding)}transformPoints(i,t){for(let e=0;e<i.length/2;e++){const s=i[e*2],n=i[e*2+1];i[e*2]=t.a*s+t.c*n+t.tx,i[e*2+1]=t.b*s+t.d*n+t.ty}}addColors(i,t,e,s,n=0){const r=Pt.shared.setValue(t).toLittleEndianNumber(),o=Pt.shared.setValue(r).toPremultiplied(e);i.length=Math.max(i.length,n+s);for(let a=0;a<s;a++)i[n+a]=o}addTextureIds(i,t,e,s=0){i.length=Math.max(i.length,s+e);for(let n=0;n<e;n++)i[s+n]=t}addUvs(i,t,e,s,n,r=null){let o=0;const a=t.length,l=e.frame;for(;o<n;){let c=i[(s+o)*2],u=i[(s+o)*2+1];if(r){const d=r.a*c+r.c*u+r.tx;u=r.b*c+r.d*u+r.ty,c=d}o++,t.push(c/l.width,u/l.height)}const h=e.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,e,a,n)}adjustUvs(i,t,e,s){const n=t.baseTexture,r=1e-6,o=e+s*2,a=t.frame,l=a.width/n.width,h=a.height/n.height;let c=a.x/a.width,u=a.y/a.height,d=Math.floor(i[e]+r),f=Math.floor(i[e+1]+r);for(let p=e+2;p<o;p+=2)d=Math.min(d,Math.floor(i[p]+r)),f=Math.min(f,Math.floor(i[p+1]+r));c-=d,u-=f;for(let p=e;p<o;p+=2)i[p]=(i[p]+c)*l,i[p+1]=(i[p+1]+u)*h}};let Ey=Sy;Ey.BATCHABLE_SIZE=100;class Uh{constructor(){this.color=16777215,this.alpha=1,this.texture=dt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Uh;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=dt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class ef extends Uh{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Sn.BUTT,this.join=bi.MITER,this.miterLimit=10}clone(){const t=new ef;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Nc={},xl=class extends li{constructor(i=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Uh,this._lineStyle=new ef,this._matrix=null,this._holeMode=!1,this.state=Cs.for2d(),this._geometry=i||new Ey,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Pt(16777215),this.blendMode=mt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new xl(this._geometry)}set blendMode(i){this.state.blendMode=i}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(i){this._tintColor.setValue(i)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(i=null,t=0,e,s=.5,n=!1){return typeof i=="number"&&(i={width:i,color:t,alpha:e,alignment:s,native:n}),this.lineTextureStyle(i)}lineTextureStyle(i){const t={width:0,texture:dt.WHITE,color:i!=null&&i.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Sn.BUTT,join:bi.MITER,miterLimit:10};i=Object.assign(t,i),this.normalizeColor(i),this.currentPath&&this.startPoly();const e=i.width>0&&i.alpha>0;return e?(i.matrix&&(i.matrix=i.matrix.clone(),i.matrix.invert()),Object.assign(this._lineStyle,{visible:e},i)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const i=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new xr,this.currentPath.closeStroke=!1,this.currentPath.points.push(i[t-2],i[t-1]))}else this.currentPath=new xr,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(i,t){return this.startPoly(),this.currentPath.points[0]=i,this.currentPath.points[1]=t,this}lineTo(i,t){this.currentPath||this.moveTo(0,0);const e=this.currentPath.points,s=e[e.length-2],n=e[e.length-1];return(s!==i||n!==t)&&e.push(i,t),this}_initCurve(i=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[i,t]):this.moveTo(i,t)}quadraticCurveTo(i,t,e,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),tf.curveTo(i,t,e,s,n),this}bezierCurveTo(i,t,e,s,n,r){return this._initCurve(),Qd.curveTo(i,t,e,s,n,r,this.currentPath.points),this}arcTo(i,t,e,s,n){this._initCurve(i,t);const r=this.currentPath.points,o=og.curveTo(i,t,e,s,n,r);if(o){const{cx:a,cy:l,radius:h,startAngle:c,endAngle:u,anticlockwise:d}=o;this.arc(a,l,h,c,u,d)}return this}arc(i,t,e,s,n,r=!1){if(s===n)return this;if(!r&&n<=s?n+=Yl:r&&s<=n&&(s+=Yl),n-s===0)return this;const a=i+Math.cos(s)*e,l=t+Math.sin(s)*e,h=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const u=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);u<h&&d<h||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return og.arc(a,l,i,t,e,s,n,r,c),this}beginFill(i=0,t){return this.beginTextureFill({texture:dt.WHITE,color:i,alpha:t})}normalizeColor(i){const t=Pt.shared.setValue(i.color??0);i.color=t.toNumber(),i.alpha??(i.alpha=t.alpha)}beginTextureFill(i){const t={texture:dt.WHITE,color:16777215,matrix:null};i=Object.assign(t,i),this.normalizeColor(i),this.currentPath&&this.startPoly();const e=i.alpha>0;return e?(i.matrix&&(i.matrix=i.matrix.clone(),i.matrix.invert()),Object.assign(this._fillStyle,{visible:e},i)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(i,t,e,s){return this.drawShape(new bt(i,t,e,s))}drawRoundedRect(i,t,e,s,n){return this.drawShape(new Kd(i,t,e,s,n))}drawCircle(i,t,e){return this.drawShape(new Yd(i,t,e))}drawEllipse(i,t,e,s){return this.drawShape(new $d(i,t,e,s))}drawPolygon(...i){let t,e=!0;const s=i[0];s.points?(e=s.closeStroke,t=s.points):Array.isArray(i[0])?t=i[0]:t=i;const n=new xr(t);return n.closeStroke=e,this.drawShape(n),this}drawShape(i){return this._holeMode?this._geometry.drawHole(i,this._matrix):this._geometry.drawShape(i,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const i=this._geometry.graphicsData;return i.length===1&&i[0].shape.type===be.RECT&&!i[0].matrix&&!i[0].holes.length&&!(i[0].lineStyle.visible&&i[0].lineStyle.width)}_render(i){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(i)):(i.batch.flush(),this._renderDirect(i))}_populateBatches(){const i=this._geometry,t=this.blendMode,e=i.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=i.batchDirty,this.batches.length=e,this.vertexData=new Float32Array(i.points);for(let s=0;s<e;s++){const n=i.batches[s],r=n.style.color,o=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),a=new Float32Array(i.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),l=new Uint16Array(i.indicesUint16.buffer,n.start*2,n.size),h={vertexData:o,blendMode:t,indices:l,uvs:a,_batchRGB:Pt.shared.setValue(r).toRgbArray(),_tintRGB:r,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=h}}_renderBatched(i){if(this.batches.length){i.batch.setObjectRenderer(i.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,e=this.batches.length;t<e;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,i.plugins[this.pluginName].render(s)}}}_renderDirect(i){const t=this._resolveDirectShader(i),e=this._geometry,s=this.worldAlpha,n=t.uniforms,r=e.drawCalls;n.translationMatrix=this.transform.worldTransform,Pt.shared.setValue(this._tintColor).premultiply(s).toArray(n.tint),i.shader.bind(t),i.geometry.bind(e,t),i.state.set(this.state);for(let o=0,a=r.length;o<a;o++)this._renderDrawCallDirect(i,e.drawCalls[o])}_renderDrawCallDirect(i,t){const{texArray:e,type:s,size:n,start:r}=t,o=e.count;for(let a=0;a<o;a++)i.texture.bind(e.elements[a],a);i.geometry.draw(s,n,r)}_resolveDirectShader(i){let t=this.shader;const e=this.pluginName;if(!t){if(!Nc[e]){const{maxTextures:s}=i.plugins[e],n=new Int32Array(s);for(let a=0;a<s;a++)n[a]=a;const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Lt,default:Ci.from({uSamplers:n},!0)},o=i.plugins[e]._shader.program;Nc[e]=new $i(o,r)}t=Nc[e]}return t}_calculateBounds(){this.finishPoly();const i=this._geometry;if(!i.graphicsData.length)return;const{minX:t,minY:e,maxX:s,maxY:n}=i.bounds;this._bounds.addFrame(this.transform,t,e,s,n)}containsPoint(i){return this.worldTransform.applyInverse(i,xl._TEMP_POINT),this._geometry.containsPoint(xl._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let i=0;i<this.batches.length;i++){const t=this.batches[i];t._tintRGB=Pt.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const i=this.transform._worldID;if(this._transformID===i)return;this._transformID=i;const t=this.transform.worldTransform,e=t.a,s=t.b,n=t.c,r=t.d,o=t.tx,a=t.ty,l=this._geometry.points,h=this.vertexData;let c=0;for(let u=0;u<l.length;u+=2){const d=l[u],f=l[u+1];h[c++]=e*d+n*f+o,h[c++]=r*f+s*d+a}}closePath(){const i=this.currentPath;return i&&(i.closeStroke=!0,this.finishPoly()),this}setMatrix(i){return this._matrix=i,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(i){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(i)}};let pa=xl;pa.curves=Dr;pa._TEMP_POINT=new At;class kA{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const Uc=new At,cg=new xr,Ty=class extends li{constructor(i,t,e,s=Wi.TRIANGLES){super(),this.geometry=i,this.shader=t,this.state=e||Cs.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Q.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(i){this._geometry!==i&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=i,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(i){this.shader=i}get material(){return this.shader}set blendMode(i){this.state.blendMode=i}get blendMode(){return this.state.blendMode}set roundPixels(i){this._roundPixels!==i&&(this._transformID=-1),this._roundPixels=i}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(i){this.shader.tint=i}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(i){this.shader.texture=i}_render(i){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Wi.TRIANGLES&&t.length<Ty.BATCHABLE_SIZE*2?this._renderToBatch(i):this._renderDefault(i)}_renderDefault(i){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),i.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),i.shader.bind(t),i.state.set(this.state),i.geometry.bind(this.geometry,t),i.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(i){const t=this.geometry,e=this.shader;e.uvMatrix&&(e.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=e._tintRGB,this._texture=e.texture;const s=this.material.pluginName;i.batch.setObjectRenderer(i.plugins[s]),i.plugins[s].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,s=t._updateID;if(s===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,r=n.a,o=n.b,a=n.c,l=n.d,h=n.tx,c=n.ty,u=this.vertexData;for(let d=0;d<u.length/2;d++){const f=e[d*2],p=e[d*2+1];u[d*2]=r*f+a*p+h,u[d*2+1]=o*f+l*p+c}if(this._roundPixels){const d=Q.RESOLUTION;for(let f=0;f<u.length;++f)u[f]=Math.round(u[f]*d)/d}this.vertexDirty=s}calculateUvs(){const i=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=i.data:(this.batchUvs||(this.batchUvs=new kA(i,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(i){if(!this.getBounds().contains(i.x,i.y))return!1;this.worldTransform.applyInverse(i,Uc);const t=this.geometry.getBuffer("aVertexPosition").data,e=cg.points,s=this.geometry.getIndex().data,n=s.length,r=this.drawMode===4?3:1;for(let o=0;o+2<n;o+=r){const a=s[o]*2,l=s[o+1]*2,h=s[o+2]*2;if(e[0]=t[a],e[1]=t[a+1],e[2]=t[l],e[3]=t[l+1],e[4]=t[h],e[5]=t[h+1],cg.contains(Uc.x,Uc.y))return!0}return!1}destroy(i){super.destroy(i),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Qu=Ty;Qu.BATCHABLE_SIZE=100;class FA extends Ks{constructor(t,e,s){super();const n=new le(t),r=new le(e,!0),o=new le(s,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,gt.FLOAT).addAttribute("aTextureCoord",r,2,!1,gt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var BA=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,LA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class ug extends $i{constructor(t,e){const s={uSampler:t,alpha:1,uTextureMatrix:Lt.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(s,e.uniforms),super(e.program||Si.from(LA,BA),s),this._colorDirty=!1,this.uvMatrix=new K0(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new Pt(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Pt.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class dg{constructor(t,e,s){this.geometry=new Ks,this.indexBuffer=null,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let r=t[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||gt.FLOAT,offset:r.offset},e[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new le(yS(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=e,e+=a.size,this.dynamicStride+=a.size}const s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new le(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const r=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(r),this.staticDataUint32=new Uint32Array(r),this.staticBuffer=new le(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===gt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===gt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,s){for(let n=0;n<this.dynamicProperties.length;n++){const r=this.dynamicProperties[n];r.uploadFunction(t,e,s,r.type===gt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,s){for(let n=0;n<this.staticProperties.length;n++){const r=this.staticProperties[n];r.uploadFunction(t,e,s,r.type===gt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var NA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,UA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Ay extends Dh{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Lt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:gt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=$i.from(UA,NA,{}),this.state=Cs.for2d()}render(t){const e=t.children,s=t._maxSize,n=t._batchSize,r=this.renderer;let o=e.length;if(o===0)return;o>s&&!t.autoResize&&(o=s);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=M0(t.blendMode,h),r.state.set(this.state);const c=r.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Pt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=n,p+=1){let g=o-f;g>n&&(g=n),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const m=a[p];m.uploadDynamic(e,f,g);const _=t._bufferUpdateIDs[p]||0;d=d||m._updateID<_,d&&(m._updateID=t._updateID,m.uploadStatic(e,f,g)),r.geometry.bind(m.geometry),c.drawElements(c.TRIANGLES,g*6,c.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],s=t._maxSize,n=t._batchSize,r=t._properties;for(let o=0;o<s;o+=n)e.push(new dg(this.properties,r,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,s=t._properties;return new dg(this.properties,s,e)}uploadVertices(t,e,s,n,r,o){let a=0,l=0,h=0,c=0;for(let u=0;u<s;++u){const d=t[e+u],f=d._texture,p=d.scale.x,g=d.scale.y,m=f.trim,_=f.orig;m?(l=m.x-d.anchor.x*_.width,a=l+m.width,c=m.y-d.anchor.y*_.height,h=c+m.height):(a=_.width*(1-d.anchor.x),l=_.width*-d.anchor.x,h=_.height*(1-d.anchor.y),c=_.height*-d.anchor.y),n[o]=l*p,n[o+1]=c*g,n[o+r]=a*p,n[o+r+1]=c*g,n[o+r*2]=a*p,n[o+r*2+1]=h*g,n[o+r*3]=l*p,n[o+r*3+1]=h*g,o+=r*4}}uploadPosition(t,e,s,n,r,o){for(let a=0;a<s;a++){const l=t[e+a].position;n[o]=l.x,n[o+1]=l.y,n[o+r]=l.x,n[o+r+1]=l.y,n[o+r*2]=l.x,n[o+r*2+1]=l.y,n[o+r*3]=l.x,n[o+r*3+1]=l.y,o+=r*4}}uploadRotation(t,e,s,n,r,o){for(let a=0;a<s;a++){const l=t[e+a].rotation;n[o]=l,n[o+r]=l,n[o+r*2]=l,n[o+r*3]=l,o+=r*4}}uploadUvs(t,e,s,n,r,o){for(let a=0;a<s;++a){const l=t[e+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+r]=l.x1,n[o+r+1]=l.y1,n[o+r*2]=l.x2,n[o+r*2+1]=l.y2,n[o+r*3]=l.x3,n[o+r*3+1]=l.y3,o+=r*4):(n[o]=0,n[o+1]=0,n[o+r]=0,n[o+r+1]=0,n[o+r*2]=0,n[o+r*2+1]=0,n[o+r*3]=0,n[o+r*3+1]=0,o+=r*4)}}uploadTint(t,e,s,n,r,o){for(let a=0;a<s;++a){const l=t[e+a],h=Pt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);n[o]=h,n[o+r]=h,n[o+r*2]=h,n[o+r*3]=h,o+=r*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Ay.extension={name:"particle",type:et.RendererPlugin};ft.add(Ay);var Gh=(i=>(i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",i))(Gh||{});const Wa={willReadFrequently:!0},ut=class{static get experimentalLetterSpacingSupported(){let i=ut._experimentalLetterSpacingSupported;if(i!==void 0){const t=Q.ADAPTER.getCanvasRenderingContext2D().prototype;i=ut._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return i}constructor(i,t,e,s,n,r,o,a,l){this.text=i,this.style=t,this.width=e,this.height=s,this.lines=n,this.lineWidths=r,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(i,t,e,s=ut._canvas){e=e??t.wordWrap;const n=t.toFontString(),r=ut.measureFont(n);r.fontSize===0&&(r.fontSize=t.fontSize,r.ascent=t.fontSize);const o=s.getContext("2d",Wa);o.font=n;const l=(e?ut.wordWrap(i,t,s):i).split(/(?:\r\n|\r|\n)/),h=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const g=ut._measureText(l[p],t.letterSpacing,o);h[p]=g,c=Math.max(c,g)}let u=c+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance);const d=t.lineHeight||r.fontSize+t.strokeThickness;let f=Math.max(d,r.fontSize+t.strokeThickness*2)+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new ut(i,t,u,f,l,h,d+t.leading,c,r)}static _measureText(i,t,e){let s=!1;ut.experimentalLetterSpacingSupported&&(ut.experimentalLetterSpacing?(e.letterSpacing=`${t}px`,e.textLetterSpacing=`${t}px`,s=!0):(e.letterSpacing="0px",e.textLetterSpacing="0px"));let n=e.measureText(i).width;return n>0&&(s?n-=t:n+=(ut.graphemeSegmenter(i).length-1)*t),n}static wordWrap(i,t,e=ut._canvas){const s=e.getContext("2d",Wa);let n=0,r="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:h}=t,c=ut.collapseSpaces(h),u=ut.collapseNewlines(h);let d=!c;const f=t.wordWrapWidth+l,p=ut.tokenize(i);for(let g=0;g<p.length;g++){let m=p[g];if(ut.isNewline(m)){if(!u){o+=ut.addLine(r),d=!c,r="",n=0;continue}m=" "}if(c){const y=ut.isBreakingSpace(m),b=ut.isBreakingSpace(r[r.length-1]);if(y&&b)continue}const _=ut.getFromCache(m,l,a,s);if(_>f)if(r!==""&&(o+=ut.addLine(r),r="",n=0),ut.canBreakWords(m,t.breakWords)){const y=ut.wordWrapSplit(m);for(let b=0;b<y.length;b++){let v=y[b],x=v,E=1;for(;y[b+E];){const A=y[b+E];if(!ut.canBreakChars(x,A,m,b,t.breakWords))v+=A;else break;x=A,E++}b+=E-1;const S=ut.getFromCache(v,l,a,s);S+n>f&&(o+=ut.addLine(r),d=!1,r="",n=0),r+=v,n+=S}}else{r.length>0&&(o+=ut.addLine(r),r="",n=0);const y=g===p.length-1;o+=ut.addLine(m,!y),d=!1,r="",n=0}else _+n>f&&(d=!1,o+=ut.addLine(r),r="",n=0),(r.length>0||!ut.isBreakingSpace(m)||d)&&(r+=m,n+=_)}return o+=ut.addLine(r,!1),o}static addLine(i,t=!0){return i=ut.trimRight(i),i=t?`${i}
`:i,i}static getFromCache(i,t,e,s){let n=e[i];return typeof n!="number"&&(n=ut._measureText(i,t,s)+t,e[i]=n),n}static collapseSpaces(i){return i==="normal"||i==="pre-line"}static collapseNewlines(i){return i==="normal"}static trimRight(i){if(typeof i!="string")return"";for(let t=i.length-1;t>=0;t--){const e=i[t];if(!ut.isBreakingSpace(e))break;i=i.slice(0,-1)}return i}static isNewline(i){return typeof i!="string"?!1:ut._newlines.includes(i.charCodeAt(0))}static isBreakingSpace(i,t){return typeof i!="string"?!1:ut._breakingSpaces.includes(i.charCodeAt(0))}static tokenize(i){const t=[];let e="";if(typeof i!="string")return t;for(let s=0;s<i.length;s++){const n=i[s],r=i[s+1];if(ut.isBreakingSpace(n,r)||ut.isNewline(n)){e!==""&&(t.push(e),e=""),t.push(n);continue}e+=n}return e!==""&&t.push(e),t}static canBreakWords(i,t){return t}static canBreakChars(i,t,e,s,n){return!0}static wordWrapSplit(i){return ut.graphemeSegmenter(i)}static measureFont(i){if(ut._fonts[i])return ut._fonts[i];const t={ascent:0,descent:0,fontSize:0},e=ut._canvas,s=ut._context;s.font=i;const n=ut.METRICS_STRING+ut.BASELINE_SYMBOL,r=Math.ceil(s.measureText(n).width);let o=Math.ceil(s.measureText(ut.BASELINE_SYMBOL).width);const a=Math.ceil(ut.HEIGHT_MULTIPLIER*o);if(o=o*ut.BASELINE_MULTIPLIER|0,r===0||a===0)return ut._fonts[i]=t,t;e.width=r,e.height=a,s.fillStyle="#f00",s.fillRect(0,0,r,a),s.font=i,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(n,0,o);const l=s.getImageData(0,0,r,a).data,h=l.length,c=r*4;let u=0,d=0,f=!1;for(u=0;u<o;++u){for(let p=0;p<c;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d+=c;else break}for(t.ascent=o-u,d=h-c,f=!1,u=a;u>o;--u){for(let p=0;p<c;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d-=c;else break}return t.descent=u-o,t.fontSize=t.ascent+t.descent,ut._fonts[i]=t,t}static clearMetrics(i=""){i?delete ut._fonts[i]:ut._fonts={}}static get _canvas(){if(!ut.__canvas){let i;try{const t=new OffscreenCanvas(0,0),e=t.getContext("2d",Wa);if(e!=null&&e.measureText)return ut.__canvas=t,t;i=Q.ADAPTER.createCanvas()}catch{i=Q.ADAPTER.createCanvas()}i.width=i.height=10,ut.__canvas=i}return ut.__canvas}static get _context(){return ut.__context||(ut.__context=ut._canvas.getContext("2d",Wa)),ut.__context}};let _e=ut;_e.METRICS_STRING="|Ã‰qÃ…";_e.BASELINE_SYMBOL="M";_e.BASELINE_MULTIPLIER=1.4;_e.HEIGHT_MULTIPLIER=2;_e.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return t=>[...i.segment(t)].map(e=>e.segment)}return i=>[...i]})();_e.experimentalLetterSpacing=!1;_e._fonts={};_e._newlines=[10,13];_e._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const GA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],po=class{constructor(i){this.styleID=0,this.reset(),Hc(this,i,i)}clone(){const i={};return Hc(i,this,po.defaultStyle),new po(i)}reset(){Hc(this,po.defaultStyle,po.defaultStyle)}get align(){return this._align}set align(i){this._align!==i&&(this._align=i,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(i){this._breakWords!==i&&(this._breakWords=i,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(i){this._dropShadow!==i&&(this._dropShadow=i,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(i){this._dropShadowAlpha!==i&&(this._dropShadowAlpha=i,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(i){this._dropShadowAngle!==i&&(this._dropShadowAngle=i,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(i){this._dropShadowBlur!==i&&(this._dropShadowBlur=i,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(i){const t=Gc(i);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(i){this._dropShadowDistance!==i&&(this._dropShadowDistance=i,this.styleID++)}get fill(){return this._fill}set fill(i){const t=Gc(i);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(i){this._fillGradientType!==i&&(this._fillGradientType=i,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(i){HA(this._fillGradientStops,i)||(this._fillGradientStops=i,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(i){this.fontFamily!==i&&(this._fontFamily=i,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(i){this._fontSize!==i&&(this._fontSize=i,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(i){this._fontStyle!==i&&(this._fontStyle=i,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(i){this._fontVariant!==i&&(this._fontVariant=i,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(i){this._fontWeight!==i&&(this._fontWeight=i,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(i){this._lineHeight!==i&&(this._lineHeight=i,this.styleID++)}get leading(){return this._leading}set leading(i){this._leading!==i&&(this._leading=i,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(i){this._lineJoin!==i&&(this._lineJoin=i,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(i){this._miterLimit!==i&&(this._miterLimit=i,this.styleID++)}get padding(){return this._padding}set padding(i){this._padding!==i&&(this._padding=i,this.styleID++)}get stroke(){return this._stroke}set stroke(i){const t=Gc(i);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(i){this._strokeThickness!==i&&(this._strokeThickness=i,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(i){this._textBaseline!==i&&(this._textBaseline=i,this.styleID++)}get trim(){return this._trim}set trim(i){this._trim!==i&&(this._trim=i,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(i){this._whiteSpace!==i&&(this._whiteSpace=i,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(i){this._wordWrap!==i&&(this._wordWrap=i,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(i){this._wordWrapWidth!==i&&(this._wordWrapWidth=i,this.styleID++)}toFontString(){const i=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let e=t.length-1;e>=0;e--){let s=t[e].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!GA.includes(s)&&(s=`"${s}"`),t[e]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${i} ${t.join(",")}`}};let Ss=po;Ss.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Gh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Gc(i){const t=Pt.shared;return Array.isArray(i)?i.map(e=>t.setValue(e).toHex()):t.setValue(i).toHex()}function HA(i,t){if(!Array.isArray(i)||!Array.isArray(t)||i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(i[e]!==t[e])return!1;return!0}function Hc(i,t,e){for(const s in e)Array.isArray(t[s])?i[s]=t[s].slice():i[s]=t[s]}const zA={texture:!0,children:!1,baseTexture:!0},td=class extends Yr{constructor(i,t,e){let s=!1;e||(e=Q.ADAPTER.createCanvas(),s=!0),e.width=3,e.height=3;const n=dt.from(e);n.orig=new bt,n.trim=new bt,super(n),this._ownCanvas=s,this.canvas=e,this.context=e.getContext("2d",{willReadFrequently:!0}),this._resolution=td.defaultResolution??Q.RESOLUTION,this._autoResolution=td.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=i,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return _e.experimentalLetterSpacing}static set experimentalLetterSpacing(i){vt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),_e.experimentalLetterSpacing=i}updateText(i){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&i)return;this._font=this._style.toFontString();const e=this.context,s=_e.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,r=s.height,o=s.lines,a=s.lineHeight,l=s.lineWidths,h=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,r)+t.padding*2)*this._resolution),e.scale(this._resolution,this._resolution),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.font=this._font,e.lineWidth=t.strokeThickness,e.textBaseline=t.textBaseline,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit;let u,d;const f=t.dropShadow?2:1;for(let p=0;p<f;++p){const g=t.dropShadow&&p===0,m=g?Math.ceil(Math.max(1,r)+t.padding*2):0,_=m*this._resolution;if(g){e.fillStyle="black",e.strokeStyle="black";const b=t.dropShadowColor,v=t.dropShadowBlur*this._resolution,x=t.dropShadowDistance*this._resolution;e.shadowColor=Pt.shared.setValue(b).setAlpha(t.dropShadowAlpha).toRgbaString(),e.shadowBlur=v,e.shadowOffsetX=Math.cos(t.dropShadowAngle)*x,e.shadowOffsetY=Math.sin(t.dropShadowAngle)*x+_}else e.fillStyle=this._generateFillStyle(t,o,s),e.strokeStyle=t.stroke,e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;let y=(a-c.fontSize)/2;a-c.fontSize<0&&(y=0);for(let b=0;b<o.length;b++)u=t.strokeThickness/2,d=t.strokeThickness/2+b*a+c.ascent+y,t.align==="right"?u+=h-l[b]:t.align==="center"&&(u+=(h-l[b])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[b],u+t.padding,d+t.padding-m,!0),t.fill&&this.drawLetterSpacing(o[b],u+t.padding,d+t.padding-m)}this.updateTexture()}drawLetterSpacing(i,t,e,s=!1){const r=this._style.letterSpacing;let o=!1;if(_e.experimentalLetterSpacingSupported&&(_e.experimentalLetterSpacing?(this.context.letterSpacing=`${r}px`,this.context.textLetterSpacing=`${r}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),r===0||o){s?this.context.strokeText(i,t,e):this.context.fillText(i,t,e);return}let a=t;const l=_e.graphemeSegmenter(i);let h=this.context.measureText(i).width,c=0;for(let u=0;u<l.length;++u){const d=l[u];s?this.context.strokeText(d,a,e):this.context.fillText(d,a,e);let f="";for(let p=u+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,a+=h-c+r,h=c}}updateTexture(){const i=this.canvas;if(this._style.trim){const r=wS(i);r.data&&(i.width=r.width,i.height=r.height,this.context.putImageData(r.data,0,0))}const t=this._texture,e=this._style,s=e.trim?0:e.padding,n=t.baseTexture;t.trim.width=t._frame.width=i.width/this._resolution,t.trim.height=t._frame.height=i.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(i.width,i.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),super._render(i)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(i,t){return this.updateText(!0),this._textureID===-1&&(i=!1),super.getBounds(i,t)}getLocalBounds(i){return this.updateText(!0),super.getLocalBounds.call(this,i)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(i,t,e){const s=i.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const r=i.dropShadow?i.dropShadowDistance:0,o=i.padding||0,a=this.canvas.width/this._resolution-r-o*2,l=this.canvas.height/this._resolution-r-o*2,h=s.slice(),c=i.fillGradientStops.slice();if(!c.length){const u=h.length+1;for(let d=1;d<u;++d)c.push(d/u)}if(h.unshift(s[0]),c.unshift(0),h.push(s[s.length-1]),c.push(1),i.fillGradientType===Gh.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,o,a/2,l+o);const u=e.fontProperties.fontSize+i.strokeThickness;for(let d=0;d<t.length;d++){const f=e.lineHeight*(d-1)+u,p=e.lineHeight*d;let g=p;d>0&&f>p&&(g=(p+f)/2);const m=p+u,_=e.lineHeight*(d+1);let y=m;d+1<t.length&&_<m&&(y=(m+_)/2);const b=(y-g)/l;for(let v=0;v<h.length;v++){let x=0;typeof c[v]=="number"?x=c[v]:x=v/h.length;let E=Math.min(1,Math.max(0,g/l+x*b));E=Number(E.toFixed(5)),n.addColorStop(E,h[v])}}}else{n=this.context.createLinearGradient(o,l/2,a+o,l/2);const u=h.length+1;let d=1;for(let f=0;f<h.length;f++){let p;typeof c[f]=="number"?p=c[f]:p=d/u,n.addColorStop(p,h[f]),d++}}return n}destroy(i){typeof i=="boolean"&&(i={children:i}),i=Object.assign({},zA,i),super.destroy(i),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(i){this.updateText(!0);const t=Ds(this.scale.x)||1;this.scale.x=t*i/this._texture.orig.width,this._width=i}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(i){this.updateText(!0);const t=Ds(this.scale.y)||1;this.scale.y=t*i/this._texture.orig.height,this._height=i}get style(){return this._style}set style(i){i=i||{},i instanceof Ss?this._style=i:this._style=new Ss(i),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(i){i=String(i??""),this._text!==i&&(this._text=i,this.dirty=!0)}get resolution(){return this._resolution}set resolution(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)}};let sf=td;sf.defaultAutoResolution=!0;class VA{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function WA(i,t){var s;let e=!1;if((s=i==null?void 0:i._textures)!=null&&s.length){for(let n=0;n<i._textures.length;n++)if(i._textures[n]instanceof dt){const r=i._textures[n].baseTexture;t.includes(r)||(t.push(r),e=!0)}}return e}function jA(i,t){if(i.baseTexture instanceof _t){const e=i.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function XA(i,t){if(i._texture&&i._texture instanceof dt){const e=i._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function YA(i,t){return t instanceof sf?(t.updateText(!0),!0):!1}function $A(i,t){if(t instanceof Ss){const e=t.toFontString();return _e.measureFont(e),!0}return!1}function KA(i,t){if(i instanceof sf){t.includes(i.style)||t.push(i.style),t.includes(i)||t.push(i);const e=i._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function qA(i,t){return i instanceof Ss?(t.includes(i)||t.push(i),!0):!1}const Cy=class{constructor(i){this.limiter=new VA(Cy.uploadsPerFrame),this.renderer=i,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(KA),this.registerFindHook(qA),this.registerFindHook(WA),this.registerFindHook(jA),this.registerFindHook(XA),this.registerUploadHook(YA),this.registerUploadHook($A)}upload(i){return new Promise(t=>{i&&this.add(i),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,we.system.addOnce(this.tick,this,Bn.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const i=this.queue[0];let t=!1;if(i&&!i._destroyed){for(let e=0,s=this.uploadHooks.length;e<s;e++)if(this.uploadHooks[e](this.uploadHookHelper,i)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)we.system.addOnce(this.tick,this,Bn.UTILITY);else{this.ticking=!1;const i=this.completes.slice(0);this.completes.length=0;for(let t=0,e=i.length;t<e;t++)i[t]()}}registerFindHook(i){return i&&this.addHooks.push(i),this}registerUploadHook(i){return i&&this.uploadHooks.push(i),this}add(i){for(let t=0,e=this.addHooks.length;t<e&&!this.addHooks[t](i,this.queue);t++);if(i instanceof li)for(let t=i.children.length-1;t>=0;t--)this.add(i.children[t]);return this}destroy(){this.ticking&&we.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let th=Cy;th.uploadsPerFrame=4;Object.defineProperties(Q,{UPLOADS_PER_FRAME:{get(){return th.uploadsPerFrame},set(i){vt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),th.uploadsPerFrame=i}}});function My(i,t){return t instanceof _t?(t._glTextures[i.CONTEXT_UID]||i.texture.bind(t),!0):!1}function ZA(i,t){if(!(t instanceof pa))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:s}=e;for(let n=0;n<s.length;n++){const{texture:r}=s[n].style;r&&My(i,r.baseTexture)}return e.batchable||i.geometry.bind(e,t._resolveDirectShader(i)),!0}function JA(i,t){return i instanceof pa?(t.push(i),!0):!1}class Iy extends th{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(JA),this.registerUploadHook(My),this.registerUploadHook(ZA)}}Iy.extension={name:"prepare",type:et.RendererSystem};ft.add(Iy);var QA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,tC=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,eC=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,fg=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,iC=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const ja=new Lt;class Py extends Dh{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new j0,this.state=Cs.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=$i.from(fg,iC,e),this.shader=t.context.webGLVersion>1?$i.from(tC,QA,e):$i.from(fg,eC,e)}render(t){const e=this.renderer,s=this.quad;let n=s.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const r=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;n=s.uvs,n[0]=n[6]=-r,n[1]=n[3]=-o,n[2]=n[4]=1-r,n[5]=n[7]=1-o,s.invalidate();const a=t._texture,l=a.baseTexture,h=l.alphaMode>0,c=t.tileTransform.localTransform,u=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[e.CONTEXT_UID]?d=l.wrapMode!==Hs.CLAMP:l.wrapMode===Hs.CLAMP&&(l.wrapMode=Hs.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,g=a.height,m=t._width,_=t._height;ja.set(c.a*p/m,c.b*p/_,c.c*g/m,c.d*g/_,c.tx/m,c.ty/_),ja.invert(),d?ja.prepend(u.mapCoord):(f.uniforms.uMapCoord=u.mapCoord.toArray(!0),f.uniforms.uClampFrame=u.uClampFrame,f.uniforms.uClampOffset=u.uClampOffset),f.uniforms.uTransform=ja.toArray(!0),f.uniforms.uColor=Pt.shared.setValue(t.tint).premultiply(t.worldAlpha,h).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,e.shader.bind(f),e.geometry.bind(s),this.state.blendMode=M0(t.blendMode,h),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Py.extension={name:"tilingSprite",type:et.RendererPlugin};ft.add(Py);const go=class{constructor(i,t,e=null){this.linkedSheets=[],this._texture=i instanceof dt?i:null,this.baseTexture=i instanceof _t?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const s=this.baseTexture.resource;this.resolution=this._updateResolution(e||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(i=null){const{scale:t}=this.data.meta;let e=$s(i,null);return e===null&&(e=parseFloat(t??"1")),e!==1&&this.baseTexture.setResolution(e),e}parse(){return new Promise(i=>{this._callback=i,this._batchIndex=0,this._frameKeys.length<=go.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(i){let t=i;const e=go.BATCH_SIZE;for(;t-i<e&&t<this._frameKeys.length;){const s=this._frameKeys[t],n=this._frames[s],r=n.frame;if(r){let o=null,a=null;const l=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,h=new bt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);n.rotated?o=new bt(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):o=new bt(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(a=new bt(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[s]=new dt(this.baseTexture,o,h,a,n.rotated?2:0,n.anchor,n.borders),dt.addToCache(this.textures[s],s)}t++}}_processAnimations(){const i=this.data.animations||{};for(const t in i){this.animations[t]=[];for(let e=0;e<i[t].length;e++){const s=i[t][e];this.animations[t].push(this.textures[s])}}}_parseComplete(){const i=this._callback;this._callback=null,this._batchIndex=0,i.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*go.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*go.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(i=!1){var t;for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,i&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let ed=go;ed.BATCH_SIZE=1e3;const sC=["jpg","png","jpeg","avif","webp"];function Ry(i,t,e){const s={};if(i.forEach(n=>{s[n]=t}),Object.keys(t.textures).forEach(n=>{s[n]=t.textures[n]}),!e){const n=Te.dirname(i[0]);t.linkedSheets.forEach((r,o)=>{const a=Ry([`${n}/${t.data.meta.related_multi_packs[o]}`],r,!0);Object.assign(s,a)})}return s}const nC={extension:et.Asset,cache:{test:i=>i instanceof ed,getCacheableAssets:(i,t)=>Ry(i,t,!1)},resolver:{test:i=>{const e=i.split("?")[0].split("."),s=e.pop(),n=e.pop();return s==="json"&&sC.includes(n)},parse:i=>{var e;const t=i.split(".");return{resolution:parseFloat(((e=Q.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:t[t.length-2],src:i}}},loader:{name:"spritesheetLoader",extension:{type:et.LoadParser,priority:is.Normal},async testParse(i,t){return Te.extname(t.src).toLowerCase()===".json"&&!!i.frames},async parse(i,t,e){var h,c;let s=Te.dirname(t.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");let n=s+i.meta.image;n=Zu(n,t.src);const o=(await e.load([n]))[n],a=new ed(o.baseTexture,i,t.src);await a.parse();const l=(h=i==null?void 0:i.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(l)){const u=[];for(const f of l){if(typeof f!="string")continue;let p=s+f;(c=t.data)!=null&&c.ignoreMultiPack||(p=Zu(p,t.src),u.push(e.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(u);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(i){i.destroy(!0)}}};ft.add(nC);class eh{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class vl{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const r in e){const o=e[r].match(/^[a-z]+/gm)[0],a=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const h in a){const c=a[h].split("="),u=c[0],d=c[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[u]=p}s[o].push(l)}const n=new eh;return s.info.forEach(r=>n.info.push({face:r.face,size:parseInt(r.size,10)})),s.common.forEach(r=>n.common.push({lineHeight:parseInt(r.lineHeight,10)})),s.page.forEach(r=>n.page.push({id:parseInt(r.id,10),file:r.file})),s.char.forEach(r=>n.char.push({id:parseInt(r.id,10),page:parseInt(r.page,10),x:parseInt(r.x,10),y:parseInt(r.y,10),width:parseInt(r.width,10),height:parseInt(r.height,10),xoffset:parseInt(r.xoffset,10),yoffset:parseInt(r.yoffset,10),xadvance:parseInt(r.xadvance,10)})),s.kerning.forEach(r=>n.kerning.push({first:parseInt(r.first,10),second:parseInt(r.second,10),amount:parseInt(r.amount,10)})),s.distanceField.forEach(r=>n.distanceField.push({distanceRange:parseInt(r.distanceRange,10),fieldType:r.fieldType})),n}}class id{static test(t){const e=t;return"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new eh,s=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let h=0;h<s.length;h++)e.info.push({face:s[h].getAttribute("face"),size:parseInt(s[h].getAttribute("size"),10)});for(let h=0;h<n.length;h++)e.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(let h=0;h<r.length;h++)e.page.push({id:parseInt(r[h].getAttribute("id"),10)||0,file:r[h].getAttribute("file")});for(let h=0;h<o.length;h++){const c=o[h];e.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)e.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<l.length;h++)e.distanceField.push({fieldType:l[h].getAttribute("fieldType"),distanceRange:parseInt(l[h].getAttribute("distanceRange"),10)});return e}}class sd{static test(t){return typeof t=="string"&&t.includes("<font>")?id.test(Q.ADAPTER.parseXML(t)):!1}static parse(t){return id.parse(Q.ADAPTER.parseXML(t))}}const zc=[vl,id,sd];function rC(i){for(let t=0;t<zc.length;t++)if(zc[t].test(i))return zc[t];return null}function oC(i,t,e,s,n,r){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=e.dropShadow?e.dropShadowDistance:0,h=e.padding||0,c=i.width/s-l-h*2,u=i.height/s-l-h*2,d=o.slice(),f=e.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let g=1;g<p;++g)f.push(g/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),e.fillGradientType===Gh.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,h,c/2,u+h);let p=0;const m=(r.fontProperties.fontSize+e.strokeThickness)/u;for(let _=0;_<n.length;_++){const y=r.lineHeight*_;for(let b=0;b<d.length;b++){let v=0;typeof f[b]=="number"?v=f[b]:v=b/d.length;const x=y/u+v*m;let E=Math.max(p,x);E=Math.min(E,1),a.addColorStop(E,d[b]),p=E}}}else{a=t.createLinearGradient(h,u/2,c+h,u/2);const p=d.length+1;let g=1;for(let m=0;m<d.length;m++){let _;typeof f[m]=="number"?_=f[m]:_=g/p,a.addColorStop(_,d[m]),g++}}return a}function aC(i,t,e,s,n,r,o){const a=e.text,l=e.fontProperties;t.translate(s,n),t.scale(r,r);const h=o.strokeThickness/2,c=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=oC(i,t,o,r,[a],e),t.strokeStyle=o.stroke,o.dropShadow){const u=o.dropShadowColor,d=o.dropShadowBlur*r,f=o.dropShadowDistance*r;t.shadowColor=Pt.shared.setValue(u).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=d,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,h,c+e.lineHeight-l.descent),o.fill&&t.fillText(a,h,c+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function wl(i){return i.codePointAt?i.codePointAt(0):i.charCodeAt(0)}function Dy(i){return Array.from?Array.from(i):i.split("")}function lC(i){typeof i=="string"&&(i=[i]);const t=[];for(let e=0,s=i.length;e<s;e++){const n=i[e];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const r=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<r)throw new Error("[BitmapFont]: Invalid character range.");for(let a=r,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...Dy(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const yi=class{constructor(i,t,e){var h;const[s]=i.info,[n]=i.common,[r]=i.page,[o]=i.distanceField,a=$s(r.file),l={};this._ownsTextures=e,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<i.page.length;c++){const{id:u,file:d}=i.page[c];l[u]=t instanceof Array?t[c]:t[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[u].baseTexture.alphaMode=Oi.NO_PREMULTIPLIED_ALPHA,l[u].baseTexture.mipmap=Qi.OFF)}for(let c=0;c<i.char.length;c++){const{id:u,page:d}=i.char[c];let{x:f,y:p,width:g,height:m,xoffset:_,yoffset:y,xadvance:b}=i.char[c];f/=a,p/=a,g/=a,m/=a,_/=a,y/=a,b/=a;const v=new bt(f+l[d].frame.x/a,p+l[d].frame.y/a,g,m);this.chars[u]={xOffset:_,yOffset:y,xAdvance:b,kerning:{},texture:new dt(l[d].baseTexture,v),page:d}}for(let c=0;c<i.kerning.length;c++){let{first:u,second:d,amount:f}=i.kerning[c];u/=a,d/=a,f/=a,this.chars[d]&&(this.chars[d].kerning[u]=f)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((h=o==null?void 0:o.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const i in this.chars)this.chars[i].texture.destroy(),this.chars[i].texture=null;for(const i in this.pageTextures)this._ownsTextures&&this.pageTextures[i].destroy(!0),this.pageTextures[i]=null;this.chars=null,this.pageTextures=null}static install(i,t,e){let s;if(i instanceof eh)s=i;else{const r=rC(i);if(!r)throw new Error("Unrecognized data format for font.");s=r.parse(i)}t instanceof dt&&(t=[t]);const n=new yi(s,t,e);return yi.available[n.font]=n,n}static uninstall(i){const t=yi.available[i];if(!t)throw new Error(`No font found named '${i}'`);t.destroy(),delete yi.available[i]}static from(i,t,e){if(!i)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:r,textureWidth:o,textureHeight:a,...l}=Object.assign({},yi.defaultOptions,e),h=lC(s),c=t instanceof Ss?t:new Ss(t),u=o,d=new eh;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};let f=0,p=0,g,m,_,y=0;const b=[];for(let x=0;x<h.length;x++){g||(g=Q.ADAPTER.createCanvas(),g.width=o,g.height=a,m=g.getContext("2d"),_=new _t(g,{resolution:r,...l}),b.push(new dt(_)),d.page.push({id:b.length-1,file:""}));const E=h[x],S=_e.measureText(E,c,!1,g),A=S.width,M=Math.ceil(S.height),I=Math.ceil((c.fontStyle==="italic"?2:1)*A);if(p>=a-M*r){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${E}')`);--x,g=null,m=null,_=null,p=0,f=0,y=0;continue}if(y=Math.max(M+S.fontProperties.descent,y),I*r+f>=u){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${E}')`);--x,p+=y*r,p=Math.ceil(p),f=0,y=0;continue}aC(g,m,S,f,p,r,c);const C=wl(S.text);d.char.push({id:C,page:b.length-1,x:f/r,y:p/r,width:I,height:M,xoffset:0,yoffset:0,xadvance:A-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),f+=(I+2*n)*r,f=Math.ceil(f)}for(let x=0,E=h.length;x<E;x++){const S=h[x];for(let A=0;A<E;A++){const M=h[A],I=m.measureText(S).width,C=m.measureText(M).width,R=m.measureText(S+M).width-(I+C);R&&d.kerning.push({first:wl(S),second:wl(M),amount:R})}}const v=new yi(d,b,!0);return yi.available[i]!==void 0&&yi.uninstall(i),yi.available[i]=v,v}};let De=yi;De.ALPHA=[["a","z"],["A","Z"]," "];De.NUMERIC=[["0","9"]];De.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];De.ASCII=[[" ","~"]];De.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:yi.ALPHANUMERIC};De.available={};var hC=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,cC=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pg=[],gg=[],mg=[],Oy=class extends li{constructor(i,t={}){super();const{align:e,tint:s,maxWidth:n,letterSpacing:r,fontName:o,fontSize:a}=Object.assign({},Oy.styleDefaults,t);if(!De.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=e,this._tintColor=new Pt(s),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=i,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=r,this._anchor=new Os(()=>{this.dirty=!0},this,0,0),this._roundPixels=Q.ROUND_PIXELS,this.dirty=!0,this._resolution=Q.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var I;const i=De.available[this._fontName],t=this.fontSize,e=t/i.size,s=new At,n=[],r=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Dy(a),h=this._maxWidth*i.size/t,c=i.distanceFieldType==="none"?pg:gg;let u=null,d=0,f=0,p=0,g=-1,m=0,_=0,y=0,b=0;for(let C=0;C<l.length;C++){const F=l[C],R=wl(F);if(/(?:\s)/.test(F)&&(g=C,m=d,b++),F==="\r"||F===`
`){r.push(d),o.push(-1),f=Math.max(f,d),++p,++_,s.x=0,s.y+=i.lineHeight,u=null,b=0;continue}const w=i.chars[R];if(!w)continue;u&&w.kerning[u]&&(s.x+=w.kerning[u]);const T=mg.pop()||{texture:dt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new At};T.texture=w.texture,T.line=p,T.charCode=R,T.position.x=Math.round(s.x+w.xOffset+this._letterSpacing/2),T.position.y=Math.round(s.y+w.yOffset),T.prevSpaces=b,n.push(T),d=T.position.x+Math.max(w.xAdvance-w.xOffset,w.texture.orig.width),s.x+=w.xAdvance+this._letterSpacing,y=Math.max(y,w.yOffset+w.texture.height),u=R,g!==-1&&h>0&&s.x>h&&(++_,br(n,1+g-_,1+C-g),C=g,g=-1,r.push(m),o.push(n.length>0?n[n.length-1].prevSpaces:0),f=Math.max(f,m),p++,s.x=0,s.y+=i.lineHeight,u=null,b=0)}const v=l[l.length-1];v!=="\r"&&v!==`
`&&(/(?:\s)/.test(v)&&(d=m),r.push(d),f=Math.max(f,d),o.push(-1));const x=[];for(let C=0;C<=p;C++){let F=0;this._align==="right"?F=f-r[C]:this._align==="center"?F=(f-r[C])/2:this._align==="justify"&&(F=o[C]<0?0:(f-r[C])/o[C]),x.push(F)}const E=n.length,S={},A=[],M=this._activePagesMeshData;c.push(...M);for(let C=0;C<E;C++){const F=n[C].texture,R=F.baseTexture.uid;if(!S[R]){let w=c.pop();if(!w){const B=new FA;let P,L;i.distanceFieldType==="none"?(P=new ug(dt.EMPTY),L=mt.NORMAL):(P=new ug(dt.EMPTY,{program:Si.from(cC,hC),uniforms:{uFWidth:0}}),L=mt.NORMAL_NPM);const k=new Qu(B,P);k.blendMode=L,w={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:k,vertices:null,uvs:null,indices:null}}w.index=0,w.indexCount=0,w.vertexCount=0,w.uvsCount=0,w.total=0;const{_textureCache:T}=this;T[R]=T[R]||new dt(F.baseTexture),w.mesh.texture=T[R],w.mesh.tint=this._tintColor.value,A.push(w),S[R]=w}S[R].total++}for(let C=0;C<M.length;C++)A.includes(M[C])||this.removeChild(M[C].mesh);for(let C=0;C<A.length;C++)A[C].mesh.parent!==this&&this.addChild(A[C].mesh);this._activePagesMeshData=A;for(const C in S){const F=S[C],R=F.total;if(!(((I=F.indices)==null?void 0:I.length)>6*R)||F.vertices.length<Qu.BATCHABLE_SIZE*2)F.vertices=new Float32Array(4*2*R),F.uvs=new Float32Array(4*2*R),F.indices=new Uint16Array(6*R);else{const w=F.total,T=F.vertices;for(let B=w*4*2;B<T.length;B++)T[B]=0}F.mesh.size=6*R}for(let C=0;C<E;C++){const F=n[C];let R=F.position.x+x[F.line]*(this._align==="justify"?F.prevSpaces:1);this._roundPixels&&(R=Math.round(R));const w=R*e,T=F.position.y*e,B=F.texture,P=S[B.baseTexture.uid],L=B.frame,k=B._uvs,O=P.index++;P.indices[O*6+0]=0+O*4,P.indices[O*6+1]=1+O*4,P.indices[O*6+2]=2+O*4,P.indices[O*6+3]=0+O*4,P.indices[O*6+4]=2+O*4,P.indices[O*6+5]=3+O*4,P.vertices[O*8+0]=w,P.vertices[O*8+1]=T,P.vertices[O*8+2]=w+L.width*e,P.vertices[O*8+3]=T,P.vertices[O*8+4]=w+L.width*e,P.vertices[O*8+5]=T+L.height*e,P.vertices[O*8+6]=w,P.vertices[O*8+7]=T+L.height*e,P.uvs[O*8+0]=k.x0,P.uvs[O*8+1]=k.y0,P.uvs[O*8+2]=k.x1,P.uvs[O*8+3]=k.y1,P.uvs[O*8+4]=k.x2,P.uvs[O*8+5]=k.y2,P.uvs[O*8+6]=k.x3,P.uvs[O*8+7]=k.y3}this._textWidth=f*e,this._textHeight=(s.y+i.lineHeight)*e;for(const C in S){const F=S[C];if(this.anchor.x!==0||this.anchor.y!==0){let B=0;const P=this._textWidth*this.anchor.x,L=this._textHeight*this.anchor.y;for(let k=0;k<F.total;k++)F.vertices[B++]-=P,F.vertices[B++]-=L,F.vertices[B++]-=P,F.vertices[B++]-=L,F.vertices[B++]-=P,F.vertices[B++]-=L,F.vertices[B++]-=P,F.vertices[B++]-=L}this._maxLineHeight=y*e;const R=F.mesh.geometry.getBuffer("aVertexPosition"),w=F.mesh.geometry.getBuffer("aTextureCoord"),T=F.mesh.geometry.getIndex();R.data=F.vertices,w.data=F.uvs,T.data=F.indices,R.update(),w.update(),T.update()}for(let C=0;C<n.length;C++)mg.push(n[C]);this._font=i,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:e,size:s}=De.available[this._fontName];if(e!=="none"){const{a:n,b:r,c:o,d:a}=this.worldTransform,l=Math.sqrt(n*n+r*r),h=Math.sqrt(o*o+a*a),c=(Math.abs(l)+Math.abs(h))/2,u=this.fontSize/s,d=i._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=c*t*u*d}super._render(i)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const i=De.available[this._fontName];if(!i)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==i&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(i){if(this.tint!==i){this._tintColor.setValue(i);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=i}}get align(){return this._align}set align(i){this._align!==i&&(this._align=i,this.dirty=!0)}get fontName(){return this._fontName}set fontName(i){if(!De.available[i])throw new Error(`Missing BitmapFont "${i}"`);this._fontName!==i&&(this._fontName=i,this.dirty=!0)}get fontSize(){return this._fontSize??De.available[this._fontName].size}set fontSize(i){this._fontSize!==i&&(this._fontSize=i,this.dirty=!0)}get anchor(){return this._anchor}set anchor(i){typeof i=="number"?this._anchor.set(i):this._anchor.copyFrom(i)}get text(){return this._text}set text(i){i=String(i??""),this._text!==i&&(this._text=i,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(i){this._maxWidth!==i&&(this._maxWidth=i,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(i){i!==this._roundPixels&&(this._roundPixels=i,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)}destroy(i){const{_textureCache:t}=this,s=De.available[this._fontName].distanceFieldType==="none"?pg:gg;s.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],s.filter(n=>t[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=dt.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(i)}};let uC=Oy;uC.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const dC=[".xml",".fnt"],fC={extension:{type:et.LoadParser,priority:is.Normal},name:"loadBitmapFont",test(i){return dC.includes(Te.extname(i).toLowerCase())},async testParse(i){return vl.test(i)||sd.test(i)},async parse(i,t,e){const s=vl.test(i)?vl.parse(i):sd.parse(i),{src:n}=t,{page:r}=s,o=[];for(let h=0;h<r.length;++h){const c=r[h].file;let u=Te.join(Te.dirname(n),c);u=Zu(u,n),o.push(u)}const a=await e.load(o),l=o.map(h=>a[h]);return De.install(s,l,!0)},async load(i,t){return(await Q.ADAPTER.fetch(i)).text()},unload(i){i.destroy()}};ft.add(fC);const ar=class extends Ss{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(i){return new ar(Object.keys(ar.defaultOptions).reduce((t,e)=>({...t,[e]:i[e]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(i=>{URL.revokeObjectURL(i.src),i.refs--,i.refs===0&&(i.fontFace&&document.fonts.delete(i.fontFace),delete ar.availableFonts[i.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(i,t={}){const{availableFonts:e}=ar;if(e[i]){const s=e[i];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Q.ADAPTER.fetch(i).then(s=>s.blob()).then(async s=>new Promise((n,r)=>{const o=URL.createObjectURL(s),a=new FileReader;a.onload=()=>n([o,a.result]),a.onerror=r,a.readAsDataURL(s)})).then(async([s,n])=>{const r=Object.assign({family:Te.basename(i,Te.extname(i)),weight:"normal",style:"normal",src:s,dataSrc:n,refs:1,originalUrl:i,fontFace:null},t);e[i]=r,this._fonts.push(r),this.styleID++;const o=new FontFace(r.family,`url(${r.src})`,{weight:r.weight,style:r.style});r.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...i){const t=i.filter(e=>!this._overrides.includes(e));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...i){const t=i.filter(e=>this._overrides.includes(e));t.length>0&&(this._overrides=this._overrides.filter(e=>!t.includes(e)),this.styleID++)}toCSS(i){return[`transform: scale(${i})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((i,t)=>`${i}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(i){this._stylesheet!==i&&(this._stylesheet=i,this.styleID++)}normalizeColor(i){return Array.isArray(i)&&(i=mS(i)),typeof i=="number"?gS(i):i}dropShadowToCSS(){let i=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,e=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);i.startsWith("#")&&t<1&&(i+=(t*255|0).toString(16).padStart(2,"0"));const n=`${e}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${i}`:`text-shadow: ${n} ${i}`}reset(){Object.assign(this,ar.defaultOptions)}onBeforeDraw(){const{fontsDirty:i}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&i?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:i}=Q.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(i)}set fillGradientStops(i){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(i){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(i){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(i){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(i){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(i){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(i){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let Ao=ar;Ao.availableFonts={};Ao.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const lr=class extends Yr{constructor(i="",t={}){super(dt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const e=new Image,s=dt.from(e,{scaleMode:Q.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new bt,s.trim=new bt,this.texture=s;const n="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xhtml",o=document.createElementNS(n,"svg"),a=document.createElementNS(n,"foreignObject"),l=document.createElementNS(r,"div"),h=document.createElementNS(r,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=lr.defaultMaxWidth,this.maxHeight=lr.defaultMaxHeight,this._domElement=l,this._styleElement=h,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(h),this._foreignObject.appendChild(l),this._image=e,this._loadImage=new Image,this._autoResolution=lr.defaultAutoResolution,this._resolution=lr.defaultResolution??Q.RESOLUTION,this.text=i,this.style=t}measureText(i){var a,l;const{text:t,style:e,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},i);Object.assign(this._domElement,{innerHTML:t,style:e.toCSS(s)}),this._styleElement.textContent=e.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const r=Math.min(this.maxWidth,Math.ceil(n.width)),o=Math.min(this.maxHeight,Math.ceil(n.height));return this._svgRoot.setAttribute("width",r.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),e!==this._style&&(Object.assign(this._domElement,{style:(a=this._style)==null?void 0:a.toCSS(s)}),this._styleElement.textContent=(l=this._style)==null?void 0:l.toGlobalCSS()),{width:r+e.padding*2,height:o+e.padding*2}}async updateText(i=!0){const{style:t,_image:e,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&i)return;const{width:n,height:r}=this.measureText();e.width=s.width=Math.ceil(Math.max(1,n)),e.height=s.height=Math.ceil(Math.max(1,r)),this._loading||(this._loading=!0,await new Promise(o=>{s.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,e.src=s.src,s.onload=null,s.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:i,texture:t,_image:e,resolution:s}=this,{padding:n}=i,{baseTexture:r}=t;t.trim.width=t._frame.width=e.width/s,t.trim.height=t._frame.height=e.height/s,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),r.setRealSize(e.width,e.height,s),this.dirty=!1}_render(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),super._render(i)}_renderCanvas(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(i)}getLocalBounds(i){return this.updateText(!0),super.getLocalBounds(i)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(i){var e,s,n,r,o;typeof i=="boolean"&&(i={children:i}),i=Object.assign({},lr.defaultDestroyOptions,i),super.destroy(i);const t=null;this.ownsStyle&&((e=this._style)==null||e.cleanFonts()),this._style=t,(s=this._svgRoot)==null||s.remove(),this._svgRoot=t,(n=this._domElement)==null||n.remove(),this._domElement=t,(r=this._foreignObject)==null||r.remove(),this._foreignObject=t,(o=this._styleElement)==null||o.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(i){this.updateText(!0);const t=Ds(this.scale.x)||1;this.scale.x=t*i/this._image.width/this.resolution,this._width=i}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(i){this.updateText(!0);const t=Ds(this.scale.y)||1;this.scale.y=t*i/this._image.height/this.resolution,this._height=i}get style(){return this._style}set style(i){this._style!==i&&(i=i||{},i instanceof Ao?(this.ownsStyle=!1,this._style=i):i instanceof Ss?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Ao.from(i)):(this.ownsStyle=!0,this._style=new Ao(i)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(i){i=String(i===""||i===null||i===void 0?" ":i),i=this.sanitiseText(i),this._text!==i&&(this._text=i,this.dirty=!0)}get resolution(){return this._resolution}set resolution(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)}sanitiseText(i){return i.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let Hh=lr;Hh.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};Hh.defaultMaxWidth=2024;Hh.defaultMaxHeight=2024;Hh.defaultAutoResolution=!0;function ps(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ky(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ze={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Or={duration:.5,overwrite:!1,delay:0},nf,Ae,ne,ri=1e8,Dt=1/ri,nd=Math.PI*2,pC=nd/4,gC=0,Fy=Math.sqrt,mC=Math.cos,_C=Math.sin,ge=function(t){return typeof t=="string"},qt=function(t){return typeof t=="function"},Es=function(t){return typeof t=="number"},rf=function(t){return typeof t>"u"},ts=function(t){return typeof t=="object"},Fe=function(t){return t!==!1},of=function(){return typeof window<"u"},Xa=function(t){return qt(t)||ge(t)},By=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ce=Array.isArray,rd=/(?:-?\.?\d|\.)+/gi,Ly=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,dr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Vc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ny=/[+-]=-?[.\d]+/,Uy=/[^,'"\[\]\s]+/gi,yC=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,zt,ei,od,af,Je={},ih={},Gy,Hy=function(t){return(ih=Ln(t,Je))&&ze},lf=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},sh=function(t,e){return!e&&console.warn(t)},zy=function(t,e){return t&&(Je[t]=e)&&ih&&(ih[t]=e)||Je},$o=function(){return 0},bC={suppressEvents:!0,isStart:!0,kill:!1},Sl={suppressEvents:!0,kill:!1},xC={suppressEvents:!0},hf={},zs=[],ad={},Vy,Xe={},Wc={},_g=30,El=[],cf="",uf=function(t){var e=t[0],s,n;if(ts(e)||qt(e)||(t=[t]),!(s=(e._gsap||{}).harness)){for(n=El.length;n--&&!El[n].targetTest(e););s=El[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new fb(t[n],s)))||t.splice(n,1);return t},Cn=function(t){return t._gsap||uf(oi(t))[0]._gsap},Wy=function(t,e,s){return(s=t[e])&&qt(s)?t[e]():rf(s)&&t.getAttribute&&t.getAttribute(e)||s},Be=function(t,e){return(t=t.split(",")).forEach(e)||t},ee=function(t){return Math.round(t*1e5)/1e5||0},ye=function(t){return Math.round(t*1e7)/1e7||0},wr=function(t,e){var s=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),s==="+"?t+n:s==="-"?t-n:s==="*"?t*n:t/n},vC=function(t,e){for(var s=e.length,n=0;t.indexOf(e[n])<0&&++n<s;);return n<s},nh=function(){var t=zs.length,e=zs.slice(0),s,n;for(ad={},zs.length=0,s=0;s<t;s++)n=e[s],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},jy=function(t,e,s,n){zs.length&&!Ae&&nh(),t.render(e,s,n||Ae&&e<0&&(t._initted||t._startAt)),zs.length&&!Ae&&nh()},Xy=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Uy).length<2?e:ge(t)?t.trim():t},Yy=function(t){return t},hi=function(t,e){for(var s in e)s in t||(t[s]=e[s]);return t},wC=function(t){return function(e,s){for(var n in s)n in e||n==="duration"&&t||n==="ease"||(e[n]=s[n])}},Ln=function(t,e){for(var s in e)t[s]=e[s];return t},yg=function i(t,e){for(var s in e)s!=="__proto__"&&s!=="constructor"&&s!=="prototype"&&(t[s]=ts(e[s])?i(t[s]||(t[s]={}),e[s]):e[s]);return t},rh=function(t,e){var s={},n;for(n in t)n in e||(s[n]=t[n]);return s},Co=function(t){var e=t.parent||zt,s=t.keyframes?wC(Ce(t.keyframes)):hi;if(Fe(t.inherit))for(;e;)s(t,e.vars.defaults),e=e.parent||e._dp;return t},SC=function(t,e){for(var s=t.length,n=s===e.length;n&&s--&&t[s]===e[s];);return s<0},$y=function(t,e,s,n,r){s===void 0&&(s="_first"),n===void 0&&(n="_last");var o=t[n],a;if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[s],t[s]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},zh=function(t,e,s,n){s===void 0&&(s="_first"),n===void 0&&(n="_last");var r=e._prev,o=e._next;r?r._next=o:t[s]===e&&(t[s]=o),o?o._prev=r:t[n]===e&&(t[n]=r),e._next=e._prev=e.parent=null},Zs=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Mn=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var s=t;s;)s._dirty=1,s=s.parent;return t},EC=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},ld=function(t,e,s,n){return t._startAt&&(Ae?t._startAt.revert(Sl):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},TC=function i(t){return!t||t._ts&&i(t.parent)},bg=function(t){return t._repeat?kr(t._tTime,t=t.duration()+t._rDelay)*t:0},kr=function(t,e){var s=Math.floor(t/=e);return t&&s===t?s-1:s},oh=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Vh=function(t){return t._end=ye(t._start+(t._tDur/Math.abs(t._ts||t._rts||Dt)||0))},Wh=function(t,e){var s=t._dp;return s&&s.smoothChildTiming&&t._ts&&(t._start=ye(s._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Vh(t),s._dirty||Mn(s,t)),t},Ky=function(t,e){var s;if((e._time||e._initted&&!e._dur)&&(s=oh(t.rawTime(),e),(!e._dur||ga(0,e.totalDuration(),s)-e._tTime>Dt)&&e.render(s,!0)),Mn(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(s=t;s._dp;)s.rawTime()>=0&&s.totalTime(s._tTime),s=s._dp;t._zTime=-Dt}},Hi=function(t,e,s,n){return e.parent&&Zs(e),e._start=ye((Es(s)?s:s||t!==zt?ti(t,s,e):t._time)+e._delay),e._end=ye(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),$y(t,e,"_first","_last",t._sort?"_start":0),hd(e)||(t._recent=e),n||Ky(t,e),t._ts<0&&Wh(t,t._tTime),t},qy=function(t,e){return(Je.ScrollTrigger||lf("scrollTrigger",e))&&Je.ScrollTrigger.create(e,t)},Zy=function(t,e,s,n,r){if(ff(t,e,r),!t._initted)return 1;if(!s&&t._pt&&!Ae&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Vy!==$e.frame)return zs.push(t),t._lazy=[r,n],1},AC=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},hd=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},CC=function(t,e,s,n){var r=t.ratio,o=e<0||!e&&(!t._start&&AC(t)&&!(!t._initted&&hd(t))||(t._ts<0||t._dp._ts<0)&&!hd(t))?0:1,a=t._rDelay,l=0,h,c,u;if(a&&t._repeat&&(l=ga(0,t._tDur,e),c=kr(l,a),t._yoyo&&c&1&&(o=1-o),c!==kr(t._tTime,a)&&(r=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==r||Ae||n||t._zTime===Dt||!e&&t._zTime){if(!t._initted&&Zy(t,e,n,s,l))return;for(u=t._zTime,t._zTime=e||(s?Dt:0),s||(s=e&&!u),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,h=t._pt;h;)h.r(o,h.d),h=h._next;e<0&&ld(t,e,s,!0),t._onUpdate&&!s&&ai(t,"onUpdate"),l&&t._repeat&&!s&&t.parent&&ai(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Zs(t,1),!s&&!Ae&&(ai(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},MC=function(t,e,s){var n;if(s>e)for(n=t._first;n&&n._start<=s;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=s;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},Fr=function(t,e,s,n){var r=t._repeat,o=ye(e)||0,a=t._tTime/t._tDur;return a&&!n&&(t._time*=o/t._dur),t._dur=o,t._tDur=r?r<0?1e10:ye(o*(r+1)+t._rDelay*r):o,a>0&&!n&&Wh(t,t._tTime=t._tDur*a),t.parent&&Vh(t),s||Mn(t.parent,t),t},xg=function(t){return t instanceof Oe?Mn(t):Fr(t,t._dur)},IC={_start:0,endTime:$o,totalDuration:$o},ti=function i(t,e,s){var n=t.labels,r=t._recent||IC,o=t.duration()>=ri?r.endTime(!1):t._dur,a,l,h;return ge(e)&&(isNaN(e)||e in n)?(l=e.charAt(0),h=e.substr(-1)==="%",a=e.indexOf("="),l==="<"||l===">"?(a>=0&&(e=e.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(e.substr(1))||0)*(h?(a<0?r:s).totalDuration()/100:1)):a<0?(e in n||(n[e]=o),n[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),h&&s&&(l=l/100*(Ce(s)?s[0]:s).totalDuration()),a>1?i(t,e.substr(0,a-1),s)+l:o+l)):e==null?o:+e},Mo=function(t,e,s){var n=Es(e[1]),r=(n?2:1)+(t<2?0:1),o=e[r],a,l;if(n&&(o.duration=e[1]),o.parent=s,t){for(a=o,l=s;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Fe(l.vars.inherit)&&l.parent;o.immediateRender=Fe(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[r-1]}return new ae(e[0],o,e[r+1])},sn=function(t,e){return t||t===0?e(t):e},ga=function(t,e,s){return s<t?t:s>e?e:s},Se=function(t,e){return!ge(t)||!(e=yC.exec(t))?"":e[1]},PC=function(t,e,s){return sn(s,function(n){return ga(t,e,n)})},cd=[].slice,Jy=function(t,e){return t&&ts(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&ts(t[0]))&&!t.nodeType&&t!==ei},RC=function(t,e,s){return s===void 0&&(s=[]),t.forEach(function(n){var r;return ge(n)&&!e||Jy(n,1)?(r=s).push.apply(r,oi(n)):s.push(n)})||s},oi=function(t,e,s){return ne&&!e&&ne.selector?ne.selector(t):ge(t)&&!s&&(od||!Br())?cd.call((e||af).querySelectorAll(t),0):Ce(t)?RC(t,s):Jy(t)?cd.call(t,0):t?[t]:[]},ud=function(t){return t=oi(t)[0]||sh("Invalid scope")||{},function(e){var s=t.current||t.nativeElement||t;return oi(e,s.querySelectorAll?s:s===t?sh("Invalid scope")||af.createElement("div"):t)}},Qy=function(t){return t.sort(function(){return .5-Math.random()})},tb=function(t){if(qt(t))return t;var e=ts(t)?t:{each:t},s=In(e.ease),n=e.from||0,r=parseFloat(e.base)||0,o={},a=n>0&&n<1,l=isNaN(n)||a,h=e.axis,c=n,u=n;return ge(n)?c=u={center:.5,edges:.5,end:1}[n]||0:!a&&l&&(c=n[0],u=n[1]),function(d,f,p){var g=(p||e).length,m=o[g],_,y,b,v,x,E,S,A,M;if(!m){if(M=e.grid==="auto"?0:(e.grid||[1,ri])[1],!M){for(S=-ri;S<(S=p[M++].getBoundingClientRect().left)&&M<g;);M--}for(m=o[g]=[],_=l?Math.min(M,g)*c-.5:n%M,y=M===ri?0:l?g*u/M-.5:n/M|0,S=0,A=ri,E=0;E<g;E++)b=E%M-_,v=y-(E/M|0),m[E]=x=h?Math.abs(h==="y"?v:b):Fy(b*b+v*v),x>S&&(S=x),x<A&&(A=x);n==="random"&&Qy(m),m.max=S-A,m.min=A,m.v=g=(parseFloat(e.amount)||parseFloat(e.each)*(M>g?g-1:h?h==="y"?g/M:M:Math.max(M,g/M))||0)*(n==="edges"?-1:1),m.b=g<0?r-g:r,m.u=Se(e.amount||e.each)||0,s=s&&g<0?cb(s):s}return g=(m[d]-m.min)/m.max||0,ye(m.b+(s?s(g):g)*m.v)+m.u}},dd=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(s){var n=ye(Math.round(parseFloat(s)/t)*t*e);return(n-n%1)/e+(Es(s)?0:Se(s))}},eb=function(t,e){var s=Ce(t),n,r;return!s&&ts(t)&&(n=s=t.radius||ri,t.values?(t=oi(t.values),(r=!Es(t[0]))&&(n*=n)):t=dd(t.increment)),sn(e,s?qt(t)?function(o){return r=t(o),Math.abs(r-o)<=n?r:o}:function(o){for(var a=parseFloat(r?o.x:o),l=parseFloat(r?o.y:0),h=ri,c=0,u=t.length,d,f;u--;)r?(d=t[u].x-a,f=t[u].y-l,d=d*d+f*f):d=Math.abs(t[u]-a),d<h&&(h=d,c=u);return c=!n||h<=n?t[c]:o,r||c===o||Es(o)?c:c+Se(o)}:dd(t))},ib=function(t,e,s,n){return sn(Ce(t)?!e:s===!0?!!(s=0):!n,function(){return Ce(t)?t[~~(Math.random()*t.length)]:(s=s||1e-5)&&(n=s<1?Math.pow(10,(s+"").length-2):1)&&Math.floor(Math.round((t-s/2+Math.random()*(e-t+s*.99))/s)*s*n)/n})},DC=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return function(n){return e.reduce(function(r,o){return o(r)},n)}},OC=function(t,e){return function(s){return t(parseFloat(s))+(e||Se(s))}},kC=function(t,e,s){return nb(t,e,0,1,s)},sb=function(t,e,s){return sn(s,function(n){return t[~~e(n)]})},FC=function i(t,e,s){var n=e-t;return Ce(t)?sb(t,i(0,t.length),e):sn(s,function(r){return(n+(r-t)%n)%n+t})},BC=function i(t,e,s){var n=e-t,r=n*2;return Ce(t)?sb(t,i(0,t.length-1),e):sn(s,function(o){return o=(r+(o-t)%r)%r||0,t+(o>n?r-o:o)})},Ko=function(t){for(var e=0,s="",n,r,o,a;~(n=t.indexOf("random(",e));)o=t.indexOf(")",n),a=t.charAt(n+7)==="[",r=t.substr(n+7,o-n-7).match(a?Uy:rd),s+=t.substr(e,n-e)+ib(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),e=o+1;return s+t.substr(e,t.length-e)},nb=function(t,e,s,n,r){var o=e-t,a=n-s;return sn(r,function(l){return s+((l-t)/o*a||0)})},LC=function i(t,e,s,n){var r=isNaN(t+e)?0:function(f){return(1-f)*t+f*e};if(!r){var o=ge(t),a={},l,h,c,u,d;if(s===!0&&(n=1)&&(s=null),o)t={p:t},e={p:e};else if(Ce(t)&&!Ce(e)){for(c=[],u=t.length,d=u-2,h=1;h<u;h++)c.push(i(t[h-1],t[h]));u--,r=function(p){p*=u;var g=Math.min(d,~~p);return c[g](p-g)},s=e}else n||(t=Ln(Ce(t)?[]:{},t));if(!c){for(l in e)df.call(a,t,l,"get",e[l]);r=function(p){return mf(p,a)||(o?t.p:t)}}}return sn(s,r)},vg=function(t,e,s){var n=t.labels,r=ri,o,a,l;for(o in n)a=n[o]-e,a<0==!!s&&a&&r>(a=Math.abs(a))&&(l=o,r=a);return l},ai=function(t,e,s){var n=t.vars,r=n[e],o=ne,a=t._ctx,l,h,c;if(r)return l=n[e+"Params"],h=n.callbackScope||t,s&&zs.length&&nh(),a&&(ne=a),c=l?r.apply(h,l):r.call(h),ne=o,c},mo=function(t){return Zs(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Ae),t.progress()<1&&ai(t,"onInterrupt"),t},fr,rb=[],ob=function(t){if(!of()){rb.push(t);return}t=!t.name&&t.default||t;var e=t.name,s=qt(t),n=e&&!s&&t.init?function(){this._props=[]}:t,r={init:$o,render:mf,add:df,kill:QC,modifier:JC,rawVars:0},o={targetTest:0,get:0,getSetter:gf,aliases:{},register:0};if(Br(),t!==n){if(Xe[e])return;hi(n,hi(rh(t,r),o)),Ln(n.prototype,Ln(r,rh(t,o))),Xe[n.prop=e]=n,t.targetTest&&(El.push(n),hf[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}zy(e,n),t.register&&t.register(ze,n,Le)},Rt=255,_o={aqua:[0,Rt,Rt],lime:[0,Rt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Rt],navy:[0,0,128],white:[Rt,Rt,Rt],olive:[128,128,0],yellow:[Rt,Rt,0],orange:[Rt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Rt,0,0],pink:[Rt,192,203],cyan:[0,Rt,Rt],transparent:[Rt,Rt,Rt,0]},jc=function(t,e,s){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(s-e)*t*6:t<.5?s:t*3<2?e+(s-e)*(2/3-t)*6:e)*Rt+.5|0},ab=function(t,e,s){var n=t?Es(t)?[t>>16,t>>8&Rt,t&Rt]:0:_o.black,r,o,a,l,h,c,u,d,f,p;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),_o[t])n=_o[t];else if(t.charAt(0)==="#"){if(t.length<6&&(r=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+r+r+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&Rt,n&Rt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&Rt,t&Rt]}else if(t.substr(0,3)==="hsl"){if(n=p=t.match(rd),!e)l=+n[0]%360/360,h=+n[1]/100,c=+n[2]/100,o=c<=.5?c*(h+1):c+h-c*h,r=c*2-o,n.length>3&&(n[3]*=1),n[0]=jc(l+1/3,r,o),n[1]=jc(l,r,o),n[2]=jc(l-1/3,r,o);else if(~t.indexOf("="))return n=t.match(Ly),s&&n.length<4&&(n[3]=1),n}else n=t.match(rd)||_o.transparent;n=n.map(Number)}return e&&!p&&(r=n[0]/Rt,o=n[1]/Rt,a=n[2]/Rt,u=Math.max(r,o,a),d=Math.min(r,o,a),c=(u+d)/2,u===d?l=h=0:(f=u-d,h=c>.5?f/(2-u-d):f/(u+d),l=u===r?(o-a)/f+(o<a?6:0):u===o?(a-r)/f+2:(r-o)/f+4,l*=60),n[0]=~~(l+.5),n[1]=~~(h*100+.5),n[2]=~~(c*100+.5)),s&&n.length<4&&(n[3]=1),n},lb=function(t){var e=[],s=[],n=-1;return t.split(Vs).forEach(function(r){var o=r.match(dr)||[];e.push.apply(e,o),s.push(n+=o.length+1)}),e.c=s,e},wg=function(t,e,s){var n="",r=(t+n).match(Vs),o=e?"hsla(":"rgba(",a=0,l,h,c,u;if(!r)return t;if(r=r.map(function(d){return(d=ab(d,e,1))&&o+(e?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),s&&(c=lb(t),l=s.c,l.join(n)!==c.c.join(n)))for(h=t.replace(Vs,"1").split(dr),u=h.length-1;a<u;a++)n+=h[a]+(~l.indexOf(a)?r.shift()||o+"0,0,0,0)":(c.length?c:r.length?r:s).shift());if(!h)for(h=t.split(Vs),u=h.length-1;a<u;a++)n+=h[a]+r[a];return n+h[u]},Vs=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in _o)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),NC=/hsl[a]?\(/,hb=function(t){var e=t.join(" "),s;if(Vs.lastIndex=0,Vs.test(e))return s=NC.test(e),t[1]=wg(t[1],s),t[0]=wg(t[0],s,lb(t[1])),!0},qo,$e=function(){var i=Date.now,t=500,e=33,s=i(),n=s,r=1e3/240,o=r,a=[],l,h,c,u,d,f,p=function g(m){var _=i()-n,y=m===!0,b,v,x,E;if(_>t&&(s+=_-e),n+=_,x=n-s,b=x-o,(b>0||y)&&(E=++u.frame,d=x-u.time*1e3,u.time=x=x/1e3,o+=b+(b>=r?4:r-b),v=1),y||(l=h(g)),v)for(f=0;f<a.length;f++)a[f](x,d,E,m)};return u={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(m){return d/(1e3/(m||60))},wake:function(){Gy&&(!od&&of()&&(ei=od=window,af=ei.document||{},Je.gsap=ze,(ei.gsapVersions||(ei.gsapVersions=[])).push(ze.version),Hy(ih||ei.GreenSockGlobals||!ei.gsap&&ei||{}),c=ei.requestAnimationFrame,rb.forEach(ob)),l&&u.sleep(),h=c||function(m){return setTimeout(m,o-u.time*1e3+1|0)},qo=1,p(2))},sleep:function(){(c?ei.cancelAnimationFrame:clearTimeout)(l),qo=0,h=$o},lagSmoothing:function(m,_){t=m||1/0,e=Math.min(_||33,t)},fps:function(m){r=1e3/(m||240),o=u.time*1e3+r},add:function(m,_,y){var b=_?function(v,x,E,S){m(v,x,E,S),u.remove(b)}:m;return u.remove(m),a[y?"unshift":"push"](b),Br(),b},remove:function(m,_){~(_=a.indexOf(m))&&a.splice(_,1)&&f>=_&&f--},_listeners:a},u}(),Br=function(){return!qo&&$e.wake()},St={},UC=/^[\d.\-M][\d.\-,\s]/,GC=/["']/g,HC=function(t){for(var e={},s=t.substr(1,t.length-3).split(":"),n=s[0],r=1,o=s.length,a,l,h;r<o;r++)l=s[r],a=r!==o-1?l.lastIndexOf(","):l.length,h=l.substr(0,a),e[n]=isNaN(h)?h.replace(GC,"").trim():+h,n=l.substr(a+1).trim();return e},zC=function(t){var e=t.indexOf("(")+1,s=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<s?t.indexOf(")",s+1):s)},VC=function(t){var e=(t+"").split("("),s=St[e[0]];return s&&e.length>1&&s.config?s.config.apply(null,~t.indexOf("{")?[HC(e[1])]:zC(t).split(",").map(Xy)):St._CE&&UC.test(t)?St._CE("",t):s},cb=function(t){return function(e){return 1-t(1-e)}},ub=function i(t,e){for(var s=t._first,n;s;)s instanceof Oe?i(s,e):s.vars.yoyoEase&&(!s._yoyo||!s._repeat)&&s._yoyo!==e&&(s.timeline?i(s.timeline,e):(n=s._ease,s._ease=s._yEase,s._yEase=n,s._yoyo=e)),s=s._next},In=function(t,e){return t&&(qt(t)?t:St[t]||VC(t))||e},Wn=function(t,e,s,n){s===void 0&&(s=function(l){return 1-e(1-l)}),n===void 0&&(n=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var r={easeIn:e,easeOut:s,easeInOut:n},o;return Be(t,function(a){St[a]=Je[a]=r,St[o=a.toLowerCase()]=s;for(var l in r)St[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=St[a+"."+l]=r[l]}),r},db=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Xc=function i(t,e,s){var n=e>=1?e:1,r=(s||(t?.3:.45))/(e<1?e:1),o=r/nd*(Math.asin(1/n)||0),a=function(c){return c===1?1:n*Math.pow(2,-10*c)*_C((c-o)*r)+1},l=t==="out"?a:t==="in"?function(h){return 1-a(1-h)}:db(a);return r=nd/r,l.config=function(h,c){return i(t,h,c)},l},Yc=function i(t,e){e===void 0&&(e=1.70158);var s=function(o){return o?--o*o*((e+1)*o+e)+1:0},n=t==="out"?s:t==="in"?function(r){return 1-s(1-r)}:db(s);return n.config=function(r){return i(t,r)},n};Be("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;Wn(i+",Power"+(e-1),t?function(s){return Math.pow(s,e)}:function(s){return s},function(s){return 1-Math.pow(1-s,e)},function(s){return s<.5?Math.pow(s*2,e)/2:1-Math.pow((1-s)*2,e)/2})});St.Linear.easeNone=St.none=St.Linear.easeIn;Wn("Elastic",Xc("in"),Xc("out"),Xc());(function(i,t){var e=1/t,s=2*e,n=2.5*e,r=function(a){return a<e?i*a*a:a<s?i*Math.pow(a-1.5/t,2)+.75:a<n?i*(a-=2.25/t)*a+.9375:i*Math.pow(a-2.625/t,2)+.984375};Wn("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);Wn("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});Wn("Circ",function(i){return-(Fy(1-i*i)-1)});Wn("Sine",function(i){return i===1?1:-mC(i*pC)+1});Wn("Back",Yc("in"),Yc("out"),Yc());St.SteppedEase=St.steps=Je.SteppedEase={config:function(t,e){t===void 0&&(t=1);var s=1/t,n=t+(e?0:1),r=e?1:0,o=1-Dt;return function(a){return((n*ga(0,o,a)|0)+r)*s}}};Or.ease=St["quad.out"];Be("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return cf+=i+","+i+"Params,"});var fb=function(t,e){this.id=gC++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Wy,this.set=e?e.getSetter:gf},Lr=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Fr(this,+e.duration,1,1),this.data=e.data,ne&&(this._ctx=ne,ne.data.push(this)),qo||$e.wake()}var t=i.prototype;return t.delay=function(s){return s||s===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+s-this._delay),this._delay=s,this):this._delay},t.duration=function(s){return arguments.length?this.totalDuration(this._repeat>0?s+(s+this._rDelay)*this._repeat:s):this.totalDuration()&&this._dur},t.totalDuration=function(s){return arguments.length?(this._dirty=0,Fr(this,this._repeat<0?s:(s-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(s,n){if(Br(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Wh(this,s),!r._dp||r.parent||Ky(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&s<this._tDur||this._ts<0&&s>0||!this._tDur&&!s)&&Hi(this._dp,this,this._start-this._delay)}return(this._tTime!==s||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Dt||!s&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=s),jy(this,s,n)),this},t.time=function(s,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),s+bg(this))%(this._dur+this._rDelay)||(s?this._dur:0),n):this._time},t.totalProgress=function(s,n){return arguments.length?this.totalTime(this.totalDuration()*s,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(s,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-s:s)+bg(this),n):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(s,n){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(s-1)*r,n):this._repeat?kr(this._tTime,r)+1:1},t.timeScale=function(s){if(!arguments.length)return this._rts===-Dt?0:this._rts;if(this._rts===s)return this;var n=this.parent&&this._ts?oh(this.parent._time,this):this._tTime;return this._rts=+s||0,this._ts=this._ps||s===-Dt?0:this._rts,this.totalTime(ga(-Math.abs(this._delay),this._tDur,n),!0),Vh(this),EC(this)},t.paused=function(s){return arguments.length?(this._ps!==s&&(this._ps=s,s?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Br(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Dt&&(this._tTime-=Dt)))),this):this._ps},t.startTime=function(s){if(arguments.length){this._start=s;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&Hi(n,this,s-this._delay),this}return this._start},t.endTime=function(s){return this._start+(Fe(s)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(s){var n=this.parent||this._dp;return n?s&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?oh(n.rawTime(s),this):this._tTime:this._tTime},t.revert=function(s){s===void 0&&(s=xC);var n=Ae;return Ae=s,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(s),this.totalTime(-.01,s.suppressEvents)),this.data!=="nested"&&s.kill!==!1&&this.kill(),Ae=n,this},t.globalTime=function(s){for(var n=this,r=arguments.length?s:n.rawTime();n;)r=n._start+r/(n._ts||1),n=n._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(s):r},t.repeat=function(s){return arguments.length?(this._repeat=s===1/0?-2:s,xg(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(s){if(arguments.length){var n=this._time;return this._rDelay=s,xg(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(s){return arguments.length?(this._yoyo=s,this):this._yoyo},t.seek=function(s,n){return this.totalTime(ti(this,s),Fe(n))},t.restart=function(s,n){return this.play().totalTime(s?-this._delay:0,Fe(n))},t.play=function(s,n){return s!=null&&this.seek(s,n),this.reversed(!1).paused(!1)},t.reverse=function(s,n){return s!=null&&this.seek(s||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(s,n){return s!=null&&this.seek(s,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(s){return arguments.length?(!!s!==this.reversed()&&this.timeScale(-this._rts||(s?-Dt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Dt,this},t.isActive=function(){var s=this.parent||this._dp,n=this._start,r;return!!(!s||this._ts&&this._initted&&s.isActive()&&(r=s.rawTime(!0))>=n&&r<this.endTime(!0)-Dt)},t.eventCallback=function(s,n,r){var o=this.vars;return arguments.length>1?(n?(o[s]=n,r&&(o[s+"Params"]=r),s==="onUpdate"&&(this._onUpdate=n)):delete o[s],this):o[s]},t.then=function(s){var n=this;return new Promise(function(r){var o=qt(s)?s:Yy,a=function(){var h=n.then;n.then=null,qt(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=h),r(o),n.then=h};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?a():n._prom=a})},t.kill=function(){mo(this)},i}();hi(Lr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Dt,_prom:0,_ps:!1,_rts:1});var Oe=function(i){ky(t,i);function t(s,n){var r;return s===void 0&&(s={}),r=i.call(this,s)||this,r.labels={},r.smoothChildTiming=!!s.smoothChildTiming,r.autoRemoveChildren=!!s.autoRemoveChildren,r._sort=Fe(s.sortChildren),zt&&Hi(s.parent||zt,ps(r),n),s.reversed&&r.reverse(),s.paused&&r.paused(!0),s.scrollTrigger&&qy(ps(r),s.scrollTrigger),r}var e=t.prototype;return e.to=function(n,r,o){return Mo(0,arguments,this),this},e.from=function(n,r,o){return Mo(1,arguments,this),this},e.fromTo=function(n,r,o,a){return Mo(2,arguments,this),this},e.set=function(n,r,o){return r.duration=0,r.parent=this,Co(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new ae(n,r,ti(this,o),1),this},e.call=function(n,r,o){return Hi(this,ae.delayedCall(0,n,r),o)},e.staggerTo=function(n,r,o,a,l,h,c){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=h,o.onCompleteParams=c,o.parent=this,new ae(n,o,ti(this,l)),this},e.staggerFrom=function(n,r,o,a,l,h,c){return o.runBackwards=1,Co(o).immediateRender=Fe(o.immediateRender),this.staggerTo(n,r,o,a,l,h,c)},e.staggerFromTo=function(n,r,o,a,l,h,c,u){return a.startAt=o,Co(a).immediateRender=Fe(a.immediateRender),this.staggerTo(n,r,a,l,h,c,u)},e.render=function(n,r,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,h=this._dur,c=n<=0?0:ye(n),u=this._zTime<0!=n<0&&(this._initted||!h),d,f,p,g,m,_,y,b,v,x,E,S;if(this!==zt&&c>l&&n>=0&&(c=l),c!==this._tTime||o||u){if(a!==this._time&&h&&(c+=this._time-a,n+=this._time-a),d=c,v=this._start,b=this._ts,_=!b,u&&(h||(a=this._zTime),(n||!r)&&(this._zTime=n)),this._repeat){if(E=this._yoyo,m=h+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(m*100+n,r,o);if(d=ye(c%m),c===l?(g=this._repeat,d=h):(g=~~(c/m),g&&g===c/m&&(d=h,g--),d>h&&(d=h)),x=kr(this._tTime,m),!a&&this._tTime&&x!==g&&this._tTime-x*m-this._dur<=0&&(x=g),E&&g&1&&(d=h-d,S=1),g!==x&&!this._lock){var A=E&&x&1,M=A===(E&&g&1);if(g<x&&(A=!A),a=A?0:h,this._lock=1,this.render(a||(S?0:ye(g*m)),r,!h)._lock=0,this._tTime=c,!r&&this.parent&&ai(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,l=this._tDur,M&&(this._lock=2,a=A?h:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;ub(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=MC(this,ye(a),ye(d)),y&&(c-=d-(d=y._start))),this._tTime=c,this._time=d,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,a=0),!a&&d&&!r&&!g&&(ai(this,"onStart"),this._tTime!==c))return this;if(d>=a&&n>=0)for(f=this._first;f;){if(p=f._next,(f._act||d>=f._start)&&f._ts&&y!==f){if(f.parent!==this)return this.render(n,r,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,r,o),d!==this._time||!this._ts&&!_){y=0,p&&(c+=this._zTime=-Dt);break}}f=p}else{f=this._last;for(var I=n<0?n:d;f;){if(p=f._prev,(f._act||I<=f._end)&&f._ts&&y!==f){if(f.parent!==this)return this.render(n,r,o);if(f.render(f._ts>0?(I-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(I-f._start)*f._ts,r,o||Ae&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!_){y=0,p&&(c+=this._zTime=I?-Dt:Dt);break}}f=p}}if(y&&!r&&(this.pause(),y.render(d>=a?0:-Dt)._zTime=d>=a?1:-1,this._ts))return this._start=v,Vh(this),this.render(n,r,o);this._onUpdate&&!r&&ai(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(v===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((n||!h)&&(c===l&&this._ts>0||!c&&this._ts<0)&&Zs(this,1),!r&&!(n<0&&!a)&&(c||a||!l)&&(ai(this,c===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(n,r){var o=this;if(Es(r)||(r=ti(this,r,n)),!(n instanceof Lr)){if(Ce(n))return n.forEach(function(a){return o.add(a,r)}),this;if(ge(n))return this.addLabel(n,r);if(qt(n))n=ae.delayedCall(0,n);else return this}return this!==n?Hi(this,n,r):this},e.getChildren=function(n,r,o,a){n===void 0&&(n=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=-ri);for(var l=[],h=this._first;h;)h._start>=a&&(h instanceof ae?r&&l.push(h):(o&&l.push(h),n&&l.push.apply(l,h.getChildren(!0,r,o)))),h=h._next;return l},e.getById=function(n){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===n)return r[o]},e.remove=function(n){return ge(n)?this.removeLabel(n):qt(n)?this.killTweensOf(n):(zh(this,n),n===this._recent&&(this._recent=this._last),Mn(this))},e.totalTime=function(n,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ye($e.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),i.prototype.totalTime.call(this,n,r),this._forcing=0,this):this._tTime},e.addLabel=function(n,r){return this.labels[n]=ti(this,r),this},e.removeLabel=function(n){return delete this.labels[n],this},e.addPause=function(n,r,o){var a=ae.delayedCall(0,r||$o,o);return a.data="isPause",this._hasPause=1,Hi(this,a,ti(this,n))},e.removePause=function(n){var r=this._first;for(n=ti(this,n);r;)r._start===n&&r.data==="isPause"&&Zs(r),r=r._next},e.killTweensOf=function(n,r,o){for(var a=this.getTweensOf(n,o),l=a.length;l--;)ks!==a[l]&&a[l].kill(n,r);return this},e.getTweensOf=function(n,r){for(var o=[],a=oi(n),l=this._first,h=Es(r),c;l;)l instanceof ae?vC(l._targets,a)&&(h?(!ks||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&o.push(l):(c=l.getTweensOf(a,r)).length&&o.push.apply(o,c),l=l._next;return o},e.tweenTo=function(n,r){r=r||{};var o=this,a=ti(o,n),l=r,h=l.startAt,c=l.onStart,u=l.onStartParams,d=l.immediateRender,f,p=ae.to(o,hi({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale())||Dt,onStart:function(){if(o.pause(),!f){var m=r.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale());p._dur!==m&&Fr(p,m,0,1).render(p._time,!0,!0),f=1}c&&c.apply(p,u||[])}},r));return d?p.render(0):p},e.tweenFromTo=function(n,r,o){return this.tweenTo(r,hi({startAt:{time:ti(this,n)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(n){return n===void 0&&(n=this._time),vg(this,ti(this,n))},e.previousLabel=function(n){return n===void 0&&(n=this._time),vg(this,ti(this,n),1)},e.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Dt)},e.shiftChildren=function(n,r,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,h;a;)a._start>=o&&(a._start+=n,a._end+=n),a=a._next;if(r)for(h in l)l[h]>=o&&(l[h]+=n);return Mn(this)},e.invalidate=function(n){var r=this._first;for(this._lock=0;r;)r.invalidate(n),r=r._next;return i.prototype.invalidate.call(this,n)},e.clear=function(n){n===void 0&&(n=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Mn(this)},e.totalDuration=function(n){var r=0,o=this,a=o._last,l=ri,h,c,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(u=o.parent;a;)h=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Hi(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(r-=c,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>r&&a._ts&&(r=a._end),a=h;Fr(o,o===zt&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(n){if(zt._ts&&(jy(zt,oh(n,zt)),Vy=$e.frame),$e.frame>=_g){_g+=Ze.autoSleep||120;var r=zt._first;if((!r||!r._ts)&&Ze.autoSleep&&$e._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||$e.sleep()}}},t}(Lr);hi(Oe.prototype,{_lock:0,_hasPause:0,_forcing:0});var WC=function(t,e,s,n,r,o,a){var l=new Le(this._pt,t,e,0,1,bb,null,r),h=0,c=0,u,d,f,p,g,m,_,y;for(l.b=s,l.e=n,s+="",n+="",(_=~n.indexOf("random("))&&(n=Ko(n)),o&&(y=[s,n],o(y,t,e),s=y[0],n=y[1]),d=s.match(Vc)||[];u=Vc.exec(n);)p=u[0],g=n.substring(h,u.index),f?f=(f+1)%5:g.substr(-5)==="rgba("&&(f=1),p!==d[c++]&&(m=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:g||c===1?g:",",s:m,c:p.charAt(1)==="="?wr(m,p)-m:parseFloat(p)-m,m:f&&f<4?Math.round:0},h=Vc.lastIndex);return l.c=h<n.length?n.substring(h,n.length):"",l.fp=a,(Ny.test(n)||_)&&(l.e=0),this._pt=l,l},df=function(t,e,s,n,r,o,a,l,h,c){qt(n)&&(n=n(r||0,t,o));var u=t[e],d=s!=="get"?s:qt(u)?h?t[e.indexOf("set")||!qt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():u,f=qt(u)?h?KC:_b:pf,p;if(ge(n)&&(~n.indexOf("random(")&&(n=Ko(n)),n.charAt(1)==="="&&(p=wr(d,n)+(Se(d)||0),(p||p===0)&&(n=p))),!c||d!==n||fd)return!isNaN(d*n)&&n!==""?(p=new Le(this._pt,t,e,+d||0,n-(d||0),typeof u=="boolean"?ZC:yb,0,f),h&&(p.fp=h),a&&p.modifier(a,this,t),this._pt=p):(!u&&!(e in t)&&lf(e,n),WC.call(this,t,e,d,n,f,l||Ze.stringFilter,h))},jC=function(t,e,s,n,r){if(qt(t)&&(t=Io(t,r,e,s,n)),!ts(t)||t.style&&t.nodeType||Ce(t)||By(t))return ge(t)?Io(t,r,e,s,n):t;var o={},a;for(a in t)o[a]=Io(t[a],r,e,s,n);return o},pb=function(t,e,s,n,r,o){var a,l,h,c;if(Xe[t]&&(a=new Xe[t]).init(r,a.rawVars?e[t]:jC(e[t],n,r,o,s),s,n,o)!==!1&&(s._pt=l=new Le(s._pt,r,t,0,1,a.render,a,0,a.priority),s!==fr))for(h=s._ptLookup[s._targets.indexOf(r)],c=a._props.length;c--;)h[a._props[c]]=l;return a},ks,fd,ff=function i(t,e,s){var n=t.vars,r=n.ease,o=n.startAt,a=n.immediateRender,l=n.lazy,h=n.onUpdate,c=n.onUpdateParams,u=n.callbackScope,d=n.runBackwards,f=n.yoyoEase,p=n.keyframes,g=n.autoRevert,m=t._dur,_=t._startAt,y=t._targets,b=t.parent,v=b&&b.data==="nested"?b.vars.targets:y,x=t._overwrite==="auto"&&!nf,E=t.timeline,S,A,M,I,C,F,R,w,T,B,P,L,k;if(E&&(!p||!r)&&(r="none"),t._ease=In(r,Or.ease),t._yEase=f?cb(In(f===!0?r:f,Or.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!E&&!!n.runBackwards,!E||p&&!n.stagger){if(w=y[0]?Cn(y[0]).harness:0,L=w&&n[w.prop],S=rh(n,hf),_&&(_._zTime<0&&_.progress(1),e<0&&d&&a&&!g?_.render(-1,!0):_.revert(d&&m?Sl:bC),_._lazy=0),o){if(Zs(t._startAt=ae.set(y,hi({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!_&&Fe(l),startAt:null,delay:0,onUpdate:h,onUpdateParams:c,callbackScope:u,stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Ae||!a&&!g)&&t._startAt.revert(Sl),a&&m&&e<=0&&s<=0){e&&(t._zTime=e);return}}else if(d&&m&&!_){if(e&&(a=!1),M=hi({overwrite:!1,data:"isFromStart",lazy:a&&!_&&Fe(l),immediateRender:a,stagger:0,parent:b},S),L&&(M[w.prop]=L),Zs(t._startAt=ae.set(y,M)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Ae?t._startAt.revert(Sl):t._startAt.render(-1,!0)),t._zTime=e,!a)i(t._startAt,Dt,Dt);else if(!e)return}for(t._pt=t._ptCache=0,l=m&&Fe(l)||l&&!m,A=0;A<y.length;A++){if(C=y[A],R=C._gsap||uf(y)[A]._gsap,t._ptLookup[A]=B={},ad[R.id]&&zs.length&&nh(),P=v===y?A:v.indexOf(C),w&&(T=new w).init(C,L||S,t,P,v)!==!1&&(t._pt=I=new Le(t._pt,C,T.name,0,1,T.render,T,0,T.priority),T._props.forEach(function(O){B[O]=I}),T.priority&&(F=1)),!w||L)for(M in S)Xe[M]&&(T=pb(M,S,t,P,C,v))?T.priority&&(F=1):B[M]=I=df.call(t,C,M,"get",S[M],P,v,0,n.stringFilter);t._op&&t._op[A]&&t.kill(C,t._op[A]),x&&t._pt&&(ks=t,zt.killTweensOf(C,B,t.globalTime(e)),k=!t.parent,ks=0),t._pt&&l&&(ad[R.id]=1)}F&&xb(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!k,p&&e<=0&&E.render(ri,!0,!0)},XC=function(t,e,s,n,r,o,a){var l=(t._pt&&t._ptCache||(t._ptCache={}))[e],h,c,u,d;if(!l)for(l=t._ptCache[e]=[],u=t._ptLookup,d=t._targets.length;d--;){if(h=u[d][e],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return fd=1,t.vars[e]="+=0",ff(t,a),fd=0,1;l.push(h)}for(d=l.length;d--;)c=l[d],h=c._pt||c,h.s=(n||n===0)&&!r?n:h.s+(n||0)+o*h.c,h.c=s-h.s,c.e&&(c.e=ee(s)+Se(c.e)),c.b&&(c.b=h.s+Se(c.b))},YC=function(t,e){var s=t[0]?Cn(t[0]).harness:0,n=s&&s.aliases,r,o,a,l;if(!n)return e;r=Ln({},e);for(o in n)if(o in r)for(l=n[o].split(","),a=l.length;a--;)r[l[a]]=r[o];return r},$C=function(t,e,s,n){var r=e.ease||n||"power1.inOut",o,a;if(Ce(e))a=s[t]||(s[t]=[]),e.forEach(function(l,h){return a.push({t:h/(e.length-1)*100,v:l,e:r})});else for(o in e)a=s[o]||(s[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:r})},Io=function(t,e,s,n,r){return qt(t)?t.call(e,s,n,r):ge(t)&&~t.indexOf("random(")?Ko(t):t},gb=cf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",mb={};Be(gb+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return mb[i]=1});var ae=function(i){ky(t,i);function t(s,n,r,o){var a;typeof n=="number"&&(r.duration=n,n=r,r=null),a=i.call(this,o?n:Co(n))||this;var l=a.vars,h=l.duration,c=l.delay,u=l.immediateRender,d=l.stagger,f=l.overwrite,p=l.keyframes,g=l.defaults,m=l.scrollTrigger,_=l.yoyoEase,y=n.parent||zt,b=(Ce(s)||By(s)?Es(s[0]):"length"in n)?[s]:oi(s),v,x,E,S,A,M,I,C;if(a._targets=b.length?uf(b):sh("GSAP target "+s+" not found. https://greensock.com",!Ze.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||d||Xa(h)||Xa(c)){if(n=a.vars,v=a.timeline=new Oe({data:"nested",defaults:g||{},targets:y&&y.data==="nested"?y.vars.targets:b}),v.kill(),v.parent=v._dp=ps(a),v._start=0,d||Xa(h)||Xa(c)){if(S=b.length,I=d&&tb(d),ts(d))for(A in d)~gb.indexOf(A)&&(C||(C={}),C[A]=d[A]);for(x=0;x<S;x++)E=rh(n,mb),E.stagger=0,_&&(E.yoyoEase=_),C&&Ln(E,C),M=b[x],E.duration=+Io(h,ps(a),x,M,b),E.delay=(+Io(c,ps(a),x,M,b)||0)-a._delay,!d&&S===1&&E.delay&&(a._delay=c=E.delay,a._start+=c,E.delay=0),v.to(M,E,I?I(x,M,b):0),v._ease=St.none;v.duration()?h=c=0:a.timeline=0}else if(p){Co(hi(v.vars.defaults,{ease:"none"})),v._ease=In(p.ease||n.ease||"none");var F=0,R,w,T;if(Ce(p))p.forEach(function(B){return v.to(b,B,">")}),v.duration();else{E={};for(A in p)A==="ease"||A==="easeEach"||$C(A,p[A],E,p.easeEach);for(A in E)for(R=E[A].sort(function(B,P){return B.t-P.t}),F=0,x=0;x<R.length;x++)w=R[x],T={ease:w.e,duration:(w.t-(x?R[x-1].t:0))/100*h},T[A]=w.v,v.to(b,T,F),F+=T.duration;v.duration()<h&&v.to({},{duration:h-v.duration()})}}h||a.duration(h=v.duration())}else a.timeline=0;return f===!0&&!nf&&(ks=ps(a),zt.killTweensOf(b),ks=0),Hi(y,ps(a),r),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(u||!h&&!p&&a._start===ye(y._time)&&Fe(u)&&TC(ps(a))&&y.data!=="nested")&&(a._tTime=-Dt,a.render(Math.max(0,-c)||0)),m&&qy(ps(a),m),a}var e=t.prototype;return e.render=function(n,r,o){var a=this._time,l=this._tDur,h=this._dur,c=n<0,u=n>l-Dt&&!c?l:n<Dt?0:n,d,f,p,g,m,_,y,b,v;if(!h)CC(this,n,r,o);else if(u!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=u,b=this.timeline,this._repeat){if(g=h+this._rDelay,this._repeat<-1&&c)return this.totalTime(g*100+n,r,o);if(d=ye(u%g),u===l?(p=this._repeat,d=h):(p=~~(u/g),p&&p===u/g&&(d=h,p--),d>h&&(d=h)),_=this._yoyo&&p&1,_&&(v=this._yEase,d=h-d),m=kr(this._tTime,g),d===a&&!o&&this._initted)return this._tTime=u,this;p!==m&&(b&&this._yEase&&ub(b,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=o=1,this.render(ye(g*p),!0).invalidate()._lock=0))}if(!this._initted){if(Zy(this,c?n:d,o,r,u))return this._tTime=0,this;if(a!==this._time)return this;if(h!==this._dur)return this.render(n,r,o)}if(this._tTime=u,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(v||this._ease)(d/h),this._from&&(this.ratio=y=1-y),d&&!a&&!r&&!p&&(ai(this,"onStart"),this._tTime!==u))return this;for(f=this._pt;f;)f.r(y,f.d),f=f._next;b&&b.render(n<0?n:!d&&_?-Dt:b._dur*b._ease(d/this._dur),r,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!r&&(c&&ld(this,n,r,o),ai(this,"onUpdate")),this._repeat&&p!==m&&this.vars.onRepeat&&!r&&this.parent&&ai(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&ld(this,n,!0,!0),(n||!h)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&Zs(this,1),!r&&!(c&&!a)&&(u||a||_)&&(ai(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),i.prototype.invalidate.call(this,n)},e.resetTo=function(n,r,o,a){qo||$e.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||ff(this,l),h=this._ease(l/this._dur),XC(this,n,r,o,a,h,l)?this.resetTo(n,r,o,a):(Wh(this,0),this.parent||$y(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(n,r){if(r===void 0&&(r="all"),!n&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?mo(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,r,ks&&ks.vars.overwrite!==!0)._first||mo(this),this.parent&&o!==this.timeline.totalDuration()&&Fr(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=n?oi(n):a,h=this._ptLookup,c=this._pt,u,d,f,p,g,m,_;if((!r||r==="all")&&SC(a,l))return r==="all"&&(this._pt=0),mo(this);for(u=this._op=this._op||[],r!=="all"&&(ge(r)&&(g={},Be(r,function(y){return g[y]=1}),r=g),r=YC(a,r)),_=a.length;_--;)if(~l.indexOf(a[_])){d=h[_],r==="all"?(u[_]=r,p=d,f={}):(f=u[_]=u[_]||{},p=r);for(g in p)m=d&&d[g],m&&((!("kill"in m.d)||m.d.kill(g)===!0)&&zh(this,m,"_pt"),delete d[g]),f!=="all"&&(f[g]=1)}return this._initted&&!this._pt&&c&&mo(this),this},t.to=function(n,r){return new t(n,r,arguments[2])},t.from=function(n,r){return Mo(1,arguments)},t.delayedCall=function(n,r,o,a){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(n,r,o){return Mo(2,arguments)},t.set=function(n,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(n,r)},t.killTweensOf=function(n,r,o){return zt.killTweensOf(n,r,o)},t}(Lr);hi(ae.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Be("staggerTo,staggerFrom,staggerFromTo",function(i){ae[i]=function(){var t=new Oe,e=cd.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var pf=function(t,e,s){return t[e]=s},_b=function(t,e,s){return t[e](s)},KC=function(t,e,s,n){return t[e](n.fp,s)},qC=function(t,e,s){return t.setAttribute(e,s)},gf=function(t,e){return qt(t[e])?_b:rf(t[e])&&t.setAttribute?qC:pf},yb=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},ZC=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},bb=function(t,e){var s=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;s;)n=s.p+(s.m?s.m(s.s+s.c*t):Math.round((s.s+s.c*t)*1e4)/1e4)+n,s=s._next;n+=e.c}e.set(e.t,e.p,n,e)},mf=function(t,e){for(var s=e._pt;s;)s.r(t,s.d),s=s._next},JC=function(t,e,s,n){for(var r=this._pt,o;r;)o=r._next,r.p===n&&r.modifier(t,e,s),r=o},QC=function(t){for(var e=this._pt,s,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?zh(this,e,"_pt"):e.dep||(s=1),e=n;return!s},t2=function(t,e,s,n){n.mSet(t,e,n.m.call(n.tween,s,n.mt),n)},xb=function(t){for(var e=t._pt,s,n,r,o;e;){for(s=e._next,n=r;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:o)?e._prev._next=e:r=e,(e._next=n)?n._prev=e:o=e,e=s}t._pt=r},Le=function(){function i(e,s,n,r,o,a,l,h,c){this.t=s,this.s=r,this.c=o,this.p=n,this.r=a||yb,this.d=l||this,this.set=h||pf,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(s,n,r){this.mSet=this.mSet||this.set,this.set=t2,this.m=s,this.mt=r,this.tween=n},i}();Be(cf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return hf[i]=1});Je.TweenMax=Je.TweenLite=ae;Je.TimelineLite=Je.TimelineMax=Oe;zt=new Oe({sortChildren:!1,defaults:Or,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ze.stringFilter=hb;var Nr=[],Tl={},e2=[],Sg=0,$c=function(t){return(Tl[t]||e2).map(function(e){return e()})},pd=function(){var t=Date.now(),e=[];t-Sg>2&&($c("matchMediaInit"),Nr.forEach(function(s){var n=s.queries,r=s.conditions,o,a,l,h;for(a in n)o=ei.matchMedia(n[a]).matches,o&&(l=1),o!==r[a]&&(r[a]=o,h=1);h&&(s.revert(),l&&e.push(s))}),$c("matchMediaRevert"),e.forEach(function(s){return s.onMatch(s)}),Sg=t,$c("matchMedia"))},vb=function(){function i(e,s){this.selector=s&&ud(s),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=i.prototype;return t.add=function(s,n,r){qt(s)&&(r=n,n=s,s=qt);var o=this,a=function(){var h=ne,c=o.selector,u;return h&&h!==o&&h.data.push(o),r&&(o.selector=ud(r)),ne=o,u=n.apply(o,arguments),qt(u)&&o._r.push(u),ne=h,o.selector=c,o.isReverted=!1,u};return o.last=a,s===qt?a(o):s?o[s]=a:a},t.ignore=function(s){var n=ne;ne=null,s(this),ne=n},t.getTweens=function(){var s=[];return this.data.forEach(function(n){return n instanceof i?s.push.apply(s,n.getTweens()):n instanceof ae&&!(n.parent&&n.parent.data==="nested")&&s.push(n)}),s},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(s,n){var r=this;if(s){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(h){return o.splice(o.indexOf(h),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,h){return h.g-l.g||-1}).forEach(function(l){return l.t.revert(s)}),this.data.forEach(function(l){return!(l instanceof Lr)&&l.revert&&l.revert(s)}),this._r.forEach(function(l){return l(s,r)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),n){var a=Nr.indexOf(this);~a&&Nr.splice(a,1)}},t.revert=function(s){this.kill(s||{})},i}(),i2=function(){function i(e){this.contexts=[],this.scope=e}var t=i.prototype;return t.add=function(s,n,r){ts(s)||(s={matches:s});var o=new vb(0,r||this.scope),a=o.conditions={},l,h,c;this.contexts.push(o),n=o.add("onMatch",n),o.queries=s;for(h in s)h==="all"?c=1:(l=ei.matchMedia(s[h]),l&&(Nr.indexOf(o)<0&&Nr.push(o),(a[h]=l.matches)&&(c=1),l.addListener?l.addListener(pd):l.addEventListener("change",pd)));return c&&n(o),this},t.revert=function(s){this.kill(s||{})},t.kill=function(s){this.contexts.forEach(function(n){return n.kill(s,!0)})},i}(),ah={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];e.forEach(function(n){return ob(n)})},timeline:function(t){return new Oe(t)},getTweensOf:function(t,e){return zt.getTweensOf(t,e)},getProperty:function(t,e,s,n){ge(t)&&(t=oi(t)[0]);var r=Cn(t||{}).get,o=s?Yy:Xy;return s==="native"&&(s=""),t&&(e?o((Xe[e]&&Xe[e].get||r)(t,e,s,n)):function(a,l,h){return o((Xe[a]&&Xe[a].get||r)(t,a,l,h))})},quickSetter:function(t,e,s){if(t=oi(t),t.length>1){var n=t.map(function(c){return ze.quickSetter(c,e,s)}),r=n.length;return function(c){for(var u=r;u--;)n[u](c)}}t=t[0]||{};var o=Xe[e],a=Cn(t),l=a.harness&&(a.harness.aliases||{})[e]||e,h=o?function(c){var u=new o;fr._pt=0,u.init(t,s?c+s:c,fr,0,[t]),u.render(1,u),fr._pt&&mf(1,fr)}:a.set(t,l);return o?h:function(c){return h(t,l,s?c+s:c,a,1)}},quickTo:function(t,e,s){var n,r=ze.to(t,Ln((n={},n[e]="+=0.1",n.paused=!0,n),s||{})),o=function(l,h,c){return r.resetTo(e,l,h,c)};return o.tween=r,o},isTweening:function(t){return zt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=In(t.ease,Or.ease)),yg(Or,t||{})},config:function(t){return yg(Ze,t||{})},registerEffect:function(t){var e=t.name,s=t.effect,n=t.plugins,r=t.defaults,o=t.extendTimeline;(n||"").split(",").forEach(function(a){return a&&!Xe[a]&&!Je[a]&&sh(e+" effect requires "+a+" plugin.")}),Wc[e]=function(a,l,h){return s(oi(a),hi(l||{},r),h)},o&&(Oe.prototype[e]=function(a,l,h){return this.add(Wc[e](a,ts(l)?l:(h=l)&&{},this),h)})},registerEase:function(t,e){St[t]=In(e)},parseEase:function(t,e){return arguments.length?In(t,e):St},getById:function(t){return zt.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var s=new Oe(t),n,r;for(s.smoothChildTiming=Fe(t.smoothChildTiming),zt.remove(s),s._dp=0,s._time=s._tTime=zt._time,n=zt._first;n;)r=n._next,(e||!(!n._dur&&n instanceof ae&&n.vars.onComplete===n._targets[0]))&&Hi(s,n,n._start-n._delay),n=r;return Hi(zt,s,0),s},context:function(t,e){return t?new vb(t,e):ne},matchMedia:function(t){return new i2(t)},matchMediaRefresh:function(){return Nr.forEach(function(t){var e=t.conditions,s,n;for(n in e)e[n]&&(e[n]=!1,s=1);s&&t.revert()})||pd()},addEventListener:function(t,e){var s=Tl[t]||(Tl[t]=[]);~s.indexOf(e)||s.push(e)},removeEventListener:function(t,e){var s=Tl[t],n=s&&s.indexOf(e);n>=0&&s.splice(n,1)},utils:{wrap:FC,wrapYoyo:BC,distribute:tb,random:ib,snap:eb,normalize:kC,getUnit:Se,clamp:PC,splitColor:ab,toArray:oi,selector:ud,mapRange:nb,pipe:DC,unitize:OC,interpolate:LC,shuffle:Qy},install:Hy,effects:Wc,ticker:$e,updateRoot:Oe.updateRoot,plugins:Xe,globalTimeline:zt,core:{PropTween:Le,globals:zy,Tween:ae,Timeline:Oe,Animation:Lr,getCache:Cn,_removeLinkedListItem:zh,reverting:function(){return Ae},context:function(t){return t&&ne&&(ne.data.push(t),t._ctx=ne),ne},suppressOverwrites:function(t){return nf=t}}};Be("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return ah[i]=ae[i]});$e.add(Oe.updateRoot);fr=ah.to({},{duration:0});var s2=function(t,e){for(var s=t._pt;s&&s.p!==e&&s.op!==e&&s.fp!==e;)s=s._next;return s},n2=function(t,e){var s=t._targets,n,r,o;for(n in e)for(r=s.length;r--;)o=t._ptLookup[r][n],o&&(o=o.d)&&(o._pt&&(o=s2(o,n)),o&&o.modifier&&o.modifier(e[n],t,s[r],n))},Kc=function(t,e){return{name:t,rawVars:1,init:function(n,r,o){o._onInit=function(a){var l,h;if(ge(r)&&(l={},Be(r,function(c){return l[c]=1}),r=l),e){l={};for(h in r)l[h]=e(r[h]);r=l}n2(a,r)}}}},ze=ah.registerPlugin({name:"attr",init:function(t,e,s,n,r){var o,a,l;this.tween=s;for(o in e)l=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(l||0)+"",e[o],n,r,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var s=e._pt;s;)Ae?s.set(s.t,s.p,s.b,s):s.r(t,s.d),s=s._next}},{name:"endArray",init:function(t,e){for(var s=e.length;s--;)this.add(t,s,t[s]||0,e[s],0,0,0,0,0,1)}},Kc("roundProps",dd),Kc("modifiers"),Kc("snap",eb))||ah;ae.version=Oe.version=ze.version="3.11.5";Gy=1;of()&&Br();St.Power0;St.Power1;St.Power2;St.Power3;St.Power4;St.Linear;St.Quad;St.Cubic;St.Quart;St.Quint;St.Strong;St.Elastic;St.Back;St.SteppedEase;St.Bounce;St.Sine;St.Expo;St.Circ;/*!
 * CSSPlugin 3.11.5
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Eg,Fs,Sr,_f,En,Tg,yf,r2=function(){return typeof window<"u"},Ts={},bn=180/Math.PI,Er=Math.PI/180,tr=Math.atan2,Ag=1e8,bf=/([A-Z])/g,o2=/(left|right|width|margin|padding|x)/i,a2=/[\s,\(]\S/,ji={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},gd=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},l2=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},h2=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},c2=function(t,e){var s=e.s+e.c*t;e.set(e.t,e.p,~~(s+(s<0?-.5:.5))+e.u,e)},wb=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Sb=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},u2=function(t,e,s){return t.style[e]=s},d2=function(t,e,s){return t.style.setProperty(e,s)},f2=function(t,e,s){return t._gsap[e]=s},p2=function(t,e,s){return t._gsap.scaleX=t._gsap.scaleY=s},g2=function(t,e,s,n,r){var o=t._gsap;o.scaleX=o.scaleY=s,o.renderTransform(r,o)},m2=function(t,e,s,n,r){var o=t._gsap;o[e]=s,o.renderTransform(r,o)},Xt="transform",Mi=Xt+"Origin",_2=function i(t,e){var s=this,n=this.target,r=n.style;if(t in Ts){if(this.tfm=this.tfm||{},t!=="transform")t=ji[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return s.tfm[o]=gs(n,o)}):this.tfm[t]=n._gsap.x?n._gsap[t]:gs(n,t);else return ji.transform.split(",").forEach(function(o){return i.call(s,o,e)});if(this.props.indexOf(Xt)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Mi,e,"")),t=Xt}(r||e)&&this.props.push(t,e,r[t])},Eb=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},y2=function(){var t=this.props,e=this.target,s=e.style,n=e._gsap,r,o;for(r=0;r<t.length;r+=3)t[r+1]?e[t[r]]=t[r+2]:t[r+2]?s[t[r]]=t[r+2]:s.removeProperty(t[r].substr(0,2)==="--"?t[r]:t[r].replace(bf,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),r=yf(),(!r||!r.isStart)&&!s[Xt]&&(Eb(s),n.uncache=1)}},Tb=function(t,e){var s={target:t,props:[],revert:y2,save:_2};return t._gsap||ze.core.getCache(t),e&&e.split(",").forEach(function(n){return s.save(n)}),s},Ab,md=function(t,e){var s=Fs.createElementNS?Fs.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Fs.createElement(t);return s.style?s:Fs.createElement(t)},Ki=function i(t,e,s){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(bf,"-$1").toLowerCase())||n.getPropertyValue(e)||!s&&i(t,Ur(e)||e,1)||""},Cg="O,Moz,ms,Ms,Webkit".split(","),Ur=function(t,e,s){var n=e||En,r=n.style,o=5;if(t in r&&!s)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(Cg[o]+t in r););return o<0?null:(o===3?"ms":o>=0?Cg[o]:"")+t},_d=function(){r2()&&window.document&&(Eg=window,Fs=Eg.document,Sr=Fs.documentElement,En=md("div")||{style:{}},md("div"),Xt=Ur(Xt),Mi=Xt+"Origin",En.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ab=!!Ur("perspective"),yf=ze.core.reverting,_f=1)},qc=function i(t){var e=md("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,n=this.nextSibling,r=this.style.cssText,o;if(Sr.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return s&&(n?s.insertBefore(this,n):s.appendChild(this)),Sr.removeChild(e),this.style.cssText=r,o},Mg=function(t,e){for(var s=e.length;s--;)if(t.hasAttribute(e[s]))return t.getAttribute(e[s])},Cb=function(t){var e;try{e=t.getBBox()}catch{e=qc.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===qc||(e=qc.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+Mg(t,["x","cx","x1"])||0,y:+Mg(t,["y","cy","y1"])||0,width:0,height:0}:e},Mb=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Cb(t))},Zo=function(t,e){if(e){var s=t.style;e in Ts&&e!==Mi&&(e=Xt),s.removeProperty?((e.substr(0,2)==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),s.removeProperty(e.replace(bf,"-$1").toLowerCase())):s.removeAttribute(e)}},Bs=function(t,e,s,n,r,o){var a=new Le(t._pt,e,s,0,1,o?Sb:wb);return t._pt=a,a.b=n,a.e=r,t._props.push(s),a},Ig={deg:1,rad:1,turn:1},b2={grid:1,flex:1},Js=function i(t,e,s,n){var r=parseFloat(s)||0,o=(s+"").trim().substr((r+"").length)||"px",a=En.style,l=o2.test(e),h=t.tagName.toLowerCase()==="svg",c=(h?"client":"offset")+(l?"Width":"Height"),u=100,d=n==="px",f=n==="%",p,g,m,_;return n===o||!r||Ig[n]||Ig[o]?r:(o!=="px"&&!d&&(r=i(t,e,s,"px")),_=t.getCTM&&Mb(t),(f||o==="%")&&(Ts[e]||~e.indexOf("adius"))?(p=_?t.getBBox()[l?"width":"height"]:t[c],ee(f?r/p*u:r/100*p)):(a[l?"width":"height"]=u+(d?o:n),g=~e.indexOf("adius")||n==="em"&&t.appendChild&&!h?t:t.parentNode,_&&(g=(t.ownerSVGElement||{}).parentNode),(!g||g===Fs||!g.appendChild)&&(g=Fs.body),m=g._gsap,m&&f&&m.width&&l&&m.time===$e.time&&!m.uncache?ee(r/m.width*u):((f||o==="%")&&!b2[Ki(g,"display")]&&(a.position=Ki(t,"position")),g===t&&(a.position="static"),g.appendChild(En),p=En[c],g.removeChild(En),a.position="absolute",l&&f&&(m=Cn(g),m.time=$e.time,m.width=g[c]),ee(d?p*r/u:p&&r?u/p*r:0))))},gs=function(t,e,s,n){var r;return _f||_d(),e in ji&&e!=="transform"&&(e=ji[e],~e.indexOf(",")&&(e=e.split(",")[0])),Ts[e]&&e!=="transform"?(r=Qo(t,n),r=e!=="transformOrigin"?r[e]:r.svg?r.origin:hh(Ki(t,Mi))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||r==="auto"||n||~(r+"").indexOf("calc("))&&(r=lh[e]&&lh[e](t,e,s)||Ki(t,e)||Wy(t,e)||(e==="opacity"?1:0))),s&&!~(r+"").trim().indexOf(" ")?Js(t,e,r,s)+s:r},x2=function(t,e,s,n){if(!s||s==="none"){var r=Ur(e,t,1),o=r&&Ki(t,r,1);o&&o!==s?(e=r,s=o):e==="borderColor"&&(s=Ki(t,"borderTopColor"))}var a=new Le(this._pt,t.style,e,0,1,bb),l=0,h=0,c,u,d,f,p,g,m,_,y,b,v,x;if(a.b=s,a.e=n,s+="",n+="",n==="auto"&&(t.style[e]=n,n=Ki(t,e)||n,t.style[e]=s),c=[s,n],hb(c),s=c[0],n=c[1],d=s.match(dr)||[],x=n.match(dr)||[],x.length){for(;u=dr.exec(n);)m=u[0],y=n.substring(l,u.index),p?p=(p+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(p=1),m!==(g=d[h++]||"")&&(f=parseFloat(g)||0,v=g.substr((f+"").length),m.charAt(1)==="="&&(m=wr(f,m)+v),_=parseFloat(m),b=m.substr((_+"").length),l=dr.lastIndex-b.length,b||(b=b||Ze.units[e]||v,l===n.length&&(n+=b,a.e+=b)),v!==b&&(f=Js(t,e,g,b)||0),a._pt={_next:a._pt,p:y||h===1?y:",",s:f,c:_-f,m:p&&p<4||e==="zIndex"?Math.round:0});a.c=l<n.length?n.substring(l,n.length):""}else a.r=e==="display"&&n==="none"?Sb:wb;return Ny.test(n)&&(a.e=0),this._pt=a,a},Pg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},v2=function(t){var e=t.split(" "),s=e[0],n=e[1]||"50%";return(s==="top"||s==="bottom"||n==="left"||n==="right")&&(t=s,s=n,n=t),e[0]=Pg[s]||s,e[1]=Pg[n]||n,e.join(" ")},w2=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var s=e.t,n=s.style,r=e.u,o=s._gsap,a,l,h;if(r==="all"||r===!0)n.cssText="",l=1;else for(r=r.split(","),h=r.length;--h>-1;)a=r[h],Ts[a]&&(l=1,a=a==="transformOrigin"?Mi:Xt),Zo(s,a);l&&(Zo(s,Xt),o&&(o.svg&&s.removeAttribute("transform"),Qo(s,1),o.uncache=1,Eb(n)))}},lh={clearProps:function(t,e,s,n,r){if(r.data!=="isFromStart"){var o=t._pt=new Le(t._pt,e,s,0,0,w2);return o.u=n,o.pr=-10,o.tween=r,t._props.push(s),1}}},Jo=[1,0,0,1,0,0],Ib={},Pb=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Rg=function(t){var e=Ki(t,Xt);return Pb(e)?Jo:e.substr(7).match(Ly).map(ee)},xf=function(t,e){var s=t._gsap||Cn(t),n=t.style,r=Rg(t),o,a,l,h;return s.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?Jo:r):(r===Jo&&!t.offsetParent&&t!==Sr&&!s.svg&&(l=n.display,n.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(h=1,a=t.nextElementSibling,Sr.appendChild(t)),r=Rg(t),l?n.display=l:Zo(t,"display"),h&&(a?o.insertBefore(t,a):o?o.appendChild(t):Sr.removeChild(t))),e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},yd=function(t,e,s,n,r,o){var a=t._gsap,l=r||xf(t,!0),h=a.xOrigin||0,c=a.yOrigin||0,u=a.xOffset||0,d=a.yOffset||0,f=l[0],p=l[1],g=l[2],m=l[3],_=l[4],y=l[5],b=e.split(" "),v=parseFloat(b[0])||0,x=parseFloat(b[1])||0,E,S,A,M;s?l!==Jo&&(S=f*m-p*g)&&(A=v*(m/S)+x*(-g/S)+(g*y-m*_)/S,M=v*(-p/S)+x*(f/S)-(f*y-p*_)/S,v=A,x=M):(E=Cb(t),v=E.x+(~b[0].indexOf("%")?v/100*E.width:v),x=E.y+(~(b[1]||b[0]).indexOf("%")?x/100*E.height:x)),n||n!==!1&&a.smooth?(_=v-h,y=x-c,a.xOffset=u+(_*f+y*g)-_,a.yOffset=d+(_*p+y*m)-y):a.xOffset=a.yOffset=0,a.xOrigin=v,a.yOrigin=x,a.smooth=!!n,a.origin=e,a.originIsAbsolute=!!s,t.style[Mi]="0px 0px",o&&(Bs(o,a,"xOrigin",h,v),Bs(o,a,"yOrigin",c,x),Bs(o,a,"xOffset",u,a.xOffset),Bs(o,a,"yOffset",d,a.yOffset)),t.setAttribute("data-svg-origin",v+" "+x)},Qo=function(t,e){var s=t._gsap||new fb(t);if("x"in s&&!e&&!s.uncache)return s;var n=t.style,r=s.scaleX<0,o="px",a="deg",l=getComputedStyle(t),h=Ki(t,Mi)||"0",c,u,d,f,p,g,m,_,y,b,v,x,E,S,A,M,I,C,F,R,w,T,B,P,L,k,O,U,j,q,Y,it;return c=u=d=g=m=_=y=b=v=0,f=p=1,s.svg=!!(t.getCTM&&Mb(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[Xt]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Xt]!=="none"?l[Xt]:"")),n.scale=n.rotate=n.translate="none"),S=xf(t,s.svg),s.svg&&(s.uncache?(L=t.getBBox(),h=s.xOrigin-L.x+"px "+(s.yOrigin-L.y)+"px",P=""):P=!e&&t.getAttribute("data-svg-origin"),yd(t,P||h,!!P||s.originIsAbsolute,s.smooth!==!1,S)),x=s.xOrigin||0,E=s.yOrigin||0,S!==Jo&&(C=S[0],F=S[1],R=S[2],w=S[3],c=T=S[4],u=B=S[5],S.length===6?(f=Math.sqrt(C*C+F*F),p=Math.sqrt(w*w+R*R),g=C||F?tr(F,C)*bn:0,y=R||w?tr(R,w)*bn+g:0,y&&(p*=Math.abs(Math.cos(y*Er))),s.svg&&(c-=x-(x*C+E*R),u-=E-(x*F+E*w))):(it=S[6],q=S[7],O=S[8],U=S[9],j=S[10],Y=S[11],c=S[12],u=S[13],d=S[14],A=tr(it,j),m=A*bn,A&&(M=Math.cos(-A),I=Math.sin(-A),P=T*M+O*I,L=B*M+U*I,k=it*M+j*I,O=T*-I+O*M,U=B*-I+U*M,j=it*-I+j*M,Y=q*-I+Y*M,T=P,B=L,it=k),A=tr(-R,j),_=A*bn,A&&(M=Math.cos(-A),I=Math.sin(-A),P=C*M-O*I,L=F*M-U*I,k=R*M-j*I,Y=w*I+Y*M,C=P,F=L,R=k),A=tr(F,C),g=A*bn,A&&(M=Math.cos(A),I=Math.sin(A),P=C*M+F*I,L=T*M+B*I,F=F*M-C*I,B=B*M-T*I,C=P,T=L),m&&Math.abs(m)+Math.abs(g)>359.9&&(m=g=0,_=180-_),f=ee(Math.sqrt(C*C+F*F+R*R)),p=ee(Math.sqrt(B*B+it*it)),A=tr(T,B),y=Math.abs(A)>2e-4?A*bn:0,v=Y?1/(Y<0?-Y:Y):0),s.svg&&(P=t.getAttribute("transform"),s.forceCSS=t.setAttribute("transform","")||!Pb(Ki(t,Xt)),P&&t.setAttribute("transform",P))),Math.abs(y)>90&&Math.abs(y)<270&&(r?(f*=-1,y+=g<=0?180:-180,g+=g<=0?180:-180):(p*=-1,y+=y<=0?180:-180)),e=e||s.uncache,s.x=c-((s.xPercent=c&&(!e&&s.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*s.xPercent/100:0)+o,s.y=u-((s.yPercent=u&&(!e&&s.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-u)?-50:0)))?t.offsetHeight*s.yPercent/100:0)+o,s.z=d+o,s.scaleX=ee(f),s.scaleY=ee(p),s.rotation=ee(g)+a,s.rotationX=ee(m)+a,s.rotationY=ee(_)+a,s.skewX=y+a,s.skewY=b+a,s.transformPerspective=v+o,(s.zOrigin=parseFloat(h.split(" ")[2])||0)&&(n[Mi]=hh(h)),s.xOffset=s.yOffset=0,s.force3D=Ze.force3D,s.renderTransform=s.svg?E2:Ab?Rb:S2,s.uncache=0,s},hh=function(t){return(t=t.split(" "))[0]+" "+t[1]},Zc=function(t,e,s){var n=Se(e);return ee(parseFloat(e)+parseFloat(Js(t,"x",s+"px",n)))+n},S2=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Rb(t,e)},hn="0deg",no="0px",cn=") ",Rb=function(t,e){var s=e||this,n=s.xPercent,r=s.yPercent,o=s.x,a=s.y,l=s.z,h=s.rotation,c=s.rotationY,u=s.rotationX,d=s.skewX,f=s.skewY,p=s.scaleX,g=s.scaleY,m=s.transformPerspective,_=s.force3D,y=s.target,b=s.zOrigin,v="",x=_==="auto"&&t&&t!==1||_===!0;if(b&&(u!==hn||c!==hn)){var E=parseFloat(c)*Er,S=Math.sin(E),A=Math.cos(E),M;E=parseFloat(u)*Er,M=Math.cos(E),o=Zc(y,o,S*M*-b),a=Zc(y,a,-Math.sin(E)*-b),l=Zc(y,l,A*M*-b+b)}m!==no&&(v+="perspective("+m+cn),(n||r)&&(v+="translate("+n+"%, "+r+"%) "),(x||o!==no||a!==no||l!==no)&&(v+=l!==no||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+cn),h!==hn&&(v+="rotate("+h+cn),c!==hn&&(v+="rotateY("+c+cn),u!==hn&&(v+="rotateX("+u+cn),(d!==hn||f!==hn)&&(v+="skew("+d+", "+f+cn),(p!==1||g!==1)&&(v+="scale("+p+", "+g+cn),y.style[Xt]=v||"translate(0, 0)"},E2=function(t,e){var s=e||this,n=s.xPercent,r=s.yPercent,o=s.x,a=s.y,l=s.rotation,h=s.skewX,c=s.skewY,u=s.scaleX,d=s.scaleY,f=s.target,p=s.xOrigin,g=s.yOrigin,m=s.xOffset,_=s.yOffset,y=s.forceCSS,b=parseFloat(o),v=parseFloat(a),x,E,S,A,M;l=parseFloat(l),h=parseFloat(h),c=parseFloat(c),c&&(c=parseFloat(c),h+=c,l+=c),l||h?(l*=Er,h*=Er,x=Math.cos(l)*u,E=Math.sin(l)*u,S=Math.sin(l-h)*-d,A=Math.cos(l-h)*d,h&&(c*=Er,M=Math.tan(h-c),M=Math.sqrt(1+M*M),S*=M,A*=M,c&&(M=Math.tan(c),M=Math.sqrt(1+M*M),x*=M,E*=M)),x=ee(x),E=ee(E),S=ee(S),A=ee(A)):(x=u,A=d,E=S=0),(b&&!~(o+"").indexOf("px")||v&&!~(a+"").indexOf("px"))&&(b=Js(f,"x",o,"px"),v=Js(f,"y",a,"px")),(p||g||m||_)&&(b=ee(b+p-(p*x+g*S)+m),v=ee(v+g-(p*E+g*A)+_)),(n||r)&&(M=f.getBBox(),b=ee(b+n/100*M.width),v=ee(v+r/100*M.height)),M="matrix("+x+","+E+","+S+","+A+","+b+","+v+")",f.setAttribute("transform",M),y&&(f.style[Xt]=M)},T2=function(t,e,s,n,r){var o=360,a=ge(r),l=parseFloat(r)*(a&&~r.indexOf("rad")?bn:1),h=l-n,c=n+h+"deg",u,d;return a&&(u=r.split("_")[1],u==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),u==="cw"&&h<0?h=(h+o*Ag)%o-~~(h/o)*o:u==="ccw"&&h>0&&(h=(h-o*Ag)%o-~~(h/o)*o)),t._pt=d=new Le(t._pt,e,s,n,h,l2),d.e=c,d.u="deg",t._props.push(s),d},Dg=function(t,e){for(var s in e)t[s]=e[s];return t},A2=function(t,e,s){var n=Dg({},s._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=s.style,a,l,h,c,u,d,f,p;n.svg?(h=s.getAttribute("transform"),s.setAttribute("transform",""),o[Xt]=e,a=Qo(s,1),Zo(s,Xt),s.setAttribute("transform",h)):(h=getComputedStyle(s)[Xt],o[Xt]=e,a=Qo(s,1),o[Xt]=h);for(l in Ts)h=n[l],c=a[l],h!==c&&r.indexOf(l)<0&&(f=Se(h),p=Se(c),u=f!==p?Js(s,l,h,p):parseFloat(h),d=parseFloat(c),t._pt=new Le(t._pt,a,l,u,d-u,gd),t._pt.u=p||0,t._props.push(l));Dg(a,n)};Be("padding,margin,Width,Radius",function(i,t){var e="Top",s="Right",n="Bottom",r="Left",o=(t<3?[e,s,n,r]:[e+r,e+s,n+s,n+r]).map(function(a){return t<2?i+a:"border"+a+i});lh[t>1?"border"+i:i]=function(a,l,h,c,u){var d,f;if(arguments.length<4)return d=o.map(function(p){return gs(a,p,h)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(c+"").split(" "),f={},o.forEach(function(p,g){return f[p]=d[g]=d[g]||d[(g-1)/2|0]}),a.init(l,f,u)}});var Db={name:"css",register:_d,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,s,n,r){var o=this._props,a=t.style,l=s.vars.startAt,h,c,u,d,f,p,g,m,_,y,b,v,x,E,S,A;_f||_d(),this.styles=this.styles||Tb(t),A=this.styles.props,this.tween=s;for(g in e)if(g!=="autoRound"&&(c=e[g],!(Xe[g]&&pb(g,e,s,n,t,r)))){if(f=typeof c,p=lh[g],f==="function"&&(c=c.call(s,n,t,r),f=typeof c),f==="string"&&~c.indexOf("random(")&&(c=Ko(c)),p)p(this,t,g,c,s)&&(S=1);else if(g.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(g)+"").trim(),c+="",Vs.lastIndex=0,Vs.test(h)||(m=Se(h),_=Se(c)),_?m!==_&&(h=Js(t,g,h,_)+_):m&&(c+=m),this.add(a,"setProperty",h,c,n,r,0,0,g),o.push(g),A.push(g,0,a[g]);else if(f!=="undefined"){if(l&&g in l?(h=typeof l[g]=="function"?l[g].call(s,n,t,r):l[g],ge(h)&&~h.indexOf("random(")&&(h=Ko(h)),Se(h+"")||(h+=Ze.units[g]||Se(gs(t,g))||""),(h+"").charAt(1)==="="&&(h=gs(t,g))):h=gs(t,g),d=parseFloat(h),y=f==="string"&&c.charAt(1)==="="&&c.substr(0,2),y&&(c=c.substr(2)),u=parseFloat(c),g in ji&&(g==="autoAlpha"&&(d===1&&gs(t,"visibility")==="hidden"&&u&&(d=0),A.push("visibility",0,a.visibility),Bs(this,a,"visibility",d?"inherit":"hidden",u?"inherit":"hidden",!u)),g!=="scale"&&g!=="transform"&&(g=ji[g],~g.indexOf(",")&&(g=g.split(",")[0]))),b=g in Ts,b){if(this.styles.save(g),v||(x=t._gsap,x.renderTransform&&!e.parseTransform||Qo(t,e.parseTransform),E=e.smoothOrigin!==!1&&x.smooth,v=this._pt=new Le(this._pt,a,Xt,0,1,x.renderTransform,x,0,-1),v.dep=1),g==="scale")this._pt=new Le(this._pt,x,"scaleY",x.scaleY,(y?wr(x.scaleY,y+u):u)-x.scaleY||0,gd),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){A.push(Mi,0,a[Mi]),c=v2(c),x.svg?yd(t,c,0,E,0,this):(_=parseFloat(c.split(" ")[2])||0,_!==x.zOrigin&&Bs(this,x,"zOrigin",x.zOrigin,_),Bs(this,a,g,hh(h),hh(c)));continue}else if(g==="svgOrigin"){yd(t,c,1,E,0,this);continue}else if(g in Ib){T2(this,x,g,d,y?wr(d,y+c):c);continue}else if(g==="smoothOrigin"){Bs(this,x,"smooth",x.smooth,c);continue}else if(g==="force3D"){x[g]=c;continue}else if(g==="transform"){A2(this,c,t);continue}}else g in a||(g=Ur(g)||g);if(b||(u||u===0)&&(d||d===0)&&!a2.test(c)&&g in a)m=(h+"").substr((d+"").length),u||(u=0),_=Se(c)||(g in Ze.units?Ze.units[g]:m),m!==_&&(d=Js(t,g,h,_)),this._pt=new Le(this._pt,b?x:a,g,d,(y?wr(d,y+u):u)-d,!b&&(_==="px"||g==="zIndex")&&e.autoRound!==!1?c2:gd),this._pt.u=_||0,m!==_&&_!=="%"&&(this._pt.b=h,this._pt.r=h2);else if(g in a)x2.call(this,t,g,h,y?y+c:c);else if(g in t)this.add(t,g,h||t[g],y?y+c:c,n,r);else if(g!=="parseTransform"){lf(g,c);continue}b||(g in a?A.push(g,0,a[g]):A.push(g,1,h||t[g])),o.push(g)}}S&&xb(this)},render:function(t,e){if(e.tween._time||!yf())for(var s=e._pt;s;)s.r(t,s.d),s=s._next;else e.styles.revert()},get:gs,aliases:ji,getSetter:function(t,e,s){var n=ji[e];return n&&n.indexOf(",")<0&&(e=n),e in Ts&&e!==Mi&&(t._gsap.x||gs(t,"x"))?s&&Tg===s?e==="scale"?p2:f2:(Tg=s||{})&&(e==="scale"?g2:m2):t.style&&!rf(t.style[e])?u2:~e.indexOf("-")?d2:gf(t,e)},core:{_removeProperty:Zo,_getMatrix:xf}};ze.utils.checkPrefix=Ur;ze.core.getStyleSaver=Tb;(function(i,t,e,s){var n=Be(i+","+t+","+e,function(r){Ts[r]=1});Be(t,function(r){Ze.units[r]="deg",Ib[r]=1}),ji[n[13]]=i+","+t,Be(s,function(r){var o=r.split(":");ji[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Be("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Ze.units[i]="px"});ze.registerPlugin(Db);var bd=ze.registerPlugin(Db)||ze;bd.core.Tween;function C2(i){let t,e;return{c(){t=J("div"),e=J("canvas"),H(e,"class","svelte-txr5xd"),H(t,"class","board svelte-txr5xd"),No(t,"cursor",i[2]?i[1]?"grabbing":"grab":"")},m(s,n){ct(s,t,n),Z(t,e),i[4](e)},p(s,n){n[0]&6&&No(t,"cursor",s[2]?s[1]?"grabbing":"grab":"")},i:st,o:st,d(s){s&&ht(t),i[4](null)}}}const Ya=600,me=20,M2=.4;function I2(i,t,e){let s,n;ii(i,ml,N=>e(16,s=N)),ii(i,hr,N=>e(17,n=N));let{mapData:r}=t;const o="bombastic";Vi.extend(m0),Vi.extend(_0);let a,l,h,c=r.pieceMap.length;const u=Ya/c,d=u/7,f=(Ya-me*(c+1))/c;let p=!1,g="",m=!1,_={x:0,y:0},y=r.pieceMap,b={x:0,y:0},v={x:0,y:0},x=null,E={x:0,y:0},S={x:0,y:0};const A=()=>{const N=h.clientWidth,G=h.clientHeight,z=N/l.view.width,V=G/l.view.height,X=(z+V)/2;return u*X},M=N=>{const G=A(),z=h.getBoundingClientRect(),V=z.left,X=z.top,rt=N.x*G+V,at=N.y*G+X;return{x:rt,y:at}},I=(N,G)=>{let z={x:N,y:G},V=_.x?Math.abs(_.x):Math.abs(_.y);const X={x:Math.sign(_.x),y:Math.sign(_.y)};for(;V>0;)z.x+=X.x,z.y+=X.y,z.x<0&&(z.x=y.length-1),z.x>=y.length&&(z.x=0),z.y<0&&(z.y=y[0].length-1),z.y>=y[0].length&&(z.y=0),y[z.x][z.y]!==null&&V--;return z},C=()=>{const N=y.map(G=>[...G]);for(let G=0;G<c;G++)for(let z=0;z<c;z++){if(y[G][z]===null||x==="x"&&z!==S.y||x==="y"&&G!==S.x)continue;let V=I(G,z);N[V.x][V.y]=y[G][z]}return N},F=(N,G)=>N+(G-N)*M2,R=()=>{const N=C();for(let G=0;G<c;G++)for(let z=0;z<c;z++){if(y[G][z]===null)continue;const V=l.stage.getChildByName(N[G][z].id),X={x:G*me+G*f+me,y:z*me+z*f+me};V.position.set(F(V.position.x,X.x),F(V.position.y,X.y));const rt={x:X.x-V.position.x,y:X.y-V.position.y};rt.x!==0&&Math.sign(rt.x)!==E.x||rt.y!==0&&Math.sign(rt.y)!==E.y?V.zIndex=10:(V.scale.set(1),V.zIndex=0)}},w=N=>{for(let G=0;G<c;G++)for(let z=0;z<c;z++)if(y[G][z]!==null&&y[G][z].id===N)return{x:G,y:z};return{x:0,y:0}},T=(N,G,z)=>{let V=[[N,G]],X=[],rt=0;for(;V.length>0;){let[at,lt]=V.shift();X.includes(at+"-"+lt)||(X.push(at+"-"+lt),rt++,at>0&&y[at-1][lt]!==null&&y[at-1][lt].color===z&&V.push([at-1,lt]),at<y.length-1&&y[at+1][lt]!==null&&y[at+1][lt].color===z&&V.push([at+1,lt]),lt>0&&y[at][lt-1]!==null&&y[at][lt-1].color===z&&V.push([at,lt-1]),lt<y[0].length-1&&y[at][lt+1]!==null&&y[at][lt+1].color===z&&V.push([at,lt+1]))}return rt},B=N=>{for(let G=0;G<y.length;G++)for(let z=0;z<y[0].length;z++)if(y[G][z]!==null&&y[G][z].color===N)return[G,z];return[0,0]},P=()=>{let N=new Array(a.length).fill(!0);for(let G=0;G<a.length;G++){let[z,V]=B(r.palette[G]);T(z,V,r.palette[G])!==a[G]&&(N[G]=!1)}return Hl.set(N),!N.includes(!1)};Eu.subscribe(N=>{if(!N)return;const G=y.map(V=>[...V]);for(let V=0;V<c;V++)for(let X=0;X<c;X++){if(y[V][X]===null)continue;const rt=y[V][X].id.split("-").map(re=>parseInt(re));G[rt[0]][rt[1]]=y[V][X];const at=l.stage.getChildByName(`${V}-${X}`),lt={x:V*me+V*f+me,y:X*me+X*f+me};at.position.set(lt.x,lt.y)}hr.set(0),Eo.set(!1),Gl.set(!0),zl.set(!1),Hl.set(new Array(a.length).fill(!1)),Eu.set(!1);const z=JSON.parse(JSON.stringify(r));z.pieceMap=G,y=G.map(V=>[...V]),z.moves=[],localStorage.setItem("dailyData",JSON.stringify(z)),e(2,m=!0)});const L=(N,G)=>{bd.to(N,{duration:.2,borderRadius:50,onUpdate:()=>{N.clear(),N.beginFill(it(G)),N.drawRoundedRect(0,0,f,f,N.borderRadius);const X=f*.8,rt=(f-X)/2,at=(f-X)/2;N.beginFill(G),N.drawRoundedRect(rt,at,X,X,N.borderRadius*.8),N.endFill(),N.endFill()}})},k=N=>{if(!m)return;e(1,p=!0);const G=w(N),z=M(G),V=A(),X=z.x+V/2,rt=z.y+V/2;b.x=X,b.y=rt,S.x=G.x,S.y=G.y,g=N,ml.set(y[G.x][G.y].color),L(l.stage.getChildByName(N),y[G.x][G.y].color)},O=N=>{if(!p)return;const G=N.clientX-b.x,z=N.clientY-b.y,V=A(),X=Math.round(G/V),rt=Math.round(z/V);X===0&&rt===0&&(x=null),x||(x=Math.abs(G)>Math.abs(z)?"x":"y"),x==="x"?(_.x=X,_.y=0):(_.x=0,_.y=rt),!(_.x===v.x&&_.y===v.y)&&(E.x=_.x-v.x,E.y=_.y-v.y,_.x*V,_.y*V,v={x:_.x,y:_.y})},U=()=>{let N=localStorage.getItem("userStats"),G;const z=Vi().tz("Etc/GMT-2").format("YYYYMMDD"),V=Vi().tz("Etc/GMT-2").subtract(1,"day").format("YYYYMMDD");N?(G=JSON.parse(N),G.gamesWon++,G.scoreHistory.push(n),G&&G.scoreHistory.length>10&&G.scoreHistory.shift(),(hr<G.highScore||G.today!==z||!G.highScore)&&(G.highScore=n),G.lastWin===V?G.winStreak+=1:G.winStreak=1,G.lastWin!==z?G.dailyHistory=[n]:G.dailyHistory.push(n),G.lastWin=z,localStorage.setItem("userStats",JSON.stringify(G))):localStorage.setItem("userStats",JSON.stringify({gamesWon:1,scoreHistory:[n],winStreak:1,lastWin:z,dailyHighScore:n,dailyHistory:[n]}))},j=(N,G)=>{const z=d,V=.2;bd.to(N,{duration:V,borderRadius:z,onUpdate:()=>{N.clear(),N.beginFill(it(G)),N.drawRoundedRect(0,0,f,f,N.borderRadius);const X=f*.8,rt=(f-X)/2,at=(f-X)/2;N.beginFill(G),N.drawRoundedRect(rt,at,X,X,N.borderRadius*.8),N.endFill(),N.endFill()}})},q=()=>{if(!p)return;j(l.stage.getChildByName(g),s),console.log(g),ml.set(null),y=C().map(G=>[...G]);const N=w(g);if(N.x===S.x&&N.y===S.y)e(2,m=!0);else{const G=JSON.parse(JSON.stringify(r));G.pieceMap=y;const z={offset:_,position:S};let V=JSON.parse(localStorage.getItem("dailyData")).moves;if(V.push(z),G.moves=V,localStorage.setItem("dailyData",JSON.stringify(G)),hr.update(X=>X+1),P()){Eo.set(!0),e(2,m=!1);const X=localStorage.getItem("userCountry"),rt=JSON.parse(localStorage.getItem("userStats"));X!==null&&X!=="XX"&&(rt==null||!rt.dailyHistory.includes(V.length))&&Wd.post(o+"/win",{moves:V,iso:X}),U()}else e(2,m=!0)}e(1,p=!1),b={x:0,y:0},_={x:0,y:0},x=null},Y=()=>{let N=new Array(r.palette.length).fill(0);for(let G=0;G<c;G++)for(let z=0;z<c;z++){if(y[G][z]===null)continue;const V=y[G][z].color,X=r.palette.indexOf(V);N[X]=N[X]+1}return N},it=N=>{const z=N.replace("#",""),V=parseInt(z.substring(0,2),16),X=parseInt(z.substring(2,4),16),rt=parseInt(z.substring(4,6),16),at=Math.min(255,V+10),lt=Math.min(255,X+10),re=Math.min(255,rt+10);return`#${at.toString(16)}${lt.toString(16)}${re.toString(16)}`};ui(()=>{a=Y(),l=new Jd({width:Ya,height:Ya,view:h,antialias:!0,backgroundAlpha:0}),l.ticker.add(R);for(let N=0;N<c;N++)for(let G=0;G<c;G++){if(y[N][G]===null)continue;const z=new pa;z.beginFill(it(y[N][G].color)),z.drawRoundedRect(0,0,f,f,d);const V=f*.8,X=(f-V)/2,rt=(f-V)/2;z.beginFill(y[N][G].color),z.drawRoundedRect(X,rt,V,V,d*.8),z.borderRadius=d,z.endFill(),z.hitArea=new bt(-me/2,-me/2,u-me/4,u-me/4),z.position.set(N*me+N*f+me,G*me+G*f+me),z.endFill(),z.name=y[N][G].id,z.eventMode="static",z.on("pointerdown",at=>{k(z.name)}),l.stage.addChild(z)}l.stage.eventMode="static",window.addEventListener("pointermove",N=>{O(N)}),window.addEventListener("pointerup",N=>{q()}),P()?(Gl.set(!1),Eo.set(!0),e(2,m=!1)):e(2,m=!0)});function pt(N){Xi[N?"unshift":"push"](()=>{h=N,e(0,h)})}return i.$$set=N=>{"mapData"in N&&e(3,r=N.mapData)},[h,p,m,r,pt]}class P2 extends te{constructor(t){super(),Qt(this,t,I2,C2,$t,{mapData:3},null,[-1,-1])}}var ma={};(function i(t,e,s,n){var r=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL);function o(){}function a(w){var T=e.exports.Promise,B=T!==void 0?T:t.Promise;return typeof B=="function"?new B(w):(w(o,o),null)}var l=function(){var w=Math.floor(16.666666666666668),T,B,P={},L=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(T=function(k){var O=Math.random();return P[O]=requestAnimationFrame(function U(j){L===j||L+w-1<j?(L=j,delete P[O],k()):P[O]=requestAnimationFrame(U)}),O},B=function(k){P[k]&&cancelAnimationFrame(P[k])}):(T=function(k){return setTimeout(k,w)},B=function(k){return clearTimeout(k)}),{frame:T,cancel:B}}(),h=function(){var w,T,B={};function P(L){function k(O,U){L.postMessage({options:O||{},callback:U})}L.init=function(U){var j=U.transferControlToOffscreen();L.postMessage({canvas:j},[j])},L.fire=function(U,j,q){if(T)return k(U,null),T;var Y=Math.random().toString(36).slice(2);return T=a(function(it){function pt(N){N.data.callback===Y&&(delete B[Y],L.removeEventListener("message",pt),T=null,q(),it())}L.addEventListener("message",pt),k(U,Y),B[Y]=pt.bind(null,{data:{callback:Y}})}),T},L.reset=function(){L.postMessage({reset:!0});for(var U in B)B[U](),delete B[U]}}return function(){if(w)return w;if(!s&&r){var L=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{w=new Worker(URL.createObjectURL(new Blob([L])))}catch(k){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",k),null}P(w)}return w}}(),c={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function u(w,T){return T?T(w):w}function d(w){return w!=null}function f(w,T,B){return u(w&&d(w[T])?w[T]:c[T],B)}function p(w){return w<0?0:Math.floor(w)}function g(w,T){return Math.floor(Math.random()*(T-w))+w}function m(w){return parseInt(w,16)}function _(w){return w.map(y)}function y(w){var T=String(w).replace(/[^0-9a-f]/gi,"");return T.length<6&&(T=T[0]+T[0]+T[1]+T[1]+T[2]+T[2]),{r:m(T.substring(0,2)),g:m(T.substring(2,4)),b:m(T.substring(4,6))}}function b(w){var T=f(w,"origin",Object);return T.x=f(T,"x",Number),T.y=f(T,"y",Number),T}function v(w){w.width=document.documentElement.clientWidth,w.height=document.documentElement.clientHeight}function x(w){var T=w.getBoundingClientRect();w.width=T.width,w.height=T.height}function E(w){var T=document.createElement("canvas");return T.style.position="fixed",T.style.top="0px",T.style.left="0px",T.style.pointerEvents="none",T.style.zIndex=w,T}function S(w,T,B,P,L,k,O,U,j){w.save(),w.translate(T,B),w.rotate(k),w.scale(P,L),w.arc(0,0,1,O,U,j),w.restore()}function A(w){var T=w.angle*(Math.PI/180),B=w.spread*(Math.PI/180);return{x:w.x,y:w.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:w.startVelocity*.5+Math.random()*w.startVelocity,angle2D:-T+(.5*B-Math.random()*B),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:w.color,shape:w.shape,tick:0,totalTicks:w.ticks,decay:w.decay,drift:w.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:w.gravity*3,ovalScalar:.6,scalar:w.scalar}}function M(w,T){T.x+=Math.cos(T.angle2D)*T.velocity+T.drift,T.y+=Math.sin(T.angle2D)*T.velocity+T.gravity,T.wobble+=T.wobbleSpeed,T.velocity*=T.decay,T.tiltAngle+=.1,T.tiltSin=Math.sin(T.tiltAngle),T.tiltCos=Math.cos(T.tiltAngle),T.random=Math.random()+2,T.wobbleX=T.x+10*T.scalar*Math.cos(T.wobble),T.wobbleY=T.y+10*T.scalar*Math.sin(T.wobble);var B=T.tick++/T.totalTicks,P=T.x+T.random*T.tiltCos,L=T.y+T.random*T.tiltSin,k=T.wobbleX+T.random*T.tiltCos,O=T.wobbleY+T.random*T.tiltSin;if(w.fillStyle="rgba("+T.color.r+", "+T.color.g+", "+T.color.b+", "+(1-B)+")",w.beginPath(),T.shape==="circle")w.ellipse?w.ellipse(T.x,T.y,Math.abs(k-P)*T.ovalScalar,Math.abs(O-L)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI):S(w,T.x,T.y,Math.abs(k-P)*T.ovalScalar,Math.abs(O-L)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI);else if(T.shape==="star")for(var U=Math.PI/2*3,j=4*T.scalar,q=8*T.scalar,Y=T.x,it=T.y,pt=5,N=Math.PI/pt;pt--;)Y=T.x+Math.cos(U)*q,it=T.y+Math.sin(U)*q,w.lineTo(Y,it),U+=N,Y=T.x+Math.cos(U)*j,it=T.y+Math.sin(U)*j,w.lineTo(Y,it),U+=N;else w.moveTo(Math.floor(T.x),Math.floor(T.y)),w.lineTo(Math.floor(T.wobbleX),Math.floor(L)),w.lineTo(Math.floor(k),Math.floor(O)),w.lineTo(Math.floor(P),Math.floor(T.wobbleY));return w.closePath(),w.fill(),T.tick<T.totalTicks}function I(w,T,B,P,L){var k=T.slice(),O=w.getContext("2d"),U,j,q=a(function(Y){function it(){U=j=null,O.clearRect(0,0,P.width,P.height),L(),Y()}function pt(){s&&!(P.width===n.width&&P.height===n.height)&&(P.width=w.width=n.width,P.height=w.height=n.height),!P.width&&!P.height&&(B(w),P.width=w.width,P.height=w.height),O.clearRect(0,0,P.width,P.height),k=k.filter(function(N){return M(O,N)}),k.length?U=l.frame(pt):it()}U=l.frame(pt),j=it});return{addFettis:function(Y){return k=k.concat(Y),q},canvas:w,promise:q,reset:function(){U&&l.cancel(U),j&&j()}}}function C(w,T){var B=!w,P=!!f(T||{},"resize"),L=f(T,"disableForReducedMotion",Boolean),k=r&&!!f(T||{},"useWorker"),O=k?h():null,U=B?v:x,j=w&&O?!!w.__confetti_initialized:!1,q=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Y;function it(N,G,z){for(var V=f(N,"particleCount",p),X=f(N,"angle",Number),rt=f(N,"spread",Number),at=f(N,"startVelocity",Number),lt=f(N,"decay",Number),re=f(N,"gravity",Number),fi=f(N,"drift",Number),Ms=f(N,"colors",_),ss=f(N,"ticks",Number),rn=f(N,"shapes"),$r=f(N,"scalar"),Kr=b(N),Xn=V,It=[],ns=w.width*Kr.x,xa=w.height*Kr.y;Xn--;)It.push(A({x:ns,y:xa,angle:X,spread:rt,startVelocity:at,color:Ms[Xn%Ms.length],shape:rn[g(0,rn.length)],ticks:ss,decay:lt,gravity:re,drift:fi,scalar:$r}));return Y?Y.addFettis(It):(Y=I(w,It,U,G,z),Y.promise)}function pt(N){var G=L||f(N,"disableForReducedMotion",Boolean),z=f(N,"zIndex",Number);if(G&&q)return a(function(at){at()});B&&Y?w=Y.canvas:B&&!w&&(w=E(z),document.body.appendChild(w)),P&&!j&&U(w);var V={width:w.width,height:w.height};O&&!j&&O.init(w),j=!0,O&&(w.__confetti_initialized=!0);function X(){if(O){var at={getBoundingClientRect:function(){if(!B)return w.getBoundingClientRect()}};U(at),O.postMessage({resize:{width:at.width,height:at.height}});return}V.width=V.height=null}function rt(){Y=null,P&&t.removeEventListener("resize",X),B&&w&&(document.body.removeChild(w),w=null,j=!1)}return P&&t.addEventListener("resize",X,!1),O?O.fire(N,V,rt):it(N,V,rt)}return pt.reset=function(){O&&O.reset(),Y&&Y.reset()},pt}var F;function R(){return F||(F=C(null,{useWorker:!0,resize:!0})),F}e.exports=function(){return R().apply(this,arguments)},e.exports.reset=function(){R().reset()},e.exports.create=C})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ma,!1);const Jc=ma.exports;ma.exports.create;function R2(i){let t,e,s,n,r;return{c(){t=J("div"),e=J("p"),s=Ie(i[4]),H(e,"class","svelte-4j72mv"),H(t,"class",n="counter "+(i[1]&&i[2]?"new-win":"")+" "+(i[2]?"win":"")+" svelte-4j72mv"),H(t,"style",r=i[3]!==null?`box-shadow: 0 0 25px 0 ${i[3]}; border-radius: 50%`:"")},m(o,a){ct(o,t,a),Z(t,e),Z(e,s),i[5](t)},p(o,[a]){a&16&&qe(s,o[4]),a&6&&n!==(n="counter "+(o[1]&&o[2]?"new-win":"")+" "+(o[2]?"win":"")+" svelte-4j72mv")&&H(t,"class",n),a&8&&r!==(r=o[3]!==null?`box-shadow: 0 0 25px 0 ${o[3]}; border-radius: 50%`:"")&&H(t,"style",r)},i:st,o:st,d(o){o&&ht(t),i[5](null)}}}function D2(i,t,e){let s,n,r,o,a;ii(i,Gl,h=>e(1,n=h)),ii(i,Eo,h=>e(2,r=h)),ii(i,ml,h=>e(3,o=h)),ii(i,hr,h=>e(4,a=h)),ui(()=>{const h=()=>{const u=s.getBoundingClientRect(),d=u.left/window.innerWidth,f=(u.top+u.height)/window.innerHeight,p=(u.left+u.width)/window.innerWidth;Jc({particleCount:50,spread:70,startVelocity:20,gravity:.5,scalar:.75,zIndex:-1,angle:135,origin:{x:d,y:f}}),Jc({particleCount:50,spread:70,startVelocity:20,gravity:.5,scalar:.75,zIndex:-1,angle:45,origin:{x:p,y:f}})},c=Eo.subscribe(u=>{u&&(n?(h(),setTimeout(()=>{Gl.set(!1),zl.set(!0)},1500)):zl.set(!0))});return()=>{c()}}),Wr(()=>{Jc.reset()});function l(h){Xi[h?"unshift":"push"](()=>{s=h,e(0,s)})}return e(0,s=null),[s,n,r,o,a,l]}class O2 extends te{constructor(t){super(),Qt(this,t,D2,R2,$t,{})}}function k2(i){let t,e,s,n,r;return e=new O2({}),n=new P2({props:{mapData:i[0]}}),{c(){t=J("div"),Kt(e.$$.fragment),s=xt(),Kt(n.$$.fragment),H(t,"class","game-wrapper svelte-1mslmw3")},m(o,a){ct(o,t,a),Vt(e,t,null),Z(t,s),Vt(n,t,null),r=!0},p(o,[a]){const l={};a&1&&(l.mapData=o[0]),n.$set(l)},i(o){r||($(e.$$.fragment,o),$(n.$$.fragment,o),r=!0)},o(o){tt(e.$$.fragment,o),tt(n.$$.fragment,o),r=!1},d(o){o&&ht(t),Wt(e),Wt(n)}}}function F2(i,t,e){let{mapData:s}=t;return ui(()=>{gw.set(s.pieceMap),b0.set(s.palette),hr.set(s.moves.length)}),i.$$set=n=>{"mapData"in n&&e(0,s=n.mapData)},[s]}class B2 extends te{constructor(t){super(),Qt(this,t,F2,k2,$t,{mapData:0})}}const L2="/assets/loading-icon-ccea71d8.gif";function N2(i){let t,e,s;return{c(){t=J("div"),e=J("img"),Ji(e.src,s=L2)||H(e,"src",s),H(e,"alt","Loading"),H(e,"class","svelte-w0ysyk"),H(t,"class","loading svelte-w0ysyk")},m(n,r){ct(n,t,r),Z(t,e)},p:st,i:st,o:st,d(n){n&&ht(t)}}}class U2 extends te{constructor(t){super(),Qt(this,t,null,N2,$t,{})}}const G2=1/3,ki=1/6,Qc=i=>Math.floor(i)|0,tu=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function H2(i=Math.random){const t=z2(i),e=new Float64Array(t).map(r=>tu[r%12*3]),s=new Float64Array(t).map(r=>tu[r%12*3+1]),n=new Float64Array(t).map(r=>tu[r%12*3+2]);return function(o,a,l){let h,c,u,d;const f=(o+a+l)*G2,p=Qc(o+f),g=Qc(a+f),m=Qc(l+f),_=(p+g+m)*ki,y=p-_,b=g-_,v=m-_,x=o-y,E=a-b,S=l-v;let A,M,I,C,F,R;x>=E?E>=S?(A=1,M=0,I=0,C=1,F=1,R=0):x>=S?(A=1,M=0,I=0,C=1,F=0,R=1):(A=0,M=0,I=1,C=1,F=0,R=1):E<S?(A=0,M=0,I=1,C=0,F=1,R=1):x<S?(A=0,M=1,I=0,C=0,F=1,R=1):(A=0,M=1,I=0,C=1,F=1,R=0);const w=x-A+ki,T=E-M+ki,B=S-I+ki,P=x-C+2*ki,L=E-F+2*ki,k=S-R+2*ki,O=x-1+3*ki,U=E-1+3*ki,j=S-1+3*ki,q=p&255,Y=g&255,it=m&255;let pt=.6-x*x-E*E-S*S;if(pt<0)h=0;else{const V=q+t[Y+t[it]];pt*=pt,h=pt*pt*(e[V]*x+s[V]*E+n[V]*S)}let N=.6-w*w-T*T-B*B;if(N<0)c=0;else{const V=q+A+t[Y+M+t[it+I]];N*=N,c=N*N*(e[V]*w+s[V]*T+n[V]*B)}let G=.6-P*P-L*L-k*k;if(G<0)u=0;else{const V=q+C+t[Y+F+t[it+R]];G*=G,u=G*G*(e[V]*P+s[V]*L+n[V]*k)}let z=.6-O*O-U*U-j*j;if(z<0)d=0;else{const V=q+1+t[Y+1+t[it+1]];z*=z,d=z*z*(e[V]*O+s[V]*U+n[V]*j)}return 32*(h+c+u+d)}}function z2(i){const e=new Uint8Array(512);for(let s=0;s<512/2;s++)e[s]=s;for(let s=0;s<512/2-1;s++){const n=s+~~(i()*(256-s)),r=e[s];e[s]=e[n],e[n]=r}for(let s=256;s<512;s++)e[s]=e[s-256];return e}function V2(i){let t;return{c(){t=J("canvas"),H(t,"width",i[1]),H(t,"height",i[2]),H(t,"class","svelte-kf41j1")},m(e,s){ct(e,t,s),i[3](t)},p(e,[s]){s&2&&H(t,"width",e[1]),s&4&&H(t,"height",e[2])},i:st,o:st,d(e){e&&ht(t),i[3](null)}}}const $a=50,Ka=200,W2=5,j2=.6,Og=50,X2=.05,Y2=.01,$2=5e-4;function K2(i,t,e){let s,n;ii(i,Hl,I=>e(11,s=I)),ii(i,b0,I=>e(12,n=I));const r=H2();let o=document.createElement("canvas");const a=o.getContext("2d");let l,h,c,u,d,f,p,g=0;const m=[[5,5,5],[55,55,55],[5,5,5],[50,50,50],[15,15,15],[15,15,15]];let _=[...m.map(I=>[...I])],y=[...m.map(I=>[...I])];const b=I=>{let C=parseInt(I.substring(1,3),16),F=parseInt(I.substring(3,5),16),R=parseInt(I.substring(5,7),16);return[C,F,R]},v=()=>{const I=window.innerWidth,C=window.innerHeight,F=I/C;F>=1?(l=$a,h=Math.floor($a/F),e(1,d=Ka),e(2,f=Math.floor(Ka/F))):(l=$a,h=$a,e(1,d=Math.floor(Ka*F)),e(2,f=Ka))},x=()=>{for(let I=0;I<_.length;I++)for(let C=0;C<_[I].length;C++)y[I][C]=y[I][C]+(_[I][C]-y[I][C])*Y2},E=I=>{const C=Math.floor((I+1)/2*y.length),F=Math.min(C,y.length-1);return y[F]},S=()=>{const I=a.createImageData(l,h),C=I.data;for(let F=0;F<l;F++)for(let R=0;R<h;R++){const w=(F+R*l)*4,T=p?[p[w],p[w+1],p[w+2]]:[0,0,0],B=r(F/Og,R/Og,g),P=E(B),L=T.map((k,O)=>k+(P[O]-k)*X2);C[w]=L[0],C[w+1]=L[1],C[w+2]=L[2],C[w+3]=255}p=C,g+=$2,a.putImageData(I,0,0),u.drawImage(o,0,0,l,h,0,0,d,f),u.filter=`blur(${W2}px) brightness(${j2})`},A=()=>{S(),x(),requestAnimationFrame(A)};ui(()=>{u=c.getContext("2d"),v(),A(),window.addEventListener("resize",v),Hl.subscribe(()=>{if(n&&s){_=n.map(I=>b(I));for(let I=0;I<_.length;I++)s[I]||(_[I]=m[I]);y=y.slice(0,_.length)}else _=[...m.map(I=>[...I])]})});function M(I){Xi[I?"unshift":"push"](()=>{c=I,e(0,c)})}return[c,d,f,M]}class q2 extends te{constructor(t){super(),Qt(this,t,K2,V2,$t,{})}}const Z2="modulepreload",J2=function(i){return"/"+i},kg={},Q2=function(t,e,s){if(!e||e.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(e.map(r=>{if(r=J2(r),r in kg)return;kg[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let c=n.length-1;c>=0;c--){const u=n[c];if(u.href===r&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":Z2,o||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),o)return new Promise((c,u)=>{h.addEventListener("load",c),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};var Tr={};const tM=[["AF","AFG","004","ISO 3166-2:AF"],["AL","ALB","008","ISO 3166-2:AL"],["DZ","DZA","012","ISO 3166-2:DZ"],["AS","ASM","016","ISO 3166-2:AS"],["AD","AND","020","ISO 3166-2:AD"],["AO","AGO","024","ISO 3166-2:AO"],["AI","AIA","660","ISO 3166-2:AI"],["AQ","ATA","010","ISO 3166-2:AQ"],["AG","ATG","028","ISO 3166-2:AG"],["AR","ARG","032","ISO 3166-2:AR"],["AM","ARM","051","ISO 3166-2:AM"],["AW","ABW","533","ISO 3166-2:AW"],["AU","AUS","036","ISO 3166-2:AU"],["AT","AUT","040","ISO 3166-2:AT"],["AZ","AZE","031","ISO 3166-2:AZ"],["BS","BHS","044","ISO 3166-2:BS"],["BH","BHR","048","ISO 3166-2:BH"],["BD","BGD","050","ISO 3166-2:BD"],["BB","BRB","052","ISO 3166-2:BB"],["BY","BLR","112","ISO 3166-2:BY"],["BE","BEL","056","ISO 3166-2:BE"],["BZ","BLZ","084","ISO 3166-2:BZ"],["BJ","BEN","204","ISO 3166-2:BJ"],["BM","BMU","060","ISO 3166-2:BM"],["BT","BTN","064","ISO 3166-2:BT"],["BO","BOL","068","ISO 3166-2:BO"],["BA","BIH","070","ISO 3166-2:BA"],["BW","BWA","072","ISO 3166-2:BW"],["BV","BVT","074","ISO 3166-2:BV"],["BR","BRA","076","ISO 3166-2:BR"],["IO","IOT","086","ISO 3166-2:IO"],["BN","BRN","096","ISO 3166-2:BN"],["BG","BGR","100","ISO 3166-2:BG"],["BF","BFA","854","ISO 3166-2:BF"],["BI","BDI","108","ISO 3166-2:BI"],["KH","KHM","116","ISO 3166-2:KH"],["CM","CMR","120","ISO 3166-2:CM"],["CA","CAN","124","ISO 3166-2:CA"],["CV","CPV","132","ISO 3166-2:CV"],["KY","CYM","136","ISO 3166-2:KY"],["CF","CAF","140","ISO 3166-2:CF"],["TD","TCD","148","ISO 3166-2:TD"],["CL","CHL","152","ISO 3166-2:CL"],["CN","CHN","156","ISO 3166-2:CN"],["CX","CXR","162","ISO 3166-2:CX"],["CC","CCK","166","ISO 3166-2:CC"],["CO","COL","170","ISO 3166-2:CO"],["KM","COM","174","ISO 3166-2:KM"],["CG","COG","178","ISO 3166-2:CG"],["CD","COD","180","ISO 3166-2:CD"],["CK","COK","184","ISO 3166-2:CK"],["CR","CRI","188","ISO 3166-2:CR"],["CI","CIV","384","ISO 3166-2:CI"],["HR","HRV","191","ISO 3166-2:HR"],["CU","CUB","192","ISO 3166-2:CU"],["CY","CYP","196","ISO 3166-2:CY"],["CZ","CZE","203","ISO 3166-2:CZ"],["DK","DNK","208","ISO 3166-2:DK"],["DJ","DJI","262","ISO 3166-2:DJ"],["DM","DMA","212","ISO 3166-2:DM"],["DO","DOM","214","ISO 3166-2:DO"],["EC","ECU","218","ISO 3166-2:EC"],["EG","EGY","818","ISO 3166-2:EG"],["SV","SLV","222","ISO 3166-2:SV"],["GQ","GNQ","226","ISO 3166-2:GQ"],["ER","ERI","232","ISO 3166-2:ER"],["EE","EST","233","ISO 3166-2:EE"],["ET","ETH","231","ISO 3166-2:ET"],["FK","FLK","238","ISO 3166-2:FK"],["FO","FRO","234","ISO 3166-2:FO"],["FJ","FJI","242","ISO 3166-2:FJ"],["FI","FIN","246","ISO 3166-2:FI"],["FR","FRA","250","ISO 3166-2:FR"],["GF","GUF","254","ISO 3166-2:GF"],["PF","PYF","258","ISO 3166-2:PF"],["TF","ATF","260","ISO 3166-2:TF"],["GA","GAB","266","ISO 3166-2:GA"],["GM","GMB","270","ISO 3166-2:GM"],["GE","GEO","268","ISO 3166-2:GE"],["DE","DEU","276","ISO 3166-2:DE"],["GH","GHA","288","ISO 3166-2:GH"],["GI","GIB","292","ISO 3166-2:GI"],["GR","GRC","300","ISO 3166-2:GR"],["GL","GRL","304","ISO 3166-2:GL"],["GD","GRD","308","ISO 3166-2:GD"],["GP","GLP","312","ISO 3166-2:GP"],["GU","GUM","316","ISO 3166-2:GU"],["GT","GTM","320","ISO 3166-2:GT"],["GN","GIN","324","ISO 3166-2:GN"],["GW","GNB","624","ISO 3166-2:GW"],["GY","GUY","328","ISO 3166-2:GY"],["HT","HTI","332","ISO 3166-2:HT"],["HM","HMD","334","ISO 3166-2:HM"],["VA","VAT","336","ISO 3166-2:VA"],["HN","HND","340","ISO 3166-2:HN"],["HK","HKG","344","ISO 3166-2:HK"],["HU","HUN","348","ISO 3166-2:HU"],["IS","ISL","352","ISO 3166-2:IS"],["IN","IND","356","ISO 3166-2:IN"],["ID","IDN","360","ISO 3166-2:ID"],["IR","IRN","364","ISO 3166-2:IR"],["IQ","IRQ","368","ISO 3166-2:IQ"],["IE","IRL","372","ISO 3166-2:IE"],["IL","ISR","376","ISO 3166-2:IL"],["IT","ITA","380","ISO 3166-2:IT"],["JM","JAM","388","ISO 3166-2:JM"],["JP","JPN","392","ISO 3166-2:JP"],["JO","JOR","400","ISO 3166-2:JO"],["KZ","KAZ","398","ISO 3166-2:KZ"],["KE","KEN","404","ISO 3166-2:KE"],["KI","KIR","296","ISO 3166-2:KI"],["KP","PRK","408","ISO 3166-2:KP"],["KR","KOR","410","ISO 3166-2:KR"],["KW","KWT","414","ISO 3166-2:KW"],["KG","KGZ","417","ISO 3166-2:KG"],["LA","LAO","418","ISO 3166-2:LA"],["LV","LVA","428","ISO 3166-2:LV"],["LB","LBN","422","ISO 3166-2:LB"],["LS","LSO","426","ISO 3166-2:LS"],["LR","LBR","430","ISO 3166-2:LR"],["LY","LBY","434","ISO 3166-2:LY"],["LI","LIE","438","ISO 3166-2:LI"],["LT","LTU","440","ISO 3166-2:LT"],["LU","LUX","442","ISO 3166-2:LU"],["MO","MAC","446","ISO 3166-2:MO"],["MG","MDG","450","ISO 3166-2:MG"],["MW","MWI","454","ISO 3166-2:MW"],["MY","MYS","458","ISO 3166-2:MY"],["MV","MDV","462","ISO 3166-2:MV"],["ML","MLI","466","ISO 3166-2:ML"],["MT","MLT","470","ISO 3166-2:MT"],["MH","MHL","584","ISO 3166-2:MH"],["MQ","MTQ","474","ISO 3166-2:MQ"],["MR","MRT","478","ISO 3166-2:MR"],["MU","MUS","480","ISO 3166-2:MU"],["YT","MYT","175","ISO 3166-2:YT"],["MX","MEX","484","ISO 3166-2:MX"],["FM","FSM","583","ISO 3166-2:FM"],["MD","MDA","498","ISO 3166-2:MD"],["MC","MCO","492","ISO 3166-2:MC"],["MN","MNG","496","ISO 3166-2:MN"],["MS","MSR","500","ISO 3166-2:MS"],["MA","MAR","504","ISO 3166-2:MA"],["MZ","MOZ","508","ISO 3166-2:MZ"],["MM","MMR","104","ISO 3166-2:MM"],["NA","NAM","516","ISO 3166-2:NA"],["NR","NRU","520","ISO 3166-2:NR"],["NP","NPL","524","ISO 3166-2:NP"],["NL","NLD","528","ISO 3166-2:NL"],["NC","NCL","540","ISO 3166-2:NC"],["NZ","NZL","554","ISO 3166-2:NZ"],["NI","NIC","558","ISO 3166-2:NI"],["NE","NER","562","ISO 3166-2:NE"],["NG","NGA","566","ISO 3166-2:NG"],["NU","NIU","570","ISO 3166-2:NU"],["NF","NFK","574","ISO 3166-2:NF"],["MP","MNP","580","ISO 3166-2:MP"],["MK","MKD","807","ISO 3166-2:MK"],["NO","NOR","578","ISO 3166-2:NO"],["OM","OMN","512","ISO 3166-2:OM"],["PK","PAK","586","ISO 3166-2:PK"],["PW","PLW","585","ISO 3166-2:PW"],["PS","PSE","275","ISO 3166-2:PS"],["PA","PAN","591","ISO 3166-2:PA"],["PG","PNG","598","ISO 3166-2:PG"],["PY","PRY","600","ISO 3166-2:PY"],["PE","PER","604","ISO 3166-2:PE"],["PH","PHL","608","ISO 3166-2:PH"],["PN","PCN","612","ISO 3166-2:PN"],["PL","POL","616","ISO 3166-2:PL"],["PT","PRT","620","ISO 3166-2:PT"],["PR","PRI","630","ISO 3166-2:PR"],["QA","QAT","634","ISO 3166-2:QA"],["RE","REU","638","ISO 3166-2:RE"],["RO","ROU","642","ISO 3166-2:RO"],["RU","RUS","643","ISO 3166-2:RU"],["RW","RWA","646","ISO 3166-2:RW"],["SH","SHN","654","ISO 3166-2:SH"],["KN","KNA","659","ISO 3166-2:KN"],["LC","LCA","662","ISO 3166-2:LC"],["PM","SPM","666","ISO 3166-2:PM"],["VC","VCT","670","ISO 3166-2:VC"],["WS","WSM","882","ISO 3166-2:WS"],["SM","SMR","674","ISO 3166-2:SM"],["ST","STP","678","ISO 3166-2:ST"],["SA","SAU","682","ISO 3166-2:SA"],["SN","SEN","686","ISO 3166-2:SN"],["SC","SYC","690","ISO 3166-2:SC"],["SL","SLE","694","ISO 3166-2:SL"],["SG","SGP","702","ISO 3166-2:SG"],["SK","SVK","703","ISO 3166-2:SK"],["SI","SVN","705","ISO 3166-2:SI"],["SB","SLB","090","ISO 3166-2:SB"],["SO","SOM","706","ISO 3166-2:SO"],["ZA","ZAF","710","ISO 3166-2:ZA"],["GS","SGS","239","ISO 3166-2:GS"],["ES","ESP","724","ISO 3166-2:ES"],["LK","LKA","144","ISO 3166-2:LK"],["SD","SDN","729","ISO 3166-2:SD"],["SR","SUR","740","ISO 3166-2:SR"],["SJ","SJM","744","ISO 3166-2:SJ"],["SZ","SWZ","748","ISO 3166-2:SZ"],["SE","SWE","752","ISO 3166-2:SE"],["CH","CHE","756","ISO 3166-2:CH"],["SY","SYR","760","ISO 3166-2:SY"],["TW","TWN","158","ISO 3166-2:TW"],["TJ","TJK","762","ISO 3166-2:TJ"],["TZ","TZA","834","ISO 3166-2:TZ"],["TH","THA","764","ISO 3166-2:TH"],["TL","TLS","626","ISO 3166-2:TL"],["TG","TGO","768","ISO 3166-2:TG"],["TK","TKL","772","ISO 3166-2:TK"],["TO","TON","776","ISO 3166-2:TO"],["TT","TTO","780","ISO 3166-2:TT"],["TN","TUN","788","ISO 3166-2:TN"],["TR","TUR","792","ISO 3166-2:TR"],["TM","TKM","795","ISO 3166-2:TM"],["TC","TCA","796","ISO 3166-2:TC"],["TV","TUV","798","ISO 3166-2:TV"],["UG","UGA","800","ISO 3166-2:UG"],["UA","UKR","804","ISO 3166-2:UA"],["AE","ARE","784","ISO 3166-2:AE"],["GB","GBR","826","ISO 3166-2:GB"],["US","USA","840","ISO 3166-2:US"],["UM","UMI","581","ISO 3166-2:UM"],["UY","URY","858","ISO 3166-2:UY"],["UZ","UZB","860","ISO 3166-2:UZ"],["VU","VUT","548","ISO 3166-2:VU"],["VE","VEN","862","ISO 3166-2:VE"],["VN","VNM","704","ISO 3166-2:VN"],["VG","VGB","092","ISO 3166-2:VG"],["VI","VIR","850","ISO 3166-2:VI"],["WF","WLF","876","ISO 3166-2:WF"],["EH","ESH","732","ISO 3166-2:EH"],["YE","YEM","887","ISO 3166-2:YE"],["ZM","ZMB","894","ISO 3166-2:ZM"],["ZW","ZWE","716","ISO 3166-2:ZW"],["AX","ALA","248","ISO 3166-2:AX"],["BQ","BES","535","ISO 3166-2:BQ"],["CW","CUW","531","ISO 3166-2:CW"],["GG","GGY","831","ISO 3166-2:GG"],["IM","IMN","833","ISO 3166-2:IM"],["JE","JEY","832","ISO 3166-2:JE"],["ME","MNE","499","ISO 3166-2:ME"],["BL","BLM","652","ISO 3166-2:BL"],["MF","MAF","663","ISO 3166-2:MF"],["RS","SRB","688","ISO 3166-2:RS"],["SX","SXM","534","ISO 3166-2:SX"],["SS","SSD","728","ISO 3166-2:SS"],["XK","XKX","983","ISO 3166-2:XK"]],eM=["br","cy","dv","sw","eu","af","am","ha","ku","ml","no","ps","sd","so","sq","ta","tg","tt","ug","ur","vi","ar","az","be","bg","bn","bs","ca","cs","da","de","el","en","es","et","fa","fi","fr","gl","he","hi","hr","hu","hy","id","is","it","ja","ka","kk","km","ko","ky","lt","lv","mk","mn","mr","ms","nb","nl","nn","pl","pt","ro","ru","sk","sl","sr","sv","th","tr","uk","uz","zh"];var jh={};jh.remove=iM;var Al=[{base:" ",chars:"Â "},{base:"0",chars:"ß€"},{base:"A",chars:"â’¶ï¼¡Ã€ÃÃ‚áº¦áº¤áºªáº¨ÃƒÄ€Ä‚áº°áº®áº´áº²È¦Ç Ã„Çžáº¢Ã…ÇºÇÈ€È‚áº áº¬áº¶á¸€Ä„Èºâ±¯"},{base:"AA",chars:"êœ²"},{base:"AE",chars:"Ã†Ç¼Ç¢"},{base:"AO",chars:"êœ´"},{base:"AU",chars:"êœ¶"},{base:"AV",chars:"êœ¸êœº"},{base:"AY",chars:"êœ¼"},{base:"B",chars:"â’·ï¼¢á¸‚á¸„á¸†ÉƒÆ"},{base:"C",chars:"â’¸ï¼£êœ¾á¸ˆÄ†CÄˆÄŠÄŒÃ‡Æ‡È»"},{base:"D",chars:"â’¹ï¼¤á¸ŠÄŽá¸Œá¸á¸’á¸ŽÄÆŠÆ‰á´…ê¹"},{base:"Dh",chars:"Ã"},{base:"DZ",chars:"Ç±Ç„"},{base:"Dz",chars:"Ç²Ç…"},{base:"E",chars:"É›â’ºï¼¥ÃˆÃ‰ÃŠá»€áº¾á»„á»‚áº¼Ä’á¸”á¸–Ä”Ä–Ã‹áººÄšÈ„È†áº¸á»†È¨á¸œÄ˜á¸˜á¸šÆÆŽá´‡"},{base:"F",chars:"ê¼â’»ï¼¦á¸žÆ‘ê»"},{base:"G",chars:"â’¼ï¼§Ç´Äœá¸ ÄžÄ Ç¦Ä¢Ç¤Æ“êž ê½ê¾É¢"},{base:"H",chars:"â’½ï¼¨Ä¤á¸¢á¸¦Èžá¸¤á¸¨á¸ªÄ¦â±§â±µêž"},{base:"I",chars:"â’¾ï¼©ÃŒÃÃŽÄ¨ÄªÄ¬Ä°Ãá¸®á»ˆÇÈˆÈŠá»ŠÄ®á¸¬Æ—"},{base:"J",chars:"â’¿ï¼ªÄ´ÉˆÈ·"},{base:"K",chars:"â“€ï¼«á¸°Ç¨á¸²Ä¶á¸´Æ˜â±©ê€ê‚ê„êž¢"},{base:"L",chars:"â“ï¼¬Ä¿Ä¹Ä½á¸¶á¸¸Ä»á¸¼á¸ºÅÈ½â±¢â± êˆê†êž€"},{base:"LJ",chars:"Ç‡"},{base:"Lj",chars:"Çˆ"},{base:"M",chars:"â“‚ï¼­á¸¾á¹€á¹‚â±®ÆœÏ»"},{base:"N",chars:"êž¤È â“ƒï¼®Ç¸ÅƒÃ‘á¹„Å‡á¹†Å…á¹Šá¹ˆÆêžá´Ž"},{base:"NJ",chars:"ÇŠ"},{base:"Nj",chars:"Ç‹"},{base:"O",chars:"â“„ï¼¯Ã’Ã“Ã”á»’á»á»–á»”Ã•á¹ŒÈ¬á¹ŽÅŒá¹á¹’ÅŽÈ®È°Ã–Èªá»ŽÅÇ‘ÈŒÈŽÆ á»œá»šá» á»žá»¢á»Œá»˜ÇªÇ¬Ã˜Ç¾Æ†ÆŸêŠêŒ"},{base:"OE",chars:"Å’"},{base:"OI",chars:"Æ¢"},{base:"OO",chars:"êŽ"},{base:"OU",chars:"È¢"},{base:"P",chars:"â“…ï¼°á¹”á¹–Æ¤â±£êê’ê”"},{base:"Q",chars:"â“†ï¼±ê–ê˜ÉŠ"},{base:"R",chars:"â“‡ï¼²Å”á¹˜Å˜ÈÈ’á¹šá¹œÅ–á¹žÉŒâ±¤êšêž¦êž‚"},{base:"S",chars:"â“ˆï¼³áºžÅšá¹¤Åœá¹ Å á¹¦á¹¢á¹¨È˜Åžâ±¾êž¨êž„"},{base:"T",chars:"â“‰ï¼´á¹ªÅ¤á¹¬ÈšÅ¢á¹°á¹®Å¦Æ¬Æ®È¾êž†"},{base:"Th",chars:"Ãž"},{base:"TZ",chars:"êœ¨"},{base:"U",chars:"â“Šï¼µÃ™ÃšÃ›Å¨á¹¸Åªá¹ºÅ¬ÃœÇ›Ç—Ç•Ç™á»¦Å®Å°Ç“È”È–Æ¯á»ªá»¨á»®á»¬á»°á»¤á¹²Å²á¹¶á¹´É„"},{base:"V",chars:"â“‹ï¼¶á¹¼á¹¾Æ²êžÉ…"},{base:"VY",chars:"ê "},{base:"W",chars:"â“Œï¼·áº€áº‚Å´áº†áº„áºˆâ±²"},{base:"X",chars:"â“ï¼¸áºŠáºŒ"},{base:"Y",chars:"â“Žï¼¹á»²ÃÅ¶á»¸È²áºŽÅ¸á»¶á»´Æ³ÉŽá»¾"},{base:"Z",chars:"â“ï¼ºÅ¹áºÅ»Å½áº’áº”ÆµÈ¤â±¿â±«ê¢"},{base:"a",chars:"â“ï½áºšÃ Ã¡Ã¢áº§áº¥áº«áº©Ã£ÄÄƒáº±áº¯áºµáº³È§Ç¡Ã¤ÇŸáº£Ã¥Ç»ÇŽÈÈƒáº¡áº­áº·á¸Ä…â±¥ÉÉ‘"},{base:"aa",chars:"êœ³"},{base:"ae",chars:"Ã¦Ç½Ç£"},{base:"ao",chars:"êœµ"},{base:"au",chars:"êœ·"},{base:"av",chars:"êœ¹êœ»"},{base:"ay",chars:"êœ½"},{base:"b",chars:"â“‘ï½‚á¸ƒá¸…á¸‡Æ€ÆƒÉ“Æ‚"},{base:"c",chars:"ï½ƒâ“’Ä‡Ä‰Ä‹ÄÃ§á¸‰ÆˆÈ¼êœ¿â†„"},{base:"d",chars:"â““ï½„á¸‹Äá¸á¸‘á¸“á¸Ä‘ÆŒÉ–É—Æ‹á§Ôêžª"},{base:"dh",chars:"Ã°"},{base:"dz",chars:"Ç³Ç†"},{base:"e",chars:"â“”ï½…Ã¨Ã©Ãªá»áº¿á»…á»ƒáº½Ä“á¸•á¸—Ä•Ä—Ã«áº»Ä›È…È‡áº¹á»‡È©á¸Ä™á¸™á¸›É‡Ç"},{base:"f",chars:"â“•ï½†á¸ŸÆ’"},{base:"ff",chars:"ï¬€"},{base:"fi",chars:"ï¬"},{base:"fl",chars:"ï¬‚"},{base:"ffi",chars:"ï¬ƒ"},{base:"ffl",chars:"ï¬„"},{base:"g",chars:"â“–ï½‡ÇµÄá¸¡ÄŸÄ¡Ç§Ä£Ç¥É êž¡ê¿áµ¹"},{base:"h",chars:"â“—ï½ˆÄ¥á¸£á¸§ÈŸá¸¥á¸©á¸«áº–Ä§â±¨â±¶É¥"},{base:"hv",chars:"Æ•"},{base:"i",chars:"â“˜ï½‰Ã¬Ã­Ã®Ä©Ä«Ä­Ã¯á¸¯á»‰ÇÈ‰È‹á»‹Ä¯á¸­É¨Ä±"},{base:"j",chars:"â“™ï½ŠÄµÇ°É‰"},{base:"k",chars:"â“šï½‹á¸±Ç©á¸³Ä·á¸µÆ™â±ªêêƒê…êž£"},{base:"l",chars:"â“›ï½ŒÅ€ÄºÄ¾á¸·á¸¹Ä¼á¸½á¸»Å¿Å‚ÆšÉ«â±¡ê‰êžê‡É­"},{base:"lj",chars:"Ç‰"},{base:"m",chars:"â“œï½á¸¿á¹á¹ƒÉ±É¯"},{base:"n",chars:"â“ï½ŽÇ¹Å„Ã±á¹…Åˆá¹‡Å†á¹‹á¹‰ÆžÉ²Å‰êž‘êž¥Ð»Ô‰"},{base:"nj",chars:"ÇŒ"},{base:"o",chars:"â“žï½Ã²Ã³Ã´á»“á»‘á»—á»•Ãµá¹È­á¹Åá¹‘á¹“ÅÈ¯È±Ã¶È«á»Å‘Ç’ÈÈÆ¡á»á»›á»¡á»Ÿá»£á»á»™Ç«Ç­Ã¸Ç¿ê‹êÉµÉ”á´‘"},{base:"oe",chars:"Å“"},{base:"oi",chars:"Æ£"},{base:"oo",chars:"ê"},{base:"ou",chars:"È£"},{base:"p",chars:"â“Ÿï½á¹•á¹—Æ¥áµ½ê‘ê“ê•Ï"},{base:"q",chars:"â“ ï½‘É‹ê—ê™"},{base:"r",chars:"â“¡ï½’Å•á¹™Å™È‘È“á¹›á¹Å—á¹ŸÉÉ½ê›êž§êžƒ"},{base:"s",chars:"â“¢ï½“Å›á¹¥Åá¹¡Å¡á¹§á¹£á¹©È™ÅŸÈ¿êž©êž…áº›Ê‚"},{base:"ss",chars:"ÃŸ"},{base:"t",chars:"â“£ï½”á¹«áº—Å¥á¹­È›Å£á¹±á¹¯Å§Æ­Êˆâ±¦êž‡"},{base:"th",chars:"Ã¾"},{base:"tz",chars:"êœ©"},{base:"u",chars:"â“¤ï½•Ã¹ÃºÃ»Å©á¹¹Å«á¹»Å­Ã¼ÇœÇ˜Ç–Çšá»§Å¯Å±Ç”È•È—Æ°á»«á»©á»¯á»­á»±á»¥á¹³Å³á¹·á¹µÊ‰"},{base:"v",chars:"â“¥ï½–á¹½á¹¿Ê‹êŸÊŒ"},{base:"vy",chars:"ê¡"},{base:"w",chars:"â“¦ï½—áºáºƒÅµáº‡áº…áº˜áº‰â±³"},{base:"x",chars:"â“§ï½˜áº‹áº"},{base:"y",chars:"â“¨ï½™á»³Ã½Å·á»¹È³áºÃ¿á»·áº™á»µÆ´Éá»¿"},{base:"z",chars:"â“©ï½šÅºáº‘Å¼Å¾áº“áº•Æ¶È¥É€â±¬ê£"}],vf={};for(var qa=0;qa<Al.length;qa+=1)for(var Fg=Al[qa].chars,eu=0;eu<Fg.length;eu+=1)vf[Fg[eu]]=Al[qa].base;function iM(i){return i.replace(/[^\u0000-\u007e]/g,function(t){return vf[t]||t})}jh.replacementList=Al;jh.diacriticsMap=vf;(function(i){const t=tM,e=eM,s=jh.remove,n={},r={},o={},a={},l={};t.forEach(function(x){const E=x;r[E[0]]=E[1],o[E[1]]=E[0],a[E[2]]=E[0],l[E[0]]=E[2]});function h(x){return("000"+(x||"")).slice(-3)}function c(x,E){return Object.prototype.hasOwnProperty.call(x,E)}function u(x,E){return Object.keys(x).reduce(function(S,A){const M=x[A];return S[A]=E(M,A),S},{})}function d(x,E){switch(x){case"official":return Array.isArray(E)?E[0]:E;case"all":return typeof E=="string"?[E]:E;case"alias":return Array.isArray(E)?E[1]||E[0]:E;default:throw new TypeError("LocaleNameType must be one of these: all, official, alias!")}}i.registerLocale=function(x){if(!x.locale)throw new TypeError("Missing localeData.locale");if(!x.countries)throw new TypeError("Missing localeData.countries");n[x.locale]=x.countries};function f(x){return o[x]}i.alpha3ToAlpha2=f;function p(x){return r[x]}i.alpha2ToAlpha3=p;function g(x){return l[f(x)]}i.alpha3ToNumeric=g;function m(x){return l[x]}i.alpha2ToNumeric=m;function _(x){const E=h(x);return p(a[E])}i.numericToAlpha3=_;function y(x){const E=h(x);return a[E]}i.numericToAlpha2=y;function b(x){if(typeof x=="string"){if(/^[0-9]*$/.test(x))return _(x);if(x.length===2)return p(x.toUpperCase());if(x.length===3)return x.toUpperCase()}if(typeof x=="number")return _(x)}i.toAlpha3=b;function v(x){if(typeof x=="string"){if(/^[0-9]*$/.test(x))return y(x);if(x.length===2)return x.toUpperCase();if(x.length===3)return f(x.toUpperCase())}if(typeof x=="number")return y(x)}i.toAlpha2=v,i.getName=function(x,E,S={}){"select"in S||(S.select="official");try{const M=n[E.toLowerCase()][v(x)];return d(S.select,M)}catch{return}},i.getNames=function(x,E={}){"select"in E||(E.select="official");const S=n[x.toLowerCase()];return S===void 0?{}:u(S,function(A){return d(E.select,A)})},i.getAlpha2Code=function(x,E){const S=M=>M.toLowerCase(),A=(M,I)=>S(M)===S(I);try{const M=n[E.toLowerCase()];for(const I in M)if(c(M,I)){if(typeof M[I]=="string"&&A(M[I],x))return I;if(Array.isArray(M[I])){for(const C of M[I])if(A(C,x))return I}}return}catch{return}},i.getSimpleAlpha2Code=function(x,E){const S=M=>s(M.toLowerCase()),A=(M,I)=>S(M)===S(I);try{const M=n[E.toLowerCase()];for(const I in M)if(c(M,I)){if(typeof M[I]=="string"&&A(M[I],x))return I;if(Array.isArray(M[I])){for(const C of M[I])if(A(C,x))return I}}return}catch{return}},i.getAlpha2Codes=function(){return r},i.getAlpha3Code=function(x,E){const S=i.getAlpha2Code(x,E);if(S)return i.toAlpha3(S)},i.getSimpleAlpha3Code=function(x,E){const S=i.getSimpleAlpha2Code(x,E);if(S)return i.toAlpha3(S)},i.getAlpha3Codes=function(){return o},i.getNumericCodes=function(){return a},i.langs=function(){return Object.keys(n)},i.getSupportedLanguages=function(){return e},i.isValid=function(x){if(!x)return!1;const E=x.toString().toUpperCase();return c(o,E)||c(r,E)||c(a,E)}})(Tr);function Xh(i){return i.split("-")[1]}function Ob(i){return i==="y"?"height":"width"}function Pn(i){return i.split("-")[0]}function Yh(i){return["top","bottom"].includes(Pn(i))?"x":"y"}function Bg(i,t,e){let{reference:s,floating:n}=i;const r=s.x+s.width/2-n.width/2,o=s.y+s.height/2-n.height/2,a=Yh(t),l=Ob(a),h=s[l]/2-n[l]/2,c=a==="x";let u;switch(Pn(t)){case"top":u={x:r,y:s.y-n.height};break;case"bottom":u={x:r,y:s.y+s.height};break;case"right":u={x:s.x+s.width,y:o};break;case"left":u={x:s.x-n.width,y:o};break;default:u={x:s.x,y:s.y}}switch(Xh(t)){case"start":u[a]-=h*(e&&c?-1:1);break;case"end":u[a]+=h*(e&&c?-1:1)}return u}const sM=async(i,t,e)=>{const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o}=e,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:i,floating:t,strategy:n}),{x:c,y:u}=Bg(h,s,l),d=s,f={},p=0;for(let g=0;g<a.length;g++){const{name:m,fn:_}=a[g],{x:y,y:b,data:v,reset:x}=await _({x:c,y:u,initialPlacement:s,placement:d,strategy:n,middlewareData:f,rects:h,platform:o,elements:{reference:i,floating:t}});c=y??c,u=b??u,f={...f,[m]:{...f[m],...v}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(h=x.rects===!0?await o.getElementRects({reference:i,floating:t,strategy:n}):x.rects),{x:c,y:u}=Bg(h,d,l)),g=-1)}return{x:c,y:u,placement:d,strategy:n,middlewareData:f}};function nM(i){return typeof i!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(i):{top:i,right:i,bottom:i,left:i}}function ch(i){return{...i,top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height}}async function kb(i,t){var e;t===void 0&&(t={});const{x:s,y:n,platform:r,rects:o,elements:a,strategy:l}=i,{boundary:h="clippingAncestors",rootBoundary:c="viewport",elementContext:u="floating",altBoundary:d=!1,padding:f=0}=t,p=nM(f),g=a[d?u==="floating"?"reference":"floating":u],m=ch(await r.getClippingRect({element:(e=await(r.isElement==null?void 0:r.isElement(g)))==null||e?g:g.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:h,rootBoundary:c,strategy:l})),_=u==="floating"?{...o.floating,x:s,y:n}:o.reference,y=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),b=await(r.isElement==null?void 0:r.isElement(y))&&await(r.getScale==null?void 0:r.getScale(y))||{x:1,y:1},v=ch(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:y,strategy:l}):_);return{top:(m.top-v.top+p.top)/b.y,bottom:(v.bottom-m.bottom+p.bottom)/b.y,left:(m.left-v.left+p.left)/b.x,right:(v.right-m.right+p.right)/b.x}}const rM=Math.min,oM=Math.max;function Lg(i,t,e){return oM(i,rM(t,e))}const aM=["top","right","bottom","left"];aM.reduce((i,t)=>i.concat(t,t+"-start",t+"-end"),[]);const lM={left:"right",right:"left",bottom:"top",top:"bottom"};function uh(i){return i.replace(/left|right|bottom|top/g,t=>lM[t])}function hM(i,t,e){e===void 0&&(e=!1);const s=Xh(i),n=Yh(i),r=Ob(n);let o=n==="x"?s===(e?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=uh(o)),{main:o,cross:uh(o)}}const cM={start:"end",end:"start"};function iu(i){return i.replace(/start|end/g,t=>cM[t])}const uM=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(t){var e;const{placement:s,middlewareData:n,rects:r,initialPlacement:o,platform:a,elements:l}=t,{mainAxis:h=!0,crossAxis:c=!0,fallbackPlacements:u,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...g}=i,m=Pn(s),_=Pn(o)===o,y=await(a.isRTL==null?void 0:a.isRTL(l.floating)),b=u||(_||!p?[uh(o)]:function(C){const F=uh(C);return[iu(C),F,iu(F)]}(o));u||f==="none"||b.push(...function(C,F,R,w){const T=Xh(C);let B=function(P,L,k){const O=["left","right"],U=["right","left"],j=["top","bottom"],q=["bottom","top"];switch(P){case"top":case"bottom":return k?L?U:O:L?O:U;case"left":case"right":return L?j:q;default:return[]}}(Pn(C),R==="start",w);return T&&(B=B.map(P=>P+"-"+T),F&&(B=B.concat(B.map(iu)))),B}(o,p,f,y));const v=[o,...b],x=await kb(t,g),E=[];let S=((e=n.flip)==null?void 0:e.overflows)||[];if(h&&E.push(x[m]),c){const{main:C,cross:F}=hM(s,r,y);E.push(x[C],x[F])}if(S=[...S,{placement:s,overflows:E}],!E.every(C=>C<=0)){var A,M;const C=(((A=n.flip)==null?void 0:A.index)||0)+1,F=v[C];if(F)return{data:{index:C,overflows:S},reset:{placement:F}};let R=(M=S.filter(w=>w.overflows[0]<=0).sort((w,T)=>w.overflows[1]-T.overflows[1])[0])==null?void 0:M.placement;if(!R)switch(d){case"bestFit":{var I;const w=(I=S.map(T=>[T.placement,T.overflows.filter(B=>B>0).reduce((B,P)=>B+P,0)]).sort((T,B)=>T[1]-B[1])[0])==null?void 0:I[0];w&&(R=w);break}case"initialPlacement":R=o}if(s!==R)return{reset:{placement:R}}}return{}}}},dM=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(t){const{x:e,y:s}=t,n=await async function(r,o){const{placement:a,platform:l,elements:h}=r,c=await(l.isRTL==null?void 0:l.isRTL(h.floating)),u=Pn(a),d=Xh(a),f=Yh(a)==="x",p=["left","top"].includes(u)?-1:1,g=c&&f?-1:1,m=typeof o=="function"?o(r):o;let{mainAxis:_,crossAxis:y,alignmentAxis:b}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return d&&typeof b=="number"&&(y=d==="end"?-1*b:b),f?{x:y*g,y:_*p}:{x:_*p,y:y*g}}(t,i);return{x:e+n.x,y:s+n.y,data:n}}}};function fM(i){return i==="x"?"y":"x"}const pM=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(t){const{x:e,y:s,placement:n}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:_,y}=m;return{x:_,y}}},...l}=i,h={x:e,y:s},c=await kb(t,l),u=Yh(Pn(n)),d=fM(u);let f=h[u],p=h[d];if(r){const m=u==="y"?"bottom":"right";f=Lg(f+c[u==="y"?"top":"left"],f,f-c[m])}if(o){const m=d==="y"?"bottom":"right";p=Lg(p+c[d==="y"?"top":"left"],p,p-c[m])}const g=a.fn({...t,[u]:f,[d]:p});return{...g,data:{x:g.x-e,y:g.y-s}}}}};function Ke(i){var t;return((t=i.ownerDocument)==null?void 0:t.defaultView)||window}function qi(i){return Ke(i).getComputedStyle(i)}function Fb(i){return i instanceof Ke(i).Node}function Qs(i){return Fb(i)?(i.nodeName||"").toLowerCase():""}let Za;function Bb(){if(Za)return Za;const i=navigator.userAgentData;return i&&Array.isArray(i.brands)?(Za=i.brands.map(t=>t.brand+"/"+t.version).join(" "),Za):navigator.userAgent}function Ri(i){return i instanceof Ke(i).HTMLElement}function Ii(i){return i instanceof Ke(i).Element}function Ng(i){return typeof ShadowRoot>"u"?!1:i instanceof Ke(i).ShadowRoot||i instanceof ShadowRoot}function $h(i){const{overflow:t,overflowX:e,overflowY:s,display:n}=qi(i);return/auto|scroll|overlay|hidden|clip/.test(t+s+e)&&!["inline","contents"].includes(n)}function gM(i){return["table","td","th"].includes(Qs(i))}function xd(i){const t=/firefox/i.test(Bb()),e=qi(i),s=e.backdropFilter||e.WebkitBackdropFilter;return e.transform!=="none"||e.perspective!=="none"||!!s&&s!=="none"||t&&e.willChange==="filter"||t&&!!e.filter&&e.filter!=="none"||["transform","perspective"].some(n=>e.willChange.includes(n))||["paint","layout","strict","content"].some(n=>{const r=e.contain;return r!=null&&r.includes(n)})}function vd(){return/^((?!chrome|android).)*safari/i.test(Bb())}function wf(i){return["html","body","#document"].includes(Qs(i))}const Ug=Math.min,Po=Math.max,dh=Math.round;function Lb(i){const t=qi(i);let e=parseFloat(t.width),s=parseFloat(t.height);const n=Ri(i),r=n?i.offsetWidth:e,o=n?i.offsetHeight:s,a=dh(e)!==r||dh(s)!==o;return a&&(e=r,s=o),{width:e,height:s,fallback:a}}function Nb(i){return Ii(i)?i:i.contextElement}const Ub={x:1,y:1};function Ar(i){const t=Nb(i);if(!Ri(t))return Ub;const e=t.getBoundingClientRect(),{width:s,height:n,fallback:r}=Lb(t);let o=(r?dh(e.width):e.width)/s,a=(r?dh(e.height):e.height)/n;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function Nn(i,t,e,s){var n,r;t===void 0&&(t=!1),e===void 0&&(e=!1);const o=i.getBoundingClientRect(),a=Nb(i);let l=Ub;t&&(s?Ii(s)&&(l=Ar(s)):l=Ar(i));const h=a?Ke(a):window,c=vd()&&e;let u=(o.left+(c&&((n=h.visualViewport)==null?void 0:n.offsetLeft)||0))/l.x,d=(o.top+(c&&((r=h.visualViewport)==null?void 0:r.offsetTop)||0))/l.y,f=o.width/l.x,p=o.height/l.y;if(a){const g=Ke(a),m=s&&Ii(s)?Ke(s):s;let _=g.frameElement;for(;_&&s&&m!==g;){const y=Ar(_),b=_.getBoundingClientRect(),v=getComputedStyle(_);b.x+=(_.clientLeft+parseFloat(v.paddingLeft))*y.x,b.y+=(_.clientTop+parseFloat(v.paddingTop))*y.y,u*=y.x,d*=y.y,f*=y.x,p*=y.y,u+=b.x,d+=b.y,_=Ke(_).frameElement}}return ch({width:f,height:p,x:u,y:d})}function Ws(i){return((Fb(i)?i.ownerDocument:i.document)||window.document).documentElement}function Kh(i){return Ii(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function Gb(i){return Nn(Ws(i)).left+Kh(i).scrollLeft}function ta(i){if(Qs(i)==="html")return i;const t=i.assignedSlot||i.parentNode||Ng(i)&&i.host||Ws(i);return Ng(t)?t.host:t}function Hb(i){const t=ta(i);return wf(t)?t.ownerDocument.body:Ri(t)&&$h(t)?t:Hb(t)}function Ro(i,t){var e;t===void 0&&(t=[]);const s=Hb(i),n=s===((e=i.ownerDocument)==null?void 0:e.body),r=Ke(s);return n?t.concat(r,r.visualViewport||[],$h(s)?s:[]):t.concat(s,Ro(s))}function Gg(i,t,e){let s;if(t==="viewport")s=function(o,a){const l=Ke(o),h=Ws(o),c=l.visualViewport;let u=h.clientWidth,d=h.clientHeight,f=0,p=0;if(c){u=c.width,d=c.height;const g=vd();(!g||g&&a==="fixed")&&(f=c.offsetLeft,p=c.offsetTop)}return{width:u,height:d,x:f,y:p}}(i,e);else if(t==="document")s=function(o){const a=Ws(o),l=Kh(o),h=o.ownerDocument.body,c=Po(a.scrollWidth,a.clientWidth,h.scrollWidth,h.clientWidth),u=Po(a.scrollHeight,a.clientHeight,h.scrollHeight,h.clientHeight);let d=-l.scrollLeft+Gb(o);const f=-l.scrollTop;return qi(h).direction==="rtl"&&(d+=Po(a.clientWidth,h.clientWidth)-c),{width:c,height:u,x:d,y:f}}(Ws(i));else if(Ii(t))s=function(o,a){const l=Nn(o,!0,a==="fixed"),h=l.top+o.clientTop,c=l.left+o.clientLeft,u=Ri(o)?Ar(o):{x:1,y:1};return{width:o.clientWidth*u.x,height:o.clientHeight*u.y,x:c*u.x,y:h*u.y}}(t,e);else{const o={...t};if(vd()){var n,r;const a=Ke(i);o.x-=((n=a.visualViewport)==null?void 0:n.offsetLeft)||0,o.y-=((r=a.visualViewport)==null?void 0:r.offsetTop)||0}s=o}return ch(s)}function Hg(i,t){return Ri(i)&&qi(i).position!=="fixed"?t?t(i):i.offsetParent:null}function zg(i,t){const e=Ke(i);if(!Ri(i))return e;let s=Hg(i,t);for(;s&&gM(s)&&qi(s).position==="static";)s=Hg(s,t);return s&&(Qs(s)==="html"||Qs(s)==="body"&&qi(s).position==="static"&&!xd(s))?e:s||function(n){let r=ta(n);for(;Ri(r)&&!wf(r);){if(xd(r))return r;r=ta(r)}return null}(i)||e}function mM(i,t,e){const s=Ri(t),n=Ws(t),r=Nn(i,!0,e==="fixed",t);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(s||!s&&e!=="fixed")if((Qs(t)!=="body"||$h(n))&&(o=Kh(t)),Ri(t)){const l=Nn(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else n&&(a.x=Gb(n));return{x:r.left+o.scrollLeft-a.x,y:r.top+o.scrollTop-a.y,width:r.width,height:r.height}}const _M={getClippingRect:function(i){let{element:t,boundary:e,rootBoundary:s,strategy:n}=i;const r=e==="clippingAncestors"?function(h,c){const u=c.get(h);if(u)return u;let d=Ro(h).filter(m=>Ii(m)&&Qs(m)!=="body"),f=null;const p=qi(h).position==="fixed";let g=p?ta(h):h;for(;Ii(g)&&!wf(g);){const m=qi(g),_=xd(g);m.position==="fixed"&&(f=null),(p?_||f:_||m.position!=="static"||!f||!["absolute","fixed"].includes(f.position))?f=m:d=d.filter(y=>y!==g),g=ta(g)}return c.set(h,d),d}(t,this._c):[].concat(e),o=[...r,s],a=o[0],l=o.reduce((h,c)=>{const u=Gg(t,c,n);return h.top=Po(u.top,h.top),h.right=Ug(u.right,h.right),h.bottom=Ug(u.bottom,h.bottom),h.left=Po(u.left,h.left),h},Gg(t,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(i){let{rect:t,offsetParent:e,strategy:s}=i;const n=Ri(e),r=Ws(e);if(e===r)return t;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((n||!n&&s!=="fixed")&&((Qs(e)!=="body"||$h(r))&&(o=Kh(e)),Ri(e))){const h=Nn(e);a=Ar(e),l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+l.x,y:t.y*a.y-o.scrollTop*a.y+l.y}},isElement:Ii,getDimensions:function(i){return Lb(i)},getOffsetParent:zg,getDocumentElement:Ws,getScale:Ar,async getElementRects(i){let{reference:t,floating:e,strategy:s}=i;const n=this.getOffsetParent||zg,r=this.getDimensions;return{reference:mM(t,await n(e),s),floating:{x:0,y:0,...await r(e)}}},getClientRects:i=>Array.from(i.getClientRects()),isRTL:i=>qi(i).direction==="rtl"};function yM(i,t,e,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:o=!0,animationFrame:a=!1}=s,l=n&&!a,h=l||r?[...Ii(i)?Ro(i):i.contextElement?Ro(i.contextElement):[],...Ro(t)]:[];h.forEach(f=>{l&&f.addEventListener("scroll",e,{passive:!0}),r&&f.addEventListener("resize",e)});let c,u=null;o&&(u=new ResizeObserver(()=>{e()}),Ii(i)&&!a&&u.observe(i),Ii(i)||!i.contextElement||a||u.observe(i.contextElement),u.observe(t));let d=a?Nn(i):null;return a&&function f(){const p=Nn(i);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||e(),d=p,c=requestAnimationFrame(f)}(),e(),()=>{var f;h.forEach(p=>{l&&p.removeEventListener("scroll",e),r&&p.removeEventListener("resize",e)}),(f=u)==null||f.disconnect(),u=null,a&&cancelAnimationFrame(c)}}const bM=(i,t,e)=>{const s=new Map,n={platform:_M,...e},r={...n.platform,_c:s};return sM(i,t,{...n,platform:r})};function xM(i){let t,e;const s={autoUpdate:!0};let n=i;const r=c=>({...s,...i||{},...c||{}}),o=c=>{t&&e&&(n=r(c),bM(t,e,n).then(u=>{Object.assign(e.style,{position:u.strategy,left:`${u.x}px`,top:`${u.y}px`}),n!=null&&n.onComputed&&n.onComputed(u)}))},a=c=>{if("subscribe"in c)return h(c),{};t=c,o()},l=(c,u)=>{let d;e=c,n=r(u),setTimeout(()=>o(u),0),o(u);const f=()=>{d&&(d(),d=void 0)},p=({autoUpdate:g}=n||{})=>{if(f(),g!==!1)return yM(t,e,()=>o(n),g===!0?{}:g)};return d=p(),{update(g){o(g),d=p(g)},destroy(){f()}}},h=c=>{const u=c.subscribe(d=>{t===void 0?(t=d,o()):(Object.assign(t,d),o())});Wr(u)};return[a,l,o]}function vM({loadOptions:i,filterText:t,items:e,multiple:s,value:n,itemId:r,groupBy:o,filterSelectedItems:a,itemFilter:l,convertStringItemsToObjects:h,filterGroupedItems:c,label:u}){if(e&&i)return e;if(!e)return[];e&&e.length>0&&typeof e[0]!="object"&&(e=h(e));let d=e.filter(f=>{let p=l(f[u],t,f);return p&&s&&(n!=null&&n.length)&&(p=!n.some(g=>a?g[r]===f[r]:!1)),p});return o&&(d=c(d)),d}async function wM({dispatch:i,loadOptions:t,convertStringItemsToObjects:e,filterText:s}){let n=await t(s).catch(r=>{console.warn("svelte-select loadOptions error :>> ",r),i("error",{type:"loadOptions",details:r})});if(n&&!n.cancelled)return n?(n&&n.length>0&&typeof n[0]!="object"&&(n=e(n)),i("loaded",{items:n})):n=[],{filteredItems:n,loading:!1,focused:!0,listOpen:!0}}function SM(i){let t,e;return{c(){t=Mr("svg"),e=Mr("path"),H(e,"fill","currentColor"),H(e,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),H(t,"width","100%"),H(t,"height","100%"),H(t,"viewBox","0 0 20 20"),H(t,"focusable","false"),H(t,"aria-hidden","true"),H(t,"class","svelte-qbd276")},m(s,n){ct(s,t,n),Z(t,e)},p:st,i:st,o:st,d(s){s&&ht(t)}}}class EM extends te{constructor(t){super(),Qt(this,t,null,SM,$t,{})}}function TM(i){let t,e;return{c(){t=Mr("svg"),e=Mr("path"),H(e,"fill","currentColor"),H(e,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),H(t,"width","100%"),H(t,"height","100%"),H(t,"viewBox","-2 -2 50 50"),H(t,"focusable","false"),H(t,"aria-hidden","true"),H(t,"role","presentation"),H(t,"class","svelte-whdbu1")},m(s,n){ct(s,t,n),Z(t,e)},p:st,i:st,o:st,d(s){s&&ht(t)}}}class fh extends te{constructor(t){super(),Qt(this,t,null,TM,$t,{})}}function AM(i){let t,e;return{c(){t=Mr("svg"),e=Mr("circle"),H(e,"class","circle_path svelte-1p3nqvd"),H(e,"cx","50"),H(e,"cy","50"),H(e,"r","20"),H(e,"fill","none"),H(e,"stroke","currentColor"),H(e,"stroke-width","5"),H(e,"stroke-miterlimit","10"),H(t,"class","loading svelte-1p3nqvd"),H(t,"viewBox","25 25 50 50")},m(s,n){ct(s,t,n),Z(t,e)},p:st,i:st,o:st,d(s){s&&ht(t)}}}class CM extends te{constructor(t){super(),Qt(this,t,null,AM,$t,{})}}const MM=i=>({value:i[0]&8}),Vg=i=>({value:i[3]}),IM=i=>({value:i[0]&8}),Wg=i=>({value:i[3]}),PM=i=>({listOpen:i[0]&64}),jg=i=>({listOpen:i[6]}),RM=i=>({}),Xg=i=>({}),DM=i=>({}),Yg=i=>({}),OM=i=>({selection:i[0]&8}),$g=i=>({selection:i[3]});function Kg(i,t,e){const s=i.slice();return s[125]=t[e],s[127]=e,s}const kM=i=>({}),qg=i=>({}),FM=i=>({selection:i[0]&8}),Zg=i=>({selection:i[125],index:i[127]}),BM=i=>({}),Jg=i=>({}),LM=i=>({}),Qg=i=>({}),NM=i=>({}),tm=i=>({});function em(i,t,e){const s=i.slice();return s[125]=t[e],s[127]=e,s}const UM=i=>({item:i[0]&16777216}),im=i=>({item:i[125],index:i[127]}),GM=i=>({filteredItems:i[0]&16777216}),sm=i=>({filteredItems:i[24]}),HM=i=>({}),nm=i=>({});function rm(i){let t,e,s,n,r,o,a,l,h=i[50]["list-prepend"]&&om(i);const c=[WM,VM,zM],u=[];function d(p,g){return p[50].list?0:p[24].length>0?1:p[19]?-1:2}~(s=d(i))&&(n=u[s]=c[s](i));let f=i[50]["list-append"]&&lm(i);return{c(){t=J("div"),h&&h.c(),e=xt(),n&&n.c(),r=xt(),f&&f.c(),H(t,"class","svelte-select-list svelte-apvs86"),Et(t,"prefloat",i[28])},m(p,g){ct(p,t,g),h&&h.m(t,null),Z(t,e),~s&&u[s].m(t,null),Z(t,r),f&&f.m(t,null),i[90](t),o=!0,a||(l=[Ll(i[49].call(null,t)),kt(t,"scroll",i[41]),kt(t,"pointerup",Ir(Xs(i[85])))],a=!0)},p(p,g){p[50]["list-prepend"]?h?(h.p(p,g),g[1]&524288&&$(h,1)):(h=om(p),h.c(),$(h,1),h.m(t,e)):h&&(de(),tt(h,1,1,()=>{h=null}),fe());let m=s;s=d(p),s===m?~s&&u[s].p(p,g):(n&&(de(),tt(u[m],1,1,()=>{u[m]=null}),fe()),~s?(n=u[s],n?n.p(p,g):(n=u[s]=c[s](p),n.c()),$(n,1),n.m(t,r)):n=null),p[50]["list-append"]?f?(f.p(p,g),g[1]&524288&&$(f,1)):(f=lm(p),f.c(),$(f,1),f.m(t,null)):f&&(de(),tt(f,1,1,()=>{f=null}),fe()),(!o||g[0]&268435456)&&Et(t,"prefloat",p[28])},i(p){o||($(h),$(n),$(f),o=!0)},o(p){tt(h),tt(n),tt(f),o=!1},d(p){p&&ht(t),h&&h.d(),~s&&u[s].d(),f&&f.d(),i[90](null),a=!1,es(l)}}}function om(i){let t;const e=i[82]["list-prepend"],s=Ne(e,i,i[81],nm);return{c(){s&&s.c()},m(n,r){s&&s.m(n,r),t=!0},p(n,r){s&&s.p&&(!t||r[2]&524288)&&Ge(s,e,n,n[81],t?Ue(e,n[81],r,HM):He(n[81]),nm)},i(n){t||($(s,n),t=!0)},o(n){tt(s,n),t=!1},d(n){s&&s.d(n)}}}function zM(i){let t;const e=i[82].empty,s=Ne(e,i,i[81],tm),n=s||jM();return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),t=!0},p(r,o){s&&s.p&&(!t||o[2]&524288)&&Ge(s,e,r,r[81],t?Ue(e,r[81],o,NM):He(r[81]),tm)},i(r){t||($(n,r),t=!0)},o(r){tt(n,r),t=!1},d(r){n&&n.d(r)}}}function VM(i){let t,e,s=i[24],n=[];for(let o=0;o<s.length;o+=1)n[o]=am(em(i,s,o));const r=o=>tt(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=Vr()},m(o,a){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(o,a);ct(o,t,a),e=!0},p(o,a){if(a[0]&1627402376|a[1]&28672|a[2]&524288){s=o[24];let l;for(l=0;l<s.length;l+=1){const h=em(o,s,l);n[l]?(n[l].p(h,a),$(n[l],1)):(n[l]=am(h),n[l].c(),$(n[l],1),n[l].m(t.parentNode,t))}for(de(),l=s.length;l<n.length;l+=1)r(l);fe()}},i(o){if(!e){for(let a=0;a<s.length;a+=1)$(n[a]);e=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)tt(n[a]);e=!1},d(o){Sh(n,o),o&&ht(t)}}}function WM(i){let t;const e=i[82].list,s=Ne(e,i,i[81],sm);return{c(){s&&s.c()},m(n,r){s&&s.m(n,r),t=!0},p(n,r){s&&s.p&&(!t||r[0]&16777216|r[2]&524288)&&Ge(s,e,n,n[81],t?Ue(e,n[81],r,GM):He(n[81]),sm)},i(n){t||($(s,n),t=!0)},o(n){tt(s,n),t=!1},d(n){s&&s.d(n)}}}function jM(i){let t;return{c(){t=J("div"),t.textContent="No options",H(t,"class","empty svelte-apvs86")},m(e,s){ct(e,t,s)},p:st,d(e){e&&ht(t)}}}function XM(i){var s;let t=((s=i[125])==null?void 0:s[i[12]])+"",e;return{c(){e=Ie(t)},m(n,r){ct(n,e,r)},p(n,r){var o;r[0]&16781312&&t!==(t=((o=n[125])==null?void 0:o[n[12]])+"")&&qe(e,t)},d(n){n&&ht(e)}}}function am(i){let t,e,s,n,r,o,a,l;const h=i[82].item,c=Ne(h,i,i[81],im),u=c||XM(i);function d(){return i[87](i[127])}function f(){return i[88](i[127])}function p(){return i[89](i[125],i[127])}return{c(){var g;t=J("div"),e=J("div"),u&&u.c(),r=xt(),H(e,"class","item svelte-apvs86"),Et(e,"list-group-title",i[125].groupHeader),Et(e,"active",i[45](i[125],i[3],i[13])),Et(e,"first",nI(i[127])),Et(e,"hover",i[7]===i[127]),Et(e,"group-item",i[125].groupItem),Et(e,"not-selectable",((g=i[125])==null?void 0:g.selectable)===!1),H(t,"class","list-item svelte-apvs86"),H(t,"tabindex","-1")},m(g,m){ct(g,t,m),Z(t,e),u&&u.m(e,null),Z(t,r),o=!0,a||(l=[Ll(s=i[46].call(null,e,{scroll:i[45](i[125],i[3],i[13]),listDom:i[30]})),Ll(n=i[47].call(null,e,{scroll:i[29]===i[127],listDom:i[30]})),kt(t,"mouseover",d),kt(t,"focus",f),kt(t,"click",Ir(p)),kt(t,"keydown",Ir(Xs(i[86])))],a=!0)},p(g,m){var _;i=g,c?c.p&&(!o||m[0]&16777216|m[2]&524288)&&Ge(c,h,i,i[81],o?Ue(h,i[81],m,UM):He(i[81]),im):u&&u.p&&(!o||m[0]&16781312)&&u.p(i,o?m:[-1,-1,-1,-1,-1]),s&&Lo(s.update)&&m[0]&1090527240&&s.update.call(null,{scroll:i[45](i[125],i[3],i[13]),listDom:i[30]}),n&&Lo(n.update)&&m[0]&1610612736&&n.update.call(null,{scroll:i[29]===i[127],listDom:i[30]}),(!o||m[0]&16777216)&&Et(e,"list-group-title",i[125].groupHeader),(!o||m[0]&16785416|m[1]&16384)&&Et(e,"active",i[45](i[125],i[3],i[13])),(!o||m[0]&128)&&Et(e,"hover",i[7]===i[127]),(!o||m[0]&16777216)&&Et(e,"group-item",i[125].groupItem),(!o||m[0]&16777216)&&Et(e,"not-selectable",((_=i[125])==null?void 0:_.selectable)===!1)},i(g){o||($(u,g),o=!0)},o(g){tt(u,g),o=!1},d(g){g&&ht(t),u&&u.d(g),a=!1,es(l)}}}function lm(i){let t;const e=i[82]["list-append"],s=Ne(e,i,i[81],Qg);return{c(){s&&s.c()},m(n,r){s&&s.m(n,r),t=!0},p(n,r){s&&s.p&&(!t||r[2]&524288)&&Ge(s,e,n,n[81],t?Ue(e,n[81],r,LM):He(n[81]),Qg)},i(n){t||($(s,n),t=!0)},o(n){tt(s,n),t=!1},d(n){s&&s.d(n)}}}function hm(i){let t,e,s,n,r;return{c(){t=J("span"),e=Ie(i[32]),s=xt(),n=J("span"),r=Ie(i[31]),H(t,"id","aria-selection"),H(t,"class","svelte-apvs86"),H(n,"id","aria-context"),H(n,"class","svelte-apvs86")},m(o,a){ct(o,t,a),Z(t,e),ct(o,s,a),ct(o,n,a),Z(n,r)},p(o,a){a[1]&2&&qe(e,o[32]),a[1]&1&&qe(r,o[31])},d(o){o&&ht(t),o&&ht(s),o&&ht(n)}}}function cm(i){let t,e,s,n;const r=[$M,YM],o=[];function a(l,h){return l[9]?0:1}return t=a(i),e=o[t]=r[t](i),{c(){e.c(),s=Vr()},m(l,h){o[t].m(l,h),ct(l,s,h),n=!0},p(l,h){let c=t;t=a(l),t===c?o[t].p(l,h):(de(),tt(o[c],1,1,()=>{o[c]=null}),fe(),e=o[t],e?e.p(l,h):(e=o[t]=r[t](l),e.c()),$(e,1),e.m(s.parentNode,s))},i(l){n||($(e),n=!0)},o(l){tt(e),n=!1},d(l){o[t].d(l),l&&ht(s)}}}function YM(i){let t,e;const s=i[82].selection,n=Ne(s,i,i[81],$g),r=n||KM(i);return{c(){t=J("div"),r&&r.c(),H(t,"class","selected-item svelte-apvs86"),Et(t,"hide-selected-item",i[35])},m(o,a){ct(o,t,a),r&&r.m(t,null),e=!0},p(o,a){n?n.p&&(!e||a[0]&8|a[2]&524288)&&Ge(n,s,o,o[81],e?Ue(s,o[81],a,OM):He(o[81]),$g):r&&r.p&&(!e||a[0]&4104)&&r.p(o,e?a:[-1,-1,-1,-1,-1]),(!e||a[1]&16)&&Et(t,"hide-selected-item",o[35])},i(o){e||($(r,o),e=!0)},o(o){tt(r,o),e=!1},d(o){o&&ht(t),r&&r.d(o)}}}function $M(i){let t,e,s=i[3],n=[];for(let o=0;o<s.length;o+=1)n[o]=dm(Kg(i,s,o));const r=o=>tt(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=Vr()},m(o,a){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(o,a);ct(o,t,a),e=!0},p(o,a){if(a[0]&67116040|a[1]&32|a[2]&524288){s=o[3];let l;for(l=0;l<s.length;l+=1){const h=Kg(o,s,l);n[l]?(n[l].p(h,a),$(n[l],1)):(n[l]=dm(h),n[l].c(),$(n[l],1),n[l].m(t.parentNode,t))}for(de(),l=s.length;l<n.length;l+=1)r(l);fe()}},i(o){if(!e){for(let a=0;a<s.length;a+=1)$(n[a]);e=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)tt(n[a]);e=!1},d(o){Sh(n,o),o&&ht(t)}}}function KM(i){let t=i[3][i[12]]+"",e;return{c(){e=Ie(t)},m(s,n){ct(s,e,n)},p(s,n){n[0]&4104&&t!==(t=s[3][s[12]]+"")&&qe(e,t)},d(s){s&&ht(e)}}}function qM(i){let t=i[125][i[12]]+"",e;return{c(){e=Ie(t)},m(s,n){ct(s,e,n)},p(s,n){n[0]&4104&&t!==(t=s[125][s[12]]+"")&&qe(e,t)},d(s){s&&ht(e)}}}function um(i){let t,e,s,n;const r=i[82]["multi-clear-icon"],o=Ne(r,i,i[81],qg),a=o||ZM();function l(){return i[91](i[127])}return{c(){t=J("div"),a&&a.c(),H(t,"class","multi-item-clear svelte-apvs86")},m(h,c){ct(h,t,c),a&&a.m(t,null),e=!0,s||(n=kt(t,"pointerup",Ir(Xs(l))),s=!0)},p(h,c){i=h,o&&o.p&&(!e||c[2]&524288)&&Ge(o,r,i,i[81],e?Ue(r,i[81],c,kM):He(i[81]),qg)},i(h){e||($(a,h),e=!0)},o(h){tt(a,h),e=!1},d(h){h&&ht(t),a&&a.d(h),s=!1,n()}}}function ZM(i){let t,e;return t=new fh({}),{c(){Kt(t.$$.fragment)},m(s,n){Vt(t,s,n),e=!0},i(s){e||($(t.$$.fragment,s),e=!0)},o(s){tt(t.$$.fragment,s),e=!1},d(s){Wt(t,s)}}}function dm(i){let t,e,s,n,r,o,a;const l=i[82].selection,h=Ne(l,i,i[81],Zg),c=h||qM(i);let u=!i[11]&&!i[10]&&fh&&um(i);function d(){return i[92](i[127])}return{c(){t=J("div"),e=J("span"),c&&c.c(),s=xt(),u&&u.c(),n=xt(),H(e,"class","multi-item-text svelte-apvs86"),H(t,"class","multi-item svelte-apvs86"),Et(t,"active",i[26]===i[127]),Et(t,"disabled",i[11])},m(f,p){ct(f,t,p),Z(t,e),c&&c.m(e,null),Z(t,s),u&&u.m(t,null),Z(t,n),r=!0,o||(a=[kt(t,"click",Xs(d)),kt(t,"keydown",Ir(Xs(i[84])))],o=!0)},p(f,p){i=f,h?h.p&&(!r||p[0]&8|p[2]&524288)&&Ge(h,l,i,i[81],r?Ue(l,i[81],p,FM):He(i[81]),Zg):c&&c.p&&(!r||p[0]&4104)&&c.p(i,r?p:[-1,-1,-1,-1,-1]),!i[11]&&!i[10]&&fh?u?(u.p(i,p),p[0]&3072&&$(u,1)):(u=um(i),u.c(),$(u,1),u.m(t,n)):u&&(de(),tt(u,1,1,()=>{u=null}),fe()),(!r||p[0]&67108864)&&Et(t,"active",i[26]===i[127]),(!r||p[0]&2048)&&Et(t,"disabled",i[11])},i(f){r||($(c,f),$(u),r=!0)},o(f){tt(c,f),tt(u),r=!1},d(f){f&&ht(t),c&&c.d(f),u&&u.d(),o=!1,es(a)}}}function fm(i){let t,e;const s=i[82]["loading-icon"],n=Ne(s,i,i[81],Yg),r=n||JM();return{c(){t=J("div"),r&&r.c(),H(t,"class","icon loading svelte-apvs86"),H(t,"aria-hidden","true")},m(o,a){ct(o,t,a),r&&r.m(t,null),e=!0},p(o,a){n&&n.p&&(!e||a[2]&524288)&&Ge(n,s,o,o[81],e?Ue(s,o[81],a,DM):He(o[81]),Yg)},i(o){e||($(r,o),e=!0)},o(o){tt(r,o),e=!1},d(o){o&&ht(t),r&&r.d(o)}}}function JM(i){let t,e;return t=new CM({}),{c(){Kt(t.$$.fragment)},m(s,n){Vt(t,s,n),e=!0},i(s){e||($(t.$$.fragment,s),e=!0)},o(s){tt(t.$$.fragment,s),e=!1},d(s){Wt(t,s)}}}function pm(i){let t,e,s,n;const r=i[82]["clear-icon"],o=Ne(r,i,i[81],Xg),a=o||QM();return{c(){t=J("button"),a&&a.c(),H(t,"class","icon clear-select svelte-apvs86")},m(l,h){ct(l,t,h),a&&a.m(t,null),e=!0,s||(n=kt(t,"pointerup",Ir(Xs(i[22]))),s=!0)},p(l,h){o&&o.p&&(!e||h[2]&524288)&&Ge(o,r,l,l[81],e?Ue(r,l[81],h,RM):He(l[81]),Xg)},i(l){e||($(a,l),e=!0)},o(l){tt(a,l),e=!1},d(l){l&&ht(t),a&&a.d(l),s=!1,n()}}}function QM(i){let t,e;return t=new fh({}),{c(){Kt(t.$$.fragment)},m(s,n){Vt(t,s,n),e=!0},i(s){e||($(t.$$.fragment,s),e=!0)},o(s){tt(t.$$.fragment,s),e=!1},d(s){Wt(t,s)}}}function gm(i){let t,e;const s=i[82]["chevron-icon"],n=Ne(s,i,i[81],jg),r=n||tI();return{c(){t=J("div"),r&&r.c(),H(t,"class","icon chevron svelte-apvs86"),H(t,"aria-hidden","true")},m(o,a){ct(o,t,a),r&&r.m(t,null),e=!0},p(o,a){n&&n.p&&(!e||a[0]&64|a[2]&524288)&&Ge(n,s,o,o[81],e?Ue(s,o[81],a,PM):He(o[81]),jg)},i(o){e||($(r,o),e=!0)},o(o){tt(r,o),e=!1},d(o){o&&ht(t),r&&r.d(o)}}}function tI(i){let t,e;return t=new EM({}),{c(){Kt(t.$$.fragment)},m(s,n){Vt(t,s,n),e=!0},i(s){e||($(t.$$.fragment,s),e=!0)},o(s){tt(t.$$.fragment,s),e=!1},d(s){Wt(t,s)}}}function eI(i){let t,e;return{c(){t=J("input"),H(t,"name",i[8]),H(t,"type","hidden"),t.value=e=i[3]?JSON.stringify(i[3]):null,H(t,"class","svelte-apvs86")},m(s,n){ct(s,t,n)},p(s,n){n[0]&256&&H(t,"name",s[8]),n[0]&8&&e!==(e=s[3]?JSON.stringify(s[3]):null)&&(t.value=e)},d(s){s&&ht(t)}}}function mm(i){let t;const e=i[82].required,s=Ne(e,i,i[81],Vg),n=s||iI();return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),t=!0},p(r,o){s&&s.p&&(!t||o[0]&8|o[2]&524288)&&Ge(s,e,r,r[81],t?Ue(e,r[81],o,MM):He(r[81]),Vg)},i(r){t||($(n,r),t=!0)},o(r){tt(n,r),t=!1},d(r){n&&n.d(r)}}}function iI(i){let t;return{c(){t=J("select"),H(t,"class","required svelte-apvs86"),t.required=!0,H(t,"tabindex","-1"),H(t,"aria-hidden","true")},m(e,s){ct(e,t,s)},p:st,d(e){e&&ht(t)}}}function sI(i){let t,e,s,n,r,o,a,l,h,c,u,d,f,p,g,m,_,y,b,v,x=i[6]&&rm(i),E=i[2]&&hm(i);const S=i[82].prepend,A=Ne(S,i,i[81],Jg);let M=i[25]&&cm(i),I=[{readOnly:c=!i[17]},i[27],{placeholder:i[33]},{style:i[18]},{disabled:i[11]}],C={};for(let k=0;k<I.length;k+=1)C=j_(C,I[k]);let F=i[5]&&fm(i),R=i[34]&&pm(i),w=i[20]&&gm(i);const T=i[82]["input-hidden"],B=Ne(T,i,i[81],Wg),P=B||eI(i);let L=i[16]&&(!i[3]||i[3].length===0)&&mm(i);return{c(){t=J("div"),x&&x.c(),e=xt(),s=J("span"),E&&E.c(),n=xt(),r=J("div"),A&&A.c(),o=xt(),a=J("div"),M&&M.c(),l=xt(),h=J("input"),u=xt(),d=J("div"),F&&F.c(),f=xt(),R&&R.c(),p=xt(),w&&w.c(),g=xt(),P&&P.c(),m=xt(),L&&L.c(),H(s,"aria-live","polite"),H(s,"aria-atomic","false"),H(s,"aria-relevant","additions text"),H(s,"class","a11y-text svelte-apvs86"),H(r,"class","prepend svelte-apvs86"),$f(h,C),Et(h,"svelte-apvs86",!0),H(a,"class","value-container svelte-apvs86"),H(d,"class","indicators svelte-apvs86"),H(t,"class",_="svelte-select "+i[21]+" svelte-apvs86"),H(t,"style",i[14]),Et(t,"multi",i[9]),Et(t,"disabled",i[11]),Et(t,"focused",i[2]),Et(t,"list-open",i[6]),Et(t,"show-chevron",i[20]),Et(t,"error",i[15])},m(k,O){ct(k,t,O),x&&x.m(t,null),Z(t,e),Z(t,s),E&&E.m(s,null),Z(t,n),Z(t,r),A&&A.m(r,null),Z(t,o),Z(t,a),M&&M.m(a,null),Z(a,l),Z(a,h),h.autofocus&&h.focus(),i[93](h),Kf(h,i[4]),Z(t,u),Z(t,d),F&&F.m(d,null),Z(d,f),R&&R.m(d,null),Z(d,p),w&&w.m(d,null),Z(t,g),P&&P.m(t,null),Z(t,m),L&&L.m(t,null),i[95](t),y=!0,b||(v=[kt(window,"click",i[42]),kt(window,"keydown",i[37]),kt(h,"keydown",i[37]),kt(h,"blur",i[39]),kt(h,"focus",i[38]),kt(h,"input",i[94]),kt(t,"pointerup",Xs(i[40])),kt(t,"mousedown",Xs(i[83])),Ll(i[48].call(null,t))],b=!0)},p(k,O){k[6]?x?(x.p(k,O),O[0]&64&&$(x,1)):(x=rm(k),x.c(),$(x,1),x.m(t,e)):x&&(de(),tt(x,1,1,()=>{x=null}),fe()),k[2]?E?E.p(k,O):(E=hm(k),E.c(),E.m(s,null)):E&&(E.d(1),E=null),A&&A.p&&(!y||O[2]&524288)&&Ge(A,S,k,k[81],y?Ue(S,k[81],O,BM):He(k[81]),Jg),k[25]?M?(M.p(k,O),O[0]&33554432&&$(M,1)):(M=cm(k),M.c(),$(M,1),M.m(a,l)):M&&(de(),tt(M,1,1,()=>{M=null}),fe()),$f(h,C=zx(I,[(!y||O[0]&131072&&c!==(c=!k[17]))&&{readOnly:c},O[0]&134217728&&k[27],(!y||O[1]&4)&&{placeholder:k[33]},(!y||O[0]&262144)&&{style:k[18]},(!y||O[0]&2048)&&{disabled:k[11]}])),O[0]&16&&h.value!==k[4]&&Kf(h,k[4]),Et(h,"svelte-apvs86",!0),k[5]?F?(F.p(k,O),O[0]&32&&$(F,1)):(F=fm(k),F.c(),$(F,1),F.m(d,f)):F&&(de(),tt(F,1,1,()=>{F=null}),fe()),k[34]?R?(R.p(k,O),O[1]&8&&$(R,1)):(R=pm(k),R.c(),$(R,1),R.m(d,p)):R&&(de(),tt(R,1,1,()=>{R=null}),fe()),k[20]?w?(w.p(k,O),O[0]&1048576&&$(w,1)):(w=gm(k),w.c(),$(w,1),w.m(d,null)):w&&(de(),tt(w,1,1,()=>{w=null}),fe()),B?B.p&&(!y||O[0]&8|O[2]&524288)&&Ge(B,T,k,k[81],y?Ue(T,k[81],O,IM):He(k[81]),Wg):P&&P.p&&(!y||O[0]&264)&&P.p(k,y?O:[-1,-1,-1,-1,-1]),k[16]&&(!k[3]||k[3].length===0)?L?(L.p(k,O),O[0]&65544&&$(L,1)):(L=mm(k),L.c(),$(L,1),L.m(t,null)):L&&(de(),tt(L,1,1,()=>{L=null}),fe()),(!y||O[0]&2097152&&_!==(_="svelte-select "+k[21]+" svelte-apvs86"))&&H(t,"class",_),(!y||O[0]&16384)&&H(t,"style",k[14]),(!y||O[0]&2097664)&&Et(t,"multi",k[9]),(!y||O[0]&2099200)&&Et(t,"disabled",k[11]),(!y||O[0]&2097156)&&Et(t,"focused",k[2]),(!y||O[0]&2097216)&&Et(t,"list-open",k[6]),(!y||O[0]&3145728)&&Et(t,"show-chevron",k[20]),(!y||O[0]&2129920)&&Et(t,"error",k[15])},i(k){y||($(x),$(A,k),$(M),$(F),$(R),$(w),$(P,k),$(L),y=!0)},o(k){tt(x),tt(A,k),tt(M),tt(F),tt(R),tt(w),tt(P,k),tt(L),y=!1},d(k){k&&ht(t),x&&x.d(),E&&E.d(),A&&A.d(k),M&&M.d(),i[93](null),F&&F.d(),R&&R.d(),w&&w.d(),P&&P.d(k),L&&L.d(),i[95](null),b=!1,es(v)}}}function _m(i){return i.map((t,e)=>({index:e,value:t,label:`${t}`}))}function nI(i){return i===0}function rI(i){return i.groupHeader&&i.selectable||i.selectable||!i.hasOwnProperty("selectable")}function oI(i,t,e){let s,n,r,o,a,l,h,c,u,{$$slots:d={},$$scope:f}=t;const p=kx(d),g=$_();let{justValue:m=null}=t,{filter:_=vM}=t,{getItems:y=wM}=t,{id:b=null}=t,{name:v=null}=t,{container:x=void 0}=t,{input:E=void 0}=t,{multiple:S=!1}=t,{multiFullItemClearable:A=!1}=t,{disabled:M=!1}=t,{focused:I=!1}=t,{value:C=null}=t,{filterText:F=""}=t,{placeholder:R="Please select"}=t,{placeholderAlwaysShow:w=!1}=t,{items:T=null}=t,{label:B="label"}=t,{itemFilter:P=(D,ot,Gt)=>`${D}`.toLowerCase().includes(ot.toLowerCase())}=t,{groupBy:L=void 0}=t,{groupFilter:k=D=>D}=t,{groupHeaderSelectable:O=!1}=t,{itemId:U="value"}=t,{loadOptions:j=void 0}=t,{containerStyles:q=""}=t,{hasError:Y=!1}=t,{filterSelectedItems:it=!0}=t,{required:pt=!1}=t,{closeListOnChange:N=!0}=t,{createGroupHeaderItem:G=(D,ot)=>({value:D,[B]:D})}=t;const z=()=>h;let{searchable:V=!0}=t,{inputStyles:X=""}=t,{clearable:rt=!0}=t,{loading:at=!1}=t,{listOpen:lt=!1}=t,re,{debounce:fi=(D,ot=1)=>{clearTimeout(re),re=setTimeout(D,ot)}}=t,{debounceWait:Ms=300}=t,{hideEmptyState:ss=!1}=t,{inputAttributes:rn={}}=t,{listAutoWidth:$r=!0}=t,{showChevron:Kr=!1}=t,{listOffset:Xn=5}=t,{hoverItemIndex:It=0}=t,{floatingConfig:ns={}}=t,{class:xa=""}=t,Ut,on,ec,ic;function W1(){if(typeof C=="string"){let D=(T||[]).find(ot=>ot[U]===C);e(3,C=D||{[U]:C,label:C})}else S&&Array.isArray(C)&&C.length>0&&e(3,C=C.map(D=>typeof D=="string"?{value:D,label:D}:D))}let Yn;function j1(){e(27,Yn=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},rn)),b&&e(27,Yn.id=b,Yn),V||e(27,Yn.readonly=!0,Yn)}function Nf(D){const ot=[],Gt={};D.forEach($n=>{const as=L($n);ot.includes(as)||(ot.push(as),Gt[as]=[],as&&Gt[as].push(Object.assign(G(as,$n),{id:as,groupHeader:!0,selectable:O}))),Gt[as].push(Object.assign({groupItem:!!as},$n))});const os=[];return k(ot).forEach($n=>{Gt[$n]&&os.push(...Gt[$n])}),os}function X1(){if(S){JSON.stringify(C)!==JSON.stringify(on)&&Gf()&&g("input",C);return}(!on||JSON.stringify(C[U])!==JSON.stringify(on[U]))&&g("input",C)}function Y1(){C&&(Array.isArray(C)?e(3,C=[...C]):e(3,C=[C]))}function $1(){C&&e(3,C=null)}function K1(){const D=h.findIndex(ot=>ot[U]===C[U]);Uf(D,!0)}function q1(D){g("hoverItem",D)}function Uf(D=0,ot){e(7,It=D<0?0:D),!ot&&L&&h[It]&&!h[It].selectable&&wa(1)}function Z1(){!j&&F.length===0||(j?fi(async function(){e(5,at=!0);let D=await y({dispatch:g,loadOptions:j,convertStringItemsToObjects:_m,filterText:F});D?(e(5,at=D.loading),e(6,lt=lt?D.listOpen:F.length>0),e(2,I=lt&&D.focused),e(51,T=L?Nf(D.filteredItems):D.filteredItems)):(e(5,at=!1),e(2,I=!0),e(6,lt=!0))},Ms):(e(6,lt=!0),S&&e(26,Ut=void 0)))}function J1(D){lt&&g("filter",D)}Lx(async()=>{e(77,on=C),e(78,ec=F),e(79,ic=S)});function Q1(){return S?C?C.map(D=>D[U]):null:C&&C[U]}function Gf(){let D=!0;if(C){const ot=[],Gt=[];C.forEach(os=>{ot.includes(os[U])?D=!1:(ot.push(os[U]),Gt.push(os))}),D||e(3,C=Gt)}return D}function Hf(D){let ot=D?D[U]:C[U];return T.find(Gt=>Gt[U]===ot)}function tx(D){!D||D.length===0||D.some(ot=>typeof ot!="object")||!C||(S?C.some(ot=>!ot||!ot[U]):!C[U])||(Array.isArray(C)?e(3,C=C.map(ot=>Hf(ot)||ot)):e(3,C=Hf()||C))}async function va(D){const ot=C[D];C.length===1?e(3,C=void 0):e(3,C=C.filter(Gt=>Gt!==ot)),g("clear",ot)}function ex(D){if(I)switch(D.stopPropagation(),D.key){case"Escape":D.preventDefault(),rs();break;case"Enter":if(D.preventDefault(),lt){if(h.length===0)break;const ot=h[It];if(C&&!S&&C[U]===ot[U]){rs();break}else lc(h[It])}break;case"ArrowDown":D.preventDefault(),lt?wa(1):(e(6,lt=!0),e(26,Ut=void 0));break;case"ArrowUp":D.preventDefault(),lt?wa(-1):(e(6,lt=!0),e(26,Ut=void 0));break;case"Tab":if(lt&&I){if(h.length===0||C&&C[U]===h[It][U])return rs();D.preventDefault(),lc(h[It]),rs()}break;case"Backspace":if(!S||F.length>0)return;if(S&&C&&C.length>0){if(va(Ut!==void 0?Ut:C.length-1),Ut===0||Ut===void 0)break;e(26,Ut=C.length>Ut?Ut-1:void 0)}break;case"ArrowLeft":if(!C||!S||F.length>0)return;Ut===void 0?e(26,Ut=C.length-1):C.length>Ut&&Ut!==0&&e(26,Ut-=1);break;case"ArrowRight":if(!C||!S||F.length>0||Ut===void 0)return;Ut===C.length-1?e(26,Ut=void 0):Ut<C.length-1&&e(26,Ut+=1);break}}function sc(D){I&&E===(document==null?void 0:document.activeElement)||(D&&g("focus",D),E.focus(),e(2,I=!0))}async function zf(D){ac||(lt||I)&&(g("blur",D),rs(),e(2,I=!1),e(26,Ut=void 0),E.blur())}function ix(){M||e(6,lt=!lt)}function sx(){g("clear",C),e(3,C=void 0),rs(),sc()}ui(()=>{lt&&e(2,I=!0),I&&E&&E.focus()});function nx(D){if(D){e(4,F="");const ot=Object.assign({},D);if(ot.groupHeader&&!ot.selectable)return;e(3,C=S?C?C.concat([ot]):[ot]:e(3,C=ot)),setTimeout(()=>{N&&rs(),e(26,Ut=void 0),g("change",C),g("select",D)})}}function rs(){e(4,F=""),e(6,lt=!1)}let{ariaValues:nc=D=>`Option ${D}, selected.`}=t,{ariaListOpen:rc=(D,ot)=>`You are currently focused on option ${D}. There are ${ot} results available.`}=t,{ariaFocused:oc=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function rx(D){let ot;return D&&C.length>0?ot=C.map(Gt=>Gt[B]).join(", "):ot=C[B],nc(ot)}function ox(){if(!h||h.length===0)return"";let D=h[It];if(lt&&D){let ot=h?h.length:0;return rc(D[B],ot)}else return oc()}let Pe=null,Vf;function Wf(){clearTimeout(Vf),Vf=setTimeout(()=>{ac=!1},100)}function ax(D){!lt&&!I&&x&&!x.contains(D.target)&&!(Pe!=null&&Pe.contains(D.target))&&zf()}Wr(()=>{Pe==null||Pe.remove()});let ac=!1;function lc(D){!D||D.selectable===!1||nx(D)}function hc(D){ac||e(7,It=D)}function jf(D){const{item:ot,i:Gt}=D;if((ot==null?void 0:ot.selectable)!==!1){if(C&&!S&&C[U]===ot[U])return rs();rI(ot)&&(e(7,It=Gt),lc(ot))}}function wa(D){if(h.filter(os=>!Object.hasOwn(os,"selectable")||os.selectable===!0).length===0)return e(7,It=0);D>0&&It===h.length-1?e(7,It=0):D<0&&It===0?e(7,It=h.length-1):e(7,It=It+D);const Gt=h[It];if(Gt&&Gt.selectable===!1){(D===1||D===-1)&&wa(D);return}}function lx(D,ot,Gt){if(!S)return ot&&ot[Gt]===D[Gt]}const hx=Xf,cx=Xf;function Xf(D){return{update(ot){ot.scroll&&(Wf(),D.scrollIntoView({behavior:"auto",block:"nearest"}))}}}function ux(){const{width:D}=x.getBoundingClientRect();e(23,Pe.style.width=$r?D+"px":"auto",Pe)}let qr={strategy:"absolute",placement:"bottom-start",middleware:[dM(Xn),uM(),pM()],autoUpdate:!1};const[dx,fx,px]=xM(qr);let cc=!0;function gx(D,ot){if(!D||!ot)return e(28,cc=!0);setTimeout(()=>{e(28,cc=!1)},0)}function mx(D){Ea.call(this,i,D)}function _x(D){Ea.call(this,i,D)}function yx(D){Ea.call(this,i,D)}function bx(D){Ea.call(this,i,D)}const xx=D=>hc(D),vx=D=>hc(D),wx=(D,ot)=>jf({item:D,i:ot});function Sx(D){Xi[D?"unshift":"push"](()=>{Pe=D,e(23,Pe)})}const Ex=D=>va(D),Tx=D=>A?va(D):{};function Ax(D){Xi[D?"unshift":"push"](()=>{E=D,e(1,E)})}function Cx(){F=this.value,e(4,F)}function Mx(D){Xi[D?"unshift":"push"](()=>{x=D,e(0,x)})}return i.$$set=D=>{"justValue"in D&&e(52,m=D.justValue),"filter"in D&&e(53,_=D.filter),"getItems"in D&&e(54,y=D.getItems),"id"in D&&e(55,b=D.id),"name"in D&&e(8,v=D.name),"container"in D&&e(0,x=D.container),"input"in D&&e(1,E=D.input),"multiple"in D&&e(9,S=D.multiple),"multiFullItemClearable"in D&&e(10,A=D.multiFullItemClearable),"disabled"in D&&e(11,M=D.disabled),"focused"in D&&e(2,I=D.focused),"value"in D&&e(3,C=D.value),"filterText"in D&&e(4,F=D.filterText),"placeholder"in D&&e(56,R=D.placeholder),"placeholderAlwaysShow"in D&&e(57,w=D.placeholderAlwaysShow),"items"in D&&e(51,T=D.items),"label"in D&&e(12,B=D.label),"itemFilter"in D&&e(58,P=D.itemFilter),"groupBy"in D&&e(59,L=D.groupBy),"groupFilter"in D&&e(60,k=D.groupFilter),"groupHeaderSelectable"in D&&e(61,O=D.groupHeaderSelectable),"itemId"in D&&e(13,U=D.itemId),"loadOptions"in D&&e(62,j=D.loadOptions),"containerStyles"in D&&e(14,q=D.containerStyles),"hasError"in D&&e(15,Y=D.hasError),"filterSelectedItems"in D&&e(63,it=D.filterSelectedItems),"required"in D&&e(16,pt=D.required),"closeListOnChange"in D&&e(64,N=D.closeListOnChange),"createGroupHeaderItem"in D&&e(65,G=D.createGroupHeaderItem),"searchable"in D&&e(17,V=D.searchable),"inputStyles"in D&&e(18,X=D.inputStyles),"clearable"in D&&e(67,rt=D.clearable),"loading"in D&&e(5,at=D.loading),"listOpen"in D&&e(6,lt=D.listOpen),"debounce"in D&&e(68,fi=D.debounce),"debounceWait"in D&&e(69,Ms=D.debounceWait),"hideEmptyState"in D&&e(19,ss=D.hideEmptyState),"inputAttributes"in D&&e(70,rn=D.inputAttributes),"listAutoWidth"in D&&e(71,$r=D.listAutoWidth),"showChevron"in D&&e(20,Kr=D.showChevron),"listOffset"in D&&e(72,Xn=D.listOffset),"hoverItemIndex"in D&&e(7,It=D.hoverItemIndex),"floatingConfig"in D&&e(73,ns=D.floatingConfig),"class"in D&&e(21,xa=D.class),"ariaValues"in D&&e(74,nc=D.ariaValues),"ariaListOpen"in D&&e(75,rc=D.ariaListOpen),"ariaFocused"in D&&e(76,oc=D.ariaFocused),"$$scope"in D&&e(81,f=D.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8|i.$$.dirty[1]&1048576&&C&&W1(),i.$$.dirty[0]&131072|i.$$.dirty[2]&256&&(rn||!V)&&j1(),i.$$.dirty[0]&512&&S&&Y1(),i.$$.dirty[0]&512|i.$$.dirty[2]&131072&&ic&&!S&&$1(),i.$$.dirty[0]&520&&S&&C&&C.length>1&&Gf(),i.$$.dirty[0]&8&&C&&X1(),i.$$.dirty[0]&520|i.$$.dirty[2]&32768&&!C&&S&&on&&g("input",C),i.$$.dirty[0]&6&&!I&&E&&rs(),i.$$.dirty[0]&16|i.$$.dirty[2]&65536&&F!==ec&&Z1(),i.$$.dirty[0]&12824|i.$$.dirty[1]&407896064|i.$$.dirty[2]&3&&e(24,h=_({loadOptions:j,filterText:F,items:T,multiple:S,value:C,itemId:U,groupBy:L,label:B,filterSelectedItems:it,itemFilter:P,convertStringItemsToObjects:_m,filterGroupedItems:Nf})),i.$$.dirty[0]&16777800&&!S&&lt&&C&&h&&K1(),i.$$.dirty[0]&576&&lt&&S&&e(7,It=0),i.$$.dirty[0]&16&&F&&e(7,It=0),i.$$.dirty[0]&128&&q1(It),i.$$.dirty[0]&520&&e(25,s=S?C&&C.length>0:C),i.$$.dirty[0]&33554448&&e(35,n=s&&F.length>0),i.$$.dirty[0]&33556512|i.$$.dirty[2]&32&&e(34,r=s&&rt&&!M&&!at),i.$$.dirty[0]&520|i.$$.dirty[1]&100663296&&e(33,o=w&&S||S&&(C==null?void 0:C.length)===0?R:C?"":R),i.$$.dirty[0]&520&&e(32,a=C?rx(S):""),i.$$.dirty[0]&16777412&&e(31,l=ox()),i.$$.dirty[1]&1048576&&tx(T),i.$$.dirty[0]&8712&&e(52,m=Q1()),i.$$.dirty[0]&520|i.$$.dirty[2]&32768&&!S&&on&&!C&&g("input",C),i.$$.dirty[0]&16777800&&lt&&h&&!S&&!C&&Uf(),i.$$.dirty[0]&16777216&&J1(h),i.$$.dirty[0]&1|i.$$.dirty[2]&2048&&x&&(ns==null?void 0:ns.autoUpdate)===void 0&&e(80,qr.autoUpdate=!0,qr),i.$$.dirty[0]&1|i.$$.dirty[2]&264192&&x&&ns&&px(Object.assign(qr,ns)),i.$$.dirty[0]&8388608&&e(30,c=!!Pe),i.$$.dirty[0]&8388672&&gx(Pe,lt),i.$$.dirty[0]&8388673&&lt&&x&&Pe&&ux(),i.$$.dirty[0]&128&&e(29,u=It),i.$$.dirty[0]&70&&E&&lt&&!I&&sc()},[x,E,I,C,F,at,lt,It,v,S,A,M,B,U,q,Y,pt,V,X,ss,Kr,xa,sx,Pe,h,s,Ut,Yn,cc,u,c,l,a,o,r,n,va,ex,sc,zf,ix,Wf,ax,hc,jf,lx,hx,cx,dx,fx,p,T,m,_,y,b,R,w,P,L,k,O,j,it,N,G,z,rt,fi,Ms,rn,$r,Xn,ns,nc,rc,oc,on,ec,ic,qr,f,d,mx,_x,yx,bx,xx,vx,wx,Sx,Ex,Tx,Ax,Cx,Mx]}class aI extends te{constructor(t){super(),Qt(this,t,oI,sI,$t,{justValue:52,filter:53,getItems:54,id:55,name:8,container:0,input:1,multiple:9,multiFullItemClearable:10,disabled:11,focused:2,value:3,filterText:4,placeholder:56,placeholderAlwaysShow:57,items:51,label:12,itemFilter:58,groupBy:59,groupFilter:60,groupHeaderSelectable:61,itemId:13,loadOptions:62,containerStyles:14,hasError:15,filterSelectedItems:63,required:16,closeListOnChange:64,createGroupHeaderItem:65,getFilteredItems:66,searchable:17,inputStyles:18,clearable:67,loading:5,listOpen:6,debounce:68,debounceWait:69,hideEmptyState:19,inputAttributes:70,listAutoWidth:71,showChevron:20,listOffset:72,hoverItemIndex:7,floatingConfig:73,class:21,handleClear:22,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[66]}get handleClear(){return this.$$.ctx[22]}}function lI(i){return{c:st,m:st,p:st,d:st}}function hI(i){let t,e,s,n;return{c(){t=J("img"),Ji(t.src,e=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${i[1].toLowerCase()}.svg`)||H(t,"src",e),H(t,"alt",s=i[3](i[1])),H(t,"title",n=i[3](i[1])),H(t,"class","svelte-muw3ye")},m(r,o){ct(r,t,o)},p(r,o){o&2&&!Ji(t.src,e=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${r[1].toLowerCase()}.svg`)&&H(t,"src",e),o&2&&s!==(s=r[3](r[1]))&&H(t,"alt",s),o&2&&n!==(n=r[3](r[1]))&&H(t,"title",n)},d(r){r&&ht(t)}}}function cI(i){let t,e,s,n,r,o,a,l,h;function c(f,p){return f[1]?hI:lI}let u=c(i),d=u(i);return n=new aI({props:{items:i[0],placeholder:"Select a country ðŸŒŽ",searchable:!0,clearable:!1,closeListOnChange:!0,inputAttributes:{autocomplete:"on"},value:i[1]}}),n.$on("change",i[4]),{c(){t=J("div"),d.c(),e=xt(),s=J("div"),Kt(n.$$.fragment),r=xt(),o=J("button"),o.textContent="Play!",H(o,"class","svelte-muw3ye"),H(s,"class","search svelte-muw3ye"),H(t,"class","container svelte-muw3ye")},m(f,p){ct(f,t,p),d.m(t,null),Z(t,e),Z(t,s),Vt(n,s,null),Z(s,r),Z(s,o),a=!0,l||(h=kt(o,"click",i[2]),l=!0)},p(f,[p]){u===(u=c(f))&&d?d.p(f,p):(d.d(1),d=u(f),d&&(d.c(),d.m(t,e)));const g={};p&1&&(g.items=f[0]),p&2&&(g.value=f[1]),n.$set(g)},i(f){a||($(n.$$.fragment,f),a=!0)},o(f){tt(n.$$.fragment,f),a=!1},d(f){f&&ht(t),d.d(),Wt(n),l=!1,h()}}}function uI(i,t,e){let s,n;const r=$_();let o=[];ui(async()=>{const c=await Q2(()=>Promise.resolve().then(()=>Ak),void 0);Tr.registerLocale(c.default),e(0,o=Object.entries(Tr.getNames("en")).map(([u,d])=>({value:u,label:d}))),n=localStorage.getItem("userCountry"),e(1,s=n)});const a=()=>{s&&(localStorage.setItem("userCountry",s),y0.set(s),r("play",s))};function l(c){return Tr.getName(c,"en",{select:"official"})}const h=c=>{e(1,s=c.detail.value)};return e(1,s=""),[o,s,a,l,h]}class dI extends te{constructor(t){super(),Qt(this,t,uI,cI,$t,{})}}function fI(i){let t,e,s;return{c(){t=J("div"),t.innerHTML=`<div class="card svelte-1stc2p8"><h2 class="svelte-1stc2p8">How to play</h2> 
		<br/> 
		<p>Kubel is like a 2d Rubiks cube. Its very simple!</p> 
		<br/> 
		<p><span class="svelte-1stc2p8">Click and drag</span> a piece to move the row or collumn. Win the game by moving
			all the pieces of the <span class="svelte-1stc2p8">same color</span> next to each other. Use as few moves as possible
			to get the best score.</p> 
		<br/> 
		<p style="text-align: center; font-weight:bold">ðŸ˜„Good luck &amp; have fun!ðŸ˜„</p> 
		<p style="text-align: center; font-size: 14px; color:rgba(150, 150, 200, 0.75)">Feedback? Questions? Message me! <a href="mailto:jason@kubel.io" target="_blank">jason@kubel.io</a></p></div>`,H(t,"class","screen-container svelte-1stc2p8")},m(n,r){ct(n,t,r),e||(s=[kt(t,"click",i[0]),kt(t,"keypress",i[0])],e=!0)},p:st,i:st,o:st,d(n){n&&ht(t),e=!1,es(s)}}}function pI(i){return[e=>{e.target.closest(".card")||jd.set(!1)}]}class gI extends te{constructor(t){super(),Qt(this,t,pI,fI,$t,{})}}function mI(i){let t,e,s;return{c(){t=J("button"),t.textContent="PLAY AGAIN",H(t,"class","svelte-9suxba")},m(n,r){ct(n,t,r),e||(s=kt(t,"click",i[0]),e=!0)},p:st,i:st,o:st,d(n){n&&ht(t),e=!1,s()}}}function _I(i){return[()=>{Eu.set(!0)}]}class yI extends te{constructor(t){super(),Qt(this,t,_I,mI,$t,{})}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function _a(i){return i+.5|0}const Ls=(i,t,e)=>Math.max(Math.min(i,e),t);function yo(i){return Ls(_a(i*2.55),0,255)}function js(i){return Ls(_a(i*255),0,255)}function ms(i){return Ls(_a(i/2.55)/100,0,1)}function ym(i){return Ls(_a(i*100),0,100)}const Qe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wd=[..."0123456789ABCDEF"],bI=i=>wd[i&15],xI=i=>wd[(i&240)>>4]+wd[i&15],Ja=i=>(i&240)>>4===(i&15),vI=i=>Ja(i.r)&&Ja(i.g)&&Ja(i.b)&&Ja(i.a);function wI(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&Qe[i[1]]*17,g:255&Qe[i[2]]*17,b:255&Qe[i[3]]*17,a:t===5?Qe[i[4]]*17:255}:(t===7||t===9)&&(e={r:Qe[i[1]]<<4|Qe[i[2]],g:Qe[i[3]]<<4|Qe[i[4]],b:Qe[i[5]]<<4|Qe[i[6]],a:t===9?Qe[i[7]]<<4|Qe[i[8]]:255})),e}const SI=(i,t)=>i<255?t(i):"";function EI(i){var t=vI(i)?bI:xI;return i?"#"+t(i.r)+t(i.g)+t(i.b)+SI(i.a,t):void 0}const TI=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function zb(i,t,e){const s=t*Math.min(e,1-e),n=(r,o=(r+i/30)%12)=>e-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function AI(i,t,e){const s=(n,r=(n+i/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function CI(i,t,e){const s=zb(i,1,.5);let n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)s[n]*=1-t-e,s[n]+=t;return s}function MI(i,t,e,s,n){return i===n?(t-e)/s+(t<e?6:0):t===n?(e-i)/s+2:(i-t)/s+4}function Sf(i){const e=i.r/255,s=i.g/255,n=i.b/255,r=Math.max(e,s,n),o=Math.min(e,s,n),a=(r+o)/2;let l,h,c;return r!==o&&(c=r-o,h=a>.5?c/(2-r-o):c/(r+o),l=MI(e,s,n,c,r),l=l*60+.5),[l|0,h||0,a]}function Ef(i,t,e,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,s)).map(js)}function Tf(i,t,e){return Ef(zb,i,t,e)}function II(i,t,e){return Ef(CI,i,t,e)}function PI(i,t,e){return Ef(AI,i,t,e)}function Vb(i){return(i%360+360)%360}function RI(i){const t=TI.exec(i);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?yo(+t[5]):js(+t[5]));const n=Vb(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=II(n,r,o):t[1]==="hsv"?s=PI(n,r,o):s=Tf(n,r,o),{r:s[0],g:s[1],b:s[2],a:e}}function DI(i,t){var e=Sf(i);e[0]=Vb(e[0]+t),e=Tf(e),i.r=e[0],i.g=e[1],i.b=e[2]}function OI(i){if(!i)return;const t=Sf(i),e=t[0],s=ym(t[1]),n=ym(t[2]);return i.a<255?`hsla(${e}, ${s}%, ${n}%, ${ms(i.a)})`:`hsl(${e}, ${s}%, ${n}%)`}const bm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},xm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kI(){const i={},t=Object.keys(xm),e=Object.keys(bm);let s,n,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],n=0;n<e.length;n++)r=e[n],a=a.replace(r,bm[r]);r=parseInt(xm[o],16),i[a]=[r>>16&255,r>>8&255,r&255]}return i}let Qa;function FI(i){Qa||(Qa=kI(),Qa.transparent=[0,0,0,0]);const t=Qa[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const BI=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function LI(i){const t=BI.exec(i);let e=255,s,n,r;if(t){if(t[7]!==s){const o=+t[7];e=t[8]?yo(o):Ls(o*255,0,255)}return s=+t[1],n=+t[3],r=+t[5],s=255&(t[2]?yo(s):Ls(s,0,255)),n=255&(t[4]?yo(n):Ls(n,0,255)),r=255&(t[6]?yo(r):Ls(r,0,255)),{r:s,g:n,b:r,a:e}}}function NI(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${ms(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const su=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,er=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function UI(i,t,e){const s=er(ms(i.r)),n=er(ms(i.g)),r=er(ms(i.b));return{r:js(su(s+e*(er(ms(t.r))-s))),g:js(su(n+e*(er(ms(t.g))-n))),b:js(su(r+e*(er(ms(t.b))-r))),a:i.a+e*(t.a-i.a)}}function tl(i,t,e){if(i){let s=Sf(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=Tf(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function Wb(i,t){return i&&Object.assign(t||{},i)}function vm(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=js(i[3]))):(t=Wb(i,{r:0,g:0,b:0,a:1}),t.a=js(t.a)),t}function GI(i){return i.charAt(0)==="r"?LI(i):RI(i)}class ea{constructor(t){if(t instanceof ea)return t;const e=typeof t;let s;e==="object"?s=vm(t):e==="string"&&(s=wI(t)||FI(t)||GI(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Wb(this._rgb);return t&&(t.a=ms(t.a)),t}set rgb(t){this._rgb=vm(t)}rgbString(){return this._valid?NI(this._rgb):void 0}hexString(){return this._valid?EI(this._rgb):void 0}hslString(){return this._valid?OI(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,n=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=s.a-n.a,h=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-h,s.r=255&h*s.r+r*n.r+.5,s.g=255&h*s.g+r*n.g+.5,s.b=255&h*s.b+r*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=UI(this._rgb,t._rgb,e)),this}clone(){return new ea(this.rgb)}alpha(t){return this._rgb.a=js(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=_a(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return tl(this._rgb,2,t),this}darken(t){return tl(this._rgb,2,-t),this}saturate(t){return tl(this._rgb,1,t),this}desaturate(t){return tl(this._rgb,1,-t),this}rotate(t){return DI(this._rgb,t),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function cs(){}const HI=(()=>{let i=0;return()=>i++})();function Ct(i){return i===null||typeof i>"u"}function Ft(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function wt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function Zt(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function We(i,t){return Zt(i)?i:t}function yt(i,t){return typeof i>"u"?t:i}const zI=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,jb=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Ot(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function Mt(i,t,e,s){let n,r,o;if(Ft(i))if(r=i.length,s)for(n=r-1;n>=0;n--)t.call(e,i[n],n);else for(n=0;n<r;n++)t.call(e,i[n],n);else if(wt(i))for(o=Object.keys(i),r=o.length,n=0;n<r;n++)t.call(e,i[o[n]],o[n])}function ph(i,t){let e,s,n,r;if(!i||!t||i.length!==t.length)return!1;for(e=0,s=i.length;e<s;++e)if(n=i[e],r=t[e],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function gh(i){if(Ft(i))return i.map(gh);if(wt(i)){const t=Object.create(null),e=Object.keys(i),s=e.length;let n=0;for(;n<s;++n)t[e[n]]=gh(i[e[n]]);return t}return i}function Xb(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function VI(i,t,e,s){if(!Xb(i))return;const n=t[i],r=e[i];wt(n)&&wt(r)?ia(n,r,s):t[i]=gh(r)}function ia(i,t,e){const s=Ft(t)?t:[t],n=s.length;if(!wt(i))return i;e=e||{};const r=e.merger||VI;let o;for(let a=0;a<n;++a){if(o=s[a],!wt(o))continue;const l=Object.keys(o);for(let h=0,c=l.length;h<c;++h)r(l[h],i,o,e)}return i}function Do(i,t){return ia(i,t,{merger:WI})}function WI(i,t,e){if(!Xb(i))return;const s=t[i],n=e[i];wt(s)&&wt(n)?Do(s,n):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=gh(n))}const wm={"":i=>i,x:i=>i.x,y:i=>i.y};function jI(i){const t=i.split("."),e=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function XI(i){const t=jI(i);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function tn(i,t){return(wm[t]||(wm[t]=XI(t)))(i)}function Af(i){return i.charAt(0).toUpperCase()+i.slice(1)}const ci=i=>typeof i<"u",en=i=>typeof i=="function",Sm=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function YI(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const Nt=Math.PI,Bt=2*Nt,$I=Bt+Nt,mh=Number.POSITIVE_INFINITY,KI=Nt/180,Jt=Nt/2,un=Nt/4,Em=Nt*2/3,Ns=Math.log10,Zi=Math.sign;function Oo(i,t,e){return Math.abs(i-t)<e}function Tm(i){const t=Math.round(i);i=Oo(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(Ns(i))),s=i/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function qI(i){const t=[],e=Math.sqrt(i);let s;for(s=1;s<e;s++)i%s===0&&(t.push(s),t.push(i/s));return e===(e|0)&&t.push(e),t.sort((n,r)=>n-r).pop(),t}function Gr(i){return!isNaN(parseFloat(i))&&isFinite(i)}function ZI(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function Yb(i,t,e){let s,n,r;for(s=0,n=i.length;s<n;s++)r=i[s][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Ei(i){return i*(Nt/180)}function Cf(i){return i*(180/Nt)}function Am(i){if(!Zt(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function $b(i,t){const e=t.x-i.x,s=t.y-i.y,n=Math.sqrt(e*e+s*s);let r=Math.atan2(s,e);return r<-.5*Nt&&(r+=Bt),{angle:r,distance:n}}function Sd(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function JI(i,t){return(i-t+$I)%Bt-Nt}function Ye(i){return(i%Bt+Bt)%Bt}function sa(i,t,e,s){const n=Ye(i),r=Ye(t),o=Ye(e),a=Ye(r-n),l=Ye(o-n),h=Ye(n-r),c=Ye(n-o);return n===r||n===o||s&&r===o||a>l&&h<c}function pe(i,t,e){return Math.max(t,Math.min(e,i))}function QI(i){return pe(i,-32768,32767)}function bs(i,t,e,s=1e-6){return i>=Math.min(t,e)-s&&i<=Math.max(t,e)+s}function Mf(i,t,e){e=e||(o=>i[o]<t);let s=i.length-1,n=0,r;for(;s-n>1;)r=n+s>>1,e(r)?n=r:s=r;return{lo:n,hi:s}}const xs=(i,t,e,s)=>Mf(i,e,s?n=>{const r=i[n][t];return r<e||r===e&&i[n+1][t]===e}:n=>i[n][t]<e),tP=(i,t,e)=>Mf(i,e,s=>i[s][t]>=e);function eP(i,t,e){let s=0,n=i.length;for(;s<n&&i[s]<t;)s++;for(;n>s&&i[n-1]>e;)n--;return s>0||n<i.length?i.slice(s,n):i}const Kb=["push","pop","shift","splice","unshift"];function iP(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Kb.forEach(e=>{const s="_onData"+Af(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return i._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Cm(i,t){const e=i._chartjs;if(!e)return;const s=e.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(Kb.forEach(r=>{delete i[r]}),delete i._chartjs)}function qb(i){const t=new Set;let e,s;for(e=0,s=i.length;e<s;++e)t.add(i[e]);return t.size===s?i:Array.from(t)}const Zb=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function Jb(i,t){let e=[],s=!1;return function(...n){e=n,s||(s=!0,Zb.call(window,()=>{s=!1,i.apply(t,e)}))}}function sP(i,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(i,t,s)):i.apply(this,s),t}}const If=i=>i==="start"?"left":i==="end"?"right":"center",ve=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,nP=(i,t,e,s)=>i===(s?"left":"right")?e:i==="center"?(t+e)/2:t;function Qb(i,t,e){const s=t.length;let n=0,r=s;if(i._sorted){const{iScale:o,_parsed:a}=i,l=o.axis,{min:h,max:c,minDefined:u,maxDefined:d}=o.getUserBounds();u&&(n=pe(Math.min(xs(a,o.axis,h).lo,e?s:xs(t,l,o.getPixelForValue(h)).lo),0,s-1)),d?r=pe(Math.max(xs(a,o.axis,c,!0).hi+1,e?0:xs(t,l,o.getPixelForValue(c),!0).hi+1),n,s)-n:r=s-n}return{start:n,count:r}}function t1(i){const{xScale:t,yScale:e,_scaleRanges:s}=i,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return i._scaleRanges=n,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,n),r}const el=i=>i===0||i===1,Mm=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*Bt/e)),Im=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*Bt/e)+1,ko={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Jt)+1,easeOutSine:i=>Math.sin(i*Jt),easeInOutSine:i=>-.5*(Math.cos(Nt*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>el(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>el(i)?i:Mm(i,.075,.3),easeOutElastic:i=>el(i)?i:Im(i,.075,.3),easeInOutElastic(i){return el(i)?i:i<.5?.5*Mm(i*2,.1125,.45):.5+.5*Im(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-ko.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?ko.easeInBounce(i*2)*.5:ko.easeOutBounce(i*2-1)*.5+.5};function e1(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Pm(i){return e1(i)?i:new ea(i)}function nu(i){return e1(i)?i:new ea(i).saturate(.5).darken(.1).hexString()}const rP=["x","y","borderWidth","radius","tension"],oP=["color","borderColor","backgroundColor"];function aP(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:oP},numbers:{type:"number",properties:rP}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function lP(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Rm=new Map;function hP(i,t){t=t||{};const e=i+JSON.stringify(t);let s=Rm.get(e);return s||(s=new Intl.NumberFormat(i,t),Rm.set(e,s)),s}function ya(i,t,e){return hP(t,e).format(i)}const i1={values(i){return Ft(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const s=this.chart.options.locale;let n,r=i;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(n="scientific"),r=cP(i,e)}const o=Ns(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ya(i,s,l)},logarithmic(i,t,e){if(i===0)return"0";const s=e[t].significand||i/Math.pow(10,Math.floor(Ns(i)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?i1.numeric.call(this,i,t,e):""}};function cP(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var qh={formatters:i1};function uP(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qh.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Un=Object.create(null),Ed=Object.create(null);function Fo(i,t){if(!t)return i;const e=t.split(".");for(let s=0,n=e.length;s<n;++s){const r=e[s];i=i[r]||(i[r]=Object.create(null))}return i}function ru(i,t,e){return typeof t=="string"?ia(Fo(i,t),e):ia(Fo(i,""),t)}class dP{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>nu(n.backgroundColor),this.hoverBorderColor=(s,n)=>nu(n.borderColor),this.hoverColor=(s,n)=>nu(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ru(this,t,e)}get(t){return Fo(this,t)}describe(t,e){return ru(Ed,t,e)}override(t,e){return ru(Un,t,e)}route(t,e,s,n){const r=Fo(this,t),o=Fo(this,s),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],h=o[n];return wt(l)?Object.assign({},h,l):yt(l,h)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var ie=new dP({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[aP,lP,uP]);function fP(i){return!i||Ct(i.size)||Ct(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function _h(i,t,e,s,n){let r=t[n];return r||(r=t[n]=i.measureText(n).width,e.push(n)),r>s&&(s=r),s}function pP(i,t,e,s){s=s||{};let n=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},r=s.garbageCollect=[],s.font=t),i.save(),i.font=t;let o=0;const a=e.length;let l,h,c,u,d;for(l=0;l<a;l++)if(u=e[l],u!=null&&Ft(u)!==!0)o=_h(i,n,r,o,u);else if(Ft(u))for(h=0,c=u.length;h<c;h++)d=u[h],d!=null&&!Ft(d)&&(o=_h(i,n,r,o,d));i.restore();const f=r.length/2;if(f>e.length){for(l=0;l<f;l++)delete n[r[l]];r.splice(0,f)}return o}function dn(i,t,e){const s=i.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*s)/s+n}function Dm(i,t){t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function Td(i,t,e,s){s1(i,t,e,s,null)}function s1(i,t,e,s,n){let r,o,a,l,h,c,u,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*KI;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){i.save(),i.translate(e,s),i.rotate(m),i.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),i.restore();return}if(!(isNaN(g)||g<=0)){switch(i.beginPath(),f){default:n?i.ellipse(e,s,n/2,g,0,0,Bt):i.arc(e,s,g,0,Bt),i.closePath();break;case"triangle":c=n?n/2:g,i.moveTo(e+Math.sin(m)*c,s-Math.cos(m)*g),m+=Em,i.lineTo(e+Math.sin(m)*c,s-Math.cos(m)*g),m+=Em,i.lineTo(e+Math.sin(m)*c,s-Math.cos(m)*g),i.closePath();break;case"rectRounded":h=g*.516,l=g-h,o=Math.cos(m+un)*l,u=Math.cos(m+un)*(n?n/2-h:l),a=Math.sin(m+un)*l,d=Math.sin(m+un)*(n?n/2-h:l),i.arc(e-u,s-a,h,m-Nt,m-Jt),i.arc(e+d,s-o,h,m-Jt,m),i.arc(e+u,s+a,h,m,m+Jt),i.arc(e-d,s+o,h,m+Jt,m+Nt),i.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,c=n?n/2:l,i.rect(e-c,s-l,2*c,2*l);break}m+=un;case"rectRot":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+d,s-o),i.lineTo(e+u,s+a),i.lineTo(e-d,s+o),i.closePath();break;case"crossRot":m+=un;case"cross":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+d,s-o),i.lineTo(e-d,s+o);break;case"star":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+d,s-o),i.lineTo(e-d,s+o),m+=un,u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+d,s-o),i.lineTo(e-d,s+o);break;case"line":o=n?n/2:Math.cos(m)*g,a=Math.sin(m)*g,i.moveTo(e-o,s-a),i.lineTo(e+o,s+a);break;case"dash":i.moveTo(e,s),i.lineTo(e+Math.cos(m)*(n?n/2:g),s+Math.sin(m)*g);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function na(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function Zh(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function Jh(i){i.restore()}function gP(i,t,e,s,n){if(!t)return i.lineTo(e.x,e.y);if(n==="middle"){const r=(t.x+e.x)/2;i.lineTo(r,t.y),i.lineTo(r,e.y)}else n==="after"!=!!s?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function mP(i,t,e,s){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function Gn(i,t,e,s,n,r={}){const o=Ft(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,h;for(i.save(),i.font=n.string,_P(i,r),l=0;l<o.length;++l)h=o[l],r.backdrop&&bP(i,r.backdrop),a&&(r.strokeColor&&(i.strokeStyle=r.strokeColor),Ct(r.strokeWidth)||(i.lineWidth=r.strokeWidth),i.strokeText(h,e,s,r.maxWidth)),i.fillText(h,e,s,r.maxWidth),yP(i,e,s,h,r),s+=n.lineHeight;i.restore()}function _P(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),Ct(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function yP(i,t,e,s,n){if(n.strikethrough||n.underline){const r=i.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,h=e+r.actualBoundingBoxDescent,c=n.strikethrough?(l+h)/2:h;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(o,c),i.lineTo(a,c),i.stroke()}}function bP(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function ra(i,t){const{x:e,y:s,w:n,h:r,radius:o}=t;i.arc(e+o.topLeft,s+o.topLeft,o.topLeft,-Jt,Nt,!0),i.lineTo(e,s+r-o.bottomLeft),i.arc(e+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Nt,Jt,!0),i.lineTo(e+n-o.bottomRight,s+r),i.arc(e+n-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Jt,0,!0),i.lineTo(e+n,s+o.topRight),i.arc(e+n-o.topRight,s+o.topRight,o.topRight,0,-Jt,!0),i.lineTo(e+o.topLeft,s)}const xP=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,vP=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function wP(i,t){const e=(""+i).match(xP);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const SP=i=>+i||0;function Pf(i,t){const e={},s=wt(t),n=s?Object.keys(t):t,r=wt(i)?s?o=>yt(i[o],i[t[o]]):o=>i[o]:()=>i;for(const o of n)e[o]=SP(r(o));return e}function n1(i){return Pf(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Rn(i){return Pf(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Me(i){const t=n1(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function he(i,t){i=i||{},t=t||ie.font;let e=yt(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=yt(i.style,t.style);s&&!(""+s).match(vP)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:yt(i.family,t.family),lineHeight:wP(yt(i.lineHeight,t.lineHeight),e),size:e,style:s,weight:yt(i.weight,t.weight),string:""};return n.string=fP(n),n}function bo(i,t,e,s){let n=!0,r,o,a;for(r=0,o=i.length;r<o;++r)if(a=i[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),n=!1),e!==void 0&&Ft(a)&&(a=a[e%a.length],n=!1),a!==void 0))return s&&!n&&(s.cacheable=!1),a}function EP(i,t,e){const{min:s,max:n}=i,r=jb(t,(n-s)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(n,r)}}function nn(i,t){return Object.assign(Object.create(i),t)}function Rf(i,t=[""],e=i,s,n=()=>i[0]){ci(s)||(s=l1("_fallback",i));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:e,_fallback:s,_getTarget:n,override:o=>Rf([o,...i],t,e,s)};return new Proxy(r,{deleteProperty(o,a){return delete o[a],delete o._keys,delete i[0][a],!0},get(o,a){return o1(o,a,()=>DP(a,t,i,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(o,a){return km(o).includes(a)},ownKeys(o){return km(o)},set(o,a,l){const h=o._storage||(o._storage=n());return o[a]=h[a]=l,delete o._keys,!0}})}function Hr(i,t,e,s){const n={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:r1(i,s),setContext:r=>Hr(i,r,e,s),override:r=>Hr(i.override(r),t,e,s)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete i[o],!0},get(r,o,a){return o1(r,o,()=>AP(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(r,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(r,o,a){return i[o]=a,delete r[o],!0}})}function r1(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=i;return{allKeys:n,scriptable:e,indexable:s,isScriptable:en(e)?e:()=>e,isIndexable:en(s)?s:()=>s}}const TP=(i,t)=>i?i+Af(t):t,Df=(i,t)=>wt(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function o1(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];const s=e();return i[t]=s,s}function AP(i,t,e){const{_proxy:s,_context:n,_subProxy:r,_descriptors:o}=i;let a=s[t];return en(a)&&o.isScriptable(t)&&(a=CP(t,a,i,e)),Ft(a)&&a.length&&(a=MP(t,a,i,o.isIndexable)),Df(t,a)&&(a=Hr(a,n,r&&r[t],o)),a}function CP(i,t,e,s){const{_proxy:n,_context:r,_subProxy:o,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);return a.add(i),t=t(r,o||s),a.delete(i),Df(i,t)&&(t=Of(n._scopes,n,i,t)),t}function MP(i,t,e,s){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=e;if(ci(r.index)&&s(i))t=t[r.index%t.length];else if(wt(t[0])){const l=t,h=n._scopes.filter(c=>c!==l);t=[];for(const c of l){const u=Of(h,n,i,c);t.push(Hr(u,r,o&&o[i],a))}}return t}function a1(i,t,e){return en(i)?i(t,e):i}const IP=(i,t)=>i===!0?t:typeof i=="string"?tn(t,i):void 0;function PP(i,t,e,s,n){for(const r of t){const o=IP(e,r);if(o){i.add(o);const a=a1(o._fallback,e,n);if(ci(a)&&a!==e&&a!==s)return a}else if(o===!1&&ci(s)&&e!==s)return null}return!1}function Of(i,t,e,s){const n=t._rootScopes,r=a1(t._fallback,e,s),o=[...i,...n],a=new Set;a.add(s);let l=Om(a,o,e,r||e,s);return l===null||ci(r)&&r!==e&&(l=Om(a,o,r,l,s),l===null)?!1:Rf(Array.from(a),[""],n,r,()=>RP(t,e,s))}function Om(i,t,e,s,n){for(;e;)e=PP(i,t,e,s,n);return e}function RP(i,t,e){const s=i._getTarget();t in s||(s[t]={});const n=s[t];return Ft(n)&&wt(e)?e:n||{}}function DP(i,t,e,s){let n;for(const r of t)if(n=l1(TP(r,i),e),ci(n))return Df(i,n)?Of(e,s,i,n):n}function l1(i,t){for(const e of t){if(!e)continue;const s=e[i];if(ci(s))return s}}function km(i){let t=i._keys;return t||(t=i._keys=OP(i._scopes)),t}function OP(i){const t=new Set;for(const e of i)for(const s of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function h1(i,t,e,s){const{iScale:n}=i,{key:r="r"}=this._parsing,o=new Array(s);let a,l,h,c;for(a=0,l=s;a<l;++a)h=a+e,c=t[h],o[a]={r:n.parse(tn(c,r),h)};return o}const kP=Number.EPSILON||1e-14,zr=(i,t)=>t<i.length&&!i[t].skip&&i[t],c1=i=>i==="x"?"y":"x";function FP(i,t,e,s){const n=i.skip?t:i,r=t,o=e.skip?t:e,a=Sd(r,n),l=Sd(o,r);let h=a/(a+l),c=l/(a+l);h=isNaN(h)?0:h,c=isNaN(c)?0:c;const u=s*h,d=s*c;return{previous:{x:r.x-u*(o.x-n.x),y:r.y-u*(o.y-n.y)},next:{x:r.x+d*(o.x-n.x),y:r.y+d*(o.y-n.y)}}}function BP(i,t,e){const s=i.length;let n,r,o,a,l,h=zr(i,0);for(let c=0;c<s-1;++c)if(l=h,h=zr(i,c+1),!(!l||!h)){if(Oo(t[c],0,kP)){e[c]=e[c+1]=0;continue}n=e[c]/t[c],r=e[c+1]/t[c],a=Math.pow(n,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[c]=n*o*t[c],e[c+1]=r*o*t[c])}}function LP(i,t,e="x"){const s=c1(e),n=i.length;let r,o,a,l=zr(i,0);for(let h=0;h<n;++h){if(o=a,a=l,l=zr(i,h+1),!a)continue;const c=a[e],u=a[s];o&&(r=(c-o[e])/3,a[`cp1${e}`]=c-r,a[`cp1${s}`]=u-r*t[h]),l&&(r=(l[e]-c)/3,a[`cp2${e}`]=c+r,a[`cp2${s}`]=u+r*t[h])}}function NP(i,t="x"){const e=c1(t),s=i.length,n=Array(s).fill(0),r=Array(s);let o,a,l,h=zr(i,0);for(o=0;o<s;++o)if(a=l,l=h,h=zr(i,o+1),!!l){if(h){const c=h[t]-l[t];n[o]=c!==0?(h[e]-l[e])/c:0}r[o]=a?h?Zi(n[o-1])!==Zi(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}BP(i,n,r),LP(i,r,t)}function il(i,t,e){return Math.max(Math.min(i,e),t)}function UP(i,t){let e,s,n,r,o,a=na(i[0],t);for(e=0,s=i.length;e<s;++e)o=r,r=a,a=e<s-1&&na(i[e+1],t),r&&(n=i[e],o&&(n.cp1x=il(n.cp1x,t.left,t.right),n.cp1y=il(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=il(n.cp2x,t.left,t.right),n.cp2y=il(n.cp2y,t.top,t.bottom)))}function GP(i,t,e,s,n){let r,o,a,l;if(t.spanGaps&&(i=i.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")NP(i,n);else{let h=s?i[i.length-1]:i[0];for(r=0,o=i.length;r<o;++r)a=i[r],l=FP(h,a,i[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,h=a}t.capBezierPoints&&UP(i,e)}function u1(){return typeof window<"u"&&typeof document<"u"}function kf(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function yh(i,t,e){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=i,s}const Qh=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function HP(i,t){return Qh(i).getPropertyValue(t)}const zP=["top","right","bottom","left"];function Dn(i,t,e){const s={};e=e?"-"+e:"";for(let n=0;n<4;n++){const r=zP[n];s[r]=parseFloat(i[t+"-"+r+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const VP=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function WP(i,t){const e=i.touches,s=e&&e.length?e[0]:i,{offsetX:n,offsetY:r}=s;let o=!1,a,l;if(VP(n,r,i.target))a=n,l=r;else{const h=t.getBoundingClientRect();a=s.clientX-h.left,l=s.clientY-h.top,o=!0}return{x:a,y:l,box:o}}function xn(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:s}=t,n=Qh(e),r=n.boxSizing==="border-box",o=Dn(n,"padding"),a=Dn(n,"border","width"),{x:l,y:h,box:c}=WP(i,e),u=o.left+(c&&a.left),d=o.top+(c&&a.top);let{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*e.width/s),y:Math.round((h-d)/p*e.height/s)}}function jP(i,t,e){let s,n;if(t===void 0||e===void 0){const r=kf(i);if(!r)t=i.clientWidth,e=i.clientHeight;else{const o=r.getBoundingClientRect(),a=Qh(r),l=Dn(a,"border","width"),h=Dn(a,"padding");t=o.width-h.width-l.width,e=o.height-h.height-l.height,s=yh(a.maxWidth,r,"clientWidth"),n=yh(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:s||mh,maxHeight:n||mh}}const sl=i=>Math.round(i*10)/10;function XP(i,t,e,s){const n=Qh(i),r=Dn(n,"margin"),o=yh(n.maxWidth,i,"clientWidth")||mh,a=yh(n.maxHeight,i,"clientHeight")||mh,l=jP(i,t,e);let{width:h,height:c}=l;if(n.boxSizing==="content-box"){const d=Dn(n,"border","width"),f=Dn(n,"padding");h-=f.width+d.width,c-=f.height+d.height}return h=Math.max(0,h-r.width),c=Math.max(0,s?h/s:c-r.height),h=sl(Math.min(h,o,l.maxWidth)),c=sl(Math.min(c,a,l.maxHeight)),h&&!c&&(c=sl(h/2)),(t!==void 0||e!==void 0)&&s&&l.height&&c>l.height&&(c=l.height,h=sl(Math.floor(c*s))),{width:h,height:c}}function Fm(i,t,e){const s=t||1,n=Math.floor(i.height*s),r=Math.floor(i.width*s);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||o.height!==n||o.width!==r?(i.currentDevicePixelRatio=s,o.height=n,o.width=r,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}const YP=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return i}();function Bm(i,t){const e=HP(i,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function vn(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function $P(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:s==="middle"?e<.5?i.y:t.y:s==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function KP(i,t,e,s){const n={x:i.cp2x,y:i.cp2y},r={x:t.cp1x,y:t.cp1y},o=vn(i,n,e),a=vn(n,r,e),l=vn(r,t,e),h=vn(o,a,e),c=vn(a,l,e);return vn(h,c,e)}const qP=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},ZP=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function Cr(i,t,e){return i?qP(t,e):ZP()}function d1(i,t){let e,s;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=s)}function f1(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function p1(i){return i==="angle"?{between:sa,compare:JI,normalize:Ye}:{between:bs,compare:(t,e)=>t-e,normalize:t=>t}}function Lm({start:i,end:t,count:e,loop:s,style:n}){return{start:i%e,end:t%e,loop:s&&(t-i+1)%e===0,style:n}}function JP(i,t,e){const{property:s,start:n,end:r}=e,{between:o,normalize:a}=p1(s),l=t.length;let{start:h,end:c,loop:u}=i,d,f;if(u){for(h+=l,c+=l,d=0,f=l;d<f&&o(a(t[h%l][s]),n,r);++d)h--,c--;h%=l,c%=l}return c<h&&(c+=l),{start:h,end:c,loop:u,style:i.style}}function g1(i,t,e){if(!e)return[i];const{property:s,start:n,end:r}=e,o=t.length,{compare:a,between:l,normalize:h}=p1(s),{start:c,end:u,loop:d,style:f}=JP(i,t,e),p=[];let g=!1,m=null,_,y,b;const v=()=>l(n,b,_)&&a(n,b)!==0,x=()=>a(r,_)===0||l(r,b,_),E=()=>g||v(),S=()=>!g||x();for(let A=c,M=c;A<=u;++A)y=t[A%o],!y.skip&&(_=h(y[s]),_!==b&&(g=l(_,n,r),m===null&&E()&&(m=a(_,n)===0?A:M),m!==null&&S()&&(p.push(Lm({start:m,end:A,loop:d,count:o,style:f})),m=null),M=A,b=_));return m!==null&&p.push(Lm({start:m,end:u,loop:d,count:o,style:f})),p}function m1(i,t){const e=[],s=i.segments;for(let n=0;n<s.length;n++){const r=g1(s[n],i.points,t);r.length&&e.push(...r)}return e}function QP(i,t,e,s){let n=0,r=t-1;if(e&&!s)for(;n<t&&!i[n].skip;)n++;for(;n<t&&i[n].skip;)n++;for(n%=t,e&&(r+=n);r>n&&i[r%t].skip;)r--;return r%=t,{start:n,end:r}}function tR(i,t,e,s){const n=i.length,r=[];let o=t,a=i[t],l;for(l=t+1;l<=e;++l){const h=i[l%n];h.skip||h.stop?a.skip||(s=!1,r.push({start:t%n,end:(l-1)%n,loop:s}),t=o=h.stop?l:null):(o=l,a.skip&&(t=l)),a=h}return o!==null&&r.push({start:t%n,end:o%n,loop:s}),r}function eR(i,t){const e=i.points,s=i.options.spanGaps,n=e.length;if(!n)return[];const r=!!i._loop,{start:o,end:a}=QP(e,n,r,s);if(s===!0)return Nm(i,[{start:o,end:a,loop:r}],e,t);const l=a<o?a+n:a,h=!!i._fullLoop&&o===0&&a===n-1;return Nm(i,tR(e,o,l,h),e,t)}function Nm(i,t,e,s){return!s||!s.setContext||!e?t:iR(i,t,e,s)}function iR(i,t,e,s){const n=i._chart.getContext(),r=Um(i.options),{_datasetIndex:o,options:{spanGaps:a}}=i,l=e.length,h=[];let c=r,u=t[0].start,d=u;function f(p,g,m,_){const y=a?-1:1;if(p!==g){for(p+=l;e[p%l].skip;)p-=y;for(;e[g%l].skip;)g+=y;p%l!==g%l&&(h.push({start:p%l,end:g%l,loop:m,style:_}),c=_,u=g%l)}}for(const p of t){u=a?u:p.start;let g=e[u%l],m;for(d=u+1;d<=p.end;d++){const _=e[d%l];m=Um(s.setContext(nn(n,{type:"segment",p0:g,p1:_,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),sR(m,c)&&f(u,d-1,p.loop,c),g=_,c=m}u<d-1&&f(u,d-1,p.loop,c)}return h}function Um(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function sR(i,t){return t&&JSON.stringify(i)!==JSON.stringify(t)}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class nR{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,n){const r=e.listeners[n],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(s-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Zb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,s,t,"progress")),r.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ds=new nR;const Gm="transparent",rR={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const s=Pm(i||Gm),n=s.valid&&Pm(t||Gm);return n&&n.valid?n.mix(s,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class oR{constructor(t,e,s,n){const r=e[s];n=bo([t.to,n,r,t.from]);const o=bo([t.from,r,n]);this._active=!0,this._fn=t.fn||rR[t.type||typeof o],this._easing=ko[t.easing]||ko.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const n=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=bo([t.to,e,n,t.from]),this._from=bo([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<s),!this._active){this._target[n]=a,this._notify(!0);return}if(e<0){this._target[n]=r;return}l=e/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][e]()}}class _1{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!wt(t))return;const e=Object.keys(ie.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!wt(r))return;const o={};for(const a of e)o[a]=r[a];(Ft(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,e){const s=e.options,n=lR(t,s);if(!n)return[];const r=this._createAnimations(n,s);return s.$shared&&aR(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,e){const s=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const h=o[l];if(h.charAt(0)==="$")continue;if(h==="options"){n.push(...this._animateOptions(t,e));continue}const c=e[h];let u=r[h];const d=s.get(h);if(u)if(d&&u.active()){u.update(d,c,a);continue}else u.cancel();if(!d||!d.duration){t[h]=c;continue}r[h]=u=new oR(d,t,h,c),n.push(u)}return n}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return ds.add(this._chart,s),!0}}function aR(i,t){const e=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const r=i[s[n]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function lR(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Hm(i,t){const e=i&&i.options||{},s=e.reverse,n=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:s?r:n,end:s?n:r}}function hR(i,t,e){if(e===!1)return!1;const s=Hm(i,e),n=Hm(t,e);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function cR(i){let t,e,s,n;return wt(i)?(t=i.top,e=i.right,s=i.bottom,n=i.left):t=e=s=n=i,{top:t,right:e,bottom:s,left:n,disabled:i===!1}}function y1(i,t){const e=[],s=i._getSortedDatasetMetas(t);let n,r;for(n=0,r=s.length;n<r;++n)e.push(s[n].index);return e}function zm(i,t,e,s={}){const n=i.keys,r=s.mode==="single";let o,a,l,h;if(t!==null){for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===e){if(s.all)continue;break}h=i.values[l],Zt(h)&&(r||t===0||Zi(t)===Zi(h))&&(t+=h)}return t}}function uR(i){const t=Object.keys(i),e=new Array(t.length);let s,n,r;for(s=0,n=t.length;s<n;++s)r=t[s],e[s]={x:r,y:i[r]};return e}function Vm(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function dR(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function fR(i){const{min:t,max:e,minDefined:s,maxDefined:n}=i.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}function pR(i,t,e){const s=i[t]||(i[t]={});return s[e]||(s[e]={})}function Wm(i,t,e,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const r=i[n.index];if(e&&r>0||!e&&r<0)return n.index}return null}function jm(i,t){const{chart:e,_cachedMeta:s}=i,n=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,h=o.axis,c=dR(r,o,s),u=t.length;let d;for(let f=0;f<u;++f){const p=t[f],{[l]:g,[h]:m}=p,_=p._stacks||(p._stacks={});d=_[h]=pR(n,c,g),d[a]=m,d._top=Wm(d,o,!0,s.type),d._bottom=Wm(d,o,!1,s.type);const y=d._visualValues||(d._visualValues={});y[a]=m}}function ou(i,t){const e=i.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function gR(i,t){return nn(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function mR(i,t,e){return nn(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ro(i,t){const e=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(const n of t){const r=n._stacks;if(!r||r[s]===void 0||r[s][e]===void 0)return;delete r[s][e],r[s]._visualValues!==void 0&&r[s]._visualValues[e]!==void 0&&delete r[s]._visualValues[e]}}}const au=i=>i==="reset"||i==="none",Xm=(i,t)=>t?i:Object.assign({},i),_R=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:y1(e,!0),values:null};class Pi{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Vm(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ro(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),n=(u,d,f,p)=>u==="x"?d:u==="r"?p:f,r=e.xAxisID=yt(s.xAxisID,ou(t,"x")),o=e.yAxisID=yt(s.yAxisID,ou(t,"y")),a=e.rAxisID=yt(s.rAxisID,ou(t,"r")),l=e.indexAxis,h=e.iAxisID=n(l,r,o,a),c=e.vAxisID=n(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Cm(this._data,this),t._stacked&&ro(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(wt(e))this._data=uR(e);else if(s!==e){if(s){Cm(s,this);const n=this._cachedMeta;ro(n),n._parsed=[]}e&&Object.isExtensible(e)&&iP(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const r=e._stacked;e._stacked=Vm(e.vScale,e),e.stack!==s.stack&&(n=!0,ro(e),e.stack=s.stack),this._resyncElements(t),(n||r!==e._stacked)&&jm(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:n}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&e===n.length?!0:s._sorted,h=t>0&&s._parsed[t-1],c,u,d;if(this._parsing===!1)s._parsed=n,s._sorted=!0,d=n;else{Ft(n[t])?d=this.parseArrayData(s,n,t,e):wt(n[t])?d=this.parseObjectData(s,n,t,e):d=this.parsePrimitiveData(s,n,t,e);const f=()=>u[a]===null||h&&u[a]<h[a];for(c=0;c<e;++c)s._parsed[c+t]=u=d[c],l&&(f()&&(l=!1),h=u);s._sorted=l}o&&jm(this,d)}parsePrimitiveData(t,e,s,n){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,h=r.getLabels(),c=r===o,u=new Array(n);let d,f,p;for(d=0,f=n;d<f;++d)p=d+s,u[d]={[a]:c||r.parse(h[p],p),[l]:o.parse(e[p],p)};return u}parseArrayData(t,e,s,n){const{xScale:r,yScale:o}=t,a=new Array(n);let l,h,c,u;for(l=0,h=n;l<h;++l)c=l+s,u=e[c],a[l]={x:r.parse(u[0],c),y:o.parse(u[1],c)};return a}parseObjectData(t,e,s,n){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=new Array(n);let c,u,d,f;for(c=0,u=n;c<u;++c)d=c+s,f=e[d],h[c]={x:r.parse(tn(f,a),d),y:o.parse(tn(f,l),d)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const n=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:y1(n,!0),values:e._stacks[t.axis]._visualValues};return zm(a,o,r.index,{mode:s})}updateRangeFromParsed(t,e,s,n){const r=s[e.axis];let o=r===null?NaN:r;const a=n&&s._stacks[e.axis];n&&a&&(n.values=a,o=zm(n,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const s=this._cachedMeta,n=s._parsed,r=s._sorted&&t===s.iScale,o=n.length,a=this._getOtherScale(t),l=_R(e,s,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=fR(a);let d,f;function p(){f=n[d];const g=f[a.axis];return!Zt(f[t.axis])||c>g||u<g}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(h,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(h,t,f,l);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let n,r,o;for(n=0,r=e.length;n<r;++n)o=e[n][t.axis],Zt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,n=e.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=cR(yt(this.options.clip,hR(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,n=s.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,h=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(t,r,a,l),c=a;c<a+l;++c){const u=n[c];u.hidden||(u.active&&h?o.push(u):u.draw(t,r))}for(c=0;c<o.length;++c)o[c].draw(t,r)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const n=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=mR(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=n.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=gR(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const n=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&ci(s);if(a)return Xm(a,l);const h=this.chart.config,c=h.datasetElementScopeKeys(this._type,t),u=n?[`${t}Hover`,"hover",t,""]:[t,""],d=h.getOptionScopes(this.getDataset(),c),f=Object.keys(ie.elements[t]),p=()=>this.getContext(s,n,e),g=h.resolveNamedOptions(d,f,p,u);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(Xm(g,l))),g}_resolveAnimations(t,e,s){const n=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(n.options.animation!==!1){const c=this.chart.config,u=c.datasetAnimationScopeKeys(this._type,e),d=c.getOptionScopes(this.getDataset(),u);l=c.createResolver(d,this.getContext(t,s,e))}const h=new _1(n,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||au(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),n=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(e,r)||r!==n;return this.updateSharedOptions(r,e,s),{sharedOptions:r,includeOptions:o}}updateElement(t,e,s,n){au(n)?Object.assign(t,s):this._resolveAnimations(e,n).update(t,s)}updateSharedOptions(t,e,s){t&&!au(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,n){t.active=n;const r=this.getStyle(e,n);this._resolveAnimations(e,s,n).update(t,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[a,l,h]of this._syncList)this[a](l,h);this._syncList=[];const n=s.length,r=e.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,t):r<n&&this._removeElements(r,n-r)}_insertElements(t,e,s=!0){const n=this._cachedMeta,r=n.data,o=t+e;let a;const l=h=>{for(h.length+=e,a=h.length-1;a>=o;a--)h[a]=h[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,e),s&&this.updateElements(r,t,e,"reset")}updateElements(t,e,s,n){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(t,e);s._stacked&&ro(s,n)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,n]=t;this[e](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}nt(Pi,"defaults",{}),nt(Pi,"datasetElementType",null),nt(Pi,"dataElementType",null);function yR(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let s=[];for(let n=0,r=e.length;n<r;n++)s=s.concat(e[n].controller.getAllParsedValues(i));i._cache.$bar=qb(s.sort((n,r)=>n-r))}return i._cache.$bar}function bR(i){const t=i.iScale,e=yR(t,i.type);let s=t._length,n,r,o,a;const l=()=>{o===32767||o===-32768||(ci(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(n=0,r=e.length;n<r;++n)o=t.getPixelForValue(e[n]),l();for(a=void 0,n=0,r=t.ticks.length;n<r;++n)o=t.getPixelForTick(n),l();return s}function xR(i,t,e,s){const n=e.barThickness;let r,o;return Ct(n)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=n*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[i]-r/2}}function vR(i,t,e,s){const n=t.pixels,r=n[i];let o=i>0?n[i-1]:null,a=i<n.length-1?n[i+1]:null;const l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const h=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:e.barPercentage,start:h}}function wR(i,t,e,s){const n=e.parse(i[0],s),r=e.parse(i[1],s),o=Math.min(n,r),a=Math.max(n,r);let l=o,h=a;Math.abs(o)>Math.abs(a)&&(l=a,h=o),t[e.axis]=h,t._custom={barStart:l,barEnd:h,start:n,end:r,min:o,max:a}}function b1(i,t,e,s){return Ft(i)?wR(i,t,e,s):t[e.axis]=e.parse(i,s),t}function Ym(i,t,e,s){const n=i.iScale,r=i.vScale,o=n.getLabels(),a=n===r,l=[];let h,c,u,d;for(h=e,c=e+s;h<c;++h)d=t[h],u={},u[n.axis]=a||n.parse(o[h],h),l.push(b1(d,u,r,h));return l}function lu(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function SR(i,t,e){return i!==0?Zi(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function ER(i){let t,e,s,n,r;return i.horizontal?(t=i.base>i.x,e="left",s="right"):(t=i.base<i.y,e="bottom",s="top"),t?(n="end",r="start"):(n="start",r="end"),{start:e,end:s,reverse:t,top:n,bottom:r}}function TR(i,t,e,s){let n=t.borderSkipped;const r={};if(!n){i.borderSkipped=r;return}if(n===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:h,bottom:c}=ER(i);n==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===s?n=h:(e._bottom||0)===s?n=c:(r[$m(c,o,a,l)]=!0,n=h)),r[$m(n,o,a,l)]=!0,i.borderSkipped=r}function $m(i,t,e,s){return s?(i=AR(i,t,e),i=Km(i,e,t)):i=Km(i,t,e),i}function AR(i,t,e){return i===t?e:i===e?t:i}function Km(i,t,e){return i==="start"?t:i==="end"?e:i}function CR(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class Cl extends Pi{parsePrimitiveData(t,e,s,n){return Ym(t,e,s,n)}parseArrayData(t,e,s,n){return Ym(t,e,s,n)}parseObjectData(t,e,s,n){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=r.axis==="x"?a:l,c=o.axis==="x"?a:l,u=[];let d,f,p,g;for(d=s,f=s+n;d<f;++d)g=e[d],p={},p[r.axis]=r.parse(tn(g,h),d),u.push(b1(tn(g,c),p,o,d));return u}updateRangeFromParsed(t,e,s,n){super.updateRangeFromParsed(t,e,s,n);const r=s._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:n}=e,r=this.getParsed(t),o=r._custom,a=lu(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),h=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,n);for(let f=e;f<e+s;f++){const p=this.getParsed(f),g=r||Ct(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,c),_=(p._stacks||{})[a.axis],y={horizontal:h,base:g.base,enableBorderRadius:!_||lu(p._custom)||o===_._top||o===_._bottom,x:h?g.head:m.center,y:h?m.center:g.head,height:h?m.size:Math.abs(g.size),width:h?Math.abs(g.size):m.size};d&&(y.options=u||this.resolveDataElementOptions(f,t[f].active?"active":n));const b=y.options||t[f].options;TR(y,b,_,o),CR(y,b,c.ratio),this.updateElement(t[f],f,y,n)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=s.options.stacked,o=[],a=l=>{const h=l.controller.getParsed(e),c=h&&h[l.vScale.axis];if(Ct(c)||isNaN(c))return!0};for(const l of n)if(!(e!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,s){const n=this._getStacks(t,s),r=e!==void 0?n.indexOf(e):-1;return r===-1?n.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,n=[];let r,o;for(r=0,o=e.data.length;r<o;++r)n.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||bR(e),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s,index:n},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),h=l._custom,c=lu(h);let u=l[e.axis],d=0,f=s?this.applyStack(e,l,s):u,p,g;f!==u&&(d=f-u,f=u),c&&(u=h.barStart,f=h.barEnd-h.barStart,u!==0&&Zi(u)!==Zi(h.barEnd)&&(d=0),d+=u);const m=!Ct(r)&&!c?r:d;let _=e.getPixelForValue(m);if(this.chart.getDataVisibility(t)?p=e.getPixelForValue(d+f):p=_,g=p-_,Math.abs(g)<o){g=SR(g,e,a)*o,u===a&&(_-=g/2);const y=e.getPixelForDecimal(0),b=e.getPixelForDecimal(1),v=Math.min(y,b),x=Math.max(y,b);_=Math.max(Math.min(_,x),v),p=_+g,s&&!c&&(l._stacks[e.axis]._visualValues[n]=e.getValueForPixel(p)-e.getValueForPixel(_))}if(_===e.getPixelForValue(a)){const y=Zi(g)*e.getLineWidthForValue(a)/2;_+=y,g-=y}return{size:g,base:_,head:p,center:p+g/2}}_calculateBarIndexPixels(t,e){const s=e.scale,n=this.options,r=n.skipNull,o=yt(n.maxBarThickness,1/0);let a,l;if(e.grouped){const h=r?this._getStackCount(t):e.stackCount,c=n.barThickness==="flex"?vR(t,e,n,h):xR(t,e,n,h),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=c.start+c.chunk*u+c.chunk/2,l=Math.min(o,c.chunk*c.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,n=s.length;let r=0;for(;r<n;++r)this.getParsed(r)[e.axis]!==null&&s[r].draw(this._ctx)}}nt(Cl,"id","bar"),nt(Cl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),nt(Cl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ml extends Pi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,s,n){const r=super.parsePrimitiveData(t,e,s,n);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(t,e,s,n){const r=super.parseArrayData(t,e,s,n);for(let o=0;o<r.length;o++){const a=e[s+o];r[o]._custom=yt(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(t,e,s,n){const r=super.parseObjectData(t,e,s,n);for(let o=0;o<r.length;o++){const a=e[s+o];r[o]._custom=yt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=e,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y),h=o._custom;return{label:s[t]||"",value:"("+a+", "+l+(h?", "+h:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,s,n){const r=n==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:h}=this._getSharedOptions(e,n),c=o.axis,u=a.axis;for(let d=e;d<e+s;d++){const f=t[d],p=!r&&this.getParsed(d),g={},m=g[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[c]),_=g[u]=r?a.getBasePixel():a.getPixelForValue(p[u]);g.skip=isNaN(m)||isNaN(_),h&&(g.options=l||this.resolveDataElementOptions(d,f.active?"active":n),r&&(g.options.radius=0)),this.updateElement(f,d,g,n)}}resolveDataElementOptions(t,e){const s=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return e!=="active"&&(n.radius=0),n.radius+=yt(s&&s._custom,r),n}}nt(Ml,"id","bubble"),nt(Ml,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),nt(Ml,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function MR(i,t,e){let s=1,n=1,r=0,o=0;if(t<Bt){const a=i,l=a+t,h=Math.cos(a),c=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(b,v,x)=>sa(b,a,l,!0)?1:Math.max(v,v*e,x,x*e),p=(b,v,x)=>sa(b,a,l,!0)?-1:Math.min(v,v*e,x,x*e),g=f(0,h,u),m=f(Jt,c,d),_=p(Nt,h,u),y=p(Nt+Jt,c,d);s=(g-_)/2,n=(m-y)/2,r=-(g+_)/2,o=-(m+y)/2}return{ratioX:s,ratioY:n,offsetX:r,offsetY:o}}class Tn extends Pi{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let r=l=>+s[l];if(wt(s[t])){const{key:l="value"}=this._parsing;r=h=>+tn(s[h],l)}let o,a;for(o=t,a=t+e;o<a;++o)n._parsed[o]=r(o)}}_getRotation(){return Ei(this.options.rotation-90)}_getCircumference(){return Ei(this.options.circumference)}_getRotationExtents(){let t=Bt,e=-Bt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,r=n._getRotation(),o=n._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(zI(this.options.cutout,a),1),h=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=MR(u,c,l),m=(s.width-o)/d,_=(s.height-o)/f,y=Math.max(Math.min(m,_)/2,0),b=jb(this.options.radius,y),v=Math.max(b*l,0),x=(b-v)/this._getVisibleDatasetWeightTotal();this.offsetX=p*b,this.offsetY=g*b,n.total=this.calculateTotal(),this.outerRadius=b-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const s=this.options,n=this._cachedMeta,r=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*r/Bt)}updateElements(t,e,s,n){const r=n==="reset",o=this.chart,a=o.chartArea,h=o.options.animation,c=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=r&&h.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:m}=this._getSharedOptions(e,n);let _=this._getRotation(),y;for(y=0;y<e;++y)_+=this._circumference(y,r);for(y=e;y<e+s;++y){const b=this._circumference(y,r),v=t[y],x={x:c+this.offsetX,y:u+this.offsetY,startAngle:_,endAngle:_+b,circumference:b,outerRadius:p,innerRadius:f};m&&(x.options=g||this.resolveDataElementOptions(y,v.active?"active":n)),_+=b,this.updateElement(v,y,x,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,n;for(n=0;n<e.length;n++){const r=t._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!e[n].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Bt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=ya(e._parsed[t],s.options.locale);return{label:n[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const s=this.chart;let n,r,o,a,l;if(!t){for(n=0,r=s.data.datasets.length;n<r;++n)if(s.isDatasetVisible(n)){o=s.getDatasetMeta(n),t=o.data,a=o.controller;break}}if(!t)return 0;for(n=0,r=t.length;n<r;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,n=t.length;s<n;++s){const r=this.resolveDataElementOptions(s);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(yt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}nt(Tn,"id","doughnut"),nt(Tn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),nt(Tn,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"}),nt(Tn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}});class Il extends Pi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:s,data:n=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=Qb(e,n,o);this._drawStart=a,this._drawCount=l,t1(e)&&(a=0,l=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=n;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:h},t),this.updateElements(n,a,l,t)}updateElements(t,e,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,n),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=Gr(p)?p:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||n==="none",y=e+s,b=t.length;let v=e>0&&this.getParsed(e-1);for(let x=0;x<b;++x){const E=t[x],S=_?E:{};if(x<e||x>=y){S.skip=!0;continue}const A=this.getParsed(x),M=Ct(A[f]),I=S[d]=o.getPixelForValue(A[d],x),C=S[f]=r||M?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[f],x);S.skip=isNaN(I)||isNaN(C)||M,S.stop=x>0&&Math.abs(A[d]-v[d])>m,g&&(S.parsed=A,S.raw=h.data[x]),u&&(S.options=c||this.resolveDataElementOptions(x,E.active?"active":n)),_||this.updateElement(E,x,S,n),v=A}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,s=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}nt(Il,"id","line"),nt(Il,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),nt(Il,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Bo extends Pi{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=ya(e._parsed[t].r,s.options.locale);return{label:n[t]||"",value:r}}parseObjectData(t,e,s,n){return h1.bind(this)(t,e,s,n)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,s=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(n/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,s,n){const r=n==="reset",o=this.chart,l=o.options.animation,h=this._cachedMeta.rScale,c=h.xCenter,u=h.yCenter,d=h.getIndexAngle(0)-.5*Nt;let f=d,p;const g=360/this.countVisibleElements();for(p=0;p<e;++p)f+=this._computeAngle(p,n,g);for(p=e;p<e+s;p++){const m=t[p];let _=f,y=f+this._computeAngle(p,n,g),b=o.getDataVisibility(p)?h.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=y,r&&(l.animateScale&&(b=0),l.animateRotate&&(_=y=d));const v={x:c,y:u,innerRadius:0,outerRadius:b,startAngle:_,endAngle:y,options:this.resolveDataElementOptions(p,m.active?"active":n)};this.updateElement(m,p,v,n)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?Ei(this.resolveDataElementOptions(t,e).angle||s):0}}nt(Bo,"id","polarArea"),nt(Bo,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),nt(Bo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Ad extends Tn{}nt(Ad,"id","pie"),nt(Ad,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Pl extends Pi{getLabelAndValue(t){const e=this._cachedMeta.vScale,s=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(s[e.axis])}}parseObjectData(t,e,s,n){return h1.bind(this)(t,e,s,n)}update(t){const e=this._cachedMeta,s=e.dataset,n=e.data||[],r=e.iScale.getLabels();if(s.points=n,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===n.length,options:o};this.updateElement(s,void 0,a,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,s,n){const r=this._cachedMeta.rScale,o=n==="reset";for(let a=e;a<e+s;a++){const l=t[a],h=this.resolveDataElementOptions(a,l.active?"active":n),c=r.getPointPositionForValue(a,this.getParsed(a).r),u=o?r.xCenter:c.x,d=o?r.yCenter:c.y,f={x:u,y:d,angle:c.angle,skip:isNaN(u)||isNaN(d),options:h};this.updateElement(l,a,f,n)}}}nt(Pl,"id","radar"),nt(Pl,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),nt(Pl,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Rl extends Pi{getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=e,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:s[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:s=[]}=e,n=this.chart._animationsDisabled;let{start:r,count:o}=Qb(e,s,n);if(this._drawStart=r,this._drawCount=o,t1(e)&&(r=0,o=s.length),this.options.showLine){const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:h},t)}this.updateElements(s,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,c=this.resolveDataElementOptions(e,n),u=this.getSharedOptions(c),d=this.includeOptions(n,u),f=o.axis,p=a.axis,{spanGaps:g,segment:m}=this.options,_=Gr(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||n==="none";let b=e>0&&this.getParsed(e-1);for(let v=e;v<e+s;++v){const x=t[v],E=this.getParsed(v),S=y?x:{},A=Ct(E[p]),M=S[f]=o.getPixelForValue(E[f],v),I=S[p]=r||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[p],v);S.skip=isNaN(M)||isNaN(I)||A,S.stop=v>0&&Math.abs(E[f]-b[f])>_,m&&(S.parsed=E,S.raw=h.data[v]),d&&(S.options=u||this.resolveDataElementOptions(v,x.active?"active":n)),y||this.updateElement(x,v,S,n),b=E}this.updateSharedOptions(u,n,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=t.dataset,n=s.options&&s.options.borderWidth||0;if(!e.length)return n;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(n,r,o)/2}}nt(Rl,"id","scatter"),nt(Rl,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),nt(Rl,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var IR=Object.freeze({__proto__:null,BarController:Cl,BubbleController:Ml,DoughnutController:Tn,LineController:Il,PolarAreaController:Bo,PieController:Ad,RadarController:Pl,ScatterController:Rl});function fn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ff{static override(t){Object.assign(Ff.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return fn()}parse(){return fn()}format(){return fn()}add(){return fn()}diff(){return fn()}startOf(){return fn()}endOf(){return fn()}}var PR={_date:Ff};function RR(i,t,e,s){const{controller:n,data:r,_sorted:o}=i,a=n._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?tP:xs;if(s){if(n._sharedOptions){const h=r[0],c=typeof h.getRange=="function"&&h.getRange(t);if(c){const u=l(r,t,e-c),d=l(r,t,e+c);return{lo:u.lo,hi:d.hi}}}}else return l(r,t,e)}return{lo:0,hi:r.length-1}}function ba(i,t,e,s,n){const r=i.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:h,data:c}=r[a],{lo:u,hi:d}=RR(r[a],t,o,n);for(let f=u;f<=d;++f){const p=c[f];p.skip||s(p,h,f)}}}function DR(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(s,n){const r=t?Math.abs(s.x-n.x):0,o=e?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function hu(i,t,e,s,n){const r=[];return!n&&!i.isPointInArea(t)||ba(i,e,t,function(a,l,h){!n&&!na(a,i.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:h})},!0),r}function OR(i,t,e,s){let n=[];function r(o,a,l){const{startAngle:h,endAngle:c}=o.getProps(["startAngle","endAngle"],s),{angle:u}=$b(o,{x:t.x,y:t.y});sa(u,h,c)&&n.push({element:o,datasetIndex:a,index:l})}return ba(i,e,t,r),n}function kR(i,t,e,s,n,r){let o=[];const a=DR(e);let l=Number.POSITIVE_INFINITY;function h(c,u,d){const f=c.inRange(t.x,t.y,n);if(s&&!f)return;const p=c.getCenterPoint(n);if(!(!!r||i.isPointInArea(p))&&!f)return;const m=a(t,p);m<l?(o=[{element:c,datasetIndex:u,index:d}],l=m):m===l&&o.push({element:c,datasetIndex:u,index:d})}return ba(i,e,t,h),o}function cu(i,t,e,s,n,r){return!r&&!i.isPointInArea(t)?[]:e==="r"&&!s?OR(i,t,e,n):kR(i,t,e,s,n,r)}function qm(i,t,e,s,n){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return ba(i,e,t,(l,h,c)=>{l[o](t[e],n)&&(r.push({element:l,datasetIndex:h,index:c}),a=a||l.inRange(t.x,t.y,n))}),s&&!a?[]:r}var FR={evaluateInteractionItems:ba,modes:{index(i,t,e,s){const n=xn(t,i),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?hu(i,n,r,s,o):cu(i,n,r,!1,s,o),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(h=>{const c=a[0].index,u=h.data[c];u&&!u.skip&&l.push({element:u,datasetIndex:h.index,index:c})}),l):[]},dataset(i,t,e,s){const n=xn(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?hu(i,n,r,s,o):cu(i,n,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,h=i.getDatasetMeta(l).data;a=[];for(let c=0;c<h.length;++c)a.push({element:h[c],datasetIndex:l,index:c})}return a},point(i,t,e,s){const n=xn(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return hu(i,n,r,s,o)},nearest(i,t,e,s){const n=xn(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return cu(i,n,r,e.intersect,s,o)},x(i,t,e,s){const n=xn(t,i);return qm(i,n,"x",e.intersect,s)},y(i,t,e,s){const n=xn(t,i);return qm(i,n,"y",e.intersect,s)}}};const x1=["left","top","right","bottom"];function oo(i,t){return i.filter(e=>e.pos===t)}function Zm(i,t){return i.filter(e=>x1.indexOf(e.pos)===-1&&e.box.axis===t)}function ao(i,t){return i.sort((e,s)=>{const n=t?s:e,r=t?e:s;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function BR(i){const t=[];let e,s,n,r,o,a;for(e=0,s=(i||[]).length;e<s;++e)n=i[e],{position:r,options:{stack:o,stackWeight:a=1}}=n,t.push({index:e,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return t}function LR(i){const t={};for(const e of i){const{stack:s,pos:n,stackWeight:r}=e;if(!s||!x1.includes(n))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function NR(i,t){const e=LR(i),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let r,o,a;for(r=0,o=i.length;r<o;++r){a=i[r];const{fullSize:l}=a.box,h=e[a.stack],c=h&&a.stackWeight/h.weight;a.horizontal?(a.width=c?c*s:l&&t.availableWidth,a.height=n):(a.width=s,a.height=c?c*n:l&&t.availableHeight)}return e}function UR(i){const t=BR(i),e=ao(t.filter(h=>h.box.fullSize),!0),s=ao(oo(t,"left"),!0),n=ao(oo(t,"right")),r=ao(oo(t,"top"),!0),o=ao(oo(t,"bottom")),a=Zm(t,"x"),l=Zm(t,"y");return{fullSize:e,leftAndTop:s.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:oo(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function Jm(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function v1(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function GR(i,t,e,s){const{pos:n,box:r}=e,o=i.maxPadding;if(!wt(n)){e.size&&(i[n]-=e.size);const u=s[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?r.height:r.width),e.size=u.size/u.count,i[n]+=e.size}r.getPadding&&v1(o,r.getPadding());const a=Math.max(0,t.outerWidth-Jm(o,i,"left","right")),l=Math.max(0,t.outerHeight-Jm(o,i,"top","bottom")),h=a!==i.w,c=l!==i.h;return i.w=a,i.h=l,e.horizontal?{same:h,other:c}:{same:c,other:h}}function HR(i){const t=i.maxPadding;function e(s){const n=Math.max(t[s]-i[s],0);return i[s]+=n,n}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function zR(i,t){const e=t.maxPadding;function s(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return s(i?["left","right"]:["top","bottom"])}function xo(i,t,e,s){const n=[];let r,o,a,l,h,c;for(r=0,o=i.length,h=0;r<o;++r){a=i[r],l=a.box,l.update(a.width||t.w,a.height||t.h,zR(a.horizontal,t));const{same:u,other:d}=GR(t,e,a,s);h|=u&&n.length,c=c||d,l.fullSize||n.push(a)}return h&&xo(n,t,e,s)||c}function nl(i,t,e,s,n){i.top=e,i.left=t,i.right=t+s,i.bottom=e+n,i.width=s,i.height=n}function Qm(i,t,e,s){const n=e.padding;let{x:r,y:o}=t;for(const a of i){const l=a.box,h=s[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/h.weight||1;if(a.horizontal){const u=t.w*c,d=h.size||l.height;ci(h.start)&&(o=h.start),l.fullSize?nl(l,n.left,o,e.outerWidth-n.right-n.left,d):nl(l,t.left+h.placed,o,u,d),h.start=o,h.placed+=u,o=l.bottom}else{const u=t.h*c,d=h.size||l.width;ci(h.start)&&(r=h.start),l.fullSize?nl(l,r,n.top,d,e.outerHeight-n.bottom-n.top):nl(l,r,t.top+h.placed,d,u),h.start=r,h.placed+=u,r=l.right}}t.x=r,t.y=o}var Ee={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;const n=Me(i.options.layout.padding),r=Math.max(t-n.width,0),o=Math.max(e-n.height,0),a=UR(i.boxes),l=a.vertical,h=a.horizontal;Mt(i.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const c=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/c,hBoxMaxHeight:o/2}),d=Object.assign({},n);v1(d,Me(s));const f=Object.assign({maxPadding:d,w:r,h:o,x:n.left,y:n.top},n),p=NR(l.concat(h),u);xo(a.fullSize,f,u,p),xo(l,f,u,p),xo(h,f,u,p)&&xo(l,f,u,p),HR(f),Qm(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Qm(a.rightAndBottom,f,u,p),i.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Mt(a.chartArea,g=>{const m=g.box;Object.assign(m,i.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class w1{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,n){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):s)}}isAttached(t){return!0}updateConfig(t){}}class VR extends w1{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Dl="$chartjs",WR={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},t_=i=>i===null||i==="";function jR(i,t){const e=i.style,s=i.getAttribute("height"),n=i.getAttribute("width");if(i[Dl]={initial:{height:s,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",t_(n)){const r=Bm(i,"width");r!==void 0&&(i.width=r)}if(t_(s))if(i.style.height==="")i.height=i.width/(t||2);else{const r=Bm(i,"height");r!==void 0&&(i.height=r)}return i}const S1=YP?{passive:!0}:!1;function XR(i,t,e){i.addEventListener(t,e,S1)}function YR(i,t,e){i.canvas.removeEventListener(t,e,S1)}function $R(i,t){const e=WR[i.type]||i.type,{x:s,y:n}=xn(i,t);return{type:e,chart:t,native:i,x:s!==void 0?s:null,y:n!==void 0?n:null}}function bh(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function KR(i,t,e){const s=i.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||bh(a.addedNodes,s),o=o&&!bh(a.removedNodes,s);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function qR(i,t,e){const s=i.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||bh(a.removedNodes,s),o=o&&!bh(a.addedNodes,s);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}const oa=new Map;let e_=0;function E1(){const i=window.devicePixelRatio;i!==e_&&(e_=i,oa.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function ZR(i,t){oa.size||window.addEventListener("resize",E1),oa.set(i,t)}function JR(i){oa.delete(i),oa.size||window.removeEventListener("resize",E1)}function QR(i,t,e){const s=i.canvas,n=s&&kf(s);if(!n)return;const r=Jb((a,l)=>{const h=n.clientWidth;e(a,l),h<n.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],h=l.contentRect.width,c=l.contentRect.height;h===0&&c===0||r(h,c)});return o.observe(n),ZR(i,r),o}function uu(i,t,e){e&&e.disconnect(),t==="resize"&&JR(i)}function tD(i,t,e){const s=i.canvas,n=Jb(r=>{i.ctx!==null&&e($R(r,i))},i);return XR(s,t,n),n}class eD extends w1{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(jR(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[Dl])return!1;const s=e[Dl].initial;["height","width"].forEach(r=>{const o=s[r];Ct(o)?e.removeAttribute(r):e.setAttribute(r,o)});const n=s.style||{};return Object.keys(n).forEach(r=>{e.style[r]=n[r]}),e.width=e.width,delete e[Dl],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),o={attach:KR,detach:qR,resize:QR}[e]||tD;n[e]=o(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),n=s[e];if(!n)return;({attach:uu,detach:uu,resize:uu}[e]||YR)(t,e,n),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,n){return XP(t,e,s,n)}isAttached(t){const e=kf(t);return!!(e&&e.isConnected)}}function iD(i){return!u1()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?VR:eD}class Di{constructor(){nt(this,"active",!1)}tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return Gr(this.x)&&Gr(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const n={};return t.forEach(r=>{n[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),n}}nt(Di,"defaults",{}),nt(Di,"defaultRoutes");function sD(i,t){const e=i.options.ticks,s=nD(i),n=Math.min(e.maxTicksLimit||s,s),r=e.major.enabled?oD(t):[],o=r.length,a=r[0],l=r[o-1],h=[];if(o>n)return aD(t,h,r,o/n),h;const c=rD(r,t,n);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(rl(t,h,c,Ct(f)?0:a-f,a),u=0,d=o-1;u<d;u++)rl(t,h,c,r[u],r[u+1]);return rl(t,h,c,l,Ct(f)?t.length:l+f),h}return rl(t,h,c),h}function nD(i){const t=i.options.offset,e=i._tickSize(),s=i._length/e+(t?0:1),n=i._maxLength/e;return Math.floor(Math.min(s,n))}function rD(i,t,e){const s=lD(i),n=t.length/e;if(!s)return Math.max(n,1);const r=qI(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>n)return l}return Math.max(n,1)}function oD(i){const t=[];let e,s;for(e=0,s=i.length;e<s;e++)i[e].major&&t.push(e);return t}function aD(i,t,e,s){let n=0,r=e[0],o;for(s=Math.ceil(s),o=0;o<i.length;o++)o===r&&(t.push(i[o]),n++,r=e[n*s])}function rl(i,t,e,s,n){const r=yt(s,0),o=Math.min(yt(n,i.length),i.length);let a=0,l,h,c;for(e=Math.ceil(e),n&&(l=n-s,e=l/Math.floor(l/e)),c=r;c<0;)a++,c=Math.round(r+a*e);for(h=Math.max(r,0);h<o;h++)h===c&&(t.push(i[h]),a++,c=Math.round(r+a*e))}function lD(i){const t=i.length;let e,s;if(t<2)return!1;for(s=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==s)return!1;return s}const hD=i=>i==="left"?"right":i==="right"?"left":i,i_=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,s_=(i,t)=>Math.min(t||i,i);function n_(i,t){const e=[],s=i.length/t,n=i.length;let r=0;for(;r<n;r+=s)e.push(i[Math.floor(r)]);return e}function cD(i,t,e){const s=i.ticks.length,n=Math.min(t,s-1),r=i._startPixel,o=i._endPixel,a=1e-6;let l=i.getPixelForTick(n),h;if(!(e&&(s===1?h=Math.max(l-r,o-l):t===0?h=(i.getPixelForTick(1)-l)/2:h=(l-i.getPixelForTick(n-1))/2,l+=n<t?h:-h,l<r-a||l>o+a)))return l}function uD(i,t){Mt(i,e=>{const s=e.gc,n=s.length/2;let r;if(n>t){for(r=0;r<n;++r)delete e.data[s[r]];s.splice(0,n)}})}function lo(i){return i.drawTicks?i.tickLength:0}function r_(i,t){if(!i.display)return 0;const e=he(i.font,t),s=Me(i.padding);return(Ft(i.text)?i.text.length:1)*e.lineHeight+s.height}function dD(i,t){return nn(i,{scale:t,type:"scale"})}function fD(i,t,e){return nn(i,{tick:e,index:t,type:"tick"})}function pD(i,t,e){let s=If(i);return(e&&t!=="right"||!e&&t==="right")&&(s=hD(s)),s}function gD(i,t,e,s){const{top:n,left:r,bottom:o,right:a,chart:l}=i,{chartArea:h,scales:c}=l;let u=0,d,f,p;const g=o-n,m=a-r;if(i.isHorizontal()){if(f=ve(s,r,a),wt(e)){const _=Object.keys(e)[0],y=e[_];p=c[_].getPixelForValue(y)+g-t}else e==="center"?p=(h.bottom+h.top)/2+g-t:p=i_(i,e,t);d=a-r}else{if(wt(e)){const _=Object.keys(e)[0],y=e[_];f=c[_].getPixelForValue(y)-m+t}else e==="center"?f=(h.left+h.right)/2-m+t:f=i_(i,e,t);p=ve(s,o,n),u=e==="left"?-Jt:Jt}return{titleX:f,titleY:p,maxWidth:d,rotation:u}}class jn extends Di{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:n}=this;return t=We(t,Number.POSITIVE_INFINITY),e=We(e,Number.NEGATIVE_INFINITY),s=We(s,Number.POSITIVE_INFINITY),n=We(n,Number.NEGATIVE_INFINITY),{min:We(t,s),max:We(e,n),minDefined:Zt(t),maxDefined:Zt(e)}}getMinMax(t){let{min:e,max:s,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:e,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,h=a.length;l<h;++l)o=a[l].controller.getMinMax(this,t),n||(e=Math.min(e,o.min)),r||(s=Math.max(s,o.max));return e=r&&e>s?s:e,s=n&&e>s?e:s,{min:We(e,We(s,e)),max:We(s,We(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ot(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=EP(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?n_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sD(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ot(this.options.afterUpdate,[this])}beforeSetDimensions(){Ot(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ot(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ot(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ot(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s],r.label=Ot(e.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Ot(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ot(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=s_(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,r=e.maxRotation;let o=n,a,l,h;if(!this._isVisible()||!e.display||n>=r||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,f=pe(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/s:f/(s-1),u+6>a&&(a=f/(s-(t.offset?.5:1)),l=this.maxHeight-lo(t.grid)-e.padding-r_(t.title,this.chart.options.font),h=Math.sqrt(u*u+d*d),o=Cf(Math.min(Math.asin(pe((c.highest.height+6)/a,-1,1)),Math.asin(pe(l/h,-1,1))-Math.asin(pe(d/h,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ot(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ot(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=r_(n,e.options.font);if(a?(t.width=this.maxWidth,t.height=lo(r)+l):(t.height=this.maxHeight,t.width=lo(r)+l),s.display&&this.ticks.length){const{first:h,last:c,widest:u,highest:d}=this._getLabelSizes(),f=s.padding*2,p=Ei(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){const _=s.mirror?0:m*u.width+g*d.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{const _=s.mirror?0:g*u.width+m*d.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(h,c,m,g)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,n){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,h=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?h?(d=n*t.width,f=s*e.height):(d=s*t.height,f=n*e.width):r==="start"?f=e.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=e.width/2),this.paddingLeft=Math.max((d-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let c=e.height/2,u=t.height/2;r==="start"?(c=0,u=t.height):r==="end"&&(c=e.height,u=0),this.paddingTop=c+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ot(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)Ct(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=n_(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){const{ctx:n,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/s_(e,s));let h=0,c=0,u,d,f,p,g,m,_,y,b,v,x;for(u=0;u<e;u+=l){if(p=t[u].label,g=this._resolveTickFontOptions(u),n.font=m=g.string,_=r[m]=r[m]||{data:{},gc:[]},y=g.lineHeight,b=v=0,!Ct(p)&&!Ft(p))b=_h(n,_.data,_.gc,b,p),v=y;else if(Ft(p))for(d=0,f=p.length;d<f;++d)x=p[d],!Ct(x)&&!Ft(x)&&(b=_h(n,_.data,_.gc,b,x),v+=y);o.push(b),a.push(v),h=Math.max(b,h),c=Math.max(v,c)}uD(r,e);const E=o.indexOf(h),S=a.indexOf(c),A=M=>({width:o[M]||0,height:a[M]||0});return{first:A(0),last:A(e-1),widest:A(E),highest:A(S),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return QI(this._alignToPixels?dn(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=fD(this.getContext(),t,s))}return this.$context||(this.$context=dD(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ei(this.labelRotation),s=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*n?a/s:l/n:l*n<a*s?l/s:a/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,n=this.options,{grid:r,position:o,border:a}=n,l=r.offset,h=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=lo(r),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,_=function(B){return dn(s,B,g)};let y,b,v,x,E,S,A,M,I,C,F,R;if(o==="top")y=_(this.bottom),S=this.bottom-d,M=y-m,C=_(t.top)+m,R=t.bottom;else if(o==="bottom")y=_(this.top),C=t.top,R=_(t.bottom)-m,S=y+m,M=this.top+d;else if(o==="left")y=_(this.right),E=this.right-d,A=y-m,I=_(t.left)+m,F=t.right;else if(o==="right")y=_(this.left),I=t.left,F=_(t.right)-m,E=y+m,A=this.left+d;else if(e==="x"){if(o==="center")y=_((t.top+t.bottom)/2+.5);else if(wt(o)){const B=Object.keys(o)[0],P=o[B];y=_(this.chart.scales[B].getPixelForValue(P))}C=t.top,R=t.bottom,S=y+m,M=S+d}else if(e==="y"){if(o==="center")y=_((t.left+t.right)/2);else if(wt(o)){const B=Object.keys(o)[0],P=o[B];y=_(this.chart.scales[B].getPixelForValue(P))}E=y-m,A=E-d,I=t.left,F=t.right}const w=yt(n.ticks.maxTicksLimit,u),T=Math.max(1,Math.ceil(u/w));for(b=0;b<u;b+=T){const B=this.getContext(b),P=r.setContext(B),L=a.setContext(B),k=P.lineWidth,O=P.color,U=L.dash||[],j=L.dashOffset,q=P.tickWidth,Y=P.tickColor,it=P.tickBorderDash||[],pt=P.tickBorderDashOffset;v=cD(this,b,l),v!==void 0&&(x=dn(s,v,k),h?E=A=I=F=x:S=M=C=R=x,f.push({tx1:E,ty1:S,tx2:A,ty2:M,x1:I,y1:C,x2:F,y2:R,width:k,color:O,borderDash:U,borderDashOffset:j,tickWidth:q,tickColor:Y,tickBorderDash:it,tickBorderDashOffset:pt}))}return this._ticksLength=u,this._borderValue=y,f}_computeLabelItems(t){const e=this.axis,s=this.options,{position:n,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:h,padding:c,mirror:u}=r,d=lo(s.grid),f=d+c,p=u?-c:f,g=-Ei(this.labelRotation),m=[];let _,y,b,v,x,E,S,A,M,I,C,F,R="middle";if(n==="top")E=this.bottom-p,S=this._getXAxisLabelAlignment();else if(n==="bottom")E=this.top+p,S=this._getXAxisLabelAlignment();else if(n==="left"){const T=this._getYAxisLabelAlignment(d);S=T.textAlign,x=T.x}else if(n==="right"){const T=this._getYAxisLabelAlignment(d);S=T.textAlign,x=T.x}else if(e==="x"){if(n==="center")E=(t.top+t.bottom)/2+f;else if(wt(n)){const T=Object.keys(n)[0],B=n[T];E=this.chart.scales[T].getPixelForValue(B)+f}S=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")x=(t.left+t.right)/2-f;else if(wt(n)){const T=Object.keys(n)[0],B=n[T];x=this.chart.scales[T].getPixelForValue(B)}S=this._getYAxisLabelAlignment(d).textAlign}e==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const w=this._getLabelSizes();for(_=0,y=a.length;_<y;++_){b=a[_],v=b.label;const T=r.setContext(this.getContext(_));A=this.getPixelForTick(_)+r.labelOffset,M=this._resolveTickFontOptions(_),I=M.lineHeight,C=Ft(v)?v.length:1;const B=C/2,P=T.color,L=T.textStrokeColor,k=T.textStrokeWidth;let O=S;o?(x=A,S==="inner"&&(_===y-1?O=this.options.reverse?"left":"right":_===0?O=this.options.reverse?"right":"left":O="center"),n==="top"?h==="near"||g!==0?F=-C*I+I/2:h==="center"?F=-w.highest.height/2-B*I+I:F=-w.highest.height+I/2:h==="near"||g!==0?F=I/2:h==="center"?F=w.highest.height/2-B*I:F=w.highest.height-C*I,u&&(F*=-1),g!==0&&!T.showLabelBackdrop&&(x+=I/2*Math.sin(g))):(E=A,F=(1-C)*I/2);let U;if(T.showLabelBackdrop){const j=Me(T.backdropPadding),q=w.heights[_],Y=w.widths[_];let it=F-j.top,pt=0-j.left;switch(R){case"middle":it-=q/2;break;case"bottom":it-=q;break}switch(S){case"center":pt-=Y/2;break;case"right":pt-=Y;break}U={left:pt,top:it,width:Y+j.width,height:q+j.height,color:T.backdropColor}}m.push({label:v,font:M,textOffset:F,options:{rotation:g,color:P,strokeColor:L,strokeWidth:k,textAlign:O,textBaseline:R,translation:[x,E],backdrop:U}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ei(this.labelRotation))return t==="top"?"left":"right";let n="center";return e.align==="start"?n="left":e.align==="end"?n="right":e.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let h,c;return e==="left"?n?(c=this.right+r,s==="near"?h="left":s==="center"?(h="center",c+=l/2):(h="right",c+=l)):(c=this.right-a,s==="near"?h="right":s==="center"?(h="center",c-=l/2):(h="left",c=this.left)):e==="right"?n?(c=this.left+r,s==="near"?h="right":s==="center"?(h="center",c-=l/2):(h="left",c-=l)):(c=this.left+a,s==="near"?h="left":s==="center"?(h="center",c+=l/2):(h="right",c=this.right)):h="right",{textAlign:h,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:n,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,n,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(r=>r.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,h,c)=>{!c.width||!c.color||(s.save(),s.lineWidth=c.width,s.strokeStyle=c.color,s.setLineDash(c.borderDash||[]),s.lineDashOffset=c.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(h.x,h.y),s.stroke(),s.restore())};if(e.display)for(r=0,o=n.length;r<o;++r){const l=n[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:s,grid:n}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,c,u,d;this.isHorizontal()?(h=dn(t,this.left,o)-o/2,c=dn(t,this.right,a)+a/2,u=d=l):(u=dn(t,this.top,o)-o/2,d=dn(t,this.bottom,a)+a/2,h=c=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(h,u),e.lineTo(c,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&Zh(s,n);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,h=o.label,c=o.textOffset;Gn(s,h,0,c,l,a)}n&&Jh(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:n}}=this;if(!s.display)return;const r=he(s.font),o=Me(s.padding),a=s.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||wt(e)?(l+=o.bottom,Ft(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:h,titleY:c,maxWidth:u,rotation:d}=gD(this,l,e,a);Gn(t,s.text,0,0,r,{color:s.color,maxWidth:u,rotation:d,textAlign:pD(a,e,n),textBaseline:"middle",translation:[h,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=yt(t.grid&&t.grid.z,-1),n=yt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==jn.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[s]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return he(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ol{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;yD(e)&&(s=this.register(e));const n=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,mD(t,o,s),this.override&&ie.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,n=this.scope;s in e&&delete e[s],n&&s in ie[n]&&(delete ie[n][s],this.override&&delete Un[s])}}function mD(i,t,e){const s=ia(Object.create(null),[e?ie.get(e):{},ie.get(t),i.defaults]);ie.set(t,s),i.defaultRoutes&&_D(t,i.defaultRoutes),i.descriptors&&ie.describe(t,i.descriptors)}function _D(i,t){Object.keys(t).forEach(e=>{const s=e.split("."),n=s.pop(),r=[i].concat(s).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");ie.route(r,n,l,a)})}function yD(i){return"id"in i&&"defaults"in i}class bD{constructor(){this.controllers=new ol(Pi,"datasets",!0),this.elements=new ol(Di,"elements"),this.plugins=new ol(Object,"plugins"),this.scales=new ol(jn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(n=>{const r=s||this._getRegistryForType(n);s||r.isForType(n)||r===this.plugins&&n.id?this._exec(t,r,n):Mt(n,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,s){const n=Af(t);Ot(s["before"+n],[],s),e[t](s),Ot(s["after"+n],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var Ni=new bD;class xD{constructor(){this._init=[]}notify(t,e,s,n){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,e,s);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,s,n){n=n||{};for(const r of t){const o=r.plugin,a=o[s],l=[e,n,r.options];if(Ot(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){Ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,n=yt(s.options&&s.options.plugins,{}),r=vD(s);return n===!1&&!e?[]:SD(t,r,n,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,n=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(e,s),t,"stop"),this._notify(n(s,e),t,"start")}}function vD(i){const t={},e=[],s=Object.keys(Ni.plugins.items);for(let r=0;r<s.length;r++)e.push(Ni.getPlugin(s[r]));const n=i.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function wD(i,t){return!t&&i===!1?null:i===!0?{}:i}function SD(i,{plugins:t,localIds:e},s,n){const r=[],o=i.getContext();for(const a of t){const l=a.id,h=wD(s[l],n);h!==null&&r.push({plugin:a,options:ED(i.config,{plugin:a,local:e[l]},h,o)})}return r}function ED(i,{plugin:t,local:e},s,n){const r=i.pluginScopeKeys(t),o=i.getOptionScopes(s,r);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cd(i,t){const e=ie.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function TD(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function AD(i,t){return i===t?"_index_":"_value_"}function CD(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function xh(i,t){if(i==="x"||i==="y"||i==="r"||(i=t.axis||CD(t.position)||i.length>1&&xh(i[0].toLowerCase(),t),i))return i;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function MD(i,t){const e=Un[i.type]||{scales:{}},s=t.scales||{},n=Cd(i.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!wt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=xh(o,a),h=AD(l,n),c=e.scales||{};r[o]=Do(Object.create(null),[{axis:l},a,c[l],c[h]])}),i.data.datasets.forEach(o=>{const a=o.type||i.type,l=o.indexAxis||Cd(a,t),c=(Un[a]||{}).scales||{};Object.keys(c).forEach(u=>{const d=TD(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),Do(r[f],[{axis:d},s[f],c[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];Do(a,[ie.scales[a.type],ie.scale])}),r}function T1(i){const t=i.options||(i.options={});t.plugins=yt(t.plugins,{}),t.scales=MD(i,t)}function A1(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function ID(i){return i=i||{},i.data=A1(i.data),T1(i),i}const o_=new Map,C1=new Set;function al(i,t){let e=o_.get(i);return e||(e=t(),o_.set(i,e),C1.add(e)),e}const ho=(i,t,e)=>{const s=tn(t,e);s!==void 0&&i.add(s)};class PD{constructor(t){this._config=ID(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=A1(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),T1(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return al(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return al(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return al(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return al(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let n=s.get(t);return(!n||e)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,e,s){const{options:n,type:r}=this,o=this._cachedScopes(t,s),a=o.get(e);if(a)return a;const l=new Set;e.forEach(c=>{t&&(l.add(t),c.forEach(u=>ho(l,t,u))),c.forEach(u=>ho(l,n,u)),c.forEach(u=>ho(l,Un[r]||{},u)),c.forEach(u=>ho(l,ie,u)),c.forEach(u=>ho(l,Ed,u))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),C1.has(e)&&o.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,Un[e]||{},ie.datasets[e]||{},{type:e},ie,Ed]}resolveNamedOptions(t,e,s,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=a_(this._resolverCache,t,n);let l=o;if(DD(o,e)){r.$shared=!1,s=en(s)?s():s;const h=this.createResolver(t,s,a);l=Hr(o,s,h)}for(const h of e)r[h]=l[h];return r}createResolver(t,e,s=[""],n){const{resolver:r}=a_(this._resolverCache,t,s);return wt(e)?Hr(r,e,void 0,n):r}}function a_(i,t,e){let s=i.get(t);s||(s=new Map,i.set(t,s));const n=e.join();let r=s.get(n);return r||(r={resolver:Rf(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,r)),r}const RD=i=>wt(i)&&Object.getOwnPropertyNames(i).reduce((t,e)=>t||en(i[e]),!1);function DD(i,t){const{isScriptable:e,isIndexable:s}=r1(i);for(const n of t){const r=e(n),o=s(n),a=(o||r)&&i[n];if(r&&(en(a)||RD(a))||o&&Ft(a))return!0}return!1}var OD="4.2.1";const kD=["top","bottom","left","right","chartArea"];function l_(i,t){return i==="top"||i==="bottom"||kD.indexOf(i)===-1&&t==="x"}function h_(i,t){return function(e,s){return e[i]===s[i]?e[t]-s[t]:e[i]-s[i]}}function c_(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ot(e&&e.onComplete,[i],t)}function FD(i){const t=i.chart,e=t.options.animation;Ot(e&&e.onProgress,[i],t)}function M1(i){return u1()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Ol={},u_=i=>{const t=M1(i);return Object.values(Ol).filter(e=>e.canvas===t).pop()};function BD(i,t,e){const s=Object.keys(i);for(const n of s){const r=+n;if(r>=t){const o=i[n];delete i[n],(e>0||r>t)&&(i[r+e]=o)}}}function LD(i,t,e,s){return!e||i.type==="mouseout"?null:s?t:i}function ND(i){const{xScale:t,yScale:e}=i;if(t&&e)return{left:t.left,right:t.right,top:e.top,bottom:e.bottom}}class wi{static register(...t){Ni.add(...t),d_()}static unregister(...t){Ni.remove(...t),d_()}constructor(t,e){const s=this.config=new PD(e),n=M1(t),r=u_(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||iD(n)),this.platform.updateConfig(s);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,h=l&&l.height,c=l&&l.width;if(this.id=HI(),this.ctx=a,this.canvas=l,this.width=c,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=sP(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],Ol[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ds.listen(this,"complete",c_),ds.listen(this,"progress",FD),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:n,_aspectRatio:r}=this;return Ct(t)?e&&r?r:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ni}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Fm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Dm(this.canvas,this.ctx),this}stop(){return ds.stop(this),this}resize(t,e){ds.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,n=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,e,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Fm(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ot(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Mt(e,(s,n)=>{s.id=n})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,n=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=xh(o,a),h=l==="r",c=l==="x";return{options:a,dposition:h?"chartArea":c?"bottom":"left",dtype:h?"radialLinear":c?"category":"linear"}}))),Mt(r,o=>{const a=o.options,l=a.id,h=xh(l,a),c=yt(a.type,o.dtype);(a.position===void 0||l_(a.position,h)!==l_(o.dposition))&&(a.position=o.dposition),n[l]=!0;let u=null;if(l in s&&s[l].type===c)u=s[l];else{const d=Ni.getScale(c);u=new d({id:l,type:c,ctx:this.ctx,chart:this}),s[u.id]=u}u.init(a,t)}),Mt(n,(o,a)=>{o||delete s[a]}),Mt(s,o=>{Ee.configure(this,o,o.options),Ee.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((n,r)=>n.index-r.index),s>e){for(let n=e;n<s;++n)this._destroyDatasetMeta(n);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(h_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,n)=>{e.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=e.length;s<n;s++){const r=e[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Cd(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Ni.getController(a),{datasetElementType:h,dataElementType:c}=ie.datasets[a];Object.assign(l,{dataElementType:Ni.getElement(c),datasetElementType:h&&Ni.getElement(h)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Mt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,c=this.data.datasets.length;h<c;h++){const{controller:u}=this.getDatasetMeta(h),d=!n&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),n||Mt(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(h_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Mt(this.scales,t=>{Ee.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Sm(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:r}of e){const o=s==="_removeElements"?-r:r;BD(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),n=s(0);for(let r=1;r<e;r++)if(!Sm(n,s(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ee.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],Mt(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,en(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),n={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ds.has(this)?this.attached&&!ds.running(this)&&ds.start(this):(this.draw(),c_({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resize(s,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let n,r;for(n=0,r=e.length;n<r;++n){const o=e[n];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s=t._clip,n=!s.disabled,r=ND(t)||this.chartArea,o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(n&&Zh(e,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),t.controller.draw(),n&&Jh(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return na(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,n){const r=FR.modes[e];return typeof r=="function"?r(this,t,s,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let n=s.filter(r=>r&&r._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=nn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const n=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,n);ci(e)?(r.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ds.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Dm(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ol[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},n=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Mt(this.options.events,r=>s(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(l,h)=>{e.addEventListener(this,l,h),t[l]=h},n=(l,h)=>{t[l]&&(e.removeEventListener(this,l,h),delete t[l])},r=(l,h)=>{this.canvas&&this.resize(l,h)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),s("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Mt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Mt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const n=s?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!ph(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){const n=this.options.hover,r=(l,h)=>l.filter(c=>!h.some(u=>c.datasetIndex===u.datasetIndex&&c.index===u.index)),o=r(e,t),a=s?t:r(t,e);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const r=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(r||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:n=[],options:r}=this,o=e,a=this._getActiveElements(t,n,s,o),l=YI(t),h=LD(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Ot(r.onHover,[t,a,this],this),l&&Ot(r.onClick,[t,a,this],this));const c=!ph(a,n);return(c||e)&&(this._active=a,this._updateHoverStyles(a,n,e)),this._lastEvent=h,c}_getActiveElements(t,e,s,n){if(t.type==="mouseout")return[];if(!s)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,n)}}nt(wi,"defaults",ie),nt(wi,"instances",Ol),nt(wi,"overrides",Un),nt(wi,"registry",Ni),nt(wi,"version",OD),nt(wi,"getChart",u_);function d_(){return Mt(wi.instances,i=>i._plugins.invalidate())}function UD(i,t,e){const{startAngle:s,pixelMargin:n,x:r,y:o,outerRadius:a,innerRadius:l}=t;let h=n/a;i.beginPath(),i.arc(r,o,a,s-h,e+h),l>n?(h=n/l,i.arc(r,o,l,e+h,s-h,!0)):i.arc(r,o,n,e+Jt,s-Jt),i.closePath(),i.clip()}function GD(i){return Pf(i,["outerStart","outerEnd","innerStart","innerEnd"])}function HD(i,t,e,s){const n=GD(i.options.borderRadius),r=(e-t)/2,o=Math.min(r,s*t/2),a=l=>{const h=(e-Math.min(r,l))*s/2;return pe(l,0,Math.min(r,h))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:pe(n.innerStart,0,o),innerEnd:pe(n.innerEnd,0,o)}}function ir(i,t,e,s){return{x:e+i*Math.cos(t),y:s+i*Math.sin(t)}}function vh(i,t,e,s,n,r){const{x:o,y:a,startAngle:l,pixelMargin:h,innerRadius:c}=t,u=Math.max(t.outerRadius+s+e-h,0),d=c>0?c+s+e+h:0;let f=0;const p=n-l;if(s){const T=c>0?c-s:0,B=u>0?u-s:0,P=(T+B)/2,L=P!==0?p*P/(P+s):p;f=(p-L)/2}const g=Math.max(.001,p*u-e/Nt)/u,m=(p-g)/2,_=l+m+f,y=n-m-f,{outerStart:b,outerEnd:v,innerStart:x,innerEnd:E}=HD(t,d,u,y-_),S=u-b,A=u-v,M=_+b/S,I=y-v/A,C=d+x,F=d+E,R=_+x/C,w=y-E/F;if(i.beginPath(),r){const T=(M+I)/2;if(i.arc(o,a,u,M,T),i.arc(o,a,u,T,I),v>0){const k=ir(A,I,o,a);i.arc(k.x,k.y,v,I,y+Jt)}const B=ir(F,y,o,a);if(i.lineTo(B.x,B.y),E>0){const k=ir(F,w,o,a);i.arc(k.x,k.y,E,y+Jt,w+Math.PI)}const P=(y-E/d+(_+x/d))/2;if(i.arc(o,a,d,y-E/d,P,!0),i.arc(o,a,d,P,_+x/d,!0),x>0){const k=ir(C,R,o,a);i.arc(k.x,k.y,x,R+Math.PI,_-Jt)}const L=ir(S,_,o,a);if(i.lineTo(L.x,L.y),b>0){const k=ir(S,M,o,a);i.arc(k.x,k.y,b,_-Jt,M)}}else{i.moveTo(o,a);const T=Math.cos(M)*u+o,B=Math.sin(M)*u+a;i.lineTo(T,B);const P=Math.cos(I)*u+o,L=Math.sin(I)*u+a;i.lineTo(P,L)}i.closePath()}function zD(i,t,e,s,n){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){vh(i,t,e,s,l,n);for(let h=0;h<r;++h)i.fill();isNaN(a)||(l=o+(a%Bt||Bt))}return vh(i,t,e,s,l,n),i.fill(),l}function VD(i,t,e,s,n){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:h,borderJoinStyle:c}=l,u=l.borderAlign==="inner";if(!h)return;u?(i.lineWidth=h*2,i.lineJoin=c||"round"):(i.lineWidth=h,i.lineJoin=c||"bevel");let d=t.endAngle;if(r){vh(i,t,e,s,d,n);for(let f=0;f<r;++f)i.stroke();isNaN(a)||(d=o+(a%Bt||Bt))}u&&UD(i,t,d),r||(vh(i,t,e,s,d,n),i.stroke())}class kl extends Di{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,s){const n=this.getProps(["x","y"],s),{angle:r,distance:o}=$b(n,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:h,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),d=this.options.spacing/2,p=yt(u,l-a)>=Bt||sa(r,a,l),g=bs(o,h+d,c+d);return p&&g}getCenterPoint(t){const{x:e,y:s,startAngle:n,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:h}=this.options,c=(n+r)/2,u=(o+a+h+l)/2;return{x:e+Math.cos(c)*u,y:s+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:s}=this,n=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=s>Bt?Math.floor(s/Bt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*n,Math.sin(a)*n);const l=1-Math.sin(Math.min(Nt,s||0)),h=n*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,zD(t,this,h,r,o),VD(t,this,h,r,o),t.restore()}}nt(kl,"id","arc"),nt(kl,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),nt(kl,"defaultRoutes",{backgroundColor:"backgroundColor"});function I1(i,t,e=t){i.lineCap=yt(e.borderCapStyle,t.borderCapStyle),i.setLineDash(yt(e.borderDash,t.borderDash)),i.lineDashOffset=yt(e.borderDashOffset,t.borderDashOffset),i.lineJoin=yt(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=yt(e.borderWidth,t.borderWidth),i.strokeStyle=yt(e.borderColor,t.borderColor)}function WD(i,t,e){i.lineTo(e.x,e.y)}function jD(i){return i.stepped?gP:i.tension||i.cubicInterpolationMode==="monotone"?mP:WD}function P1(i,t,e={}){const s=i.length,{start:n=0,end:r=s-1}=e,{start:o,end:a}=t,l=Math.max(n,o),h=Math.min(r,a),c=n<o&&r<o||n>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:h<l&&!c?s+h-l:h-l}}function XD(i,t,e,s){const{points:n,options:r}=t,{count:o,start:a,loop:l,ilen:h}=P1(n,e,s),c=jD(r);let{move:u=!0,reverse:d}=s||{},f,p,g;for(f=0;f<=h;++f)p=n[(a+(d?h-f:f))%o],!p.skip&&(u?(i.moveTo(p.x,p.y),u=!1):c(i,g,p,d,r.stepped),g=p);return l&&(p=n[(a+(d?h:0))%o],c(i,g,p,d,r.stepped)),!!l}function YD(i,t,e,s){const n=t.points,{count:r,start:o,ilen:a}=P1(n,e,s),{move:l=!0,reverse:h}=s||{};let c=0,u=0,d,f,p,g,m,_;const y=v=>(o+(h?a-v:v))%r,b=()=>{g!==m&&(i.lineTo(c,m),i.lineTo(c,g),i.lineTo(c,_))};for(l&&(f=n[y(0)],i.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=n[y(d)],f.skip)continue;const v=f.x,x=f.y,E=v|0;E===p?(x<g?g=x:x>m&&(m=x),c=(u*c+v)/++u):(b(),i.lineTo(v,x),p=E,u=0,g=m=x),_=x}b()}function Md(i){const t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?YD:XD}function $D(i){return i.stepped?$P:i.tension||i.cubicInterpolationMode==="monotone"?KP:vn}function KD(i,t,e,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,s)&&n.closePath()),I1(i,t.options),i.stroke(n)}function qD(i,t,e,s){const{segments:n,options:r}=t,o=Md(t);for(const a of n)I1(i,r,a.style),i.beginPath(),o(i,t,a,{start:e,end:e+s-1})&&i.closePath(),i.stroke()}const ZD=typeof Path2D=="function";function JD(i,t,e,s){ZD&&!t.options.segment?KD(i,t,e,s):qD(i,t,e,s)}class Us extends Di{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;GP(this._points,s,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=eR(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){const s=this.options,n=t[e],r=this.points,o=m1(this,{property:e,start:n,end:n});if(!o.length)return;const a=[],l=$D(s);let h,c;for(h=0,c=o.length;h<c;++h){const{start:u,end:d}=o[h],f=r[u],p=r[d];if(f===p){a.push(f);continue}const g=Math.abs((n-f[e])/(p[e]-f[e])),m=l(f,p,g,s.stepped);m[e]=t[e],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,e,s){return Md(this)(t,this,e,s)}path(t,e,s){const n=this.segments,r=Md(this);let o=this._loop;e=e||0,s=s||this.points.length-e;for(const a of n)o&=r(t,this,a,{start:e,end:e+s-1});return!!o}draw(t,e,s,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),JD(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}nt(Us,"id","line"),nt(Us,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),nt(Us,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),nt(Us,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function f_(i,t,e,s){const n=i.options,{[e]:r}=i.getProps([e],s);return Math.abs(t-r)<n.radius+n.hitRadius}class Fl extends Di{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,s){const n=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return f_(this,t,"x",e)}inYRange(t,e){return f_(this,t,"y",e)}getCenterPoint(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const s=e&&t.borderWidth||0;return(e+s)*2}draw(t,e){const s=this.options;this.skip||s.radius<.1||!na(this,e,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,Td(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}nt(Fl,"id","point"),nt(Fl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),nt(Fl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function R1(i,t){const{x:e,y:s,base:n,width:r,height:o}=i.getProps(["x","y","base","width","height"],t);let a,l,h,c,u;return i.horizontal?(u=o/2,a=Math.min(e,n),l=Math.max(e,n),h=s-u,c=s+u):(u=r/2,a=e-u,l=e+u,h=Math.min(s,n),c=Math.max(s,n)),{left:a,top:h,right:l,bottom:c}}function Gs(i,t,e,s){return i?0:pe(t,e,s)}function QD(i,t,e){const s=i.options.borderWidth,n=i.borderSkipped,r=n1(s);return{t:Gs(n.top,r.top,0,e),r:Gs(n.right,r.right,0,t),b:Gs(n.bottom,r.bottom,0,e),l:Gs(n.left,r.left,0,t)}}function tO(i,t,e){const{enableBorderRadius:s}=i.getProps(["enableBorderRadius"]),n=i.options.borderRadius,r=Rn(n),o=Math.min(t,e),a=i.borderSkipped,l=s||wt(n);return{topLeft:Gs(!l||a.top||a.left,r.topLeft,0,o),topRight:Gs(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Gs(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Gs(!l||a.bottom||a.right,r.bottomRight,0,o)}}function eO(i){const t=R1(i),e=t.right-t.left,s=t.bottom-t.top,n=QD(i,e/2,s/2),r=tO(i,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:r},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function du(i,t,e,s){const n=t===null,r=e===null,a=i&&!(n&&r)&&R1(i,s);return a&&(n||bs(t,a.left,a.right))&&(r||bs(e,a.top,a.bottom))}function iO(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function sO(i,t){i.rect(t.x,t.y,t.w,t.h)}function fu(i,t,e={}){const s=i.x!==e.x?-t:0,n=i.y!==e.y?-t:0,r=(i.x+i.w!==e.x+e.w?t:0)-s,o=(i.y+i.h!==e.y+e.h?t:0)-n;return{x:i.x+s,y:i.y+n,w:i.w+r,h:i.h+o,radius:i.radius}}class Bl extends Di{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:n}}=this,{inner:r,outer:o}=eO(this),a=iO(o.radius)?ra:sO;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,fu(o,e,r)),t.clip(),a(t,fu(r,-e,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,fu(r,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,s){return du(this,t,e,s)}inXRange(t,e){return du(this,t,null,e)}inYRange(t,e){return du(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+n)/2:e,y:r?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}nt(Bl,"id","bar"),nt(Bl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),nt(Bl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var nO=Object.freeze({__proto__:null,ArcElement:kl,LineElement:Us,PointElement:Fl,BarElement:Bl});const Id=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],p_=Id.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function D1(i){return Id[i%Id.length]}function O1(i){return p_[i%p_.length]}function rO(i,t){return i.borderColor=D1(t),i.backgroundColor=O1(t),++t}function oO(i,t){return i.backgroundColor=i.data.map(()=>D1(t++)),t}function aO(i,t){return i.backgroundColor=i.data.map(()=>O1(t++)),t}function lO(i){let t=0;return(e,s)=>{const n=i.getDatasetMeta(s).controller;n instanceof Tn?t=oO(e,t):n instanceof Bo?t=aO(e,t):n&&(t=rO(e,t))}}function g_(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}function hO(i){return i&&(i.borderColor||i.backgroundColor)}var cO={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;const{data:{datasets:s},options:n}=i.config,{elements:r}=n;if(!e.forceOverride&&(g_(s)||hO(n)||r&&g_(r)))return;const o=lO(i);s.forEach(o)}};function uO(i,t,e,s,n){const r=n.samples||s;if(r>=e)return i.slice(t,t+e);const o=[],a=(e-2)/(r-2);let l=0;const h=t+e-1;let c=t,u,d,f,p,g;for(o[l++]=i[c],u=0;u<r-2;u++){let m=0,_=0,y;const b=Math.floor((u+1)*a)+1+t,v=Math.min(Math.floor((u+2)*a)+1,e)+t,x=v-b;for(y=b;y<v;y++)m+=i[y].x,_+=i[y].y;m/=x,_/=x;const E=Math.floor(u*a)+1+t,S=Math.min(Math.floor((u+1)*a)+1,e)+t,{x:A,y:M}=i[c];for(f=p=-1,y=E;y<S;y++)p=.5*Math.abs((A-m)*(i[y].y-M)-(A-i[y].x)*(_-M)),p>f&&(f=p,d=i[y],g=y);o[l++]=d,c=g}return o[l++]=i[h],o}function dO(i,t,e,s){let n=0,r=0,o,a,l,h,c,u,d,f,p,g;const m=[],_=t+e-1,y=i[t].x,v=i[_].x-y;for(o=t;o<t+e;++o){a=i[o],l=(a.x-y)/v*s,h=a.y;const x=l|0;if(x===c)h<p?(p=h,u=o):h>g&&(g=h,d=o),n=(r*n+a.x)/++r;else{const E=o-1;if(!Ct(u)&&!Ct(d)){const S=Math.min(u,d),A=Math.max(u,d);S!==f&&S!==E&&m.push({...i[S],x:n}),A!==f&&A!==E&&m.push({...i[A],x:n})}o>0&&E!==f&&m.push(i[E]),m.push(a),c=x,r=0,p=g=h,u=d=f=o}}return m}function k1(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function m_(i){i.data.datasets.forEach(t=>{k1(t)})}function fO(i,t){const e=t.length;let s=0,n;const{iScale:r}=i,{min:o,max:a,minDefined:l,maxDefined:h}=r.getUserBounds();return l&&(s=pe(xs(t,r.axis,o).lo,0,e-1)),h?n=pe(xs(t,r.axis,a).hi+1,s,e)-s:n=e-s,{start:s,count:n}}var pO={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled){m_(i);return}const s=i.width;i.data.datasets.forEach((n,r)=>{const{_data:o,indexAxis:a}=n,l=i.getDatasetMeta(r),h=o||n.data;if(bo([a,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const c=i.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||i.options.parsing)return;let{start:u,count:d}=fO(l,h);const f=e.threshold||4*s;if(d<=f){k1(n);return}Ct(o)&&(n._data=h,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(e.algorithm){case"lttb":p=uO(h,u,d,s,e);break;case"min-max":p=dO(h,u,d,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=p})},destroy(i){m_(i)}};function gO(i,t,e){const s=i.segments,n=i.points,r=t.points,o=[];for(const a of s){let{start:l,end:h}=a;h=Bf(l,h,n);const c=Pd(e,n[l],n[h],a.loop);if(!t.segments){o.push({source:a,target:c,start:n[l],end:n[h]});continue}const u=m1(t,c);for(const d of u){const f=Pd(e,r[d.start],r[d.end],d.loop),p=g1(a,n,f);for(const g of p)o.push({source:g,target:d,start:{[e]:__(c,f,"start",Math.max)},end:{[e]:__(c,f,"end",Math.min)}})}}return o}function Pd(i,t,e,s){if(s)return;let n=t[i],r=e[i];return i==="angle"&&(n=Ye(n),r=Ye(r)),{property:i,start:n,end:r}}function mO(i,t){const{x:e=null,y:s=null}=i||{},n=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=Bf(o,a,n);const l=n[o],h=n[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:h.x,y:s})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:h.y}))}),r}function Bf(i,t,e){for(;t>i;t--){const s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function __(i,t,e,s){return i&&t?s(i[e],t[e]):i?i[e]:t?t[e]:0}function F1(i,t){let e=[],s=!1;return Ft(i)?(s=!0,e=i):e=mO(i,t),e.length?new Us({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function y_(i){return i&&i.fill!==!1}function _O(i,t,e){let n=i[t].fill;const r=[t];let o;if(!e)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!Zt(n))return n;if(o=i[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function yO(i,t,e){const s=wO(i);if(wt(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return Zt(n)&&Math.floor(n)===n?bO(s[0],t,n,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function bO(i,t,e,s){return(i==="-"||i==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function xO(i,t){let e=null;return i==="start"?e=t.bottom:i==="end"?e=t.top:wt(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}function vO(i,t,e){let s;return i==="start"?s=e:i==="end"?s=t.options.reverse?t.min:t.max:wt(i)?s=i.value:s=t.getBaseValue(),s}function wO(i){const t=i.options,e=t.fill;let s=yt(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function SO(i){const{scale:t,index:e,line:s}=i,n=[],r=s.segments,o=s.points,a=EO(t,e);a.push(F1({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const h=r[l];for(let c=h.start;c<=h.end;c++)TO(n,o[c],a)}return new Us({points:n,options:{}})}function EO(i,t){const e=[],s=i.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const r=s[n];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function TO(i,t,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n],{first:o,last:a,point:l}=AO(r,t,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(i.push(l),!a)break}}i.push(...s)}function AO(i,t,e){const s=i.interpolate(t,e);if(!s)return{};const n=s[e],r=i.segments,o=i.points;let a=!1,l=!1;for(let h=0;h<r.length;h++){const c=r[h],u=o[c.start][e],d=o[c.end][e];if(bs(n,u,d)){a=n===u,l=n===d;break}}return{first:a,last:l,point:s}}class B1{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){const{x:n,y:r,radius:o}=this;return e=e||{start:0,end:Bt},t.arc(n,r,o,e.end,e.start,!0),!s.bounds}interpolate(t){const{x:e,y:s,radius:n}=this,r=t.angle;return{x:e+Math.cos(r)*n,y:s+Math.sin(r)*n,angle:r}}}function CO(i){const{chart:t,fill:e,line:s}=i;if(Zt(e))return MO(t,e);if(e==="stack")return SO(i);if(e==="shape")return!0;const n=IO(i);return n instanceof B1?n:F1(n,s)}function MO(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}function IO(i){return(i.scale||{}).getPointPositionForValue?RO(i):PO(i)}function PO(i){const{scale:t={},fill:e}=i,s=xO(e,t);if(Zt(s)){const n=t.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function RO(i){const{scale:t,fill:e}=i,s=t.options,n=t.getLabels().length,r=s.reverse?t.max:t.min,o=vO(e,t,r),a=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,r);return new B1({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(t.getPointPositionForValue(l,o));return a}function pu(i,t,e){const s=CO(t),{line:n,scale:r,axis:o}=t,a=n.options,l=a.fill,h=a.backgroundColor,{above:c=h,below:u=h}=l||{};s&&n.points.length&&(Zh(i,e),DO(i,{line:n,target:s,above:c,below:u,area:e,scale:r,axis:o}),Jh(i))}function DO(i,t){const{line:e,target:s,above:n,below:r,area:o,scale:a}=t,l=e._loop?"angle":t.axis;i.save(),l==="x"&&r!==n&&(b_(i,s,o.top),x_(i,{line:e,target:s,color:n,scale:a,property:l}),i.restore(),i.save(),b_(i,s,o.bottom)),x_(i,{line:e,target:s,color:r,scale:a,property:l}),i.restore()}function b_(i,t,e){const{segments:s,points:n}=t;let r=!0,o=!1;i.beginPath();for(const a of s){const{start:l,end:h}=a,c=n[l],u=n[Bf(l,h,n)];r?(i.moveTo(c.x,c.y),r=!1):(i.lineTo(c.x,e),i.lineTo(c.x,c.y)),o=!!t.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(u.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function x_(i,t){const{line:e,target:s,property:n,color:r,scale:o}=t,a=gO(e,s,n);for(const{source:l,target:h,start:c,end:u}of a){const{style:{backgroundColor:d=r}={}}=l,f=s!==!0;i.save(),i.fillStyle=d,OO(i,o,f&&Pd(n,c,u)),i.beginPath();const p=!!e.pathSegment(i,l);let g;if(f){p?i.closePath():v_(i,s,u,n);const m=!!s.pathSegment(i,h,{move:p,reverse:!0});g=p&&m,g||v_(i,s,c,n)}i.closePath(),i.fill(g?"evenodd":"nonzero"),i.restore()}}function OO(i,t,e){const{top:s,bottom:n}=t.chart.chartArea,{property:r,start:o,end:a}=e||{};r==="x"&&(i.beginPath(),i.rect(o,s,a-o,n-s),i.clip())}function v_(i,t,e,s){const n=t.interpolate(e,s);n&&i.lineTo(n.x,n.y)}var kO={id:"filler",afterDatasetsUpdate(i,t,e){const s=(i.data.datasets||[]).length,n=[];let r,o,a,l;for(o=0;o<s;++o)r=i.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Us&&(l={visible:i.isDatasetVisible(o),index:o,fill:yO(a,o,s),chart:i,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,n.push(l);for(o=0;o<s;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=_O(n,o,e.propagate))},beforeDraw(i,t,e){const s=e.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),r=i.chartArea;for(let o=n.length-1;o>=0;--o){const a=n[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&pu(i.ctx,a,r))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const s=i.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const r=s[n].$filler;y_(r)&&pu(i.ctx,r,i.chartArea)}},beforeDatasetDraw(i,t,e){const s=t.meta.$filler;!y_(s)||e.drawTime!=="beforeDatasetDraw"||pu(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const w_=(i,t)=>{let{boxHeight:e=t,boxWidth:s=t}=i;return i.usePointStyle&&(e=Math.min(e,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},FO=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class S_ extends Di{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Ot(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,n=he(s.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=w_(s,r);let h,c;e.font=n.string,this.isHorizontal()?(h=this.maxWidth,c=this._fitRows(o,r,a,l)+10):(c=this.maxHeight,h=this._fitCols(o,n,a,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,n){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],c=n+a;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-c;return this.legendItems.forEach((p,g)=>{const m=s+e/2+r.measureText(p.text).width;(g===0||h[h.length-1]+m+2*a>o)&&(u+=c,h[h.length-(g>0?0:1)]=0,f+=c,d++),l[g]={left:0,top:f,row:d,width:m,height:n},h[h.length-1]+=m+a}),u}_fitCols(t,e,s,n){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],c=o-t;let u=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((m,_)=>{const{itemWidth:y,itemHeight:b}=BO(s,e,r,m,n);_>0&&f+b+2*a>c&&(u+=d+a,h.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[_]={left:p,top:f,col:g,width:y,height:b},d=Math.max(d,y),f+=b+a}),u+=d,h.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:n},rtl:r}}=this,o=Cr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=ve(s,this.left+n,this.right-this.lineWidths[a]);for(const h of e)a!==h.row&&(a=h.row,l=ve(s,this.left+n,this.right-this.lineWidths[a])),h.top+=this.top+t+n,h.left=o.leftForLtr(o.x(l),h.width),l+=h.width+n}else{let a=0,l=ve(s,this.top+t+n,this.bottom-this.columnSizes[a].height);for(const h of e)h.col!==a&&(a=h.col,l=ve(s,this.top+t+n,this.bottom-this.columnSizes[a].height)),h.top=l,h.left+=this.left+n,h.left=o.leftForLtr(o.x(h.left),h.width),l+=h.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Zh(t,this),this._draw(),Jh(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:n}=this,{align:r,labels:o}=t,a=ie.color,l=Cr(t.rtl,this.left,this.width),h=he(o.font),{padding:c}=o,u=h.size,d=u/2;let f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=w_(o,u),_=function(E,S,A){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();const M=yt(A.lineWidth,1);if(n.fillStyle=yt(A.fillStyle,a),n.lineCap=yt(A.lineCap,"butt"),n.lineDashOffset=yt(A.lineDashOffset,0),n.lineJoin=yt(A.lineJoin,"miter"),n.lineWidth=M,n.strokeStyle=yt(A.strokeStyle,a),n.setLineDash(yt(A.lineDash,[])),o.usePointStyle){const I={radius:g*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:M},C=l.xPlus(E,p/2),F=S+d;s1(n,I,C,F,o.pointStyleWidth&&p)}else{const I=S+Math.max((u-g)/2,0),C=l.leftForLtr(E,p),F=Rn(A.borderRadius);n.beginPath(),Object.values(F).some(R=>R!==0)?ra(n,{x:C,y:I,w:p,h:g,radius:F}):n.rect(C,I,p,g),n.fill(),M!==0&&n.stroke()}n.restore()},y=function(E,S,A){Gn(n,A.text,E,S+m/2,h,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},b=this.isHorizontal(),v=this._computeTitleHeight();b?f={x:ve(r,this.left+c,this.right-s[0]),y:this.top+c+v,line:0}:f={x:this.left+c,y:ve(r,this.top+v+c,this.bottom-e[0].height),line:0},d1(this.ctx,t.textDirection);const x=m+c;this.legendItems.forEach((E,S)=>{n.strokeStyle=E.fontColor,n.fillStyle=E.fontColor;const A=n.measureText(E.text).width,M=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),I=p+d+A;let C=f.x,F=f.y;l.setWidth(this.width),b?S>0&&C+I+c>this.right&&(F=f.y+=x,f.line++,C=f.x=ve(r,this.left+c,this.right-s[f.line])):S>0&&F+x>this.bottom&&(C=f.x=C+e[f.line].width+c,f.line++,F=f.y=ve(r,this.top+v+c,this.bottom-e[f.line].height));const R=l.x(C);if(_(R,F,E),C=nP(M,C+p+d,b?C+I:this.right,t.rtl),y(l.x(C),F,E),b)f.x+=I+c;else if(typeof E.text!="string"){const w=h.lineHeight;f.y+=L1(E,w)}else f.y+=x}),f1(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=he(e.font),n=Me(e.padding);if(!e.display)return;const r=Cr(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=s.size/2,h=n.top+l;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+h,u=ve(t.align,u,this.right-d);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);c=h+ve(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=ve(a,u,u+d);o.textAlign=r.textAlign(If(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=s.string,Gn(o,e.text,f,c,s)}_computeTitleHeight(){const t=this.options.title,e=he(t.font),s=Me(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,n,r;if(bs(t,this.left,this.right)&&bs(e,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(n=r[s],bs(t,n.left,n.left+n.width)&&bs(e,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!UO(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,r=FO(n,s);n&&!r&&Ot(e.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!r&&Ot(e.onHover,[t,s,this],this)}else s&&Ot(e.onClick,[t,s,this],this)}}function BO(i,t,e,s,n){const r=LO(s,i,t,e),o=NO(n,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function LO(i,t,e,s){let n=i.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+s.measureText(n).width}function NO(i,t,e){let s=i;return typeof t.text!="string"&&(s=L1(t,e)),s}function L1(i,t){const e=i.text?i.text.length+.5:0;return t*e}function UO(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var GO={id:"legend",_element:S_,start(i,t,e){const s=i.legend=new S_({ctx:i.ctx,options:e,chart:i});Ee.configure(i,s,e),Ee.addBox(i,s)},stop(i){Ee.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const s=i.legend;Ee.configure(i,s,e),s.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const s=t.datasetIndex,n=e.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(e?0:void 0),c=Me(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:h.borderColor,pointStyle:s||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:o&&(a||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};let Lf=class extends Di{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const n=Ft(s.text)?s.text.length:1;this._padding=Me(s.padding);const r=n*he(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:s,bottom:n,right:r,options:o}=this,a=o.align;let l=0,h,c,u;return this.isHorizontal()?(c=ve(a,s,r),u=e+t,h=r-s):(o.position==="left"?(c=s+t,u=ve(a,n,e),l=Nt*-.5):(c=r-t,u=ve(a,e,n),l=Nt*.5),h=n-e),{titleX:c,titleY:u,maxWidth:h,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const s=he(e.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:h}=this._drawArgs(r);Gn(t,e.text,0,0,s,{color:e.color,maxWidth:l,rotation:h,textAlign:If(e.align),textBaseline:"middle",translation:[o,a]})}};function HO(i,t){const e=new Lf({ctx:i.ctx,options:t,chart:i});Ee.configure(i,e,t),Ee.addBox(i,e),i.titleBlock=e}var zO={id:"title",_element:Lf,start(i,t,e){HO(i,e)},stop(i){const t=i.titleBlock;Ee.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const s=i.titleBlock;Ee.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ll=new WeakMap;var VO={id:"subtitle",start(i,t,e){const s=new Lf({ctx:i.ctx,options:e,chart:i});Ee.configure(i,s,e),Ee.addBox(i,s),ll.set(i,s)},stop(i){Ee.removeBox(i,ll.get(i)),ll.delete(i)},beforeUpdate(i,t,e){const s=ll.get(i);Ee.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vo={average(i){if(!i.length)return!1;let t,e,s=0,n=0,r=0;for(t=0,e=i.length;t<e;++t){const o=i[t].element;if(o&&o.hasValue()){const a=o.tooltipPosition();s+=a.x,n+=a.y,++r}}return{x:s/r,y:n/r}},nearest(i,t){if(!i.length)return!1;let e=t.x,s=t.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=i.length;r<o;++r){const l=i[r].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),c=Sd(t,h);c<n&&(n=c,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,s=l.y}return{x:e,y:s}}};function Li(i,t){return t&&(Ft(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function fs(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function WO(i,t){const{element:e,datasetIndex:s,index:n}=t,r=i.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:i,label:o,parsed:r.getParsed(n),raw:i.data.datasets[s].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:e}}function E_(i,t){const e=i.chart.ctx,{body:s,footer:n,title:r}=i,{boxWidth:o,boxHeight:a}=t,l=he(t.bodyFont),h=he(t.titleFont),c=he(t.footerFont),u=r.length,d=n.length,f=s.length,p=Me(t.padding);let g=p.height,m=0,_=s.reduce((v,x)=>v+x.before.length+x.lines.length+x.after.length,0);if(_+=i.beforeBody.length+i.afterBody.length,u&&(g+=u*h.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_){const v=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*v+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*c.lineHeight+(d-1)*t.footerSpacing);let y=0;const b=function(v){m=Math.max(m,e.measureText(v).width+y)};return e.save(),e.font=h.string,Mt(i.title,b),e.font=l.string,Mt(i.beforeBody.concat(i.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,Mt(s,v=>{Mt(v.before,b),Mt(v.lines,b),Mt(v.after,b)}),y=0,e.font=c.string,Mt(i.footer,b),e.restore(),m+=p.width,{width:m,height:g}}function jO(i,t){const{y:e,height:s}=t;return e<s/2?"top":e>i.height-s/2?"bottom":"center"}function XO(i,t,e,s){const{x:n,width:r}=s,o=e.caretSize+e.caretPadding;if(i==="left"&&n+r+o>t.width||i==="right"&&n-r-o<0)return!0}function YO(i,t,e,s){const{x:n,width:r}=e,{width:o,chartArea:{left:a,right:l}}=i;let h="center";return s==="center"?h=n<=(a+l)/2?"left":"right":n<=r/2?h="left":n>=o-r/2&&(h="right"),XO(h,i,t,e)&&(h="center"),h}function T_(i,t,e){const s=e.yAlign||t.yAlign||jO(i,e);return{xAlign:e.xAlign||t.xAlign||YO(i,t,e,s),yAlign:s}}function $O(i,t){let{x:e,width:s}=i;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function KO(i,t,e){let{y:s,height:n}=i;return t==="top"?s+=e:t==="bottom"?s-=n+e:s-=n/2,s}function A_(i,t,e,s){const{caretSize:n,caretPadding:r,cornerRadius:o}=i,{xAlign:a,yAlign:l}=e,h=n+r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=Rn(o);let p=$O(t,a);const g=KO(t,l,h);return l==="center"?a==="left"?p+=h:a==="right"&&(p-=h):a==="left"?p-=Math.max(c,d)+n:a==="right"&&(p+=Math.max(u,f)+n),{x:pe(p,0,s.width-t.width),y:pe(g,0,s.height-t.height)}}function hl(i,t,e){const s=Me(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function C_(i){return Li([],fs(i))}function qO(i,t,e){return nn(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function M_(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const N1={beforeTitle:cs,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:cs,beforeBody:cs,beforeLabel:cs,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return Ct(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:cs,afterBody:cs,beforeFooter:cs,footer:cs,afterFooter:cs};function Re(i,t,e,s){const n=i[t].call(e,s);return typeof n>"u"?N1[t].call(e,s):n}class Rd extends Di{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&e.options.animation&&s.animations,r=new _1(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=qO(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,n=Re(s,"beforeTitle",this,t),r=Re(s,"title",this,t),o=Re(s,"afterTitle",this,t);let a=[];return a=Li(a,fs(n)),a=Li(a,fs(r)),a=Li(a,fs(o)),a}getBeforeBody(t,e){return C_(Re(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:s}=e,n=[];return Mt(t,r=>{const o={before:[],lines:[],after:[]},a=M_(s,r);Li(o.before,fs(Re(a,"beforeLabel",this,r))),Li(o.lines,Re(a,"label",this,r)),Li(o.after,fs(Re(a,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(t,e){return C_(Re(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:s}=e,n=Re(s,"beforeFooter",this,t),r=Re(s,"footer",this,t),o=Re(s,"afterFooter",this,t);let a=[];return a=Li(a,fs(n)),a=Li(a,fs(r)),a=Li(a,fs(o)),a}_createItems(t){const e=this._active,s=this.chart.data,n=[],r=[],o=[];let a=[],l,h;for(l=0,h=e.length;l<h;++l)a.push(WO(this.chart,e[l]));return t.filter&&(a=a.filter((c,u,d)=>t.filter(c,u,d,s))),t.itemSort&&(a=a.sort((c,u)=>t.itemSort(c,u,s))),Mt(a,c=>{const u=M_(t.callbacks,c);n.push(Re(u,"labelColor",this,c)),r.push(Re(u,"labelPointStyle",this,c)),o.push(Re(u,"labelTextColor",this,c))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const s=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const a=vo[s.position].call(this,n,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=E_(this,s),h=Object.assign({},a,l),c=T_(this.chart,s,h),u=A_(s,h,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,n){const r=this.getCaretPosition(t,s,n);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,s){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:h,bottomLeft:c,bottomRight:u}=Rn(a),{x:d,y:f}=t,{width:p,height:g}=e;let m,_,y,b,v,x;return r==="center"?(v=f+g/2,n==="left"?(m=d,_=m-o,b=v+o,x=v-o):(m=d+p,_=m+o,b=v-o,x=v+o),y=m):(n==="left"?_=d+Math.max(l,c)+o:n==="right"?_=d+p-Math.max(h,u)-o:_=this.caretX,r==="top"?(b=f,v=b-o,m=_-o,y=_+o):(b=f+g,v=b+o,m=_+o,y=_-o),x=b),{x1:m,x2:_,x3:y,y1:b,y2:v,y3:x}}drawTitle(t,e,s){const n=this.title,r=n.length;let o,a,l;if(r){const h=Cr(s.rtl,this.x,this.width);for(t.x=hl(this,s.titleAlign,s),e.textAlign=h.textAlign(s.titleAlign),e.textBaseline="middle",o=he(s.titleFont),a=s.titleSpacing,e.fillStyle=s.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(n[l],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,e,s,n,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:h,boxPadding:c}=r,u=he(r.bodyFont),d=hl(this,"left",r),f=n.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,g=e.y+p;if(r.usePointStyle){const m={radius:Math.min(h,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=n.leftForLtr(f,h)+h/2,y=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Td(t,m,_,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Td(t,m,_,y)}else{t.lineWidth=wt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=n.leftForLtr(f,h-c),_=n.leftForLtr(n.xPlus(f,1),h-c-2),y=Rn(o.borderRadius);Object.values(y).some(b=>b!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ra(t,{x:m,y:g,w:h,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ra(t,{x:_,y:g+1,w:h-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,h,l),t.strokeRect(m,g,h,l),t.fillStyle=o.backgroundColor,t.fillRect(_,g+1,h-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:h,boxPadding:c}=s,u=he(s.bodyFont);let d=u.lineHeight,f=0;const p=Cr(s.rtl,this.x,this.width),g=function(A){e.fillText(A,p.x(t.x+f),t.y+d/2),t.y+=d+r},m=p.textAlign(o);let _,y,b,v,x,E,S;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=hl(this,m,s),e.fillStyle=s.bodyColor,Mt(this.beforeBody,g),f=a&&m!=="right"?o==="center"?h/2+c:h+2+c:0,v=0,E=n.length;v<E;++v){for(_=n[v],y=this.labelTextColors[v],e.fillStyle=y,Mt(_.before,g),b=_.lines,a&&b.length&&(this._drawColorBox(e,t,v,p,s),d=Math.max(u.lineHeight,l)),x=0,S=b.length;x<S;++x)g(b[x]),d=u.lineHeight;Mt(_.after,g)}f=0,d=u.lineHeight,Mt(this.afterBody,g),t.y-=r}drawFooter(t,e,s){const n=this.footer,r=n.length;let o,a;if(r){const l=Cr(s.rtl,this.x,this.width);for(t.x=hl(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=l.textAlign(s.footerAlign),e.textBaseline="middle",o=he(s.footerFont),e.fillStyle=s.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(n[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,e,s,n){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:h,height:c}=s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Rn(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(a+u,l),o==="top"&&this.drawCaret(t,e,s,n),e.lineTo(a+h-d,l),e.quadraticCurveTo(a+h,l,a+h,l+d),o==="center"&&r==="right"&&this.drawCaret(t,e,s,n),e.lineTo(a+h,l+c-p),e.quadraticCurveTo(a+h,l+c,a+h-p,l+c),o==="bottom"&&this.drawCaret(t,e,s,n),e.lineTo(a+f,l+c),e.quadraticCurveTo(a,l+c,a,l+c-f),o==="center"&&r==="left"&&this.drawCaret(t,e,s,n),e.lineTo(a,l+u),e.quadraticCurveTo(a,l,a+u,l),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,n=s&&s.x,r=s&&s.y;if(n||r){const o=vo[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=E_(this,t),l=Object.assign({},o,this._size),h=T_(e,t,l),c=A_(t,l,h,e);(n._to!==c.x||r._to!==c.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Me(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,n,e),d1(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),f1(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,n=t.map(({datasetIndex:a,index:l})=>{const h=this.chart.getDatasetMeta(a);if(!h)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:h.data[l],index:l}}),r=!ph(s,n),o=this._positionChanged(n,e);(r||o)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,s),a=this._positionChanged(o,t),l=e||!ph(o,r)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,s,n){const r=this.options;if(t.type==="mouseout")return[];if(!n)return e;const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:s,caretY:n,options:r}=this,o=vo[r.position].call(this,t,e);return o!==!1&&(s!==o.x||n!==o.y)}}nt(Rd,"positioners",vo);var ZO={id:"tooltip",_element:Rd,positioners:vo,afterInit(i,t,e){e&&(i.tooltip=new Rd({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:N1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},JO=Object.freeze({__proto__:null,Colors:cO,Decimation:pO,Filler:kO,Legend:GO,SubTitle:VO,Title:zO,Tooltip:ZO});const QO=(i,t,e,s)=>(typeof t=="string"?(e=i.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function tk(i,t,e,s){const n=i.indexOf(t);if(n===-1)return QO(i,t,e,s);const r=i.lastIndexOf(t);return n!==r?e:n}const ek=(i,t)=>i===null?null:pe(Math.round(i),0,t);function I_(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class Dd extends jn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:n,label:r}of e)s[n]===r&&s.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ct(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:tk(s,t,yt(e,t),this._addedLabels),ek(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,n=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=e;o++)n.push({value:o});return n}getLabelForValue(t){return I_.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}nt(Dd,"id","category"),nt(Dd,"defaults",{ticks:{callback:I_}});function ik(i,t){const e=[],{bounds:n,step:r,min:o,max:a,precision:l,count:h,maxTicks:c,maxDigits:u,includeBounds:d}=i,f=r||1,p=c-1,{min:g,max:m}=t,_=!Ct(o),y=!Ct(a),b=!Ct(h),v=(m-g)/(u+1);let x=Tm((m-g)/p/f)*f,E,S,A,M;if(x<1e-14&&!_&&!y)return[{value:g},{value:m}];M=Math.ceil(m/x)-Math.floor(g/x),M>p&&(x=Tm(M*x/p/f)*f),Ct(l)||(E=Math.pow(10,l),x=Math.ceil(x*E)/E),n==="ticks"?(S=Math.floor(g/x)*x,A=Math.ceil(m/x)*x):(S=g,A=m),_&&y&&r&&ZI((a-o)/r,x/1e3)?(M=Math.round(Math.min((a-o)/x,c)),x=(a-o)/M,S=o,A=a):b?(S=_?o:S,A=y?a:A,M=h-1,x=(A-S)/M):(M=(A-S)/x,Oo(M,Math.round(M),x/1e3)?M=Math.round(M):M=Math.ceil(M));const I=Math.max(Am(x),Am(S));E=Math.pow(10,Ct(l)?I:l),S=Math.round(S*E)/E,A=Math.round(A*E)/E;let C=0;for(_&&(d&&S!==o?(e.push({value:o}),S<o&&C++,Oo(Math.round((S+C*x)*E)/E,o,P_(o,v,i))&&C++):S<o&&C++);C<M;++C)e.push({value:Math.round((S+C*x)*E)/E});return y&&d&&A!==a?e.length&&Oo(e[e.length-1].value,a,P_(a,v,i))?e[e.length-1].value=a:e.push({value:a}):(!y||A===a)&&e.push({value:A}),e}function P_(i,t,{horizontal:e,minRotation:s}){const n=Ei(s),r=(e?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+i).length;return Math.min(t/r,o)}class wh extends jn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ct(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this;const o=l=>n=e?n:l,a=l=>r=s?r:l;if(t){const l=Zi(n),h=Zi(r);l<0&&h<0?a(0):l>0&&h>0&&o(0)}if(n===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(n-l)}this.min=n,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=ik(n,r);return t.bounds==="ticks"&&Yb(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const n=(s-e)/Math.max(t.length-1,1)/2;e-=n,s+=n}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return ya(t,this.chart.options.locale,this.options.ticks.format)}}class Od extends wh{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Zt(t)?t:0,this.max=Zt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=Ei(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}nt(Od,"id","linear"),nt(Od,"defaults",{ticks:{callback:qh.formatters.numeric}});const aa=i=>Math.floor(Ns(i)),pn=(i,t)=>Math.pow(10,aa(i)+t);function R_(i){return i/Math.pow(10,aa(i))===1}function D_(i,t,e){const s=Math.pow(10,e),n=Math.floor(i/s);return Math.ceil(t/s)-n}function sk(i,t){const e=t-i;let s=aa(e);for(;D_(i,t,s)>10;)s++;for(;D_(i,t,s)<10;)s--;return Math.min(s,aa(i))}function nk(i,{min:t,max:e}){t=We(i.min,t);const s=[],n=aa(t);let r=sk(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=n>r?Math.pow(10,n):0,h=Math.round((t-l)*o)/o,c=Math.floor((t-l)/a/10)*a*10;let u=Math.floor((h-c)/Math.pow(10,r)),d=We(i.min,Math.round((l+c+u*Math.pow(10,r))*o)/o);for(;d<e;)s.push({value:d,major:R_(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+c+u*Math.pow(10,r))*o)/o;const f=We(i.max,d);return s.push({value:f,major:R_(f),significand:u}),s}class kd extends jn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const s=wh.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return Zt(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Zt(t)?Math.max(0,t):null,this.max=Zt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Zt(this._userMin)&&(this.min=t===pn(this.min,0)?pn(this.min,-1):pn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let s=this.min,n=this.max;const r=a=>s=t?s:a,o=a=>n=e?n:a;s===n&&(s<=0?(r(1),o(10)):(r(pn(s,-1)),o(pn(n,1)))),s<=0&&r(pn(n,-1)),n<=0&&o(pn(s,1)),this.min=s,this.max=n}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},s=nk(e,this);return t.bounds==="ticks"&&Yb(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":ya(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ns(t),this._valueRange=Ns(this.max)-Ns(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ns(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}nt(kd,"id","logarithmic"),nt(kd,"defaults",{ticks:{callback:qh.formatters.logarithmic,major:{enabled:!0}}});function Fd(i){const t=i.ticks;if(t.display&&i.display){const e=Me(t.backdropPadding);return yt(t.font&&t.font.size,ie.font.size)+e.height}return 0}function rk(i,t,e){return e=Ft(e)?e:[e],{w:pP(i,t.string,e),h:e.length*t.lineHeight}}function O_(i,t,e,s,n){return i===s||i===n?{start:t-e/2,end:t+e/2}:i<s||i>n?{start:t-e,end:t}:{start:t,end:t+e}}function ok(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),s=[],n=[],r=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?Nt/r:0;for(let l=0;l<r;l++){const h=o.setContext(i.getPointLabelContext(l));n[l]=h.padding;const c=i.getPointPosition(l,i.drawingArea+n[l],a),u=he(h.font),d=rk(i.ctx,u,i._pointLabels[l]);s[l]=d;const f=Ye(i.getIndexAngle(l)+a),p=Math.round(Cf(f)),g=O_(p,c.x,d.w,0,180),m=O_(p,c.y,d.h,90,270);ak(e,t,f,g,m)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=lk(i,s,n)}function ak(i,t,e,s,n){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,i.l=Math.min(i.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,i.r=Math.max(i.r,t.r+a)),n.start<t.t?(l=(t.t-n.start)/o,i.t=Math.min(i.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/o,i.b=Math.max(i.b,t.b+l))}function lk(i,t,e){const s=[],n=i._pointLabels.length,r=i.options,o=Fd(r)/2,a=i.drawingArea,l=r.pointLabels.centerPointLabels?Nt/n:0;for(let h=0;h<n;h++){const c=i.getPointPosition(h,a+o+e[h],l),u=Math.round(Cf(Ye(c.angle+Jt))),d=t[h],f=uk(c.y,d.h,u),p=hk(u),g=ck(c.x,d.w,p);s.push({x:c.x,y:f,textAlign:p,left:g,top:f,right:g+d.w,bottom:f+d.h})}return s}function hk(i){return i===0||i===180?"center":i<180?"left":"right"}function ck(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function uk(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function dk(i,t){const{ctx:e,options:{pointLabels:s}}=i;for(let n=t-1;n>=0;n--){const r=s.setContext(i.getPointLabelContext(n)),o=he(r.font),{x:a,y:l,textAlign:h,left:c,top:u,right:d,bottom:f}=i._pointLabelItems[n],{backdropColor:p}=r;if(!Ct(p)){const g=Rn(r.borderRadius),m=Me(r.backdropPadding);e.fillStyle=p;const _=c-m.left,y=u-m.top,b=d-c+m.width,v=f-u+m.height;Object.values(g).some(x=>x!==0)?(e.beginPath(),ra(e,{x:_,y,w:b,h:v,radius:g}),e.fill()):e.fillRect(_,y,b,v)}Gn(e,i._pointLabels[n],a,l+o.lineHeight/2,o,{color:r.color,textAlign:h,textBaseline:"middle"})}}function U1(i,t,e,s){const{ctx:n}=i;if(e)n.arc(i.xCenter,i.yCenter,t,0,Bt);else{let r=i.getPointPosition(0,t);n.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=i.getPointPosition(o,t),n.lineTo(r.x,r.y)}}function fk(i,t,e,s,n){const r=i.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(n.dash),r.lineDashOffset=n.dashOffset,r.beginPath(),U1(i,e,o,s),r.closePath(),r.stroke(),r.restore())}function pk(i,t,e){return nn(i,{label:e,index:t,type:"pointLabel"})}class wo extends wh{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Me(Fd(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Zt(t)&&!isNaN(t)?t:0,this.max=Zt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Fd(this.options))}generateTickLabels(t){wh.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{const n=Ot(this.options.pointLabels.callback,[e,s],this);return n||n===0?n:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?ok(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,n))}getIndexAngle(t){const e=Bt/(this._pointLabels.length||1),s=this.options.startAngle||0;return Ye(t*e+Ei(s))}getDistanceFromCenterForValue(t){if(Ct(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ct(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const s=e[t];return pk(this.getContext(),t,s)}}getPointPosition(t,e,s=0){const n=this.getIndexAngle(t)-Jt+s;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:s,right:n,bottom:r}=this._pointLabelItems[t];return{left:e,top:s,right:n,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),U1(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:s,grid:n,border:r}=e,o=this._pointLabels.length;let a,l,h;if(e.pointLabels.display&&dk(this,o),n.display&&this.ticks.forEach((c,u)=>{if(u!==0){l=this.getDistanceFromCenterForValue(c.value);const d=this.getContext(u),f=n.setContext(d),p=r.setContext(d);fk(this,f,l,o,p)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const c=s.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=c;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),h=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;const n=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!e.reverse)return;const h=s.setContext(this.getContext(l)),c=he(h.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),h.showLabelBackdrop){t.font=c.string,o=t.measureText(a.label).width,t.fillStyle=h.backdropColor;const u=Me(h.backdropPadding);t.fillRect(-o/2-u.left,-r-c.size/2-u.top,o+u.width,c.size+u.height)}Gn(t,a.label,0,-r,c,{color:h.color})}),t.restore()}drawTitle(){}}nt(wo,"id","radialLinear"),nt(wo,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:qh.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),nt(wo,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),nt(wo,"descriptors",{angleLines:{_fallback:"grid"}});const tc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ke=Object.keys(tc);function gk(i,t){return i-t}function k_(i,t){if(Ct(t))return null;const e=i._adapter,{parser:s,round:n,isoWeekday:r}=i._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Zt(o)||(o=typeof s=="string"?e.parse(o,s):e.parse(o)),o===null?null:(n&&(o=n==="week"&&(Gr(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,n)),+o)}function F_(i,t,e,s){const n=ke.length;for(let r=ke.indexOf(i);r<n-1;++r){const o=tc[ke[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=s)return ke[r]}return ke[n-1]}function mk(i,t,e,s,n){for(let r=ke.length-1;r>=ke.indexOf(e);r--){const o=ke[r];if(tc[o].common&&i._adapter.diff(n,s,o)>=t-1)return o}return ke[e?ke.indexOf(e):0]}function _k(i){for(let t=ke.indexOf(i)+1,e=ke.length;t<e;++t)if(tc[ke[t]].common)return ke[t]}function B_(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:s,hi:n}=Mf(e,t),r=e[s]>=t?e[s]:e[n];i[r]=!0}}function yk(i,t,e,s){const n=i._adapter,r=+n.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+n.add(a,1,s))l=e[a],l>=0&&(t[l].major=!0);return t}function L_(i,t,e){const s=[],n={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],n[a]=o,s.push({value:a,major:!1});return r===0||!e?s:yk(i,s,n,e)}class la extends jn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const s=t.time||(t.time={}),n=this._adapter=new PR._date(t.adapters.date);n.init(e),Do(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:k_(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(h){!o&&!isNaN(h.min)&&(n=Math.min(n,h.min)),!a&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=Zt(n)&&!isNaN(n)?n:+e.startOf(Date.now(),s),r=Zt(r)&&!isNaN(r)?r:+e.endOf(Date.now(),s)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,a=eP(n,r,o);return this._unit=e.unit||(s.autoSkip?F_(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):mk(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:_k(this._unit),this.initOffsets(n),t.reverse&&a.reverse(),L_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,s=0,n,r;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?e=1-n:e=(this.getDecimalForValue(t[1])-n)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=pe(e,0,o),s=pe(s,0,o),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,n=this.options,r=n.time,o=r.unit||F_(r.minUnit,e,s,this._getLabelCapacity(e)),a=yt(n.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,h=Gr(l)||l===!0,c={};let u=e,d,f;if(h&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,h?"day":o),t.diff(s,e,o)>1e5*a)throw new Error(e+" and "+s+" are too far apart with stepSize of "+a+" "+o);const p=n.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<s;d=+t.add(d,a,o),f++)B_(c,d,p);return(d===s||n.bounds==="ticks"||f===1)&&B_(c,d,p),Object.keys(c).sort((g,m)=>g-m).map(g=>+g)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,o=e||n[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,s,n){const r=this.options,o=r.ticks.callback;if(o)return Ot(o,[t,e,s],this);const a=r.time.displayFormats,l=this._unit,h=this._majorUnit,c=l&&a[l],u=h&&a[h],d=s[e],f=h&&u&&d&&d.major;return this._adapter.format(t,n||(f?u:c))}generateTickLabels(t){let e,s,n;for(e=0,s=t.length;e<s;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,n=Ei(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,n=s[e.unit]||s.millisecond,r=this._tickFormatFunction(t,0,L_(this,[t],this._majorUnit),n),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,s=n.length;e<s;++e)t=t.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const n=this.getLabels();for(e=0,s=n.length;e<s;++e)t.push(k_(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return qb(t.sort(gk))}}nt(la,"id","time"),nt(la,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function cl(i,t,e){let s=0,n=i.length-1,r,o,a,l;e?(t>=i[s].pos&&t<=i[n].pos&&({lo:s,hi:n}=xs(i,"pos",t)),{pos:r,time:a}=i[s],{pos:o,time:l}=i[n]):(t>=i[s].time&&t<=i[n].time&&({lo:s,hi:n}=xs(i,"time",t)),{time:r,pos:a}=i[s],{time:o,pos:l}=i[n]);const h=o-r;return h?a+(l-a)*(t-r)/h:a}class Bd extends la{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=cl(e,this.min),this._tableRange=cl(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,n=[],r=[];let o,a,l,h,c;for(o=0,a=t.length;o<a;++o)h=t[o],h>=e&&h<=s&&n.push(h);if(n.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(o=0,a=n.length;o<a;++o)c=n[o+1],l=n[o-1],h=n[o],Math.round((c+l)/2)!==h&&r.push({time:h,pos:o/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(cl(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return cl(this._table,s*this._tableRange+this._minPos,!0)}}nt(Bd,"id","timeseries"),nt(Bd,"defaults",la.defaults);var bk=Object.freeze({__proto__:null,CategoryScale:Dd,LinearScale:Od,LogarithmicScale:kd,RadialLinearScale:wo,TimeScale:la,TimeSeriesScale:Bd});const G1=[IR,nO,JO,bk];function xk(i){let t,e,s,n,r;return{c(){t=J("div"),e=J("h2"),e.textContent="My History",s=xt(),n=J("div"),r=J("canvas"),H(r,"class","svelte-1mw7v7m"),H(n,"class","container svelte-1mw7v7m"),H(t,"class","card svelte-1mw7v7m")},m(o,a){ct(o,t,a),Z(t,e),Z(t,s),Z(t,n),Z(n,r),i[1](r)},p:st,i:st,o:st,d(o){o&&ht(t),i[1](null)}}}function vk(i,t,e){wi.register(...G1);const s=JSON.parse(localStorage.getItem("userStats"));let n,r;const o=(d,f)=>{let p,g,m;const _=f.right-f.left,y=f.bottom-f.top;return(!m||p!==_||g!==y)&&(p=_,g=y,m=d.createLinearGradient(0,f.bottom,0,f.top),m.addColorStop(0,"#57ff54"),m.addColorStop(.5,"#f7ff54"),m.addColorStop(1,"#d60626")),m},a=(d,f)=>{let p,g,m;const _=f.right-f.left,y=f.bottom-f.top;return(!m||p!==_||g!==y)&&(p=_,g=y,m=d.createLinearGradient(0,f.bottom,0,f.top),m.addColorStop(0,"rgba(87, 255, 84, 0)"),m.addColorStop(.5,"rgba(247, 255, 84, 0.25)"),m.addColorStop(1,"rgba(214, 6, 38, 0.5)")),m},l=(d,f)=>{const p=d.createLinearGradient(f.left,0,f.right,0);return p.addColorStop(0,"rgba(59, 71, 88, 0.2)"),p.addColorStop(.5,"rgba(59, 71, 88, 0.5)"),p.addColorStop(1,"rgba(59, 71, 88, 0.2)"),p};let h={labels:s.scoreHistory.map((d,f)=>f),datasets:[{type:"line",data:s.scoreHistory,fill:{target:"origin",above(d){const f=d.chart,{ctx:p,chartArea:g}=f;if(g)return a(p,g)}},tension:.5,backgroundColor:"rgba(255, 255, 255, 0.2)",borderColor(d){const f=d.chart,{ctx:p,chartArea:g}=f;if(g)return o(p,g)}}]};const c={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"nearest",includeInivisible:!1},layout:{},plugins:{legend:{display:!1},tooltip:{displayColors:!1,xAlign:"center",titleMarginBottom:0,margin:10,yAlign:"bottom",titleAlign:"center",lineHeight:-5,backgroundColor:"#586A84",titleColor:"white",titleFont:{weight:"bold"},callbacks:{title:d=>`${d[0].raw}`,label:d=>""}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{display:!1}},y:{grid:{color(d){const f=d.chart,{ctx:p,chartArea:g}=f;if(g)return l(p,g)},lineWidth:1.5},border:{display:!1},beginAtZero:!1,ticks:{autoSkip:!1,maxTicksLimit:5,maxRotation:0,color:"#3B4758",font:{size:12}}}}};ui(()=>{r=new wi(n.getContext("2d"),{type:"line",data:h,options:c})}),Wr(()=>{r.destroy()});function u(d){Xi[d?"unshift":"push"](()=>{n=d,e(0,n)})}return[n,u]}class wk extends te{constructor(t){super(),Qt(this,t,vk,xk,$t,{})}}function Sk(i){let t,e,s,n,r;return{c(){t=J("div"),e=J("h2"),e.textContent="Global Scores",s=xt(),n=J("div"),r=J("canvas"),H(r,"class","svelte-r9j32a"),H(n,"class","container svelte-r9j32a"),H(t,"class","card svelte-r9j32a")},m(o,a){ct(o,t,a),Z(t,e),Z(t,s),Z(t,n),Z(n,r),i[2](r)},p:st,i:st,o:st,d(o){o&&ht(t),i[2](null)}}}function Ek(i,t,e){wi.register(...G1);let{globalScores:s=null}=t,n,r;const o=JSON.parse(localStorage.getItem("dailyData")).moves.length,a=(d,f)=>{let p,g,m;const _=f.right-f.left,y=f.bottom-f.top;return(!m||p!==_||g!==y)&&(p=_,g=y,m=d.createLinearGradient(0,f.bottom,0,f.top),m.addColorStop(0,"#57ff54"),m.addColorStop(.5,"#f7ff54"),m.addColorStop(1,"#d60626")),m};let l={labels:s.map((d,f)=>f),datasets:[{type:"bar",data:s,fill:!1,tension:.5,backgroundColor:d=>d.index===o?"#f1d324":"rgba(255, 255, 255, 0.75)",borderColor(d){const f=d.chart,{ctx:p,chartArea:g}=f;if(g)return a(p,g)}}]},h;const c={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"nearest",includeInivisible:!1},animation:{onComplete:()=>{h=!0},delay:d=>{let f=0;return d.type==="data"&&d.mode==="default"&&!h&&(f=d.dataIndex*10+d.datasetIndex*100),f}},layout:{},plugins:{legend:{display:!1},tooltip:{displayColors:!1,xAlign:"center",titleMarginBottom:0,margin:10,yAlign:"bottom",titleAlign:"center",lineHeight:-5,backgroundColor:"#586A84",titleColor:"white",titleFont:{weight:"bold"},callbacks:{title:d=>`Score: ${d[0].label}`,afterTitle:d=>`People: ${d[0].raw}`,label:d=>""}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{display:!1}},y:{grid:{display:!1},border:{display:!1},beginAtZero:!1,ticks:{autoSkip:!1,maxTicksLimit:5,maxRotation:0,color:"rgba(255, 255, 255, 0.25)",font:{size:12}}}}};ui(()=>{r=new wi(n.getContext("2d"),{type:"line",data:l,options:c})}),Wr(()=>{r.destroy()});function u(d){Xi[d?"unshift":"push"](()=>{n=d,e(0,n)})}return i.$$set=d=>{"globalScores"in d&&e(1,s=d.globalScores)},[n,s,u]}class Tk extends te{constructor(t){super(),Qt(this,t,Ek,Sk,$t,{globalScores:1})}}const H1="en",z1={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:["People's Republic of China","China"],CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:["Republic of the Congo","Congo"],CD:["Democratic Republic of the Congo","Congo"],CK:"Cook Islands",CR:"Costa Rica",CI:["Cote D'Ivoire","Ivory Coast"],HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:["Czech Republic","Czechia"],DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:["Republic of The Gambia","The Gambia","Gambia"],GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:["Islamic Republic of Iran","Iran"],IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"North Korea",KR:["South Korea","Korea, Republic of","Republic of Korea"],KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MK:["The Republic of North Macedonia","North Macedonia"],MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:["State of Palestine","Palestine"],PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:["Russian Federation","Russia"],RW:"Rwanda",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Eswatini",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:["Taiwan, Province of China","Taiwan"],TJ:"Tajikistan",TZ:["United Republic of Tanzania","Tanzania"],TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:["TÃ¼rkiye","Turkey"],TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:["United Kingdom","UK","Great Britain"],US:["United States of America","United States","USA"],UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Vietnam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",AX:"Ã…land Islands",BQ:"Bonaire, Sint Eustatius and Saba",CW:"CuraÃ§ao",GG:"Guernsey",IM:"Isle of Man",JE:"Jersey",ME:"Montenegro",BL:"Saint BarthÃ©lemy",MF:"Saint Martin (French part)",RS:"Serbia",SX:"Sint Maarten (Dutch part)",SS:"South Sudan",XK:"Kosovo"},V1={locale:H1,countries:z1},Ak=Object.freeze(Object.defineProperty({__proto__:null,countries:z1,default:V1,locale:H1},Symbol.toStringTag,{value:"Module"}));function N_(i,t,e){const s=i.slice();return s[3]=t[e].score,s[4]=t[e].countries,s[6]=e,s}function U_(i,t,e){const s=i.slice();return s[7]=t[e],s[9]=e,s}function Ck(i){let t,e=i[3]+"",s;return{c(){t=J("p"),s=Ie(e),H(t,"class","svelte-i3a2fb")},m(n,r){ct(n,t,r),Z(t,s)},p(n,r){r&1&&e!==(e=n[3]+"")&&qe(s,e)},d(n){n&&ht(t)}}}function Mk(i){let t,e=i[3]+"",s;return{c(){t=J("p"),s=Ie(e),No(t,"color","#CD7F32"),H(t,"class","svelte-i3a2fb")},m(n,r){ct(n,t,r),Z(t,s)},p(n,r){r&1&&e!==(e=n[3]+"")&&qe(s,e)},d(n){n&&ht(t)}}}function Ik(i){let t,e=i[3]+"",s;return{c(){t=J("p"),s=Ie(e),No(t,"color","silver"),H(t,"class","svelte-i3a2fb")},m(n,r){ct(n,t,r),Z(t,s)},p(n,r){r&1&&e!==(e=n[3]+"")&&qe(s,e)},d(n){n&&ht(t)}}}function Pk(i){let t,e=i[3]+"",s;return{c(){t=J("p"),s=Ie(e),No(t,"color","gold"),H(t,"class","svelte-i3a2fb")},m(n,r){ct(n,t,r),Z(t,s)},p(n,r){r&1&&e!==(e=n[3]+"")&&qe(s,e)},d(n){n&&ht(t)}}}function G_(i){let t,e,s,n,r,o,a;function l(u,d){return u[6]===0?Pk:u[6]===1?Ik:u[6]===2?Mk:Ck}let c=l(i)(i);return{c(){t=J("div"),e=J("img"),o=xt(),c.c(),a=xt(),Ji(e.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${i[7].toLowerCase()}.svg`)||H(e,"src",s),H(e,"alt",n=i[1](i[7])),H(e,"title",r=i[1](i[7])),H(e,"class","svelte-i3a2fb"),H(t,"class","country svelte-i3a2fb")},m(u,d){ct(u,t,d),Z(t,e),Z(t,o),c.m(t,null),Z(t,a)},p(u,d){d&1&&!Ji(e.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${u[7].toLowerCase()}.svg`)&&H(e,"src",s),d&1&&n!==(n=u[1](u[7]))&&H(e,"alt",n),d&1&&r!==(r=u[1](u[7]))&&H(e,"title",r),c.p(u,d)},d(u){u&&ht(t),c.d()}}}function H_(i){let t,e=i[4],s=[];for(let n=0;n<e.length;n+=1)s[n]=G_(U_(i,e,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();t=Vr()},m(n,r){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,r);ct(n,t,r)},p(n,r){if(r&3){e=n[4];let o;for(o=0;o<e.length;o+=1){const a=U_(n,e,o);s[o]?s[o].p(a,r):(s[o]=G_(a),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=e.length}},d(n){Sh(s,n),n&&ht(t)}}}function Rk(i){let t,e,s,n,r=i[0],o=[];for(let a=0;a<r.length;a+=1)o[a]=H_(N_(i,r,a));return{c(){t=J("div"),e=J("h2"),e.textContent="Leader Board",s=xt(),n=J("div");for(let a=0;a<o.length;a+=1)o[a].c();H(e,"class","svelte-i3a2fb"),H(n,"class","board svelte-i3a2fb"),H(t,"class","card svelte-i3a2fb")},m(a,l){ct(a,t,l),Z(t,e),Z(t,s),Z(t,n);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(n,null)},p(a,[l]){if(l&3){r=a[0];let h;for(h=0;h<r.length;h+=1){const c=N_(a,r,h);o[h]?o[h].p(c,l):(o[h]=H_(c),o[h].c(),o[h].m(n,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=r.length}},i:st,o:st,d(a){a&&ht(t),Sh(o,a)}}}function Dk(i,t,e){let{leaderBoard:s=[]}=t;Tr.registerLocale(V1);let n=[];function r(o){return Tr.getName(o,"en",{select:"official"})}return i.$$set=o=>{"leaderBoard"in o&&e(2,s=o.leaderBoard)},i.$$.update=()=>{if(i.$$.dirty&5){e(0,n=[]);for(let o=0;o<s.length;o++)s[o].length>0&&n.push({score:o,countries:s[o]})}},[n,r,s]}class Ok extends te{constructor(t){super(),Qt(this,t,Dk,Rk,$t,{leaderBoard:2})}}function kk(i){let t,e,s,n,r,o,a,l,h,c;return{c(){t=J("div"),e=J("h2"),s=Ie(i[0]),n=J("span"),n.textContent="h",r=xt(),o=Ie(i[1]),a=J("span"),a.textContent="m",l=xt(),h=Ie(i[2]),c=J("span"),c.textContent="s",H(n,"class","svelte-4aifb5"),H(a,"class","svelte-4aifb5"),H(c,"class","svelte-4aifb5"),H(e,"class","svelte-4aifb5"),H(t,"class","card svelte-4aifb5")},m(u,d){ct(u,t,d),Z(t,e),Z(e,s),Z(e,n),Z(e,r),Z(e,o),Z(e,a),Z(e,l),Z(e,h),Z(e,c)},p(u,[d]){d&1&&qe(s,u[0]),d&2&&qe(o,u[1]),d&4&&qe(h,u[2])},i:st,o:st,d(u){u&&ht(t)}}}function Fk(i,t,e){function s(){const u=Vi().utc().tz("Europe/Paris"),f=u.clone().endOf("day").diff(u,"second");return Math.floor(f/3600)}function n(){const u=Vi().utc().tz("Europe/Paris"),f=u.clone().endOf("day").diff(u,"second");return Math.floor(f%3600/60)}function r(){const u=Vi().utc().tz("Europe/Paris");return u.clone().endOf("day").diff(u,"second")%60}let o=s(),a=n(),l=r(),h;return ui(()=>{h=setInterval(()=>{e(0,o=s()),e(1,a=n()),e(2,l=r())},1e3)}),Wr(()=>{clearInterval(h)}),[o,a,l]}class Bk extends te{constructor(t){super(),Qt(this,t,Fk,kk,$t,{})}}function Lk(i){let t,e,s;return{c(){t=J("button"),t.textContent="Copy & Share",H(t,"class","svelte-xlgzd8")},m(n,r){ct(n,t,r),e||(s=kt(t,"click",i[2]),e=!0)},p:st,i:st,o:st,d(n){n&&ht(t),e=!1,s()}}}const Nk="â¬›";function z_(i){const t=parseInt(i.slice(1),16),e=t>>16&255,s=t>>8&255,n=t&255;return[e,s,n]}function Uk(i,t){const[e,s,n]=i,[r,o,a]=t;return Math.sqrt((e-r)**2+(s-o)**2+(n-a)**2)}function Gk(i,t,e){const s=JSON.parse(localStorage.getItem("dailyData")),n=s.pieceMap,r=s.palette,o=[{char:"ðŸŸ¥",hex:"#FF0000"},{char:"ðŸŸ§",hex:"#FFA500"},{char:"ðŸŸ¨",hex:"#FFFF00"},{char:"ðŸŸ©",hex:"#008000"},{char:"ðŸŸ¦",hex:"#0000FF"},{char:"ðŸŸª",hex:"#800080"},{char:"ðŸŸ«",hex:"#A52A2A"},{char:"â¬œ",hex:"#FFFFFF"}],a=["ðŸ˜Ž","ðŸ˜Ž","ðŸ˜Ž","ðŸ˜Ž","ðŸ˜Ž","ðŸ˜","ðŸ˜","ðŸ˜","ðŸ˜ƒ","ðŸ˜ƒ","ðŸ˜ƒ","ðŸŒŸ","ðŸŒŸ","ðŸŒŸ","ðŸŒŸ","âœ¨","âœ¨","âœ¨","âš¡","âš¡","âš¡","âš¡","âš¡","âš¡","ðŸ¦","ðŸ¦§"];function l(f){let p=1/0,g=null;for(const m of o){const _=Uk(z_(f),z_(m.hex));_<p&&(p=_,g=m)}return g}function h(f){const p=[];for(const g of f){const m=l(g);p.push(m.char),o.splice(o.indexOf(m),1)}return p}let c="Solved in "+s.moves.length+" moves "+a[Math.floor(Math.random()*a.length)],u=[];return ui(()=>{const f=h(r);for(let p=0;p<n.length;p++){let g="";for(let m=0;m<n[p].length;m++){let _="";n[m][p]?_=f[r.indexOf(n[m][p].color)]:_=Nk,g+=_}e(0,u=[...u,g])}}),[u,c,()=>navigator.clipboard.writeText(`${c}
${u.flat().join(`
`)}`)]}class Hk extends te{constructor(t){super(),Qt(this,t,Gk,Lk,$t,{})}}function zk(i){let t;return{c(){t=J("div"),t.innerHTML='<h2 class="svelte-wm1ky6">Good job!</h2>',H(t,"class","card svelte-wm1ky6")},m(e,s){ct(e,t,s)},p:st,i:st,o:st,d(e){e&&ht(t)}}}class Vk extends te{constructor(t){super(),Qt(this,t,null,zk,$t,{})}}function Wk(i){let t,e,s,n,r,o,a,l,h,c,u,d,f,p;return t=new Vk({}),s=new Tk({props:{globalScores:i[1]}}),r=new Ok({props:{leaderBoard:i[2]}}),a=new wk({}),h=new yI({}),u=new Bk({}),f=new Hk({}),{c(){Kt(t.$$.fragment),e=xt(),Kt(s.$$.fragment),n=xt(),Kt(r.$$.fragment),o=xt(),Kt(a.$$.fragment),l=xt(),Kt(h.$$.fragment),c=xt(),Kt(u.$$.fragment),d=xt(),Kt(f.$$.fragment)},m(g,m){Vt(t,g,m),ct(g,e,m),Vt(s,g,m),ct(g,n,m),Vt(r,g,m),ct(g,o,m),Vt(a,g,m),ct(g,l,m),Vt(h,g,m),ct(g,c,m),Vt(u,g,m),ct(g,d,m),Vt(f,g,m),p=!0},p(g,m){const _={};m&2&&(_.globalScores=g[1]),s.$set(_);const y={};m&4&&(y.leaderBoard=g[2]),r.$set(y)},i(g){p||($(t.$$.fragment,g),$(s.$$.fragment,g),$(r.$$.fragment,g),$(a.$$.fragment,g),$(h.$$.fragment,g),$(u.$$.fragment,g),$(f.$$.fragment,g),p=!0)},o(g){tt(t.$$.fragment,g),tt(s.$$.fragment,g),tt(r.$$.fragment,g),tt(a.$$.fragment,g),tt(h.$$.fragment,g),tt(u.$$.fragment,g),tt(f.$$.fragment,g),p=!1},d(g){Wt(t,g),g&&ht(e),Wt(s,g),g&&ht(n),Wt(r,g),g&&ht(o),Wt(a,g),g&&ht(l),Wt(h,g),g&&ht(c),Wt(u,g),g&&ht(d),Wt(f,g)}}}function jk(i){let t;return{c(){t=J("h1"),t.textContent="Loading..."},m(e,s){ct(e,t,s)},p:st,i:st,o:st,d(e){e&&ht(t)}}}function Xk(i){let t,e,s,n;const r=[jk,Wk],o=[];function a(l,h){return l[0]?1:0}return e=a(i),s=o[e]=r[e](i),{c(){t=J("div"),s.c(),H(t,"class","dashboard-container svelte-jlo7w8")},m(l,h){ct(l,t,h),o[e].m(t,null),n=!0},p(l,[h]){let c=e;e=a(l),e===c?o[e].p(l,h):(de(),tt(o[c],1,1,()=>{o[c]=null}),fe(),s=o[e],s?s.p(l,h):(s=o[e]=r[e](l),s.c()),$(s,1),s.m(t,null))},i(l){n||($(s),n=!0)},o(l){tt(s),n=!1},d(l){l&&ht(t),o[e].d()}}}function Yk(i,t,e){const s="bombastic";let n=null,r=null,o=null;return ui(()=>{Wd.get(s+"/statistics").then(a=>{a.status===200&&(e(0,n=a.data),e(1,r=n.globalScores),e(2,o=n.leaderBoard))}).catch(a=>{console.error(a)})}),[n,r,o]}class $k extends te{constructor(t){super(),Qt(this,t,Yk,Xk,$t,{})}}function V_(i){let t,e;return t=new gI({}),{c(){Kt(t.$$.fragment)},m(s,n){Vt(t,s,n),e=!0},i(s){e||($(t.$$.fragment,s),e=!0)},o(s){tt(t.$$.fragment,s),e=!1},d(s){Wt(t,s)}}}function Kk(i){let t,e;return t=new aw({}),{c(){Kt(t.$$.fragment)},m(s,n){Vt(t,s,n),e=!0},p:st,i(s){e||($(t.$$.fragment,s),e=!0)},o(s){tt(t.$$.fragment,s),e=!1},d(s){Wt(t,s)}}}function qk(i){let t,e,s,n;const r=[Qk,Jk],o=[];function a(l,h){return!l[1]||l[3]?0:1}return t=a(i),e=o[t]=r[t](i),{c(){e.c(),s=Vr()},m(l,h){o[t].m(l,h),ct(l,s,h),n=!0},p(l,h){let c=t;t=a(l),t===c?o[t].p(l,h):(de(),tt(o[c],1,1,()=>{o[c]=null}),fe(),e=o[t],e?e.p(l,h):(e=o[t]=r[t](l),e.c()),$(e,1),e.m(s.parentNode,s))},i(l){n||($(e),n=!0)},o(l){tt(e),n=!1},d(l){o[t].d(l),l&&ht(s)}}}function Zk(i){let t,e;return t=new U2({}),{c(){Kt(t.$$.fragment)},m(s,n){Vt(t,s,n),e=!0},p:st,i(s){e||($(t.$$.fragment,s),e=!0)},o(s){tt(t.$$.fragment,s),e=!1},d(s){Wt(t,s)}}}function Jk(i){let t,e,s,n;t=new B2({props:{mapData:JSON.parse(localStorage.getItem("dailyData"))}});let r=i[4]&&W_();return{c(){Kt(t.$$.fragment),e=xt(),r&&r.c(),s=Vr()},m(o,a){Vt(t,o,a),ct(o,e,a),r&&r.m(o,a),ct(o,s,a),n=!0},p(o,a){o[4]?r?a&16&&$(r,1):(r=W_(),r.c(),$(r,1),r.m(s.parentNode,s)):r&&(de(),tt(r,1,1,()=>{r=null}),fe())},i(o){n||($(t.$$.fragment,o),$(r),n=!0)},o(o){tt(t.$$.fragment,o),tt(r),n=!1},d(o){Wt(t,o),o&&ht(e),r&&r.d(o),o&&ht(s)}}}function Qk(i){let t,e;return t=new dI({}),t.$on("play",i[5]),{c(){Kt(t.$$.fragment)},m(s,n){Vt(t,s,n),e=!0},p:st,i(s){e||($(t.$$.fragment,s),e=!0)},o(s){tt(t.$$.fragment,s),e=!1},d(s){Wt(t,s)}}}function W_(i){let t,e;return t=new $k({}),{c(){Kt(t.$$.fragment)},m(s,n){Vt(t,s,n),e=!0},i(s){e||($(t.$$.fragment,s),e=!0)},o(s){tt(t.$$.fragment,s),e=!1},d(s){Wt(t,s)}}}function tF(i){let t,e,s,n,r,o,a,l,h,c;e=new pw({});let u=i[2]&&V_();const d=[Zk,qk,Kk],f=[];function p(g,m){return g[0]==="Loading"?0:g[0]==="Loaded"?1:g[0]==="Error"?2:-1}return~(o=p(i))&&(a=f[o]=d[o](i)),h=new q2({}),{c(){t=J("main"),Kt(e.$$.fragment),s=xt(),u&&u.c(),n=xt(),r=J("div"),a&&a.c(),l=xt(),Kt(h.$$.fragment),H(r,"class","layout svelte-1dbb4bc"),H(t,"id","app")},m(g,m){ct(g,t,m),Vt(e,t,null),Z(t,s),u&&u.m(t,null),Z(t,n),Z(t,r),~o&&f[o].m(r,null),Z(t,l),Vt(h,t,null),c=!0},p(g,[m]){g[2]?u?m&4&&$(u,1):(u=V_(),u.c(),$(u,1),u.m(t,n)):u&&(de(),tt(u,1,1,()=>{u=null}),fe());let _=o;o=p(g),o===_?~o&&f[o].p(g,m):(a&&(de(),tt(f[_],1,1,()=>{f[_]=null}),fe()),~o?(a=f[o],a?a.p(g,m):(a=f[o]=d[o](g),a.c()),$(a,1),a.m(r,null)):a=null)},i(g){c||($(e.$$.fragment,g),$(u),$(a),$(h.$$.fragment,g),c=!0)},o(g){tt(e.$$.fragment,g),tt(u),tt(a),tt(h.$$.fragment,g),c=!1},d(g){g&&ht(t),Wt(e),u&&u.d(),~o&&f[o].d(),Wt(h)}}}const eF=1;function iF(i,t,e){let s,n,r;ii(i,jd,f=>e(2,s=f)),ii(i,Ul,f=>e(3,n=f)),ii(i,zl,f=>e(4,r=f)),Vi.extend(m0),Vi.extend(_0);const o="bombastic";let a="Loading",l,h=!1;const c=f=>{l=f;for(let p=0;p<l.pieceMap.length;p++)for(let g=0;g<l.pieceMap[p].length;g++)if(f.pieceMap[p][g]===0)l.pieceMap[p][g]=null;else{const _={id:`${p}-${g}`,color:l.palette[f.pieceMap[p][g]-1]};l.pieceMap[p][g]=_}l.moves=[],localStorage.setItem("dailyData",JSON.stringify(l))},u=()=>{let f=localStorage.getItem("dailyData");if(f){f=JSON.parse(f);const p=Vi().tz("Etc/GMT-2").format("YYYYMMDD");if(f.version&&f.version===eF&&f.seed===p){l=f,e(0,a="Loaded");return}else localStorage.removeItem("dailyData")}Wd.get(o+"/daily").then(p=>{p.status===200?(c(p.data),e(0,a="Loaded")):e(0,a="Error")}).catch(p=>{e(0,a="Error"),console.error(p)})};return ui(()=>{console.log(`   __ ____  _____  ______     _    
  / //_/ / / / _ )/ __/ /    (_)__ 
 / ,< / /_/ / _  / _// /___ / / _ \\
/_/|_|\\____/____/___/____(_)_/\\___/`),localStorage.getItem("userCountry")&&e(1,h=!0),setTimeout(()=>{u()},1e3)}),[a,h,s,n,r,()=>{e(1,h=!0),Ul.set(!1)}]}class sF extends te{constructor(t){super(),Qt(this,t,iF,tF,$t,{})}}new sF({target:document.getElementById("app")})});export default nF();
