var N_=Object.defineProperty;var U_=(e,t,i)=>t in e?N_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var G_=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var st=(e,t,i)=>(U_(e,typeof t!="symbol"?t+"":t,i),i);var tP=G_((nP,zr)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();function it(){}function Qp(e,t){for(const i in t)e[i]=t[i];return e}function tg(e){return e()}function mu(){return Object.create(null)}function vi(e){e.forEach(tg)}function mr(e){return typeof e=="function"}function Vt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Kr;function yi(e,t){return Kr||(Kr=document.createElement("a")),Kr.href=t,e===Kr.href}function H_(e){return Object.keys(e).length===0}function z_(e,...t){if(e==null)return it;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function Ye(e,t,i){e.$$.on_destroy.push(z_(t,i))}function xe(e,t,i,s){if(e){const n=eg(e,t,i,s);return e[0](n)}}function eg(e,t,i,s){return e[1]&&s?Qp(i.ctx.slice(),e[1](s(t))):i.ctx}function ve(e,t,i,s){if(e[2]&&s){const n=e[2](s(i));if(t.dirty===void 0)return n;if(typeof n=="object"){const r=[],o=Math.max(t.dirty.length,n.length);for(let a=0;a<o;a+=1)r[a]=t.dirty[a]|n[a];return r}return t.dirty|n}return t.dirty}function Ee(e,t,i,s,n,r){if(n){const o=eg(t,i,s,r);e.p(o,n)}}function we(e){if(e.ctx.length>32){const t=[],i=e.ctx.length/32;for(let s=0;s<i;s++)t[s]=-1;return t}return-1}function V_(e){const t={};for(const i in e)t[i]=!0;return t}function ra(e){return e&&mr(e.destroy)?e.destroy:it}function q(e,t){e.appendChild(t)}function at(e,t,i){e.insertBefore(t,i||null)}function ot(e){e.parentNode&&e.parentNode.removeChild(e)}function La(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function Z(e){return document.createElement(e)}function vn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ge(e){return document.createTextNode(e)}function yt(){return ge(" ")}function In(){return ge("")}function Rt(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function ss(e){return function(t){return t.preventDefault(),e.call(this,t)}}function En(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function G(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function _u(e,t){const i=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:i[s]&&i[s].set?e[s]=t[s]:G(e,s,t[s])}function W_(e){return Array.from(e.childNodes)}function Ie(e,t){t=""+t,e.data!==t&&(e.data=t)}function bu(e,t){e.value=t??""}function _r(e,t,i,s){i===null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}function wt(e,t,i){e.classList[i?"add":"remove"](t)}function j_(e,t,{bubbles:i=!1,cancelable:s=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,i,s,t),n}let br;function rr(e){br=e}function Na(){if(!br)throw new Error("Function called outside component initialization");return br}function X_(e){Na().$$.before_update.push(e)}function Fe(e){Na().$$.on_mount.push(e)}function Pn(e){Na().$$.on_destroy.push(e)}function ig(){const e=Na();return(t,i,{cancelable:s=!1}={})=>{const n=e.$$.callbacks[t];if(n){const r=j_(t,i,{cancelable:s});return n.slice().forEach(o=>{o.call(e,r)}),!r.defaultPrevented}return!0}}function qr(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const tn=[],pi=[];let cn=[];const yu=[],Y_=Promise.resolve();let _h=!1;function $_(){_h||(_h=!0,Y_.then(sg))}function bh(e){cn.push(e)}const El=new Set;let Ys=0;function sg(){if(Ys!==0)return;const e=br;do{try{for(;Ys<tn.length;){const t=tn[Ys];Ys++,rr(t),K_(t.$$)}}catch(t){throw tn.length=0,Ys=0,t}for(rr(null),tn.length=0,Ys=0;pi.length;)pi.pop()();for(let t=0;t<cn.length;t+=1){const i=cn[t];El.has(i)||(El.add(i),i())}cn.length=0}while(tn.length);for(;yu.length;)yu.pop()();_h=!1,El.clear(),rr(e)}function K_(e){if(e.fragment!==null){e.update(),vi(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(bh)}}function q_(e){const t=[],i=[];cn.forEach(s=>e.indexOf(s)===-1?t.push(s):i.push(s)),i.forEach(s=>s()),cn=t}const Lo=new Set;let As;function ie(){As={r:0,c:[],p:As}}function se(){As.r||vi(As.c),As=As.p}function X(e,t){e&&e.i&&(Lo.delete(e),e.i(t))}function tt(e,t,i,s){if(e&&e.o){if(Lo.has(e))return;Lo.add(e),As.c.push(()=>{Lo.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function Z_(e,t){const i={},s={},n={$$scope:1};let r=e.length;for(;r--;){const o=e[r],a=t[r];if(a){for(const l in o)l in a||(s[l]=1);for(const l in a)n[l]||(i[l]=a[l],n[l]=1);e[r]=a}else for(const l in o)n[l]=1}for(const o in s)o in i||(i[o]=void 0);return i}function Wt(e){e&&e.c()}function Ut(e,t,i,s){const{fragment:n,after_update:r}=e.$$;n&&n.m(t,i),s||bh(()=>{const o=e.$$.on_mount.map(tg).filter(mr);e.$$.on_destroy?e.$$.on_destroy.push(...o):vi(o),e.$$.on_mount=[]}),r.forEach(bh)}function Gt(e,t){const i=e.$$;i.fragment!==null&&(q_(i.after_update),vi(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function J_(e,t){e.$$.dirty[0]===-1&&(tn.push(e),$_(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Yt(e,t,i,s,n,r,o,a=[-1]){const l=br;rr(e);const h=e.$$={fragment:null,ctx:[],props:r,update:it,not_equal:n,bound:mu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:mu(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(h.root);let c=!1;if(h.ctx=i?i(e,t.props||{},(u,d,...f)=>{const p=f.length?f[0]:d;return h.ctx&&n(h.ctx[u],h.ctx[u]=p)&&(!h.skip_bound&&h.bound[u]&&h.bound[u](p),c&&J_(e,u)),d}):[],h.update(),c=!0,vi(h.before_update),h.fragment=s?s(h.ctx):!1,t.target){if(t.hydrate){const u=W_(t.target);h.fragment&&h.fragment.l(u),u.forEach(ot)}else h.fragment&&h.fragment.c();t.intro&&X(e.$$.fragment),Ut(e,t.target,t.anchor,t.customElement),sg()}rr(l)}class $t{$destroy(){Gt(this,1),this.$destroy=it}$on(t,i){if(!mr(i))return it;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const n=s.indexOf(i);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!H_(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ng(e,t){return function(){return e.apply(t,arguments)}}const{toString:rg}=Object.prototype,{getPrototypeOf:Sc}=Object,Tc=(e=>t=>{const i=rg.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),zi=e=>(e=e.toLowerCase(),t=>Tc(t)===e),Ua=e=>t=>typeof t===e,{isArray:Rn}=Array,yr=Ua("undefined");function Q_(e){return e!==null&&!yr(e)&&e.constructor!==null&&!yr(e.constructor)&&ns(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const og=zi("ArrayBuffer");function tb(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&og(e.buffer),t}const eb=Ua("string"),ns=Ua("function"),ag=Ua("number"),Ac=e=>e!==null&&typeof e=="object",ib=e=>e===!0||e===!1,No=e=>{if(Tc(e)!=="object")return!1;const t=Sc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},sb=zi("Date"),nb=zi("File"),rb=zi("Blob"),ob=zi("FileList"),ab=e=>Ac(e)&&ns(e.pipe),lb=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||rg.call(e)===t||ns(e.toString)&&e.toString()===t)},hb=zi("URLSearchParams"),cb=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Br(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),Rn(e))for(s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(s=0;s<o;s++)a=r[s],t.call(null,e[a],a,e)}}function lg(e,t){t=t.toLowerCase();const i=Object.keys(e);let s=i.length,n;for(;s-- >0;)if(n=i[s],t===n.toLowerCase())return n;return null}const hg=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),cg=e=>!yr(e)&&e!==hg;function yh(){const{caseless:e}=cg(this)&&this||{},t={},i=(s,n)=>{const r=e&&lg(t,n)||n;No(t[r])&&No(s)?t[r]=yh(t[r],s):No(s)?t[r]=yh({},s):Rn(s)?t[r]=s.slice():t[r]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&Br(arguments[s],i);return t}const ub=(e,t,i,{allOwnKeys:s}={})=>(Br(t,(n,r)=>{i&&ns(n)?e[r]=ng(n,i):e[r]=n},{allOwnKeys:s}),e),db=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),fb=(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},pb=(e,t,i,s)=>{let n,r,o;const a={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),r=n.length;r-- >0;)o=n[r],(!s||s(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=i!==!1&&Sc(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},gb=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return s!==-1&&s===i},mb=e=>{if(!e)return null;if(Rn(e))return e;let t=e.length;if(!ag(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},_b=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Sc(Uint8Array)),bb=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=s.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},yb=(e,t)=>{let i;const s=[];for(;(i=e.exec(t))!==null;)s.push(i);return s},xb=zi("HTMLFormElement"),vb=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,n){return s.toUpperCase()+n}),xu=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),Eb=zi("RegExp"),ug=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};Br(i,(n,r)=>{t(n,r,e)!==!1&&(s[r]=n)}),Object.defineProperties(e,s)},wb=e=>{ug(e,(t,i)=>{if(ns(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=e[i];if(ns(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Sb=(e,t)=>{const i={},s=n=>{n.forEach(r=>{i[r]=!0})};return Rn(e)?s(e):s(String(e).split(t)),i},Tb=()=>{},Ab=(e,t)=>(e=+e,Number.isFinite(e)?e:t),wl="abcdefghijklmnopqrstuvwxyz",vu="0123456789",dg={DIGIT:vu,ALPHA:wl,ALPHA_DIGIT:wl+wl.toUpperCase()+vu},Cb=(e=16,t=dg.ALPHA_DIGIT)=>{let i="";const{length:s}=t;for(;e--;)i+=t[Math.random()*s|0];return i};function Mb(e){return!!(e&&ns(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Ib=e=>{const t=new Array(10),i=(s,n)=>{if(Ac(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[n]=s;const r=Rn(s)?[]:{};return Br(s,(o,a)=>{const l=i(o,n+1);!yr(l)&&(r[a]=l)}),t[n]=void 0,r}}return s};return i(e,0)},W={isArray:Rn,isArrayBuffer:og,isBuffer:Q_,isFormData:lb,isArrayBufferView:tb,isString:eb,isNumber:ag,isBoolean:ib,isObject:Ac,isPlainObject:No,isUndefined:yr,isDate:sb,isFile:nb,isBlob:rb,isRegExp:Eb,isFunction:ns,isStream:ab,isURLSearchParams:hb,isTypedArray:_b,isFileList:ob,forEach:Br,merge:yh,extend:ub,trim:cb,stripBOM:db,inherits:fb,toFlatObject:pb,kindOf:Tc,kindOfTest:zi,endsWith:gb,toArray:mb,forEachEntry:bb,matchAll:yb,isHTMLForm:xb,hasOwnProperty:xu,hasOwnProp:xu,reduceDescriptors:ug,freezeMethods:wb,toObjectSet:Sb,toCamelCase:vb,noop:Tb,toFiniteNumber:Ab,findKey:lg,global:hg,isContextDefined:cg,ALPHABET:dg,generateString:Cb,isSpecCompliantForm:Mb,toJSONObject:Ib};function St(e,t,i,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),n&&(this.response=n)}W.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const fg=St.prototype,pg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pg[e]={value:e}});Object.defineProperties(St,pg);Object.defineProperty(fg,"isAxiosError",{value:!0});St.from=(e,t,i,s,n,r)=>{const o=Object.create(fg);return W.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),St.call(o,e.message,t,i,s,n),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const Pb=null;function xh(e){return W.isPlainObject(e)||W.isArray(e)}function gg(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function Eu(e,t,i){return e?e.concat(t).map(function(n,r){return n=gg(n),!i&&r?"["+n+"]":n}).join(i?".":""):t}function Rb(e){return W.isArray(e)&&!e.some(xh)}const Db=W.toFlatObject(W,{},null,function(t){return/^is[A-Z]/.test(t)});function Ga(e,t,i){if(!W.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=W.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!W.isUndefined(m[g])});const s=i.metaTokens,n=i.visitor||c,r=i.dots,o=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(n))throw new TypeError("visitor must be a function");function h(p){if(p===null)return"";if(W.isDate(p))return p.toISOString();if(!l&&W.isBlob(p))throw new St("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(p)||W.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,g,m){let _=p;if(p&&!m&&typeof p=="object"){if(W.endsWith(g,"{}"))g=s?g:g.slice(0,-2),p=JSON.stringify(p);else if(W.isArray(p)&&Rb(p)||(W.isFileList(p)||W.endsWith(g,"[]"))&&(_=W.toArray(p)))return g=gg(g),_.forEach(function(y,E){!(W.isUndefined(y)||y===null)&&t.append(o===!0?Eu([g],E,r):o===null?g:g+"[]",h(y))}),!1}return xh(p)?!0:(t.append(Eu(m,g,r),h(p)),!1)}const u=[],d=Object.assign(Db,{defaultVisitor:c,convertValue:h,isVisitable:xh});function f(p,g){if(!W.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(p),W.forEach(p,function(_,b){(!(W.isUndefined(_)||_===null)&&n.call(t,_,W.isString(b)?b.trim():b,g,d))===!0&&f(_,g?g.concat(b):[b])}),u.pop()}}if(!W.isObject(e))throw new TypeError("data must be an object");return f(e),t}function wu(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Cc(e,t){this._pairs=[],e&&Ga(e,this,t)}const mg=Cc.prototype;mg.append=function(t,i){this._pairs.push([t,i])};mg.toString=function(t){const i=t?function(s){return t.call(this,s,wu)}:wu;return this._pairs.map(function(n){return i(n[0])+"="+i(n[1])},"").join("&")};function Ob(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _g(e,t,i){if(!t)return e;const s=i&&i.encode||Ob,n=i&&i.serialize;let r;if(n?r=n(t,i):r=W.isURLSearchParams(t)?t.toString():new Cc(t,i).toString(s),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class kb{constructor(){this.handlers=[]}use(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){W.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Su=kb,bg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Fb=typeof URLSearchParams<"u"?URLSearchParams:Cc,Bb=typeof FormData<"u"?FormData:null,Lb=typeof Blob<"u"?Blob:null,Nb=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Ub=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ui={isBrowser:!0,classes:{URLSearchParams:Fb,FormData:Bb,Blob:Lb},isStandardBrowserEnv:Nb,isStandardBrowserWebWorkerEnv:Ub,protocols:["http","https","file","blob","url","data"]};function Gb(e,t){return Ga(e,new ui.classes.URLSearchParams,Object.assign({visitor:function(i,s,n,r){return ui.isNode&&W.isBuffer(i)?(this.append(s,i.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function Hb(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function zb(e){const t={},i=Object.keys(e);let s;const n=i.length;let r;for(s=0;s<n;s++)r=i[s],t[r]=e[r];return t}function yg(e){function t(i,s,n,r){let o=i[r++];const a=Number.isFinite(+o),l=r>=i.length;return o=!o&&W.isArray(n)?n.length:o,l?(W.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!a):((!n[o]||!W.isObject(n[o]))&&(n[o]=[]),t(i,s,n[o],r)&&W.isArray(n[o])&&(n[o]=zb(n[o])),!a)}if(W.isFormData(e)&&W.isFunction(e.entries)){const i={};return W.forEachEntry(e,(s,n)=>{t(Hb(s),n,i,0)}),i}return null}const Vb={"Content-Type":void 0};function Wb(e,t,i){if(W.isString(e))try{return(t||JSON.parse)(e),W.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}const Ha={transitional:bg,adapter:["xhr","http"],transformRequest:[function(t,i){const s=i.getContentType()||"",n=s.indexOf("application/json")>-1,r=W.isObject(t);if(r&&W.isHTMLForm(t)&&(t=new FormData(t)),W.isFormData(t))return n&&n?JSON.stringify(yg(t)):t;if(W.isArrayBuffer(t)||W.isBuffer(t)||W.isStream(t)||W.isFile(t)||W.isBlob(t))return t;if(W.isArrayBufferView(t))return t.buffer;if(W.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Gb(t,this.formSerializer).toString();if((a=W.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ga(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||n?(i.setContentType("application/json",!1),Wb(t)):t}],transformResponse:[function(t){const i=this.transitional||Ha.transitional,s=i&&i.forcedJSONParsing,n=this.responseType==="json";if(t&&W.isString(t)&&(s&&!this.responseType||n)){const o=!(i&&i.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?St.from(a,St.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ui.classes.FormData,Blob:ui.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};W.forEach(["delete","get","head"],function(t){Ha.headers[t]={}});W.forEach(["post","put","patch"],function(t){Ha.headers[t]=W.merge(Vb)});const Mc=Ha,jb=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xb=e=>{const t={};let i,s,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),i=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!i||t[i]&&jb[i])&&(i==="set-cookie"?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)}),t},Tu=Symbol("internals");function Ln(e){return e&&String(e).trim().toLowerCase()}function Uo(e){return e===!1||e==null?e:W.isArray(e)?e.map(Uo):String(e)}function Yb(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}const $b=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Sl(e,t,i,s,n){if(W.isFunction(s))return s.call(this,t,i);if(n&&(t=i),!!W.isString(t)){if(W.isString(s))return t.indexOf(s)!==-1;if(W.isRegExp(s))return s.test(t)}}function Kb(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,s)=>i.toUpperCase()+s)}function qb(e,t){const i=W.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+i,{value:function(n,r,o){return this[s].call(this,t,n,r,o)},configurable:!0})})}class za{constructor(t){t&&this.set(t)}set(t,i,s){const n=this;function r(a,l,h){const c=Ln(l);if(!c)throw new Error("header name must be a non-empty string");const u=W.findKey(n,c);(!u||n[u]===void 0||h===!0||h===void 0&&n[u]!==!1)&&(n[u||l]=Uo(a))}const o=(a,l)=>W.forEach(a,(h,c)=>r(h,c,l));return W.isPlainObject(t)||t instanceof this.constructor?o(t,i):W.isString(t)&&(t=t.trim())&&!$b(t)?o(Xb(t),i):t!=null&&r(i,t,s),this}get(t,i){if(t=Ln(t),t){const s=W.findKey(this,t);if(s){const n=this[s];if(!i)return n;if(i===!0)return Yb(n);if(W.isFunction(i))return i.call(this,n,s);if(W.isRegExp(i))return i.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=Ln(t),t){const s=W.findKey(this,t);return!!(s&&this[s]!==void 0&&(!i||Sl(this,this[s],s,i)))}return!1}delete(t,i){const s=this;let n=!1;function r(o){if(o=Ln(o),o){const a=W.findKey(s,o);a&&(!i||Sl(s,s[a],a,i))&&(delete s[a],n=!0)}}return W.isArray(t)?t.forEach(r):r(t),n}clear(t){const i=Object.keys(this);let s=i.length,n=!1;for(;s--;){const r=i[s];(!t||Sl(this,this[r],r,t,!0))&&(delete this[r],n=!0)}return n}normalize(t){const i=this,s={};return W.forEach(this,(n,r)=>{const o=W.findKey(s,r);if(o){i[o]=Uo(n),delete i[r];return}const a=t?Kb(r):String(r).trim();a!==r&&delete i[r],i[a]=Uo(n),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return W.forEach(this,(s,n)=>{s!=null&&s!==!1&&(i[n]=t&&W.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const s=new this(t);return i.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[Tu]=this[Tu]={accessors:{}}).accessors,n=this.prototype;function r(o){const a=Ln(o);s[a]||(qb(n,o),s[a]=!0)}return W.isArray(t)?t.forEach(r):r(t),this}}za.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.freezeMethods(za.prototype);W.freezeMethods(za);const Ui=za;function Tl(e,t){const i=this||Mc,s=t||i,n=Ui.from(s.headers);let r=s.data;return W.forEach(e,function(a){r=a.call(i,r,n.normalize(),t?t.status:void 0)}),n.normalize(),r}function xg(e){return!!(e&&e.__CANCEL__)}function Lr(e,t,i){St.call(this,e??"canceled",St.ERR_CANCELED,t,i),this.name="CanceledError"}W.inherits(Lr,St,{__CANCEL__:!0});function Zb(e,t,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?e(i):t(new St("Request failed with status code "+i.status,[St.ERR_BAD_REQUEST,St.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const Jb=ui.isStandardBrowserEnv?function(){return{write:function(i,s,n,r,o,a){const l=[];l.push(i+"="+encodeURIComponent(s)),W.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),W.isString(r)&&l.push("path="+r),W.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(i){const s=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Qb(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ty(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function vg(e,t){return e&&!Qb(t)?ty(e,t):t}const ey=ui.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let s;function n(r){let o=r;return t&&(i.setAttribute("href",o),o=i.href),i.setAttribute("href",o),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return s=n(window.location.href),function(o){const a=W.isString(o)?n(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}();function iy(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function sy(e,t){e=e||10;const i=new Array(e),s=new Array(e);let n=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const h=Date.now(),c=s[r];o||(o=h),i[n]=l,s[n]=h;let u=r,d=0;for(;u!==n;)d+=i[u++],u=u%e;if(n=(n+1)%e,n===r&&(r=(r+1)%e),h-o<t)return;const f=c&&h-c;return f?Math.round(d*1e3/f):void 0}}function Au(e,t){let i=0;const s=sy(50,250);return n=>{const r=n.loaded,o=n.lengthComputable?n.total:void 0,a=r-i,l=s(a),h=r<=o;i=r;const c={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&h?(o-r)/l:void 0,event:n};c[t?"download":"upload"]=!0,e(c)}}const ny=typeof XMLHttpRequest<"u",ry=ny&&function(e){return new Promise(function(i,s){let n=e.data;const r=Ui.from(e.headers).normalize(),o=e.responseType;let a;function l(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}W.isFormData(n)&&(ui.isStandardBrowserEnv||ui.isStandardBrowserWebWorkerEnv)&&r.setContentType(!1);let h=new XMLHttpRequest;if(e.auth){const f=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(f+":"+p))}const c=vg(e.baseURL,e.url);h.open(e.method.toUpperCase(),_g(c,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function u(){if(!h)return;const f=Ui.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:f,config:e,request:h};Zb(function(_){i(_),l()},function(_){s(_),l()},g),h=null}if("onloadend"in h?h.onloadend=u:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(u)},h.onabort=function(){h&&(s(new St("Request aborted",St.ECONNABORTED,e,h)),h=null)},h.onerror=function(){s(new St("Network Error",St.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let p=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const g=e.transitional||bg;e.timeoutErrorMessage&&(p=e.timeoutErrorMessage),s(new St(p,g.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,e,h)),h=null},ui.isStandardBrowserEnv){const f=(e.withCredentials||ey(c))&&e.xsrfCookieName&&Jb.read(e.xsrfCookieName);f&&r.set(e.xsrfHeaderName,f)}n===void 0&&r.setContentType(null),"setRequestHeader"in h&&W.forEach(r.toJSON(),function(p,g){h.setRequestHeader(g,p)}),W.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),o&&o!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",Au(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",Au(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=f=>{h&&(s(!f||f.type?new Lr(null,e,h):f),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const d=iy(c);if(d&&ui.protocols.indexOf(d)===-1){s(new St("Unsupported protocol "+d+":",St.ERR_BAD_REQUEST,e));return}h.send(n||null)})},Go={http:Pb,xhr:ry};W.forEach(Go,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const oy={getAdapter:e=>{e=W.isArray(e)?e:[e];const{length:t}=e;let i,s;for(let n=0;n<t&&(i=e[n],!(s=W.isString(i)?Go[i.toLowerCase()]:i));n++);if(!s)throw s===!1?new St(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(W.hasOwnProp(Go,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!W.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:Go};function Al(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Lr(null,e)}function Cu(e){return Al(e),e.headers=Ui.from(e.headers),e.data=Tl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),oy.getAdapter(e.adapter||Mc.adapter)(e).then(function(s){return Al(e),s.data=Tl.call(e,e.transformResponse,s),s.headers=Ui.from(s.headers),s},function(s){return xg(s)||(Al(e),s&&s.response&&(s.response.data=Tl.call(e,e.transformResponse,s.response),s.response.headers=Ui.from(s.response.headers))),Promise.reject(s)})}const Mu=e=>e instanceof Ui?e.toJSON():e;function wn(e,t){t=t||{};const i={};function s(h,c,u){return W.isPlainObject(h)&&W.isPlainObject(c)?W.merge.call({caseless:u},h,c):W.isPlainObject(c)?W.merge({},c):W.isArray(c)?c.slice():c}function n(h,c,u){if(W.isUndefined(c)){if(!W.isUndefined(h))return s(void 0,h,u)}else return s(h,c,u)}function r(h,c){if(!W.isUndefined(c))return s(void 0,c)}function o(h,c){if(W.isUndefined(c)){if(!W.isUndefined(h))return s(void 0,h)}else return s(void 0,c)}function a(h,c,u){if(u in t)return s(h,c);if(u in e)return s(void 0,h)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(h,c)=>n(Mu(h),Mu(c),!0)};return W.forEach(Object.keys(e).concat(Object.keys(t)),function(c){const u=l[c]||n,d=u(e[c],t[c],c);W.isUndefined(d)&&u!==a||(i[c]=d)}),i}const Eg="1.3.5",Ic={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ic[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Iu={};Ic.transitional=function(t,i,s){function n(r,o){return"[Axios v"+Eg+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(t===!1)throw new St(n(o," has been removed"+(i?" in "+i:"")),St.ERR_DEPRECATED);return i&&!Iu[o]&&(Iu[o]=!0,console.warn(n(o," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(r,o,a):!0}};function ay(e,t,i){if(typeof e!="object")throw new St("options must be an object",St.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const r=s[n],o=t[r];if(o){const a=e[r],l=a===void 0||o(a,r,e);if(l!==!0)throw new St("option "+r+" must be "+l,St.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new St("Unknown option "+r,St.ERR_BAD_OPTION)}}const vh={assertOptions:ay,validators:Ic},ji=vh.validators;class oa{constructor(t){this.defaults=t,this.interceptors={request:new Su,response:new Su}}request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=wn(this.defaults,i);const{transitional:s,paramsSerializer:n,headers:r}=i;s!==void 0&&vh.assertOptions(s,{silentJSONParsing:ji.transitional(ji.boolean),forcedJSONParsing:ji.transitional(ji.boolean),clarifyTimeoutError:ji.transitional(ji.boolean)},!1),n!=null&&(W.isFunction(n)?i.paramsSerializer={serialize:n}:vh.assertOptions(n,{encode:ji.function,serialize:ji.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let o;o=r&&W.merge(r.common,r[i.method]),o&&W.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),i.headers=Ui.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(i)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const h=[];this.interceptors.response.forEach(function(g){h.push(g.fulfilled,g.rejected)});let c,u=0,d;if(!l){const p=[Cu.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,h),d=p.length,c=Promise.resolve(i);u<d;)c=c.then(p[u++],p[u++]);return c}d=a.length;let f=i;for(u=0;u<d;){const p=a[u++],g=a[u++];try{f=p(f)}catch(m){g.call(this,m);break}}try{c=Cu.call(this,f)}catch(p){return Promise.reject(p)}for(u=0,d=h.length;u<d;)c=c.then(h[u++],h[u++]);return c}getUri(t){t=wn(this.defaults,t);const i=vg(t.baseURL,t.url);return _g(i,t.params,t.paramsSerializer)}}W.forEach(["delete","get","head","options"],function(t){oa.prototype[t]=function(i,s){return this.request(wn(s||{},{method:t,url:i,data:(s||{}).data}))}});W.forEach(["post","put","patch"],function(t){function i(s){return function(r,o,a){return this.request(wn(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}oa.prototype[t]=i(),oa.prototype[t+"Form"]=i(!0)});const Ho=oa;class Pc{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const s=this;this.promise.then(n=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](n);s._listeners=null}),this.promise.then=n=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(n);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,a){s.reason||(s.reason=new Lr(r,o,a),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new Pc(function(n){t=n}),cancel:t}}}const ly=Pc;function hy(e){return function(i){return e.apply(null,i)}}function cy(e){return W.isObject(e)&&e.isAxiosError===!0}const Eh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Eh).forEach(([e,t])=>{Eh[t]=e});const uy=Eh;function wg(e){const t=new Ho(e),i=ng(Ho.prototype.request,t);return W.extend(i,Ho.prototype,t,{allOwnKeys:!0}),W.extend(i,t,null,{allOwnKeys:!0}),i.create=function(n){return wg(wn(e,n))},i}const te=wg(Mc);te.Axios=Ho;te.CanceledError=Lr;te.CancelToken=ly;te.isCancel=xg;te.VERSION=Eg;te.toFormData=Ga;te.AxiosError=St;te.Cancel=te.CanceledError;te.all=function(t){return Promise.all(t)};te.spread=hy;te.isAxiosError=cy;te.mergeConfig=wn;te.AxiosHeaders=Ui;te.formToJSON=e=>yg(W.isHTMLForm(e)?new FormData(e):e);te.HttpStatusCode=uy;te.default=te;const Rc=te;var un=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wh={},dy={get exports(){return wh},set exports(e){wh=e}};(function(e,t){(function(i,s){e.exports=s()})(un,function(){var i=1e3,s=6e4,n=36e5,r="millisecond",o="second",a="minute",l="hour",h="day",c="week",u="month",d="quarter",f="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var v=["th","st","nd","rd"],w=O%100;return"["+O+(v[(w-20)%10]||v[w]||v[0])+"]"}},y=function(O,v,w){var B=String(O);return!B||B.length>=v?O:""+Array(v+1-B.length).join(w)+O},E={s:y,z:function(O){var v=-O.utcOffset(),w=Math.abs(v),B=Math.floor(w/60),P=w%60;return(v<=0?"+":"-")+y(B,2,"0")+":"+y(P,2,"0")},m:function O(v,w){if(v.date()<w.date())return-O(w,v);var B=12*(w.year()-v.year())+(w.month()-v.month()),P=v.clone().add(B,u),N=w-P<0,k=v.clone().add(B+(N?-1:1),u);return+(-(B+(w-P)/(N?P-k:k-P))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:u,y:f,w:c,d:h,D:p,h:l,m:a,s:o,ms:r,Q:d}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},x="en",T={};T[x]=b;var A=function(O){return O instanceof S},C=function O(v,w,B){var P;if(!v)return x;if(typeof v=="string"){var N=v.toLowerCase();T[N]&&(P=N),w&&(T[N]=w,P=N);var k=v.split("-");if(!P&&k.length>1)return O(k[0])}else{var D=v.name;T[D]=v,P=D}return!B&&P&&(x=P),P||!B&&x},R=function(O,v){if(A(O))return O.clone();var w=typeof v=="object"?v:{};return w.date=O,w.args=arguments,new S(w)},I=E;I.l=C,I.i=A,I.w=function(O,v){return R(O,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var S=function(){function O(w){this.$L=C(w.locale,null,!0),this.parse(w)}var v=O.prototype;return v.parse=function(w){this.$d=function(B){var P=B.date,N=B.utc;if(P===null)return new Date(NaN);if(I.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var k=P.match(m);if(k){var D=k[2]-1||0,z=(k[7]||"0").substring(0,3);return N?new Date(Date.UTC(k[1],D,k[3]||1,k[4]||0,k[5]||0,k[6]||0,z)):new Date(k[1],D,k[3]||1,k[4]||0,k[5]||0,k[6]||0,z)}}return new Date(P)}(w),this.$x=w.x||{},this.init()},v.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},v.$utils=function(){return I},v.isValid=function(){return this.$d.toString()!==g},v.isSame=function(w,B){var P=R(w);return this.startOf(B)<=P&&P<=this.endOf(B)},v.isAfter=function(w,B){return R(w)<this.startOf(B)},v.isBefore=function(w,B){return this.endOf(B)<R(w)},v.$g=function(w,B,P){return I.u(w)?this[B]:this.set(P,w)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(w,B){var P=this,N=!!I.u(B)||B,k=I.p(w),D=function($,nt){var K=I.w(P.$u?Date.UTC(P.$y,nt,$):new Date(P.$y,nt,$),P);return N?K:K.endOf(h)},z=function($,nt){return I.w(P.toDate()[$].apply(P.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(nt)),P)},j=this.$W,J=this.$M,H=this.$D,L="set"+(this.$u?"UTC":"");switch(k){case f:return N?D(1,0):D(31,11);case u:return N?D(1,J):D(0,J+1);case c:var U=this.$locale().weekStart||0,V=(j<U?j+7:j)-U;return D(N?H-V:H+(6-V),J);case h:case p:return z(L+"Hours",0);case l:return z(L+"Minutes",1);case a:return z(L+"Seconds",2);case o:return z(L+"Milliseconds",3);default:return this.clone()}},v.endOf=function(w){return this.startOf(w,!1)},v.$set=function(w,B){var P,N=I.p(w),k="set"+(this.$u?"UTC":""),D=(P={},P[h]=k+"Date",P[p]=k+"Date",P[u]=k+"Month",P[f]=k+"FullYear",P[l]=k+"Hours",P[a]=k+"Minutes",P[o]=k+"Seconds",P[r]=k+"Milliseconds",P)[N],z=N===h?this.$D+(B-this.$W):B;if(N===u||N===f){var j=this.clone().set(p,1);j.$d[D](z),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else D&&this.$d[D](z);return this.init(),this},v.set=function(w,B){return this.clone().$set(w,B)},v.get=function(w){return this[I.p(w)]()},v.add=function(w,B){var P,N=this;w=Number(w);var k=I.p(B),D=function(J){var H=R(N);return I.w(H.date(H.date()+Math.round(J*w)),N)};if(k===u)return this.set(u,this.$M+w);if(k===f)return this.set(f,this.$y+w);if(k===h)return D(1);if(k===c)return D(7);var z=(P={},P[a]=s,P[l]=n,P[o]=i,P)[k]||1,j=this.$d.getTime()+w*z;return I.w(j,this)},v.subtract=function(w,B){return this.add(-1*w,B)},v.format=function(w){var B=this,P=this.$locale();if(!this.isValid())return P.invalidDate||g;var N=w||"YYYY-MM-DDTHH:mm:ssZ",k=I.z(this),D=this.$H,z=this.$m,j=this.$M,J=P.weekdays,H=P.months,L=function(nt,K,ct,bt){return nt&&(nt[K]||nt(B,N))||ct[K].slice(0,bt)},U=function(nt){return I.s(D%12||12,nt,"0")},V=P.meridiem||function(nt,K,ct){var bt=nt<12?"AM":"PM";return ct?bt.toLowerCase():bt},$={YY:String(this.$y).slice(-2),YYYY:this.$y,M:j+1,MM:I.s(j+1,2,"0"),MMM:L(P.monthsShort,j,H,3),MMMM:L(H,j),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:L(P.weekdaysMin,this.$W,J,2),ddd:L(P.weekdaysShort,this.$W,J,3),dddd:J[this.$W],H:String(D),HH:I.s(D,2,"0"),h:U(1),hh:U(2),a:V(D,z,!0),A:V(D,z,!1),m:String(z),mm:I.s(z,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:k};return N.replace(_,function(nt,K){return K||$[nt]||k.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(w,B,P){var N,k=I.p(B),D=R(w),z=(D.utcOffset()-this.utcOffset())*s,j=this-D,J=I.m(this,D);return J=(N={},N[f]=J/12,N[u]=J,N[d]=J/3,N[c]=(j-z)/6048e5,N[h]=(j-z)/864e5,N[l]=j/n,N[a]=j/s,N[o]=j/i,N)[k]||j,P?J:I.a(J)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return T[this.$L]},v.locale=function(w,B){if(!w)return this.$L;var P=this.clone(),N=C(w,B,!0);return N&&(P.$L=N),P},v.clone=function(){return I.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},O}(),F=S.prototype;return R.prototype=F,[["$ms",r],["$s",o],["$m",a],["$H",l],["$W",h],["$M",u],["$y",f],["$D",p]].forEach(function(O){F[O[1]]=function(v){return this.$g(v,O[0],O[1])}}),R.extend=function(O,v){return O.$i||(O(v,S,R),O.$i=!0),R},R.locale=C,R.isDayjs=A,R.unix=function(O){return R(1e3*O)},R.en=T[x],R.Ls=T,R.p={},R})})(dy);const di=wh;var Sh={},fy={get exports(){return Sh},set exports(e){Sh=e}};(function(e,t){(function(i,s){e.exports=s()})(un,function(){var i="minute",s=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,o,a){var l=o.prototype;a.utc=function(g){var m={date:g,utc:!0,args:arguments};return new o(m)},l.utc=function(g){var m=a(this.toDate(),{locale:this.$L,utc:!0});return g?m.add(this.utcOffset(),i):m},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var h=l.parse;l.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),h.call(this,g)};var c=l.init;l.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else c.call(this)};var u=l.utcOffset;l.utcOffset=function(g,m){var _=this.$utils().u;if(_(g))return this.$u?0:_(this.$offset)?u.call(this):this.$offset;if(typeof g=="string"&&(g=function(x){x===void 0&&(x="");var T=x.match(s);if(!T)return null;var A=(""+T[0]).match(n)||["-",0,0],C=A[0],R=60*+A[1]+ +A[2];return R===0?0:C==="+"?R:-R}(g),g===null))return this;var b=Math.abs(g)<=16?60*g:g,y=this;if(m)return y.$offset=b,y.$u=g===0,y;if(g!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(y=this.local().add(b+E,i)).$offset=b,y.$x.$localOffset=E}else y=this.utc();return y};var d=l.format;l.format=function(g){var m=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,m)},l.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*g},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var f=l.toDate;l.toDate=function(g){return g==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var p=l.diff;l.diff=function(g,m,_){if(g&&this.$u===g.$u)return p.call(this,g,m,_);var b=this.local(),y=a(g).local();return p.call(b,y,m,_)}}})})(fy);const Sg=Sh;var Th={},py={get exports(){return Th},set exports(e){Th=e}};(function(e,t){(function(i,s){e.exports=s()})(un,function(){var i={year:0,month:1,day:2,hour:3,minute:4,second:5},s={};return function(n,r,o){var a,l=function(d,f,p){p===void 0&&(p={});var g=new Date(d),m=function(_,b){b===void 0&&(b={});var y=b.timeZoneName||"short",E=_+"|"+y,x=s[E];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:_,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:y}),s[E]=x),x}(f,p);return m.formatToParts(g)},h=function(d,f){for(var p=l(d,f),g=[],m=0;m<p.length;m+=1){var _=p[m],b=_.type,y=_.value,E=i[b];E>=0&&(g[E]=parseInt(y,10))}var x=g[3],T=x===24?0:x,A=g[0]+"-"+g[1]+"-"+g[2]+" "+T+":"+g[4]+":"+g[5]+":000",C=+d;return(o.utc(A).valueOf()-(C-=C%1e3))/6e4},c=r.prototype;c.tz=function(d,f){d===void 0&&(d=a);var p=this.utcOffset(),g=this.toDate(),m=g.toLocaleString("en-US",{timeZone:d}),_=Math.round((g-new Date(m))/1e3/60),b=o(m).$set("millisecond",this.$ms).utcOffset(15*-Math.round(g.getTimezoneOffset()/15)-_,!0);if(f){var y=b.utcOffset();b=b.add(p-y,"minute")}return b.$x.$timezone=d,b},c.offsetName=function(d){var f=this.$x.$timezone||o.tz.guess(),p=l(this.valueOf(),f,{timeZoneName:d}).find(function(g){return g.type.toLowerCase()==="timezonename"});return p&&p.value};var u=c.startOf;c.startOf=function(d,f){if(!this.$x||!this.$x.$timezone)return u.call(this,d,f);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return u.call(p,d,f).tz(this.$x.$timezone,!0)},o.tz=function(d,f,p){var g=p&&f,m=p||f||a,_=h(+o(),m);if(typeof d!="string")return o(d).tz(m);var b=function(T,A,C){var R=T-60*A*1e3,I=h(R,C);if(A===I)return[R,A];var S=h(R-=60*(I-A)*1e3,C);return I===S?[R,I]:[T-60*Math.min(I,S)*1e3,Math.max(I,S)]}(o.utc(d,g).valueOf(),_,m),y=b[0],E=b[1],x=o(y).utcOffset(E);return x.$x.$timezone=m,x},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(py);const Tg=Th;function gy(e){let t;return{c(){t=Z("div"),t.innerHTML=`<h1>💀</h1> 
	<h1>Uh oh...</h1> 
	<p class="svelte-1n84pnv">Something went wrong.</p> 
	<p class="svelte-1n84pnv">Try refreshing the page.</p>`,G(t,"class","error svelte-1n84pnv")},m(i,s){at(i,t,s)},p:it,i:it,o:it,d(i){i&&ot(t)}}}let my=class extends $t{constructor(t){super(),Yt(this,t,null,gy,Vt,{})}};const _y="/assets/logo-b904ad33.svg",by="/assets/help-icon-1ee29c03.svg",$s=[];function Be(e,t=it){let i;const s=new Set;function n(a){if(Vt(e,a)&&(e=a,i)){const l=!$s.length;for(const h of s)h[1](),$s.push(h,e);if(l){for(let h=0;h<$s.length;h+=2)$s[h][0]($s[h+1]);$s.length=0}}}function r(a){n(a(e))}function o(a,l=it){const h=[a,l];return s.add(h),s.size===1&&(i=t(n)||it),a(e),()=>{s.delete(h),s.size===0&&i&&(i(),i=null)}}return{set:n,update:r,subscribe:o}}const Ag=Be(null),aa=Be(!1),Dc=Be(!1);function yy(e){let t,i,s,n,r;return{c(){t=Z("button"),i=Z("img"),yi(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${e[1].toLowerCase()}.svg`)||G(i,"src",s),G(i,"alt","flag"),G(i,"class","svelte-1kk75fg"),G(t,"class","flag svelte-1kk75fg")},m(o,a){at(o,t,a),q(t,i),n||(r=Rt(t,"click",e[3]),n=!0)},p:it,d(o){o&&ot(t),n=!1,r()}}}function xy(e){let t,i,s,n,r;return{c(){t=Z("button"),i=Z("img"),yi(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${e[0].toLowerCase()}.svg`)||G(i,"src",s),G(i,"alt","flag"),G(i,"class","svelte-1kk75fg"),G(t,"class","flag svelte-1kk75fg")},m(o,a){at(o,t,a),q(t,i),n||(r=Rt(t,"click",e[2]),n=!0)},p(o,a){a&1&&!yi(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${o[0].toLowerCase()}.svg`)&&G(i,"src",s)},d(o){o&&ot(t),n=!1,r()}}}function vy(e){let t,i,s,n,r,o,a,l,h,c,u,d,f;function p(_,b){if(_[0])return xy;if(_[1])return yy}let g=p(e),m=g&&g(e);return{c(){t=Z("header"),i=Z("div"),s=Z("img"),r=yt(),o=Z("h1"),o.textContent="KUBEL.io",a=yt(),m&&m.c(),l=yt(),h=Z("button"),c=Z("img"),yi(s.src,n=_y)||G(s,"src",n),G(s,"alt","Kubel"),G(s,"class","svelte-1kk75fg"),G(o,"class","svelte-1kk75fg"),G(i,"class","logo svelte-1kk75fg"),yi(c.src,u=by)||G(c,"src",u),G(c,"alt","help"),G(c,"class","svelte-1kk75fg"),G(h,"class","help svelte-1kk75fg"),G(t,"class","svelte-1kk75fg")},m(_,b){at(_,t,b),q(t,i),q(i,s),q(i,r),q(i,o),q(t,a),m&&m.m(t,null),q(t,l),q(t,h),q(h,c),d||(f=Rt(h,"click",e[4]),d=!0)},p(_,[b]){g===(g=p(_))&&m?m.p(_,b):(m&&m.d(1),m=g&&g(_),m&&(m.c(),m.m(t,l)))},i:it,o:it,d(_){_&&ot(t),m&&m.d(),d=!1,f()}}}function Ey(e,t,i){let s;Ye(e,Ag,l=>i(0,s=l));let n=localStorage.getItem("userCountry");return[s,n,()=>aa.set(!0),()=>aa.set(!0),()=>{Dc.set(!0)}]}class wy extends $t{constructor(t){super(),Yt(this,t,Ey,vy,Vt,{})}}const Cg=Be(null),an=Be(0),or=Be(!1),la=Be(!0),Ah=Be(!1),Sy=Be([[]]),ha=Be(),ca=Be(!1),Ch=Be(null);var Gs=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Gs||{}),Mg=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(Mg||{}),Mh=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Mh||{}),ft=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(ft||{}),fi=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(fi||{}),Y=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(Y||{}),dn=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(dn||{}),dt=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(dt||{}),Ih=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(Ih||{}),Fi=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(Fi||{}),ts=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(ts||{}),xi=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(xi||{}),si=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(si||{}),hi=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(hi||{}),Oc=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(Oc||{}),Re=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(Re||{}),Zt=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(Zt||{}),qt=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(qt||{}),gi=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(gi||{});const Ty={createCanvas:(e,t)=>{const i=document.createElement("canvas");return i.width=e,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},Q={ADAPTER:Ty,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Cl=/iPhone/i,Pu=/iPod/i,Ru=/iPad/i,Du=/\biOS-universal(?:.+)Mac\b/i,Ml=/\bAndroid(?:.+)Mobile\b/i,Ou=/Android/i,Ks=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Zr=/Silk/i,Mi=/Windows Phone/i,ku=/\bWindows(?:.+)ARM\b/i,Fu=/BlackBerry/i,Bu=/BB10/i,Lu=/Opera Mini/i,Nu=/\b(CriOS|Chrome)(?:.+)Mobile/i,Uu=/Mobile(?:.+)Firefox\b/i,Gu=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function Ay(e){return function(t){return t.test(e)}}function Hu(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var i=t.userAgent,s=i.split("[FBAN");typeof s[1]<"u"&&(i=s[0]),s=i.split("Twitter"),typeof s[1]<"u"&&(i=s[0]);var n=Ay(i),r={apple:{phone:n(Cl)&&!n(Mi),ipod:n(Pu),tablet:!n(Cl)&&(n(Ru)||Gu(t))&&!n(Mi),universal:n(Du),device:(n(Cl)||n(Pu)||n(Ru)||n(Du)||Gu(t))&&!n(Mi)},amazon:{phone:n(Ks),tablet:!n(Ks)&&n(Zr),device:n(Ks)||n(Zr)},android:{phone:!n(Mi)&&n(Ks)||!n(Mi)&&n(Ml),tablet:!n(Mi)&&!n(Ks)&&!n(Ml)&&(n(Zr)||n(Ou)),device:!n(Mi)&&(n(Ks)||n(Zr)||n(Ml)||n(Ou))||n(/\bokhttp\b/i)},windows:{phone:n(Mi),tablet:n(ku),device:n(Mi)||n(ku)},other:{blackberry:n(Fu),blackberry10:n(Bu),opera:n(Lu),firefox:n(Uu),chrome:n(Nu),device:n(Fu)||n(Bu)||n(Lu)||n(Uu)||n(Nu)},any:!1,phone:!1,tablet:!1};return r.any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}const Cy=Hu.default??Hu,Bi=Cy(globalThis.navigator);Q.RETINA_PREFIX=/@([0-9\.]+)x/;Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Os={},My={get exports(){return Os},set exports(e){Os=e}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1));function n(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function r(l,h,c,u,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new n(c,u||l,d),p=i?i+h:h;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new s:delete l._events[h]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],c,u;if(this._eventsCount===0)return h;for(u in c=this._events)t.call(c,u)&&h.push(i?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},a.prototype.listeners=function(h){var c=i?i+h:h,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},a.prototype.listenerCount=function(h){var c=i?i+h:h,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(h,c,u,d,f,p){var g=i?i+h:h;if(!this._events[g])return!1;var m=this._events[g],_=arguments.length,b,y;if(m.fn){switch(m.once&&this.removeListener(h,m.fn,void 0,!0),_){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,u),!0;case 4:return m.fn.call(m.context,c,u,d),!0;case 5:return m.fn.call(m.context,c,u,d,f),!0;case 6:return m.fn.call(m.context,c,u,d,f,p),!0}for(y=1,b=new Array(_-1);y<_;y++)b[y-1]=arguments[y];m.fn.apply(m.context,b)}else{var E=m.length,x;for(y=0;y<E;y++)switch(m[y].once&&this.removeListener(h,m[y].fn,void 0,!0),_){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,c);break;case 3:m[y].fn.call(m[y].context,c,u);break;case 4:m[y].fn.call(m[y].context,c,u,d);break;default:if(!b)for(x=1,b=new Array(_-1);x<_;x++)b[x-1]=arguments[x];m[y].fn.apply(m[y].context,b)}}return!0},a.prototype.on=function(h,c,u){return r(this,h,c,u,!1)},a.prototype.once=function(h,c,u){return r(this,h,c,u,!0)},a.prototype.removeListener=function(h,c,u,d){var f=i?i+h:h;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!d||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var g=0,m=[],_=p.length;g<_;g++)(p[g].fn!==c||d&&!p[g].once||u&&p[g].context!==u)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(h){var c;return h?(c=i?i+h:h,this._events[c]&&o(this,c)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a})(My);var ua={},Iy={get exports(){return ua},set exports(e){ua=e}};Iy.exports=Va;ua.default=Va;function Va(e,t,i){i=i||2;var s=t&&t.length,n=s?t[0]*i:e.length,r=Ig(e,0,n,i,!0),o=[];if(!r||r.next===r.prev)return o;var a,l,h,c,u,d,f;if(s&&(r=ky(e,t,r,i)),e.length>80*i){a=h=e[0],l=c=e[1];for(var p=i;p<n;p+=i)u=e[p],d=e[p+1],u<a&&(a=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);f=Math.max(h-a,c-l),f=f!==0?32767/f:0}return xr(r,o,i,a,l,f,0),o}function Ig(e,t,i,s,n){var r,o;if(n===Dh(e,t,i,s)>0)for(r=t;r<i;r+=s)o=zu(r,e[r],e[r+1],o);else for(r=i-s;r>=t;r-=s)o=zu(r,e[r],e[r+1],o);return o&&Wa(o,o.next)&&(Er(o),o=o.next),o}function ks(e,t){if(!e)return e;t||(t=e);var i=e,s;do if(s=!1,!i.steiner&&(Wa(i,i.next)||Ht(i.prev,i,i.next)===0)){if(Er(i),i=t=i.prev,i===i.next)break;s=!0}else i=i.next;while(s||i!==t);return t}function xr(e,t,i,s,n,r,o){if(e){!o&&r&&Uy(e,s,n,r);for(var a=e,l,h;e.prev!==e.next;){if(l=e.prev,h=e.next,r?Ry(e,s,n,r):Py(e)){t.push(l.i/i|0),t.push(e.i/i|0),t.push(h.i/i|0),Er(e),e=h.next,a=h.next;continue}if(e=h,e===a){o?o===1?(e=Dy(ks(e),t,i),xr(e,t,i,s,n,r,2)):o===2&&Oy(e,t,i,s,n,r):xr(ks(e),t,i,s,n,r,1);break}}}}function Py(e){var t=e.prev,i=e,s=e.next;if(Ht(t,i,s)>=0)return!1;for(var n=t.x,r=i.x,o=s.x,a=t.y,l=i.y,h=s.y,c=n<r?n<o?n:o:r<o?r:o,u=a<l?a<h?a:h:l<h?l:h,d=n>r?n>o?n:o:r>o?r:o,f=a>l?a>h?a:h:l>h?l:h,p=s.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=u&&p.y<=f&&ln(n,a,r,l,o,h,p.x,p.y)&&Ht(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Ry(e,t,i,s){var n=e.prev,r=e,o=e.next;if(Ht(n,r,o)>=0)return!1;for(var a=n.x,l=r.x,h=o.x,c=n.y,u=r.y,d=o.y,f=a<l?a<h?a:h:l<h?l:h,p=c<u?c<d?c:d:u<d?u:d,g=a>l?a>h?a:h:l>h?l:h,m=c>u?c>d?c:d:u>d?u:d,_=Ph(f,p,t,i,s),b=Ph(g,m,t,i,s),y=e.prevZ,E=e.nextZ;y&&y.z>=_&&E&&E.z<=b;){if(y.x>=f&&y.x<=g&&y.y>=p&&y.y<=m&&y!==n&&y!==o&&ln(a,c,l,u,h,d,y.x,y.y)&&Ht(y.prev,y,y.next)>=0||(y=y.prevZ,E.x>=f&&E.x<=g&&E.y>=p&&E.y<=m&&E!==n&&E!==o&&ln(a,c,l,u,h,d,E.x,E.y)&&Ht(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;y&&y.z>=_;){if(y.x>=f&&y.x<=g&&y.y>=p&&y.y<=m&&y!==n&&y!==o&&ln(a,c,l,u,h,d,y.x,y.y)&&Ht(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;E&&E.z<=b;){if(E.x>=f&&E.x<=g&&E.y>=p&&E.y<=m&&E!==n&&E!==o&&ln(a,c,l,u,h,d,E.x,E.y)&&Ht(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Dy(e,t,i){var s=e;do{var n=s.prev,r=s.next.next;!Wa(n,r)&&Pg(n,s,s.next,r)&&vr(n,r)&&vr(r,n)&&(t.push(n.i/i|0),t.push(s.i/i|0),t.push(r.i/i|0),Er(s),Er(s.next),s=e=r),s=s.next}while(s!==e);return ks(s)}function Oy(e,t,i,s,n,r){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&zy(o,a)){var l=Rg(o,a);o=ks(o,o.next),l=ks(l,l.next),xr(o,t,i,s,n,r,0),xr(l,t,i,s,n,r,0);return}a=a.next}o=o.next}while(o!==e)}function ky(e,t,i,s){var n=[],r,o,a,l,h;for(r=0,o=t.length;r<o;r++)a=t[r]*s,l=r<o-1?t[r+1]*s:e.length,h=Ig(e,a,l,s,!1),h===h.next&&(h.steiner=!0),n.push(Hy(h));for(n.sort(Fy),r=0;r<n.length;r++)i=By(n[r],i);return i}function Fy(e,t){return e.x-t.x}function By(e,t){var i=Ly(e,t);if(!i)return t;var s=Rg(i,e);return ks(s,s.next),ks(i,i.next)}function Ly(e,t){var i=t,s=e.x,n=e.y,r=-1/0,o;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var a=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=s&&a>r&&(r=a,o=i.x<i.next.x?i:i.next,a===s))return o}i=i.next}while(i!==t);if(!o)return null;var l=o,h=o.x,c=o.y,u=1/0,d;i=o;do s>=i.x&&i.x>=h&&s!==i.x&&ln(n<c?s:r,n,h,c,n<c?r:s,n,i.x,i.y)&&(d=Math.abs(n-i.y)/(s-i.x),vr(i,e)&&(d<u||d===u&&(i.x>o.x||i.x===o.x&&Ny(o,i)))&&(o=i,u=d)),i=i.next;while(i!==l);return o}function Ny(e,t){return Ht(e.prev,e,t.prev)<0&&Ht(t.next,e,e.next)<0}function Uy(e,t,i,s){var n=e;do n.z===0&&(n.z=Ph(n.x,n.y,t,i,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,Gy(n)}function Gy(e){var t,i,s,n,r,o,a,l,h=1;do{for(i=e,e=null,r=null,o=0;i;){for(o++,s=i,a=0,t=0;t<h&&(a++,s=s.nextZ,!!s);t++);for(l=h;a>0||l>0&&s;)a!==0&&(l===0||!s||i.z<=s.z)?(n=i,i=i.nextZ,a--):(n=s,s=s.nextZ,l--),r?r.nextZ=n:e=n,n.prevZ=r,r=n;i=s}r.nextZ=null,h*=2}while(o>1);return e}function Ph(e,t,i,s,n){return e=(e-i)*n|0,t=(t-s)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Hy(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function ln(e,t,i,s,n,r,o,a){return(n-o)*(t-a)>=(e-o)*(r-a)&&(e-o)*(s-a)>=(i-o)*(t-a)&&(i-o)*(r-a)>=(n-o)*(s-a)}function zy(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Vy(e,t)&&(vr(e,t)&&vr(t,e)&&Wy(e,t)&&(Ht(e.prev,e,t.prev)||Ht(e,t.prev,t))||Wa(e,t)&&Ht(e.prev,e,e.next)>0&&Ht(t.prev,t,t.next)>0)}function Ht(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Wa(e,t){return e.x===t.x&&e.y===t.y}function Pg(e,t,i,s){var n=Qr(Ht(e,t,i)),r=Qr(Ht(e,t,s)),o=Qr(Ht(i,s,e)),a=Qr(Ht(i,s,t));return!!(n!==r&&o!==a||n===0&&Jr(e,i,t)||r===0&&Jr(e,s,t)||o===0&&Jr(i,e,s)||a===0&&Jr(i,t,s))}function Jr(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Qr(e){return e>0?1:e<0?-1:0}function Vy(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Pg(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function vr(e,t){return Ht(e.prev,e,e.next)<0?Ht(e,t,e.next)>=0&&Ht(e,e.prev,t)>=0:Ht(e,t,e.prev)<0||Ht(e,e.next,t)<0}function Wy(e,t){var i=e,s=!1,n=(e.x+t.x)/2,r=(e.y+t.y)/2;do i.y>r!=i.next.y>r&&i.next.y!==i.y&&n<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next;while(i!==e);return s}function Rg(e,t){var i=new Rh(e.i,e.x,e.y),s=new Rh(t.i,t.x,t.y),n=e.next,r=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,s.next=i,i.prev=s,r.next=s,s.prev=r,s}function zu(e,t,i,s){var n=new Rh(e,t,i);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function Er(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Rh(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Va.deviation=function(e,t,i,s){var n=t&&t.length,r=n?t[0]*i:e.length,o=Math.abs(Dh(e,0,r,i));if(n)for(var a=0,l=t.length;a<l;a++){var h=t[a]*i,c=a<l-1?t[a+1]*i:e.length;o-=Math.abs(Dh(e,h,c,i))}var u=0;for(a=0;a<s.length;a+=3){var d=s[a]*i,f=s[a+1]*i,p=s[a+2]*i;u+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function Dh(e,t,i,s){for(var n=0,r=t,o=i-s;r<i;r+=s)n+=(e[o]-e[r])*(e[r+1]+e[o+1]),o=r;return n}Va.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},s=0,n=0;n<e.length;n++){for(var r=0;r<e[n].length;r++)for(var o=0;o<t;o++)i.vertices.push(e[n][r][o]);n>0&&(s+=e[n-1].length,i.holes.push(s))}return i};var da={},jy={get exports(){return da},set exports(e){da=e}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(i){var s=t&&!t.nodeType&&t,n=e&&!e.nodeType&&e,r=typeof un=="object"&&un;(r.global===r||r.window===r||r.self===r)&&(i=r);var o,a=2147483647,l=36,h=1,c=26,u=38,d=700,f=72,p=128,g="-",m=/^xn--/,_=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=l-h,x=Math.floor,T=String.fromCharCode,A;function C(D){throw RangeError(y[D])}function R(D,z){for(var j=D.length,J=[];j--;)J[j]=z(D[j]);return J}function I(D,z){var j=D.split("@"),J="";j.length>1&&(J=j[0]+"@",D=j[1]),D=D.replace(b,".");var H=D.split("."),L=R(H,z).join(".");return J+L}function S(D){for(var z=[],j=0,J=D.length,H,L;j<J;)H=D.charCodeAt(j++),H>=55296&&H<=56319&&j<J?(L=D.charCodeAt(j++),(L&64512)==56320?z.push(((H&1023)<<10)+(L&1023)+65536):(z.push(H),j--)):z.push(H);return z}function F(D){return R(D,function(z){var j="";return z>65535&&(z-=65536,j+=T(z>>>10&1023|55296),z=56320|z&1023),j+=T(z),j}).join("")}function O(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:l}function v(D,z){return D+22+75*(D<26)-((z!=0)<<5)}function w(D,z,j){var J=0;for(D=j?x(D/d):D>>1,D+=x(D/z);D>E*c>>1;J+=l)D=x(D/E);return x(J+(E+1)*D/(D+u))}function B(D){var z=[],j=D.length,J,H=0,L=p,U=f,V,$,nt,K,ct,bt,Et,mt,pe;for(V=D.lastIndexOf(g),V<0&&(V=0),$=0;$<V;++$)D.charCodeAt($)>=128&&C("not-basic"),z.push(D.charCodeAt($));for(nt=V>0?V+1:0;nt<j;){for(K=H,ct=1,bt=l;nt>=j&&C("invalid-input"),Et=O(D.charCodeAt(nt++)),(Et>=l||Et>x((a-H)/ct))&&C("overflow"),H+=Et*ct,mt=bt<=U?h:bt>=U+c?c:bt-U,!(Et<mt);bt+=l)pe=l-mt,ct>x(a/pe)&&C("overflow"),ct*=pe;J=z.length+1,U=w(H-K,J,K==0),x(H/J)>a-L&&C("overflow"),L+=x(H/J),H%=J,z.splice(H++,0,L)}return F(z)}function P(D){var z,j,J,H,L,U,V,$,nt,K,ct,bt=[],Et,mt,pe,Le;for(D=S(D),Et=D.length,z=p,j=0,L=f,U=0;U<Et;++U)ct=D[U],ct<128&&bt.push(T(ct));for(J=H=bt.length,H&&bt.push(g);J<Et;){for(V=a,U=0;U<Et;++U)ct=D[U],ct>=z&&ct<V&&(V=ct);for(mt=J+1,V-z>x((a-j)/mt)&&C("overflow"),j+=(V-z)*mt,z=V,U=0;U<Et;++U)if(ct=D[U],ct<z&&++j>a&&C("overflow"),ct==z){for($=j,nt=l;K=nt<=L?h:nt>=L+c?c:nt-L,!($<K);nt+=l)Le=$-K,pe=l-K,bt.push(T(v(K+Le%pe,0))),$=x(Le/pe);bt.push(T(v($,0))),L=w(j,mt,J==H),j=0,++J}++j,++z}return bt.join("")}function N(D){return I(D,function(z){return m.test(z)?B(z.slice(4).toLowerCase()):z})}function k(D){return I(D,function(z){return _.test(z)?"xn--"+P(z):z})}if(o={version:"1.3.2",ucs2:{decode:S,encode:F},decode:B,encode:P,toASCII:k,toUnicode:N},s&&n)if(e.exports==s)n.exports=o;else for(A in o)o.hasOwnProperty(A)&&(s[A]=o[A]);else i.punycode=o})(un)})(jy,da);var Xy={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},wr={};function Yy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var $y=function(e,t,i,s){t=t||"&",i=i||"=";var n={};if(typeof e!="string"||e.length===0)return n;var r=/\+/g;e=e.split(t);var o=1e3;s&&typeof s.maxKeys=="number"&&(o=s.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var h=e[l].replace(r,"%20"),c=h.indexOf(i),u,d,f,p;c>=0?(u=h.substr(0,c),d=h.substr(c+1)):(u=h,d=""),f=decodeURIComponent(u),p=decodeURIComponent(d),Yy(n,f)?Array.isArray(n[f])?n[f].push(p):n[f]=[n[f],p]:n[f]=p}return n},Nn=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Ky=function(e,t,i,s){return t=t||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(n){var r=encodeURIComponent(Nn(n))+i;return Array.isArray(e[n])?e[n].map(function(o){return r+encodeURIComponent(Nn(o))}).join(t):r+encodeURIComponent(Nn(e[n]))}).join(t):s?encodeURIComponent(Nn(s))+i+encodeURIComponent(Nn(e)):""};wr.decode=wr.parse=$y;wr.encode=wr.stringify=Ky;var qy=da,ci=Xy,Zy=ja,Jy=h1,Qy=l1;function qe(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t1=/^([a-z0-9.+-]+:)/i,e1=/:[0-9]*$/,i1=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s1=["<",">",'"',"`"," ","\r",`
`,"	"],n1=["{","}","|","\\","^","`"].concat(s1),Oh=["'"].concat(n1),Vu=["%","/","?",";","#"].concat(Oh),Wu=["/","?","#"],r1=255,ju=/^[+a-z0-9A-Z_-]{0,63}$/,o1=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,a1={javascript:!0,"javascript:":!0},kh={javascript:!0,"javascript:":!0},fn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Fh=wr;function ja(e,t,i){if(e&&ci.isObject(e)&&e instanceof qe)return e;var s=new qe;return s.parse(e,t,i),s}qe.prototype.parse=function(e,t,i){if(!ci.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),n=s!==-1&&s<e.indexOf("#")?"?":"#",r=e.split(n),o=/\\/g;r[0]=r[0].replace(o,"/"),e=r.join(n);var a=e;if(a=a.trim(),!i&&e.split("#").length===1){var l=i1.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Fh.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=t1.exec(a);if(h){h=h[0];var c=h.toLowerCase();this.protocol=c,a=a.substr(h.length)}if(i||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=a.substr(0,2)==="//";u&&!(h&&kh[h])&&(a=a.substr(2),this.slashes=!0)}if(!kh[h]&&(u||h&&!fn[h])){for(var d=-1,f=0;f<Wu.length;f++){var p=a.indexOf(Wu[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var g,m;d===-1?m=a.lastIndexOf("@"):m=a.lastIndexOf("@",d),m!==-1&&(g=a.slice(0,m),a=a.slice(m+1),this.auth=decodeURIComponent(g)),d=-1;for(var f=0;f<Vu.length;f++){var p=a.indexOf(Vu[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var b=this.hostname.split(/\./),f=0,y=b.length;f<y;f++){var E=b[f];if(E&&!E.match(ju)){for(var x="",T=0,A=E.length;T<A;T++)E.charCodeAt(T)>127?x+="x":x+=E[T];if(!x.match(ju)){var C=b.slice(0,f),R=b.slice(f+1),I=E.match(o1);I&&(C.push(I[1]),R.unshift(I[2])),R.length&&(a="/"+R.join(".")+a),this.hostname=C.join(".");break}}}this.hostname.length>r1?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=qy.toASCII(this.hostname));var S=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+S,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!a1[c])for(var f=0,y=Oh.length;f<y;f++){var O=Oh[f];if(a.indexOf(O)!==-1){var v=encodeURIComponent(O);v===O&&(v=escape(O)),a=a.split(O).join(v)}}var w=a.indexOf("#");w!==-1&&(this.hash=a.substr(w),a=a.slice(0,w));var B=a.indexOf("?");if(B!==-1?(this.search=a.substr(B),this.query=a.substr(B+1),t&&(this.query=Fh.parse(this.query)),a=a.slice(0,B)):t&&(this.search="",this.query={}),a&&(this.pathname=a),fn[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var S=this.pathname||"",P=this.search||"";this.path=S+P}return this.href=this.format(),this};function l1(e){return ci.isString(e)&&(e=ja(e)),e instanceof qe?e.format():qe.prototype.format.call(e)}qe.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",s=this.hash||"",n=!1,r="";this.host?n=e+this.host:this.hostname&&(n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&ci.isObject(this.query)&&Object.keys(this.query).length&&(r=Fh.stringify(this.query));var o=this.search||r&&"?"+r||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||fn[t])&&n!==!1?(n="//"+(n||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):n||(n=""),s&&s.charAt(0)!=="#"&&(s="#"+s),o&&o.charAt(0)!=="?"&&(o="?"+o),i=i.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+n+i+o+s};function h1(e,t){return ja(e,!1,!0).resolve(t)}qe.prototype.resolve=function(e){return this.resolveObject(ja(e,!1,!0)).format()};qe.prototype.resolveObject=function(e){if(ci.isString(e)){var t=new qe;t.parse(e,!1,!0),e=t}for(var i=new qe,s=Object.keys(this),n=0;n<s.length;n++){var r=s[n];i[r]=this[r]}if(i.hash=e.hash,e.href==="")return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(i[l]=e[l])}return fn[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!fn[e.protocol]){for(var h=Object.keys(e),c=0;c<h.length;c++){var u=h[c];i[u]=e[u]}return i.href=i.format(),i}if(i.protocol=e.protocol,!e.host&&!kh[e.protocol]){for(var y=(e.pathname||"").split("/");y.length&&!(e.host=y.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),i.pathname=y.join("/")}else i.pathname=e.pathname;if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var d=i.pathname||"",f=i.search||"";i.path=d+f}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var p=i.pathname&&i.pathname.charAt(0)==="/",g=e.host||e.pathname&&e.pathname.charAt(0)==="/",m=g||p||i.host&&e.pathname,_=m,b=i.pathname&&i.pathname.split("/")||[],y=e.pathname&&e.pathname.split("/")||[],E=i.protocol&&!fn[i.protocol];if(E&&(i.hostname="",i.port=null,i.host&&(b[0]===""?b[0]=i.host:b.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(y[0]===""?y[0]=e.host:y.unshift(e.host)),e.host=null),m=m&&(y[0]===""||b[0]==="")),g)i.host=e.host||e.host===""?e.host:i.host,i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname,i.search=e.search,i.query=e.query,b=y;else if(y.length)b||(b=[]),b.pop(),b=b.concat(y),i.search=e.search,i.query=e.query;else if(!ci.isNullOrUndefined(e.search)){if(E){i.hostname=i.host=b.shift();var x=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;x&&(i.auth=x.shift(),i.host=i.hostname=x.shift())}return i.search=e.search,i.query=e.query,(!ci.isNull(i.pathname)||!ci.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!b.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var T=b.slice(-1)[0],A=(i.host||e.host||b.length>1)&&(T==="."||T==="..")||T==="",C=0,R=b.length;R>=0;R--)T=b[R],T==="."?b.splice(R,1):T===".."?(b.splice(R,1),C++):C&&(b.splice(R,1),C--);if(!m&&!_)for(;C--;C)b.unshift("..");m&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),A&&b.join("/").substr(-1)!=="/"&&b.push("");var I=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(E){i.hostname=i.host=I?"":b.length?b.shift():"";var x=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;x&&(i.auth=x.shift(),i.host=i.hostname=x.shift())}return m=m||i.host&&b.length,m&&!I&&b.unshift(""),b.length?i.pathname=b.join("/"):(i.pathname=null,i.path=null),(!ci.isNull(i.pathname)||!ci.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i};qe.prototype.parseHost=function(){var e=this.host,t=e1.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const c1={parse:Zy,format:Qy,resolve:Jy};function Ne(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Un(e){return e.split("?")[0].split("#")[0]}function u1(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d1(e,t,i){return e.replace(new RegExp(u1(t),"g"),i)}function f1(e,t){let i="",s=0,n=-1,r=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||r===1))if(n!==a-1&&r===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const l=i.lastIndexOf("/");if(l!==i.length-1){l===-1?(i="",s=0):(i=i.slice(0,l),s=i.length-1-i.lastIndexOf("/")),n=a,r=0;continue}}else if(i.length===2||i.length===1){i="",s=0,n=a,r=0;continue}}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+=`/${e.slice(n+1,a)}`:i=e.slice(n+1,a),s=a-n-1;n=a,r=0}else o===46&&r!==-1?++r:r=-1}return i}const de={toPosix(e){return d1(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){Ne(e),e=this.toPosix(e);let t="";const i=/^file:\/\/\//.exec(e),s=/^[^/:]+:\/\//.exec(e),n=/^[^/:]+:\//.exec(e);if(i||s||n){const r=(i==null?void 0:i[0])||(s==null?void 0:s[0])||(n==null?void 0:n[0]);t=r,e=e.slice(r.length)}return t},toAbsolute(e,t,i){if(this.isDataUrl(e))return e;const s=Un(this.toPosix(t??Q.ADAPTER.getBaseUrl())),n=Un(this.toPosix(i??this.rootname(s)));return Ne(e),e=this.toPosix(e),e.startsWith("/")?de.join(n,e.slice(1)):this.isAbsolute(e)?e:this.join(s,e)},normalize(e){if(e=this.toPosix(e),Ne(e),e.length===0)return".";let t="";const i=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const s=e.endsWith("/");return e=f1(e,!1),e.length>0&&s&&(e+="/"),i?`/${e}`:t+e},isAbsolute(e){return Ne(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let i=0;i<e.length;++i){const s=e[i];if(Ne(s),s.length>0)if(t===void 0)t=s;else{const n=e[i-1]??"";this.extname(n)?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(Ne(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const i=t===47;let s=-1,n=!0;const r=this.getProtocol(e),o=e;e=e.slice(r.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!n){s=a;break}}else n=!1;return s===-1?i?"/":this.isUrl(o)?r+e:r:i&&s===1?"//":r+e.slice(0,s)},rootname(e){Ne(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const i=e.indexOf("/",t.length);i!==-1?t=e.slice(0,i):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){Ne(e),t&&Ne(t),e=Un(this.toPosix(e));let i=0,s=-1,n=!0,r;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(r=e.length-1;r>=0;--r){const l=e.charCodeAt(r);if(l===47){if(!n){i=r+1;break}}else a===-1&&(n=!1,a=r+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(s=r):(o=-1,s=a))}return i===s?s=a:s===-1&&(s=e.length),e.slice(i,s)}for(r=e.length-1;r>=0;--r)if(e.charCodeAt(r)===47){if(!n){i=r+1;break}}else s===-1&&(n=!1,s=r+1);return s===-1?"":e.slice(i,s)},extname(e){Ne(e),e=Un(this.toPosix(e));let t=-1,i=0,s=-1,n=!0,r=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!n){i=o+1;break}continue}s===-1&&(n=!1,s=o+1),a===46?t===-1?t=o:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||s===-1||r===0||r===1&&t===s-1&&t===i+1?"":e.slice(t,s)},parse(e){Ne(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=Un(this.toPosix(e));let i=e.charCodeAt(0);const s=this.isAbsolute(e);let n;t.root=this.rootname(e),s||this.hasProtocol(e)?n=1:n=0;let r=-1,o=0,a=-1,l=!0,h=e.length-1,c=0;for(;h>=n;--h){if(i=e.charCodeAt(h),i===47){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),i===46?r===-1?r=h:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||a===-1||c===0||c===1&&r===a-1&&r===o+1?a!==-1&&(o===0&&s?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&s?(t.name=e.slice(1,r),t.base=e.slice(1,a)):(t.name=e.slice(o,r),t.base=e.slice(o,a)),t.ext=e.slice(r,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},Xu={};function xt(e,t,i=3){if(Xu[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(s=s.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(s))),Xu[t]=!0}let Il;function p1(){return typeof Il>"u"&&(Il=function(){var i;const t={stencil:!0,failIfMajorPerformanceCaveat:Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Q.ADAPTER.getWebGLRenderingContext())return!1;const s=Q.ADAPTER.createCanvas();let n=s.getContext("webgl",t)||s.getContext("experimental-webgl",t);const r=!!((i=n==null?void 0:n.getContextAttributes())!=null&&i.stencil);if(n){const o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,r}catch{return!1}}()),Il}var g1={grad:.9,turn:360,rad:360/(2*Math.PI)},Ii=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},ee=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},De=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),e>i?i:e>t?e:t},Dg=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Yu=function(e){return{r:De(e.r,0,255),g:De(e.g,0,255),b:De(e.b,0,255),a:De(e.a)}},Pl=function(e){return{r:ee(e.r),g:ee(e.g),b:ee(e.b),a:ee(e.a,3)}},m1=/^#([0-9a-f]{3,8})$/i,to=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Og=function(e){var t=e.r,i=e.g,s=e.b,n=e.a,r=Math.max(t,i,s),o=r-Math.min(t,i,s),a=o?r===t?(i-s)/o:r===i?2+(s-t)/o:4+(t-i)/o:0;return{h:60*(a<0?a+6:a),s:r?o/r*100:0,v:r/255*100,a:n}},kg=function(e){var t=e.h,i=e.s,s=e.v,n=e.a;t=t/360*6,i/=100,s/=100;var r=Math.floor(t),o=s*(1-i),a=s*(1-(t-r)*i),l=s*(1-(1-t+r)*i),h=r%6;return{r:255*[s,a,o,o,l,s][h],g:255*[l,s,s,a,o,o][h],b:255*[o,o,l,s,s,a][h],a:n}},$u=function(e){return{h:Dg(e.h),s:De(e.s,0,100),l:De(e.l,0,100),a:De(e.a)}},Ku=function(e){return{h:ee(e.h),s:ee(e.s),l:ee(e.l),a:ee(e.a,3)}},qu=function(e){return kg((i=(t=e).s,{h:t.h,s:(i*=((s=t.l)<50?s:100-s)/100)>0?2*i/(s+i)*100:0,v:s+i,a:t.a}));var t,i,s},ar=function(e){return{h:(t=Og(e)).h,s:(n=(200-(i=t.s))*(s=t.v)/100)>0&&n<200?i*s/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,i,s,n},_1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,x1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Bh={string:[[function(e){var t=m1.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?ee(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?ee(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=y1.exec(e)||x1.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Yu({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=_1.exec(e)||b1.exec(e);if(!t)return null;var i,s,n=$u({h:(i=t[1],s=t[2],s===void 0&&(s="deg"),Number(i)*(g1[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return qu(n)},"hsl"]],object:[[function(e){var t=e.r,i=e.g,s=e.b,n=e.a,r=n===void 0?1:n;return Ii(t)&&Ii(i)&&Ii(s)?Yu({r:Number(t),g:Number(i),b:Number(s),a:Number(r)}):null},"rgb"],[function(e){var t=e.h,i=e.s,s=e.l,n=e.a,r=n===void 0?1:n;if(!Ii(t)||!Ii(i)||!Ii(s))return null;var o=$u({h:Number(t),s:Number(i),l:Number(s),a:Number(r)});return qu(o)},"hsl"],[function(e){var t=e.h,i=e.s,s=e.v,n=e.a,r=n===void 0?1:n;if(!Ii(t)||!Ii(i)||!Ii(s))return null;var o=function(a){return{h:Dg(a.h),s:De(a.s,0,100),v:De(a.v,0,100),a:De(a.a)}}({h:Number(t),s:Number(i),v:Number(s),a:Number(r)});return kg(o)},"hsv"]]},Zu=function(e,t){for(var i=0;i<t.length;i++){var s=t[i][0](e);if(s)return[s,t[i][1]]}return[null,void 0]},v1=function(e){return typeof e=="string"?Zu(e.trim(),Bh.string):typeof e=="object"&&e!==null?Zu(e,Bh.object):[null,void 0]},Rl=function(e,t){var i=ar(e);return{h:i.h,s:De(i.s+100*t,0,100),l:i.l,a:i.a}},Dl=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Ju=function(e,t){var i=ar(e);return{h:i.h,s:i.s,l:De(i.l+100*t,0,100),a:i.a}},Lh=function(){function e(t){this.parsed=v1(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return ee(Dl(this.rgba),2)},e.prototype.isDark=function(){return Dl(this.rgba)<.5},e.prototype.isLight=function(){return Dl(this.rgba)>=.5},e.prototype.toHex=function(){return t=Pl(this.rgba),i=t.r,s=t.g,n=t.b,o=(r=t.a)<1?to(ee(255*r)):"","#"+to(i)+to(s)+to(n)+o;var t,i,s,n,r,o},e.prototype.toRgb=function(){return Pl(this.rgba)},e.prototype.toRgbString=function(){return t=Pl(this.rgba),i=t.r,s=t.g,n=t.b,(r=t.a)<1?"rgba("+i+", "+s+", "+n+", "+r+")":"rgb("+i+", "+s+", "+n+")";var t,i,s,n,r},e.prototype.toHsl=function(){return Ku(ar(this.rgba))},e.prototype.toHslString=function(){return t=Ku(ar(this.rgba)),i=t.h,s=t.s,n=t.l,(r=t.a)<1?"hsla("+i+", "+s+"%, "+n+"%, "+r+")":"hsl("+i+", "+s+"%, "+n+"%)";var t,i,s,n,r},e.prototype.toHsv=function(){return t=Og(this.rgba),{h:ee(t.h),s:ee(t.s),v:ee(t.v),a:ee(t.a,3)};var t},e.prototype.invert=function(){return ri({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),ri(Rl(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),ri(Rl(this.rgba,-t))},e.prototype.grayscale=function(){return ri(Rl(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),ri(Ju(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),ri(Ju(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?ri({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):ee(this.rgba.a,3);var i},e.prototype.hue=function(t){var i=ar(this.rgba);return typeof t=="number"?ri({h:t,s:i.s,l:i.l,a:i.a}):ee(i.h)},e.prototype.isEqual=function(t){return this.toHex()===ri(t).toHex()},e}(),ri=function(e){return e instanceof Lh?e:new Lh(e)},Qu=[],E1=function(e){e.forEach(function(t){Qu.indexOf(t)<0&&(t(Lh,Bh),Qu.push(t))})};function w1(e,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var n in i)s[i[n]]=n;var r={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,h=s[this.toHex()];if(h)return h;if(o!=null&&o.closest){var c=this.toRgb(),u=1/0,d="black";if(!r.length)for(var f in i)r[f]=new e(i[f]).toRgb();for(var p in i){var g=(a=c,l=r[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<u&&(u=g,d=p)}return d}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":i[a];return l?new e(l).toRgb():null},"name"])}E1([w1]);const pn=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof pn)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((n,r)=>n===t[r]);if(e!==null&&t!==null){const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:n.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,i,s]=this._components;return{r:e,g:t,b:i,a:s}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,s]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[t,i,s]=this._components;return e[0]=t,e[1]=i,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,s,n]=pn.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=s,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,n=this._int&255;return t&&(i=i*e+.5|0,s=s*e+.5|0,n=n*e+.5|0),(e*255<<24)+(i<<16)+(s<<8)+n}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,s]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,s,n]=this._components;return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e}normalize(e){let t,i,s,n;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const r=e;t=(r>>16&255)/255,i=(r>>8&255)/255,s=(r&255)/255,n=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,s,n=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,s,n=255]=e,t/=255,i/=255,s/=255,n/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=pn.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const r=ri(e);r.isValid()&&({r:t,g:i,b:s,a:n}=r.rgba,t/=255,i/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=s,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((s,n)=>{e[n]=Math.min(Math.max(s,t),i)}),e)}};let It=pn;It.shared=new pn;It.temp=new pn;It.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function S1(e){return xt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),It.shared.setValue(e).toHex()}function T1(e){return xt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),It.shared.setValue(e).toNumber()}function A1(){const e=[],t=[];for(let s=0;s<32;s++)e[s]=s,t[s]=s;e[ft.NORMAL_NPM]=ft.NORMAL,e[ft.ADD_NPM]=ft.ADD,e[ft.SCREEN_NPM]=ft.SCREEN,t[ft.NORMAL]=ft.NORMAL_NPM,t[ft.ADD]=ft.ADD_NPM,t[ft.SCREEN]=ft.SCREEN_NPM;const i=[];return i.push(t),i.push(e),i}const Fg=A1();function Bg(e,t){return Fg[t?1:0][e]}function C1(e,t=null){const i=e*6;if(t=t||new Uint16Array(i),t.length!==i)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${i}`);for(let s=0,n=0;s<i;s+=6,n+=4)t[s+0]=n+0,t[s+1]=n+1,t[s+2]=n+2,t[s+3]=n+0,t[s+4]=n+2,t[s+5]=n+3;return t}function Lg(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function fa(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function td(e){return!(e&e-1)&&!!e}function ed(e){let t=(e>65535?1:0)<<4;e>>>=t;let i=(e>255?1:0)<<3;return e>>>=i,t|=i,i=(e>15?1:0)<<2,e>>>=i,t|=i,i=(e>3?1:0)<<1,e>>>=i,t|=i,t|e>>1}function gn(e,t,i){const s=e.length;let n;if(t>=s||i===0)return;i=t+i>s?s-t:i;const r=s-i;for(n=t;n<r;++n)e[n]=e[n+i];e.length=r}function $i(e){return e===0?0:e<0?-1:1}let M1=0;function Fs(){return++M1}const Ng=class{constructor(e,t,i,s){this.left=e,this.top=t,this.right=i,this.bottom=s}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Nh=Ng;Nh.EMPTY=new Ng(0,0,0,0);const id={},oi=Object.create(null),Xi=Object.create(null);class I1{constructor(t,i,s){this._canvas=Q.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=s||Q.RESOLUTION,this.resize(t,i)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,i){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(i*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function sd(e,t,i){for(let s=0,n=4*i*t;s<t;++s,n+=4)if(e[n+3]!==0)return!1;return!0}function nd(e,t,i,s,n){const r=4*t;for(let o=s,a=s*r+4*i;o<=n;++o,a+=r)if(e[a+3]!==0)return!1;return!0}function P1(e){const{width:t,height:i}=e,s=e.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");const r=s.getImageData(0,0,t,i).data;let o=0,a=0,l=t-1,h=i-1;for(;a<i&&sd(r,t,a);)++a;if(a===i)return Nh.EMPTY;for(;sd(r,t,h);)--h;for(;nd(r,t,o,a,h);)++o;for(;nd(r,t,l,a,h);)--l;return++l,++h,new Nh(o,a,l,h)}function R1(e){const t=P1(e),{width:i,height:s}=t;let n=null;if(!t.isEmpty()){const r=e.getContext("2d");if(r===null)throw new TypeError("Failed to get canvas 2D context");n=r.getImageData(t.left,t.top,i,s)}return{width:i,height:s,data:n}}let eo;function D1(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,eo||(eo=document.createElement("a")),eo.href=e;const i=c1.parse(eo.href),s=!i.port&&t.port===""||i.port===t.port;return i.hostname!==t.hostname||!s||i.protocol!==t.protocol?"anonymous":""}function rs(e,t=1){var s;const i=(s=Q.RETINA_PREFIX)==null?void 0:s.exec(e);return i?parseFloat(i[1]):t}var et=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(et||{});const Uh=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},rd=(e,t)=>Uh(e).priority??t,ut={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Uh).forEach(t=>{t.type.forEach(i=>{var s,n;return(n=(s=this._removeHandlers)[i])==null?void 0:n.call(s,t)})}),this},add(...e){return e.map(Uh).forEach(t=>{t.type.forEach(i=>{const s=this._addHandlers,n=this._queue;s[i]?s[i](t):(n[i]=n[i]||[],n[i].push(t))})}),this},handle(e,t,i){const s=this._addHandlers,n=this._removeHandlers;if(s[e]||n[e])throw new Error(`Extension type ${e} already has a handler`);s[e]=t,n[e]=i;const r=this._queue;return r[e]&&(r[e].forEach(o=>t(o)),delete r[e]),this},handleByMap(e,t){return this.handle(e,i=>{t[i.name]=i.ref},i=>{delete t[i.name]})},handleByList(e,t,i=-1){return this.handle(e,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((n,r)=>rd(r,i)-rd(n,i)))},s=>{const n=t.indexOf(s.ref);n!==-1&&t.splice(n,1)})}};class Gh{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const O1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function k1(e){let t="";for(let i=0;i<e;++i)i>0&&(t+=`
else `),i<e-1&&(t+=`if(test == ${i}.0){}`);return t}function F1(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);for(;;){const s=O1.replace(/%forloop%/gi,k1(e));if(t.shaderSource(i,s),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))e=e/2|0;else break}return e}const Ol=0,kl=1,Fl=2,Bl=3,Ll=4,Nl=5;class Vi{constructor(){this.data=0,this.blendMode=ft.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Ol)}set blend(t){!!(this.data&1<<Ol)!==t&&(this.data^=1<<Ol)}get offsets(){return!!(this.data&1<<kl)}set offsets(t){!!(this.data&1<<kl)!==t&&(this.data^=1<<kl)}get culling(){return!!(this.data&1<<Fl)}set culling(t){!!(this.data&1<<Fl)!==t&&(this.data^=1<<Fl)}get depthTest(){return!!(this.data&1<<Bl)}set depthTest(t){!!(this.data&1<<Bl)!==t&&(this.data^=1<<Bl)}get depthMask(){return!!(this.data&1<<Nl)}set depthMask(t){!!(this.data&1<<Nl)!==t&&(this.data^=1<<Nl)}get clockwiseFrontFace(){return!!(this.data&1<<Ll)}set clockwiseFrontFace(t){!!(this.data&1<<Ll)!==t&&(this.data^=1<<Ll)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==ft.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Vi;return t.depthTest=!1,t.blend=!0,t}}const Hh=[];function Ug(e,t){if(!e)return null;let i="";if(typeof e=="string"){const s=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);s&&(i=s[1].toLowerCase())}for(let s=Hh.length-1;s>=0;--s){const n=Hh[s];if(n.test&&n.test(e,i))return new n(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ze{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,i,s,n,r,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:c}=this;this._aliasCount++;for(let u=0,d=c.length;u<d;u++)c[u][h](t,i,s,n,r,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ze.prototype,{dispatch:{value:Ze.prototype.emit},run:{value:Ze.prototype.emit}});class Sr{constructor(t=0,i=0){this._width=t,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new Ze("setRealSize"),this.onUpdate=new Ze("update"),this.onError=new Ze("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,i){(t!==this._width||i!==this._height)&&(this._width=t,this._height=i,this.onResize.emit(t,i))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,i,s){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,i){return!1}}class Nr extends Sr{constructor(t,i){const{width:s,height:n}=i||{};if(!s||!n)throw new Error("BufferResource width or height invalid");super(s,n),this.data=t}upload(t,i,s){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===si.UNPACK);const r=i.realWidth,o=i.realHeight;return s.width===r&&s.height===o?n.texSubImage2D(i.target,0,0,0,r,o,i.format,s.type,this.data):(s.width=r,s.height=o,n.texImage2D(i.target,0,s.internalFormat,r,o,0,i.format,s.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const B1={scaleMode:Fi.NEAREST,format:Y.RGBA,alphaMode:si.NPM},en=class extends Os{constructor(e=null,t=null){super(),t=Object.assign({},en.defaultOptions,t);const{alphaMode:i,mipmap:s,anisotropicLevel:n,scaleMode:r,width:o,height:a,wrapMode:l,format:h,type:c,target:u,resolution:d,resourceOptions:f}=t;e&&!(e instanceof Sr)&&(e=Ug(e,f),e.internal=!0),this.resolution=d||Q.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=n,this._wrapMode=l,this._scaleMode=r,this.format=h,this.type=c,this.target=u,this.alphaMode=i,this.uid=Fs(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=td(this.realWidth)&&td(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Xi[this.cacheId],delete oi[this.cacheId],this.cacheId=null),this.dispose(),en.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=Q.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let n=null;if(s)n=e;else{if(!e._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${Fs()}`}n=e._pixiId}let r=Xi[n];if(s&&i&&!r)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return r||(r=new en(e,t),r.cacheId=n,en.addToCache(r,n)),r}static fromBuffer(e,t,i,s){e=e||new Float32Array(t*i*4);const n=new Nr(e,{width:t,height:i}),r=e instanceof Float32Array?dt.FLOAT:dt.UNSIGNED_BYTE;return new en(n,Object.assign({},B1,{type:r},s))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Xi[t]&&Xi[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Xi[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Xi[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Xi[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Xi[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let pt=en;pt.defaultOptions={mipmap:xi.POW2,anisotropicLevel:0,scaleMode:Fi.LINEAR,wrapMode:ts.CLAMP,alphaMode:si.UNPACK,target:dn.TEXTURE_2D,format:Y.RGBA,type:dt.UNSIGNED_BYTE};pt._globalBatch=0;class zh{constructor(){this.texArray=null,this.blend=0,this.type=fi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let L1=0,Jt=class Gg{constructor(t,i=!0,s=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=s,this.static=i,this.id=L1++,this.disposeRunner=new Ze("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?gi.ELEMENT_ARRAY_BUFFER:gi.ARRAY_BUFFER}get index(){return this.type===gi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Gg(t)}};class pa{constructor(t,i=0,s=!1,n=dt.FLOAT,r,o,a,l=1){this.buffer=t,this.size=i,this.normalized=s,this.type=n,this.stride=r,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,i,s,n,r){return new pa(t,i,s,n,r)}}const N1={Float32Array,Uint32Array,Int32Array,Uint8Array};function U1(e,t){let i=0,s=0;const n={};for(let l=0;l<e.length;l++)s+=t[l],i+=e[l].length;const r=new ArrayBuffer(i*4);let o=null,a=0;for(let l=0;l<e.length;l++){const h=t[l],c=e[l],u=Lg(c);n[u]||(n[u]=new N1[u](r)),o=n[u];for(let d=0;d<c.length;d++){const f=(d/h|0)*s+a,p=d%h;o[f+p]=c[d]}a+=h}return new Float32Array(r)}const od={5126:4,5123:2,5121:1};let G1=0;const H1={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class os{constructor(t=[],i={}){this.buffers=t,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=G1++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ze("disposeGeometry"),this.refCount=0}addAttribute(t,i,s=0,n=!1,r,o,a,l=!1){if(!i)throw new Error("You must pass a buffer when creating an attribute");i instanceof Jt||(i instanceof Array&&(i=new Float32Array(i)),i=new Jt(i));const h=t.split("|");if(h.length>1){for(let u=0;u<h.length;u++)this.addAttribute(h[u],i,s,n,r);return this}let c=this.buffers.indexOf(i);return c===-1&&(this.buffers.push(i),c=this.buffers.length-1),this.attributes[t]=new pa(c,s,n,r,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Jt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Jt(t)),t.type=gi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],i=[],s=new Jt;let n;for(n in this.attributes){const r=this.attributes[n],o=this.buffers[r.buffer];t.push(o.data),i.push(r.size*od[r.type]/4),r.buffer=0}for(s.data=U1(t,i),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const i=this.attributes[t];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new os;for(let i=0;i<this.buffers.length;i++)t.buffers[i]=new Jt(this.buffers[i].data.slice(0));for(const i in this.attributes){const s=this.attributes[i];t.attributes[i]=new pa(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=gi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const i=new os,s=[],n=[],r=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,r[l]=0}for(let a=0;a<o.buffers.length;a++)s[a]=new H1[Lg(o.buffers[a].data)](n[a]),i.buffers[a]=new Jt(s[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)s[l].set(o.buffers[l].data,r[l]),r[l]+=o.buffers[l].data.length}if(i.attributes=o.attributes,o.indexBuffer){i.indexBuffer=i.buffers[o.buffers.indexOf(o.indexBuffer)],i.indexBuffer.type=gi.ELEMENT_ARRAY_BUFFER;let a=0,l=0,h=0,c=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){c=u;break}for(const u in o.attributes){const d=o.attributes[u];(d.buffer|0)===c&&(l+=d.size*od[d.type]/4)}for(let u=0;u<t.length;u++){const d=t[u].indexBuffer.data;for(let f=0;f<d.length;f++)i.indexBuffer.data[f+h]+=a;a+=t[u].buffers[c].data.length/l,h+=d.length}}return i}}class Hg extends os{constructor(t=!1){super(),this._buffer=new Jt(null,t,!1),this._indexBuffer=new Jt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,dt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,dt.FLOAT).addAttribute("aColor",this._buffer,4,!0,dt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,dt.FLOAT).addIndex(this._indexBuffer)}}const ga=Math.PI*2,z1=180/Math.PI,V1=Math.PI/180;var ae=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(ae||{});class Tt{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new Tt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const io=[new Tt,new Tt,new Tt,new Tt];class _t{constructor(t=0,i=0,s=0,n=0){this.x=Number(t),this.y=Number(i),this.width=Number(s),this.height=Number(n),this.type=ae.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new _t(0,0,0,0)}clone(){return new _t(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(t,i){if(!i){const C=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=C)return!1;const I=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>I}const s=this.left,n=this.right,r=this.top,o=this.bottom;if(n<=s||o<=r)return!1;const a=io[0].set(t.left,t.top),l=io[1].set(t.left,t.bottom),h=io[2].set(t.right,t.top),c=io[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(i.a*i.d-i.b*i.c);if(u===0||(i.apply(a,a),i.apply(l,l),i.apply(h,h),i.apply(c,c),Math.max(a.x,l.x,h.x,c.x)<=s||Math.min(a.x,l.x,h.x,c.x)>=n||Math.max(a.y,l.y,h.y,c.y)<=r||Math.min(a.y,l.y,h.y,c.y)>=o))return!1;const d=u*(l.y-a.y),f=u*(a.x-l.x),p=d*s+f*r,g=d*n+f*r,m=d*s+f*o,_=d*n+f*o;if(Math.max(p,g,m,_)<=d*a.x+f*a.y||Math.min(p,g,m,_)>=d*c.x+f*c.y)return!1;const b=u*(a.y-h.y),y=u*(h.x-a.x),E=b*s+y*r,x=b*n+y*r,T=b*s+y*o,A=b*n+y*o;return!(Math.max(E,x,T,A)<=b*a.x+y*a.y||Math.min(E,x,T,A)>=b*c.x+y*c.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(s-i,0),this.y=n,this.height=Math.max(r-n,0),this}ceil(t=1,i=.001){const s=Math.ceil((this.x+this.width-i)*t)/t,n=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=s-this.x,this.height=n-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=s-i,this.y=n,this.height=r-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class kc{constructor(t=0,i=0,s=0){this.x=t,this.y=i,this.radius=s,this.type=ae.CIRC}clone(){return new kc(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const s=this.radius*this.radius;let n=this.x-t,r=this.y-i;return n*=n,r*=r,n+r<=s}getBounds(){return new _t(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Fc{constructor(t=0,i=0,s=0,n=0){this.x=t,this.y=i,this.width=s,this.height=n,this.type=ae.ELIP}clone(){return new Fc(this.x,this.y,this.width,this.height)}contains(t,i){if(this.width<=0||this.height<=0)return!1;let s=(t-this.x)/this.width,n=(i-this.y)/this.height;return s*=s,n*=n,s+n<=1}getBounds(){return new _t(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class mn{constructor(...t){let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const s=[];for(let n=0,r=i.length;n<r;n++)s.push(i[n].x,i[n].y);i=s}this.points=i,this.type=ae.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),i=new mn(t);return i.closeStroke=this.closeStroke,i}contains(t,i){let s=!1;const n=this.points.length/2;for(let r=0,o=n-1;r<n;o=r++){const a=this.points[r*2],l=this.points[r*2+1],h=this.points[o*2],c=this.points[o*2+1];l>i!=c>i&&t<(h-a)*((i-l)/(c-l))+a&&(s=!s)}return s}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,i)=>`${t}, ${i}`,"")}]`}}class Bc{constructor(t=0,i=0,s=0,n=0,r=20){this.x=t,this.y=i,this.width=s,this.height=n,this.radius=r,this.type=ae.RREC}clone(){return new Bc(this.x,this.y,this.width,this.height,this.radius)}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+s&&i<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let n=t-(this.x+s),r=i-(this.y+s);const o=s*s;if(n*n+r*r<=o||(n=t-(this.x+this.width-s),n*n+r*r<=o)||(r=i-(this.y+this.height-s),n*n+r*r<=o)||(n=t-(this.x+s),n*n+r*r<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class kt{constructor(t=1,i=0,s=0,n=1,r=0,o=0){this.array=null,this.a=t,this.b=i,this.c=s,this.d=n,this.tx=r,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,s,n,r,o){return this.a=t,this.b=i,this.c=s,this.d=n,this.tx=r,this.ty=o,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const s=i||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,i){i=i||new Tt;const s=t.x,n=t.y;return i.x=this.a*s+this.c*n+this.tx,i.y=this.b*s+this.d*n+this.ty,i}applyInverse(t,i){i=i||new Tt;const s=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return i.x=this.d*s*n+-this.c*s*r+(this.ty*this.c-this.tx*this.d)*s,i.y=this.a*s*r+-this.b*s*n+(-this.ty*this.a+this.tx*this.b)*s,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),s=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*i-this.b*s,this.b=n*s+this.b*i,this.c=r*i-this.d*s,this.d=r*s+this.d*i,this.tx=o*i-this.ty*s,this.ty=o*s+this.ty*i,this}append(t){const i=this.a,s=this.b,n=this.c,r=this.d;return this.a=t.a*i+t.b*n,this.b=t.a*s+t.b*r,this.c=t.c*i+t.d*n,this.d=t.c*s+t.d*r,this.tx=t.tx*i+t.ty*n+this.tx,this.ty=t.tx*s+t.ty*r+this.ty,this}setTransform(t,i,s,n,r,o,a,l,h){return this.a=Math.cos(a+h)*r,this.b=Math.sin(a+h)*r,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(s*this.a+n*this.c),this.ty=i-(s*this.b+n*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,n=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,s=this.b,n=this.c,r=this.d,o=t.pivot,a=-Math.atan2(-n,r),l=Math.atan2(s,i),h=Math.abs(a+l);return h<1e-5||Math.abs(ga-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(i*i+s*s),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx+(o.x*i+o.y*n),t.position.y=this.ty+(o.x*s+o.y*r),t}invert(){const t=this.a,i=this.b,s=this.c,n=this.d,r=this.tx,o=t*n-i*s;return this.a=n/o,this.b=-i/o,this.c=-s/o,this.d=t/o,this.tx=(s*this.ty-n*r)/o,this.ty=-(t*this.ty-i*r)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new kt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new kt}static get TEMP_MATRIX(){return new kt}}const xs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],vs=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Es=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ws=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Vh=[],zg=[],so=Math.sign;function W1(){for(let e=0;e<16;e++){const t=[];Vh.push(t);for(let i=0;i<16;i++){const s=so(xs[e]*xs[i]+Es[e]*vs[i]),n=so(vs[e]*xs[i]+ws[e]*vs[i]),r=so(xs[e]*Es[i]+Es[e]*ws[i]),o=so(vs[e]*Es[i]+ws[e]*ws[i]);for(let a=0;a<16;a++)if(xs[a]===s&&vs[a]===n&&Es[a]===r&&ws[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new kt;t.set(xs[e],vs[e],Es[e],ws[e],0,0),zg.push(t)}}W1();const Nt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>xs[e],uY:e=>vs[e],vX:e=>Es[e],vY:e=>ws[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Vh[e][t],sub:(e,t)=>Vh[e][Nt.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?Nt.S:Nt.N:Math.abs(t)*2<=Math.abs(e)?e>0?Nt.E:Nt.W:t>0?e>0?Nt.SE:Nt.SW:e>0?Nt.NE:Nt.NW,matrixAppendRotationInv:(e,t,i=0,s=0)=>{const n=zg[Nt.inv(t)];n.tx=i,n.ty=s,e.append(n)}};class Ki{constructor(t,i,s=0,n=0){this._x=s,this._y=n,this.cb=t,this.scope=i}clone(t=this.cb,i=this.scope){return new Ki(t,i,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const Vg=class{constructor(){this.worldTransform=new kt,this.localTransform=new kt,this.position=new Ki(this.onChange,this,0,0),this.scale=new Ki(this.onChange,this,1,1),this.pivot=new Ki(this.onChange,this,0,0),this.skew=new Ki(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const i=e.worldTransform,s=this.worldTransform;s.a=t.a*i.a+t.b*i.c,s.b=t.a*i.b+t.b*i.d,s.c=t.c*i.a+t.d*i.c,s.d=t.c*i.b+t.d*i.d,s.tx=t.tx*i.a+t.ty*i.c+i.tx,s.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let Lc=Vg;Lc.IDENTITY=new Vg;var j1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,X1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function ad(e,t,i){const s=e.createShader(t);return e.shaderSource(s,i),e.compileShader(s),s}function Ul(e){const t=new Array(e);for(let i=0;i<t.length;i++)t[i]=!1;return t}function Wg(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Ul(2*t);case"bvec3":return Ul(3*t);case"bvec4":return Ul(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const _n=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],Y1={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},$1={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function K1(e,t){var s;const i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in e.uniforms){const r=t[n];if(!r){(s=e.uniforms[n])!=null&&s.group&&(e.uniforms[n].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=e.uniforms[n];let a=!1;for(let l=0;l<_n.length;l++)if(_n[l].test(r,o)){i.push(_n[l].code(n,o)),a=!0;break}if(!a){const h=(r.size===1&&!r.isArray?Y1:$1)[r.type].replace("location",`ud["${n}"].location`);i.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}const jg={};let qs=jg;function q1(){if(qs===jg||qs!=null&&qs.isContextLost()){const e=Q.ADAPTER.createCanvas();let t;Q.PREFER_ENV>=Gs.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),qs=t}return qs}let no;function Z1(){if(!no){no=Re.MEDIUM;const e=q1();e&&e.getShaderPrecisionFormat&&(no=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?Re.HIGH:Re.MEDIUM)}return no}function ld(e,t){const i=e.getShaderSource(t).split(`
`).map((h,c)=>`${c}: ${h}`),s=e.getShaderInfoLog(t),n=s.split(`
`),r={},o=n.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!r[h]?(r[h]=!0,!0):!1),a=[""];o.forEach(h=>{i[h-1]=`%c${i[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=i.join(`
`);a[0]=l,console.error(s),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function J1(e,t,i,s){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(i,e.COMPILE_STATUS)||ld(e,i),e.getShaderParameter(s,e.COMPILE_STATUS)||ld(e,s),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const Q1={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Xg(e){return Q1[e]}let ro=null;const hd={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Yg(e,t){if(!ro){const i=Object.keys(hd);ro={};for(let s=0;s<i.length;++s){const n=i[s];ro[e[n]]=hd[n]}}return ro[t]}function cd(e,t,i){if(e.substring(0,9)!=="precision"){let s=t;return t===Re.HIGH&&i!==Re.HIGH&&(s=Re.MEDIUM),`precision ${s} float;
${e}`}else if(i!==Re.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let Gn;function tx(){if(typeof Gn=="boolean")return Gn;try{Gn=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Gn=!1}return Gn}let ex=0;const oo={},sn=class{constructor(e,t,i="pixi-shader",s={}){this.extra={},this.id=ex++,this.vertexSrc=e||sn.defaultVertexSrc,this.fragmentSrc=t||sn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),oo[i]?(oo[i]++,i+=`-${oo[i]}`):oo[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=cd(this.vertexSrc,sn.defaultVertexPrecision,Re.HIGH),this.fragmentSrc=cd(this.fragmentSrc,sn.defaultFragmentPrecision,Z1())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return X1}static get defaultFragmentSrc(){return j1}static from(e,t,i){const s=e+t;let n=id[s];return n||(id[s]=n=new sn(e,t,i)),n}};let $e=sn;$e.defaultVertexPrecision=Re.HIGH;$e.defaultFragmentPrecision=Bi.apple.device?Re.HIGH:Re.MEDIUM;let ix=0;class Je{constructor(t,i,s){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ix++,this.static=!!i,this.ubo=!!s,t instanceof Jt?(this.buffer=t,this.buffer.type=gi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Jt(new Float32Array(1)),this.buffer.type=gi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,i,s){if(!this.ubo)this.uniforms[t]=new Je(i,s);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,i,s){return new Je(t,i,s)}static uboFrom(t,i){return new Je(t,i??!0,!0)}}class mi{constructor(t,i){this.uniformBindCount=0,this.program=t,i?i instanceof Je?this.uniformGroup=i:this.uniformGroup=new Je(i):this.uniformGroup=new Je({}),this.disposeRunner=new Ze("disposeShader")}checkUniformExists(t,i){if(i.uniforms[t])return!0;for(const s in i.uniforms){const n=i.uniforms[s];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,i,s){const n=$e.from(t,i);return new mi(n,s)}}class sx{constructor(t,i){if(this.vertexSrc=t,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},!i.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!i.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const s=new Int32Array(t);for(let r=0;r<t;r++)s[r]=r;this.defaultGroupCache[t]=Je.from({uSamplers:s},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new $e(this.vertexSrc,n)}const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new kt,default:this.defaultGroupCache[t]};return new mi(this.programCache[t],i)}generateSampleSrc(t){let i="";i+=`
`,i+=`
`;for(let s=0;s<t;s++)s>0&&(i+=`
else `),s<t-1&&(i+=`if(vTextureId < ${s}.5)`),i+=`
{`,i+=`
	color = texture2D(uSamplers[${s}], vTextureCoord);`,i+=`
}`;return i+=`
`,i+=`
`,i}}class Wh{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function nx(){return!Bi.apple.device}function rx(e){let t=!0;const i=Q.ADAPTER.getNavigator();if(Bi.tablet||Bi.phone){if(Bi.apple.device){const s=i.userAgent.match(/OS (\d+)_(\d+)?/);s&&parseInt(s[1],10)<11&&(t=!1)}if(Bi.android.device){const s=i.userAgent.match(/Android\s([0-9.]*)/);s&&parseInt(s[1],10)<7&&(t=!1)}}return t?e:4}class Xa{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var ox=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,ax=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Ge=class extends Xa{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=Hg,this.vertexSize=6,this.state=Vi.for2d(),this.size=Ge.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??rx(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??nx(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return xt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return ax}static get defaultFragmentTemplate(){return ox}setShaderGenerator({vertex:e=Ge.defaultVertexSrc,fragment:t=Ge.defaultFragmentTemplate}={}){this.shaderGenerator=new sx(e,t)}contextChange(){const e=this.renderer.gl;Q.PREFER_ENV===Gs.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ge.defaultMaxTextures),this.maxTextures=F1(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Ge,i=this.size/4,s=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new zh);for(;t.length<s;)t.push(new Wh);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=Ge._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,r=this.renderer.textureGC.count;let o=++pt._globalBatch,a=0,l=i[0],h=0;s.copyBoundTextures(n,t);for(let c=0;c<this._bufferSize;++c){const u=e[c];e[c]=null,u._batchEnabled!==o&&(l.count>=t&&(s.boundArray(l,n,o,t),this.buildDrawCalls(l,h,c),h=c,l=i[++a],++o),u._batchEnabled=o,u.touched=r,l.elements[l.count++]=u)}l.count>0&&(s.boundArray(l,n,o,t),this.buildDrawCalls(l,h,this._bufferSize),++a,++o);for(let c=0;c<n.length;c++)n[c]=null;pt._globalBatch=o}buildDrawCalls(e,t,i){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:r,vertexSize:o}=this,a=Ge._drawCallPool;let l=this._dcIndex,h=this._aIndex,c=this._iIndex,u=a[l];u.start=this._iIndex,u.texArray=e;for(let d=t;d<i;++d){const f=s[d],p=f._texture.baseTexture,g=Fg[p.alphaMode?1:0][f.blendMode];s[d]=null,t<d&&u.blend!==g&&(u.size=c-u.start,t=d,u=a[++l],u.texArray=e,u.start=c),this.packInterleavedGeometry(f,n,r,h,c),h+=f.vertexData.length/2*o,c+=f.indices.length,u.blend=g}t<i&&(u.size=c-u.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;Ge.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,s=Ge._drawCallPool;let n=null;for(let r=0;r<e;r++){const{texArray:o,type:a,size:l,start:h,blend:c}=s[r];n!==o&&(n=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,i.set(this.state),t.drawElements(a,l,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ge.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=fa(Math.ceil(e/8)),i=ed(t),s=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new Gh(s*this.vertexSize*4)),n}getIndexBuffer(e){const t=fa(Math.ceil(e/12)),i=ed(t),s=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(s)),n}packInterleavedGeometry(e,t,i,s,n){const{uint32View:r,float32View:o}=t,a=s/this.vertexSize,l=e.uvs,h=e.indices,c=e.vertexData,u=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=It.shared.setValue(e._tintRGB).toPremultiplied(d,e._texture.baseTexture.alphaMode>0);for(let p=0;p<c.length;p+=2)o[s++]=c[p],o[s++]=c[p+1],o[s++]=l[p],o[s++]=l[p+1],r[s++]=f,o[s++]=u;for(let p=0;p<h.length;p++)i[n++]=a+h[p]}};let We=Ge;We.defaultBatchSize=4096;We.extension={name:"batch",type:et.RendererPlugin};We._drawCallPool=[];We._textureArrayPool=[];ut.add(We);var lx=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,hx=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Kn=class extends mi{constructor(e,t,i){const s=$e.from(e||Kn.defaultVertexSrc,t||Kn.defaultFragmentSrc);super(s,i),this.padding=0,this.resolution=Kn.defaultResolution,this.multisample=Kn.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Vi}apply(e,t,i,s,n){e.applyFilter(this,t,i,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return hx}static get defaultFragmentSrc(){return lx}};let le=Kn;le.defaultResolution=1;le.defaultMultisample=qt.NONE;class Ya{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new It(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:i,background:s,backgroundAlpha:n}=t,r=s??i;r!==void 0&&(this.color=r),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Ya.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Ya.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"background"};ut.add(Ya);class $g{constructor(t){this.renderer=t,this.emptyRenderer=new Xa(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,i){const{boundTextures:s}=this.renderer.texture;for(let n=i-1;n>=0;--n)t[n]=s[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,i,s,n){const{elements:r,ids:o,count:a}=t;let l=0;for(let h=0;h<a;h++){const c=r[h],u=c._batchLocation;if(u>=0&&u<n&&i[u]===c){o[h]=u;continue}for(;l<n;){const d=i[l];if(d&&d._batchEnabled===s&&d._batchLocation===l){l++;continue}o[h]=l,c._batchLocation=l,i[l]=c;break}}}destroy(){this.renderer=null}}$g.extension={type:et.RendererSystem,name:"batch"};ut.add($g);let ud=0;class $a{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ud++}init(t){if(t.context)this.initFromContext(t.context);else{const i=this.renderer.background.alpha<1,s=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:i,premultipliedAlpha:s,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ud++,this.renderer.runners.contextChange.emit(t);const i=this.renderer.view;i.addEventListener!==void 0&&(i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const i=this.createContext(this.renderer.view,t);this.initFromContext(i)}createContext(t,i){let s;if(Q.PREFER_ENV>=Gs.WEBGL2&&(s=t.getContext("webgl2",i)),s)this.webGLVersion=2;else if(this.webGLVersion=1,s=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!s)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=s,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,i={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const i=t.getContextAttributes(),s="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;s&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=s||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}$a.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};$a.extension={type:et.RendererSystem,name:"context"};ut.add($a);class cx extends Nr{upload(t,i,s){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===si.UNPACK);const r=i.realWidth,o=i.realHeight;return s.width===r&&s.height===o?n.texSubImage2D(i.target,0,0,0,r,o,i.format,s.type,this.data):(s.width=r,s.height=o,n.texImage2D(i.target,0,s.internalFormat,r,o,0,i.format,s.type,this.data)),!0}}class jh{constructor(t,i){this.width=Math.round(t||100),this.height=Math.round(i||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ze("disposeFramebuffer"),this.multisample=qt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,i){return this.colorTextures[t]=i||new pt(null,{scaleMode:Fi.NEAREST,resolution:1,mipmap:xi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new pt(new cx(null,{width:this.width,height:this.height}),{scaleMode:Fi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:xi.OFF,format:Y.DEPTH_COMPONENT,type:dt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,i){if(t=Math.round(t),i=Math.round(i),!(t===this.width&&i===this.height)){this.width=t,this.height=i,this.dirtyId++,this.dirtySize++;for(let s=0;s<this.colorTextures.length;s++){const n=this.colorTextures[s],r=n.resolution;n.setSize(t/r,i/r)}if(this.depthTexture){const s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,i/s)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Kg extends pt{constructor(t={}){if(typeof t=="number"){const i=arguments[0],s=arguments[1],n=arguments[2],r=arguments[3];t={width:i,height:s,scaleMode:n,resolution:r}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=qt.NONE),super(null,t),this.mipmap=xi.OFF,this.valid=!0,this._clear=new It([0,0,0,0]),this.framebuffer=new jh(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class as extends Sr{constructor(t){const i=t,s=i.naturalWidth||i.videoWidth||i.width,n=i.naturalHeight||i.videoHeight||i.height;super(s,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,i,s){s===void 0&&!i.startsWith("data:")?t.crossOrigin=D1(i):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}upload(t,i,s,n){const r=t.gl,o=i.realWidth,a=i.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1&&n.buffered.length===0)return!1;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===si.UNPACK),!this.noSubImage&&i.target===r.TEXTURE_2D&&s.width===o&&s.height===a?r.texSubImage2D(r.TEXTURE_2D,0,0,0,i.format,s.type,n):(s.width=o,s.height=a,r.texImage2D(i.target,0,s.internalFormat,i.format,s.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,i=t.naturalWidth||t.videoWidth||t.width,s=t.naturalHeight||t.videoHeight||t.height;this.resize(i,s),super.update()}dispose(){this.source=null}}class qg extends as{constructor(t,i){if(i=i||{},typeof t=="string"){const s=new Image;as.crossOrigin(s,t,i.crossorigin),s.src=t,t=s}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(i.createBitmap??Q.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.bitmap=null,this._load=null,i.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((i,s)=>{const n=this.source;this.url=n.src;const r=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.resize(n.width,n.height),this._load=null,this.createBitmap?i(this.process()):i(this))};n.complete&&n.src?r():(n.onload=r,n.onerror=o=>{s(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const i=globalThis.createImageBitmap,s=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:s?"cors":"no-cors"}).then(n=>n.blob()).then(n=>i(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===si.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,i,s){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,i,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,i,s,this.bitmap),!this.preserveBitmap){let n=!0;const r=i._glTextures;for(const o in r){const a=r[o];if(a!==s&&a.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class Zg{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,i,s){const n=i.width,r=i.height;if(s){const o=t.width/2/n,a=t.height/2/r,l=t.x/n+o,h=t.y/r+a;s=Nt.add(s,Nt.NW),this.x0=l+o*Nt.uX(s),this.y0=h+a*Nt.uY(s),s=Nt.add(s,2),this.x1=l+o*Nt.uX(s),this.y1=h+a*Nt.uY(s),s=Nt.add(s,2),this.x2=l+o*Nt.uX(s),this.y2=h+a*Nt.uY(s),s=Nt.add(s,2),this.x3=l+o*Nt.uX(s),this.y3=h+a*Nt.uY(s)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const dd=new Zg;function ao(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class ht extends Os{constructor(t,i,s,n,r,o,a){if(super(),this.noFrame=!1,i||(this.noFrame=!0,i=new _t(0,0,1,1)),t instanceof ht&&(t=t.baseTexture),this.baseTexture=t,this._frame=i,this.trim=n,this.valid=!1,this._uvs=dd,this.uvMatrix=null,this.orig=s||i,this._rotate=Number(r||0),r===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Tt(o.x,o.y):new Tt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=i:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:i}=this.baseTexture;i!=null&&i.url&&oi[i.url]&&ht.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ht.removeFromCache(this),this.textureCacheIds=null}clone(){var n;const t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),s=new ht(this.baseTexture,!this.noFrame&&t,i,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(s._frame=t),s}updateUvs(){this._uvs===dd&&(this._uvs=new Zg),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,i={},s=Q.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let r=null;if(n)r=t;else if(t instanceof pt){if(!t.cacheId){const a=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${Fs()}`,pt.addToCache(t,t.cacheId)}r=t.cacheId}else{if(!t._pixiId){const a=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Fs()}`}r=t._pixiId}let o=oi[r];if(n&&s&&!o)throw new Error(`The cacheId "${r}" does not exist in TextureCache.`);return!o&&!(t instanceof pt)?(i.resolution||(i.resolution=rs(t)),o=new ht(new pt(t,i)),o.baseTexture.cacheId=r,pt.addToCache(o.baseTexture,r),ht.addToCache(o,r)):!o&&t instanceof pt&&(o=new ht(t),ht.addToCache(o,r)),o}static fromURL(t,i){const s=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),n=ht.from(t,Object.assign({resourceOptions:s},i),!1),r=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):r.load().then(()=>Promise.resolve(n))}static fromBuffer(t,i,s,n){return new ht(pt.fromBuffer(t,i,s,n))}static fromLoader(t,i,s,n){const r=new pt(t,Object.assign({scaleMode:pt.defaultOptions.scaleMode,resolution:rs(i)},n)),{resource:o}=r;o instanceof qg&&(o.url=i);const a=new ht(r);return s||(s=i),pt.addToCache(a.baseTexture,s),ht.addToCache(a,s),s!==i&&(pt.addToCache(a.baseTexture,i),ht.addToCache(a,i)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),oi[i]&&oi[i]!==t&&console.warn(`Texture added to the cache with an id [${i}] that already had an entry`),oi[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=oi[t];if(i){const s=i.textureCacheIds.indexOf(t);return s>-1&&i.textureCacheIds.splice(s,1),delete oi[t],i}}else if(t!=null&&t.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)oi[t.textureCacheIds[i]]===t&&delete oi[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:i,y:s,width:n,height:r}=t,o=i+n>this.baseTexture.width,a=s+r>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",h=`X: ${i} + ${n} = ${i+n} > ${this.baseTexture.width}`,c=`Y: ${s} + ${r} = ${s+r} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${l} ${c}`)}this.valid=n&&r&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ht._EMPTY||(ht._EMPTY=new ht(new pt),ao(ht._EMPTY),ao(ht._EMPTY.baseTexture)),ht._EMPTY}static get WHITE(){if(!ht._WHITE){const t=Q.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),ht._WHITE=new ht(pt.from(t)),ao(ht._WHITE),ao(ht._WHITE.baseTexture)}return ht._WHITE}}class Hs extends ht{constructor(t,i){super(t,i),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i,s=!0){const n=this.baseTexture.resolution,r=Math.round(t*n)/n,o=Math.round(i*n)/n;this.valid=r>0&&o>0,this._frame.width=this.orig.width=r,this._frame.height=this.orig.height=o,s&&this.baseTexture.resize(r,o),this.updateUvs()}setResolution(t){const{baseTexture:i}=this;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))}static create(t){return new Hs(new Kg(t))}}class Jg{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,i,s=qt.NONE){const n=new Kg(Object.assign({width:t,height:i,resolution:1,multisample:s},this.textureOptions));return new Hs(n)}getOptimalTexture(t,i,s=1,n=qt.NONE){let r;t=Math.ceil(t*s-1e-6),i=Math.ceil(i*s-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||i!==this._pixelsHeight?(t=fa(t),i=fa(i),r=((t&65535)<<16|i&65535)>>>0,n>1&&(r+=n*4294967296)):r=n>1?-n:-1,this.texturePool[r]||(this.texturePool[r]=[]);let o=this.texturePool[r].pop();return o||(o=this.createTexture(t,i,n)),o.filterPoolKey=r,o.setResolution(s),o}getFilterTexture(t,i,s){const n=this.getOptimalTexture(t.width,t.height,i||t.resolution,s||qt.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const i=t.filterPoolKey;t.filterFrame=null,this.texturePool[i].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const i in this.texturePool){const s=this.texturePool[i];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const s=this.texturePool[i];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Jg.SCREEN_KEY=-1;class ux extends os{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Qg extends os{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Jt(this.vertices),this.uvBuffer=new Jt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,i){let s=0,n=0;return this.uvs[0]=s,this.uvs[1]=n,this.uvs[2]=s+i.width/t.width,this.uvs[3]=n,this.uvs[4]=s+i.width/t.width,this.uvs[5]=n+i.height/t.height,this.uvs[6]=s,this.uvs[7]=n+i.height/t.height,s=i.x,n=i.y,this.vertices[0]=s,this.vertices[1]=n,this.vertices[2]=s+i.width,this.vertices[3]=n,this.vertices[4]=s+i.width,this.vertices[5]=n+i.height,this.vertices[6]=s,this.vertices[7]=n+i.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class dx{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=qt.NONE,this.sourceFrame=new _t,this.destinationFrame=new _t,this.bindingSourceFrame=new _t,this.bindingDestinationFrame=new _t,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const lo=[new Tt,new Tt,new Tt,new Tt],Gl=new kt;class tm{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Jg,this.statePool=[],this.quad=new ux,this.quadUv=new Qg,this.tempRect=new _t,this.activeState={},this.globalUniforms=new Je({outputFrame:new _t,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,i){const s=this.renderer,n=this.defaultFilterStack,r=this.statePool.pop()||new dx,o=this.renderer.renderTexture;let a=i[0].resolution,l=i[0].multisample,h=i[0].padding,c=i[0].autoFit,u=i[0].legacy??!0;for(let p=1;p<i.length;p++){const g=i[p];a=Math.min(a,g.resolution),l=Math.min(l,g.multisample),h=this.useMaxPadding?Math.max(h,g.padding):h+g.padding,c=c&&g.autoFit,u=u||(g.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(r),r.resolution=a,r.multisample=l,r.legacy=u,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(h);const d=this.tempRect.copyFrom(o.sourceFrame);s.projection.transform&&this.transformAABB(Gl.copyFrom(s.projection.transform).invert(),d),c?(r.sourceFrame.fit(d),(r.sourceFrame.width<=0||r.sourceFrame.height<=0)&&(r.sourceFrame.width=0,r.sourceFrame.height=0)):r.sourceFrame.intersects(d)||(r.sourceFrame.width=0,r.sourceFrame.height=0),this.roundFrame(r.sourceFrame,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,a,l),r.filters=i,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=r.sourceFrame.width,f.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,r.bindingSourceFrame.copyFrom(o.sourceFrame),r.bindingDestinationFrame.copyFrom(o.destinationFrame),r.transform=s.projection.transform,s.projection.transform=null,o.bind(r.renderTexture,r.sourceFrame,f),s.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,i=t.pop(),s=i.filters;this.activeState=i;const n=this.globalUniforms.uniforms;n.outputFrame=i.sourceFrame,n.resolution=i.resolution;const r=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(r[0]=i.destinationFrame.width,r[1]=i.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],o[0]=Math.round(r[0]*i.resolution),o[1]=Math.round(r[1]*i.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=i.sourceFrame.width*r[2]-.5*o[2],a[3]=i.sourceFrame.height*r[3]-.5*o[3],i.legacy){const h=n.filterArea;h[0]=i.destinationFrame.width,h[1]=i.destinationFrame.height,h[2]=i.sourceFrame.x,h[3]=i.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),s.length===1)s[0].apply(this,i.renderTexture,l.renderTexture,hi.BLEND,i),this.returnFilterTexture(i.renderTexture);else{let h=i.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,i.resolution);c.filterFrame=h.filterFrame;let u=0;for(u=0;u<s.length-1;++u){u===1&&i.multisample>1&&(c=this.getOptimalFilterTexture(h.width,h.height,i.resolution),c.filterFrame=h.filterFrame),s[u].apply(this,h,c,hi.CLEAR,i);const d=h;h=c,c=d}s[u].apply(this,h,l.renderTexture,hi.BLEND,i),u>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(c)}i.clear(),this.statePool.push(i)}bindAndClear(t,i=hi.CLEAR){const{renderTexture:s,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,s.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const r=n.stateId&1||this.forceClear;(i===hi.CLEAR||i===hi.BLIT&&r)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,i,s,n){const r=this.renderer;r.state.set(t.state),this.bindAndClear(s,n),t.uniforms.uSampler=i,t.uniforms.filterGlobals=this.globalUniforms,r.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(i._frame,i.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(fi.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(fi.TRIANGLE_STRIP))}calculateSpriteMatrix(t,i){const{sourceFrame:s,destinationFrame:n}=this.activeState,{orig:r}=i._texture,o=t.set(n.width,0,0,n.height,s.x,s.y),a=i.worldTransform.copyTo(kt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/r.width,1/r.height),o.translate(i.anchor.x,i.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,i,s=1,n=qt.NONE){return this.texturePool.getOptimalTexture(t,i,s,n)}getFilterTexture(t,i,s){if(typeof t=="number"){const r=t;t=i,i=r}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,i||t.resolution,s||qt.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,i){const s=lo[0],n=lo[1],r=lo[2],o=lo[3];s.set(i.left,i.top),n.set(i.left,i.bottom),r.set(i.right,i.top),o.set(i.right,i.bottom),t.apply(s,s),t.apply(n,n),t.apply(r,r),t.apply(o,o);const a=Math.min(s.x,n.x,r.x,o.x),l=Math.min(s.y,n.y,r.y,o.y),h=Math.max(s.x,n.x,r.x,o.x),c=Math.max(s.y,n.y,r.y,o.y);i.x=a,i.y=l,i.width=h-a,i.height=c-l}roundFrame(t,i,s,n,r){if(!(t.width<=0||t.height<=0||s.width<=0||s.height<=0)){if(r){const{a:o,b:a,c:l,d:h}=r;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}r=r?Gl.copyFrom(r):Gl.identity(),r.translate(-s.x,-s.y).scale(n.width/s.width,n.height/s.height).translate(n.x,n.y),this.transformAABB(r,t),t.ceil(i),this.transformAABB(r.invert(),t)}}}tm.extension={type:et.RendererSystem,name:"filter"};ut.add(tm);class fx{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=qt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const px=new _t;class em{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new jh(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new _t,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let i=this.renderer.context.extensions.drawBuffers,s=this.renderer.context.extensions.depthTexture;Q.PREFER_ENV===Gs.WEBGL_LEGACY&&(i=null,s=null),i?t.drawBuffers=n=>i.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),s||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,i,s=0){const{gl:n}=this;if(t){const r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,r.framebuffer)),r.mipLevel!==s&&(t.dirtyId++,t.dirtyFormat++,r.mipLevel=s),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,r.dirtySize=t.dirtySize,this.updateFramebuffer(t,s)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),i){const o=i.width>>s,a=i.height>>s,l=o/i.width;this.setViewport(i.x*l,i.y*l,o,a)}else{const o=t.width>>s,a=t.height>>s;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,i,s,n){const r=this.viewport;t=Math.round(t),i=Math.round(i),s=Math.round(s),n=Math.round(n),(r.width!==s||r.height!==n||r.x!==t||r.y!==i)&&(r.x=t,r.y=i,r.width=s,r.height=n,this.gl.viewport(t,i,s,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,i,s,n,r=Mh.COLOR|Mh.DEPTH){const{gl:o}=this;o.clearColor(t,i,s,n),o.clear(r)}initFramebuffer(t){const{gl:i}=this,s=new fx(i.createFramebuffer());return s.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(t),t.disposeRunner.add(this),s}resizeFramebuffer(t){const{gl:i}=this,s=t.glFramebuffers[this.CONTEXT_UID];s.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let r=n.length;i.drawBuffers||(r=Math.min(r,1));for(let o=0;o<r;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&s.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,i){const{gl:s}=this,n=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures;let o=r.length;s.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||s.createRenderbuffer():n.msaaBuffer&&(s.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const h=r[l],c=h.parentTextureArray||h;this.renderer.texture.bind(c,0),l===0&&n.msaaBuffer?(s.bindRenderbuffer(s.RENDERBUFFER,n.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,n.msaaBuffer)):(s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+l,h.target,c._glTextures[this.CONTEXT_UID].texture,i),a.push(s.COLOR_ATTACHMENT0+l))}if(a.length>1&&s.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const h=t.depthTexture;this.renderer.texture.bind(h,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,i)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,n.stencil),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,t.width,t.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n.stencil)):n.stencil&&(s.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:i}=this;let s=qt.NONE;if(t<=1||i===null)return s;for(let n=0;n<i.length;n++)if(i[n]<=t){s=i[n];break}return s===1&&(s=qt.NONE),s}blit(t,i,s){const{current:n,renderer:r,gl:o,CONTEXT_UID:a}=this;if(r.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const c=n.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new jh(n.width,n.height),l.blitFramebuffer.addColorTexture(0,c)),t=l.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}i||(i=px,i.width=n.width,i.height=n.height),s||(s=i);const h=i.width===s.width&&i.height===s.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(i.left,i.top,i.right,i.bottom,s.left,s.top,s.right,s.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,i){const s=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!s)return;delete t.glFramebuffers[this.CONTEXT_UID];const r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),i||(n.deleteFramebuffer(s.framebuffer),s.msaaBuffer&&n.deleteRenderbuffer(s.msaaBuffer),s.stencil&&n.deleteRenderbuffer(s.stencil)),s.blitFramebuffer&&this.disposeFramebuffer(s.blitFramebuffer,i)}disposeAll(t){const i=this.managedFramebuffers;this.managedFramebuffers=[];for(let s=0;s<i.length;s++)this.disposeFramebuffer(i[s],t)}forceStencil(){const t=this.current;if(!t)return;const i=t.glFramebuffers[this.CONTEXT_UID];if(!i||i.stencil)return;t.stencil=!0;const s=t.width,n=t.height,r=this.gl,o=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,o),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,s,n):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,s,n),i.stencil=o,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new _t}destroy(){this.renderer=null}}em.extension={type:et.RendererSystem,name:"framebuffer"};ut.add(em);const Hl={5126:4,5123:2,5121:1};class im{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){let s=this.renderer.context.extensions.vertexArrayObject;Q.PREFER_ENV===Gs.WEBGL_LEGACY&&(s=null),s?(t.createVertexArray=()=>s.createVertexArrayOES(),t.bindVertexArray=n=>s.bindVertexArrayOES(n),t.deleteVertexArray=n=>s.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(i.webGLVersion!==2){const s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=(n,r)=>s.vertexAttribDivisorANGLE(n,r),t.drawElementsInstanced=(n,r,o,a,l)=>s.drawElementsInstancedANGLE(n,r,o,a,l),t.drawArraysInstanced=(n,r,o,a)=>s.drawArraysInstancedANGLE(n,r,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex}bind(t,i){i=i||this.renderer.shader.shader;const{gl:s}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},r=!0);const o=n[i.program.id]||this.initGeometryVao(t,i,r);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?s.bindVertexArray(o):this.activateVao(t,i.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,i=this.renderer.buffer;for(let s=0;s<t.buffers.length;s++){const n=t.buffers[s];i.update(n)}}checkCompatibility(t,i){const s=t.attributes,n=i.attributeData;for(const r in n)if(!s[r])throw new Error(`shader and geometry incompatible, geometry missing the "${r}" attribute`)}getSignature(t,i){const s=t.attributes,n=i.attributeData,r=["g",t.id];for(const o in s)n[o]&&r.push(o,n[o].location);return r.join("-")}initGeometryVao(t,i,s=!0){const n=this.gl,r=this.CONTEXT_UID,o=this.renderer.buffer,a=i.program;a.glPrograms[r]||this.renderer.shader.generateProgram(i),this.checkCompatibility(t,a);const l=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID];let c=h[l];if(c)return h[a.id]=c,c;const u=t.buffers,d=t.attributes,f={},p={};for(const g in u)f[g]=0,p[g]=0;for(const g in d)!d[g].size&&a.attributeData[g]?d[g].size=a.attributeData[g].size:d[g].size||console.warn(`PIXI Geometry attribute '${g}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[g].buffer]+=d[g].size*Hl[d[g].type];for(const g in d){const m=d[g],_=m.size;m.stride===void 0&&(f[m.buffer]===_*Hl[m.type]?m.stride=0:m.stride=f[m.buffer]),m.start===void 0&&(m.start=p[m.buffer],p[m.buffer]+=_*Hl[m.type])}c=n.createVertexArray(),n.bindVertexArray(c);for(let g=0;g<u.length;g++){const m=u[g];o.bind(m),s&&m._glBuffers[r].refCount++}return this.activateVao(t,a),h[a.id]=c,h[l]=c,n.bindVertexArray(null),o.unbind(gi.ARRAY_BUFFER),c}disposeGeometry(t,i){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const s=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,r=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!s){if(o)for(let l=0;l<r.length;l++){const h=r[l]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!i&&o.dispose(r[l],i))}if(!i){for(const l in s)if(l[0]==="g"){const h=s[l];this._activeVao===h&&this.unbind(),n.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const i=Object.keys(this.managedGeometries);for(let s=0;s<i.length;s++)this.disposeGeometry(this.managedGeometries[i[s]],t)}activateVao(t,i){const s=this.gl,n=this.CONTEXT_UID,r=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&r.bind(t.indexBuffer);let l=null;for(const h in a){const c=a[h],u=o[c.buffer],d=u._glBuffers[n];if(i.attributeData[h]){l!==d&&(r.bind(u),l=d);const f=i.attributeData[h].location;if(s.enableVertexAttribArray(f),s.vertexAttribPointer(f,c.size,c.type||s.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)s.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,i,s,n){const{gl:r}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?r.UNSIGNED_SHORT:r.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?r.drawElementsInstanced(t,i||o.indexBuffer.data.length,l,(s||0)*a,n||1):r.drawElements(t,i||o.indexBuffer.data.length,l,(s||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?r.drawArraysInstanced(t,s,i||o.getSize(),n||1):r.drawArrays(t,s,i||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}im.extension={type:et.RendererSystem,name:"geometry"};ut.add(im);const fd=new kt;class sm{constructor(t,i){this._texture=t,this.mapCoord=new kt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,i){i===void 0&&(i=t);const s=this.mapCoord;for(let n=0;n<t.length;n+=2){const r=t[n],o=t[n+1];i[n]=r*s.a+o*s.c+s.tx,i[n+1]=r*s.b+o*s.d+s.ty}return i}update(t){const i=this._texture;if(!i||!i.valid||!t&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;const s=i._uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const n=i.orig,r=i.trim;r&&(fd.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(fd));const o=i.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(i._frame.x+l+h)/o.width,a[1]=(i._frame.y+l+h)/o.height,a[2]=(i._frame.x+i._frame.width-l+h)/o.width,a[3]=(i._frame.y+i._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=i._frame.width===o.width&&i._frame.height===o.height&&i.rotate===0,!0}}var gx=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,mx=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class _x extends le{constructor(t,i,s){let n=null;typeof t!="string"&&i===void 0&&s===void 0&&(n=t,t=void 0,i=void 0,s=void 0),super(t||mx,i||gx,s),this.maskSprite=n,this.maskMatrix=new kt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,i,s,n){const r=this._maskSprite,o=r._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new sm(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,i,s,n))}}class bx{constructor(t=null){this.type=Zt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=le.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Zt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class nm{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,i){let s=i;if(!s.isMaskData){const r=this.maskDataPool.pop()||new bx;r.pooled=!0,r.maskObject=i,s=r}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(s.copyCountersOrReset(n),s._colorMask=n?n._colorMask:15,s.autoDetect&&this.detect(s),s._target=t,s.type!==Zt.SPRITE&&this.maskStack.push(s),s.enabled)switch(s.type){case Zt.SCISSOR:this.renderer.scissor.push(s);break;case Zt.STENCIL:this.renderer.stencil.push(s);break;case Zt.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s);break;case Zt.COLOR:this.pushColorMask(s);break}s.type===Zt.SPRITE&&this.maskStack.push(s)}pop(t){const i=this.maskStack.pop();if(!(!i||i._target!==t)){if(i.enabled)switch(i.type){case Zt.SCISSOR:this.renderer.scissor.pop(i);break;case Zt.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case Zt.SPRITE:this.popSpriteMask(i);break;case Zt.COLOR:this.popColorMask(i);break}if(i.reset(),i.pooled&&this.maskDataPool.push(i),this.maskStack.length!==0){const s=this.maskStack[this.maskStack.length-1];s.type===Zt.SPRITE&&s._filters&&(s._filters[0].maskSprite=s.maskObject)}}}detect(t){const i=t.maskObject;i?i.isSprite?t.type=Zt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Zt.SCISSOR:t.type=Zt.STENCIL:t.type=Zt.COLOR}pushSpriteMask(t){const{maskObject:i}=t,s=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new _x]));const r=this.renderer,o=r.renderTexture;let a,l;if(o.current){const c=o.current;a=t.resolution||c.resolution,l=t.multisample??c.multisample}else a=t.resolution||r.resolution,l=t.multisample??r.multisample;n[0].resolution=a,n[0].multisample=l,n[0].maskSprite=i;const h=s.filterArea;s.filterArea=i.getBounds(!0),r.filter.push(s,n),s.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const i=t._colorMask,s=t._colorMask=i&t.colorMask;s!==i&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}popColorMask(t){const i=t._colorMask,s=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;s!==i&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}destroy(){this.renderer=null}}nm.extension={type:et.RendererSystem,name:"mask"};ut.add(nm);class rm{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:i}=this.renderer,s=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==s&&(n===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const pd=new kt,gd=[],zo=class extends rm{constructor(e){super(e),this.glConst=Q.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:s}=this,n=s.renderTexture,r=i.getBounds(!0,gd.pop()??new _t);this.roundFrameToPixels(r,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),t&&r.fit(t),e._scissorRectLocal=r}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:s,d:n}=e;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||zo.isMatrixRotated(t.worldTransform)||zo.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,s,n){zo.isMatrixRotated(n)||(n=n?pd.copyFrom(n):pd.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,e),e.fit(s),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&gd.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let om=zo;om.extension={type:et.RendererSystem,name:"scissor"};ut.add(om);class am extends rm{constructor(t){super(t),this.glConst=Q.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const i=t.maskObject,{gl:s}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),t._stencilCounter++;const r=t._colorMask;r!==0&&(t._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,n,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,r!==0&&(t._colorMask=r,s.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}pop(t){const i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=s?s._colorMask:15;n!==0&&(s._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(s._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}am.extension={type:et.RendererSystem,name:"stencil"};ut.add(am);class lm{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return xt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return xt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return xt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const i in t)this.plugins[i]=new t[i](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}lm.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"_plugin"};ut.add(lm);class hm{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new kt,this.transform=null}update(t,i,s,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,s,n),this.transform&&this.projectionMatrix.append(this.transform);const r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)}calculateProjection(t,i,s,n){const r=this.projectionMatrix,o=n?-1:1;r.identity(),r.a=1/i.width*2,r.d=o*(1/i.height*2),r.tx=-1-i.x*r.a,r.ty=-o-i.y*r.d}setTransform(t){}destroy(){this.renderer=null}}hm.extension={type:et.RendererSystem,name:"projection"};ut.add(hm);const yx=new Lc;class cm{constructor(t){this.renderer=t,this._tempMatrix=new kt}generateTexture(t,i){const{region:s,...n}=i||{},r=s||t.getLocalBounds(null,!0);r.width===0&&(r.width=1),r.height===0&&(r.height=1);const o=Hs.create({width:r.width,height:r.height,...n});this._tempMatrix.tx=-r.x,this._tempMatrix.ty=-r.y;const a=t.transform;return t.transform=yx,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}cm.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"textureGenerator"};ut.add(cm);const ps=new _t,Hn=new _t;class um{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new _t,this.destinationFrame=new _t,this.viewportFrame=new _t}contextChange(){var i;const t=(i=this.renderer)==null?void 0:i.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,i,s){const n=this.renderer;this.current=t;let r,o,a;t?(r=t.baseTexture,a=r.resolution,i||(ps.width=t.frame.width,ps.height=t.frame.height,i=ps),s||(Hn.x=t.frame.x,Hn.y=t.frame.y,Hn.width=i.width,Hn.height=i.height,s=Hn),o=r.framebuffer):(a=n.resolution,i||(ps.width=n._view.screen.width,ps.height=n._view.screen.height,i=ps),s||(s=ps,s.width=i.width,s.height=i.height));const l=this.viewportFrame;l.x=s.x*a,l.y=s.y*a,l.width=s.width*a,l.height=s.height*a,t||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(s,i,a,!o),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(s)}clear(t,i){const s=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=It.shared.setValue(t||s);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const r=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=r.width!==o.width||r.height!==o.height;if(a){let{x:l,y:h,width:c,height:u}=this.viewportFrame;l=Math.round(l),h=Math.round(h),c=Math.round(c),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,h,c,u)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,i),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}um.extension={type:et.RendererSystem,name:"renderTexture"};ut.add(um);class xx{constructor(t,i){this.program=t,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function vx(e,t){const i={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let n=0;n<s;n++){const r=t.getActiveAttrib(e,n);if(r.name.startsWith("gl_"))continue;const o=Yg(t,r.type),a={type:o,name:r.name,size:Xg(o),location:t.getAttribLocation(e,r.name)};i[r.name]=a}return i}function Ex(e,t){const i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let n=0;n<s;n++){const r=t.getActiveUniform(e,n),o=r.name.replace(/\[.*?\]$/,""),a=!!r.name.match(/\[.*?\]$/),l=Yg(t,r.type);i[o]={name:o,index:n,type:l,size:r.size,isArray:a,value:Wg(l,r.size)}}return i}function wx(e,t){var l;const i=ad(e,e.VERTEX_SHADER,t.vertexSrc),s=ad(e,e.FRAGMENT_SHADER,t.fragmentSrc),n=e.createProgram();e.attachShader(n,i),e.attachShader(n,s);const r=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(r&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(n,r.names,r.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||J1(e,n,i,s),t.attributeData=vx(n,e),t.uniformData=Ex(n,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((c,u)=>c>u?1:-1);for(let c=0;c<h.length;c++)t.attributeData[h[c]].location=c,e.bindAttribLocation(n,c,h[c]);e.linkProgram(n)}e.deleteShader(i),e.deleteShader(s);const o={};for(const h in t.uniformData){const c=t.uniformData[h];o[h]={location:e.getUniformLocation(n,h),value:Wg(c.type,c.size)}}return new xx(n,o)}function Sx(e,t,i,s,n){i.buffer.update(n)}const Tx={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},dm={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Ax(e){const t=e.map(r=>({data:r,offset:0,dataLen:0,dirty:0}));let i=0,s=0,n=0;for(let r=0;r<t.length;r++){const o=t[r];if(i=dm[o.data.type],o.data.size>1&&(i=Math.max(i,16)*o.data.size),o.dataLen=i,s%i!==0&&s<16){const a=s%i%16;s+=a,n+=a}s+i>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=i,s=i):(o.offset=n,s+=i,n+=i)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function Cx(e,t){const i=[];for(const s in e)t[s]&&i.push(t[s]);return i.sort((s,n)=>s.index-n.index),i}function Mx(e,t){if(!e.autoManage)return{size:0,syncFunc:Sx};const i=Cx(e.uniforms,t),{uboElements:s,size:n}=Ax(i),r=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<s.length;o++){const a=s[o],l=e.uniforms[a.data.name],h=a.data.name;let c=!1;for(let u=0;u<_n.length;u++){const d=_n[u];if(d.codeUbo&&d.test(a.data,l)){r.push(`offset = ${a.offset/4};`,_n[u].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const u=Xg(a.data.type),d=Math.max(dm[a.data.type]/16,1),f=u/d,p=(4-f%4)%4;r.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const u=Tx[a.data.type];r.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${u};
                `)}}return r.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",r.join(`
`))}}let Ix=0;const ho={textureCount:0,uboCount:0};class fm{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Ix++}systemCheck(){if(!tx())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,i){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const s=t.program,n=s.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==s&&(this.program=s,this.gl.useProgram(n.program)),i||(ho.textureCount=0,ho.uboCount=0,this.syncUniformGroup(t.uniformGroup,ho)),n}setUniforms(t){const i=this.shader.program,s=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(s.uniformData,t,this.renderer)}syncUniformGroup(t,i){const s=this.getGlProgram();(!t.static||t.dirtyId!==s.uniformDirtyGroups[t.id])&&(s.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,s,i))}syncUniforms(t,i,s){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(i.uniformData,t.uniforms,this.renderer,s)}createSyncGroups(t){const i=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=K1(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[i],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,i){const s=this.getGlProgram();if(!t.static||t.dirtyId!==0||!s.uniformGroups[t.id]){t.dirtyId=0;const n=s.uniformGroups[t.id]||this.createSyncBufferGroup(t,s,i);t.buffer.update(),n(s.uniformData,t.uniforms,this.renderer,ho,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,s.uniformBufferBindings[i])}createSyncBufferGroup(t,i,s){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const r=this.gl.getUniformBlockIndex(i.program,s);i.uniformBufferBindings[s]=this.shader.uniformBindCount,n.uniformBlockBinding(i.program,r,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=Mx(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return i.uniformGroups[t.id]=a.syncFunc,i.uniformGroups[t.id]}getSignature(t,i,s){const n=t.uniforms,r=[`${s}-`];for(const o in n)r.push(o),i[o]&&r.push(i[o].type);return r.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const i=this.gl,s=t.program,n=wx(i,s);return s.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}fm.extension={type:et.RendererSystem,name:"shader"};ut.add(fm);class Ka{constructor(t){this.renderer=t}run(t){const{renderer:i}=this;i.runners.init.emit(i.options),t.hello&&console.log(`PixiJS 7.2.4 - ${i.rendererLogId} - https://pixijs.com`),i.resize(i.screen.width,i.screen.height)}destroy(){}}Ka.defaultOptions={hello:!1};Ka.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"startup"};ut.add(Ka);function Px(e,t=[]){return t[ft.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.ADD]=[e.ONE,e.ONE],t[ft.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.NONE]=[0,0],t[ft.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ft.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ft.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ft.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ft.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ft.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ft.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ft.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ft.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ft.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const Rx=0,Dx=1,Ox=2,kx=3,Fx=4,Bx=5,Xh=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ft.NONE,this._blendEq=!1,this.map=[],this.map[Rx]=this.setBlend,this.map[Dx]=this.setOffset,this.map[Ox]=this.setCullFace,this.map[kx]=this.setDepthTest,this.map[Fx]=this.setFrontFace,this.map[Bx]=this.setDepthMask,this.checks=[],this.defaultState=new Vi,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=Px(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Xh.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Xh.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let pm=Xh;pm.extension={type:et.RendererSystem,name:"state"};ut.add(pm);class Lx extends Os{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const i=(t.priority??[]).filter(n=>t.systems[n]),s=[...i,...Object.keys(t.systems).filter(n=>!i.includes(n))];for(const n of s)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(i=>{this.runners[i]=new Ze(i)})}addSystem(t,i){const s=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=s,this._systemsHash[i]=s;for(const n in this.runners)this.runners[n].add(s);return this}emitWithCustomOptions(t,i){const s=Object.keys(this._systemsHash);t.items.forEach(n=>{const r=s.find(o=>this._systemsHash[o]===n);n[t.name](i[r])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Vo=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Vo.defaultMaxIdle,this.checkCountMax=Vo.defaultCheckCountMax,this.mode=Vo.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Oc.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let s=0;s<t.length;s++){const n=t[s];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[s]=null,i=!0)}if(i){let s=0;for(let n=0;n<t.length;n++)t[n]!==null&&(t[s++]=t[n]);t.length=s}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};let je=Vo;je.defaultMode=Oc.AUTO;je.defaultMaxIdle=60*60;je.defaultCheckCountMax=60*10;je.extension={type:et.RendererSystem,name:"textureGC"};ut.add(je);class zl{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=dt.UNSIGNED_BYTE,this.internalFormat=Y.RGBA,this.samplerType=0}}function Nx(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[dt.UNSIGNED_BYTE]:{[Y.RGBA]:e.RGBA8,[Y.RGB]:e.RGB8,[Y.RG]:e.RG8,[Y.RED]:e.R8,[Y.RGBA_INTEGER]:e.RGBA8UI,[Y.RGB_INTEGER]:e.RGB8UI,[Y.RG_INTEGER]:e.RG8UI,[Y.RED_INTEGER]:e.R8UI,[Y.ALPHA]:e.ALPHA,[Y.LUMINANCE]:e.LUMINANCE,[Y.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[dt.BYTE]:{[Y.RGBA]:e.RGBA8_SNORM,[Y.RGB]:e.RGB8_SNORM,[Y.RG]:e.RG8_SNORM,[Y.RED]:e.R8_SNORM,[Y.RGBA_INTEGER]:e.RGBA8I,[Y.RGB_INTEGER]:e.RGB8I,[Y.RG_INTEGER]:e.RG8I,[Y.RED_INTEGER]:e.R8I},[dt.UNSIGNED_SHORT]:{[Y.RGBA_INTEGER]:e.RGBA16UI,[Y.RGB_INTEGER]:e.RGB16UI,[Y.RG_INTEGER]:e.RG16UI,[Y.RED_INTEGER]:e.R16UI,[Y.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[dt.SHORT]:{[Y.RGBA_INTEGER]:e.RGBA16I,[Y.RGB_INTEGER]:e.RGB16I,[Y.RG_INTEGER]:e.RG16I,[Y.RED_INTEGER]:e.R16I},[dt.UNSIGNED_INT]:{[Y.RGBA_INTEGER]:e.RGBA32UI,[Y.RGB_INTEGER]:e.RGB32UI,[Y.RG_INTEGER]:e.RG32UI,[Y.RED_INTEGER]:e.R32UI,[Y.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[dt.INT]:{[Y.RGBA_INTEGER]:e.RGBA32I,[Y.RGB_INTEGER]:e.RGB32I,[Y.RG_INTEGER]:e.RG32I,[Y.RED_INTEGER]:e.R32I},[dt.FLOAT]:{[Y.RGBA]:e.RGBA32F,[Y.RGB]:e.RGB32F,[Y.RG]:e.RG32F,[Y.RED]:e.R32F,[Y.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[dt.HALF_FLOAT]:{[Y.RGBA]:e.RGBA16F,[Y.RGB]:e.RGB16F,[Y.RG]:e.RG16F,[Y.RED]:e.R16F},[dt.UNSIGNED_SHORT_5_6_5]:{[Y.RGB]:e.RGB565},[dt.UNSIGNED_SHORT_4_4_4_4]:{[Y.RGBA]:e.RGBA4},[dt.UNSIGNED_SHORT_5_5_5_1]:{[Y.RGBA]:e.RGB5_A1},[dt.UNSIGNED_INT_2_10_10_10_REV]:{[Y.RGBA]:e.RGB10_A2,[Y.RGBA_INTEGER]:e.RGB10_A2UI},[dt.UNSIGNED_INT_10F_11F_11F_REV]:{[Y.RGB]:e.R11F_G11F_B10F},[dt.UNSIGNED_INT_5_9_9_9_REV]:{[Y.RGB]:e.RGB9_E5},[dt.UNSIGNED_INT_24_8]:{[Y.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[dt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Y.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[dt.UNSIGNED_BYTE]:{[Y.RGBA]:e.RGBA,[Y.RGB]:e.RGB,[Y.ALPHA]:e.ALPHA,[Y.LUMINANCE]:e.LUMINANCE,[Y.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[dt.UNSIGNED_SHORT_5_6_5]:{[Y.RGB]:e.RGB},[dt.UNSIGNED_SHORT_4_4_4_4]:{[Y.RGBA]:e.RGBA},[dt.UNSIGNED_SHORT_5_5_5_1]:{[Y.RGBA]:e.RGBA}},t}class gm{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new pt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Nx(t);const i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(let n=0;n<i;n++)this.boundTextures[n]=null;this.emptyTextures={};const s=new zl(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new zl(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,i=0){const{gl:s}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[i]!==t&&(this.currentLocation!==i&&(this.currentLocation=i,s.activeTexture(s.TEXTURE0+i)),s.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,s.activeTexture(s.TEXTURE0+i)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[i]=t}else this.currentLocation!==i&&(this.currentLocation=i,s.activeTexture(s.TEXTURE0+i)),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[s.TEXTURE_2D].texture),this.boundTextures[i]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:i,boundTextures:s}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<s.length;n++)s[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<s.length;n++)s[n]===t&&(this.currentLocation!==n&&(i.activeTexture(i.TEXTURE0+n),this.currentLocation=n),i.bindTexture(t.target,this.emptyTextures[t.target].texture),s[n]=null)}ensureSamplerType(t){const{boundTextures:i,hasIntegerTextures:s,CONTEXT_UID:n}=this;if(s)for(let r=t-1;r>=0;--r){const o=i[r];o&&o._glTextures[n].samplerType!==Ih.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const i=new zl(this.gl.createTexture());return i.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),i}initTextureType(t,i){var s;i.internalFormat=((s=this.internalFormats[t.type])==null?void 0:s[t.format])??t.format,this.webGLVersion===2&&t.type===dt.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=t.type}updateTexture(t){var n;const i=t._glTextures[this.CONTEXT_UID];if(!i)return;const s=this.renderer;if(this.initTextureType(t,i),(n=t.resource)!=null&&n.upload(s,t,i))i.samplerType!==Ih.FLOAT&&(this.hasIntegerTextures=!0);else{const r=t.realWidth,o=t.realHeight,a=s.gl;(i.width!==r||i.height!==o||i.dirtyId<0)&&(i.width=r,i.height=o,a.texImage2D(t.target,0,i.internalFormat,r,o,0,t.format,i.type,null))}t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId}destroyTexture(t,i){const{gl:s}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),s.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!i)){const n=this.managedTextures.indexOf(t);n!==-1&&gn(this.managedTextures,n,1)}}updateTextureStyle(t){var s;const i=t._glTextures[this.CONTEXT_UID];i&&((t.mipmap===xi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?i.mipmap=!1:i.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?i.wrapMode=ts.CLAMP:i.wrapMode=t.wrapMode,(s=t.resource)!=null&&s.style(this.renderer,t,i)||this.setStyle(t,i),i.dirtyStyleId=t.dirtyStyleId)}setStyle(t,i){const s=this.gl;if(i.mipmap&&t.mipmap!==xi.ON_MANUAL&&s.generateMipmap(t.target),s.texParameteri(t.target,s.TEXTURE_WRAP_S,i.wrapMode),s.texParameteri(t.target,s.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===Fi.LINEAR?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===Fi.LINEAR){const r=Math.min(t.anisotropicLevel,s.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));s.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===Fi.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(t.target,s.TEXTURE_MAG_FILTER,t.scaleMode===Fi.LINEAR?s.LINEAR:s.NEAREST)}destroy(){this.renderer=null}}gm.extension={type:et.RendererSystem,name:"texture"};ut.add(gm);class mm{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:s}=this,n=t._glTransformFeedbacks[s]||this.createGLTransformFeedback(t);i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,i){const{gl:s,renderer:n}=this;i&&n.shader.bind(i),s.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:i,renderer:s,CONTEXT_UID:n}=this,r=i.createTransformFeedback();t._glTransformFeedbacks[n]=r,i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(s.buffer.update(a),a._glBuffers[n].refCount++,i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),r}disposeTransformFeedback(t,i){const s=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const r=this.renderer.buffer;if(r)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!i&&r.dispose(a,i))}s&&(i||n.deleteTransformFeedback(s),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}mm.extension={type:et.RendererSystem,name:"transformFeedback"};ut.add(mm);class qa{constructor(t){this.renderer=t}init(t){this.screen=new _t(0,0,t.width,t.height),this.element=t.view||Q.ADAPTER.createCanvas(),this.resolution=t.resolution||Q.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,i){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(i*this.resolution);const s=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=s,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${s}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",s,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var i;t&&((i=this.element.parentNode)==null||i.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}qa.defaultOptions={width:800,height:600,resolution:Q.RESOLUTION,autoDensity:!1};qa.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"_view"};ut.add(qa);Q.PREFER_ENV=Gs.WEBGL2;Q.STRICT_TEXTURE_CACHE=!1;Q.RENDER_OPTIONS={...$a.defaultOptions,...Ya.defaultOptions,...qa.defaultOptions,...Ka.defaultOptions};Object.defineProperties(Q,{WRAP_MODE:{get(){return pt.defaultOptions.wrapMode},set(e){xt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),pt.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return pt.defaultOptions.scaleMode},set(e){xt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),pt.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return pt.defaultOptions.mipmap},set(e){xt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),pt.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return pt.defaultOptions.anisotropicLevel},set(e){xt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),pt.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return xt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),le.defaultResolution},set(e){le.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return xt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),le.defaultMultisample},set(e){le.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return We.defaultMaxTextures},set(e){xt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),We.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return We.defaultBatchSize},set(e){xt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),We.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return We.canUploadSameBuffer},set(e){xt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),We.canUploadSameBuffer=e}},GC_MODE:{get(){return je.defaultMode},set(e){xt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),je.defaultMode=e}},GC_MAX_IDLE:{get(){return je.defaultMaxIdle},set(e){xt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),je.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return je.defaultCheckCountMax},set(e){xt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),je.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return $e.defaultVertexPrecision},set(e){xt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),$e.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return $e.defaultFragmentPrecision},set(e){xt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),$e.defaultFragmentPrecision=e}}});var Bs=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Bs||{});class Vl{constructor(t,i=null,s=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=i,this.priority=s,this.once=n}match(t,i=null){return this.fn===t&&this.context===i}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const Se=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Vl(null,null,1/0),this.deltaMS=1/Se.targetFPMS,this.elapsedMS=1/Se.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Bs.NORMAL){return this._addListener(new Vl(e,t,i))}addOnce(e,t,i=Bs.NORMAL){return this._addListener(new Vl(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Se.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,Se.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Se._shared){const e=Se._shared=new Se;e.autoStart=!0,e._protected=!0}return Se._shared}static get system(){if(!Se._system){const e=Se._system=new Se;e.autoStart=!0,e._protected=!0}return Se._system}};let ce=Se;ce.targetFPMS=.06;Object.defineProperties(Q,{TARGET_FPMS:{get(){return ce.targetFPMS},set(e){xt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),ce.targetFPMS=e}}});class _m{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,Bs.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ce.shared:new ce,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}_m.extension=et.Application;ut.add(_m);const bm=[];ut.handleByList(et.Renderer,bm);function Ux(e){for(const t of bm)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var Gx=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Hx=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const zx=Gx,ym=Hx;class xm{constructor(t){this.renderer=t}contextChange(t){let i;if(this.renderer.context.webGLVersion===1){const s=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,s)}else{const s=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,s)}i>=qt.HIGH?this.multisample=qt.HIGH:i>=qt.MEDIUM?this.multisample=qt.MEDIUM:i>=qt.LOW?this.multisample=qt.LOW:this.multisample=qt.NONE}destroy(){}}xm.extension={type:et.RendererSystem,name:"_multisample"};ut.add(xm);class Vx{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class vm{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:s}=this,n=t._glBuffers[s]||this.createGLBuffer(t);i.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:i}=this;i.bindBuffer(t,null)}bindBufferBase(t,i){const{gl:s,CONTEXT_UID:n}=this;if(this.boundBufferBases[i]!==t){const r=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[i]=t,s.bindBufferBase(s.UNIFORM_BUFFER,i,r.buffer)}}bindBufferRange(t,i,s){const{gl:n,CONTEXT_UID:r}=this;s=s||0;const o=t._glBuffers[r]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,i||0,o.buffer,s*256,256)}update(t){const{gl:i,CONTEXT_UID:s}=this,n=t._glBuffers[s]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,i.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{const r=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,r)}}dispose(t,i){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const s=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),s&&(i||n.deleteBuffer(s.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const i=Object.keys(this.managedBuffers);for(let s=0;s<i.length;s++)this.dispose(this.managedBuffers[i[s]],t)}createGLBuffer(t){const{CONTEXT_UID:i,gl:s}=this;return t._glBuffers[i]=new Vx(s.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]}}vm.extension={type:et.RendererSystem,name:"buffer"};ut.add(vm);class Em{constructor(t){this.renderer=t}render(t,i){const s=this.renderer;let n,r,o,a;if(i&&(n=i.renderTexture,r=i.clear,o=i.transform,a=i.skipUpdateTransform),this.renderingToScreen=!n,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=o,!s.context.isLost){if(n||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}s.renderTexture.bind(n),s.batch.currentRenderer.start(),(r??s.background.clearBeforeRender)&&s.renderTexture.clear(),t.render(s),s.batch.currentRenderer.flush(),n&&(i.blit&&s.framebuffer.blit(),n.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Em.extension={type:et.RendererSystem,name:"objectRenderer"};ut.add(Em);const Yh=class extends Lx{constructor(e){super(),this.type=Mg.WEBGL,e=Object.assign({},Q.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Je({projectionMatrix:new kt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Yh.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(xt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Yh.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:p1()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return xt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return xt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return xt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return xt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){xt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return xt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){xt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return xt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Dn=Yh;Dn.extension={type:et.Renderer,priority:1};Dn.__plugins={};Dn.__systems={};ut.handleByMap(et.RendererPlugin,Dn.__plugins);ut.handleByMap(et.RendererSystem,Dn.__systems);ut.add(Dn);class wm extends Sr{constructor(t,i){const{width:s,height:n}=i||{};super(s,n),this.items=[],this.itemDirtyIds=[];for(let r=0;r<t;r++){const o=new pt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,i){for(let s=0;s<this.length;s++)t[s]&&(t[s].castToBaseTexture?this.addBaseTextureAt(t[s].castToBaseTexture(),s):t[s]instanceof Sr?this.addResourceAt(t[s],s):this.addResourceAt(Ug(t[s],i),s))}dispose(){for(let t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,i){if(!this.items[i])throw new Error(`Index ${i} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)}unbind(t){super.unbind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)}load(){if(this._load)return this._load;const i=this.items.map(s=>s.resource).filter(s=>s).map(s=>s.load());return this._load=Promise.all(i).then(()=>{const{realWidth:s,realHeight:n}=this.items[0];return this.resize(s,n),Promise.resolve(this)}),this._load}}class Wx extends wm{constructor(t,i){const{width:s,height:n}=i||{};let r,o;Array.isArray(t)?(r=t,o=t.length):o=t,super(o,{width:s,height:n}),r&&this.initFromArray(r,i)}addBaseTextureAt(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=dn.TEXTURE_2D_ARRAY}upload(t,i,s){const{length:n,itemDirtyIds:r,items:o}=this,{gl:a}=t;s.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,n,0,i.format,s.type,null);for(let l=0;l<n;l++){const h=o[l];r[l]<h.dirtyId&&(r[l]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,h.resource.width,h.resource.height,1,i.format,s.type,h.resource.source))}return!0}}class jx extends as{constructor(t){super(t)}static test(t){const{OffscreenCanvas:i}=globalThis;return i&&t instanceof i?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const qn=class extends wm{constructor(e,t){const{width:i,height:s,autoLoad:n,linkBaseTexture:r}=t||{};if(e&&e.length!==qn.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:s});for(let o=0;o<qn.SIDES;o++)this.items[o].target=dn.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=r!==!1,e&&this.initFromArray(e,t),n!==!1&&this.load()}bind(e){super.bind(e),e.target=dn.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=dn.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const s=this.itemDirtyIds;for(let n=0;n<qn.SIDES;n++){const r=this.items[n];(s[n]<r.dirtyId||i.dirtyId<t.dirtyId)&&(r.valid&&r.resource?(r.resource.upload(e,r,i),s[n]=r.dirtyId):s[n]<-1&&(e.gl.texImage2D(r.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),s[n]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===qn.SIDES}};let Sm=qn;Sm.SIDES=6;class hn extends as{constructor(t,i){i=i||{};let s,n;typeof t=="string"?(s=hn.EMPTY,n=t):(s=t,n=null),super(s),this.url=n,this.crossOrigin=i.crossOrigin??!0,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,i)=>{if(this.url===null){t(this);return}try{const s=await Q.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await s.blob();if(this.destroyed)return;const r=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===si.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=r,this.update(),t(this)}catch(s){if(this.destroyed)return;i(s),this.onError.emit(s)}}),this._load)}upload(t,i,s){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),super.upload(t,i,s)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return hn._EMPTY=hn._EMPTY??Q.ADAPTER.createCanvas(0,0),hn._EMPTY}}const Wo=class extends as{constructor(e,t){t=t||{},super(Q.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},Wo.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;as.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/i*t,n=this._overrideHeight||this._overrideWidth/t*i),s=Math.round(s),n=Math.round(n);const r=this.source;r.width=s,r.height=n,r._pixiId=`canvas_${Fs()}`,r.getContext("2d").drawImage(e,0,0,t,i,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(e){const t=Wo.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Wo.SVG_XML.test(e)}};let Tr=Wo;Tr.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Tr.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const $h=class extends as{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];as.crossOrigin(i,s,t.crossorigin);for(let n=0;n<e.length;++n){const r=document.createElement("source");let{src:o,mime:a}=e[n];o=o||e[n];const l=o.split("?").shift().toLowerCase(),h=l.slice(l.lastIndexOf(".")+1);a=a||$h.MIME_TYPES[h]||`video/${h}`,r.src=o,r.type=a,i.appendChild(r)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=ce.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ce.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(ce.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(ce.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(ce.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ce.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||$h.TYPES.includes(t)}};let Nc=$h;Nc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Nc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Hh.push(hn,qg,jx,Nc,Tr,Nr,Sm,Wx);class ma{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?_t.EMPTY:(t=t||new _t(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,i){const{a:s,b:n,c:r,d:o,tx:a,ty:l}=t,h=s*i.x+r*i.y+a,c=n*i.x+o*i.y+l;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let i=this.minX,s=this.minY,n=this.maxX,r=this.maxY,o=t[0],a=t[1];i=o<i?o:i,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,o=t[2],a=t[3],i=o<i?o:i,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,o=t[4],a=t[5],i=o<i?o:i,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,o=t[6],a=t[7],i=o<i?o:i,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,this.minX=i,this.minY=s,this.maxX=n,this.maxY=r}addFrame(t,i,s,n,r){this.addFrameMatrix(t.worldTransform,i,s,n,r)}addFrameMatrix(t,i,s,n,r){const o=t.a,a=t.b,l=t.c,h=t.d,c=t.tx,u=t.ty;let d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,m=o*i+l*s+c,_=a*i+h*s+u;d=m<d?m:d,f=_<f?_:f,p=m>p?m:p,g=_>g?_:g,m=o*n+l*s+c,_=a*n+h*s+u,d=m<d?m:d,f=_<f?_:f,p=m>p?m:p,g=_>g?_:g,m=o*i+l*r+c,_=a*i+h*r+u,d=m<d?m:d,f=_<f?_:f,p=m>p?m:p,g=_>g?_:g,m=o*n+l*r+c,_=a*n+h*r+u,d=m<d?m:d,f=_<f?_:f,p=m>p?m:p,g=_>g?_:g,this.minX=d,this.minY=f,this.maxX=p,this.maxY=g}addVertexData(t,i,s){let n=this.minX,r=this.minY,o=this.maxX,a=this.maxY;for(let l=i;l<s;l+=2){const h=t[l],c=t[l+1];n=h<n?h:n,r=c<r?c:r,o=h>o?h:o,a=c>a?c:a}this.minX=n,this.minY=r,this.maxX=o,this.maxY=a}addVertices(t,i,s,n){this.addVerticesMatrix(t.worldTransform,i,s,n)}addVerticesMatrix(t,i,s,n,r=0,o=r){const a=t.a,l=t.b,h=t.c,c=t.d,u=t.tx,d=t.ty;let f=this.minX,p=this.minY,g=this.maxX,m=this.maxY;for(let _=s;_<n;_+=2){const b=i[_],y=i[_+1],E=a*b+h*y+u,x=c*y+l*b+d;f=Math.min(f,E-r),g=Math.max(g,E+r),p=Math.min(p,x-o),m=Math.max(m,x+o)}this.minX=f,this.minY=p,this.maxX=g,this.maxY=m}addBounds(t){const i=this.minX,s=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<i?t.minX:i,this.minY=t.minY<s?t.minY:s,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r}addBoundsMask(t,i){const s=t.minX>i.minX?t.minX:i.minX,n=t.minY>i.minY?t.minY:i.minY,r=t.maxX<i.maxX?t.maxX:i.maxX,o=t.maxY<i.maxY?t.maxY:i.maxY;if(s<=r&&n<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=s<a?s:a,this.minY=n<l?n:l,this.maxX=r>h?r:h,this.maxY=o>c?o:c}}addBoundsMatrix(t,i){this.addFrameMatrix(i,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,i){const s=t.minX>i.x?t.minX:i.x,n=t.minY>i.y?t.minY:i.y,r=t.maxX<i.x+i.width?t.maxX:i.x+i.width,o=t.maxY<i.y+i.height?t.maxY:i.y+i.height;if(s<=r&&n<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=s<a?s:a,this.minY=n<l?n:l,this.maxX=r>h?r:h,this.maxY=o>c?o:c}}pad(t=0,i=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i)}addFramePad(t,i,s,n,r,o){t-=r,i-=o,s+=r,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>s?this.maxX:s,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>n?this.maxY:n}}class zt extends Os{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Lc,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ma,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const i=Object.keys(t);for(let s=0;s<i.length;++s){const n=i[s];Object.defineProperty(zt.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new _t),i=this._boundsRect),this._bounds.getRectangle(i)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new _t),t=this._localBoundsRect),this._localBounds||(this._localBounds=new ma);const i=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,r=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=s,this.transform=i,this._bounds=n,this._bounds.updateID+=this._boundsID-r,o}toGlobal(t,i,s=!1){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)}toLocal(t,i,s,n){return i&&(t=i.toGlobal(t,s,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,i=0,s=1,n=1,r=0,o=0,a=0,l=0,h=0){return this.position.x=t,this.position.y=i,this.scale.x=s||1,this.scale.y=n||1,this.rotation=r,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Xx),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*z1}set angle(t){this.transform.rotation=t*V1}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=t,this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}}}class Xx extends zt{constructor(){super(...arguments),this.sortDirty=null}}zt.prototype.displayObjectUpdateTransform=zt.prototype.updateTransform;const Yx=new kt;function $x(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const Kh=class extends zt{constructor(){super(),this.children=[],this.sortableChildren=Kh.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),s=this.getChildIndex(t);this.children[i]=t,this.children[s]=e,this.onChildrenChange(i<s?i:s)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);gn(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,gn(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,gn(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,s=t,n=s-i;let r;if(n>0&&n<=s){r=this.children.splice(i,n);for(let o=0;o<r.length;++o)r[o].parent=null,r[o].transform&&(r[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<r.length;++o)r[o].emit("removed",this),this.emit("childRemoved",r[o],this,o);return r}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const s=this.children[t];s._lastSortedIndex=t,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort($x),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let s=0,n=this.children.length;s<n;++s){const r=this.children[s];r.visible&&r.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,s;this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==Kh.prototype._render&&(i=this.getBounds(!0));const n=e.projection.transform;if(n&&(s?(s=Yx.copyFrom(s),s.prepend(n)):s=n),i&&t.intersects(i,s))this._render(e);else if(this.cullArea)return;for(let r=0,o=this.children.length;r<o;++r){const a=this.children[r],l=a.cullable;a.cullable=l||!this.cullArea,a.render(e),a.cullable=l}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(e)}}renderAdvanced(e){var n,r,o;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const s=t&&((n=this._enabledFilters)==null?void 0:n.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Zt.NONE));if(s&&e.batch.flush(),t&&((r=this._enabledFilters)!=null&&r.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(e)}s&&e.batch.flush(),i&&e.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<i.length;++s)i[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let Oe=Kh;Oe.defaultSortableChildren=!1;Oe.prototype.containerUpdateTransform=Oe.prototype.updateTransform;Object.defineProperties(Q,{SORTABLE_CHILDREN:{get(){return Oe.defaultSortableChildren},set(e){xt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Oe.defaultSortableChildren=e}}});const zn=new Tt,Kx=new Uint16Array([0,1,2,0,2,3]);class On extends Oe{constructor(t){super(),this._anchor=new Ki(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new It(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ft.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ht.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=Kx,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Q.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=$i(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=$i(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const i=this.transform.worldTransform,s=i.a,n=i.b,r=i.c,o=i.d,a=i.tx,l=i.ty,h=this.vertexData,c=t.trim,u=t.orig,d=this._anchor;let f=0,p=0,g=0,m=0;if(c?(p=c.x-d._x*u.width,f=p+c.width,m=c.y-d._y*u.height,g=m+c.height):(p=-d._x*u.width,f=p+u.width,m=-d._y*u.height,g=m+u.height),h[0]=s*p+r*m+a,h[1]=o*m+n*p+l,h[2]=s*f+r*m+a,h[3]=o*m+n*f+l,h[4]=s*f+r*g+a,h[5]=o*g+n*f+l,h[6]=s*p+r*g+a,h[7]=o*g+n*p+l,this._roundPixels){const _=Q.RESOLUTION;for(let b=0;b<h.length;++b)h[b]=Math.round(h[b]*_)/_}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,i=this.vertexTrimmedData,s=t.orig,n=this._anchor,r=this.transform.worldTransform,o=r.a,a=r.b,l=r.c,h=r.d,c=r.tx,u=r.ty,d=-n._x*s.width,f=d+s.width,p=-n._y*s.height,g=p+s.height;i[0]=o*d+l*p+c,i[1]=h*p+a*d+u,i[2]=o*f+l*p+c,i[3]=h*p+a*f+u,i[4]=o*f+l*g+c,i[5]=h*g+a*f+u,i[6]=o*d+l*g+c,i[7]=h*g+a*d+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new ma),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new _t),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,zn);const i=this._texture.orig.width,s=this._texture.orig.height,n=-i*this.anchor.x;let r=0;return zn.x>=n&&zn.x<n+i&&(r=-s*this.anchor.y,zn.y>=r&&zn.y<r+s)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!s)}this._texture=null}static from(t,i){const s=t instanceof ht?t:ht.from(t,i);return new On(s)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const i=$i(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const i=$i(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ht.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Tm=new kt;zt.prototype._cacheAsBitmap=!1;zt.prototype._cacheData=null;zt.prototype._cacheAsBitmapResolution=null;zt.prototype._cacheAsBitmapMultisample=null;class qx{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(zt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new qx),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});zt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};zt.prototype._initCachedDisplayObject=function(t){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const i=this.alpha;this.alpha=1,t.batch.flush();const s=this.getLocalBounds(null,!0).clone();if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;s.pad(p)}s.ceil(Q.RESOLUTION);const n=t.renderTexture.current,r=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=Hs.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${Fs()}`;this._cacheData.textureCacheId=h,pt.addToCache(l.baseTexture,h),ht.addToCache(l,h);const c=this.transform.localTransform.copyTo(Tm).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(n,r,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const u=new On(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(s.x/s.width),u.anchor.y=-(s.y/s.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)};zt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};zt.prototype._initCachedDisplayObjectCanvas=function(t){var c;if((c=this._cacheData)!=null&&c.sprite)return;const i=this.getLocalBounds(null,!0),s=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,r=t._projTransform;i.ceil(Q.RESOLUTION);const o=Hs.create({width:i.width,height:i.height}),a=`cacheAsBitmap_${Fs()}`;this._cacheData.textureCacheId=a,pt.addToCache(o.baseTexture,a),ht.addToCache(o,a);const l=Tm;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=i.x,l.ty-=i.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=s;const h=new On(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(i.x/i.width),h.anchor.y=-(i.y/i.height),h.alpha=s,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};zt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};zt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};zt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,pt.removeFromCache(this._cacheData.textureCacheId),ht.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};zt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};zt.prototype.name=null;Oe.prototype.getChildByName=function(t,i){for(let s=0,n=this.children.length;s<n;s++)if(this.children[s].name===t)return this.children[s];if(i)for(let s=0,n=this.children.length;s<n;s++){const r=this.children[s];if(!r.getChildByName)continue;const o=r.getChildByName(t,!0);if(o)return o}return null};zt.prototype.getGlobalPosition=function(t=new Tt,i=!1){return this.parent?this.parent.toGlobal(this.position,t,i):(t.x=this.position.x,t.y=this.position.y),t};var Zx=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class Jx extends le{constructor(t=1){super(zx,Zx,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const Qx={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},tv=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function ev(e){const t=Qx[e],i=t.length;let s=tv,n="";const r="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<e;a++){let l=r.replace("%index%",a.toString());o=a,a>=i&&(o=e-a-1),l=l.replace("%value%",t[o].toString()),n+=l,n+=`
`}return s=s.replace("%blur%",n),s=s.replace("%size%",e.toString()),s}const iv=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function sv(e,t){const i=Math.ceil(e/2);let s=iv,n="",r;t?r="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":r="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let a=r.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(i-1)}.0`),n+=a,n+=`
`}return s=s.replace("%blur%",n),s=s.replace("%size%",e.toString()),s}class qh extends le{constructor(t,i=8,s=4,n=le.defaultResolution,r=5){const o=sv(r,t),a=ev(r);super(o,a),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=s,this.blur=i}apply(t,i,s,n){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/i.width):this.uniforms.strength=1/s.height*(s.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,s,n);else{const r=t.getFilterTexture(),o=t.renderer;let a=i,l=r;this.state.blend=!1,t.applyFilter(this,a,l,hi.CLEAR);for(let h=1;h<this.passes-1;h++){t.bindAndClear(a,hi.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,s,n),t.returnFilterTexture(r)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class nv extends le{constructor(t=8,i=4,s=le.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new qh(!0,t,i,s,n),this.blurYFilter=new qh(!1,t,i,s,n),this.resolution=s,this.quality=i,this.blur=t,this.repeatEdgePixels=!1}apply(t,i,s,n){const r=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(r&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,i,a,hi.CLEAR),this.blurYFilter.apply(t,a,s,n),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,i,s,n):this.blurXFilter.apply(t,i,s,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var rv=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Zh extends le{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(ym,rv,t),this.alpha=1}_loadMatrix(t,i=!1){let s=t;i&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s}_multiply(t,i,s){return t[0]=i[0]*s[0]+i[1]*s[5]+i[2]*s[10]+i[3]*s[15],t[1]=i[0]*s[1]+i[1]*s[6]+i[2]*s[11]+i[3]*s[16],t[2]=i[0]*s[2]+i[1]*s[7]+i[2]*s[12]+i[3]*s[17],t[3]=i[0]*s[3]+i[1]*s[8]+i[2]*s[13]+i[3]*s[18],t[4]=i[0]*s[4]+i[1]*s[9]+i[2]*s[14]+i[3]*s[19]+i[4],t[5]=i[5]*s[0]+i[6]*s[5]+i[7]*s[10]+i[8]*s[15],t[6]=i[5]*s[1]+i[6]*s[6]+i[7]*s[11]+i[8]*s[16],t[7]=i[5]*s[2]+i[6]*s[7]+i[7]*s[12]+i[8]*s[17],t[8]=i[5]*s[3]+i[6]*s[8]+i[7]*s[13]+i[8]*s[18],t[9]=i[5]*s[4]+i[6]*s[9]+i[7]*s[14]+i[8]*s[19]+i[9],t[10]=i[10]*s[0]+i[11]*s[5]+i[12]*s[10]+i[13]*s[15],t[11]=i[10]*s[1]+i[11]*s[6]+i[12]*s[11]+i[13]*s[16],t[12]=i[10]*s[2]+i[11]*s[7]+i[12]*s[12]+i[13]*s[17],t[13]=i[10]*s[3]+i[11]*s[8]+i[12]*s[13]+i[13]*s[18],t[14]=i[10]*s[4]+i[11]*s[9]+i[12]*s[14]+i[13]*s[19]+i[14],t[15]=i[15]*s[0]+i[16]*s[5]+i[17]*s[10]+i[18]*s[15],t[16]=i[15]*s[1]+i[16]*s[6]+i[17]*s[11]+i[18]*s[16],t[17]=i[15]*s[2]+i[16]*s[7]+i[17]*s[12]+i[18]*s[17],t[18]=i[15]*s[3]+i[16]*s[8]+i[17]*s[13]+i[18]*s[18],t[19]=i[15]*s[4]+i[16]*s[9]+i[17]*s[14]+i[18]*s[19]+i[19],t}_colorMatrix(t){const i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(t,i){const s=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(s,i)}tint(t,i){const[s,n,r]=It.shared.setValue(t).toArray(),o=[s,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(o,i)}greyscale(t,i){const s=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(s,i)}blackAndWhite(t){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)}hue(t,i){t=(t||0)/180*Math.PI;const s=Math.cos(t),n=Math.sin(t),r=Math.sqrt,o=1/3,a=r(o),l=s+(1-s)*o,h=o*(1-s)-a*n,c=o*(1-s)+a*n,u=o*(1-s)+a*n,d=s+o*(1-s),f=o*(1-s)-a*n,p=o*(1-s)-a*n,g=o*(1-s)+a*n,m=s+o*(1-s),_=[l,h,c,0,0,u,d,f,0,0,p,g,m,0,0,0,0,0,1,0];this._loadMatrix(_,i)}contrast(t,i){const s=(t||0)+1,n=-.5*(s-1),r=[s,0,0,0,n,0,s,0,0,n,0,0,s,0,n,0,0,0,1,0];this._loadMatrix(r,i)}saturate(t=0,i){const s=t*2/3+1,n=(s-1)*-.5,r=[s,n,n,0,0,n,s,n,0,0,n,n,s,0,0,0,0,0,1,0];this._loadMatrix(r,i)}desaturate(){this.saturate(-1)}negative(t){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)}sepia(t){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)}technicolor(t){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)}polaroid(t){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)}toBGR(t){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)}kodachrome(t){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)}browni(t){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)}vintage(t){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)}colorTone(t,i,s,n,r){t=t||.2,i=i||.15,s=s||16770432,n=n||3375104;const o=It.shared,[a,l,h]=o.setValue(s).toArray(),[c,u,d]=o.setValue(n).toArray(),f=[.3,.59,.11,0,0,a,l,h,t,0,c,u,d,i,0,a-c,l-u,h-d,0,0];this._loadMatrix(f,r)}night(t,i){t=t||.1;const s=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(s,i)}predator(t,i){const s=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(s,i)}lsd(t){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Zh.prototype.grayscale=Zh.prototype.greyscale;var ov=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,av=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class lv extends le{constructor(t,i){const s=new kt;t.renderable=!1,super(av,ov,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=s,i==null&&(i=20),this.scale=new Tt(i,i)}apply(t,i,s,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const r=this.maskSprite.worldTransform,o=Math.sqrt(r.a*r.a+r.b*r.b),a=Math.sqrt(r.c*r.c+r.d*r.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=r.a/o,this.uniforms.rotation[1]=r.b/o,this.uniforms.rotation[2]=r.c/a,this.uniforms.rotation[3]=r.d/a),t.applyFilter(this,i,s,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var hv=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,cv=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class uv extends le{constructor(){super(cv,hv)}}var dv=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class fv extends le{constructor(t=.5,i=Math.random()){super(ym,dv,{uNoise:0,uSeed:0}),this.noise=t,this.seed=i}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const md={AlphaFilter:Jx,BlurFilter:nv,BlurFilterPass:qh,ColorMatrixFilter:Zh,DisplacementFilter:lv,FXAAFilter:uv,NoiseFilter:fv};Object.entries(md).forEach(([e,t])=>{Object.defineProperty(md,e,{get(){return xt("7.1.0",`filters.${e} has moved to ${e}`),t}})});class pv{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(ce.system.add(this.tickerUpdate,this,Bs.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(ce.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Yi=new pv;class Ur{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Ur.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Tt,this.page=new Tt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,i,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,i,s,n,r){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class _a extends Ur{constructor(){super(...arguments),this.client=new Tt,this.movement=new Tt,this.offset=new Tt,this.global=new Tt,this.screen=new Tt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,i,s){return t.worldTransform.applyInverse(s||this.global,i)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,i,s,n,r,o,a,l,h,c,u,d,f,p,g){throw new Error("Method not implemented.")}}class He extends _a{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Sn extends _a{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Sn.DOM_DELTA_PIXEL=0;Sn.DOM_DELTA_LINE=1;Sn.DOM_DELTA_PAGE=2;const gv=2048,mv=new Tt,Wl=new Tt;class _v{constructor(t){this.dispatch=new Os,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,i){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:i,priority:0}),this.mappingTable[t].sort((s,n)=>s.priority-n.priority)}dispatchEvent(t,i){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,i),this.dispatch.emit(i||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const i=this.mappingTable[t.type];if(i)for(let s=0,n=i.length;s<n;s++)i[s].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,i){Yi.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[n](this.rootTarget,this.rootTarget.eventMode,mv.set(t,i),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,i){if(!t.target)return;const s=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,r=s.length-1;n<r;n++)if(t.currentTarget=s[n],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,i),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=s.length-2;n>=0;n--)if(t.currentTarget=s[n],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,i,s=this._allInteractiveElements){if(s.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const n=Array.isArray(i)?i:[i];for(let r=s.length-1;r>=0;r--)n.forEach(o=>{t.currentTarget=s[r],this.notifyTarget(t,o)})}propagationPath(t){const i=[t];for(let s=0;s<gv&&t!==this.rootTarget;s++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(t.parent),t=t.parent}return i.reverse(),i}hitTestMoveRecursive(t,i,s,n,r,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(Yi.pauseUpdate=!1),t.interactiveChildren&&t.children){const c=t.children;for(let u=c.length-1;u>=0;u--){const d=c[u],f=this.hitTestMoveRecursive(d,this._isInteractive(i)?i:d.eventMode,s,n,r,o||r(t,s));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=t.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(t),f.push(t)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(i),h=t.isInteractive();return h&&h&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!r(t,s)&&n(t,s)?h?[t]:[]:null}hitTestRecursive(t,i,s,n,r){if(this._interactivePrune(t)||r(t,s))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(Yi.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let h=l.length-1;h>=0;h--){const c=l[h],u=this.hitTestRecursive(c,this._isInteractive(i)?i:c.eventMode,s,n,r);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const d=t.isInteractive();return(u.length>0||d)&&u.push(t),u}}}const o=this._isInteractive(i),a=t.isInteractive();return o&&n(t,s)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,i){var s;if(t.hitArea&&(t.worldTransform.applyInverse(i,Wl),!t.hitArea.contains(Wl.x,Wl.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!((s=n.containsPoint)!=null&&s.call(n,i)))return!0}return!1}hitTestFn(t,i){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(i):!1}notifyTarget(t,i){var r,o;i=i??t.type;const s=`on${i}`;(o=(r=t.currentTarget)[s])==null||o.call(r,t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${i}capture`:i;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,i)}mapPointerDown(t){if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const n=i.button===2;this.dispatchEvent(i,n?"rightdown":"mousedown")}const s=this.trackingData(t.pointerId);s.pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(t){var l,h;if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const s=i.pointerType==="mouse"||i.pointerType==="pen",n=this.trackingData(t.pointerId),r=this.findMountedTarget(n.overTargets);if(((l=n.overTargets)==null?void 0:l.length)>0&&r!==i.target){const c=t.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(t,c,r);if(this.dispatchEvent(u,"pointerout"),s&&this.dispatchEvent(u,"mouseout"),!i.composedPath().includes(r)){const d=this.createPointerEvent(t,"pointerleave",r);for(d.eventPhase=d.AT_TARGET;d.target&&!i.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),s&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(u)}if(r!==i.target){const c=t.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(i,c);this.dispatchEvent(u,"pointerover"),s&&this.dispatchEvent(u,"mouseover");let d=r==null?void 0:r.parent;for(;d&&d!==this.rootTarget.parent&&d!==i.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(i,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==r&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),s&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(u)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(i,"pointermove"),a&&o.push("globalpointermove"),i.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),a&&o.push("globaltouchmove")),s&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(h=i.target)==null?void 0:h.cursor),o.length>0&&this.all(i,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(t){var o;if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),s=this.createPointerEvent(t),n=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),n&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(o=s.target)==null?void 0:o.cursor);const r=this.clonePointerEvent(s,"pointerenter");for(r.eventPhase=r.AT_TARGET;r.target&&r.target!==this.rootTarget.parent;)r.currentTarget=r.target,this.notifyTarget(r),n&&this.notifyTarget(r,"mouseenter"),r.target=r.target.parent;i.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(r)}mapPointerOut(t){if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId);if(i.overTargets){const s=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(i.overTargets),r=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(r),s&&this.dispatchEvent(r,"mouseout");const o=this.createPointerEvent(t,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;i.overTargets=null,this.freeEvent(r),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),s=this.createPointerEvent(t);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const a=s.button===2;this.dispatchEvent(s,a?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[t.button]);let o=r;if(r&&!s.composedPath().includes(r)){let a=r;for(;a&&!s.composedPath().includes(a);){if(s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const l=s.button===2;this.notifyTarget(s,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(s,"click");a.target=o,a.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:i});const l=n.clicksByButton[t.button];if(l.target===a.target&&i-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=i,a.detail=l.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(s)}mapPointerUpOutside(t){if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(s){let r=s;for(;r;)n.currentTarget=r,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),r=r.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof Sn)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(t);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(t){if(!t)return null;let i=t[0];for(let s=1;s<t.length&&t[s].parent===i;s++)i=t[s];return i}createPointerEvent(t,i,s){const n=this.allocateEvent(He);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=s??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof i=="string"&&(n.type=i),n}createWheelEvent(t){const i=this.allocateEvent(Sn);return this.copyWheelData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(t,i){const s=this.allocateEvent(He);return s.nativeEvent=t.nativeEvent,s.originalEvent=t.originalEvent,this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.target=t.target,s.path=t.composedPath().slice(),s.type=i??s.type,s}copyWheelData(t,i){i.deltaMode=t.deltaMode,i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ}copyPointerData(t,i){t instanceof He&&i instanceof He&&(i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist)}copyMouseData(t,i){t instanceof _a&&i instanceof _a&&(i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.copyFrom(t.client),i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.copyFrom(t.movement),i.screen.copyFrom(t.screen),i.shiftKey=t.shiftKey,i.global.copyFrom(t.global))}copyData(t,i){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.detail=t.detail,i.view=t.view,i.which=t.which,i.layer.copyFrom(t.layer),i.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const i=this.eventPool.get(t).pop()||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(t)}notifyListeners(t,i){const s=t.currentTarget._events[i];if(s&&t.currentTarget.isInteractive())if("fn"in s)s.once&&t.currentTarget.removeListener(i,s.fn,void 0,!0),s.fn.call(s.context,t);else for(let n=0,r=s.length;n<r&&!t.propagationImmediatelyStopped;n++)s[n].once&&t.currentTarget.removeListener(i,s[n].fn,void 0,!0),s[n].fn.call(s[n].context,t)}}const bv=1,yv={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Jh=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new _v(null),Yi.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new He(null),this.rootWheelEvent=new Sn(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Jh.defaultEventFeatures},{set:(t,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[i]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,Jh._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,s=t.length;i<s;i++){const n=t[i],r=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;Yi.pointerMoved();const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let n=0,r=s.length;n<r;n++){const o=this.bootstrapEvent(this.rootPointerEvent,s[n]);o.type+=i,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Yi.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Yi.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Yi.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){let s;this.domElement.parentElement?s=this.domElement.getBoundingClientRect():s={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const n=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*n,e.y=(i-s.top)*(this.domElement.height/s.height)*n}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,s=e.changedTouches.length;i<s;i++){const n=e.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=bv),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=yv[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let Ar=Jh;Ar.extension={name:"events",type:[et.RendererSystem,et.CanvasRendererSystem]};Ar.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};ut.add(Ar);function _d(e){return e==="dynamic"||e==="static"}const xv={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??_d(Ar.defaultEventMode)},set interactive(e){xt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Ar.defaultEventMode},set eventMode(e){this._internalInteractive=_d(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,i){const s=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,n=typeof t=="function"?void 0:t;e=s?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,n)},removeEventListener(e,t,i){const s=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,n=typeof t=="function"?void 0:t;e=s?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,n)},dispatchEvent(e){if(!(e instanceof Ur))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};zt.mixin(xv);const vv={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};zt.mixin(vv);const Ev=9,co=100,wv=0,Sv=0,bd=2,yd=1,Tv=-1e3,Av=-1e3,Cv=2;class Am{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Bi.tablet||Bi.phone)&&this.createTouchHook();const i=document.createElement("div");i.style.width=`${co}px`,i.style.height=`${co}px`,i.style.position="absolute",i.style.top=`${wv}px`,i.style.left=`${Sv}px`,i.style.zIndex=bd.toString(),this.div=i,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${yd}px`,t.style.height=`${yd}px`,t.style.position="absolute",t.style.top=`${Tv}px`,t.style.left=`${Av}px`,t.style.zIndex=Cv.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const i=t.children;if(i)for(let s=0;s<i.length;s++)this.updateAccessibleObjects(i[s])}update(){const t=performance.now();if(Bi.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:i,y:s,width:n,height:r}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,h=n/o*l,c=r/a*l;let u=this.div;u.style.left=`${i}px`,u.style.top=`${s}px`,u.style.width=`${o}px`,u.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,gn(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{u=f._accessibleDiv;let p=f.hitArea;const g=f.worldTransform;f.hitArea?(u.style.left=`${(g.tx+p.x*g.a)*h}px`,u.style.top=`${(g.ty+p.y*g.d)*c}px`,u.style.width=`${p.width*g.a*h}px`,u.style.height=`${p.height*g.d*c}px`):(p=f.getBounds(),this.capHitArea(p),u.style.left=`${p.x*h}px`,u.style.top=`${p.y*c}px`,u.style.width=`${p.width*h}px`,u.style.height=`${p.height*c}px`,u.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(u.title=f.accessibleTitle),u.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&u.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==u.title||f.tabIndex!==u.tabIndex)&&(u.title=f.accessibleTitle,u.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:i,height:s}=this.renderer;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>s&&(t.height=s-t.y)}addChild(t){let i=this.pool.pop();i||(i=document.createElement("button"),i.style.width=`${co}px`,i.style.height=`${co}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=bd.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=t.accessiblePointerEvents,i.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?i.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(i.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&i.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(i),t._accessibleActive=!0,t._accessibleDiv=i,i.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,i){const{displayObject:s}=t.target,n=this.renderer.events.rootBoundary,r=Object.assign(new Ur(n),{target:s});n.rootTarget=this.renderer.lastObjectRendered,i.forEach(o=>n.dispatchEvent(r,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===Ev&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Am.extension={name:"accessibility",type:[et.RendererPlugin,et.CanvasRendererPlugin]};ut.add(Am);const Qh=class{constructor(e){this.stage=new Oe,e=Object.assign({forceCanvas:!1},e),this.renderer=Ux(e),Qh._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const i=Qh._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let Uc=Qh;Uc._plugins=[];ut.handleByList(et.Application,Uc._plugins);class Cm{static init(t){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let i,s;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:r}=this._resizeTo;i=n,s=r}this.renderer.resize(i,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Cm.extension=et.Application;ut.add(Cm);const xd={loader:et.LoadParser,resolver:et.ResolveParser,cache:et.CacheParser,detection:et.DetectionParser};ut.handle(et.Asset,e=>{const t=e.ref;Object.entries(xd).filter(([i])=>!!t[i]).forEach(([i,s])=>ut.add(Object.assign(t[i],{extension:t[i].extension??s})))},e=>{const t=e.ref;Object.keys(xd).filter(i=>!!t[i]).forEach(i=>ut.remove(t[i]))});class Mv{constructor(t,i=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(t){t.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<i;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Gr(e,t){if(Array.isArray(t)){for(const i of t)if(e.startsWith(`data:${i}`))return!0;return!1}return e.startsWith(`data:${t}`)}function zs(e,t){const i=e.split("?")[0],s=de.extname(i).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const Gi=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(i=>typeof i=="string"?t(i):i):e),tc=(e,t)=>{const i=t.split("?")[1];return i&&(e+=`?${i}`),e};function Mm(e,t,i,s,n){const r=t[i];for(let o=0;o<r.length;o++){const a=r[o];i<t.length-1?Mm(e.replace(s[i],a),t,i+1,s,n):n.push(e.replace(s[i],a))}}function Iv(e){const t=/\{(.*?)\}/g,i=e.match(t),s=[];if(i){const n=[];i.forEach(r=>{const o=r.substring(1,r.length-1).split(",");n.push(o)}),Mm(e,n,0,i,s)}else s.push(e);return s}const ba=e=>!Array.isArray(e);class Pv{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const s=Gi(t);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(i)){n=l.getCacheableAssets(s,i);break}}n||(n={},s.forEach(a=>{n[a]=i}));const r=Object.keys(n),o={cacheKeys:r,keys:s};if(s.forEach(a=>{this._cacheMap.set(a,o)}),r.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==i&&console.warn("[Cache] already has key:",a),this._cache.set(a,n[a])}),i instanceof ht){const a=i;s.forEach(l=>{a.baseTexture!==ht.EMPTY.baseTexture&&pt.addToCache(a.baseTexture,l),ht.addToCache(a,l)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(n=>{this._cache.delete(n)}),i.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Vn=new Pv;class Rv{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,i,s)=>(this._parsersValidated=!1,t[i]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,i){const s={promise:null,parser:null};return s.promise=(async()=>{var o,a;let n=null,r=null;if(i.loadParser&&(r=this._parserHash[i.loadParser],r||console.warn(`[Assets] specified load parser "${i.loadParser}" not found while loading ${t}`)),!r){for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.load&&((o=h.test)!=null&&o.call(h,t,i,this))){r=h;break}}if(!r)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await r.load(t,i,this),s.parser=r;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];h.parse&&h.parse&&await((a=h.testParse)==null?void 0:a.call(h,n,i,this))&&(n=await h.parse(n,i,this)||n,s.parser=h)}return n})(),s}async load(t,i){this._parsersValidated||this._validateParsers();let s=0;const n={},r=ba(t),o=Gi(t,h=>({src:h})),a=o.length,l=o.map(async h=>{const c=de.toAbsolute(h.src);if(!n[h.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,h)),n[h.src]=await this.promiseCache[c].promise,i&&i(++s/a)}catch(u){throw delete this.promiseCache[c],delete n[h.src],new Error(`[Loader.load] Failed to load ${c}.
${u}`)}});return await Promise.all(l),r?n[o[0].src]:n}async unload(t){const s=Gi(t,n=>({src:n})).map(async n=>{var a,l;const r=de.toAbsolute(n.src),o=this.promiseCache[r];if(o){const h=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,h,n,this),delete this.promiseCache[r]}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,i)=>(t[i.name]&&console.warn(`[Assets] loadParser name conflict "${i.name}"`),{...t,[i.name]:i}),{})}}var Ei=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(Ei||{});const Dv=".json",Ov="application/json",kv={extension:{type:et.LoadParser,priority:Ei.Low},name:"loadJson",test(e){return Gr(e,Ov)||zs(e,Dv)},async load(e){return await(await Q.ADAPTER.fetch(e)).json()}};ut.add(kv);const Fv=".txt",Bv="text/plain",Lv={name:"loadTxt",extension:{type:et.LoadParser,priority:Ei.Low},test(e){return Gr(e,Bv)||zs(e,Fv)},async load(e){return await(await Q.ADAPTER.fetch(e)).text()}};ut.add(Lv);const Nv=["normal","bold","100","200","300","400","500","600","700","800","900"],Uv=[".ttf",".otf",".woff",".woff2"],Gv=["font/ttf","font/otf","font/woff","font/woff2"],Hv=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function zv(e){const t=de.extname(e),n=de.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let r=n.length>0;for(const a of n)if(!a.match(Hv)){r=!1;break}let o=n.join(" ");return r||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const Vv={extension:{type:et.LoadParser,priority:Ei.Low},name:"loadWebFont",test(e){return Gr(e,Gv)||zs(e,Uv)},async load(e,t){var s,n,r;const i=Q.ADAPTER.getFontFaceSet();if(i){const o=[],a=((s=t.data)==null?void 0:s.family)??zv(e),l=((r=(n=t.data)==null?void 0:n.weights)==null?void 0:r.filter(c=>Nv.includes(c)))??["normal"],h=t.data??{};for(let c=0;c<l.length;c++){const u=l[c],d=new FontFace(a,`url(${encodeURI(e)})`,{...h,weight:u});await d.load(),i.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>Q.ADAPTER.getFontFaceSet().delete(t))}};ut.add(Vv);let vd=0,jl;const Wv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",jv={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${Wv}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},Xv={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Xl;class Yv{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const i=URL.createObjectURL(new Blob([jv.code],{type:"application/javascript"})),s=new Worker(i);s.addEventListener("message",n=>{s.terminate(),URL.revokeObjectURL(i),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){jl===void 0&&(jl=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<jl&&(Xl||(Xl=URL.createObjectURL(new Blob([Xv.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Xl),t.addEventListener("message",i=>{this.complete(i.data),this.returnWorker(i.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,i){await this._initWorkers();const s=new Promise((n,r)=>{this.queue.push({id:t,arguments:i,resolve:n,reject:r})});return this.next(),s}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const i=this.queue.pop(),s=i.id;this.resolveHash[vd]={resolve:i.resolve,reject:i.reject},t.postMessage({data:i.arguments,uuid:vd++,id:s})}}const Ed=new Yv;function Za(e,t,i){const s=new ht(e);return s.baseTexture.on("dispose",()=>{delete t.promiseCache[i]}),s}const $v=[".jpeg",".jpg",".png",".webp",".avif"],Kv=["image/jpeg","image/png","image/webp","image/avif"];async function qv(e){const t=await Q.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const i=await t.blob();return await createImageBitmap(i)}const Ja={name:"loadTextures",extension:{type:et.LoadParser,priority:Ei.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return Gr(e,Kv)||zs(e,$v)},async load(e,t,i){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Ed.isImageBitmapSupported()?s=await Ed.loadImageBitmap(e):s=await qv(e):s=await new Promise(r=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=e,s.complete?r(s):s.onload=()=>{r(s)}});const n=new pt(s,{resolution:rs(e),...t.data});return n.resource.src=e,Za(n,i,e)},unload(e){e.destroy(!0)}};ut.add(Ja);const Zv=".svg",Jv="image/svg+xml",Qv={extension:{type:et.LoadParser,priority:Ei.High},name:"loadSVG",test(e){return Gr(e,Jv)||zs(e,Zv)},async testParse(e){return Tr.test(e)},async parse(e,t,i){var o;const s=new Tr(e,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);await s.load();const n=new pt(s,{resolution:rs(e),...t==null?void 0:t.data});return n.resource.src=e,Za(n,i,e)},async load(e,t){return(await Q.ADAPTER.fetch(e)).text()},unload:Ja.unload};ut.add(Qv);class tE{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(i[s])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const s=[];Array.isArray(i)?i.forEach(n=>{if(typeof n.name=="string"){const r=this._createBundleAssetId(t,n.name);s.push(r),this.add([n.name,r],n.srcs,n.data)}else{const r=n.name.map(o=>this._createBundleAssetId(t,o));r.forEach(o=>{s.push(o)}),this.add([...n.name,...r],n.srcs)}}):Object.keys(i).forEach(n=>{s.push(this._createBundleAssetId(t,n)),this.add([n,this._createBundleAssetId(t,n)],i[n])}),this._bundles[t]=s}add(t,i,s){const n=Gi(t);n.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(i)||(typeof i=="string"?i=Iv(i):i=[i]);const r=i.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let h=0;h<this._parsers.length;h++){const c=this._parsers[h];if(c.test(o)){a=c.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=n),(this._basePath||this._rootPath)&&(a.src=de.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??s,a});n.forEach(o=>{this._assetMap[o]=r})}resolveBundle(t){const i=ba(t);t=Gi(t);const s={};return t.forEach(n=>{const r=this._bundles[n];if(r){const o=this.resolve(r),a={};for(const l in o){const h=o[l];a[this._extractAssetIdFromBundle(n,l)]=h}s[n]=a}}),i?s[t[0]]:s}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const s={};for(const n in i)s[n]=i[n].src;return s}return i.src}resolve(t){const i=ba(t);t=Gi(t);const s={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let r=this._assetMap[n];const o=this._getPreferredOrder(r),a=r[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(h=>{const c=r.filter(u=>u[l]?u[l]===h:!1);c.length&&(r=c)})}),this._resolverHash[n]=r[0]??a}else{let r=n;(this._basePath||this._rootPath)&&(r=de.toAbsolute(r,this._basePath,this._rootPath)),r=this._appendDefaultSearchParams(r),this._resolverHash[n]={src:r}}s[n]=this._resolverHash[n]}),i?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const s=t[0],n=this._preferredOrder.find(r=>r.params.format.includes(s.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}}class eE{constructor(){this._detections=[],this._initialized=!1,this.resolver=new tE,this.loader=new Rv,this.cache=Vn,this._backgroundLoader=new Mv(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var r,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const i=((r=t.texturePreference)==null?void 0:r.resolution)??1,s=typeof i=="number"?[i]:i;let n=[];if((o=t.texturePreference)!=null&&o.format){const l=(a=t.texturePreference)==null?void 0:a.format;n=typeof l=="string"?[l]:l;for(const h of this._detections)await h.test()||(n=await h.remove(n))}else for(const l of this._detections)await l.test()&&(n=await l.add(n));this.resolver.prefer({params:{format:n,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t,i,s){this.resolver.add(t,i,s)}async load(t,i){this._initialized||await this.init();const s=ba(t),n=Gi(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),r=this.resolver.resolve(n),o=await this._mapLoadToResolve(r,i);return s?o[n[0]]:o}addBundle(t,i){this.resolver.addBundle(t,i)}async loadBundle(t,i){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const n=this.resolver.resolveBundle(t),r={},o=Object.keys(n);let a=0,l=0;const h=()=>{i==null||i(++a/l)},c=o.map(u=>{const d=n[u];return l+=Object.keys(d).length,this._mapLoadToResolve(d,h).then(f=>{r[u]=f})});return await Promise.all(c),s?r[t[0]]:r}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolveBundle(t);Object.values(i).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Vn.get(t);const i={};for(let s=0;s<t.length;s++)i[s]=Vn.get(t[s]);return i}async _mapLoadToResolve(t,i){const s=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const r=await this.loader.load(s,i);this._backgroundLoader.active=!0;const o={};return s.forEach((a,l)=>{const h=r[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[n[l]]=h,Vn.set(c,h)}),o}async unload(t){this._initialized||await this.init();const i=Gi(t).map(n=>typeof n!="string"?n.src:n),s=this.resolver.resolve(i);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=Gi(t);const i=this.resolver.resolveBundle(t),s=Object.keys(i).map(n=>this._unloadFromResolved(i[n]));await Promise.all(s)}async _unloadFromResolved(t){const i=Object.values(t);i.forEach(s=>{Vn.remove(s.src)}),await this.loader.unload(i)}get detections(){return this._detections}get preferWorkers(){return Ja.config.preferWorkers}set preferWorkers(t){xt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(s=>s in t).forEach(s=>{i.config[s]=t[s]})})}}const uo=new eE;ut.handleByList(et.LoadParser,uo.loader.parsers).handleByList(et.ResolveParser,uo.resolver.parsers).handleByList(et.CacheParser,uo.cache.parsers).handleByList(et.DetectionParser,uo.detections);const iE={extension:et.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof ht),getCacheableAssets:(e,t)=>{const i={};return e.forEach(s=>{t.forEach((n,r)=>{i[s+(r===0?"":r+1)]=n})}),i}};ut.add(iE);const sE={extension:{type:et.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await Q.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};ut.add(sE);const nE={extension:{type:et.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await Q.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};ut.add(nE);const wd=["png","jpg","jpeg"],rE={extension:{type:et.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...wd],remove:async e=>e.filter(t=>!wd.includes(t))};ut.add(rE);const oE={extension:et.ResolveParser,test:Ja.test,parse:e=>{var t;return{resolution:parseFloat(((t=Q.RETINA_PREFIX.exec(e))==null?void 0:t[1])??"1"),format:e.split(".").pop(),src:e}}};ut.add(oE);var Ae=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(Ae||{});const ya={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let Ri,nn;function Sd(){nn={s3tc:Ri.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ri.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Ri.getExtension("WEBGL_compressed_texture_etc"),etc1:Ri.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Ri.getExtension("WEBGL_compressed_texture_pvrtc")||Ri.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Ri.getExtension("WEBGL_compressed_texture_atc"),astc:Ri.getExtension("WEBGL_compressed_texture_astc")}}const aE={extension:{type:et.DetectionParser,priority:2},test:async()=>{const t=Q.ADAPTER.createCanvas().getContext("webgl");return t?(Ri=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{nn||Sd();const t=[];for(const i in nn)nn[i]&&t.push(i);return[...t,...e]},remove:async e=>(nn||Sd(),e.filter(t=>!(t in nn)))};ut.add(aE);class lE extends Nr{constructor(t,i={width:1,height:1,autoLoad:!0}){let s,n;typeof t=="string"?(s=t,n=new Uint8Array):(s=null,n=t),super(n,i),this.origin=s,this.buffer=n?new Gh(n):null,this._load=null,this.loaded=!1,this.origin!==null&&i.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new Gh(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Is extends lE{constructor(t,i){super(t,i),this.format=i.format,this.levels=i.levels||1,this._width=i.width,this._height=i.height,this._extension=Is._formatToExtension(this.format),(i.levelBuffers||this.buffer)&&(this._levelBuffers=i.levelBuffers||Is._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,i,s){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:h,levelHeight:c,levelBuffer:u}=this._levelBuffers[o];n.compressedTexImage2D(n.TEXTURE_2D,l,this.format,h,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=Is._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,i,s,n,r,o,a){const l=new Array(s);let h=t.byteOffset,c=o,u=a,d=c+n-1&~(n-1),f=u+r-1&~(r-1),p=d*f*ya[i];for(let g=0;g<s;g++)l[g]={levelID:g,levelWidth:s>1?c:d,levelHeight:s>1?u:f,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,c=c>>1||1,u=u>>1||1,d=c+n-1&~(n-1),f=u+r-1&~(r-1),p=d*f*ya[i];return l}}const Yl=4,fo=124,hE=32,Td=20,cE=542327876,po={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},uE={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},go={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},dE=1,fE=2,pE=4,gE=64,mE=512,_E=131072,bE=827611204,yE=861165636,xE=894720068,vE=808540228,EE=4,wE={[bE]:Ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,[yE]:Ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,[xE]:Ae.COMPRESSED_RGBA_S3TC_DXT5_EXT},SE={[70]:Ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:Ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:Ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:Ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:Ae.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:Ae.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:Ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:Ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:Ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function TE(e){const t=new Uint32Array(e);if(t[0]!==cE)throw new Error("Invalid DDS file magic word");const s=new Uint32Array(e,0,fo/Uint32Array.BYTES_PER_ELEMENT),n=s[po.HEIGHT],r=s[po.WIDTH],o=s[po.MIPMAP_COUNT],a=new Uint32Array(e,po.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,hE/Uint32Array.BYTES_PER_ELEMENT),l=a[dE];if(l&pE){const h=a[uE.FOURCC];if(h!==vE){const y=wE[h],E=Yl+fo,x=new Uint8Array(e,E);return[new Is(x,{format:y,width:r,height:n,levels:o})]}const c=Yl+fo,u=new Uint32Array(t.buffer,c,Td/Uint32Array.BYTES_PER_ELEMENT),d=u[go.DXGI_FORMAT],f=u[go.RESOURCE_DIMENSION],p=u[go.MISC_FLAG],g=u[go.ARRAY_SIZE],m=SE[d];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(p===EE)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const _=new Array,b=Yl+fo+Td;if(g===1)_.push(new Uint8Array(e,b));else{const y=ya[m];let E=0,x=r,T=n;for(let C=0;C<o;C++){const R=Math.max(1,x+3&-4),I=Math.max(1,T+3&-4),S=R*I*y;E+=S,x=x>>>1,T=T>>>1}let A=b;for(let C=0;C<g;C++)_.push(new Uint8Array(e,A,E)),A+=E}return _.map(y=>new Is(y,{format:m,width:r,height:n,levels:o}))}throw l&gE?new Error("DDSParser does not support uncompressed texture data."):l&mE?new Error("DDSParser does not supported YUV uncompressed texture data."):l&_E?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&fE?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Ad=[171,75,84,88,32,49,49,187,13,10,26,10],AE=67305985,Ue={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},ec=64,Cd={[dt.UNSIGNED_BYTE]:1,[dt.UNSIGNED_SHORT]:2,[dt.INT]:4,[dt.UNSIGNED_INT]:4,[dt.FLOAT]:4,[dt.HALF_FLOAT]:8},CE={[Y.RGBA]:4,[Y.RGB]:3,[Y.RG]:2,[Y.RED]:1,[Y.LUMINANCE]:1,[Y.LUMINANCE_ALPHA]:2,[Y.ALPHA]:1},ME={[dt.UNSIGNED_SHORT_4_4_4_4]:2,[dt.UNSIGNED_SHORT_5_5_5_1]:2,[dt.UNSIGNED_SHORT_5_6_5]:2};function IE(e,t,i=!1){const s=new DataView(t);if(!PE(e,s))return null;const n=s.getUint32(Ue.ENDIANNESS,!0)===AE,r=s.getUint32(Ue.GL_TYPE,n),o=s.getUint32(Ue.GL_FORMAT,n),a=s.getUint32(Ue.GL_INTERNAL_FORMAT,n),l=s.getUint32(Ue.PIXEL_WIDTH,n),h=s.getUint32(Ue.PIXEL_HEIGHT,n)||1,c=s.getUint32(Ue.PIXEL_DEPTH,n)||1,u=s.getUint32(Ue.NUMBER_OF_ARRAY_ELEMENTS,n)||1,d=s.getUint32(Ue.NUMBER_OF_FACES,n),f=s.getUint32(Ue.NUMBER_OF_MIPMAP_LEVELS,n),p=s.getUint32(Ue.BYTES_OF_KEY_VALUE_DATA,n);if(h===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");const g=4,m=4,_=l+3&-4,b=h+3&-4,y=new Array(u);let E=l*h;r===0&&(E=_*b);let x;if(r!==0?Cd[r]?x=Cd[r]*CE[o]:x=ME[r]:x=ya[a],x===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=i?DE(s,p,n):null;let C=E*x,R=l,I=h,S=_,F=b,O=ec+p;for(let v=0;v<f;v++){const w=s.getUint32(O,n);let B=O+4;for(let P=0;P<u;P++){let N=y[P];N||(N=y[P]=new Array(f)),N[v]={levelID:v,levelWidth:f>1||r!==0?R:S,levelHeight:f>1||r!==0?I:F,levelBuffer:new Uint8Array(t,B,C)},B+=C}O+=w+4,O=O%4!==0?O+4-O%4:O,R=R>>1||1,I=I>>1||1,S=R+g-1&~(g-1),F=I+m-1&~(m-1),C=S*F*x}return r!==0?{uncompressed:y.map(v=>{let w=v[0].levelBuffer,B=!1;return r===dt.FLOAT?w=new Float32Array(v[0].levelBuffer.buffer,v[0].levelBuffer.byteOffset,v[0].levelBuffer.byteLength/4):r===dt.UNSIGNED_INT?(B=!0,w=new Uint32Array(v[0].levelBuffer.buffer,v[0].levelBuffer.byteOffset,v[0].levelBuffer.byteLength/4)):r===dt.INT&&(B=!0,w=new Int32Array(v[0].levelBuffer.buffer,v[0].levelBuffer.byteOffset,v[0].levelBuffer.byteLength/4)),{resource:new Nr(w,{width:v[0].levelWidth,height:v[0].levelHeight}),type:r,format:B?RE(o):o}}),kvData:T}:{compressed:y.map(v=>new Is(null,{format:a,width:l,height:h,levels:f,levelBuffers:v})),kvData:T}}function PE(e,t){for(let i=0;i<Ad.length;i++)if(t.getUint8(i)!==Ad[i])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function RE(e){switch(e){case Y.RGBA:return Y.RGBA_INTEGER;case Y.RGB:return Y.RGB_INTEGER;case Y.RG:return Y.RG_INTEGER;case Y.RED:return Y.RED_INTEGER;default:return e}}function DE(e,t,i){const s=new Map;let n=0;for(;n<t;){const r=e.getUint32(ec+n,i),o=ec+n+4,a=3-(r+3)%4;if(r===0||r>t-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<r&&e.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(e.buffer,o,l)),c=new DataView(e.buffer,o+l+1,r-l-1);s.set(h,c),n+=4+r+a}return s}const OE={extension:{type:et.LoadParser,priority:Ei.High},name:"loadDDS",test(e){return zs(e,".dds")},async load(e,t,i){const n=await(await Q.ADAPTER.fetch(e)).arrayBuffer(),o=TE(n).map(a=>{const l=new pt(a,{mipmap:xi.OFF,alphaMode:si.NO_PREMULTIPLIED_ALPHA,resolution:rs(e),...t.data});return Za(l,i,e)});return o.length===1?o[0]:o},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};ut.add(OE);const kE={extension:{type:et.LoadParser,priority:Ei.High},name:"loadKTX",test(e){return zs(e,".ktx")},async load(e,t,i){const n=await(await Q.ADAPTER.fetch(e)).arrayBuffer(),{compressed:r,uncompressed:o,kvData:a}=IE(e,n),l=r??o,h={mipmap:xi.OFF,alphaMode:si.NO_PREMULTIPLIED_ALPHA,resolution:rs(e),...t.data},c=l.map(u=>{l===o&&Object.assign(h,{type:u.type,format:u.format});const d=new pt(u,h);return d.ktxKeyValueData=a,Za(d,i,e)});return c.length===1?c[0]:c},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};ut.add(kE);const FE={extension:et.ResolveParser,test:e=>{const i=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(i)},parse:e=>{var s,n;if(e.split("?")[0].split(".").pop()==="ktx"){const r=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(r.some(o=>e.endsWith(o)))return{resolution:parseFloat(((s=Q.RETINA_PREFIX.exec(e))==null?void 0:s[1])??"1"),format:r.find(o=>e.endsWith(o)),src:e}}return{resolution:parseFloat(((n=Q.RETINA_PREFIX.exec(e))==null?void 0:n[1])??"1"),format:e.split(".").pop(),src:e}}};ut.add(FE);const BE=new _t,LE=4,Zn=class{constructor(e){this.renderer=e}async image(e,t,i){const s=new Image;return s.src=await this.base64(e,t,i),s}async base64(e,t,i){const s=this.canvas(e);if(s.toBlob!==void 0)return new Promise((n,r)=>{s.toBlob(o=>{if(!o){r(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>n(a.result),a.onerror=r,a.readAsDataURL(o)},t,i)});if(s.toDataURL!==void 0)return s.toDataURL(t,i);if(s.convertToBlob!==void 0){const n=await s.convertToBlob({type:t,quality:i});return new Promise((r,o)=>{const a=new FileReader;a.onload=()=>r(a.result),a.onerror=o,a.readAsDataURL(n)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:s,height:n,flipY:r}=this._rawPixels(e,t);r&&Zn._flipY(i,s,n),Zn._unpremultiplyAlpha(i);const o=new I1(s,n,1),a=new ImageData(new Uint8ClampedArray(i.buffer),s,n);return o.context.putImageData(a,0,0),o.canvas}pixels(e,t){const{pixels:i,width:s,height:n,flipY:r}=this._rawPixels(e,t);return r&&Zn._flipY(i,s,n),Zn._unpremultiplyAlpha(i),i}_rawPixels(e,t){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let s,n=!1,r,o=!1;if(e&&(e instanceof Hs?r=e:(r=i.generateTexture(e,{resolution:i.resolution,multisample:i.multisample}),o=!0)),r){if(s=r.baseTexture.resolution,t=t??r.frame,n=!1,!o){i.renderTexture.bind(r);const u=r.framebuffer.glFramebuffers[i.CONTEXT_UID];u.blitFramebuffer&&i.framebuffer.bind(u.blitFramebuffer)}}else s=i.resolution,t||(t=BE,t.width=i.width/s,t.height=i.height/s),n=!0,i.renderTexture.bind();const a=Math.round(t.width*s),l=Math.round(t.height*s),h=new Uint8Array(LE*a*l),c=i.gl;return c.readPixels(Math.round(t.x*s),Math.round(t.y*s),a,l,c.RGBA,c.UNSIGNED_BYTE,h),o&&(r==null||r.destroy(!0)),{pixels:h,width:a,height:l,flipY:n}}destroy(){this.renderer=null}static _flipY(e,t,i){const s=t<<2,n=i>>1,r=new Uint8Array(s);for(let o=0;o<n;o++){const a=o*s,l=(i-o-1)*s;r.set(e.subarray(a,a+s)),e.copyWithin(a,l,l+s),e.set(r,l)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let i=0;i<t;i+=4){const s=e[i+3];if(s!==0){const n=255.001/s;e[i]=e[i]*n+.5,e[i+1]=e[i+1]*n+.5,e[i+2]=e[i+2]*n+.5}}}};let Im=Zn;Im.extension={name:"extract",type:et.RendererSystem};ut.add(Im);const xa={build(e){const t=e.points;let i,s,n,r,o,a;if(e.type===ae.CIRC){const p=e.shape;i=p.x,s=p.y,o=a=p.radius,n=r=0}else if(e.type===ae.ELIP){const p=e.shape;i=p.x,s=p.y,o=p.width,a=p.height,n=r=0}else{const p=e.shape,g=p.width/2,m=p.height/2;i=p.x+g,s=p.y+m,o=a=Math.max(0,Math.min(p.radius,Math.min(g,m))),n=g-o,r=m-a}if(!(o>=0&&a>=0&&n>=0&&r>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),h=l*8+(n?4:0)+(r?4:0);if(t.length=h,h===0)return;if(l===0){t.length=8,t[0]=t[6]=i+n,t[1]=t[3]=s+r,t[2]=t[4]=i-n,t[5]=t[7]=s-r;return}let c=0,u=l*4+(n?2:0)+2,d=u,f=h;{const p=n+o,g=r,m=i+p,_=i-p,b=s+g;if(t[c++]=m,t[c++]=b,t[--u]=b,t[--u]=_,r){const y=s-g;t[d++]=_,t[d++]=y,t[--f]=y,t[--f]=m}}for(let p=1;p<l;p++){const g=Math.PI/2*(p/l),m=n+Math.cos(g)*o,_=r+Math.sin(g)*a,b=i+m,y=i-m,E=s+_,x=s-_;t[c++]=b,t[c++]=E,t[--u]=E,t[--u]=y,t[d++]=y,t[d++]=x,t[--f]=x,t[--f]=b}{const p=n,g=r+a,m=i+p,_=i-p,b=s+g,y=s-g;t[c++]=m,t[c++]=b,t[--f]=y,t[--f]=m,n&&(t[c++]=_,t[c++]=b,t[--f]=y,t[--f]=_)}},triangulate(e,t){const i=e.points,s=t.points,n=t.indices;if(i.length===0)return;let r=s.length/2;const o=r;let a,l;if(e.type!==ae.RREC){const c=e.shape;a=c.x,l=c.y}else{const c=e.shape;a=c.x+c.width/2,l=c.y+c.height/2}const h=e.matrix;s.push(e.matrix?h.a*a+h.c*l+h.tx:a,e.matrix?h.b*a+h.d*l+h.ty:l),r++,s.push(i[0],i[1]);for(let c=2;c<i.length;c+=2)s.push(i[c],i[c+1]),n.push(r++,o,r);n.push(o+1,o,r)}};function Md(e,t=!1){const i=e.length;if(i<6)return;let s=0;for(let n=0,r=e[i-2],o=e[i-1];n<i;n+=2){const a=e[n],l=e[n+1];s+=(a-r)*(l+o),r=a,o=l}if(!t&&s>0||t&&s<=0){const n=i/2;for(let r=n+n%2;r<i;r+=2){const o=i-r-2,a=i-r-1,l=r,h=r+1;[e[o],e[l]]=[e[l],e[o]],[e[a],e[h]]=[e[h],e[a]]}}}const Pm={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let i=e.points;const s=e.holes,n=t.points,r=t.indices;if(i.length>=6){Md(i,!1);const o=[];for(let h=0;h<s.length;h++){const c=s[h];Md(c.points,!0),o.push(i.length/2),i=i.concat(c.points)}const a=ua(i,o,2);if(!a)return;const l=n.length/2;for(let h=0;h<a.length;h+=3)r.push(a[h]+l),r.push(a[h+1]+l),r.push(a[h+2]+l);for(let h=0;h<i.length;h++)n.push(i[h])}}},NE={build(e){const t=e.shape,i=t.x,s=t.y,n=t.width,r=t.height,o=e.points;o.length=0,n>=0&&r>=0&&o.push(i,s,i+n,s,i+n,s+r,i,s+r)},triangulate(e,t){const i=e.points,s=t.points;if(i.length===0)return;const n=s.length/2;s.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},UE={build(e){xa.build(e)},triangulate(e,t){xa.triangulate(e,t)}};var Ve=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Ve||{}),Cs=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(Cs||{});const Tn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let i=Math.ceil(e/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}};class Id{static curveTo(t,i,s,n,r,o){const a=o[o.length-2],h=o[o.length-1]-i,c=a-t,u=n-i,d=s-t,f=Math.abs(h*d-c*u);if(f<1e-8||r===0)return(o[o.length-2]!==t||o[o.length-1]!==i)&&o.push(t,i),null;const p=h*h+c*c,g=u*u+d*d,m=h*u+c*d,_=r*Math.sqrt(p)/f,b=r*Math.sqrt(g)/f,y=_*m/p,E=b*m/g,x=_*d+b*c,T=_*u+b*h,A=c*(b+y),C=h*(b+y),R=d*(_+E),I=u*(_+E),S=Math.atan2(C-T,A-x),F=Math.atan2(I-T,R-x);return{cx:x+t,cy:T+i,radius:r,startAngle:S,endAngle:F,anticlockwise:c*u>d*h}}static arc(t,i,s,n,r,o,a,l,h){const c=a-o,u=Tn._segmentsCount(Math.abs(c)*r,Math.ceil(Math.abs(c)/ga)*40),d=c/(u*2),f=d*2,p=Math.cos(d),g=Math.sin(d),m=u-1,_=m%1/m;for(let b=0;b<=m;++b){const y=b+_*b,E=d+o+f*y,x=Math.cos(E),T=-Math.sin(E);h.push((p*x+g*T)*r+s,(p*-T+g*x)*r+n)}}}class GE{constructor(){this.reset()}begin(t,i,s){this.reset(),this.style=t,this.start=i,this.attribStart=s}end(t,i){this.attribSize=i-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Gc{static curveLength(t,i,s,n,r,o,a,l){let c=0,u=0,d=0,f=0,p=0,g=0,m=0,_=0,b=0,y=0,E=0,x=t,T=i;for(let A=1;A<=10;++A)u=A/10,d=u*u,f=d*u,p=1-u,g=p*p,m=g*p,_=m*t+3*g*u*s+3*p*d*r+f*a,b=m*i+3*g*u*n+3*p*d*o+f*l,y=x-_,E=T-b,x=_,T=b,c+=Math.sqrt(y*y+E*E);return c}static curveTo(t,i,s,n,r,o,a){const l=a[a.length-2],h=a[a.length-1];a.length-=2;const c=Tn._segmentsCount(Gc.curveLength(l,h,t,i,s,n,r,o));let u=0,d=0,f=0,p=0,g=0;a.push(l,h);for(let m=1,_=0;m<=c;++m)_=m/c,u=1-_,d=u*u,f=d*u,p=_*_,g=p*_,a.push(f*l+3*d*_*t+3*u*p*s+g*r,f*h+3*d*_*i+3*u*p*n+g*o)}}function Pd(e,t,i,s,n,r,o,a){const l=e-i*n,h=t-s*n,c=e+i*r,u=t+s*r;let d,f;o?(d=s,f=-i):(d=-s,f=i);const p=l+d,g=h+f,m=c+d,_=u+f;return a.push(p,g,m,_),2}function gs(e,t,i,s,n,r,o,a){const l=i-e,h=s-t;let c=Math.atan2(l,h),u=Math.atan2(n-e,r-t);a&&c<u?c+=Math.PI*2:!a&&c>u&&(u+=Math.PI*2);let d=c;const f=u-c,p=Math.abs(f),g=Math.sqrt(l*l+h*h),m=(15*p*Math.sqrt(g)/Math.PI>>0)+1,_=f/m;if(d+=_,a){o.push(e,t,i,s);for(let b=1,y=d;b<m;b++,y+=_)o.push(e,t,e+Math.sin(y)*g,t+Math.cos(y)*g);o.push(e,t,n,r)}else{o.push(i,s,e,t);for(let b=1,y=d;b<m;b++,y+=_)o.push(e+Math.sin(y)*g,t+Math.cos(y)*g,e,t);o.push(n,r,e,t)}return m*2}function HE(e,t){const i=e.shape;let s=e.points||i.points.slice();const n=t.closePointEps;if(s.length===0)return;const r=e.lineStyle,o=new Tt(s[0],s[1]),a=new Tt(s[s.length-2],s[s.length-1]),l=i.type!==ae.POLY||i.closeStroke,h=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){s=s.slice(),h&&(s.pop(),s.pop(),a.set(s[s.length-2],s[s.length-1]));const P=(o.x+a.x)*.5,N=(a.y+o.y)*.5;s.unshift(P,N),s.push(P,N)}const c=t.points,u=s.length/2;let d=s.length;const f=c.length/2,p=r.width/2,g=p*p,m=r.miterLimit*r.miterLimit;let _=s[0],b=s[1],y=s[2],E=s[3],x=0,T=0,A=-(b-E),C=_-y,R=0,I=0,S=Math.sqrt(A*A+C*C);A/=S,C/=S,A*=p,C*=p;const F=r.alignment,O=(1-F)*2,v=F*2;l||(r.cap===Cs.ROUND?d+=gs(_-A*(O-v)*.5,b-C*(O-v)*.5,_-A*O,b-C*O,_+A*v,b+C*v,c,!0)+2:r.cap===Cs.SQUARE&&(d+=Pd(_,b,A,C,O,v,!0,c))),c.push(_-A*O,b-C*O,_+A*v,b+C*v);for(let P=1;P<u-1;++P){_=s[(P-1)*2],b=s[(P-1)*2+1],y=s[P*2],E=s[P*2+1],x=s[(P+1)*2],T=s[(P+1)*2+1],A=-(b-E),C=_-y,S=Math.sqrt(A*A+C*C),A/=S,C/=S,A*=p,C*=p,R=-(E-T),I=y-x,S=Math.sqrt(R*R+I*I),R/=S,I/=S,R*=p,I*=p;const N=y-_,k=b-E,D=y-x,z=T-E,j=N*D+k*z,J=k*D-z*N,H=J<0;if(Math.abs(J)<.001*Math.abs(j)){c.push(y-A*O,E-C*O,y+A*v,E+C*v),j>=0&&(r.join===Ve.ROUND?d+=gs(y,E,y-A*O,E-C*O,y-R*O,E-I*O,c,!1)+4:d+=2,c.push(y-R*v,E-I*v,y+R*O,E+I*O));continue}const L=(-A+_)*(-C+E)-(-A+y)*(-C+b),U=(-R+x)*(-I+E)-(-R+y)*(-I+T),V=(N*U-D*L)/J,$=(z*L-k*U)/J,nt=(V-y)*(V-y)+($-E)*($-E),K=y+(V-y)*O,ct=E+($-E)*O,bt=y-(V-y)*v,Et=E-($-E)*v,mt=Math.min(N*N+k*k,D*D+z*z),pe=H?O:v,Le=mt+pe*pe*g,Wi=nt<=Le;let wi=r.join;if(wi===Ve.MITER&&nt/g>m&&(wi=Ve.BEVEL),Wi)switch(wi){case Ve.MITER:{c.push(K,ct,bt,Et);break}case Ve.BEVEL:{H?c.push(K,ct,y+A*v,E+C*v,K,ct,y+R*v,E+I*v):c.push(y-A*O,E-C*O,bt,Et,y-R*O,E-I*O,bt,Et),d+=2;break}case Ve.ROUND:{H?(c.push(K,ct,y+A*v,E+C*v),d+=gs(y,E,y+A*v,E+C*v,y+R*v,E+I*v,c,!0)+4,c.push(K,ct,y+R*v,E+I*v)):(c.push(y-A*O,E-C*O,bt,Et),d+=gs(y,E,y-A*O,E-C*O,y-R*O,E-I*O,c,!1)+4,c.push(y-R*O,E-I*O,bt,Et));break}}else{switch(c.push(y-A*O,E-C*O,y+A*v,E+C*v),wi){case Ve.MITER:{H?c.push(bt,Et,bt,Et):c.push(K,ct,K,ct),d+=2;break}case Ve.ROUND:{H?d+=gs(y,E,y+A*v,E+C*v,y+R*v,E+I*v,c,!0)+2:d+=gs(y,E,y-A*O,E-C*O,y-R*O,E-I*O,c,!1)+2;break}}c.push(y-R*O,E-I*O,y+R*v,E+I*v),d+=2}}_=s[(u-2)*2],b=s[(u-2)*2+1],y=s[(u-1)*2],E=s[(u-1)*2+1],A=-(b-E),C=_-y,S=Math.sqrt(A*A+C*C),A/=S,C/=S,A*=p,C*=p,c.push(y-A*O,E-C*O,y+A*v,E+C*v),l||(r.cap===Cs.ROUND?d+=gs(y-A*(O-v)*.5,E-C*(O-v)*.5,y-A*O,E-C*O,y+A*v,E+C*v,c,!1)+2:r.cap===Cs.SQUARE&&(d+=Pd(y,E,A,C,O,v,!1,c)));const w=t.indices,B=Tn.epsilon*Tn.epsilon;for(let P=f;P<d+f-2;++P)_=c[P*2],b=c[P*2+1],y=c[(P+1)*2],E=c[(P+1)*2+1],x=c[(P+2)*2],T=c[(P+2)*2+1],!(Math.abs(_*(E-T)+y*(T-b)+x*(b-E))<B)&&w.push(P,P+1,P+2)}function zE(e,t){let i=0;const s=e.shape,n=e.points||s.points,r=s.type!==ae.POLY||s.closeStroke;if(n.length===0)return;const o=t.points,a=t.indices,l=n.length/2,h=o.length/2;let c=h;for(o.push(n[0],n[1]),i=1;i<l;i++)o.push(n[i*2],n[i*2+1]),a.push(c,c+1),c++;r&&a.push(c,h)}function Rd(e,t){e.lineStyle.native?zE(e,t):HE(e,t)}class Hc{static curveLength(t,i,s,n,r,o){const a=t-2*s+r,l=i-2*n+o,h=2*s-2*t,c=2*n-2*i,u=4*(a*a+l*l),d=4*(a*h+l*c),f=h*h+c*c,p=2*Math.sqrt(u+d+f),g=Math.sqrt(u),m=2*u*g,_=2*Math.sqrt(f),b=d/g;return(m*p+g*d*(p-_)+(4*f*u-d*d)*Math.log((2*g+b+p)/(b+_)))/(4*m)}static curveTo(t,i,s,n,r){const o=r[r.length-2],a=r[r.length-1],l=Tn._segmentsCount(Hc.curveLength(o,a,t,i,s,n));let h=0,c=0;for(let u=1;u<=l;++u){const d=u/l;h=o+(t-o)*d,c=a+(i-a)*d,r.push(h+(t+(s-t)*d-h)*d,c+(i+(n-i)*d-c)*d)}}}const $l={[ae.POLY]:Pm,[ae.CIRC]:xa,[ae.ELIP]:xa,[ae.RECT]:NE,[ae.RREC]:UE},Dd=[],mo=[];class va{constructor(t,i=null,s=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=s,this.fillStyle=i,this.matrix=n,this.type=t.type}clone(){return new va(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Zs=new Tt,Rm=class extends Hg{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ma,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),mo.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),Dd.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,s=null){const n=new va(e,t,i,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new va(e,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const s=t[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Zs):Zs.copyFrom(e),s.shape.contains(Zs.x,Zs.y))){let n=!1;if(s.holes){for(let r=0;r<s.holes.length;r++)if(s.holes[r].shape.contains(Zs.x,Zs.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const l=t[a],h=l.fillStyle,c=l.lineStyle;$l[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(h.visible||c.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?h:c;if(!f.visible)continue;const p=f.texture.baseTexture,g=this.indices.length,m=this.points.length/2;p.wrapMode=ts.REPEAT,d===0?this.processFill(l):this.processLine(l);const _=this.points.length/2-m;_!==0&&(i&&!this._compareStyles(s,f)&&(i.end(g,m),i=null),i||(i=Dd.pop()||new GE,i.begin(f,g,m),this.batches.push(i),s=f),this.addUvs(this.points,e,f.texture,m,_,f.matrix))}}const n=this.indices.length,r=this.points.length/2;if(i&&i.end(n,r),this.batches.length===0){this.batchable=!0;return}const o=r>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],s=i.fillStyle,n=i.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const s=e[t];for(let n=0;n<s.size;n++){const r=s.start+n;this.indicesUint16[r]=this.indicesUint16[r]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<Rm.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++pt._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),mo.push(this.drawCalls[c]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let s=mo.pop();s||(s=new zh,s.texArray=new Wh),s.texArray.count=0,s.start=0,s.size=0,s.type=fi.TRIANGLES;let n=0,r=null,o=0,a=!1,l=fi.TRIANGLES,h=0;this.drawCalls.push(s);for(let c=0;c<this.batches.length;c++){const u=this.batches[c],d=8,f=u.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?fi.LINES:fi.TRIANGLES,r=null,n=d,e++),r!==p&&(r=p,p._batchEnabled!==e&&(n===d&&(e++,n=0,s.size>0&&(s=mo.pop(),s||(s=new zh,s.texArray=new Wh),this.drawCalls.push(s)),s.start=h,s.size=0,s.texArray.count=0,s.type=l),p.touched=1,p._batchEnabled=e,p._batchLocation=n,p.wrapMode=ts.REPEAT,s.texArray.elements[s.texArray.count++]=p,n++)),s.size+=u.size,h+=u.size,o=p._batchLocation,this.addColors(t,f.color,f.alpha,u.attribSize,u.attribStart),this.addTextureIds(i,o,u.attribSize,u.attribStart)}pt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,s=this.textureIds,n=new ArrayBuffer(e.length*3*4),r=new Float32Array(n),o=new Uint32Array(n);let a=0;for(let l=0;l<e.length/2;l++)r[a++]=e[l*2],r[a++]=e[l*2+1],r[a++]=t[l*2],r[a++]=t[l*2+1],o[a++]=i[l],r[a++]=s[l];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Pm.triangulate(e,this):$l[e.type].triangulate(e,this)}processLine(e){Rd(e,this);for(let t=0;t<e.holes.length;t++)Rd(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];$l[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const s=e[i*2],n=e[i*2+1];e[i*2]=t.a*s+t.c*n+t.tx,e[i*2+1]=t.b*s+t.d*n+t.ty}}addColors(e,t,i,s,n=0){const r=It.shared.setValue(t).toLittleEndianNumber(),o=It.shared.setValue(r).toPremultiplied(i);e.length=Math.max(e.length,n+s);for(let a=0;a<s;a++)e[n+a]=o}addTextureIds(e,t,i,s=0){e.length=Math.max(e.length,s+i);for(let n=0;n<i;n++)e[s+n]=t}addUvs(e,t,i,s,n,r=null){let o=0;const a=t.length,l=i.frame;for(;o<n;){let c=e[(s+o)*2],u=e[(s+o)*2+1];if(r){const d=r.a*c+r.c*u+r.tx;u=r.b*c+r.d*u+r.ty,c=d}o++,t.push(c/l.width,u/l.height)}const h=i.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,i,a,n)}adjustUvs(e,t,i,s){const n=t.baseTexture,r=1e-6,o=i+s*2,a=t.frame,l=a.width/n.width,h=a.height/n.height;let c=a.x/a.width,u=a.y/a.height,d=Math.floor(e[i]+r),f=Math.floor(e[i+1]+r);for(let p=i+2;p<o;p+=2)d=Math.min(d,Math.floor(e[p]+r)),f=Math.min(f,Math.floor(e[p+1]+r));c-=d,u-=f;for(let p=i;p<o;p+=2)e[p]=(e[p]+c)*l,e[p+1]=(e[p+1]+u)*h}};let Dm=Rm;Dm.BATCHABLE_SIZE=100;class Qa{constructor(){this.color=16777215,this.alpha=1,this.texture=ht.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Qa;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ht.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class zc extends Qa{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Cs.BUTT,this.join=Ve.MITER,this.miterLimit=10}clone(){const t=new zc;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Kl={},jo=class extends Oe{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Qa,this._lineStyle=new zc,this._matrix=null,this._holeMode=!1,this.state=Vi.for2d(),this._geometry=e||new Dm,this._geometry.refCount++,this._transformID=-1,this._tintColor=new It(16777215),this.blendMode=ft.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new jo(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i,s=.5,n=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:s,native:n}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:ht.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Cs.BUTT,join:Ve.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new mn,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new mn,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,s=i[i.length-2],n=i[i.length-1];return(s!==e||n!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Hc.curveTo(e,t,i,s,n),this}bezierCurveTo(e,t,i,s,n,r){return this._initCurve(),Gc.curveTo(e,t,i,s,n,r,this.currentPath.points),this}arcTo(e,t,i,s,n){this._initCurve(e,t);const r=this.currentPath.points,o=Id.curveTo(e,t,i,s,n,r);if(o){const{cx:a,cy:l,radius:h,startAngle:c,endAngle:u,anticlockwise:d}=o;this.arc(a,l,h,c,u,d)}return this}arc(e,t,i,s,n,r=!1){if(s===n)return this;if(!r&&n<=s?n+=ga:r&&s<=n&&(s+=ga),n-s===0)return this;const a=e+Math.cos(s)*i,l=t+Math.sin(s)*i,h=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const u=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);u<h&&d<h||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return Id.arc(a,l,e,t,i,s,n,r,c),this}beginFill(e=0,t){return this.beginTextureFill({texture:ht.WHITE,color:e,alpha:t})}normalizeColor(e){const t=It.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:ht.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,s){return this.drawShape(new _t(e,t,i,s))}drawRoundedRect(e,t,i,s,n){return this.drawShape(new Bc(e,t,i,s,n))}drawCircle(e,t,i){return this.drawShape(new kc(e,t,i))}drawEllipse(e,t,i,s){return this.drawShape(new Fc(e,t,i,s))}drawPolygon(...e){let t,i=!0;const s=e[0];s.points?(i=s.closeStroke,t=s.points):Array.isArray(e[0])?t=e[0]:t=e;const n=new mn(t);return n.closeStroke=i,this.drawShape(n),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===ae.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let s=0;s<i;s++){const n=e.batches[s],r=n.style.color,o=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),a=new Float32Array(e.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),l=new Uint16Array(e.indicesUint16.buffer,n.start*2,n.size),h={vertexData:o,blendMode:t,indices:l,uvs:a,_batchRGB:It.shared.setValue(r).toRgbArray(),_tintRGB:r,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,s=this.worldAlpha,n=t.uniforms,r=i.drawCalls;n.translationMatrix=this.transform.worldTransform,It.shared.setValue(this._tintColor).premultiply(s).toArray(n.tint),e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let o=0,a=r.length;o<a;o++)this._renderDrawCallDirect(e,i.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:i,type:s,size:n,start:r}=t,o=i.count;for(let a=0;a<o;a++)e.texture.bind(i.elements[a],a);e.geometry.draw(s,n,r)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!Kl[i]){const{maxTextures:s}=e.plugins[i],n=new Int32Array(s);for(let a=0;a<s;a++)n[a]=a;const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new kt,default:Je.from({uSamplers:n},!0)},o=e.plugins[i]._shader.program;Kl[i]=new mi(o,r)}t=Kl[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:s,maxY:n}=e.bounds;this._bounds.addFrame(this.transform,t,i,s,n)}containsPoint(e){return this.worldTransform.applyInverse(e,jo._TEMP_POINT),this._geometry.containsPoint(jo._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=It.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,s=t.b,n=t.c,r=t.d,o=t.tx,a=t.ty,l=this._geometry.points,h=this.vertexData;let c=0;for(let u=0;u<l.length;u+=2){const d=l[u],f=l[u+1];h[c++]=i*d+n*f+o,h[c++]=r*f+s*d+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let Hr=jo;Hr.curves=Tn;Hr._TEMP_POINT=new Tt;class VE{constructor(t,i){this.uvBuffer=t,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const i=this.uvBuffer.data;(!this.data||this.data.length!==i.length)&&(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}}const ql=new Tt,Od=new mn,Om=class extends Oe{constructor(e,t,i,s=fi.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||Vi.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Q.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===fi.TRIANGLES&&t.length<Om.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const t=this.geometry.buffers[0],i=t.data,s=t._updateID;if(s===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));const n=this.transform.worldTransform,r=n.a,o=n.b,a=n.c,l=n.d,h=n.tx,c=n.ty,u=this.vertexData;for(let d=0;d<u.length/2;d++){const f=i[d*2],p=i[d*2+1];u[d*2]=r*f+a*p+h,u[d*2+1]=o*f+l*p+c}if(this._roundPixels){const d=Q.RESOLUTION;for(let f=0;f<u.length;++f)u[f]=Math.round(u[f]*d)/d}this.vertexDirty=s}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new VE(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,ql);const t=this.geometry.getBuffer("aVertexPosition").data,i=Od.points,s=this.geometry.getIndex().data,n=s.length,r=this.drawMode===4?3:1;for(let o=0;o+2<n;o+=r){const a=s[o]*2,l=s[o+1]*2,h=s[o+2]*2;if(i[0]=t[a],i[1]=t[a+1],i[2]=t[l],i[3]=t[l+1],i[4]=t[h],i[5]=t[h+1],Od.contains(ql.x,ql.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let ic=Om;ic.BATCHABLE_SIZE=100;class WE extends os{constructor(t,i,s){super();const n=new Jt(t),r=new Jt(i,!0),o=new Jt(s,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,dt.FLOAT).addAttribute("aTextureCoord",r,2,!1,dt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var jE=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,XE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class kd extends mi{constructor(t,i){const s={uSampler:t,alpha:1,uTextureMatrix:kt.IDENTITY,uColor:new Float32Array([1,1,1,1])};i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(s,i.uniforms),super(i.program||$e.from(XE,jE),s),this._colorDirty=!1,this.uvMatrix=new sm(t),this.batchable=i.program===void 0,this.pluginName=i.pluginName,this._tintColor=new It(i.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=i.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const i=this.texture.baseTexture.alphaMode;It.shared.setValue(this._tintColor).premultiply(this._alpha,i).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Fd{constructor(t,i,s){this.geometry=new os,this.indexBuffer=null,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let r=t[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||dt.FLOAT,offset:r.offset},i[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let i=0;this.indexBuffer=new Jt(C1(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=i,i+=a.size,this.dynamicStride+=a.size}const s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new Jt(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const r=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(r),this.staticDataUint32=new Uint32Array(r),this.staticBuffer=new Jt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===dt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===dt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,i,s){for(let n=0;n<this.dynamicProperties.length;n++){const r=this.dynamicProperties[n];r.uploadFunction(t,i,s,r.type===dt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,i,s){for(let n=0;n<this.staticProperties.length;n++){const r=this.staticProperties[n];r.uploadFunction(t,i,s,r.type===dt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var YE=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,$E=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class km extends Xa{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new kt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:dt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=mi.from($E,YE,{}),this.state=Vi.for2d()}render(t){const i=t.children,s=t._maxSize,n=t._batchSize,r=this.renderer;let o=i.length;if(o===0)return;o>s&&!t.autoResize&&(o=s);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=i[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=Bg(t.blendMode,h),r.state.set(this.state);const c=r.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=It.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=n,p+=1){let g=o-f;g>n&&(g=n),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const m=a[p];m.uploadDynamic(i,f,g);const _=t._bufferUpdateIDs[p]||0;d=d||m._updateID<_,d&&(m._updateID=t._updateID,m.uploadStatic(i,f,g)),r.geometry.bind(m.geometry),c.drawElements(c.TRIANGLES,g*6,c.UNSIGNED_SHORT,0)}}generateBuffers(t){const i=[],s=t._maxSize,n=t._batchSize,r=t._properties;for(let o=0;o<s;o+=n)i.push(new Fd(this.properties,r,n));return i}_generateOneMoreBuffer(t){const i=t._batchSize,s=t._properties;return new Fd(this.properties,s,i)}uploadVertices(t,i,s,n,r,o){let a=0,l=0,h=0,c=0;for(let u=0;u<s;++u){const d=t[i+u],f=d._texture,p=d.scale.x,g=d.scale.y,m=f.trim,_=f.orig;m?(l=m.x-d.anchor.x*_.width,a=l+m.width,c=m.y-d.anchor.y*_.height,h=c+m.height):(a=_.width*(1-d.anchor.x),l=_.width*-d.anchor.x,h=_.height*(1-d.anchor.y),c=_.height*-d.anchor.y),n[o]=l*p,n[o+1]=c*g,n[o+r]=a*p,n[o+r+1]=c*g,n[o+r*2]=a*p,n[o+r*2+1]=h*g,n[o+r*3]=l*p,n[o+r*3+1]=h*g,o+=r*4}}uploadPosition(t,i,s,n,r,o){for(let a=0;a<s;a++){const l=t[i+a].position;n[o]=l.x,n[o+1]=l.y,n[o+r]=l.x,n[o+r+1]=l.y,n[o+r*2]=l.x,n[o+r*2+1]=l.y,n[o+r*3]=l.x,n[o+r*3+1]=l.y,o+=r*4}}uploadRotation(t,i,s,n,r,o){for(let a=0;a<s;a++){const l=t[i+a].rotation;n[o]=l,n[o+r]=l,n[o+r*2]=l,n[o+r*3]=l,o+=r*4}}uploadUvs(t,i,s,n,r,o){for(let a=0;a<s;++a){const l=t[i+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+r]=l.x1,n[o+r+1]=l.y1,n[o+r*2]=l.x2,n[o+r*2+1]=l.y2,n[o+r*3]=l.x3,n[o+r*3+1]=l.y3,o+=r*4):(n[o]=0,n[o+1]=0,n[o+r]=0,n[o+r+1]=0,n[o+r*2]=0,n[o+r*2+1]=0,n[o+r*3]=0,n[o+r*3+1]=0,o+=r*4)}}uploadTint(t,i,s,n,r,o){for(let a=0;a<s;++a){const l=t[i+a],h=It.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);n[o]=h,n[o+r]=h,n[o+r*2]=h,n[o+r*3]=h,o+=r*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}km.extension={name:"particle",type:et.RendererPlugin};ut.add(km);var tl=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(tl||{});const _o={willReadFrequently:!0},lt=class{static get experimentalLetterSpacingSupported(){let e=lt._experimentalLetterSpacingSupported;if(e!==void 0){const t=Q.ADAPTER.getCanvasRenderingContext2D().prototype;e=lt._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,s,n,r,o,a,l){this.text=e,this.style=t,this.width=i,this.height=s,this.lines=n,this.lineWidths=r,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(e,t,i,s=lt._canvas){i=i??t.wordWrap;const n=t.toFontString(),r=lt.measureFont(n);r.fontSize===0&&(r.fontSize=t.fontSize,r.ascent=t.fontSize);const o=s.getContext("2d",_o);o.font=n;const l=(i?lt.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),h=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const g=lt._measureText(l[p],t.letterSpacing,o);h[p]=g,c=Math.max(c,g)}let u=c+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance);const d=t.lineHeight||r.fontSize+t.strokeThickness;let f=Math.max(d,r.fontSize+t.strokeThickness*2)+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new lt(e,t,u,f,l,h,d+t.leading,c,r)}static _measureText(e,t,i){let s=!1;lt.experimentalLetterSpacingSupported&&(lt.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(e).width;return n>0&&(s?n-=t:n+=(lt.graphemeSegmenter(e).length-1)*t),n}static wordWrap(e,t,i=lt._canvas){const s=i.getContext("2d",_o);let n=0,r="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:h}=t,c=lt.collapseSpaces(h),u=lt.collapseNewlines(h);let d=!c;const f=t.wordWrapWidth+l,p=lt.tokenize(e);for(let g=0;g<p.length;g++){let m=p[g];if(lt.isNewline(m)){if(!u){o+=lt.addLine(r),d=!c,r="",n=0;continue}m=" "}if(c){const b=lt.isBreakingSpace(m),y=lt.isBreakingSpace(r[r.length-1]);if(b&&y)continue}const _=lt.getFromCache(m,l,a,s);if(_>f)if(r!==""&&(o+=lt.addLine(r),r="",n=0),lt.canBreakWords(m,t.breakWords)){const b=lt.wordWrapSplit(m);for(let y=0;y<b.length;y++){let E=b[y],x=E,T=1;for(;b[y+T];){const C=b[y+T];if(!lt.canBreakChars(x,C,m,y,t.breakWords))E+=C;else break;x=C,T++}y+=T-1;const A=lt.getFromCache(E,l,a,s);A+n>f&&(o+=lt.addLine(r),d=!1,r="",n=0),r+=E,n+=A}}else{r.length>0&&(o+=lt.addLine(r),r="",n=0);const b=g===p.length-1;o+=lt.addLine(m,!b),d=!1,r="",n=0}else _+n>f&&(d=!1,o+=lt.addLine(r),r="",n=0),(r.length>0||!lt.isBreakingSpace(m)||d)&&(r+=m,n+=_)}return o+=lt.addLine(r,!1),o}static addLine(e,t=!0){return e=lt.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,i,s){let n=i[e];return typeof n!="number"&&(n=lt._measureText(e,t,s)+t,i[e]=n),n}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!lt.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:lt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:lt._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){const n=e[s],r=e[s+1];if(lt.isBreakingSpace(n,r)||lt.isNewline(n)){i!==""&&(t.push(i),i=""),t.push(n);continue}i+=n}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,s,n){return!0}static wordWrapSplit(e){return lt.graphemeSegmenter(e)}static measureFont(e){if(lt._fonts[e])return lt._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=lt._canvas,s=lt._context;s.font=e;const n=lt.METRICS_STRING+lt.BASELINE_SYMBOL,r=Math.ceil(s.measureText(n).width);let o=Math.ceil(s.measureText(lt.BASELINE_SYMBOL).width);const a=Math.ceil(lt.HEIGHT_MULTIPLIER*o);if(o=o*lt.BASELINE_MULTIPLIER|0,r===0||a===0)return lt._fonts[e]=t,t;i.width=r,i.height=a,s.fillStyle="#f00",s.fillRect(0,0,r,a),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(n,0,o);const l=s.getImageData(0,0,r,a).data,h=l.length,c=r*4;let u=0,d=0,f=!1;for(u=0;u<o;++u){for(let p=0;p<c;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d+=c;else break}for(t.ascent=o-u,d=h-c,f=!1,u=a;u>o;--u){for(let p=0;p<c;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d-=c;else break}return t.descent=u-o,t.fontSize=t.ascent+t.descent,lt._fonts[e]=t,t}static clearMetrics(e=""){e?delete lt._fonts[e]:lt._fonts={}}static get _canvas(){if(!lt.__canvas){let e;try{const t=new OffscreenCanvas(0,0),i=t.getContext("2d",_o);if(i!=null&&i.measureText)return lt.__canvas=t,t;e=Q.ADAPTER.createCanvas()}catch{e=Q.ADAPTER.createCanvas()}e.width=e.height=10,lt.__canvas=e}return lt.__canvas}static get _context(){return lt.__context||(lt.__context=lt._canvas.getContext("2d",_o)),lt.__context}};let oe=lt;oe.METRICS_STRING="|ÉqÅ";oe.BASELINE_SYMBOL="M";oe.BASELINE_MULTIPLIER=1.4;oe.HEIGHT_MULTIPLIER=2;oe.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(i=>i.segment)}return e=>[...e]})();oe.experimentalLetterSpacing=!1;oe._fonts={};oe._newlines=[10,13];oe._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const KE=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Jn=class{constructor(e){this.styleID=0,this.reset(),Jl(this,e,e)}clone(){const e={};return Jl(e,this,Jn.defaultStyle),new Jn(e)}reset(){Jl(this,Jn.defaultStyle,Jn.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Zl(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Zl(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){qE(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Zl(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let s=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!KE.includes(s)&&(s=`"${s}"`),t[i]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let Hi=Jn;Hi.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:tl.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Zl(e){const t=It.shared;return Array.isArray(e)?e.map(i=>t.setValue(i).toHex()):t.setValue(e).toHex()}function qE(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}function Jl(e,t,i){for(const s in i)Array.isArray(t[s])?e[s]=t[s].slice():e[s]=t[s]}const ZE={texture:!0,children:!1,baseTexture:!0},sc=class extends On{constructor(e,t,i){let s=!1;i||(i=Q.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;const n=ht.from(i);n.orig=new _t,n.trim=new _t,super(n),this._ownCanvas=s,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=sc.defaultResolution??Q.RESOLUTION,this._autoResolution=sc.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return oe.experimentalLetterSpacing}static set experimentalLetterSpacing(e){xt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),oe.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,s=oe.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,r=s.height,o=s.lines,a=s.lineHeight,l=s.lineWidths,h=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,r)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let u,d;const f=t.dropShadow?2:1;for(let p=0;p<f;++p){const g=t.dropShadow&&p===0,m=g?Math.ceil(Math.max(1,r)+t.padding*2):0,_=m*this._resolution;if(g){i.fillStyle="black",i.strokeStyle="black";const y=t.dropShadowColor,E=t.dropShadowBlur*this._resolution,x=t.dropShadowDistance*this._resolution;i.shadowColor=It.shared.setValue(y).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=E,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*x,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*x+_}else i.fillStyle=this._generateFillStyle(t,o,s),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let b=(a-c.fontSize)/2;a-c.fontSize<0&&(b=0);for(let y=0;y<o.length;y++)u=t.strokeThickness/2,d=t.strokeThickness/2+y*a+c.ascent+b,t.align==="right"?u+=h-l[y]:t.align==="center"&&(u+=(h-l[y])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[y],u+t.padding,d+t.padding-m,!0),t.fill&&this.drawLetterSpacing(o[y],u+t.padding,d+t.padding-m)}this.updateTexture()}drawLetterSpacing(e,t,i,s=!1){const r=this._style.letterSpacing;let o=!1;if(oe.experimentalLetterSpacingSupported&&(oe.experimentalLetterSpacing?(this.context.letterSpacing=`${r}px`,this.context.textLetterSpacing=`${r}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),r===0||o){s?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let a=t;const l=oe.graphemeSegmenter(e);let h=this.context.measureText(e).width,c=0;for(let u=0;u<l.length;++u){const d=l[u];s?this.context.strokeText(d,a,i):this.context.fillText(d,a,i);let f="";for(let p=u+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,a+=h-c+r,h=c}}updateTexture(){const e=this.canvas;if(this._style.trim){const r=R1(e);r.data&&(e.width=r.width,e.height=r.height,this.context.putImageData(r.data,0,0))}const t=this._texture,i=this._style,s=i.trim?0:i.padding,n=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const r=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,a=this.canvas.width/this._resolution-r-o*2,l=this.canvas.height/this._resolution-r-o*2,h=s.slice(),c=e.fillGradientStops.slice();if(!c.length){const u=h.length+1;for(let d=1;d<u;++d)c.push(d/u)}if(h.unshift(s[0]),c.unshift(0),h.push(s[s.length-1]),c.push(1),e.fillGradientType===tl.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,o,a/2,l+o);const u=i.fontProperties.fontSize+e.strokeThickness;for(let d=0;d<t.length;d++){const f=i.lineHeight*(d-1)+u,p=i.lineHeight*d;let g=p;d>0&&f>p&&(g=(p+f)/2);const m=p+u,_=i.lineHeight*(d+1);let b=m;d+1<t.length&&_<m&&(b=(m+_)/2);const y=(b-g)/l;for(let E=0;E<h.length;E++){let x=0;typeof c[E]=="number"?x=c[E]:x=E/h.length;let T=Math.min(1,Math.max(0,g/l+x*y));T=Number(T.toFixed(5)),n.addColorStop(T,h[E])}}}else{n=this.context.createLinearGradient(o,l/2,a+o,l/2);const u=h.length+1;let d=1;for(let f=0;f<h.length;f++){let p;typeof c[f]=="number"?p=c[f]:p=d/u,n.addColorStop(p,h[f]),d++}}return n}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},ZE,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=$i(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=$i(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Hi?this._style=e:this._style=new Hi(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Vc=sc;Vc.defaultAutoResolution=!0;class JE{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function QE(e,t){var s;let i=!1;if((s=e==null?void 0:e._textures)!=null&&s.length){for(let n=0;n<e._textures.length;n++)if(e._textures[n]instanceof ht){const r=e._textures[n].baseTexture;t.includes(r)||(t.push(r),i=!0)}}return i}function tw(e,t){if(e.baseTexture instanceof pt){const i=e.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function ew(e,t){if(e._texture&&e._texture instanceof ht){const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function iw(e,t){return t instanceof Vc?(t.updateText(!0),!0):!1}function sw(e,t){if(t instanceof Hi){const i=t.toFontString();return oe.measureFont(i),!0}return!1}function nw(e,t){if(e instanceof Vc){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function rw(e,t){return e instanceof Hi?(t.includes(e)||t.push(e),!0):!1}const Fm=class{constructor(e){this.limiter=new JE(Fm.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(nw),this.registerFindHook(rw),this.registerFindHook(QE),this.registerFindHook(tw),this.registerFindHook(ew),this.registerUploadHook(iw),this.registerUploadHook(sw)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,ce.system.addOnce(this.tick,this,Bs.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)ce.system.addOnce(this.tick,this,Bs.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Oe)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&ce.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Ea=Fm;Ea.uploadsPerFrame=4;Object.defineProperties(Q,{UPLOADS_PER_FRAME:{get(){return Ea.uploadsPerFrame},set(e){xt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Ea.uploadsPerFrame=e}}});function Bm(e,t){return t instanceof pt?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function ow(e,t){if(!(t instanceof Hr))return!1;const{geometry:i}=t;t.finishPoly(),i.updateBatches();const{batches:s}=i;for(let n=0;n<s.length;n++){const{texture:r}=s[n].style;r&&Bm(e,r.baseTexture)}return i.batchable||e.geometry.bind(i,t._resolveDirectShader(e)),!0}function aw(e,t){return e instanceof Hr?(t.push(e),!0):!1}class Lm extends Ea{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(aw),this.registerUploadHook(Bm),this.registerUploadHook(ow)}}Lm.extension={name:"prepare",type:et.RendererSystem};ut.add(Lm);var lw=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,hw=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,cw=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Bd=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,uw=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const bo=new kt;class Nm extends Xa{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Qg,this.state=Vi.for2d()}contextChange(){const t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=mi.from(Bd,uw,i),this.shader=t.context.webGLVersion>1?mi.from(hw,lw,i):mi.from(Bd,cw,i)}render(t){const i=this.renderer,s=this.quad;let n=s.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const r=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;n=s.uvs,n[0]=n[6]=-r,n[1]=n[3]=-o,n[2]=n[4]=1-r,n[5]=n[7]=1-o,s.invalidate();const a=t._texture,l=a.baseTexture,h=l.alphaMode>0,c=t.tileTransform.localTransform,u=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[i.CONTEXT_UID]?d=l.wrapMode!==ts.CLAMP:l.wrapMode===ts.CLAMP&&(l.wrapMode=ts.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,g=a.height,m=t._width,_=t._height;bo.set(c.a*p/m,c.b*p/_,c.c*g/m,c.d*g/_,c.tx/m,c.ty/_),bo.invert(),d?bo.prepend(u.mapCoord):(f.uniforms.uMapCoord=u.mapCoord.toArray(!0),f.uniforms.uClampFrame=u.uClampFrame,f.uniforms.uClampOffset=u.uClampOffset),f.uniforms.uTransform=bo.toArray(!0),f.uniforms.uColor=It.shared.setValue(t.tint).premultiply(t.worldAlpha,h).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,i.shader.bind(f),i.geometry.bind(s),this.state.blendMode=Bg(t.blendMode,h),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Nm.extension={name:"tilingSprite",type:et.RendererPlugin};ut.add(Nm);const Qn=class{constructor(e,t,i=null){this.linkedSheets=[],this._texture=e instanceof ht?e:null,this.baseTexture=e instanceof pt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const s=this.baseTexture.resource;this.resolution=this._updateResolution(i||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=rs(e,null);return i===null&&(i=parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Qn.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=Qn.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const s=this._frameKeys[t],n=this._frames[s],r=n.frame;if(r){let o=null,a=null;const l=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,h=new _t(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);n.rotated?o=new _t(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):o=new _t(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(a=new _t(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[s]=new ht(this.baseTexture,o,h,a,n.rotated?2:0,n.anchor,n.borders),ht.addToCache(this.textures[s],s)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const s=e[t][i];this.animations[t].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Qn.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Qn.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let nc=Qn;nc.BATCH_SIZE=1e3;const dw=["jpg","png","jpeg","avif","webp"];function Um(e,t,i){const s={};if(e.forEach(n=>{s[n]=t}),Object.keys(t.textures).forEach(n=>{s[n]=t.textures[n]}),!i){const n=de.dirname(e[0]);t.linkedSheets.forEach((r,o)=>{const a=Um([`${n}/${t.data.meta.related_multi_packs[o]}`],r,!0);Object.assign(s,a)})}return s}const fw={extension:et.Asset,cache:{test:e=>e instanceof nc,getCacheableAssets:(e,t)=>Um(e,t,!1)},resolver:{test:e=>{const i=e.split("?")[0].split("."),s=i.pop(),n=i.pop();return s==="json"&&dw.includes(n)},parse:e=>{var i;const t=e.split(".");return{resolution:parseFloat(((i=Q.RETINA_PREFIX.exec(e))==null?void 0:i[1])??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:et.LoadParser,priority:Ei.Normal},async testParse(e,t){return de.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,i){var h,c;let s=de.dirname(t.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");let n=s+e.meta.image;n=tc(n,t.src);const o=(await i.load([n]))[n],a=new nc(o.baseTexture,e,t.src);await a.parse();const l=(h=e==null?void 0:e.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(l)){const u=[];for(const f of l){if(typeof f!="string")continue;let p=s+f;(c=t.data)!=null&&c.ignoreMultiPack||(p=tc(p,t.src),u.push(i.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(u);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(e){e.destroy(!0)}}};ut.add(fw);class wa{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Xo{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const i=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const r in i){const o=i[r].match(/^[a-z]+/gm)[0],a=i[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const h in a){const c=a[h].split("="),u=c[0],d=c[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[u]=p}s[o].push(l)}const n=new wa;return s.info.forEach(r=>n.info.push({face:r.face,size:parseInt(r.size,10)})),s.common.forEach(r=>n.common.push({lineHeight:parseInt(r.lineHeight,10)})),s.page.forEach(r=>n.page.push({id:parseInt(r.id,10),file:r.file})),s.char.forEach(r=>n.char.push({id:parseInt(r.id,10),page:parseInt(r.page,10),x:parseInt(r.x,10),y:parseInt(r.y,10),width:parseInt(r.width,10),height:parseInt(r.height,10),xoffset:parseInt(r.xoffset,10),yoffset:parseInt(r.yoffset,10),xadvance:parseInt(r.xadvance,10)})),s.kerning.forEach(r=>n.kerning.push({first:parseInt(r.first,10),second:parseInt(r.second,10),amount:parseInt(r.amount,10)})),s.distanceField.forEach(r=>n.distanceField.push({distanceRange:parseInt(r.distanceRange,10),fieldType:r.fieldType})),n}}class rc{static test(t){const i=t;return"getElementsByTagName"in i&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const i=new wa,s=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let h=0;h<s.length;h++)i.info.push({face:s[h].getAttribute("face"),size:parseInt(s[h].getAttribute("size"),10)});for(let h=0;h<n.length;h++)i.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(let h=0;h<r.length;h++)i.page.push({id:parseInt(r[h].getAttribute("id"),10)||0,file:r[h].getAttribute("file")});for(let h=0;h<o.length;h++){const c=o[h];i.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)i.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<l.length;h++)i.distanceField.push({fieldType:l[h].getAttribute("fieldType"),distanceRange:parseInt(l[h].getAttribute("distanceRange"),10)});return i}}class oc{static test(t){return typeof t=="string"&&t.includes("<font>")?rc.test(Q.ADAPTER.parseXML(t)):!1}static parse(t){return rc.parse(Q.ADAPTER.parseXML(t))}}const Ql=[Xo,rc,oc];function pw(e){for(let t=0;t<Ql.length;t++)if(Ql[t].test(e))return Ql[t];return null}function gw(e,t,i,s,n,r){const o=i.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=i.dropShadow?i.dropShadowDistance:0,h=i.padding||0,c=e.width/s-l-h*2,u=e.height/s-l-h*2,d=o.slice(),f=i.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let g=1;g<p;++g)f.push(g/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),i.fillGradientType===tl.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,h,c/2,u+h);let p=0;const m=(r.fontProperties.fontSize+i.strokeThickness)/u;for(let _=0;_<n.length;_++){const b=r.lineHeight*_;for(let y=0;y<d.length;y++){let E=0;typeof f[y]=="number"?E=f[y]:E=y/d.length;const x=b/u+E*m;let T=Math.max(p,x);T=Math.min(T,1),a.addColorStop(T,d[y]),p=T}}}else{a=t.createLinearGradient(h,u/2,c+h,u/2);const p=d.length+1;let g=1;for(let m=0;m<d.length;m++){let _;typeof f[m]=="number"?_=f[m]:_=g/p,a.addColorStop(_,d[m]),g++}}return a}function mw(e,t,i,s,n,r,o){const a=i.text,l=i.fontProperties;t.translate(s,n),t.scale(r,r);const h=o.strokeThickness/2,c=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=gw(e,t,o,r,[a],i),t.strokeStyle=o.stroke,o.dropShadow){const u=o.dropShadowColor,d=o.dropShadowBlur*r,f=o.dropShadowDistance*r;t.shadowColor=It.shared.setValue(u).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=d,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,h,c+i.lineHeight-l.descent),o.fill&&t.fillText(a,h,c+i.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Yo(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function Gm(e){return Array.from?Array.from(e):e.split("")}function _w(e){typeof e=="string"&&(e=[e]);const t=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const r=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<r)throw new Error("[BitmapFont]: Invalid character range.");for(let a=r,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...Gm(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const ze=class{constructor(e,t,i){var h;const[s]=e.info,[n]=e.common,[r]=e.page,[o]=e.distanceField,a=rs(r.file),l={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<e.page.length;c++){const{id:u,file:d}=e.page[c];l[u]=t instanceof Array?t[c]:t[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[u].baseTexture.alphaMode=si.NO_PREMULTIPLIED_ALPHA,l[u].baseTexture.mipmap=xi.OFF)}for(let c=0;c<e.char.length;c++){const{id:u,page:d}=e.char[c];let{x:f,y:p,width:g,height:m,xoffset:_,yoffset:b,xadvance:y}=e.char[c];f/=a,p/=a,g/=a,m/=a,_/=a,b/=a,y/=a;const E=new _t(f+l[d].frame.x/a,p+l[d].frame.y/a,g,m);this.chars[u]={xOffset:_,yOffset:b,xAdvance:y,kerning:{},texture:new ht(l[d].baseTexture,E),page:d}}for(let c=0;c<e.kerning.length;c++){let{first:u,second:d,amount:f}=e.kerning[c];u/=a,d/=a,f/=a,this.chars[d]&&(this.chars[d].kerning[u]=f)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((h=o==null?void 0:o.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let s;if(e instanceof wa)s=e;else{const r=pw(e);if(!r)throw new Error("Unrecognized data format for font.");s=r.parse(e)}t instanceof ht&&(t=[t]);const n=new ze(s,t,i);return ze.available[n.font]=n,n}static uninstall(e){const t=ze.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete ze.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:r,textureWidth:o,textureHeight:a,...l}=Object.assign({},ze.defaultOptions,i),h=_w(s),c=t instanceof Hi?t:new Hi(t),u=o,d=new wa;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};let f=0,p=0,g,m,_,b=0;const y=[];for(let x=0;x<h.length;x++){g||(g=Q.ADAPTER.createCanvas(),g.width=o,g.height=a,m=g.getContext("2d"),_=new pt(g,{resolution:r,...l}),y.push(new ht(_)),d.page.push({id:y.length-1,file:""}));const T=h[x],A=oe.measureText(T,c,!1,g),C=A.width,R=Math.ceil(A.height),I=Math.ceil((c.fontStyle==="italic"?2:1)*C);if(p>=a-R*r){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${T}')`);--x,g=null,m=null,_=null,p=0,f=0,b=0;continue}if(b=Math.max(R+A.fontProperties.descent,b),I*r+f>=u){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${T}')`);--x,p+=b*r,p=Math.ceil(p),f=0,b=0;continue}mw(g,m,A,f,p,r,c);const S=Yo(A.text);d.char.push({id:S,page:y.length-1,x:f/r,y:p/r,width:I,height:R,xoffset:0,yoffset:0,xadvance:C-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),f+=(I+2*n)*r,f=Math.ceil(f)}for(let x=0,T=h.length;x<T;x++){const A=h[x];for(let C=0;C<T;C++){const R=h[C],I=m.measureText(A).width,S=m.measureText(R).width,O=m.measureText(A+R).width-(I+S);O&&d.kerning.push({first:Yo(A),second:Yo(R),amount:O})}}const E=new ze(d,y,!0);return ze.available[e]!==void 0&&ze.uninstall(e),ze.available[e]=E,E}};let be=ze;be.ALPHA=[["a","z"],["A","Z"]," "];be.NUMERIC=[["0","9"]];be.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];be.ASCII=[[" ","~"]];be.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ze.ALPHANUMERIC};be.available={};var bw=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,yw=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Ld=[],Nd=[],Ud=[],Hm=class extends Oe{constructor(e,t={}){super();const{align:i,tint:s,maxWidth:n,letterSpacing:r,fontName:o,fontSize:a}=Object.assign({},Hm.styleDefaults,t);if(!be.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new It(s),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=e,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=r,this._anchor=new Ki(()=>{this.dirty=!0},this,0,0),this._roundPixels=Q.ROUND_PIXELS,this.dirty=!0,this._resolution=Q.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var I;const e=be.available[this._fontName],t=this.fontSize,i=t/e.size,s=new Tt,n=[],r=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Gm(a),h=this._maxWidth*e.size/t,c=e.distanceFieldType==="none"?Ld:Nd;let u=null,d=0,f=0,p=0,g=-1,m=0,_=0,b=0,y=0;for(let S=0;S<l.length;S++){const F=l[S],O=Yo(F);if(/(?:\s)/.test(F)&&(g=S,m=d,y++),F==="\r"||F===`
`){r.push(d),o.push(-1),f=Math.max(f,d),++p,++_,s.x=0,s.y+=e.lineHeight,u=null,y=0;continue}const v=e.chars[O];if(!v)continue;u&&v.kerning[u]&&(s.x+=v.kerning[u]);const w=Ud.pop()||{texture:ht.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Tt};w.texture=v.texture,w.line=p,w.charCode=O,w.position.x=Math.round(s.x+v.xOffset+this._letterSpacing/2),w.position.y=Math.round(s.y+v.yOffset),w.prevSpaces=y,n.push(w),d=w.position.x+Math.max(v.xAdvance-v.xOffset,v.texture.orig.width),s.x+=v.xAdvance+this._letterSpacing,b=Math.max(b,v.yOffset+v.texture.height),u=O,g!==-1&&h>0&&s.x>h&&(++_,gn(n,1+g-_,1+S-g),S=g,g=-1,r.push(m),o.push(n.length>0?n[n.length-1].prevSpaces:0),f=Math.max(f,m),p++,s.x=0,s.y+=e.lineHeight,u=null,y=0)}const E=l[l.length-1];E!=="\r"&&E!==`
`&&(/(?:\s)/.test(E)&&(d=m),r.push(d),f=Math.max(f,d),o.push(-1));const x=[];for(let S=0;S<=p;S++){let F=0;this._align==="right"?F=f-r[S]:this._align==="center"?F=(f-r[S])/2:this._align==="justify"&&(F=o[S]<0?0:(f-r[S])/o[S]),x.push(F)}const T=n.length,A={},C=[],R=this._activePagesMeshData;c.push(...R);for(let S=0;S<T;S++){const F=n[S].texture,O=F.baseTexture.uid;if(!A[O]){let v=c.pop();if(!v){const B=new WE;let P,N;e.distanceFieldType==="none"?(P=new kd(ht.EMPTY),N=ft.NORMAL):(P=new kd(ht.EMPTY,{program:$e.from(yw,bw),uniforms:{uFWidth:0}}),N=ft.NORMAL_NPM);const k=new ic(B,P);k.blendMode=N,v={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:k,vertices:null,uvs:null,indices:null}}v.index=0,v.indexCount=0,v.vertexCount=0,v.uvsCount=0,v.total=0;const{_textureCache:w}=this;w[O]=w[O]||new ht(F.baseTexture),v.mesh.texture=w[O],v.mesh.tint=this._tintColor.value,C.push(v),A[O]=v}A[O].total++}for(let S=0;S<R.length;S++)C.includes(R[S])||this.removeChild(R[S].mesh);for(let S=0;S<C.length;S++)C[S].mesh.parent!==this&&this.addChild(C[S].mesh);this._activePagesMeshData=C;for(const S in A){const F=A[S],O=F.total;if(!(((I=F.indices)==null?void 0:I.length)>6*O)||F.vertices.length<ic.BATCHABLE_SIZE*2)F.vertices=new Float32Array(4*2*O),F.uvs=new Float32Array(4*2*O),F.indices=new Uint16Array(6*O);else{const v=F.total,w=F.vertices;for(let B=v*4*2;B<w.length;B++)w[B]=0}F.mesh.size=6*O}for(let S=0;S<T;S++){const F=n[S];let O=F.position.x+x[F.line]*(this._align==="justify"?F.prevSpaces:1);this._roundPixels&&(O=Math.round(O));const v=O*i,w=F.position.y*i,B=F.texture,P=A[B.baseTexture.uid],N=B.frame,k=B._uvs,D=P.index++;P.indices[D*6+0]=0+D*4,P.indices[D*6+1]=1+D*4,P.indices[D*6+2]=2+D*4,P.indices[D*6+3]=0+D*4,P.indices[D*6+4]=2+D*4,P.indices[D*6+5]=3+D*4,P.vertices[D*8+0]=v,P.vertices[D*8+1]=w,P.vertices[D*8+2]=v+N.width*i,P.vertices[D*8+3]=w,P.vertices[D*8+4]=v+N.width*i,P.vertices[D*8+5]=w+N.height*i,P.vertices[D*8+6]=v,P.vertices[D*8+7]=w+N.height*i,P.uvs[D*8+0]=k.x0,P.uvs[D*8+1]=k.y0,P.uvs[D*8+2]=k.x1,P.uvs[D*8+3]=k.y1,P.uvs[D*8+4]=k.x2,P.uvs[D*8+5]=k.y2,P.uvs[D*8+6]=k.x3,P.uvs[D*8+7]=k.y3}this._textWidth=f*i,this._textHeight=(s.y+e.lineHeight)*i;for(const S in A){const F=A[S];if(this.anchor.x!==0||this.anchor.y!==0){let B=0;const P=this._textWidth*this.anchor.x,N=this._textHeight*this.anchor.y;for(let k=0;k<F.total;k++)F.vertices[B++]-=P,F.vertices[B++]-=N,F.vertices[B++]-=P,F.vertices[B++]-=N,F.vertices[B++]-=P,F.vertices[B++]-=N,F.vertices[B++]-=P,F.vertices[B++]-=N}this._maxLineHeight=b*i;const O=F.mesh.geometry.getBuffer("aVertexPosition"),v=F.mesh.geometry.getBuffer("aTextureCoord"),w=F.mesh.geometry.getIndex();O.data=F.vertices,v.data=F.uvs,w.data=F.indices,O.update(),v.update(),w.update()}for(let S=0;S<n.length;S++)Ud.push(n[S]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:s}=be.available[this._fontName];if(i!=="none"){const{a:n,b:r,c:o,d:a}=this.worldTransform,l=Math.sqrt(n*n+r*r),h=Math.sqrt(o*o+a*a),c=(Math.abs(l)+Math.abs(h))/2,u=this.fontSize/s,d=e._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=c*t*u*d}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=be.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!be.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??be.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,s=be.available[this._fontName].distanceFieldType==="none"?Ld:Nd;s.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],s.filter(n=>t[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=ht.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let xw=Hm;xw.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const vw=[".xml",".fnt"],Ew={extension:{type:et.LoadParser,priority:Ei.Normal},name:"loadBitmapFont",test(e){return vw.includes(de.extname(e).toLowerCase())},async testParse(e){return Xo.test(e)||oc.test(e)},async parse(e,t,i){const s=Xo.test(e)?Xo.parse(e):oc.parse(e),{src:n}=t,{page:r}=s,o=[];for(let h=0;h<r.length;++h){const c=r[h].file;let u=de.join(de.dirname(n),c);u=tc(u,n),o.push(u)}const a=await i.load(o),l=o.map(h=>a[h]);return be.install(s,l,!0)},async load(e,t){return(await Q.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};ut.add(Ew);const rn=class extends Hi{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new rn(Object.keys(rn.defaultOptions).reduce((t,i)=>({...t,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete rn.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:i}=rn;if(i[e]){const s=i[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Q.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((n,r)=>{const o=URL.createObjectURL(s),a=new FileReader;a.onload=()=>n([o,a.result]),a.onerror=r,a.readAsDataURL(s)})).then(async([s,n])=>{const r=Object.assign({family:de.basename(e,de.extname(e)),weight:"normal",style:"normal",src:s,dataSrc:n,refs:1,originalUrl:e,fontFace:null},t);i[e]=r,this._fonts.push(r),this.styleID++;const o=new FontFace(r.family,`url(${r.src})`,{weight:r.weight,style:r.style});r.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(i=>!this._overrides.includes(i));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(i=>this._overrides.includes(i));t.length>0&&(this._overrides=this._overrides.filter(i=>!t.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=T1(e)),typeof e=="number"?S1(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${n} ${e}`}reset(){Object.assign(this,rn.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=Q.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let lr=rn;lr.availableFonts={};lr.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const on=class extends On{constructor(e="",t={}){super(ht.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const i=new Image,s=ht.from(i,{scaleMode:Q.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new _t,s.trim=new _t,this.texture=s;const n="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xhtml",o=document.createElementNS(n,"svg"),a=document.createElementNS(n,"foreignObject"),l=document.createElementNS(r,"div"),h=document.createElementNS(r,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=on.defaultMaxWidth,this.maxHeight=on.defaultMaxHeight,this._domElement=l,this._styleElement=h,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(h),this._foreignObject.appendChild(l),this._image=i,this._loadImage=new Image,this._autoResolution=on.defaultAutoResolution,this._resolution=on.defaultResolution??Q.RESOLUTION,this.text=e,this.style=t}measureText(e){var a,l;const{text:t,style:i,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:i.toCSS(s)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const r=Math.min(this.maxWidth,Math.ceil(n.width)),o=Math.min(this.maxHeight,Math.ceil(n.height));return this._svgRoot.setAttribute("width",r.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(a=this._style)==null?void 0:a.toCSS(s)}),this._styleElement.textContent=(l=this._style)==null?void 0:l.toGlobalCSS()),{width:r+i.padding*2,height:o+i.padding*2}}async updateText(e=!0){const{style:t,_image:i,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:n,height:r}=this.measureText();i.width=s.width=Math.ceil(Math.max(1,n)),i.height=s.height=Math.ceil(Math.max(1,r)),this._loading||(this._loading=!0,await new Promise(o=>{s.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,i.src=s.src,s.onload=null,s.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:i,resolution:s}=this,{padding:n}=e,{baseTexture:r}=t;t.trim.width=t._frame.width=i.width/s,t.trim.height=t._frame.height=i.height/s,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),r.setRealSize(i.width,i.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var i,s,n,r,o;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},on.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=t,(s=this._svgRoot)==null||s.remove(),this._svgRoot=t,(n=this._domElement)==null||n.remove(),this._domElement=t,(r=this._foreignObject)==null||r.remove(),this._foreignObject=t,(o=this._styleElement)==null||o.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=$i(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=$i(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof lr?(this.ownsStyle=!1,this._style=e):e instanceof Hi?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=lr.from(e)):(this.ownsStyle=!0,this._style=new lr(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let el=on;el.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};el.defaultMaxWidth=2024;el.defaultMaxHeight=2024;el.defaultAutoResolution=!0;function ww(e){let t,i;return{c(){t=Z("div"),i=Z("canvas"),G(i,"class","svelte-txr5xd"),G(t,"class","board svelte-txr5xd"),_r(t,"cursor",e[2]?e[1]?"grabbing":"grab":"")},m(s,n){at(s,t,n),q(t,i),e[4](i)},p(s,n){n[0]&6&&_r(t,"cursor",s[2]?s[1]?"grabbing":"grab":"")},i:it,o:it,d(s){s&&ot(t),e[4](null)}}}const yo=600,re=20,Sw=.4;function Tw(e,t,i){let s;Ye(e,an,H=>i(16,s=H));let{mapData:n}=t;const r="bombastic";let o,a;di.extend(Sg),di.extend(Tg);let l,h=n.pieceMap.length;const c=yo/h,u=c/7,d=(yo-re*(h+1))/h;let f=!1,p="",g=!1,m={x:0,y:0},_=n.pieceMap,b={x:0,y:0},y={x:0,y:0},E=null,x={x:0,y:0},T={x:0,y:0};const A=()=>{const H=a.clientWidth,L=a.clientHeight,U=H/o.view.width,V=L/o.view.height,$=(U+V)/2;return c*$},C=H=>{const L=A(),U=a.getBoundingClientRect(),V=U.left,$=U.top,nt=H.x*L+V,K=H.y*L+$;return{x:nt,y:K}},R=(H,L)=>{let U={x:H,y:L},V=m.x?Math.abs(m.x):Math.abs(m.y);const $={x:Math.sign(m.x),y:Math.sign(m.y)};for(;V>0;)U.x+=$.x,U.y+=$.y,U.x<0&&(U.x=_.length-1),U.x>=_.length&&(U.x=0),U.y<0&&(U.y=_[0].length-1),U.y>=_[0].length&&(U.y=0),_[U.x][U.y]!==null&&V--;return U},I=()=>{const H=_.map(L=>[...L]);for(let L=0;L<h;L++)for(let U=0;U<h;U++){if(_[L][U]===null||E==="x"&&U!==T.y||E==="y"&&L!==T.x)continue;let V=R(L,U);H[V.x][V.y]=_[L][U]}return H},S=(H,L)=>H+(L-H)*Sw,F=()=>{const H=I();for(let L=0;L<h;L++)for(let U=0;U<h;U++){if(_[L][U]===null)continue;const V=o.stage.getChildByName(H[L][U].id),$={x:L*re+L*d+re,y:U*re+U*d+re};V.position.set(S(V.position.x,$.x),S(V.position.y,$.y));const nt={x:$.x-V.position.x,y:$.y-V.position.y};nt.x!==0&&Math.sign(nt.x)!==x.x||nt.y!==0&&Math.sign(nt.y)!==x.y?V.zIndex=10:(V.scale.set(1),V.zIndex=0)}},O=H=>{for(let L=0;L<h;L++)for(let U=0;U<h;U++)if(_[L][U]!==null&&_[L][U].id===H)return{x:L,y:U};return{x:0,y:0}},v=(H,L,U)=>{let V=[[H,L]],$=[],nt=0;for(;V.length>0;){let[K,ct]=V.shift();$.includes(K+"-"+ct)||($.push(K+"-"+ct),nt++,K>0&&_[K-1][ct]!==null&&_[K-1][ct].color===U&&V.push([K-1,ct]),K<_.length-1&&_[K+1][ct]!==null&&_[K+1][ct].color===U&&V.push([K+1,ct]),ct>0&&_[K][ct-1]!==null&&_[K][ct-1].color===U&&V.push([K,ct-1]),ct<_[0].length-1&&_[K][ct+1]!==null&&_[K][ct+1].color===U&&V.push([K,ct+1]))}return nt},w=H=>{for(let L=0;L<_.length;L++)for(let U=0;U<_[0].length;U++)if(_[L][U]!==null&&_[L][U].color===H)return[L,U];return[0,0]},B=()=>{let H=new Array(l.length).fill(!0);for(let L=0;L<l.length;L++){let[U,V]=w(n.palette[L]);v(U,V,n.palette[L])!==l[L]&&(H[L]=!1)}return ha.set(H),!H.includes(!1)};Ah.subscribe(H=>{if(!H)return;const L=_.map(V=>[...V]);for(let V=0;V<h;V++)for(let $=0;$<h;$++){if(_[V][$]===null)continue;const nt=_[V][$].id.split("-").map(bt=>parseInt(bt));L[nt[0]][nt[1]]=_[V][$];const K=o.stage.getChildByName(`${V}-${$}`),ct={x:V*re+V*d+re,y:$*re+$*d+re};K.position.set(ct.x,ct.y)}an.set(0),or.set(!1),la.set(!0),ca.set(!1),ha.set(new Array(l.length).fill(!1)),Ah.set(!1);const U=JSON.parse(JSON.stringify(n));U.pieceMap=L,_=L.map(V=>[...V]),U.moves=[],localStorage.setItem("dailyData",JSON.stringify(U)),i(2,g=!0)});const P=H=>{if(!g)return;i(1,f=!0);const L=O(H),U=C(L),V=A(),$=U.x+V/2,nt=U.y+V/2;b.x=$,b.y=nt,T.x=L.x,T.y=L.y,p=H,Ch.set(_[L.x][L.y].color)},N=H=>{if(!f)return;const L=H.clientX-b.x,U=H.clientY-b.y,V=A(),$=Math.round(L/V),nt=Math.round(U/V);$===0&&nt===0&&(E=null),E||(E=Math.abs(L)>Math.abs(U)?"x":"y"),E==="x"?(m.x=$,m.y=0):(m.x=0,m.y=nt),!(m.x===y.x&&m.y===y.y)&&(x.x=m.x-y.x,x.y=m.y-y.y,m.x*V,m.y*V,y={x:m.x,y:m.y})},k=()=>{let H=localStorage.getItem("userStats"),L;const U=di().tz("Etc/GMT-2").format("YYYYMMDD"),V=di().tz("Etc/GMT-2").subtract(1,"day").format("YYYYMMDD");H?(L=JSON.parse(H),L.gamesWon++,L.scoreHistory.push(s),L&&L.scoreHistory.length>10&&L.scoreHistory.shift(),(an<L.highScore||L.today!==U||!L.highScore)&&(L.highScore=s),L.lastWin===V?L.winStreak+=1:L.winStreak=1,L.lastWin!==U?L.dailyHistory=[s]:L.dailyHistory.push(s),L.lastWin=U,localStorage.setItem("userStats",JSON.stringify(L))):localStorage.setItem("userStats",JSON.stringify({gamesWon:1,scoreHistory:[s],winStreak:1,lastWin:U,dailyHighScore:s,dailyHistory:[s]}))},D=()=>{if(!f)return;Ch.set(null),_=I().map(L=>[...L]);const H=O(p);if(H.x===T.x&&H.y===T.y)i(2,g=!0);else{const L=JSON.parse(JSON.stringify(n));L.pieceMap=_;const U={offset:m,position:T};let V=JSON.parse(localStorage.getItem("dailyData")).moves;if(V.push(U),L.moves=V,localStorage.setItem("dailyData",JSON.stringify(L)),an.update($=>$+1),B()){or.set(!0),i(2,g=!1);const $=localStorage.getItem("userCountry");JSON.parse(localStorage.getItem("userStats")),$!==null&&$!=="XX"&&Rc.post(r+"/win",{moves:V,iso:$}),k()}else i(2,g=!0)}i(1,f=!1),b={x:0,y:0},m={x:0,y:0},E=null},z=()=>{let H=new Array(n.palette.length).fill(0);for(let L=0;L<h;L++)for(let U=0;U<h;U++){if(_[L][U]===null)continue;const V=_[L][U].color,$=n.palette.indexOf(V);H[$]=H[$]+1}return H},j=H=>{const U=H.replace("#",""),V=parseInt(U.substring(0,2),16),$=parseInt(U.substring(2,4),16),nt=parseInt(U.substring(4,6),16),K=Math.min(255,V+10),ct=Math.min(255,$+10),bt=Math.min(255,nt+10);return`#${K.toString(16)}${ct.toString(16)}${bt.toString(16)}`};Fe(()=>{l=z(),o=new Uc({width:yo,height:yo,view:a,antialias:!0,backgroundAlpha:0}),o.ticker.add(F);for(let H=0;H<h;H++)for(let L=0;L<h;L++){if(_[H][L]===null)continue;const U=new Hr;U.beginFill(j(_[H][L].color)),U.drawRoundedRect(0,0,d,d,u);const V=d*.8,$=(d-V)/2,nt=(d-V)/2;U.beginFill(_[H][L].color),U.drawRoundedRect($,nt,V,V,u*.8),U.endFill(),U.hitArea=new _t(-re/2,-re/2,c-re/4,c-re/4),U.position.set(H*re+H*d+re,L*re+L*d+re),U.endFill(),U.name=_[H][L].id,U.eventMode="static",U.on("pointerdown",K=>{P(U.name)}),o.stage.addChild(U)}o.stage.eventMode="static",window.addEventListener("pointermove",H=>{N(H)}),window.addEventListener("pointerup",H=>{D()}),B()?(la.set(!1),or.set(!0),i(2,g=!1)):i(2,g=!0)});function J(H){pi[H?"unshift":"push"](()=>{a=H,i(0,a)})}return e.$$set=H=>{"mapData"in H&&i(3,n=H.mapData)},[a,f,g,n,J]}class Aw extends $t{constructor(t){super(),Yt(this,t,Tw,ww,Vt,{mapData:3},null,[-1,-1])}}var zr={};(function e(t,i,s,n){var r=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL);function o(){}function a(v){var w=i.exports.Promise,B=w!==void 0?w:t.Promise;return typeof B=="function"?new B(v):(v(o,o),null)}var l=function(){var v=Math.floor(16.666666666666668),w,B,P={},N=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(w=function(k){var D=Math.random();return P[D]=requestAnimationFrame(function z(j){N===j||N+v-1<j?(N=j,delete P[D],k()):P[D]=requestAnimationFrame(z)}),D},B=function(k){P[k]&&cancelAnimationFrame(P[k])}):(w=function(k){return setTimeout(k,v)},B=function(k){return clearTimeout(k)}),{frame:w,cancel:B}}(),h=function(){var v,w,B={};function P(N){function k(D,z){N.postMessage({options:D||{},callback:z})}N.init=function(z){var j=z.transferControlToOffscreen();N.postMessage({canvas:j},[j])},N.fire=function(z,j,J){if(w)return k(z,null),w;var H=Math.random().toString(36).slice(2);return w=a(function(L){function U(V){V.data.callback===H&&(delete B[H],N.removeEventListener("message",U),w=null,J(),L())}N.addEventListener("message",U),k(z,H),B[H]=U.bind(null,{data:{callback:H}})}),w},N.reset=function(){N.postMessage({reset:!0});for(var z in B)B[z](),delete B[z]}}return function(){if(v)return v;if(!s&&r){var N=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{v=new Worker(URL.createObjectURL(new Blob([N])))}catch(k){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",k),null}P(v)}return v}}(),c={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function u(v,w){return w?w(v):v}function d(v){return v!=null}function f(v,w,B){return u(v&&d(v[w])?v[w]:c[w],B)}function p(v){return v<0?0:Math.floor(v)}function g(v,w){return Math.floor(Math.random()*(w-v))+v}function m(v){return parseInt(v,16)}function _(v){return v.map(b)}function b(v){var w=String(v).replace(/[^0-9a-f]/gi,"");return w.length<6&&(w=w[0]+w[0]+w[1]+w[1]+w[2]+w[2]),{r:m(w.substring(0,2)),g:m(w.substring(2,4)),b:m(w.substring(4,6))}}function y(v){var w=f(v,"origin",Object);return w.x=f(w,"x",Number),w.y=f(w,"y",Number),w}function E(v){v.width=document.documentElement.clientWidth,v.height=document.documentElement.clientHeight}function x(v){var w=v.getBoundingClientRect();v.width=w.width,v.height=w.height}function T(v){var w=document.createElement("canvas");return w.style.position="fixed",w.style.top="0px",w.style.left="0px",w.style.pointerEvents="none",w.style.zIndex=v,w}function A(v,w,B,P,N,k,D,z,j){v.save(),v.translate(w,B),v.rotate(k),v.scale(P,N),v.arc(0,0,1,D,z,j),v.restore()}function C(v){var w=v.angle*(Math.PI/180),B=v.spread*(Math.PI/180);return{x:v.x,y:v.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:v.startVelocity*.5+Math.random()*v.startVelocity,angle2D:-w+(.5*B-Math.random()*B),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:v.color,shape:v.shape,tick:0,totalTicks:v.ticks,decay:v.decay,drift:v.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:v.gravity*3,ovalScalar:.6,scalar:v.scalar}}function R(v,w){w.x+=Math.cos(w.angle2D)*w.velocity+w.drift,w.y+=Math.sin(w.angle2D)*w.velocity+w.gravity,w.wobble+=w.wobbleSpeed,w.velocity*=w.decay,w.tiltAngle+=.1,w.tiltSin=Math.sin(w.tiltAngle),w.tiltCos=Math.cos(w.tiltAngle),w.random=Math.random()+2,w.wobbleX=w.x+10*w.scalar*Math.cos(w.wobble),w.wobbleY=w.y+10*w.scalar*Math.sin(w.wobble);var B=w.tick++/w.totalTicks,P=w.x+w.random*w.tiltCos,N=w.y+w.random*w.tiltSin,k=w.wobbleX+w.random*w.tiltCos,D=w.wobbleY+w.random*w.tiltSin;if(v.fillStyle="rgba("+w.color.r+", "+w.color.g+", "+w.color.b+", "+(1-B)+")",v.beginPath(),w.shape==="circle")v.ellipse?v.ellipse(w.x,w.y,Math.abs(k-P)*w.ovalScalar,Math.abs(D-N)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI):A(v,w.x,w.y,Math.abs(k-P)*w.ovalScalar,Math.abs(D-N)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI);else if(w.shape==="star")for(var z=Math.PI/2*3,j=4*w.scalar,J=8*w.scalar,H=w.x,L=w.y,U=5,V=Math.PI/U;U--;)H=w.x+Math.cos(z)*J,L=w.y+Math.sin(z)*J,v.lineTo(H,L),z+=V,H=w.x+Math.cos(z)*j,L=w.y+Math.sin(z)*j,v.lineTo(H,L),z+=V;else v.moveTo(Math.floor(w.x),Math.floor(w.y)),v.lineTo(Math.floor(w.wobbleX),Math.floor(N)),v.lineTo(Math.floor(k),Math.floor(D)),v.lineTo(Math.floor(P),Math.floor(w.wobbleY));return v.closePath(),v.fill(),w.tick<w.totalTicks}function I(v,w,B,P,N){var k=w.slice(),D=v.getContext("2d"),z,j,J=a(function(H){function L(){z=j=null,D.clearRect(0,0,P.width,P.height),N(),H()}function U(){s&&!(P.width===n.width&&P.height===n.height)&&(P.width=v.width=n.width,P.height=v.height=n.height),!P.width&&!P.height&&(B(v),P.width=v.width,P.height=v.height),D.clearRect(0,0,P.width,P.height),k=k.filter(function(V){return R(D,V)}),k.length?z=l.frame(U):L()}z=l.frame(U),j=L});return{addFettis:function(H){return k=k.concat(H),J},canvas:v,promise:J,reset:function(){z&&l.cancel(z),j&&j()}}}function S(v,w){var B=!v,P=!!f(w||{},"resize"),N=f(w,"disableForReducedMotion",Boolean),k=r&&!!f(w||{},"useWorker"),D=k?h():null,z=B?E:x,j=v&&D?!!v.__confetti_initialized:!1,J=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,H;function L(V,$,nt){for(var K=f(V,"particleCount",p),ct=f(V,"angle",Number),bt=f(V,"spread",Number),Et=f(V,"startVelocity",Number),mt=f(V,"decay",Number),pe=f(V,"gravity",Number),Le=f(V,"drift",Number),Wi=f(V,"colors",_),wi=f(V,"ticks",Number),ds=f(V,"shapes"),kn=f(V,"scalar"),Fn=y(V),Ws=K,Mt=[],Si=v.width*Fn.x,Xr=v.height*Fn.y;Ws--;)Mt.push(C({x:Si,y:Xr,angle:ct,spread:bt,startVelocity:Et,color:Wi[Ws%Wi.length],shape:ds[g(0,ds.length)],ticks:wi,decay:mt,gravity:pe,drift:Le,scalar:kn}));return H?H.addFettis(Mt):(H=I(v,Mt,z,$,nt),H.promise)}function U(V){var $=N||f(V,"disableForReducedMotion",Boolean),nt=f(V,"zIndex",Number);if($&&J)return a(function(Et){Et()});B&&H?v=H.canvas:B&&!v&&(v=T(nt),document.body.appendChild(v)),P&&!j&&z(v);var K={width:v.width,height:v.height};D&&!j&&D.init(v),j=!0,D&&(v.__confetti_initialized=!0);function ct(){if(D){var Et={getBoundingClientRect:function(){if(!B)return v.getBoundingClientRect()}};z(Et),D.postMessage({resize:{width:Et.width,height:Et.height}});return}K.width=K.height=null}function bt(){H=null,P&&t.removeEventListener("resize",ct),B&&v&&(document.body.removeChild(v),v=null,j=!1)}return P&&t.addEventListener("resize",ct,!1),D?D.fire(V,K,bt):L(V,K,bt)}return U.reset=function(){D&&D.reset(),H&&H.reset()},U}var F;function O(){return F||(F=S(null,{useWorker:!0,resize:!0})),F}i.exports=function(){return O().apply(this,arguments)},i.exports.reset=function(){O().reset()},i.exports.create=S})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),zr,!1);const th=zr.exports;zr.exports.create;function Cw(e){let t,i,s,n,r;return{c(){t=Z("div"),i=Z("p"),s=ge(e[4]),G(i,"class","svelte-4j72mv"),G(t,"class",n="counter "+(e[1]&&e[2]?"new-win":"")+" "+(e[2]?"win":"")+" svelte-4j72mv"),G(t,"style",r=e[3]!==null?`box-shadow: 0 0 25px 0 ${e[3]}; border-radius: 50%`:"")},m(o,a){at(o,t,a),q(t,i),q(i,s),e[5](t)},p(o,[a]){a&16&&Ie(s,o[4]),a&6&&n!==(n="counter "+(o[1]&&o[2]?"new-win":"")+" "+(o[2]?"win":"")+" svelte-4j72mv")&&G(t,"class",n),a&8&&r!==(r=o[3]!==null?`box-shadow: 0 0 25px 0 ${o[3]}; border-radius: 50%`:"")&&G(t,"style",r)},i:it,o:it,d(o){o&&ot(t),e[5](null)}}}function Mw(e,t,i){let s,n,r,o,a;Ye(e,la,h=>i(1,n=h)),Ye(e,or,h=>i(2,r=h)),Ye(e,Ch,h=>i(3,o=h)),Ye(e,an,h=>i(4,a=h)),Fe(()=>{console.log(s);const h=()=>{const u=s.getBoundingClientRect(),d=u.left/window.innerWidth,f=(u.top+u.height)/window.innerHeight,p=(u.left+u.width)/window.innerWidth;th({particleCount:50,spread:70,startVelocity:20,gravity:.5,scalar:.75,zIndex:-1,angle:135,origin:{x:d,y:f}}),th({particleCount:50,spread:70,startVelocity:20,gravity:.5,scalar:.75,zIndex:-1,angle:45,origin:{x:p,y:f}})},c=or.subscribe(u=>{u&&(n?(h(),setTimeout(()=>{la.set(!1),ca.set(!0)},1500)):ca.set(!0))});return()=>{c()}}),Pn(()=>{th.reset()});function l(h){pi[h?"unshift":"push"](()=>{s=h,i(0,s)})}return i(0,s=null),[s,n,r,o,a,l]}class Iw extends $t{constructor(t){super(),Yt(this,t,Mw,Cw,Vt,{})}}function Pw(e){let t,i,s,n,r;return i=new Iw({}),n=new Aw({props:{mapData:e[0]}}),{c(){t=Z("div"),Wt(i.$$.fragment),s=yt(),Wt(n.$$.fragment),G(t,"class","game-wrapper svelte-1mslmw3")},m(o,a){at(o,t,a),Ut(i,t,null),q(t,s),Ut(n,t,null),r=!0},p(o,[a]){const l={};a&1&&(l.mapData=o[0]),n.$set(l)},i(o){r||(X(i.$$.fragment,o),X(n.$$.fragment,o),r=!0)},o(o){tt(i.$$.fragment,o),tt(n.$$.fragment,o),r=!1},d(o){o&&ot(t),Gt(i),Gt(n)}}}function Rw(e,t,i){let{mapData:s}=t;return Fe(()=>{Sy.set(s.pieceMap),Cg.set(s.palette),an.set(s.moves.length)}),e.$$set=n=>{"mapData"in n&&i(0,s=n.mapData)},[s]}class Dw extends $t{constructor(t){super(),Yt(this,t,Rw,Pw,Vt,{mapData:0})}}const Ow="/assets/loading-icon-ccea71d8.gif";function kw(e){let t,i,s;return{c(){t=Z("div"),i=Z("img"),yi(i.src,s=Ow)||G(i,"src",s),G(i,"alt","Loading"),G(i,"class","svelte-w0ysyk"),G(t,"class","loading svelte-w0ysyk")},m(n,r){at(n,t,r),q(t,i)},p:it,i:it,o:it,d(n){n&&ot(t)}}}class Fw extends $t{constructor(t){super(),Yt(this,t,null,kw,Vt,{})}}const Bw=1/3,ni=1/6,eh=e=>Math.floor(e)|0,ih=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function Lw(e=Math.random){const t=Nw(e),i=new Float64Array(t).map(r=>ih[r%12*3]),s=new Float64Array(t).map(r=>ih[r%12*3+1]),n=new Float64Array(t).map(r=>ih[r%12*3+2]);return function(o,a,l){let h,c,u,d;const f=(o+a+l)*Bw,p=eh(o+f),g=eh(a+f),m=eh(l+f),_=(p+g+m)*ni,b=p-_,y=g-_,E=m-_,x=o-b,T=a-y,A=l-E;let C,R,I,S,F,O;x>=T?T>=A?(C=1,R=0,I=0,S=1,F=1,O=0):x>=A?(C=1,R=0,I=0,S=1,F=0,O=1):(C=0,R=0,I=1,S=1,F=0,O=1):T<A?(C=0,R=0,I=1,S=0,F=1,O=1):x<A?(C=0,R=1,I=0,S=0,F=1,O=1):(C=0,R=1,I=0,S=1,F=1,O=0);const v=x-C+ni,w=T-R+ni,B=A-I+ni,P=x-S+2*ni,N=T-F+2*ni,k=A-O+2*ni,D=x-1+3*ni,z=T-1+3*ni,j=A-1+3*ni,J=p&255,H=g&255,L=m&255;let U=.6-x*x-T*T-A*A;if(U<0)h=0;else{const K=J+t[H+t[L]];U*=U,h=U*U*(i[K]*x+s[K]*T+n[K]*A)}let V=.6-v*v-w*w-B*B;if(V<0)c=0;else{const K=J+C+t[H+R+t[L+I]];V*=V,c=V*V*(i[K]*v+s[K]*w+n[K]*B)}let $=.6-P*P-N*N-k*k;if($<0)u=0;else{const K=J+S+t[H+F+t[L+O]];$*=$,u=$*$*(i[K]*P+s[K]*N+n[K]*k)}let nt=.6-D*D-z*z-j*j;if(nt<0)d=0;else{const K=J+1+t[H+1+t[L+1]];nt*=nt,d=nt*nt*(i[K]*D+s[K]*z+n[K]*j)}return 32*(h+c+u+d)}}function Nw(e){const i=new Uint8Array(512);for(let s=0;s<512/2;s++)i[s]=s;for(let s=0;s<512/2-1;s++){const n=s+~~(e()*(256-s)),r=i[s];i[s]=i[n],i[n]=r}for(let s=256;s<512;s++)i[s]=i[s-256];return i}function Uw(e){let t;return{c(){t=Z("canvas"),G(t,"width",e[1]),G(t,"height",e[2]),G(t,"class","svelte-kf41j1")},m(i,s){at(i,t,s),e[3](t)},p(i,[s]){s&2&&G(t,"width",i[1]),s&4&&G(t,"height",i[2])},i:it,o:it,d(i){i&&ot(t),e[3](null)}}}const xo=50,vo=200,Gw=5,Hw=.6,Gd=50,zw=.05,Vw=.01,Ww=5e-4;function jw(e,t,i){let s,n;Ye(e,ha,I=>i(11,s=I)),Ye(e,Cg,I=>i(12,n=I));const r=Lw();let o=document.createElement("canvas");const a=o.getContext("2d");let l,h,c,u,d,f,p,g=0;const m=[[5,5,5],[55,55,55],[5,5,5],[50,50,50],[15,15,15],[15,15,15]];let _=[...m.map(I=>[...I])],b=[...m.map(I=>[...I])];const y=I=>{let S=parseInt(I.substring(1,3),16),F=parseInt(I.substring(3,5),16),O=parseInt(I.substring(5,7),16);return[S,F,O]},E=()=>{const I=window.innerWidth,S=window.innerHeight,F=I/S;F>=1?(l=xo,h=Math.floor(xo/F),i(1,d=vo),i(2,f=Math.floor(vo/F))):(l=xo,h=xo,i(1,d=Math.floor(vo*F)),i(2,f=vo))},x=()=>{for(let I=0;I<_.length;I++)for(let S=0;S<_[I].length;S++)b[I][S]=b[I][S]+(_[I][S]-b[I][S])*Vw},T=I=>{const S=Math.floor((I+1)/2*b.length),F=Math.min(S,b.length-1);return b[F]},A=()=>{const I=a.createImageData(l,h),S=I.data;for(let F=0;F<l;F++)for(let O=0;O<h;O++){const v=(F+O*l)*4,w=p?[p[v],p[v+1],p[v+2]]:[0,0,0],B=r(F/Gd,O/Gd,g),P=T(B),N=w.map((k,D)=>k+(P[D]-k)*zw);S[v]=N[0],S[v+1]=N[1],S[v+2]=N[2],S[v+3]=255}p=S,g+=Ww,a.putImageData(I,0,0),u.drawImage(o,0,0,l,h,0,0,d,f),u.filter=`blur(${Gw}px) brightness(${Hw})`},C=()=>{A(),x(),requestAnimationFrame(C)};Fe(()=>{u=c.getContext("2d"),E(),C(),window.addEventListener("resize",E),ha.subscribe(()=>{if(n&&s){_=n.map(I=>y(I));for(let I=0;I<_.length;I++)s[I]||(_[I]=m[I]);b=b.slice(0,_.length)}else _=[...m.map(I=>[...I])]})});function R(I){pi[I?"unshift":"push"](()=>{c=I,i(0,c)})}return[c,d,f,R]}class Xw extends $t{constructor(t){super(),Yt(this,t,jw,Uw,Vt,{})}}const Yw="modulepreload",$w=function(e){return"/"+e},Hd={},Kw=function(t,i,s){if(!i||i.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(i.map(r=>{if(r=$w(r),r in Hd)return;Hd[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let c=n.length-1;c>=0;c--){const u=n[c];if(u.href===r&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":Yw,o||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),o)return new Promise((c,u)=>{h.addEventListener("load",c),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};var bn={};const qw=[["AF","AFG","004","ISO 3166-2:AF"],["AL","ALB","008","ISO 3166-2:AL"],["DZ","DZA","012","ISO 3166-2:DZ"],["AS","ASM","016","ISO 3166-2:AS"],["AD","AND","020","ISO 3166-2:AD"],["AO","AGO","024","ISO 3166-2:AO"],["AI","AIA","660","ISO 3166-2:AI"],["AQ","ATA","010","ISO 3166-2:AQ"],["AG","ATG","028","ISO 3166-2:AG"],["AR","ARG","032","ISO 3166-2:AR"],["AM","ARM","051","ISO 3166-2:AM"],["AW","ABW","533","ISO 3166-2:AW"],["AU","AUS","036","ISO 3166-2:AU"],["AT","AUT","040","ISO 3166-2:AT"],["AZ","AZE","031","ISO 3166-2:AZ"],["BS","BHS","044","ISO 3166-2:BS"],["BH","BHR","048","ISO 3166-2:BH"],["BD","BGD","050","ISO 3166-2:BD"],["BB","BRB","052","ISO 3166-2:BB"],["BY","BLR","112","ISO 3166-2:BY"],["BE","BEL","056","ISO 3166-2:BE"],["BZ","BLZ","084","ISO 3166-2:BZ"],["BJ","BEN","204","ISO 3166-2:BJ"],["BM","BMU","060","ISO 3166-2:BM"],["BT","BTN","064","ISO 3166-2:BT"],["BO","BOL","068","ISO 3166-2:BO"],["BA","BIH","070","ISO 3166-2:BA"],["BW","BWA","072","ISO 3166-2:BW"],["BV","BVT","074","ISO 3166-2:BV"],["BR","BRA","076","ISO 3166-2:BR"],["IO","IOT","086","ISO 3166-2:IO"],["BN","BRN","096","ISO 3166-2:BN"],["BG","BGR","100","ISO 3166-2:BG"],["BF","BFA","854","ISO 3166-2:BF"],["BI","BDI","108","ISO 3166-2:BI"],["KH","KHM","116","ISO 3166-2:KH"],["CM","CMR","120","ISO 3166-2:CM"],["CA","CAN","124","ISO 3166-2:CA"],["CV","CPV","132","ISO 3166-2:CV"],["KY","CYM","136","ISO 3166-2:KY"],["CF","CAF","140","ISO 3166-2:CF"],["TD","TCD","148","ISO 3166-2:TD"],["CL","CHL","152","ISO 3166-2:CL"],["CN","CHN","156","ISO 3166-2:CN"],["CX","CXR","162","ISO 3166-2:CX"],["CC","CCK","166","ISO 3166-2:CC"],["CO","COL","170","ISO 3166-2:CO"],["KM","COM","174","ISO 3166-2:KM"],["CG","COG","178","ISO 3166-2:CG"],["CD","COD","180","ISO 3166-2:CD"],["CK","COK","184","ISO 3166-2:CK"],["CR","CRI","188","ISO 3166-2:CR"],["CI","CIV","384","ISO 3166-2:CI"],["HR","HRV","191","ISO 3166-2:HR"],["CU","CUB","192","ISO 3166-2:CU"],["CY","CYP","196","ISO 3166-2:CY"],["CZ","CZE","203","ISO 3166-2:CZ"],["DK","DNK","208","ISO 3166-2:DK"],["DJ","DJI","262","ISO 3166-2:DJ"],["DM","DMA","212","ISO 3166-2:DM"],["DO","DOM","214","ISO 3166-2:DO"],["EC","ECU","218","ISO 3166-2:EC"],["EG","EGY","818","ISO 3166-2:EG"],["SV","SLV","222","ISO 3166-2:SV"],["GQ","GNQ","226","ISO 3166-2:GQ"],["ER","ERI","232","ISO 3166-2:ER"],["EE","EST","233","ISO 3166-2:EE"],["ET","ETH","231","ISO 3166-2:ET"],["FK","FLK","238","ISO 3166-2:FK"],["FO","FRO","234","ISO 3166-2:FO"],["FJ","FJI","242","ISO 3166-2:FJ"],["FI","FIN","246","ISO 3166-2:FI"],["FR","FRA","250","ISO 3166-2:FR"],["GF","GUF","254","ISO 3166-2:GF"],["PF","PYF","258","ISO 3166-2:PF"],["TF","ATF","260","ISO 3166-2:TF"],["GA","GAB","266","ISO 3166-2:GA"],["GM","GMB","270","ISO 3166-2:GM"],["GE","GEO","268","ISO 3166-2:GE"],["DE","DEU","276","ISO 3166-2:DE"],["GH","GHA","288","ISO 3166-2:GH"],["GI","GIB","292","ISO 3166-2:GI"],["GR","GRC","300","ISO 3166-2:GR"],["GL","GRL","304","ISO 3166-2:GL"],["GD","GRD","308","ISO 3166-2:GD"],["GP","GLP","312","ISO 3166-2:GP"],["GU","GUM","316","ISO 3166-2:GU"],["GT","GTM","320","ISO 3166-2:GT"],["GN","GIN","324","ISO 3166-2:GN"],["GW","GNB","624","ISO 3166-2:GW"],["GY","GUY","328","ISO 3166-2:GY"],["HT","HTI","332","ISO 3166-2:HT"],["HM","HMD","334","ISO 3166-2:HM"],["VA","VAT","336","ISO 3166-2:VA"],["HN","HND","340","ISO 3166-2:HN"],["HK","HKG","344","ISO 3166-2:HK"],["HU","HUN","348","ISO 3166-2:HU"],["IS","ISL","352","ISO 3166-2:IS"],["IN","IND","356","ISO 3166-2:IN"],["ID","IDN","360","ISO 3166-2:ID"],["IR","IRN","364","ISO 3166-2:IR"],["IQ","IRQ","368","ISO 3166-2:IQ"],["IE","IRL","372","ISO 3166-2:IE"],["IL","ISR","376","ISO 3166-2:IL"],["IT","ITA","380","ISO 3166-2:IT"],["JM","JAM","388","ISO 3166-2:JM"],["JP","JPN","392","ISO 3166-2:JP"],["JO","JOR","400","ISO 3166-2:JO"],["KZ","KAZ","398","ISO 3166-2:KZ"],["KE","KEN","404","ISO 3166-2:KE"],["KI","KIR","296","ISO 3166-2:KI"],["KP","PRK","408","ISO 3166-2:KP"],["KR","KOR","410","ISO 3166-2:KR"],["KW","KWT","414","ISO 3166-2:KW"],["KG","KGZ","417","ISO 3166-2:KG"],["LA","LAO","418","ISO 3166-2:LA"],["LV","LVA","428","ISO 3166-2:LV"],["LB","LBN","422","ISO 3166-2:LB"],["LS","LSO","426","ISO 3166-2:LS"],["LR","LBR","430","ISO 3166-2:LR"],["LY","LBY","434","ISO 3166-2:LY"],["LI","LIE","438","ISO 3166-2:LI"],["LT","LTU","440","ISO 3166-2:LT"],["LU","LUX","442","ISO 3166-2:LU"],["MO","MAC","446","ISO 3166-2:MO"],["MG","MDG","450","ISO 3166-2:MG"],["MW","MWI","454","ISO 3166-2:MW"],["MY","MYS","458","ISO 3166-2:MY"],["MV","MDV","462","ISO 3166-2:MV"],["ML","MLI","466","ISO 3166-2:ML"],["MT","MLT","470","ISO 3166-2:MT"],["MH","MHL","584","ISO 3166-2:MH"],["MQ","MTQ","474","ISO 3166-2:MQ"],["MR","MRT","478","ISO 3166-2:MR"],["MU","MUS","480","ISO 3166-2:MU"],["YT","MYT","175","ISO 3166-2:YT"],["MX","MEX","484","ISO 3166-2:MX"],["FM","FSM","583","ISO 3166-2:FM"],["MD","MDA","498","ISO 3166-2:MD"],["MC","MCO","492","ISO 3166-2:MC"],["MN","MNG","496","ISO 3166-2:MN"],["MS","MSR","500","ISO 3166-2:MS"],["MA","MAR","504","ISO 3166-2:MA"],["MZ","MOZ","508","ISO 3166-2:MZ"],["MM","MMR","104","ISO 3166-2:MM"],["NA","NAM","516","ISO 3166-2:NA"],["NR","NRU","520","ISO 3166-2:NR"],["NP","NPL","524","ISO 3166-2:NP"],["NL","NLD","528","ISO 3166-2:NL"],["NC","NCL","540","ISO 3166-2:NC"],["NZ","NZL","554","ISO 3166-2:NZ"],["NI","NIC","558","ISO 3166-2:NI"],["NE","NER","562","ISO 3166-2:NE"],["NG","NGA","566","ISO 3166-2:NG"],["NU","NIU","570","ISO 3166-2:NU"],["NF","NFK","574","ISO 3166-2:NF"],["MP","MNP","580","ISO 3166-2:MP"],["MK","MKD","807","ISO 3166-2:MK"],["NO","NOR","578","ISO 3166-2:NO"],["OM","OMN","512","ISO 3166-2:OM"],["PK","PAK","586","ISO 3166-2:PK"],["PW","PLW","585","ISO 3166-2:PW"],["PS","PSE","275","ISO 3166-2:PS"],["PA","PAN","591","ISO 3166-2:PA"],["PG","PNG","598","ISO 3166-2:PG"],["PY","PRY","600","ISO 3166-2:PY"],["PE","PER","604","ISO 3166-2:PE"],["PH","PHL","608","ISO 3166-2:PH"],["PN","PCN","612","ISO 3166-2:PN"],["PL","POL","616","ISO 3166-2:PL"],["PT","PRT","620","ISO 3166-2:PT"],["PR","PRI","630","ISO 3166-2:PR"],["QA","QAT","634","ISO 3166-2:QA"],["RE","REU","638","ISO 3166-2:RE"],["RO","ROU","642","ISO 3166-2:RO"],["RU","RUS","643","ISO 3166-2:RU"],["RW","RWA","646","ISO 3166-2:RW"],["SH","SHN","654","ISO 3166-2:SH"],["KN","KNA","659","ISO 3166-2:KN"],["LC","LCA","662","ISO 3166-2:LC"],["PM","SPM","666","ISO 3166-2:PM"],["VC","VCT","670","ISO 3166-2:VC"],["WS","WSM","882","ISO 3166-2:WS"],["SM","SMR","674","ISO 3166-2:SM"],["ST","STP","678","ISO 3166-2:ST"],["SA","SAU","682","ISO 3166-2:SA"],["SN","SEN","686","ISO 3166-2:SN"],["SC","SYC","690","ISO 3166-2:SC"],["SL","SLE","694","ISO 3166-2:SL"],["SG","SGP","702","ISO 3166-2:SG"],["SK","SVK","703","ISO 3166-2:SK"],["SI","SVN","705","ISO 3166-2:SI"],["SB","SLB","090","ISO 3166-2:SB"],["SO","SOM","706","ISO 3166-2:SO"],["ZA","ZAF","710","ISO 3166-2:ZA"],["GS","SGS","239","ISO 3166-2:GS"],["ES","ESP","724","ISO 3166-2:ES"],["LK","LKA","144","ISO 3166-2:LK"],["SD","SDN","729","ISO 3166-2:SD"],["SR","SUR","740","ISO 3166-2:SR"],["SJ","SJM","744","ISO 3166-2:SJ"],["SZ","SWZ","748","ISO 3166-2:SZ"],["SE","SWE","752","ISO 3166-2:SE"],["CH","CHE","756","ISO 3166-2:CH"],["SY","SYR","760","ISO 3166-2:SY"],["TW","TWN","158","ISO 3166-2:TW"],["TJ","TJK","762","ISO 3166-2:TJ"],["TZ","TZA","834","ISO 3166-2:TZ"],["TH","THA","764","ISO 3166-2:TH"],["TL","TLS","626","ISO 3166-2:TL"],["TG","TGO","768","ISO 3166-2:TG"],["TK","TKL","772","ISO 3166-2:TK"],["TO","TON","776","ISO 3166-2:TO"],["TT","TTO","780","ISO 3166-2:TT"],["TN","TUN","788","ISO 3166-2:TN"],["TR","TUR","792","ISO 3166-2:TR"],["TM","TKM","795","ISO 3166-2:TM"],["TC","TCA","796","ISO 3166-2:TC"],["TV","TUV","798","ISO 3166-2:TV"],["UG","UGA","800","ISO 3166-2:UG"],["UA","UKR","804","ISO 3166-2:UA"],["AE","ARE","784","ISO 3166-2:AE"],["GB","GBR","826","ISO 3166-2:GB"],["US","USA","840","ISO 3166-2:US"],["UM","UMI","581","ISO 3166-2:UM"],["UY","URY","858","ISO 3166-2:UY"],["UZ","UZB","860","ISO 3166-2:UZ"],["VU","VUT","548","ISO 3166-2:VU"],["VE","VEN","862","ISO 3166-2:VE"],["VN","VNM","704","ISO 3166-2:VN"],["VG","VGB","092","ISO 3166-2:VG"],["VI","VIR","850","ISO 3166-2:VI"],["WF","WLF","876","ISO 3166-2:WF"],["EH","ESH","732","ISO 3166-2:EH"],["YE","YEM","887","ISO 3166-2:YE"],["ZM","ZMB","894","ISO 3166-2:ZM"],["ZW","ZWE","716","ISO 3166-2:ZW"],["AX","ALA","248","ISO 3166-2:AX"],["BQ","BES","535","ISO 3166-2:BQ"],["CW","CUW","531","ISO 3166-2:CW"],["GG","GGY","831","ISO 3166-2:GG"],["IM","IMN","833","ISO 3166-2:IM"],["JE","JEY","832","ISO 3166-2:JE"],["ME","MNE","499","ISO 3166-2:ME"],["BL","BLM","652","ISO 3166-2:BL"],["MF","MAF","663","ISO 3166-2:MF"],["RS","SRB","688","ISO 3166-2:RS"],["SX","SXM","534","ISO 3166-2:SX"],["SS","SSD","728","ISO 3166-2:SS"],["XK","XKX","983","ISO 3166-2:XK"]],Zw=["br","cy","dv","sw","eu","af","am","ha","ku","ml","no","ps","sd","so","sq","ta","tg","tt","ug","ur","vi","ar","az","be","bg","bn","bs","ca","cs","da","de","el","en","es","et","fa","fi","fr","gl","he","hi","hr","hu","hy","id","is","it","ja","ka","kk","km","ko","ky","lt","lv","mk","mn","mr","ms","nb","nl","nn","pl","pt","ro","ru","sk","sl","sr","sv","th","tr","uk","uz","zh"];var il={};il.remove=Jw;var $o=[{base:" ",chars:" "},{base:"0",chars:"߀"},{base:"A",chars:"ⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",chars:"Ꜳ"},{base:"AE",chars:"ÆǼǢ"},{base:"AO",chars:"Ꜵ"},{base:"AU",chars:"Ꜷ"},{base:"AV",chars:"ꜸꜺ"},{base:"AY",chars:"Ꜽ"},{base:"B",chars:"ⒷＢḂḄḆɃƁ"},{base:"C",chars:"ⒸＣꜾḈĆCĈĊČÇƇȻ"},{base:"D",chars:"ⒹＤḊĎḌḐḒḎĐƊƉᴅꝹ"},{base:"Dh",chars:"Ð"},{base:"DZ",chars:"ǱǄ"},{base:"Dz",chars:"ǲǅ"},{base:"E",chars:"ɛⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎᴇ"},{base:"F",chars:"ꝼⒻＦḞƑꝻ"},{base:"G",chars:"ⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾɢ"},{base:"H",chars:"ⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",chars:"ⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",chars:"ⒿＪĴɈȷ"},{base:"K",chars:"ⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",chars:"ⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",chars:"Ǉ"},{base:"Lj",chars:"ǈ"},{base:"M",chars:"ⓂＭḾṀṂⱮƜϻ"},{base:"N",chars:"ꞤȠⓃＮǸŃÑṄŇṆŅṊṈƝꞐᴎ"},{base:"NJ",chars:"Ǌ"},{base:"Nj",chars:"ǋ"},{base:"O",chars:"ⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OE",chars:"Œ"},{base:"OI",chars:"Ƣ"},{base:"OO",chars:"Ꝏ"},{base:"OU",chars:"Ȣ"},{base:"P",chars:"ⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",chars:"ⓆＱꝖꝘɊ"},{base:"R",chars:"ⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",chars:"ⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",chars:"ⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"Th",chars:"Þ"},{base:"TZ",chars:"Ꜩ"},{base:"U",chars:"ⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",chars:"ⓋＶṼṾƲꝞɅ"},{base:"VY",chars:"Ꝡ"},{base:"W",chars:"ⓌＷẀẂŴẆẄẈⱲ"},{base:"X",chars:"ⓍＸẊẌ"},{base:"Y",chars:"ⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",chars:"ⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",chars:"ⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑ"},{base:"aa",chars:"ꜳ"},{base:"ae",chars:"æǽǣ"},{base:"ao",chars:"ꜵ"},{base:"au",chars:"ꜷ"},{base:"av",chars:"ꜹꜻ"},{base:"ay",chars:"ꜽ"},{base:"b",chars:"ⓑｂḃḅḇƀƃɓƂ"},{base:"c",chars:"ｃⓒćĉċčçḉƈȼꜿↄ"},{base:"d",chars:"ⓓｄḋďḍḑḓḏđƌɖɗƋᏧԁꞪ"},{base:"dh",chars:"ð"},{base:"dz",chars:"ǳǆ"},{base:"e",chars:"ⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇǝ"},{base:"f",chars:"ⓕｆḟƒ"},{base:"ff",chars:"ﬀ"},{base:"fi",chars:"ﬁ"},{base:"fl",chars:"ﬂ"},{base:"ffi",chars:"ﬃ"},{base:"ffl",chars:"ﬄ"},{base:"g",chars:"ⓖｇǵĝḡğġǧģǥɠꞡꝿᵹ"},{base:"h",chars:"ⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",chars:"ƕ"},{base:"i",chars:"ⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",chars:"ⓙｊĵǰɉ"},{base:"k",chars:"ⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",chars:"ⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇɭ"},{base:"lj",chars:"ǉ"},{base:"m",chars:"ⓜｍḿṁṃɱɯ"},{base:"n",chars:"ⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥлԉ"},{base:"nj",chars:"ǌ"},{base:"o",chars:"ⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿꝋꝍɵɔᴑ"},{base:"oe",chars:"œ"},{base:"oi",chars:"ƣ"},{base:"oo",chars:"ꝏ"},{base:"ou",chars:"ȣ"},{base:"p",chars:"ⓟｐṕṗƥᵽꝑꝓꝕρ"},{base:"q",chars:"ⓠｑɋꝗꝙ"},{base:"r",chars:"ⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",chars:"ⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛʂ"},{base:"ss",chars:"ß"},{base:"t",chars:"ⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"th",chars:"þ"},{base:"tz",chars:"ꜩ"},{base:"u",chars:"ⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",chars:"ⓥｖṽṿʋꝟʌ"},{base:"vy",chars:"ꝡ"},{base:"w",chars:"ⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",chars:"ⓧｘẋẍ"},{base:"y",chars:"ⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",chars:"ⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Wc={};for(var Eo=0;Eo<$o.length;Eo+=1)for(var zd=$o[Eo].chars,sh=0;sh<zd.length;sh+=1)Wc[zd[sh]]=$o[Eo].base;function Jw(e){return e.replace(/[^\u0000-\u007e]/g,function(t){return Wc[t]||t})}il.replacementList=$o;il.diacriticsMap=Wc;(function(e){const t=qw,i=Zw,s=il.remove,n={},r={},o={},a={},l={};t.forEach(function(x){const T=x;r[T[0]]=T[1],o[T[1]]=T[0],a[T[2]]=T[0],l[T[0]]=T[2]});function h(x){return("000"+(x||"")).slice(-3)}function c(x,T){return Object.prototype.hasOwnProperty.call(x,T)}function u(x,T){return Object.keys(x).reduce(function(A,C){const R=x[C];return A[C]=T(R,C),A},{})}function d(x,T){switch(x){case"official":return Array.isArray(T)?T[0]:T;case"all":return typeof T=="string"?[T]:T;case"alias":return Array.isArray(T)?T[1]||T[0]:T;default:throw new TypeError("LocaleNameType must be one of these: all, official, alias!")}}e.registerLocale=function(x){if(!x.locale)throw new TypeError("Missing localeData.locale");if(!x.countries)throw new TypeError("Missing localeData.countries");n[x.locale]=x.countries};function f(x){return o[x]}e.alpha3ToAlpha2=f;function p(x){return r[x]}e.alpha2ToAlpha3=p;function g(x){return l[f(x)]}e.alpha3ToNumeric=g;function m(x){return l[x]}e.alpha2ToNumeric=m;function _(x){const T=h(x);return p(a[T])}e.numericToAlpha3=_;function b(x){const T=h(x);return a[T]}e.numericToAlpha2=b;function y(x){if(typeof x=="string"){if(/^[0-9]*$/.test(x))return _(x);if(x.length===2)return p(x.toUpperCase());if(x.length===3)return x.toUpperCase()}if(typeof x=="number")return _(x)}e.toAlpha3=y;function E(x){if(typeof x=="string"){if(/^[0-9]*$/.test(x))return b(x);if(x.length===2)return x.toUpperCase();if(x.length===3)return f(x.toUpperCase())}if(typeof x=="number")return b(x)}e.toAlpha2=E,e.getName=function(x,T,A={}){"select"in A||(A.select="official");try{const R=n[T.toLowerCase()][E(x)];return d(A.select,R)}catch{return}},e.getNames=function(x,T={}){"select"in T||(T.select="official");const A=n[x.toLowerCase()];return A===void 0?{}:u(A,function(C){return d(T.select,C)})},e.getAlpha2Code=function(x,T){const A=R=>R.toLowerCase(),C=(R,I)=>A(R)===A(I);try{const R=n[T.toLowerCase()];for(const I in R)if(c(R,I)){if(typeof R[I]=="string"&&C(R[I],x))return I;if(Array.isArray(R[I])){for(const S of R[I])if(C(S,x))return I}}return}catch{return}},e.getSimpleAlpha2Code=function(x,T){const A=R=>s(R.toLowerCase()),C=(R,I)=>A(R)===A(I);try{const R=n[T.toLowerCase()];for(const I in R)if(c(R,I)){if(typeof R[I]=="string"&&C(R[I],x))return I;if(Array.isArray(R[I])){for(const S of R[I])if(C(S,x))return I}}return}catch{return}},e.getAlpha2Codes=function(){return r},e.getAlpha3Code=function(x,T){const A=e.getAlpha2Code(x,T);if(A)return e.toAlpha3(A)},e.getSimpleAlpha3Code=function(x,T){const A=e.getSimpleAlpha2Code(x,T);if(A)return e.toAlpha3(A)},e.getAlpha3Codes=function(){return o},e.getNumericCodes=function(){return a},e.langs=function(){return Object.keys(n)},e.getSupportedLanguages=function(){return i},e.isValid=function(x){if(!x)return!1;const T=x.toString().toUpperCase();return c(o,T)||c(r,T)||c(a,T)}})(bn);function sl(e){return e.split("-")[1]}function zm(e){return e==="y"?"height":"width"}function Ps(e){return e.split("-")[0]}function nl(e){return["top","bottom"].includes(Ps(e))?"x":"y"}function Vd(e,t,i){let{reference:s,floating:n}=e;const r=s.x+s.width/2-n.width/2,o=s.y+s.height/2-n.height/2,a=nl(t),l=zm(a),h=s[l]/2-n[l]/2,c=a==="x";let u;switch(Ps(t)){case"top":u={x:r,y:s.y-n.height};break;case"bottom":u={x:r,y:s.y+s.height};break;case"right":u={x:s.x+s.width,y:o};break;case"left":u={x:s.x-n.width,y:o};break;default:u={x:s.x,y:s.y}}switch(sl(t)){case"start":u[a]-=h*(i&&c?-1:1);break;case"end":u[a]+=h*(i&&c?-1:1)}return u}const Qw=async(e,t,i)=>{const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o}=i,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:n}),{x:c,y:u}=Vd(h,s,l),d=s,f={},p=0;for(let g=0;g<a.length;g++){const{name:m,fn:_}=a[g],{x:b,y,data:E,reset:x}=await _({x:c,y:u,initialPlacement:s,placement:d,strategy:n,middlewareData:f,rects:h,platform:o,elements:{reference:e,floating:t}});c=b??c,u=y??u,f={...f,[m]:{...f[m],...E}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(h=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:n}):x.rects),{x:c,y:u}=Vd(h,d,l)),g=-1)}return{x:c,y:u,placement:d,strategy:n,middlewareData:f}};function tS(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Sa(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function Vm(e,t){var i;t===void 0&&(t={});const{x:s,y:n,platform:r,rects:o,elements:a,strategy:l}=e,{boundary:h="clippingAncestors",rootBoundary:c="viewport",elementContext:u="floating",altBoundary:d=!1,padding:f=0}=t,p=tS(f),g=a[d?u==="floating"?"reference":"floating":u],m=Sa(await r.getClippingRect({element:(i=await(r.isElement==null?void 0:r.isElement(g)))==null||i?g:g.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:h,rootBoundary:c,strategy:l})),_=u==="floating"?{...o.floating,x:s,y:n}:o.reference,b=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),y=await(r.isElement==null?void 0:r.isElement(b))&&await(r.getScale==null?void 0:r.getScale(b))||{x:1,y:1},E=Sa(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:b,strategy:l}):_);return{top:(m.top-E.top+p.top)/y.y,bottom:(E.bottom-m.bottom+p.bottom)/y.y,left:(m.left-E.left+p.left)/y.x,right:(E.right-m.right+p.right)/y.x}}const eS=Math.min,iS=Math.max;function Wd(e,t,i){return iS(e,eS(t,i))}const sS=["top","right","bottom","left"];sS.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const nS={left:"right",right:"left",bottom:"top",top:"bottom"};function Ta(e){return e.replace(/left|right|bottom|top/g,t=>nS[t])}function rS(e,t,i){i===void 0&&(i=!1);const s=sl(e),n=nl(e),r=zm(n);let o=n==="x"?s===(i?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=Ta(o)),{main:o,cross:Ta(o)}}const oS={start:"end",end:"start"};function nh(e){return e.replace(/start|end/g,t=>oS[t])}const aS=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:s,middlewareData:n,rects:r,initialPlacement:o,platform:a,elements:l}=t,{mainAxis:h=!0,crossAxis:c=!0,fallbackPlacements:u,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...g}=e,m=Ps(s),_=Ps(o)===o,b=await(a.isRTL==null?void 0:a.isRTL(l.floating)),y=u||(_||!p?[Ta(o)]:function(S){const F=Ta(S);return[nh(S),F,nh(F)]}(o));u||f==="none"||y.push(...function(S,F,O,v){const w=sl(S);let B=function(P,N,k){const D=["left","right"],z=["right","left"],j=["top","bottom"],J=["bottom","top"];switch(P){case"top":case"bottom":return k?N?z:D:N?D:z;case"left":case"right":return N?j:J;default:return[]}}(Ps(S),O==="start",v);return w&&(B=B.map(P=>P+"-"+w),F&&(B=B.concat(B.map(nh)))),B}(o,p,f,b));const E=[o,...y],x=await Vm(t,g),T=[];let A=((i=n.flip)==null?void 0:i.overflows)||[];if(h&&T.push(x[m]),c){const{main:S,cross:F}=rS(s,r,b);T.push(x[S],x[F])}if(A=[...A,{placement:s,overflows:T}],!T.every(S=>S<=0)){var C,R;const S=(((C=n.flip)==null?void 0:C.index)||0)+1,F=E[S];if(F)return{data:{index:S,overflows:A},reset:{placement:F}};let O=(R=A.filter(v=>v.overflows[0]<=0).sort((v,w)=>v.overflows[1]-w.overflows[1])[0])==null?void 0:R.placement;if(!O)switch(d){case"bestFit":{var I;const v=(I=A.map(w=>[w.placement,w.overflows.filter(B=>B>0).reduce((B,P)=>B+P,0)]).sort((w,B)=>w[1]-B[1])[0])==null?void 0:I[0];v&&(O=v);break}case"initialPlacement":O=o}if(s!==O)return{reset:{placement:O}}}return{}}}},lS=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:s}=t,n=await async function(r,o){const{placement:a,platform:l,elements:h}=r,c=await(l.isRTL==null?void 0:l.isRTL(h.floating)),u=Ps(a),d=sl(a),f=nl(a)==="x",p=["left","top"].includes(u)?-1:1,g=c&&f?-1:1,m=typeof o=="function"?o(r):o;let{mainAxis:_,crossAxis:b,alignmentAxis:y}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return d&&typeof y=="number"&&(b=d==="end"?-1*y:y),f?{x:b*g,y:_*p}:{x:_*p,y:b*g}}(t,e);return{x:i+n.x,y:s+n.y,data:n}}}};function hS(e){return e==="x"?"y":"x"}const cS=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:s,placement:n}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:_,y:b}=m;return{x:_,y:b}}},...l}=e,h={x:i,y:s},c=await Vm(t,l),u=nl(Ps(n)),d=hS(u);let f=h[u],p=h[d];if(r){const m=u==="y"?"bottom":"right";f=Wd(f+c[u==="y"?"top":"left"],f,f-c[m])}if(o){const m=d==="y"?"bottom":"right";p=Wd(p+c[d==="y"?"top":"left"],p,p-c[m])}const g=a.fn({...t,[u]:f,[d]:p});return{...g,data:{x:g.x-i,y:g.y-s}}}}};function Me(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function _i(e){return Me(e).getComputedStyle(e)}function Wm(e){return e instanceof Me(e).Node}function ls(e){return Wm(e)?(e.nodeName||"").toLowerCase():""}let wo;function jm(){if(wo)return wo;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(wo=e.brands.map(t=>t.brand+"/"+t.version).join(" "),wo):navigator.userAgent}function ei(e){return e instanceof Me(e).HTMLElement}function Qe(e){return e instanceof Me(e).Element}function jd(e){return typeof ShadowRoot>"u"?!1:e instanceof Me(e).ShadowRoot||e instanceof ShadowRoot}function rl(e){const{overflow:t,overflowX:i,overflowY:s,display:n}=_i(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+i)&&!["inline","contents"].includes(n)}function uS(e){return["table","td","th"].includes(ls(e))}function ac(e){const t=/firefox/i.test(jm()),i=_i(e),s=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||!!s&&s!=="none"||t&&i.willChange==="filter"||t&&!!i.filter&&i.filter!=="none"||["transform","perspective"].some(n=>i.willChange.includes(n))||["paint","layout","strict","content"].some(n=>{const r=i.contain;return r!=null&&r.includes(n)})}function lc(){return/^((?!chrome|android).)*safari/i.test(jm())}function jc(e){return["html","body","#document"].includes(ls(e))}const Xd=Math.min,hr=Math.max,Aa=Math.round;function Xm(e){const t=_i(e);let i=parseFloat(t.width),s=parseFloat(t.height);const n=ei(e),r=n?e.offsetWidth:i,o=n?e.offsetHeight:s,a=Aa(i)!==r||Aa(s)!==o;return a&&(i=r,s=o),{width:i,height:s,fallback:a}}function Ym(e){return Qe(e)?e:e.contextElement}const $m={x:1,y:1};function yn(e){const t=Ym(e);if(!ei(t))return $m;const i=t.getBoundingClientRect(),{width:s,height:n,fallback:r}=Xm(t);let o=(r?Aa(i.width):i.width)/s,a=(r?Aa(i.height):i.height)/n;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function Ls(e,t,i,s){var n,r;t===void 0&&(t=!1),i===void 0&&(i=!1);const o=e.getBoundingClientRect(),a=Ym(e);let l=$m;t&&(s?Qe(s)&&(l=yn(s)):l=yn(e));const h=a?Me(a):window,c=lc()&&i;let u=(o.left+(c&&((n=h.visualViewport)==null?void 0:n.offsetLeft)||0))/l.x,d=(o.top+(c&&((r=h.visualViewport)==null?void 0:r.offsetTop)||0))/l.y,f=o.width/l.x,p=o.height/l.y;if(a){const g=Me(a),m=s&&Qe(s)?Me(s):s;let _=g.frameElement;for(;_&&s&&m!==g;){const b=yn(_),y=_.getBoundingClientRect(),E=getComputedStyle(_);y.x+=(_.clientLeft+parseFloat(E.paddingLeft))*b.x,y.y+=(_.clientTop+parseFloat(E.paddingTop))*b.y,u*=b.x,d*=b.y,f*=b.x,p*=b.y,u+=y.x,d+=y.y,_=Me(_).frameElement}}return Sa({width:f,height:p,x:u,y:d})}function es(e){return((Wm(e)?e.ownerDocument:e.document)||window.document).documentElement}function ol(e){return Qe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Km(e){return Ls(es(e)).left+ol(e).scrollLeft}function Cr(e){if(ls(e)==="html")return e;const t=e.assignedSlot||e.parentNode||jd(e)&&e.host||es(e);return jd(t)?t.host:t}function qm(e){const t=Cr(e);return jc(t)?t.ownerDocument.body:ei(t)&&rl(t)?t:qm(t)}function cr(e,t){var i;t===void 0&&(t=[]);const s=qm(e),n=s===((i=e.ownerDocument)==null?void 0:i.body),r=Me(s);return n?t.concat(r,r.visualViewport||[],rl(s)?s:[]):t.concat(s,cr(s))}function Yd(e,t,i){let s;if(t==="viewport")s=function(o,a){const l=Me(o),h=es(o),c=l.visualViewport;let u=h.clientWidth,d=h.clientHeight,f=0,p=0;if(c){u=c.width,d=c.height;const g=lc();(!g||g&&a==="fixed")&&(f=c.offsetLeft,p=c.offsetTop)}return{width:u,height:d,x:f,y:p}}(e,i);else if(t==="document")s=function(o){const a=es(o),l=ol(o),h=o.ownerDocument.body,c=hr(a.scrollWidth,a.clientWidth,h.scrollWidth,h.clientWidth),u=hr(a.scrollHeight,a.clientHeight,h.scrollHeight,h.clientHeight);let d=-l.scrollLeft+Km(o);const f=-l.scrollTop;return _i(h).direction==="rtl"&&(d+=hr(a.clientWidth,h.clientWidth)-c),{width:c,height:u,x:d,y:f}}(es(e));else if(Qe(t))s=function(o,a){const l=Ls(o,!0,a==="fixed"),h=l.top+o.clientTop,c=l.left+o.clientLeft,u=ei(o)?yn(o):{x:1,y:1};return{width:o.clientWidth*u.x,height:o.clientHeight*u.y,x:c*u.x,y:h*u.y}}(t,i);else{const o={...t};if(lc()){var n,r;const a=Me(e);o.x-=((n=a.visualViewport)==null?void 0:n.offsetLeft)||0,o.y-=((r=a.visualViewport)==null?void 0:r.offsetTop)||0}s=o}return Sa(s)}function $d(e,t){return ei(e)&&_i(e).position!=="fixed"?t?t(e):e.offsetParent:null}function Kd(e,t){const i=Me(e);if(!ei(e))return i;let s=$d(e,t);for(;s&&uS(s)&&_i(s).position==="static";)s=$d(s,t);return s&&(ls(s)==="html"||ls(s)==="body"&&_i(s).position==="static"&&!ac(s))?i:s||function(n){let r=Cr(n);for(;ei(r)&&!jc(r);){if(ac(r))return r;r=Cr(r)}return null}(e)||i}function dS(e,t,i){const s=ei(t),n=es(t),r=Ls(e,!0,i==="fixed",t);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(s||!s&&i!=="fixed")if((ls(t)!=="body"||rl(n))&&(o=ol(t)),ei(t)){const l=Ls(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else n&&(a.x=Km(n));return{x:r.left+o.scrollLeft-a.x,y:r.top+o.scrollTop-a.y,width:r.width,height:r.height}}const fS={getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:s,strategy:n}=e;const r=i==="clippingAncestors"?function(h,c){const u=c.get(h);if(u)return u;let d=cr(h).filter(m=>Qe(m)&&ls(m)!=="body"),f=null;const p=_i(h).position==="fixed";let g=p?Cr(h):h;for(;Qe(g)&&!jc(g);){const m=_i(g),_=ac(g);m.position==="fixed"&&(f=null),(p?_||f:_||m.position!=="static"||!f||!["absolute","fixed"].includes(f.position))?f=m:d=d.filter(b=>b!==g),g=Cr(g)}return c.set(h,d),d}(t,this._c):[].concat(i),o=[...r,s],a=o[0],l=o.reduce((h,c)=>{const u=Yd(t,c,n);return h.top=hr(u.top,h.top),h.right=Xd(u.right,h.right),h.bottom=Xd(u.bottom,h.bottom),h.left=hr(u.left,h.left),h},Yd(t,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:i,strategy:s}=e;const n=ei(i),r=es(i);if(i===r)return t;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((n||!n&&s!=="fixed")&&((ls(i)!=="body"||rl(r))&&(o=ol(i)),ei(i))){const h=Ls(i);a=yn(i),l.x=h.x+i.clientLeft,l.y=h.y+i.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+l.x,y:t.y*a.y-o.scrollTop*a.y+l.y}},isElement:Qe,getDimensions:function(e){return Xm(e)},getOffsetParent:Kd,getDocumentElement:es,getScale:yn,async getElementRects(e){let{reference:t,floating:i,strategy:s}=e;const n=this.getOffsetParent||Kd,r=this.getDimensions;return{reference:dS(t,await n(i),s),floating:{x:0,y:0,...await r(i)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>_i(e).direction==="rtl"};function pS(e,t,i,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:o=!0,animationFrame:a=!1}=s,l=n&&!a,h=l||r?[...Qe(e)?cr(e):e.contextElement?cr(e.contextElement):[],...cr(t)]:[];h.forEach(f=>{l&&f.addEventListener("scroll",i,{passive:!0}),r&&f.addEventListener("resize",i)});let c,u=null;o&&(u=new ResizeObserver(()=>{i()}),Qe(e)&&!a&&u.observe(e),Qe(e)||!e.contextElement||a||u.observe(e.contextElement),u.observe(t));let d=a?Ls(e):null;return a&&function f(){const p=Ls(e);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||i(),d=p,c=requestAnimationFrame(f)}(),i(),()=>{var f;h.forEach(p=>{l&&p.removeEventListener("scroll",i),r&&p.removeEventListener("resize",i)}),(f=u)==null||f.disconnect(),u=null,a&&cancelAnimationFrame(c)}}const gS=(e,t,i)=>{const s=new Map,n={platform:fS,...i},r={...n.platform,_c:s};return Qw(e,t,{...n,platform:r})};function mS(e){let t,i;const s={autoUpdate:!0};let n=e;const r=c=>({...s,...e||{},...c||{}}),o=c=>{t&&i&&(n=r(c),gS(t,i,n).then(u=>{Object.assign(i.style,{position:u.strategy,left:`${u.x}px`,top:`${u.y}px`}),n!=null&&n.onComputed&&n.onComputed(u)}))},a=c=>{if("subscribe"in c)return h(c),{};t=c,o()},l=(c,u)=>{let d;i=c,n=r(u),setTimeout(()=>o(u),0),o(u);const f=()=>{d&&(d(),d=void 0)},p=({autoUpdate:g}=n||{})=>{if(f(),g!==!1)return pS(t,i,()=>o(n),g===!0?{}:g)};return d=p(),{update(g){o(g),d=p(g)},destroy(){f()}}},h=c=>{const u=c.subscribe(d=>{t===void 0?(t=d,o()):(Object.assign(t,d),o())});Pn(u)};return[a,l,o]}function _S({loadOptions:e,filterText:t,items:i,multiple:s,value:n,itemId:r,groupBy:o,filterSelectedItems:a,itemFilter:l,convertStringItemsToObjects:h,filterGroupedItems:c,label:u}){if(i&&e)return i;if(!i)return[];i&&i.length>0&&typeof i[0]!="object"&&(i=h(i));let d=i.filter(f=>{let p=l(f[u],t,f);return p&&s&&(n!=null&&n.length)&&(p=!n.some(g=>a?g[r]===f[r]:!1)),p});return o&&(d=c(d)),d}async function bS({dispatch:e,loadOptions:t,convertStringItemsToObjects:i,filterText:s}){let n=await t(s).catch(r=>{console.warn("svelte-select loadOptions error :>> ",r),e("error",{type:"loadOptions",details:r})});if(n&&!n.cancelled)return n?(n&&n.length>0&&typeof n[0]!="object"&&(n=i(n)),e("loaded",{items:n})):n=[],{filteredItems:n,loading:!1,focused:!0,listOpen:!0}}function yS(e){let t,i;return{c(){t=vn("svg"),i=vn("path"),G(i,"fill","currentColor"),G(i,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),G(t,"width","100%"),G(t,"height","100%"),G(t,"viewBox","0 0 20 20"),G(t,"focusable","false"),G(t,"aria-hidden","true"),G(t,"class","svelte-qbd276")},m(s,n){at(s,t,n),q(t,i)},p:it,i:it,o:it,d(s){s&&ot(t)}}}class xS extends $t{constructor(t){super(),Yt(this,t,null,yS,Vt,{})}}function vS(e){let t,i;return{c(){t=vn("svg"),i=vn("path"),G(i,"fill","currentColor"),G(i,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),G(t,"width","100%"),G(t,"height","100%"),G(t,"viewBox","-2 -2 50 50"),G(t,"focusable","false"),G(t,"aria-hidden","true"),G(t,"role","presentation"),G(t,"class","svelte-whdbu1")},m(s,n){at(s,t,n),q(t,i)},p:it,i:it,o:it,d(s){s&&ot(t)}}}class Ca extends $t{constructor(t){super(),Yt(this,t,null,vS,Vt,{})}}function ES(e){let t,i;return{c(){t=vn("svg"),i=vn("circle"),G(i,"class","circle_path svelte-1p3nqvd"),G(i,"cx","50"),G(i,"cy","50"),G(i,"r","20"),G(i,"fill","none"),G(i,"stroke","currentColor"),G(i,"stroke-width","5"),G(i,"stroke-miterlimit","10"),G(t,"class","loading svelte-1p3nqvd"),G(t,"viewBox","25 25 50 50")},m(s,n){at(s,t,n),q(t,i)},p:it,i:it,o:it,d(s){s&&ot(t)}}}class wS extends $t{constructor(t){super(),Yt(this,t,null,ES,Vt,{})}}const SS=e=>({value:e[0]&8}),qd=e=>({value:e[3]}),TS=e=>({value:e[0]&8}),Zd=e=>({value:e[3]}),AS=e=>({listOpen:e[0]&64}),Jd=e=>({listOpen:e[6]}),CS=e=>({}),Qd=e=>({}),MS=e=>({}),tf=e=>({}),IS=e=>({selection:e[0]&8}),ef=e=>({selection:e[3]});function sf(e,t,i){const s=e.slice();return s[125]=t[i],s[127]=i,s}const PS=e=>({}),nf=e=>({}),RS=e=>({selection:e[0]&8}),rf=e=>({selection:e[125],index:e[127]}),DS=e=>({}),of=e=>({}),OS=e=>({}),af=e=>({}),kS=e=>({}),lf=e=>({});function hf(e,t,i){const s=e.slice();return s[125]=t[i],s[127]=i,s}const FS=e=>({item:e[0]&16777216}),cf=e=>({item:e[125],index:e[127]}),BS=e=>({filteredItems:e[0]&16777216}),uf=e=>({filteredItems:e[24]}),LS=e=>({}),df=e=>({});function ff(e){let t,i,s,n,r,o,a,l,h=e[50]["list-prepend"]&&pf(e);const c=[GS,US,NS],u=[];function d(p,g){return p[50].list?0:p[24].length>0?1:p[19]?-1:2}~(s=d(e))&&(n=u[s]=c[s](e));let f=e[50]["list-append"]&&mf(e);return{c(){t=Z("div"),h&&h.c(),i=yt(),n&&n.c(),r=yt(),f&&f.c(),G(t,"class","svelte-select-list svelte-apvs86"),wt(t,"prefloat",e[28])},m(p,g){at(p,t,g),h&&h.m(t,null),q(t,i),~s&&u[s].m(t,null),q(t,r),f&&f.m(t,null),e[90](t),o=!0,a||(l=[ra(e[49].call(null,t)),Rt(t,"scroll",e[41]),Rt(t,"pointerup",En(ss(e[85])))],a=!0)},p(p,g){p[50]["list-prepend"]?h?(h.p(p,g),g[1]&524288&&X(h,1)):(h=pf(p),h.c(),X(h,1),h.m(t,i)):h&&(ie(),tt(h,1,1,()=>{h=null}),se());let m=s;s=d(p),s===m?~s&&u[s].p(p,g):(n&&(ie(),tt(u[m],1,1,()=>{u[m]=null}),se()),~s?(n=u[s],n?n.p(p,g):(n=u[s]=c[s](p),n.c()),X(n,1),n.m(t,r)):n=null),p[50]["list-append"]?f?(f.p(p,g),g[1]&524288&&X(f,1)):(f=mf(p),f.c(),X(f,1),f.m(t,null)):f&&(ie(),tt(f,1,1,()=>{f=null}),se()),(!o||g[0]&268435456)&&wt(t,"prefloat",p[28])},i(p){o||(X(h),X(n),X(f),o=!0)},o(p){tt(h),tt(n),tt(f),o=!1},d(p){p&&ot(t),h&&h.d(),~s&&u[s].d(),f&&f.d(),e[90](null),a=!1,vi(l)}}}function pf(e){let t;const i=e[82]["list-prepend"],s=xe(i,e,e[81],df);return{c(){s&&s.c()},m(n,r){s&&s.m(n,r),t=!0},p(n,r){s&&s.p&&(!t||r[2]&524288)&&Ee(s,i,n,n[81],t?ve(i,n[81],r,LS):we(n[81]),df)},i(n){t||(X(s,n),t=!0)},o(n){tt(s,n),t=!1},d(n){s&&s.d(n)}}}function NS(e){let t;const i=e[82].empty,s=xe(i,e,e[81],lf),n=s||HS();return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),t=!0},p(r,o){s&&s.p&&(!t||o[2]&524288)&&Ee(s,i,r,r[81],t?ve(i,r[81],o,kS):we(r[81]),lf)},i(r){t||(X(n,r),t=!0)},o(r){tt(n,r),t=!1},d(r){n&&n.d(r)}}}function US(e){let t,i,s=e[24],n=[];for(let o=0;o<s.length;o+=1)n[o]=gf(hf(e,s,o));const r=o=>tt(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=In()},m(o,a){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(o,a);at(o,t,a),i=!0},p(o,a){if(a[0]&1627402376|a[1]&28672|a[2]&524288){s=o[24];let l;for(l=0;l<s.length;l+=1){const h=hf(o,s,l);n[l]?(n[l].p(h,a),X(n[l],1)):(n[l]=gf(h),n[l].c(),X(n[l],1),n[l].m(t.parentNode,t))}for(ie(),l=s.length;l<n.length;l+=1)r(l);se()}},i(o){if(!i){for(let a=0;a<s.length;a+=1)X(n[a]);i=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)tt(n[a]);i=!1},d(o){La(n,o),o&&ot(t)}}}function GS(e){let t;const i=e[82].list,s=xe(i,e,e[81],uf);return{c(){s&&s.c()},m(n,r){s&&s.m(n,r),t=!0},p(n,r){s&&s.p&&(!t||r[0]&16777216|r[2]&524288)&&Ee(s,i,n,n[81],t?ve(i,n[81],r,BS):we(n[81]),uf)},i(n){t||(X(s,n),t=!0)},o(n){tt(s,n),t=!1},d(n){s&&s.d(n)}}}function HS(e){let t;return{c(){t=Z("div"),t.textContent="No options",G(t,"class","empty svelte-apvs86")},m(i,s){at(i,t,s)},p:it,d(i){i&&ot(t)}}}function zS(e){var s;let t=((s=e[125])==null?void 0:s[e[12]])+"",i;return{c(){i=ge(t)},m(n,r){at(n,i,r)},p(n,r){var o;r[0]&16781312&&t!==(t=((o=n[125])==null?void 0:o[n[12]])+"")&&Ie(i,t)},d(n){n&&ot(i)}}}function gf(e){let t,i,s,n,r,o,a,l;const h=e[82].item,c=xe(h,e,e[81],cf),u=c||zS(e);function d(){return e[87](e[127])}function f(){return e[88](e[127])}function p(){return e[89](e[125],e[127])}return{c(){var g;t=Z("div"),i=Z("div"),u&&u.c(),r=yt(),G(i,"class","item svelte-apvs86"),wt(i,"list-group-title",e[125].groupHeader),wt(i,"active",e[45](e[125],e[3],e[13])),wt(i,"first",tT(e[127])),wt(i,"hover",e[7]===e[127]),wt(i,"group-item",e[125].groupItem),wt(i,"not-selectable",((g=e[125])==null?void 0:g.selectable)===!1),G(t,"class","list-item svelte-apvs86"),G(t,"tabindex","-1")},m(g,m){at(g,t,m),q(t,i),u&&u.m(i,null),q(t,r),o=!0,a||(l=[ra(s=e[46].call(null,i,{scroll:e[45](e[125],e[3],e[13]),listDom:e[30]})),ra(n=e[47].call(null,i,{scroll:e[29]===e[127],listDom:e[30]})),Rt(t,"mouseover",d),Rt(t,"focus",f),Rt(t,"click",En(p)),Rt(t,"keydown",En(ss(e[86])))],a=!0)},p(g,m){var _;e=g,c?c.p&&(!o||m[0]&16777216|m[2]&524288)&&Ee(c,h,e,e[81],o?ve(h,e[81],m,FS):we(e[81]),cf):u&&u.p&&(!o||m[0]&16781312)&&u.p(e,o?m:[-1,-1,-1,-1,-1]),s&&mr(s.update)&&m[0]&1090527240&&s.update.call(null,{scroll:e[45](e[125],e[3],e[13]),listDom:e[30]}),n&&mr(n.update)&&m[0]&1610612736&&n.update.call(null,{scroll:e[29]===e[127],listDom:e[30]}),(!o||m[0]&16777216)&&wt(i,"list-group-title",e[125].groupHeader),(!o||m[0]&16785416|m[1]&16384)&&wt(i,"active",e[45](e[125],e[3],e[13])),(!o||m[0]&128)&&wt(i,"hover",e[7]===e[127]),(!o||m[0]&16777216)&&wt(i,"group-item",e[125].groupItem),(!o||m[0]&16777216)&&wt(i,"not-selectable",((_=e[125])==null?void 0:_.selectable)===!1)},i(g){o||(X(u,g),o=!0)},o(g){tt(u,g),o=!1},d(g){g&&ot(t),u&&u.d(g),a=!1,vi(l)}}}function mf(e){let t;const i=e[82]["list-append"],s=xe(i,e,e[81],af);return{c(){s&&s.c()},m(n,r){s&&s.m(n,r),t=!0},p(n,r){s&&s.p&&(!t||r[2]&524288)&&Ee(s,i,n,n[81],t?ve(i,n[81],r,OS):we(n[81]),af)},i(n){t||(X(s,n),t=!0)},o(n){tt(s,n),t=!1},d(n){s&&s.d(n)}}}function _f(e){let t,i,s,n,r;return{c(){t=Z("span"),i=ge(e[32]),s=yt(),n=Z("span"),r=ge(e[31]),G(t,"id","aria-selection"),G(t,"class","svelte-apvs86"),G(n,"id","aria-context"),G(n,"class","svelte-apvs86")},m(o,a){at(o,t,a),q(t,i),at(o,s,a),at(o,n,a),q(n,r)},p(o,a){a[1]&2&&Ie(i,o[32]),a[1]&1&&Ie(r,o[31])},d(o){o&&ot(t),o&&ot(s),o&&ot(n)}}}function bf(e){let t,i,s,n;const r=[WS,VS],o=[];function a(l,h){return l[9]?0:1}return t=a(e),i=o[t]=r[t](e),{c(){i.c(),s=In()},m(l,h){o[t].m(l,h),at(l,s,h),n=!0},p(l,h){let c=t;t=a(l),t===c?o[t].p(l,h):(ie(),tt(o[c],1,1,()=>{o[c]=null}),se(),i=o[t],i?i.p(l,h):(i=o[t]=r[t](l),i.c()),X(i,1),i.m(s.parentNode,s))},i(l){n||(X(i),n=!0)},o(l){tt(i),n=!1},d(l){o[t].d(l),l&&ot(s)}}}function VS(e){let t,i;const s=e[82].selection,n=xe(s,e,e[81],ef),r=n||jS(e);return{c(){t=Z("div"),r&&r.c(),G(t,"class","selected-item svelte-apvs86"),wt(t,"hide-selected-item",e[35])},m(o,a){at(o,t,a),r&&r.m(t,null),i=!0},p(o,a){n?n.p&&(!i||a[0]&8|a[2]&524288)&&Ee(n,s,o,o[81],i?ve(s,o[81],a,IS):we(o[81]),ef):r&&r.p&&(!i||a[0]&4104)&&r.p(o,i?a:[-1,-1,-1,-1,-1]),(!i||a[1]&16)&&wt(t,"hide-selected-item",o[35])},i(o){i||(X(r,o),i=!0)},o(o){tt(r,o),i=!1},d(o){o&&ot(t),r&&r.d(o)}}}function WS(e){let t,i,s=e[3],n=[];for(let o=0;o<s.length;o+=1)n[o]=xf(sf(e,s,o));const r=o=>tt(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=In()},m(o,a){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(o,a);at(o,t,a),i=!0},p(o,a){if(a[0]&67116040|a[1]&32|a[2]&524288){s=o[3];let l;for(l=0;l<s.length;l+=1){const h=sf(o,s,l);n[l]?(n[l].p(h,a),X(n[l],1)):(n[l]=xf(h),n[l].c(),X(n[l],1),n[l].m(t.parentNode,t))}for(ie(),l=s.length;l<n.length;l+=1)r(l);se()}},i(o){if(!i){for(let a=0;a<s.length;a+=1)X(n[a]);i=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)tt(n[a]);i=!1},d(o){La(n,o),o&&ot(t)}}}function jS(e){let t=e[3][e[12]]+"",i;return{c(){i=ge(t)},m(s,n){at(s,i,n)},p(s,n){n[0]&4104&&t!==(t=s[3][s[12]]+"")&&Ie(i,t)},d(s){s&&ot(i)}}}function XS(e){let t=e[125][e[12]]+"",i;return{c(){i=ge(t)},m(s,n){at(s,i,n)},p(s,n){n[0]&4104&&t!==(t=s[125][s[12]]+"")&&Ie(i,t)},d(s){s&&ot(i)}}}function yf(e){let t,i,s,n;const r=e[82]["multi-clear-icon"],o=xe(r,e,e[81],nf),a=o||YS();function l(){return e[91](e[127])}return{c(){t=Z("div"),a&&a.c(),G(t,"class","multi-item-clear svelte-apvs86")},m(h,c){at(h,t,c),a&&a.m(t,null),i=!0,s||(n=Rt(t,"pointerup",En(ss(l))),s=!0)},p(h,c){e=h,o&&o.p&&(!i||c[2]&524288)&&Ee(o,r,e,e[81],i?ve(r,e[81],c,PS):we(e[81]),nf)},i(h){i||(X(a,h),i=!0)},o(h){tt(a,h),i=!1},d(h){h&&ot(t),a&&a.d(h),s=!1,n()}}}function YS(e){let t,i;return t=new Ca({}),{c(){Wt(t.$$.fragment)},m(s,n){Ut(t,s,n),i=!0},i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){tt(t.$$.fragment,s),i=!1},d(s){Gt(t,s)}}}function xf(e){let t,i,s,n,r,o,a;const l=e[82].selection,h=xe(l,e,e[81],rf),c=h||XS(e);let u=!e[11]&&!e[10]&&Ca&&yf(e);function d(){return e[92](e[127])}return{c(){t=Z("div"),i=Z("span"),c&&c.c(),s=yt(),u&&u.c(),n=yt(),G(i,"class","multi-item-text svelte-apvs86"),G(t,"class","multi-item svelte-apvs86"),wt(t,"active",e[26]===e[127]),wt(t,"disabled",e[11])},m(f,p){at(f,t,p),q(t,i),c&&c.m(i,null),q(t,s),u&&u.m(t,null),q(t,n),r=!0,o||(a=[Rt(t,"click",ss(d)),Rt(t,"keydown",En(ss(e[84])))],o=!0)},p(f,p){e=f,h?h.p&&(!r||p[0]&8|p[2]&524288)&&Ee(h,l,e,e[81],r?ve(l,e[81],p,RS):we(e[81]),rf):c&&c.p&&(!r||p[0]&4104)&&c.p(e,r?p:[-1,-1,-1,-1,-1]),!e[11]&&!e[10]&&Ca?u?(u.p(e,p),p[0]&3072&&X(u,1)):(u=yf(e),u.c(),X(u,1),u.m(t,n)):u&&(ie(),tt(u,1,1,()=>{u=null}),se()),(!r||p[0]&67108864)&&wt(t,"active",e[26]===e[127]),(!r||p[0]&2048)&&wt(t,"disabled",e[11])},i(f){r||(X(c,f),X(u),r=!0)},o(f){tt(c,f),tt(u),r=!1},d(f){f&&ot(t),c&&c.d(f),u&&u.d(),o=!1,vi(a)}}}function vf(e){let t,i;const s=e[82]["loading-icon"],n=xe(s,e,e[81],tf),r=n||$S();return{c(){t=Z("div"),r&&r.c(),G(t,"class","icon loading svelte-apvs86"),G(t,"aria-hidden","true")},m(o,a){at(o,t,a),r&&r.m(t,null),i=!0},p(o,a){n&&n.p&&(!i||a[2]&524288)&&Ee(n,s,o,o[81],i?ve(s,o[81],a,MS):we(o[81]),tf)},i(o){i||(X(r,o),i=!0)},o(o){tt(r,o),i=!1},d(o){o&&ot(t),r&&r.d(o)}}}function $S(e){let t,i;return t=new wS({}),{c(){Wt(t.$$.fragment)},m(s,n){Ut(t,s,n),i=!0},i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){tt(t.$$.fragment,s),i=!1},d(s){Gt(t,s)}}}function Ef(e){let t,i,s,n;const r=e[82]["clear-icon"],o=xe(r,e,e[81],Qd),a=o||KS();return{c(){t=Z("button"),a&&a.c(),G(t,"class","icon clear-select svelte-apvs86")},m(l,h){at(l,t,h),a&&a.m(t,null),i=!0,s||(n=Rt(t,"pointerup",En(ss(e[22]))),s=!0)},p(l,h){o&&o.p&&(!i||h[2]&524288)&&Ee(o,r,l,l[81],i?ve(r,l[81],h,CS):we(l[81]),Qd)},i(l){i||(X(a,l),i=!0)},o(l){tt(a,l),i=!1},d(l){l&&ot(t),a&&a.d(l),s=!1,n()}}}function KS(e){let t,i;return t=new Ca({}),{c(){Wt(t.$$.fragment)},m(s,n){Ut(t,s,n),i=!0},i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){tt(t.$$.fragment,s),i=!1},d(s){Gt(t,s)}}}function wf(e){let t,i;const s=e[82]["chevron-icon"],n=xe(s,e,e[81],Jd),r=n||qS();return{c(){t=Z("div"),r&&r.c(),G(t,"class","icon chevron svelte-apvs86"),G(t,"aria-hidden","true")},m(o,a){at(o,t,a),r&&r.m(t,null),i=!0},p(o,a){n&&n.p&&(!i||a[0]&64|a[2]&524288)&&Ee(n,s,o,o[81],i?ve(s,o[81],a,AS):we(o[81]),Jd)},i(o){i||(X(r,o),i=!0)},o(o){tt(r,o),i=!1},d(o){o&&ot(t),r&&r.d(o)}}}function qS(e){let t,i;return t=new xS({}),{c(){Wt(t.$$.fragment)},m(s,n){Ut(t,s,n),i=!0},i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){tt(t.$$.fragment,s),i=!1},d(s){Gt(t,s)}}}function ZS(e){let t,i;return{c(){t=Z("input"),G(t,"name",e[8]),G(t,"type","hidden"),t.value=i=e[3]?JSON.stringify(e[3]):null,G(t,"class","svelte-apvs86")},m(s,n){at(s,t,n)},p(s,n){n[0]&256&&G(t,"name",s[8]),n[0]&8&&i!==(i=s[3]?JSON.stringify(s[3]):null)&&(t.value=i)},d(s){s&&ot(t)}}}function Sf(e){let t;const i=e[82].required,s=xe(i,e,e[81],qd),n=s||JS();return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),t=!0},p(r,o){s&&s.p&&(!t||o[0]&8|o[2]&524288)&&Ee(s,i,r,r[81],t?ve(i,r[81],o,SS):we(r[81]),qd)},i(r){t||(X(n,r),t=!0)},o(r){tt(n,r),t=!1},d(r){n&&n.d(r)}}}function JS(e){let t;return{c(){t=Z("select"),G(t,"class","required svelte-apvs86"),t.required=!0,G(t,"tabindex","-1"),G(t,"aria-hidden","true")},m(i,s){at(i,t,s)},p:it,d(i){i&&ot(t)}}}function QS(e){let t,i,s,n,r,o,a,l,h,c,u,d,f,p,g,m,_,b,y,E,x=e[6]&&ff(e),T=e[2]&&_f(e);const A=e[82].prepend,C=xe(A,e,e[81],of);let R=e[25]&&bf(e),I=[{readOnly:c=!e[17]},e[27],{placeholder:e[33]},{style:e[18]},{disabled:e[11]}],S={};for(let k=0;k<I.length;k+=1)S=Qp(S,I[k]);let F=e[5]&&vf(e),O=e[34]&&Ef(e),v=e[20]&&wf(e);const w=e[82]["input-hidden"],B=xe(w,e,e[81],Zd),P=B||ZS(e);let N=e[16]&&(!e[3]||e[3].length===0)&&Sf(e);return{c(){t=Z("div"),x&&x.c(),i=yt(),s=Z("span"),T&&T.c(),n=yt(),r=Z("div"),C&&C.c(),o=yt(),a=Z("div"),R&&R.c(),l=yt(),h=Z("input"),u=yt(),d=Z("div"),F&&F.c(),f=yt(),O&&O.c(),p=yt(),v&&v.c(),g=yt(),P&&P.c(),m=yt(),N&&N.c(),G(s,"aria-live","polite"),G(s,"aria-atomic","false"),G(s,"aria-relevant","additions text"),G(s,"class","a11y-text svelte-apvs86"),G(r,"class","prepend svelte-apvs86"),_u(h,S),wt(h,"svelte-apvs86",!0),G(a,"class","value-container svelte-apvs86"),G(d,"class","indicators svelte-apvs86"),G(t,"class",_="svelte-select "+e[21]+" svelte-apvs86"),G(t,"style",e[14]),wt(t,"multi",e[9]),wt(t,"disabled",e[11]),wt(t,"focused",e[2]),wt(t,"list-open",e[6]),wt(t,"show-chevron",e[20]),wt(t,"error",e[15])},m(k,D){at(k,t,D),x&&x.m(t,null),q(t,i),q(t,s),T&&T.m(s,null),q(t,n),q(t,r),C&&C.m(r,null),q(t,o),q(t,a),R&&R.m(a,null),q(a,l),q(a,h),h.autofocus&&h.focus(),e[93](h),bu(h,e[4]),q(t,u),q(t,d),F&&F.m(d,null),q(d,f),O&&O.m(d,null),q(d,p),v&&v.m(d,null),q(t,g),P&&P.m(t,null),q(t,m),N&&N.m(t,null),e[95](t),b=!0,y||(E=[Rt(window,"click",e[42]),Rt(window,"keydown",e[37]),Rt(h,"keydown",e[37]),Rt(h,"blur",e[39]),Rt(h,"focus",e[38]),Rt(h,"input",e[94]),Rt(t,"pointerup",ss(e[40])),Rt(t,"mousedown",ss(e[83])),ra(e[48].call(null,t))],y=!0)},p(k,D){k[6]?x?(x.p(k,D),D[0]&64&&X(x,1)):(x=ff(k),x.c(),X(x,1),x.m(t,i)):x&&(ie(),tt(x,1,1,()=>{x=null}),se()),k[2]?T?T.p(k,D):(T=_f(k),T.c(),T.m(s,null)):T&&(T.d(1),T=null),C&&C.p&&(!b||D[2]&524288)&&Ee(C,A,k,k[81],b?ve(A,k[81],D,DS):we(k[81]),of),k[25]?R?(R.p(k,D),D[0]&33554432&&X(R,1)):(R=bf(k),R.c(),X(R,1),R.m(a,l)):R&&(ie(),tt(R,1,1,()=>{R=null}),se()),_u(h,S=Z_(I,[(!b||D[0]&131072&&c!==(c=!k[17]))&&{readOnly:c},D[0]&134217728&&k[27],(!b||D[1]&4)&&{placeholder:k[33]},(!b||D[0]&262144)&&{style:k[18]},(!b||D[0]&2048)&&{disabled:k[11]}])),D[0]&16&&h.value!==k[4]&&bu(h,k[4]),wt(h,"svelte-apvs86",!0),k[5]?F?(F.p(k,D),D[0]&32&&X(F,1)):(F=vf(k),F.c(),X(F,1),F.m(d,f)):F&&(ie(),tt(F,1,1,()=>{F=null}),se()),k[34]?O?(O.p(k,D),D[1]&8&&X(O,1)):(O=Ef(k),O.c(),X(O,1),O.m(d,p)):O&&(ie(),tt(O,1,1,()=>{O=null}),se()),k[20]?v?(v.p(k,D),D[0]&1048576&&X(v,1)):(v=wf(k),v.c(),X(v,1),v.m(d,null)):v&&(ie(),tt(v,1,1,()=>{v=null}),se()),B?B.p&&(!b||D[0]&8|D[2]&524288)&&Ee(B,w,k,k[81],b?ve(w,k[81],D,TS):we(k[81]),Zd):P&&P.p&&(!b||D[0]&264)&&P.p(k,b?D:[-1,-1,-1,-1,-1]),k[16]&&(!k[3]||k[3].length===0)?N?(N.p(k,D),D[0]&65544&&X(N,1)):(N=Sf(k),N.c(),X(N,1),N.m(t,null)):N&&(ie(),tt(N,1,1,()=>{N=null}),se()),(!b||D[0]&2097152&&_!==(_="svelte-select "+k[21]+" svelte-apvs86"))&&G(t,"class",_),(!b||D[0]&16384)&&G(t,"style",k[14]),(!b||D[0]&2097664)&&wt(t,"multi",k[9]),(!b||D[0]&2099200)&&wt(t,"disabled",k[11]),(!b||D[0]&2097156)&&wt(t,"focused",k[2]),(!b||D[0]&2097216)&&wt(t,"list-open",k[6]),(!b||D[0]&3145728)&&wt(t,"show-chevron",k[20]),(!b||D[0]&2129920)&&wt(t,"error",k[15])},i(k){b||(X(x),X(C,k),X(R),X(F),X(O),X(v),X(P,k),X(N),b=!0)},o(k){tt(x),tt(C,k),tt(R),tt(F),tt(O),tt(v),tt(P,k),tt(N),b=!1},d(k){k&&ot(t),x&&x.d(),T&&T.d(),C&&C.d(k),R&&R.d(),e[93](null),F&&F.d(),O&&O.d(),v&&v.d(),P&&P.d(k),N&&N.d(),e[95](null),y=!1,vi(E)}}}function Tf(e){return e.map((t,i)=>({index:i,value:t,label:`${t}`}))}function tT(e){return e===0}function eT(e){return e.groupHeader&&e.selectable||e.selectable||!e.hasOwnProperty("selectable")}function iT(e,t,i){let s,n,r,o,a,l,h,c,u,{$$slots:d={},$$scope:f}=t;const p=V_(d),g=ig();let{justValue:m=null}=t,{filter:_=_S}=t,{getItems:b=bS}=t,{id:y=null}=t,{name:E=null}=t,{container:x=void 0}=t,{input:T=void 0}=t,{multiple:A=!1}=t,{multiFullItemClearable:C=!1}=t,{disabled:R=!1}=t,{focused:I=!1}=t,{value:S=null}=t,{filterText:F=""}=t,{placeholder:O="Please select"}=t,{placeholderAlwaysShow:v=!1}=t,{items:w=null}=t,{label:B="label"}=t,{itemFilter:P=(M,rt,Lt)=>`${M}`.toLowerCase().includes(rt.toLowerCase())}=t,{groupBy:N=void 0}=t,{groupFilter:k=M=>M}=t,{groupHeaderSelectable:D=!1}=t,{itemId:z="value"}=t,{loadOptions:j=void 0}=t,{containerStyles:J=""}=t,{hasError:H=!1}=t,{filterSelectedItems:L=!0}=t,{required:U=!1}=t,{closeListOnChange:V=!0}=t,{createGroupHeaderItem:$=(M,rt)=>({value:M,[B]:M})}=t;const nt=()=>h;let{searchable:K=!0}=t,{inputStyles:ct=""}=t,{clearable:bt=!0}=t,{loading:Et=!1}=t,{listOpen:mt=!1}=t,pe,{debounce:Le=(M,rt=1)=>{clearTimeout(pe),pe=setTimeout(M,rt)}}=t,{debounceWait:Wi=300}=t,{hideEmptyState:wi=!1}=t,{inputAttributes:ds={}}=t,{listAutoWidth:kn=!0}=t,{showChevron:Fn=!1}=t,{listOffset:Ws=5}=t,{hoverItemIndex:Mt=0}=t,{floatingConfig:Si={}}=t,{class:Xr=""}=t,Bt,fs,dl,fl;function Q0(){if(typeof S=="string"){let M=(w||[]).find(rt=>rt[z]===S);i(3,S=M||{[z]:S,label:S})}else A&&Array.isArray(S)&&S.length>0&&i(3,S=S.map(M=>typeof M=="string"?{value:M,label:M}:M))}let js;function t_(){i(27,js=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},ds)),y&&i(27,js.id=y,js),K||i(27,js.readonly=!0,js)}function au(M){const rt=[],Lt={};M.forEach(Xs=>{const Ci=N(Xs);rt.includes(Ci)||(rt.push(Ci),Lt[Ci]=[],Ci&&Lt[Ci].push(Object.assign($(Ci,Xs),{id:Ci,groupHeader:!0,selectable:D}))),Lt[Ci].push(Object.assign({groupItem:!!Ci},Xs))});const Ai=[];return k(rt).forEach(Xs=>{Lt[Xs]&&Ai.push(...Lt[Xs])}),Ai}function e_(){if(A){JSON.stringify(S)!==JSON.stringify(fs)&&hu()&&g("input",S);return}(!fs||JSON.stringify(S[z])!==JSON.stringify(fs[z]))&&g("input",S)}function i_(){S&&(Array.isArray(S)?i(3,S=[...S]):i(3,S=[S]))}function s_(){S&&i(3,S=null)}function n_(){const M=h.findIndex(rt=>rt[z]===S[z]);lu(M,!0)}function r_(M){g("hoverItem",M)}function lu(M=0,rt){i(7,Mt=M<0?0:M),!rt&&N&&h[Mt]&&!h[Mt].selectable&&$r(1)}function o_(){!j&&F.length===0||(j?Le(async function(){i(5,Et=!0);let M=await b({dispatch:g,loadOptions:j,convertStringItemsToObjects:Tf,filterText:F});M?(i(5,Et=M.loading),i(6,mt=mt?M.listOpen:F.length>0),i(2,I=mt&&M.focused),i(51,w=N?au(M.filteredItems):M.filteredItems)):(i(5,Et=!1),i(2,I=!0),i(6,mt=!0))},Wi):(i(6,mt=!0),A&&i(26,Bt=void 0)))}function a_(M){mt&&g("filter",M)}X_(async()=>{i(77,fs=S),i(78,dl=F),i(79,fl=A)});function l_(){return A?S?S.map(M=>M[z]):null:S&&S[z]}function hu(){let M=!0;if(S){const rt=[],Lt=[];S.forEach(Ai=>{rt.includes(Ai[z])?M=!1:(rt.push(Ai[z]),Lt.push(Ai))}),M||i(3,S=Lt)}return M}function cu(M){let rt=M?M[z]:S[z];return w.find(Lt=>Lt[z]===rt)}function h_(M){!M||M.length===0||M.some(rt=>typeof rt!="object")||!S||(A?S.some(rt=>!rt||!rt[z]):!S[z])||(Array.isArray(S)?i(3,S=S.map(rt=>cu(rt)||rt)):i(3,S=cu()||S))}async function Yr(M){const rt=S[M];S.length===1?i(3,S=void 0):i(3,S=S.filter(Lt=>Lt!==rt)),g("clear",rt)}function c_(M){if(I)switch(M.stopPropagation(),M.key){case"Escape":M.preventDefault(),Ti();break;case"Enter":if(M.preventDefault(),mt){if(h.length===0)break;const rt=h[Mt];if(S&&!A&&S[z]===rt[z]){Ti();break}else yl(h[Mt])}break;case"ArrowDown":M.preventDefault(),mt?$r(1):(i(6,mt=!0),i(26,Bt=void 0));break;case"ArrowUp":M.preventDefault(),mt?$r(-1):(i(6,mt=!0),i(26,Bt=void 0));break;case"Tab":if(mt&&I){if(h.length===0||S&&S[z]===h[Mt][z])return Ti();M.preventDefault(),yl(h[Mt]),Ti()}break;case"Backspace":if(!A||F.length>0)return;if(A&&S&&S.length>0){if(Yr(Bt!==void 0?Bt:S.length-1),Bt===0||Bt===void 0)break;i(26,Bt=S.length>Bt?Bt-1:void 0)}break;case"ArrowLeft":if(!S||!A||F.length>0)return;Bt===void 0?i(26,Bt=S.length-1):S.length>Bt&&Bt!==0&&i(26,Bt-=1);break;case"ArrowRight":if(!S||!A||F.length>0||Bt===void 0)return;Bt===S.length-1?i(26,Bt=void 0):Bt<S.length-1&&i(26,Bt+=1);break}}function pl(M){I&&T===(document==null?void 0:document.activeElement)||(M&&g("focus",M),T.focus(),i(2,I=!0))}async function uu(M){bl||(mt||I)&&(g("blur",M),Ti(),i(2,I=!1),i(26,Bt=void 0),T.blur())}function u_(){R||i(6,mt=!mt)}function d_(){g("clear",S),i(3,S=void 0),Ti(),pl()}Fe(()=>{mt&&i(2,I=!0),I&&T&&T.focus()});function f_(M){if(M){i(4,F="");const rt=Object.assign({},M);if(rt.groupHeader&&!rt.selectable)return;i(3,S=A?S?S.concat([rt]):[rt]:i(3,S=rt)),setTimeout(()=>{V&&Ti(),i(26,Bt=void 0),g("change",S),g("select",M)})}}function Ti(){i(4,F=""),i(6,mt=!1)}let{ariaValues:gl=M=>`Option ${M}, selected.`}=t,{ariaListOpen:ml=(M,rt)=>`You are currently focused on option ${M}. There are ${rt} results available.`}=t,{ariaFocused:_l=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function p_(M){let rt;return M&&S.length>0?rt=S.map(Lt=>Lt[B]).join(", "):rt=S[B],gl(rt)}function g_(){if(!h||h.length===0)return"";let M=h[Mt];if(mt&&M){let rt=h?h.length:0;return ml(M[B],rt)}else return _l()}let me=null,du;function fu(){clearTimeout(du),du=setTimeout(()=>{bl=!1},100)}function m_(M){!mt&&!I&&x&&!x.contains(M.target)&&!(me!=null&&me.contains(M.target))&&uu()}Pn(()=>{me==null||me.remove()});let bl=!1;function yl(M){!M||M.selectable===!1||f_(M)}function xl(M){bl||i(7,Mt=M)}function pu(M){const{item:rt,i:Lt}=M;if((rt==null?void 0:rt.selectable)!==!1){if(S&&!A&&S[z]===rt[z])return Ti();eT(rt)&&(i(7,Mt=Lt),yl(rt))}}function $r(M){if(h.filter(Ai=>!Object.hasOwn(Ai,"selectable")||Ai.selectable===!0).length===0)return i(7,Mt=0);M>0&&Mt===h.length-1?i(7,Mt=0):M<0&&Mt===0?i(7,Mt=h.length-1):i(7,Mt=Mt+M);const Lt=h[Mt];if(Lt&&Lt.selectable===!1){(M===1||M===-1)&&$r(M);return}}function __(M,rt,Lt){if(!A)return rt&&rt[Lt]===M[Lt]}const b_=gu,y_=gu;function gu(M){return{update(rt){rt.scroll&&(fu(),M.scrollIntoView({behavior:"auto",block:"nearest"}))}}}function x_(){const{width:M}=x.getBoundingClientRect();i(23,me.style.width=kn?M+"px":"auto",me)}let Bn={strategy:"absolute",placement:"bottom-start",middleware:[lS(Ws),aS(),cS()],autoUpdate:!1};const[v_,E_,w_]=mS(Bn);let vl=!0;function S_(M,rt){if(!M||!rt)return i(28,vl=!0);setTimeout(()=>{i(28,vl=!1)},0)}function T_(M){qr.call(this,e,M)}function A_(M){qr.call(this,e,M)}function C_(M){qr.call(this,e,M)}function M_(M){qr.call(this,e,M)}const I_=M=>xl(M),P_=M=>xl(M),R_=(M,rt)=>pu({item:M,i:rt});function D_(M){pi[M?"unshift":"push"](()=>{me=M,i(23,me)})}const O_=M=>Yr(M),k_=M=>C?Yr(M):{};function F_(M){pi[M?"unshift":"push"](()=>{T=M,i(1,T)})}function B_(){F=this.value,i(4,F)}function L_(M){pi[M?"unshift":"push"](()=>{x=M,i(0,x)})}return e.$$set=M=>{"justValue"in M&&i(52,m=M.justValue),"filter"in M&&i(53,_=M.filter),"getItems"in M&&i(54,b=M.getItems),"id"in M&&i(55,y=M.id),"name"in M&&i(8,E=M.name),"container"in M&&i(0,x=M.container),"input"in M&&i(1,T=M.input),"multiple"in M&&i(9,A=M.multiple),"multiFullItemClearable"in M&&i(10,C=M.multiFullItemClearable),"disabled"in M&&i(11,R=M.disabled),"focused"in M&&i(2,I=M.focused),"value"in M&&i(3,S=M.value),"filterText"in M&&i(4,F=M.filterText),"placeholder"in M&&i(56,O=M.placeholder),"placeholderAlwaysShow"in M&&i(57,v=M.placeholderAlwaysShow),"items"in M&&i(51,w=M.items),"label"in M&&i(12,B=M.label),"itemFilter"in M&&i(58,P=M.itemFilter),"groupBy"in M&&i(59,N=M.groupBy),"groupFilter"in M&&i(60,k=M.groupFilter),"groupHeaderSelectable"in M&&i(61,D=M.groupHeaderSelectable),"itemId"in M&&i(13,z=M.itemId),"loadOptions"in M&&i(62,j=M.loadOptions),"containerStyles"in M&&i(14,J=M.containerStyles),"hasError"in M&&i(15,H=M.hasError),"filterSelectedItems"in M&&i(63,L=M.filterSelectedItems),"required"in M&&i(16,U=M.required),"closeListOnChange"in M&&i(64,V=M.closeListOnChange),"createGroupHeaderItem"in M&&i(65,$=M.createGroupHeaderItem),"searchable"in M&&i(17,K=M.searchable),"inputStyles"in M&&i(18,ct=M.inputStyles),"clearable"in M&&i(67,bt=M.clearable),"loading"in M&&i(5,Et=M.loading),"listOpen"in M&&i(6,mt=M.listOpen),"debounce"in M&&i(68,Le=M.debounce),"debounceWait"in M&&i(69,Wi=M.debounceWait),"hideEmptyState"in M&&i(19,wi=M.hideEmptyState),"inputAttributes"in M&&i(70,ds=M.inputAttributes),"listAutoWidth"in M&&i(71,kn=M.listAutoWidth),"showChevron"in M&&i(20,Fn=M.showChevron),"listOffset"in M&&i(72,Ws=M.listOffset),"hoverItemIndex"in M&&i(7,Mt=M.hoverItemIndex),"floatingConfig"in M&&i(73,Si=M.floatingConfig),"class"in M&&i(21,Xr=M.class),"ariaValues"in M&&i(74,gl=M.ariaValues),"ariaListOpen"in M&&i(75,ml=M.ariaListOpen),"ariaFocused"in M&&i(76,_l=M.ariaFocused),"$$scope"in M&&i(81,f=M.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&8|e.$$.dirty[1]&1048576&&S&&Q0(),e.$$.dirty[0]&131072|e.$$.dirty[2]&256&&(ds||!K)&&t_(),e.$$.dirty[0]&512&&A&&i_(),e.$$.dirty[0]&512|e.$$.dirty[2]&131072&&fl&&!A&&s_(),e.$$.dirty[0]&520&&A&&S&&S.length>1&&hu(),e.$$.dirty[0]&8&&S&&e_(),e.$$.dirty[0]&520|e.$$.dirty[2]&32768&&!S&&A&&fs&&g("input",S),e.$$.dirty[0]&6&&!I&&T&&Ti(),e.$$.dirty[0]&16|e.$$.dirty[2]&65536&&F!==dl&&o_(),e.$$.dirty[0]&12824|e.$$.dirty[1]&407896064|e.$$.dirty[2]&3&&i(24,h=_({loadOptions:j,filterText:F,items:w,multiple:A,value:S,itemId:z,groupBy:N,label:B,filterSelectedItems:L,itemFilter:P,convertStringItemsToObjects:Tf,filterGroupedItems:au})),e.$$.dirty[0]&16777800&&!A&&mt&&S&&h&&n_(),e.$$.dirty[0]&576&&mt&&A&&i(7,Mt=0),e.$$.dirty[0]&16&&F&&i(7,Mt=0),e.$$.dirty[0]&128&&r_(Mt),e.$$.dirty[0]&520&&i(25,s=A?S&&S.length>0:S),e.$$.dirty[0]&33554448&&i(35,n=s&&F.length>0),e.$$.dirty[0]&33556512|e.$$.dirty[2]&32&&i(34,r=s&&bt&&!R&&!Et),e.$$.dirty[0]&520|e.$$.dirty[1]&100663296&&i(33,o=v&&A||A&&(S==null?void 0:S.length)===0?O:S?"":O),e.$$.dirty[0]&520&&i(32,a=S?p_(A):""),e.$$.dirty[0]&16777412&&i(31,l=g_()),e.$$.dirty[1]&1048576&&h_(w),e.$$.dirty[0]&8712&&i(52,m=l_()),e.$$.dirty[0]&520|e.$$.dirty[2]&32768&&!A&&fs&&!S&&g("input",S),e.$$.dirty[0]&16777800&&mt&&h&&!A&&!S&&lu(),e.$$.dirty[0]&16777216&&a_(h),e.$$.dirty[0]&1|e.$$.dirty[2]&2048&&x&&(Si==null?void 0:Si.autoUpdate)===void 0&&i(80,Bn.autoUpdate=!0,Bn),e.$$.dirty[0]&1|e.$$.dirty[2]&264192&&x&&Si&&w_(Object.assign(Bn,Si)),e.$$.dirty[0]&8388608&&i(30,c=!!me),e.$$.dirty[0]&8388672&&S_(me,mt),e.$$.dirty[0]&8388673&&mt&&x&&me&&x_(),e.$$.dirty[0]&128&&i(29,u=Mt),e.$$.dirty[0]&70&&T&&mt&&!I&&pl()},[x,T,I,S,F,Et,mt,Mt,E,A,C,R,B,z,J,H,U,K,ct,wi,Fn,Xr,d_,me,h,s,Bt,js,vl,u,c,l,a,o,r,n,Yr,c_,pl,uu,u_,fu,m_,xl,pu,__,b_,y_,v_,E_,p,w,m,_,b,y,O,v,P,N,k,D,j,L,V,$,nt,bt,Le,Wi,ds,kn,Ws,Si,gl,ml,_l,fs,dl,fl,Bn,f,d,T_,A_,C_,M_,I_,P_,R_,D_,O_,k_,F_,B_,L_]}class sT extends $t{constructor(t){super(),Yt(this,t,iT,QS,Vt,{justValue:52,filter:53,getItems:54,id:55,name:8,container:0,input:1,multiple:9,multiFullItemClearable:10,disabled:11,focused:2,value:3,filterText:4,placeholder:56,placeholderAlwaysShow:57,items:51,label:12,itemFilter:58,groupBy:59,groupFilter:60,groupHeaderSelectable:61,itemId:13,loadOptions:62,containerStyles:14,hasError:15,filterSelectedItems:63,required:16,closeListOnChange:64,createGroupHeaderItem:65,getFilteredItems:66,searchable:17,inputStyles:18,clearable:67,loading:5,listOpen:6,debounce:68,debounceWait:69,hideEmptyState:19,inputAttributes:70,listAutoWidth:71,showChevron:20,listOffset:72,hoverItemIndex:7,floatingConfig:73,class:21,handleClear:22,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[66]}get handleClear(){return this.$$.ctx[22]}}function nT(e){return{c:it,m:it,p:it,d:it}}function rT(e){let t,i,s,n;return{c(){t=Z("img"),yi(t.src,i=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${e[1].toLowerCase()}.svg`)||G(t,"src",i),G(t,"alt",s=e[3](e[1])),G(t,"title",n=e[3](e[1])),G(t,"class","svelte-muw3ye")},m(r,o){at(r,t,o)},p(r,o){o&2&&!yi(t.src,i=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${r[1].toLowerCase()}.svg`)&&G(t,"src",i),o&2&&s!==(s=r[3](r[1]))&&G(t,"alt",s),o&2&&n!==(n=r[3](r[1]))&&G(t,"title",n)},d(r){r&&ot(t)}}}function oT(e){let t,i,s,n,r,o,a,l,h;function c(f,p){return f[1]?rT:nT}let u=c(e),d=u(e);return n=new sT({props:{items:e[0],placeholder:"Select a country 🌎",searchable:!0,clearable:!1,closeListOnChange:!0,inputAttributes:{autocomplete:"on"},value:e[1]}}),n.$on("change",e[4]),{c(){t=Z("div"),d.c(),i=yt(),s=Z("div"),Wt(n.$$.fragment),r=yt(),o=Z("button"),o.textContent="Play!",G(o,"class","svelte-muw3ye"),G(s,"class","search svelte-muw3ye"),G(t,"class","container svelte-muw3ye")},m(f,p){at(f,t,p),d.m(t,null),q(t,i),q(t,s),Ut(n,s,null),q(s,r),q(s,o),a=!0,l||(h=Rt(o,"click",e[2]),l=!0)},p(f,[p]){u===(u=c(f))&&d?d.p(f,p):(d.d(1),d=u(f),d&&(d.c(),d.m(t,i)));const g={};p&1&&(g.items=f[0]),p&2&&(g.value=f[1]),n.$set(g)},i(f){a||(X(n.$$.fragment,f),a=!0)},o(f){tt(n.$$.fragment,f),a=!1},d(f){f&&ot(t),d.d(),Gt(n),l=!1,h()}}}function aT(e,t,i){let s,n;const r=ig();let o=[];Fe(async()=>{const c=await Kw(()=>Promise.resolve().then(()=>EI),void 0);bn.registerLocale(c.default),i(0,o=Object.entries(bn.getNames("en")).map(([u,d])=>({value:u,label:d}))),n=localStorage.getItem("userCountry"),i(1,s=n)});const a=()=>{s&&(localStorage.setItem("userCountry",s),Ag.set(s),r("play",s))};function l(c){return bn.getName(c,"en",{select:"official"})}const h=c=>{i(1,s=c.detail.value)};return i(1,s=""),[o,s,a,l,h]}class lT extends $t{constructor(t){super(),Yt(this,t,aT,oT,Vt,{})}}function hT(e){let t,i,s;return{c(){t=Z("div"),t.innerHTML=`<div class="card svelte-1stc2p8"><h2 class="svelte-1stc2p8">How to play</h2> 
		<br/> 
		<p>Kubel is like a 2d Rubiks cube. Its very simple!</p> 
		<br/> 
		<p><span class="svelte-1stc2p8">Click and drag</span> a piece to move the row or collumn. Win the game by moving
			all the pieces of the <span class="svelte-1stc2p8">same color</span> next to each other. Use as few moves as possible
			to get the best score.</p> 
		<br/> 
		<p style="text-align: center; font-weight:bold">😄Good luck &amp; have fun!😄</p> 
		<p style="text-align: center; font-size: 14px; color:rgba(150, 150, 200, 0.75)">Feedback? Questions? Message me! <a href="mailto:jason@kubel.io" target="_blank">jason@kubel.io</a></p></div>`,G(t,"class","screen-container svelte-1stc2p8")},m(n,r){at(n,t,r),i||(s=[Rt(t,"click",e[0]),Rt(t,"keypress",e[0])],i=!0)},p:it,i:it,o:it,d(n){n&&ot(t),i=!1,vi(s)}}}function cT(e){return[i=>{i.target.closest(".card")||Dc.set(!1)}]}class uT extends $t{constructor(t){super(),Yt(this,t,cT,hT,Vt,{})}}function dT(e){let t,i,s;return{c(){t=Z("button"),t.textContent="PLAY AGAIN",G(t,"class","svelte-9suxba")},m(n,r){at(n,t,r),i||(s=Rt(t,"click",e[0]),i=!0)},p:it,i:it,o:it,d(n){n&&ot(t),i=!1,s()}}}function fT(e){return[()=>{Ah.set(!0)}]}class pT extends $t{constructor(t){super(),Yt(this,t,fT,dT,Vt,{})}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Vr(e){return e+.5|0}const qi=(e,t,i)=>Math.max(Math.min(e,i),t);function tr(e){return qi(Vr(e*2.55),0,255)}function is(e){return qi(Vr(e*255),0,255)}function ki(e){return qi(Vr(e/2.55)/100,0,1)}function Af(e){return qi(Vr(e*100),0,100)}const Pe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hc=[..."0123456789ABCDEF"],gT=e=>hc[e&15],mT=e=>hc[(e&240)>>4]+hc[e&15],So=e=>(e&240)>>4===(e&15),_T=e=>So(e.r)&&So(e.g)&&So(e.b)&&So(e.a);function bT(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&Pe[e[1]]*17,g:255&Pe[e[2]]*17,b:255&Pe[e[3]]*17,a:t===5?Pe[e[4]]*17:255}:(t===7||t===9)&&(i={r:Pe[e[1]]<<4|Pe[e[2]],g:Pe[e[3]]<<4|Pe[e[4]],b:Pe[e[5]]<<4|Pe[e[6]],a:t===9?Pe[e[7]]<<4|Pe[e[8]]:255})),i}const yT=(e,t)=>e<255?t(e):"";function xT(e){var t=_T(e)?gT:mT;return e?"#"+t(e.r)+t(e.g)+t(e.b)+yT(e.a,t):void 0}const vT=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Zm(e,t,i){const s=t*Math.min(i,1-i),n=(r,o=(r+e/30)%12)=>i-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function ET(e,t,i){const s=(n,r=(n+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function wT(e,t,i){const s=Zm(e,1,.5);let n;for(t+i>1&&(n=1/(t+i),t*=n,i*=n),n=0;n<3;n++)s[n]*=1-t-i,s[n]+=t;return s}function ST(e,t,i,s,n){return e===n?(t-i)/s+(t<i?6:0):t===n?(i-e)/s+2:(e-t)/s+4}function Xc(e){const i=e.r/255,s=e.g/255,n=e.b/255,r=Math.max(i,s,n),o=Math.min(i,s,n),a=(r+o)/2;let l,h,c;return r!==o&&(c=r-o,h=a>.5?c/(2-r-o):c/(r+o),l=ST(i,s,n,c,r),l=l*60+.5),[l|0,h||0,a]}function Yc(e,t,i,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,s)).map(is)}function $c(e,t,i){return Yc(Zm,e,t,i)}function TT(e,t,i){return Yc(wT,e,t,i)}function AT(e,t,i){return Yc(ET,e,t,i)}function Jm(e){return(e%360+360)%360}function CT(e){const t=vT.exec(e);let i=255,s;if(!t)return;t[5]!==s&&(i=t[6]?tr(+t[5]):is(+t[5]));const n=Jm(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=TT(n,r,o):t[1]==="hsv"?s=AT(n,r,o):s=$c(n,r,o),{r:s[0],g:s[1],b:s[2],a:i}}function MT(e,t){var i=Xc(e);i[0]=Jm(i[0]+t),i=$c(i),e.r=i[0],e.g=i[1],e.b=i[2]}function IT(e){if(!e)return;const t=Xc(e),i=t[0],s=Af(t[1]),n=Af(t[2]);return e.a<255?`hsla(${i}, ${s}%, ${n}%, ${ki(e.a)})`:`hsl(${i}, ${s}%, ${n}%)`}const Cf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Mf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function PT(){const e={},t=Object.keys(Mf),i=Object.keys(Cf);let s,n,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],n=0;n<i.length;n++)r=i[n],a=a.replace(r,Cf[r]);r=parseInt(Mf[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let To;function RT(e){To||(To=PT(),To.transparent=[0,0,0,0]);const t=To[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const DT=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function OT(e){const t=DT.exec(e);let i=255,s,n,r;if(t){if(t[7]!==s){const o=+t[7];i=t[8]?tr(o):qi(o*255,0,255)}return s=+t[1],n=+t[3],r=+t[5],s=255&(t[2]?tr(s):qi(s,0,255)),n=255&(t[4]?tr(n):qi(n,0,255)),r=255&(t[6]?tr(r):qi(r,0,255)),{r:s,g:n,b:r,a:i}}}function kT(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ki(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const rh=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Js=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function FT(e,t,i){const s=Js(ki(e.r)),n=Js(ki(e.g)),r=Js(ki(e.b));return{r:is(rh(s+i*(Js(ki(t.r))-s))),g:is(rh(n+i*(Js(ki(t.g))-n))),b:is(rh(r+i*(Js(ki(t.b))-r))),a:e.a+i*(t.a-e.a)}}function Ao(e,t,i){if(e){let s=Xc(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*i,t===0?360:1)),s=$c(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function Qm(e,t){return e&&Object.assign(t||{},e)}function If(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=is(e[3]))):(t=Qm(e,{r:0,g:0,b:0,a:1}),t.a=is(t.a)),t}function BT(e){return e.charAt(0)==="r"?OT(e):CT(e)}class Mr{constructor(t){if(t instanceof Mr)return t;const i=typeof t;let s;i==="object"?s=If(t):i==="string"&&(s=bT(t)||RT(t)||BT(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Qm(this._rgb);return t&&(t.a=ki(t.a)),t}set rgb(t){this._rgb=If(t)}rgbString(){return this._valid?kT(this._rgb):void 0}hexString(){return this._valid?xT(this._rgb):void 0}hslString(){return this._valid?IT(this._rgb):void 0}mix(t,i){if(t){const s=this.rgb,n=t.rgb;let r;const o=i===r?.5:i,a=2*o-1,l=s.a-n.a,h=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-h,s.r=255&h*s.r+r*n.r+.5,s.g=255&h*s.g+r*n.g+.5,s.b=255&h*s.b+r*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(t,i){return t&&(this._rgb=FT(this._rgb,t._rgb,i)),this}clone(){return new Mr(this.rgb)}alpha(t){return this._rgb.a=is(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=Vr(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ao(this._rgb,2,t),this}darken(t){return Ao(this._rgb,2,-t),this}saturate(t){return Ao(this._rgb,1,t),this}desaturate(t){return Ao(this._rgb,1,-t),this}rotate(t){return MT(this._rgb,t),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Pi(){}const LT=(()=>{let e=0;return()=>e++})();function At(e){return e===null||typeof e>"u"}function Dt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function vt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function jt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Te(e,t){return jt(e)?e:t}function gt(e,t){return typeof e>"u"?t:e}const NT=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,t0=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Pt(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function Ct(e,t,i,s){let n,r,o;if(Dt(e))if(r=e.length,s)for(n=r-1;n>=0;n--)t.call(i,e[n],n);else for(n=0;n<r;n++)t.call(i,e[n],n);else if(vt(e))for(o=Object.keys(e),r=o.length,n=0;n<r;n++)t.call(i,e[o[n]],o[n])}function Ma(e,t){let i,s,n,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,s=e.length;i<s;++i)if(n=e[i],r=t[i],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function Ia(e){if(Dt(e))return e.map(Ia);if(vt(e)){const t=Object.create(null),i=Object.keys(e),s=i.length;let n=0;for(;n<s;++n)t[i[n]]=Ia(e[i[n]]);return t}return e}function e0(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function UT(e,t,i,s){if(!e0(e))return;const n=t[e],r=i[e];vt(n)&&vt(r)?Ir(n,r,s):t[e]=Ia(r)}function Ir(e,t,i){const s=Dt(t)?t:[t],n=s.length;if(!vt(e))return e;i=i||{};const r=i.merger||UT;let o;for(let a=0;a<n;++a){if(o=s[a],!vt(o))continue;const l=Object.keys(o);for(let h=0,c=l.length;h<c;++h)r(l[h],e,o,i)}return e}function ur(e,t){return Ir(e,t,{merger:GT})}function GT(e,t,i){if(!e0(e))return;const s=t[e],n=i[e];vt(s)&&vt(n)?ur(s,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ia(n))}const Pf={"":e=>e,x:e=>e.x,y:e=>e.y};function HT(e){const t=e.split("."),i=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}function zT(e){const t=HT(e);return i=>{for(const s of t){if(s==="")break;i=i&&i[s]}return i}}function hs(e,t){return(Pf[t]||(Pf[t]=zT(t)))(e)}function Kc(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ke=e=>typeof e<"u",cs=e=>typeof e=="function",Rf=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function VT(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ft=Math.PI,Ot=2*Ft,WT=Ot+Ft,Pa=Number.POSITIVE_INFINITY,jT=Ft/180,Xt=Ft/2,ms=Ft/4,Df=Ft*2/3,Zi=Math.log10,bi=Math.sign;function dr(e,t,i){return Math.abs(e-t)<i}function Of(e){const t=Math.round(e);e=dr(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(Zi(e))),s=e/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function XT(e){const t=[],i=Math.sqrt(e);let s;for(s=1;s<i;s++)e%s===0&&(t.push(s),t.push(e/s));return i===(i|0)&&t.push(i),t.sort((n,r)=>n-r).pop(),t}function An(e){return!isNaN(parseFloat(e))&&isFinite(e)}function YT(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function i0(e,t,i){let s,n,r;for(s=0,n=e.length;s<n;s++)r=e[s][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Ke(e){return e*(Ft/180)}function qc(e){return e*(180/Ft)}function kf(e){if(!jt(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function s0(e,t){const i=t.x-e.x,s=t.y-e.y,n=Math.sqrt(i*i+s*s);let r=Math.atan2(s,i);return r<-.5*Ft&&(r+=Ot),{angle:r,distance:n}}function cc(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function $T(e,t){return(e-t+WT)%Ot-Ft}function Ce(e){return(e%Ot+Ot)%Ot}function Pr(e,t,i,s){const n=Ce(e),r=Ce(t),o=Ce(i),a=Ce(r-n),l=Ce(o-n),h=Ce(n-r),c=Ce(n-o);return n===r||n===o||s&&r===o||a>l&&h<c}function ne(e,t,i){return Math.max(t,Math.min(i,e))}function KT(e){return ne(e,-32768,32767)}function Li(e,t,i,s=1e-6){return e>=Math.min(t,i)-s&&e<=Math.max(t,i)+s}function Zc(e,t,i){i=i||(o=>e[o]<t);let s=e.length-1,n=0,r;for(;s-n>1;)r=n+s>>1,i(r)?n=r:s=r;return{lo:n,hi:s}}const Ni=(e,t,i,s)=>Zc(e,i,s?n=>{const r=e[n][t];return r<i||r===i&&e[n+1][t]===i}:n=>e[n][t]<i),qT=(e,t,i)=>Zc(e,i,s=>e[s][t]>=i);function ZT(e,t,i){let s=0,n=e.length;for(;s<n&&e[s]<t;)s++;for(;n>s&&e[n-1]>i;)n--;return s>0||n<e.length?e.slice(s,n):e}const n0=["push","pop","shift","splice","unshift"];function JT(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),n0.forEach(i=>{const s="_onData"+Kc(i),n=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Ff(e,t){const i=e._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(n0.forEach(r=>{delete e[r]}),delete e._chartjs)}function r0(e){const t=new Set;let i,s;for(i=0,s=e.length;i<s;++i)t.add(e[i]);return t.size===s?e:Array.from(t)}const o0=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function a0(e,t){let i=[],s=!1;return function(...n){i=n,s||(s=!0,o0.call(window,()=>{s=!1,e.apply(t,i)}))}}function QT(e,t){let i;return function(...s){return t?(clearTimeout(i),i=setTimeout(e,t,s)):e.apply(this,s),t}}const Jc=e=>e==="start"?"left":e==="end"?"right":"center",he=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,tA=(e,t,i,s)=>e===(s?"left":"right")?i:e==="center"?(t+i)/2:t;function l0(e,t,i){const s=t.length;let n=0,r=s;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:h,max:c,minDefined:u,maxDefined:d}=o.getUserBounds();u&&(n=ne(Math.min(Ni(a,o.axis,h).lo,i?s:Ni(t,l,o.getPixelForValue(h)).lo),0,s-1)),d?r=ne(Math.max(Ni(a,o.axis,c,!0).hi+1,i?0:Ni(t,l,o.getPixelForValue(c),!0).hi+1),n,s)-n:r=s-n}return{start:n,count:r}}function h0(e){const{xScale:t,yScale:i,_scaleRanges:s}=e,n={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!s)return e._scaleRanges=n,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,n),r}const Co=e=>e===0||e===1,Bf=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ot/i)),Lf=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ot/i)+1,fr={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Xt)+1,easeOutSine:e=>Math.sin(e*Xt),easeInOutSine:e=>-.5*(Math.cos(Ft*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Co(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Co(e)?e:Bf(e,.075,.3),easeOutElastic:e=>Co(e)?e:Lf(e,.075,.3),easeInOutElastic(e){return Co(e)?e:e<.5?.5*Bf(e*2,.1125,.45):.5+.5*Lf(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-fr.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?fr.easeInBounce(e*2)*.5:fr.easeOutBounce(e*2-1)*.5+.5};function c0(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Nf(e){return c0(e)?e:new Mr(e)}function oh(e){return c0(e)?e:new Mr(e).saturate(.5).darken(.1).hexString()}const eA=["x","y","borderWidth","radius","tension"],iA=["color","borderColor","backgroundColor"];function sA(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:iA},numbers:{type:"number",properties:eA}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function nA(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Uf=new Map;function rA(e,t){t=t||{};const i=e+JSON.stringify(t);let s=Uf.get(i);return s||(s=new Intl.NumberFormat(e,t),Uf.set(i,s)),s}function Wr(e,t,i){return rA(t,i).format(e)}const u0={values(e){return Dt(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const s=this.chart.options.locale;let n,r=e;if(i.length>1){const h=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(h<1e-4||h>1e15)&&(n="scientific"),r=oA(e,i)}const o=Zi(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Wr(e,s,l)},logarithmic(e,t,i){if(e===0)return"0";const s=i[t].significand||e/Math.pow(10,Math.floor(Zi(e)));return[1,2,3,5,10,15].includes(s)||t>.8*i.length?u0.numeric.call(this,e,t,i):""}};function oA(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var al={formatters:u0};function aA(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:al.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ns=Object.create(null),uc=Object.create(null);function pr(e,t){if(!t)return e;const i=t.split(".");for(let s=0,n=i.length;s<n;++s){const r=i[s];e=e[r]||(e[r]=Object.create(null))}return e}function ah(e,t,i){return typeof t=="string"?Ir(pr(e,t),i):Ir(pr(e,""),t)}class lA{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>oh(n.backgroundColor),this.hoverBorderColor=(s,n)=>oh(n.borderColor),this.hoverColor=(s,n)=>oh(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return ah(this,t,i)}get(t){return pr(this,t)}describe(t,i){return ah(uc,t,i)}override(t,i){return ah(Ns,t,i)}route(t,i,s,n){const r=pr(this,t),o=pr(this,s),a="_"+i;Object.defineProperties(r,{[a]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],h=o[n];return vt(l)?Object.assign({},h,l):gt(l,h)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}}var Kt=new lA({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[sA,nA,aA]);function hA(e){return!e||At(e.size)||At(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Ra(e,t,i,s,n){let r=t[n];return r||(r=t[n]=e.measureText(n).width,i.push(n)),r>s&&(s=r),s}function cA(e,t,i,s){s=s||{};let n=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let o=0;const a=i.length;let l,h,c,u,d;for(l=0;l<a;l++)if(u=i[l],u!=null&&Dt(u)!==!0)o=Ra(e,n,r,o,u);else if(Dt(u))for(h=0,c=u.length;h<c;h++)d=u[h],d!=null&&!Dt(d)&&(o=Ra(e,n,r,o,d));e.restore();const f=r.length/2;if(f>i.length){for(l=0;l<f;l++)delete n[r[l]];r.splice(0,f)}return o}function _s(e,t,i){const s=e.currentDevicePixelRatio,n=i!==0?Math.max(i/2,.5):0;return Math.round((t-n)*s)/s+n}function Gf(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function dc(e,t,i,s){d0(e,t,i,s,null)}function d0(e,t,i,s,n){let r,o,a,l,h,c,u,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*jT;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(i,s),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:n?e.ellipse(i,s,n/2,g,0,0,Ot):e.arc(i,s,g,0,Ot),e.closePath();break;case"triangle":c=n?n/2:g,e.moveTo(i+Math.sin(m)*c,s-Math.cos(m)*g),m+=Df,e.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*g),m+=Df,e.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*g),e.closePath();break;case"rectRounded":h=g*.516,l=g-h,o=Math.cos(m+ms)*l,u=Math.cos(m+ms)*(n?n/2-h:l),a=Math.sin(m+ms)*l,d=Math.sin(m+ms)*(n?n/2-h:l),e.arc(i-u,s-a,h,m-Ft,m-Xt),e.arc(i+d,s-o,h,m-Xt,m),e.arc(i+u,s+a,h,m,m+Xt),e.arc(i-d,s+o,h,m+Xt,m+Ft),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,c=n?n/2:l,e.rect(i-c,s-l,2*c,2*l);break}m+=ms;case"rectRot":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),e.moveTo(i-u,s-a),e.lineTo(i+d,s-o),e.lineTo(i+u,s+a),e.lineTo(i-d,s+o),e.closePath();break;case"crossRot":m+=ms;case"cross":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),e.moveTo(i-u,s-a),e.lineTo(i+u,s+a),e.moveTo(i+d,s-o),e.lineTo(i-d,s+o);break;case"star":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),e.moveTo(i-u,s-a),e.lineTo(i+u,s+a),e.moveTo(i+d,s-o),e.lineTo(i-d,s+o),m+=ms,u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),e.moveTo(i-u,s-a),e.lineTo(i+u,s+a),e.moveTo(i+d,s-o),e.lineTo(i-d,s+o);break;case"line":o=n?n/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(i-o,s-a),e.lineTo(i+o,s+a);break;case"dash":e.moveTo(i,s),e.lineTo(i+Math.cos(m)*(n?n/2:g),s+Math.sin(m)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Rr(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function ll(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function hl(e){e.restore()}function uA(e,t,i,s,n){if(!t)return e.lineTo(i.x,i.y);if(n==="middle"){const r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else n==="after"!=!!s?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function dA(e,t,i,s){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function Us(e,t,i,s,n,r={}){const o=Dt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,h;for(e.save(),e.font=n.string,fA(e,r),l=0;l<o.length;++l)h=o[l],r.backdrop&&gA(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),At(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(h,i,s,r.maxWidth)),e.fillText(h,i,s,r.maxWidth),pA(e,i,s,h,r),s+=n.lineHeight;e.restore()}function fA(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),At(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function pA(e,t,i,s,n){if(n.strikethrough||n.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,h=i+r.actualBoundingBoxDescent,c=n.strikethrough?(l+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(o,c),e.lineTo(a,c),e.stroke()}}function gA(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Dr(e,t){const{x:i,y:s,w:n,h:r,radius:o}=t;e.arc(i+o.topLeft,s+o.topLeft,o.topLeft,-Xt,Ft,!0),e.lineTo(i,s+r-o.bottomLeft),e.arc(i+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Ft,Xt,!0),e.lineTo(i+n-o.bottomRight,s+r),e.arc(i+n-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Xt,0,!0),e.lineTo(i+n,s+o.topRight),e.arc(i+n-o.topRight,s+o.topRight,o.topRight,0,-Xt,!0),e.lineTo(i+o.topLeft,s)}const mA=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_A=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bA(e,t){const i=(""+e).match(mA);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const yA=e=>+e||0;function Qc(e,t){const i={},s=vt(t),n=s?Object.keys(t):t,r=vt(e)?s?o=>gt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of n)i[o]=yA(r(o));return i}function f0(e){return Qc(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Rs(e){return Qc(e,["topLeft","topRight","bottomLeft","bottomRight"])}function fe(e){const t=f0(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Qt(e,t){e=e||{},t=t||Kt.font;let i=gt(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let s=gt(e.style,t.style);s&&!(""+s).match(_A)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:gt(e.family,t.family),lineHeight:bA(gt(e.lineHeight,t.lineHeight),i),size:i,style:s,weight:gt(e.weight,t.weight),string:""};return n.string=hA(n),n}function er(e,t,i,s){let n=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),n=!1),i!==void 0&&Dt(a)&&(a=a[i%a.length],n=!1),a!==void 0))return s&&!n&&(s.cacheable=!1),a}function xA(e,t,i){const{min:s,max:n}=e,r=t0(t,(n-s)/2),o=(a,l)=>i&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(n,r)}}function us(e,t){return Object.assign(Object.create(e),t)}function tu(e,t=[""],i=e,s,n=()=>e[0]){ke(s)||(s=_0("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:n,override:o=>tu([o,...e],t,i,s)};return new Proxy(r,{deleteProperty(o,a){return delete o[a],delete o._keys,delete e[0][a],!0},get(o,a){return g0(o,a,()=>MA(a,t,e,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(o,a){return zf(o).includes(a)},ownKeys(o){return zf(o)},set(o,a,l){const h=o._storage||(o._storage=n());return o[a]=h[a]=l,delete o._keys,!0}})}function Cn(e,t,i,s){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:p0(e,s),setContext:r=>Cn(e,r,i,s),override:r=>Cn(e.override(r),t,i,s)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return g0(r,o,()=>EA(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function p0(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:i,indexable:s,isScriptable:cs(i)?i:()=>i,isIndexable:cs(s)?s:()=>s}}const vA=(e,t)=>e?e+Kc(t):t,eu=(e,t)=>vt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function g0(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const s=i();return e[t]=s,s}function EA(e,t,i){const{_proxy:s,_context:n,_subProxy:r,_descriptors:o}=e;let a=s[t];return cs(a)&&o.isScriptable(t)&&(a=wA(t,a,e,i)),Dt(a)&&a.length&&(a=SA(t,a,e,o.isIndexable)),eu(t,a)&&(a=Cn(a,n,r&&r[t],o)),a}function wA(e,t,i,s){const{_proxy:n,_context:r,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);return a.add(e),t=t(r,o||s),a.delete(e),eu(e,t)&&(t=iu(n._scopes,n,e,t)),t}function SA(e,t,i,s){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=i;if(ke(r.index)&&s(e))t=t[r.index%t.length];else if(vt(t[0])){const l=t,h=n._scopes.filter(c=>c!==l);t=[];for(const c of l){const u=iu(h,n,e,c);t.push(Cn(u,r,o&&o[e],a))}}return t}function m0(e,t,i){return cs(e)?e(t,i):e}const TA=(e,t)=>e===!0?t:typeof e=="string"?hs(t,e):void 0;function AA(e,t,i,s,n){for(const r of t){const o=TA(i,r);if(o){e.add(o);const a=m0(o._fallback,i,n);if(ke(a)&&a!==i&&a!==s)return a}else if(o===!1&&ke(s)&&i!==s)return null}return!1}function iu(e,t,i,s){const n=t._rootScopes,r=m0(t._fallback,i,s),o=[...e,...n],a=new Set;a.add(s);let l=Hf(a,o,i,r||i,s);return l===null||ke(r)&&r!==i&&(l=Hf(a,o,r,l,s),l===null)?!1:tu(Array.from(a),[""],n,r,()=>CA(t,i,s))}function Hf(e,t,i,s,n){for(;i;)i=AA(e,t,i,s,n);return i}function CA(e,t,i){const s=e._getTarget();t in s||(s[t]={});const n=s[t];return Dt(n)&&vt(i)?i:n||{}}function MA(e,t,i,s){let n;for(const r of t)if(n=_0(vA(r,e),i),ke(n))return eu(e,n)?iu(i,s,e,n):n}function _0(e,t){for(const i of t){if(!i)continue;const s=i[e];if(ke(s))return s}}function zf(e){let t=e._keys;return t||(t=e._keys=IA(e._scopes)),t}function IA(e){const t=new Set;for(const i of e)for(const s of Object.keys(i).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function b0(e,t,i,s){const{iScale:n}=e,{key:r="r"}=this._parsing,o=new Array(s);let a,l,h,c;for(a=0,l=s;a<l;++a)h=a+i,c=t[h],o[a]={r:n.parse(hs(c,r),h)};return o}const PA=Number.EPSILON||1e-14,Mn=(e,t)=>t<e.length&&!e[t].skip&&e[t],y0=e=>e==="x"?"y":"x";function RA(e,t,i,s){const n=e.skip?t:e,r=t,o=i.skip?t:i,a=cc(r,n),l=cc(o,r);let h=a/(a+l),c=l/(a+l);h=isNaN(h)?0:h,c=isNaN(c)?0:c;const u=s*h,d=s*c;return{previous:{x:r.x-u*(o.x-n.x),y:r.y-u*(o.y-n.y)},next:{x:r.x+d*(o.x-n.x),y:r.y+d*(o.y-n.y)}}}function DA(e,t,i){const s=e.length;let n,r,o,a,l,h=Mn(e,0);for(let c=0;c<s-1;++c)if(l=h,h=Mn(e,c+1),!(!l||!h)){if(dr(t[c],0,PA)){i[c]=i[c+1]=0;continue}n=i[c]/t[c],r=i[c+1]/t[c],a=Math.pow(n,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),i[c]=n*o*t[c],i[c+1]=r*o*t[c])}}function OA(e,t,i="x"){const s=y0(i),n=e.length;let r,o,a,l=Mn(e,0);for(let h=0;h<n;++h){if(o=a,a=l,l=Mn(e,h+1),!a)continue;const c=a[i],u=a[s];o&&(r=(c-o[i])/3,a[`cp1${i}`]=c-r,a[`cp1${s}`]=u-r*t[h]),l&&(r=(l[i]-c)/3,a[`cp2${i}`]=c+r,a[`cp2${s}`]=u+r*t[h])}}function kA(e,t="x"){const i=y0(t),s=e.length,n=Array(s).fill(0),r=Array(s);let o,a,l,h=Mn(e,0);for(o=0;o<s;++o)if(a=l,l=h,h=Mn(e,o+1),!!l){if(h){const c=h[t]-l[t];n[o]=c!==0?(h[i]-l[i])/c:0}r[o]=a?h?bi(n[o-1])!==bi(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}DA(e,n,r),OA(e,r,t)}function Mo(e,t,i){return Math.max(Math.min(e,i),t)}function FA(e,t){let i,s,n,r,o,a=Rr(e[0],t);for(i=0,s=e.length;i<s;++i)o=r,r=a,a=i<s-1&&Rr(e[i+1],t),r&&(n=e[i],o&&(n.cp1x=Mo(n.cp1x,t.left,t.right),n.cp1y=Mo(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=Mo(n.cp2x,t.left,t.right),n.cp2y=Mo(n.cp2y,t.top,t.bottom)))}function BA(e,t,i,s,n){let r,o,a,l;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")kA(e,n);else{let h=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=RA(h,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,h=a}t.capBezierPoints&&FA(e,i)}function x0(){return typeof window<"u"&&typeof document<"u"}function su(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Da(e,t,i){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[i])):s=e,s}const cl=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function LA(e,t){return cl(e).getPropertyValue(t)}const NA=["top","right","bottom","left"];function Ds(e,t,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const r=NA[n];s[r]=parseFloat(e[t+"-"+r+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const UA=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function GA(e,t){const i=e.touches,s=i&&i.length?i[0]:e,{offsetX:n,offsetY:r}=s;let o=!1,a,l;if(UA(n,r,e.target))a=n,l=r;else{const h=t.getBoundingClientRect();a=s.clientX-h.left,l=s.clientY-h.top,o=!0}return{x:a,y:l,box:o}}function Ss(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:s}=t,n=cl(i),r=n.boxSizing==="border-box",o=Ds(n,"padding"),a=Ds(n,"border","width"),{x:l,y:h,box:c}=GA(e,i),u=o.left+(c&&a.left),d=o.top+(c&&a.top);let{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*i.width/s),y:Math.round((h-d)/p*i.height/s)}}function HA(e,t,i){let s,n;if(t===void 0||i===void 0){const r=su(e);if(!r)t=e.clientWidth,i=e.clientHeight;else{const o=r.getBoundingClientRect(),a=cl(r),l=Ds(a,"border","width"),h=Ds(a,"padding");t=o.width-h.width-l.width,i=o.height-h.height-l.height,s=Da(a.maxWidth,r,"clientWidth"),n=Da(a.maxHeight,r,"clientHeight")}}return{width:t,height:i,maxWidth:s||Pa,maxHeight:n||Pa}}const Io=e=>Math.round(e*10)/10;function zA(e,t,i,s){const n=cl(e),r=Ds(n,"margin"),o=Da(n.maxWidth,e,"clientWidth")||Pa,a=Da(n.maxHeight,e,"clientHeight")||Pa,l=HA(e,t,i);let{width:h,height:c}=l;if(n.boxSizing==="content-box"){const d=Ds(n,"border","width"),f=Ds(n,"padding");h-=f.width+d.width,c-=f.height+d.height}return h=Math.max(0,h-r.width),c=Math.max(0,s?h/s:c-r.height),h=Io(Math.min(h,o,l.maxWidth)),c=Io(Math.min(c,a,l.maxHeight)),h&&!c&&(c=Io(h/2)),(t!==void 0||i!==void 0)&&s&&l.height&&c>l.height&&(c=l.height,h=Io(Math.floor(c*s))),{width:h,height:c}}function Vf(e,t,i){const s=t||1,n=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==n||o.width!==r?(e.currentDevicePixelRatio=s,o.height=n,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const VA=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function Wf(e,t){const i=LA(e,t),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ts(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function WA(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:s==="middle"?i<.5?e.y:t.y:s==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function jA(e,t,i,s){const n={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=Ts(e,n,i),a=Ts(n,r,i),l=Ts(r,t,i),h=Ts(o,a,i),c=Ts(a,l,i);return Ts(h,c,i)}const XA=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,s){return i-s},leftForLtr(i,s){return i-s}}},YA=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function xn(e,t,i){return e?XA(t,i):YA()}function v0(e,t){let i,s;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=s)}function E0(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function w0(e){return e==="angle"?{between:Pr,compare:$T,normalize:Ce}:{between:Li,compare:(t,i)=>t-i,normalize:t=>t}}function jf({start:e,end:t,count:i,loop:s,style:n}){return{start:e%i,end:t%i,loop:s&&(t-e+1)%i===0,style:n}}function $A(e,t,i){const{property:s,start:n,end:r}=i,{between:o,normalize:a}=w0(s),l=t.length;let{start:h,end:c,loop:u}=e,d,f;if(u){for(h+=l,c+=l,d=0,f=l;d<f&&o(a(t[h%l][s]),n,r);++d)h--,c--;h%=l,c%=l}return c<h&&(c+=l),{start:h,end:c,loop:u,style:e.style}}function S0(e,t,i){if(!i)return[e];const{property:s,start:n,end:r}=i,o=t.length,{compare:a,between:l,normalize:h}=w0(s),{start:c,end:u,loop:d,style:f}=$A(e,t,i),p=[];let g=!1,m=null,_,b,y;const E=()=>l(n,y,_)&&a(n,y)!==0,x=()=>a(r,_)===0||l(r,y,_),T=()=>g||E(),A=()=>!g||x();for(let C=c,R=c;C<=u;++C)b=t[C%o],!b.skip&&(_=h(b[s]),_!==y&&(g=l(_,n,r),m===null&&T()&&(m=a(_,n)===0?C:R),m!==null&&A()&&(p.push(jf({start:m,end:C,loop:d,count:o,style:f})),m=null),R=C,y=_));return m!==null&&p.push(jf({start:m,end:u,loop:d,count:o,style:f})),p}function T0(e,t){const i=[],s=e.segments;for(let n=0;n<s.length;n++){const r=S0(s[n],e.points,t);r.length&&i.push(...r)}return i}function KA(e,t,i,s){let n=0,r=t-1;if(i&&!s)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,i&&(r+=n);r>n&&e[r%t].skip;)r--;return r%=t,{start:n,end:r}}function qA(e,t,i,s){const n=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=i;++l){const h=e[l%n];h.skip||h.stop?a.skip||(s=!1,r.push({start:t%n,end:(l-1)%n,loop:s}),t=o=h.stop?l:null):(o=l,a.skip&&(t=l)),a=h}return o!==null&&r.push({start:t%n,end:o%n,loop:s}),r}function ZA(e,t){const i=e.points,s=e.options.spanGaps,n=i.length;if(!n)return[];const r=!!e._loop,{start:o,end:a}=KA(i,n,r,s);if(s===!0)return Xf(e,[{start:o,end:a,loop:r}],i,t);const l=a<o?a+n:a,h=!!e._fullLoop&&o===0&&a===n-1;return Xf(e,qA(i,o,l,h),i,t)}function Xf(e,t,i,s){return!s||!s.setContext||!i?t:JA(e,t,i,s)}function JA(e,t,i,s){const n=e._chart.getContext(),r=Yf(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=i.length,h=[];let c=r,u=t[0].start,d=u;function f(p,g,m,_){const b=a?-1:1;if(p!==g){for(p+=l;i[p%l].skip;)p-=b;for(;i[g%l].skip;)g+=b;p%l!==g%l&&(h.push({start:p%l,end:g%l,loop:m,style:_}),c=_,u=g%l)}}for(const p of t){u=a?u:p.start;let g=i[u%l],m;for(d=u+1;d<=p.end;d++){const _=i[d%l];m=Yf(s.setContext(us(n,{type:"segment",p0:g,p1:_,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),QA(m,c)&&f(u,d-1,p.loop,c),g=_,c=m}u<d-1&&f(u,d-1,p.loop,c)}return h}function Yf(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function QA(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class tC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,s,n){const r=i.listeners[n],o=i.duration;r.forEach(a=>a({chart:t,initial:i.initial,numSteps:o,currentStep:Math.min(s-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=o0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,s,t,"progress")),r.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),i+=r.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let s=i.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,s)),s}listen(t,i,s){this._getAnims(t).listeners[i].push(s)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const s=i.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Di=new tC;const $f="transparent",eC={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const s=Nf(e||$f),n=s.valid&&Nf(t||$f);return n&&n.valid?n.mix(s,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class iC{constructor(t,i,s,n){const r=i[s];n=er([t.to,n,r,t.from]);const o=er([t.from,r,n]);this._active=!0,this._fn=t.fn||eC[t.type||typeof o],this._easing=fr[t.easing]||fr.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,i,s){if(this._active){this._notify(!1);const n=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=er([t.to,i,n,t.from]),this._from=er([t.from,n,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,s=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||i<s),!this._active){this._target[n]=a,this._notify(!0);return}if(i<0){this._target[n]=r;return}l=i/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,s)=>{t.push({res:i,rej:s})})}_notify(t){const i=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][i]()}}class A0{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!vt(t))return;const i=Object.keys(Kt.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!vt(r))return;const o={};for(const a of i)o[a]=r[a];(Dt(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,i){const s=i.options,n=nC(t,s);if(!n)return[];const r=this._createAnimations(n,s);return s.$shared&&sC(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,i){const s=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(i),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const h=o[l];if(h.charAt(0)==="$")continue;if(h==="options"){n.push(...this._animateOptions(t,i));continue}const c=i[h];let u=r[h];const d=s.get(h);if(u)if(d&&u.active()){u.update(d,c,a);continue}else u.cancel();if(!d||!d.duration){t[h]=c;continue}r[h]=u=new iC(d,t,h,c),n.push(u)}return n}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const s=this._createAnimations(t,i);if(s.length)return Di.add(this._chart,s),!0}}function sC(e,t){const i=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const r=e[s[n]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function nC(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Kf(e,t){const i=e&&e.options||{},s=i.reverse,n=i.min===void 0?t:0,r=i.max===void 0?t:0;return{start:s?r:n,end:s?n:r}}function rC(e,t,i){if(i===!1)return!1;const s=Kf(e,i),n=Kf(t,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function oC(e){let t,i,s,n;return vt(e)?(t=e.top,i=e.right,s=e.bottom,n=e.left):t=i=s=n=e,{top:t,right:i,bottom:s,left:n,disabled:e===!1}}function C0(e,t){const i=[],s=e._getSortedDatasetMetas(t);let n,r;for(n=0,r=s.length;n<r;++n)i.push(s[n].index);return i}function qf(e,t,i,s={}){const n=e.keys,r=s.mode==="single";let o,a,l,h;if(t!==null){for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===i){if(s.all)continue;break}h=e.values[l],jt(h)&&(r||t===0||bi(t)===bi(h))&&(t+=h)}return t}}function aC(e){const t=Object.keys(e),i=new Array(t.length);let s,n,r;for(s=0,n=t.length;s<n;++s)r=t[s],i[s]={x:r,y:e[r]};return i}function Zf(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function lC(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function hC(e){const{min:t,max:i,minDefined:s,maxDefined:n}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}function cC(e,t,i){const s=e[t]||(e[t]={});return s[i]||(s[i]={})}function Jf(e,t,i,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const r=e[n.index];if(i&&r>0||!i&&r<0)return n.index}return null}function Qf(e,t){const{chart:i,_cachedMeta:s}=e,n=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,h=o.axis,c=lC(r,o,s),u=t.length;let d;for(let f=0;f<u;++f){const p=t[f],{[l]:g,[h]:m}=p,_=p._stacks||(p._stacks={});d=_[h]=cC(n,c,g),d[a]=m,d._top=Jf(d,o,!0,s.type),d._bottom=Jf(d,o,!1,s.type);const b=d._visualValues||(d._visualValues={});b[a]=m}}function lh(e,t){const i=e.scales;return Object.keys(i).filter(s=>i[s].axis===t).shift()}function uC(e,t){return us(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function dC(e,t,i){return us(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function Wn(e,t){const i=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const n of t){const r=n._stacks;if(!r||r[s]===void 0||r[s][i]===void 0)return;delete r[s][i],r[s]._visualValues!==void 0&&r[s]._visualValues[i]!==void 0&&delete r[s]._visualValues[i]}}}const hh=e=>e==="reset"||e==="none",tp=(e,t)=>t?e:Object.assign({},e),fC=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:C0(i,!0),values:null};class ti{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Zf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Wn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,s=this.getDataset(),n=(u,d,f,p)=>u==="x"?d:u==="r"?p:f,r=i.xAxisID=gt(s.xAxisID,lh(t,"x")),o=i.yAxisID=gt(s.yAxisID,lh(t,"y")),a=i.rAxisID=gt(s.rAxisID,lh(t,"r")),l=i.indexAxis,h=i.iAxisID=n(l,r,o,a),c=i.vAxisID=n(l,o,r,a);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(h),i.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ff(this._data,this),t._stacked&&Wn(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),s=this._data;if(vt(i))this._data=aC(i);else if(s!==i){if(s){Ff(s,this);const n=this._cachedMeta;Wn(n),n._parsed=[]}i&&Object.isExtensible(i)&&JT(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const r=i._stacked;i._stacked=Zf(i.vScale,i),i.stack!==s.stack&&(n=!0,Wn(i),i.stack=s.stack),this._resyncElements(t),(n||r!==i._stacked)&&Qf(this,i._parsed)}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:s,_data:n}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&i===n.length?!0:s._sorted,h=t>0&&s._parsed[t-1],c,u,d;if(this._parsing===!1)s._parsed=n,s._sorted=!0,d=n;else{Dt(n[t])?d=this.parseArrayData(s,n,t,i):vt(n[t])?d=this.parseObjectData(s,n,t,i):d=this.parsePrimitiveData(s,n,t,i);const f=()=>u[a]===null||h&&u[a]<h[a];for(c=0;c<i;++c)s._parsed[c+t]=u=d[c],l&&(f()&&(l=!1),h=u);s._sorted=l}o&&Qf(this,d)}parsePrimitiveData(t,i,s,n){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,h=r.getLabels(),c=r===o,u=new Array(n);let d,f,p;for(d=0,f=n;d<f;++d)p=d+s,u[d]={[a]:c||r.parse(h[p],p),[l]:o.parse(i[p],p)};return u}parseArrayData(t,i,s,n){const{xScale:r,yScale:o}=t,a=new Array(n);let l,h,c,u;for(l=0,h=n;l<h;++l)c=l+s,u=i[c],a[l]={x:r.parse(u[0],c),y:o.parse(u[1],c)};return a}parseObjectData(t,i,s,n){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=new Array(n);let c,u,d,f;for(c=0,u=n;c<u;++c)d=c+s,f=i[d],h[c]={x:r.parse(hs(f,a),d),y:o.parse(hs(f,l),d)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,s){const n=this.chart,r=this._cachedMeta,o=i[t.axis],a={keys:C0(n,!0),values:i._stacks[t.axis]._visualValues};return qf(a,o,r.index,{mode:s})}updateRangeFromParsed(t,i,s,n){const r=s[i.axis];let o=r===null?NaN:r;const a=n&&s._stacks[i.axis];n&&a&&(n.values=a,o=qf(n,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,i){const s=this._cachedMeta,n=s._parsed,r=s._sorted&&t===s.iScale,o=n.length,a=this._getOtherScale(t),l=fC(i,s,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=hC(a);let d,f;function p(){f=n[d];const g=f[a.axis];return!jt(f[t.axis])||c>g||u<g}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(h,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(h,t,f,l);break}}return h}getAllParsedValues(t){const i=this._cachedMeta._parsed,s=[];let n,r,o;for(n=0,r=i.length;n<r;++n)o=i[n][t.axis],jt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,s=i.iScale,n=i.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=oC(gt(this.options.clip,rC(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,s=this._cachedMeta,n=s.data||[],r=i.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,h=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(t,r,a,l),c=a;c<a+l;++c){const u=n[c];u.hidden||(u.active&&h?o.push(u):u.draw(t,r))}for(c=0;c<o.length;++c)o[c].draw(t,r)}getStyle(t,i){const s=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,i,s){const n=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=dC(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=n.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=uC(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",s){const n=i==="active",r=this._cachedDataOpts,o=t+"-"+i,a=r[o],l=this.enableOptionSharing&&ke(s);if(a)return tp(a,l);const h=this.chart.config,c=h.datasetElementScopeKeys(this._type,t),u=n?[`${t}Hover`,"hover",t,""]:[t,""],d=h.getOptionScopes(this.getDataset(),c),f=Object.keys(Kt.elements[t]),p=()=>this.getContext(s,n,i),g=h.resolveNamedOptions(d,f,p,u);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(tp(g,l))),g}_resolveAnimations(t,i,s){const n=this.chart,r=this._cachedDataOpts,o=`animation-${i}`,a=r[o];if(a)return a;let l;if(n.options.animation!==!1){const c=this.chart.config,u=c.datasetAnimationScopeKeys(this._type,i),d=c.getOptionScopes(this.getDataset(),u);l=c.createResolver(d,this.getContext(t,s,i))}const h=new A0(n,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||hh(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const s=this.resolveDataElementOptions(t,i),n=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(i,r)||r!==n;return this.updateSharedOptions(r,i,s),{sharedOptions:r,includeOptions:o}}updateElement(t,i,s,n){hh(n)?Object.assign(t,s):this._resolveAnimations(i,n).update(t,s)}updateSharedOptions(t,i,s){t&&!hh(i)&&this._resolveAnimations(void 0,i).update(t,s)}_setStyle(t,i,s,n){t.active=n;const r=this.getStyle(i,n);this._resolveAnimations(i,s,n).update(t,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(t,i,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,i,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,s=this._cachedMeta.data;for(const[a,l,h]of this._syncList)this[a](l,h);this._syncList=[];const n=s.length,r=i.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,t):r<n&&this._removeElements(r,n-r)}_insertElements(t,i,s=!0){const n=this._cachedMeta,r=n.data,o=t+i;let a;const l=h=>{for(h.length+=i,a=h.length-1;a>=o;a--)h[a]=h[a-i]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,i),s&&this.updateElements(r,t,i,"reset")}updateElements(t,i,s,n){}_removeElements(t,i){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(t,i);s._stacked&&Wn(s,n)}s.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,s,n]=t;this[i](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}st(ti,"defaults",{}),st(ti,"datasetElementType",null),st(ti,"dataElementType",null);function pC(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let s=[];for(let n=0,r=i.length;n<r;n++)s=s.concat(i[n].controller.getAllParsedValues(e));e._cache.$bar=r0(s.sort((n,r)=>n-r))}return e._cache.$bar}function gC(e){const t=e.iScale,i=pC(t,e.type);let s=t._length,n,r,o,a;const l=()=>{o===32767||o===-32768||(ke(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(n=0,r=i.length;n<r;++n)o=t.getPixelForValue(i[n]),l();for(a=void 0,n=0,r=t.ticks.length;n<r;++n)o=t.getPixelForTick(n),l();return s}function mC(e,t,i,s){const n=i.barThickness;let r,o;return At(n)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=n*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[e]-r/2}}function _C(e,t,i,s){const n=t.pixels,r=n[e];let o=e>0?n[e-1]:null,a=e<n.length-1?n[e+1]:null;const l=i.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const h=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:i.barPercentage,start:h}}function bC(e,t,i,s){const n=i.parse(e[0],s),r=i.parse(e[1],s),o=Math.min(n,r),a=Math.max(n,r);let l=o,h=a;Math.abs(o)>Math.abs(a)&&(l=a,h=o),t[i.axis]=h,t._custom={barStart:l,barEnd:h,start:n,end:r,min:o,max:a}}function M0(e,t,i,s){return Dt(e)?bC(e,t,i,s):t[i.axis]=i.parse(e,s),t}function ep(e,t,i,s){const n=e.iScale,r=e.vScale,o=n.getLabels(),a=n===r,l=[];let h,c,u,d;for(h=i,c=i+s;h<c;++h)d=t[h],u={},u[n.axis]=a||n.parse(o[h],h),l.push(M0(d,u,r,h));return l}function ch(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function yC(e,t,i){return e!==0?bi(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function xC(e){let t,i,s,n,r;return e.horizontal?(t=e.base>e.x,i="left",s="right"):(t=e.base<e.y,i="bottom",s="top"),t?(n="end",r="start"):(n="start",r="end"),{start:i,end:s,reverse:t,top:n,bottom:r}}function vC(e,t,i,s){let n=t.borderSkipped;const r={};if(!n){e.borderSkipped=r;return}if(n===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:h,bottom:c}=xC(e);n==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===s?n=h:(i._bottom||0)===s?n=c:(r[ip(c,o,a,l)]=!0,n=h)),r[ip(n,o,a,l)]=!0,e.borderSkipped=r}function ip(e,t,i,s){return s?(e=EC(e,t,i),e=sp(e,i,t)):e=sp(e,t,i),e}function EC(e,t,i){return e===t?i:e===i?t:e}function sp(e,t,i){return e==="start"?t:e==="end"?i:e}function wC(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}class Ko extends ti{parsePrimitiveData(t,i,s,n){return ep(t,i,s,n)}parseArrayData(t,i,s,n){return ep(t,i,s,n)}parseObjectData(t,i,s,n){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=r.axis==="x"?a:l,c=o.axis==="x"?a:l,u=[];let d,f,p,g;for(d=s,f=s+n;d<f;++d)g=i[d],p={},p[r.axis]=r.parse(hs(g,h),d),u.push(M0(hs(g,c),p,o,d));return u}updateRangeFromParsed(t,i,s,n){super.updateRangeFromParsed(t,i,s,n);const r=s._custom;r&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:s,vScale:n}=i,r=this.getParsed(t),o=r._custom,a=ch(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,s,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),h=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(i,n);for(let f=i;f<i+s;f++){const p=this.getParsed(f),g=r||At(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,c),_=(p._stacks||{})[a.axis],b={horizontal:h,base:g.base,enableBorderRadius:!_||ch(p._custom)||o===_._top||o===_._bottom,x:h?g.head:m.center,y:h?m.center:g.head,height:h?m.size:Math.abs(g.size),width:h?Math.abs(g.size):m.size};d&&(b.options=u||this.resolveDataElementOptions(f,t[f].active?"active":n));const y=b.options||t[f].options;vC(b,y,_,o),wC(b,y,c.ratio),this.updateElement(t[f],f,b,n)}}_getStacks(t,i){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=s.options.stacked,o=[],a=l=>{const h=l.controller.getParsed(i),c=h&&h[l.vScale.axis];if(At(c)||isNaN(c))return!0};for(const l of n)if(!(i!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,s){const n=this._getStacks(t,s),r=i!==void 0?n.indexOf(i):-1;return r===-1?n.length-1:r}_getRuler(){const t=this.options,i=this._cachedMeta,s=i.iScale,n=[];let r,o;for(r=0,o=i.data.length;r<o;++r)n.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||gC(i),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:s,index:n},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),h=l._custom,c=ch(h);let u=l[i.axis],d=0,f=s?this.applyStack(i,l,s):u,p,g;f!==u&&(d=f-u,f=u),c&&(u=h.barStart,f=h.barEnd-h.barStart,u!==0&&bi(u)!==bi(h.barEnd)&&(d=0),d+=u);const m=!At(r)&&!c?r:d;let _=i.getPixelForValue(m);if(this.chart.getDataVisibility(t)?p=i.getPixelForValue(d+f):p=_,g=p-_,Math.abs(g)<o){g=yC(g,i,a)*o,u===a&&(_-=g/2);const b=i.getPixelForDecimal(0),y=i.getPixelForDecimal(1),E=Math.min(b,y),x=Math.max(b,y);_=Math.max(Math.min(_,x),E),p=_+g,s&&!c&&(l._stacks[i.axis]._visualValues[n]=i.getValueForPixel(p)-i.getValueForPixel(_))}if(_===i.getPixelForValue(a)){const b=bi(g)*i.getLineWidthForValue(a)/2;_+=b,g-=b}return{size:g,base:_,head:p,center:p+g/2}}_calculateBarIndexPixels(t,i){const s=i.scale,n=this.options,r=n.skipNull,o=gt(n.maxBarThickness,1/0);let a,l;if(i.grouped){const h=r?this._getStackCount(t):i.stackCount,c=n.barThickness==="flex"?_C(t,i,n,h):mC(t,i,n,h),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=c.start+c.chunk*u+c.chunk/2,l=Math.min(o,c.chunk*c.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(o,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,i=t.vScale,s=t.data,n=s.length;let r=0;for(;r<n;++r)this.getParsed(r)[i.axis]!==null&&s[r].draw(this._ctx)}}st(Ko,"id","bar"),st(Ko,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),st(Ko,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class qo extends ti{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,s,n){const r=super.parsePrimitiveData(t,i,s,n);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(t,i,s,n){const r=super.parseArrayData(t,i,s,n);for(let o=0;o<r.length;o++){const a=i[s+o];r[o]._custom=gt(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(t,i,s,n){const r=super.parseObjectData(t,i,s,n);for(let o=0;o<r.length;o++){const a=i[s+o];r[o]._custom=gt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let i=0;for(let s=t.length-1;s>=0;--s)i=Math.max(i,t[s].size(this.resolveDataElementOptions(s))/2);return i>0&&i}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=i,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y),h=o._custom;return{label:s[t]||"",value:"("+a+", "+l+(h?", "+h:"")+")"}}update(t){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,s,n){const r=n==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:h}=this._getSharedOptions(i,n),c=o.axis,u=a.axis;for(let d=i;d<i+s;d++){const f=t[d],p=!r&&this.getParsed(d),g={},m=g[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[c]),_=g[u]=r?a.getBasePixel():a.getPixelForValue(p[u]);g.skip=isNaN(m)||isNaN(_),h&&(g.options=l||this.resolveDataElementOptions(d,f.active?"active":n),r&&(g.options.radius=0)),this.updateElement(f,d,g,n)}}resolveDataElementOptions(t,i){const s=this.getParsed(t);let n=super.resolveDataElementOptions(t,i);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return i!=="active"&&(n.radius=0),n.radius+=gt(s&&s._custom,r),n}}st(qo,"id","bubble"),st(qo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),st(qo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function SC(e,t,i){let s=1,n=1,r=0,o=0;if(t<Ot){const a=e,l=a+t,h=Math.cos(a),c=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(y,E,x)=>Pr(y,a,l,!0)?1:Math.max(E,E*i,x,x*i),p=(y,E,x)=>Pr(y,a,l,!0)?-1:Math.min(E,E*i,x,x*i),g=f(0,h,u),m=f(Xt,c,d),_=p(Ft,h,u),b=p(Ft+Xt,c,d);s=(g-_)/2,n=(m-b)/2,r=-(g+_)/2,o=-(m+b)/2}return{ratioX:s,ratioY:n,offsetX:r,offsetY:o}}class Ms extends ti{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let r=l=>+s[l];if(vt(s[t])){const{key:l="value"}=this._parsing;r=h=>+hs(s[h],l)}let o,a;for(o=t,a=t+i;o<a;++o)n._parsed[o]=r(o)}}_getRotation(){return Ke(this.options.rotation-90)}_getCircumference(){return Ke(this.options.circumference)}_getRotationExtents(){let t=Ot,i=-Ot;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,r=n._getRotation(),o=n._getCircumference();t=Math.min(t,r),i=Math.max(i,r+o)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:s}=i,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(NT(this.options.cutout,a),1),h=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=SC(u,c,l),m=(s.width-o)/d,_=(s.height-o)/f,b=Math.max(Math.min(m,_)/2,0),y=t0(this.options.radius,b),E=Math.max(y*l,0),x=(y-E)/this._getVisibleDatasetWeightTotal();this.offsetX=p*y,this.offsetY=g*y,n.total=this.calculateTotal(),this.outerRadius=y-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,i){const s=this.options,n=this._cachedMeta,r=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*r/Ot)}updateElements(t,i,s,n){const r=n==="reset",o=this.chart,a=o.chartArea,h=o.options.animation,c=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=r&&h.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:m}=this._getSharedOptions(i,n);let _=this._getRotation(),b;for(b=0;b<i;++b)_+=this._circumference(b,r);for(b=i;b<i+s;++b){const y=this._circumference(b,r),E=t[b],x={x:c+this.offsetX,y:u+this.offsetY,startAngle:_,endAngle:_+y,circumference:y,outerRadius:p,innerRadius:f};m&&(x.options=g||this.resolveDataElementOptions(b,E.active?"active":n)),_+=y,this.updateElement(E,b,x,n)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let s=0,n;for(n=0;n<i.length;n++){const r=t._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!i[n].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?Ot*(Math.abs(t)/i):0}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=Wr(i._parsed[t],s.options.locale);return{label:n[t]||"",value:r}}getMaxBorderWidth(t){let i=0;const s=this.chart;let n,r,o,a,l;if(!t){for(n=0,r=s.data.datasets.length;n<r;++n)if(s.isDatasetVisible(n)){o=s.getDatasetMeta(n),t=o.data,a=o.controller;break}}if(!t)return 0;for(n=0,r=t.length;n<r;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let s=0,n=t.length;s<n;++s){const r=this.resolveDataElementOptions(s);i=Math.max(i,r.offset||0,r.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(t){return Math.max(gt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}st(Ms,"id","doughnut"),st(Ms,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),st(Ms,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"}),st(Ms,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return i.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,s){s.chart.toggleDataVisibility(i.index),s.chart.update()}}}});class Zo extends ti{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:s,data:n=[],_dataset:r}=i,o=this.chart._animationsDisabled;let{start:a,count:l}=l0(i,n,o);this._drawStart=a,this._drawCount=l,h0(i)&&(a=0,l=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=n;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:h},t),this.updateElements(n,a,l,t)}updateElements(t,i,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,n),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=An(p)?p:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||n==="none",b=i+s,y=t.length;let E=i>0&&this.getParsed(i-1);for(let x=0;x<y;++x){const T=t[x],A=_?T:{};if(x<i||x>=b){A.skip=!0;continue}const C=this.getParsed(x),R=At(C[f]),I=A[d]=o.getPixelForValue(C[d],x),S=A[f]=r||R?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[f],x);A.skip=isNaN(I)||isNaN(S)||R,A.stop=x>0&&Math.abs(C[d]-E[d])>m,g&&(A.parsed=C,A.raw=h.data[x]),u&&(A.options=c||this.resolveDataElementOptions(x,T.active?"active":n)),_||this.updateElement(T,x,A,n),E=C}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,s=i.options&&i.options.borderWidth||0,n=t.data||[];if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}st(Zo,"id","line"),st(Zo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),st(Zo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class gr extends ti{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=Wr(i._parsed[t].r,s.options.locale);return{label:n[t]||"",value:r}}parseObjectData(t,i,s,n){return b0.bind(this)(t,i,s,n)}update(t){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){const t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<i.min&&(i.min=r),r>i.max&&(i.max=r))}),i}_updateRadius(){const t=this.chart,i=t.chartArea,s=t.options,n=Math.min(i.right-i.left,i.bottom-i.top),r=Math.max(n/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,i,s,n){const r=n==="reset",o=this.chart,l=o.options.animation,h=this._cachedMeta.rScale,c=h.xCenter,u=h.yCenter,d=h.getIndexAngle(0)-.5*Ft;let f=d,p;const g=360/this.countVisibleElements();for(p=0;p<i;++p)f+=this._computeAngle(p,n,g);for(p=i;p<i+s;p++){const m=t[p];let _=f,b=f+this._computeAngle(p,n,g),y=o.getDataVisibility(p)?h.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=b,r&&(l.animateScale&&(y=0),l.animateRotate&&(_=b=d));const E={x:c,y:u,innerRadius:0,outerRadius:y,startAngle:_,endAngle:b,options:this.resolveDataElementOptions(p,m.active?"active":n)};this.updateElement(m,p,E,n)}}countVisibleElements(){const t=this._cachedMeta;let i=0;return t.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&i++}),i}_computeAngle(t,i,s){return this.chart.getDataVisibility(t)?Ke(this.resolveDataElementOptions(t,i).angle||s):0}}st(gr,"id","polarArea"),st(gr,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),st(gr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return i.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,s){s.chart.toggleDataVisibility(i.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class fc extends Ms{}st(fc,"id","pie"),st(fc,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Jo extends ti{getLabelAndValue(t){const i=this._cachedMeta.vScale,s=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(s[i.axis])}}parseObjectData(t,i,s,n){return b0.bind(this)(t,i,s,n)}update(t){const i=this._cachedMeta,s=i.dataset,n=i.data||[],r=i.iScale.getLabels();if(s.points=n,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===n.length,options:o};this.updateElement(s,void 0,a,t)}this.updateElements(n,0,n.length,t)}updateElements(t,i,s,n){const r=this._cachedMeta.rScale,o=n==="reset";for(let a=i;a<i+s;a++){const l=t[a],h=this.resolveDataElementOptions(a,l.active?"active":n),c=r.getPointPositionForValue(a,this.getParsed(a).r),u=o?r.xCenter:c.x,d=o?r.yCenter:c.y,f={x:u,y:d,angle:c.angle,skip:isNaN(u)||isNaN(d),options:h};this.updateElement(l,a,f,n)}}}st(Jo,"id","radar"),st(Jo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),st(Jo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Qo extends ti{getLabelAndValue(t){const i=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=i,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:s[t]||"",value:"("+a+", "+l+")"}}update(t){const i=this._cachedMeta,{data:s=[]}=i,n=this.chart._animationsDisabled;let{start:r,count:o}=l0(i,s,n);if(this._drawStart=r,this._drawCount=o,h0(i)&&(r=0,o=s.length),this.options.showLine){const{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:h},t)}this.updateElements(s,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,c=this.resolveDataElementOptions(i,n),u=this.getSharedOptions(c),d=this.includeOptions(n,u),f=o.axis,p=a.axis,{spanGaps:g,segment:m}=this.options,_=An(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||n==="none";let y=i>0&&this.getParsed(i-1);for(let E=i;E<i+s;++E){const x=t[E],T=this.getParsed(E),A=b?x:{},C=At(T[p]),R=A[f]=o.getPixelForValue(T[f],E),I=A[p]=r||C?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[p],E);A.skip=isNaN(R)||isNaN(I)||C,A.stop=E>0&&Math.abs(T[f]-y[f])>_,m&&(A.parsed=T,A.raw=h.data[E]),d&&(A.options=u||this.resolveDataElementOptions(E,x.active?"active":n)),b||this.updateElement(x,E,A,n),y=T}this.updateSharedOptions(u,n,c)}getMaxOverflow(){const t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=t.dataset,n=s.options&&s.options.borderWidth||0;if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}}st(Qo,"id","scatter"),st(Qo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),st(Qo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var TC=Object.freeze({__proto__:null,BarController:Ko,BubbleController:qo,DoughnutController:Ms,LineController:Zo,PolarAreaController:gr,PieController:fc,RadarController:Jo,ScatterController:Qo});function bs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class nu{static override(t){Object.assign(nu.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return bs()}parse(){return bs()}format(){return bs()}add(){return bs()}diff(){return bs()}startOf(){return bs()}endOf(){return bs()}}var AC={_date:nu};function CC(e,t,i,s){const{controller:n,data:r,_sorted:o}=e,a=n._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?qT:Ni;if(s){if(n._sharedOptions){const h=r[0],c=typeof h.getRange=="function"&&h.getRange(t);if(c){const u=l(r,t,i-c),d=l(r,t,i+c);return{lo:u.lo,hi:d.hi}}}}else return l(r,t,i)}return{lo:0,hi:r.length-1}}function jr(e,t,i,s,n){const r=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=r.length;a<l;++a){const{index:h,data:c}=r[a],{lo:u,hi:d}=CC(r[a],t,o,n);for(let f=u;f<=d;++f){const p=c[f];p.skip||s(p,h,f)}}}function MC(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(s,n){const r=t?Math.abs(s.x-n.x):0,o=i?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function uh(e,t,i,s,n){const r=[];return!n&&!e.isPointInArea(t)||jr(e,i,t,function(a,l,h){!n&&!Rr(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:h})},!0),r}function IC(e,t,i,s){let n=[];function r(o,a,l){const{startAngle:h,endAngle:c}=o.getProps(["startAngle","endAngle"],s),{angle:u}=s0(o,{x:t.x,y:t.y});Pr(u,h,c)&&n.push({element:o,datasetIndex:a,index:l})}return jr(e,i,t,r),n}function PC(e,t,i,s,n,r){let o=[];const a=MC(i);let l=Number.POSITIVE_INFINITY;function h(c,u,d){const f=c.inRange(t.x,t.y,n);if(s&&!f)return;const p=c.getCenterPoint(n);if(!(!!r||e.isPointInArea(p))&&!f)return;const m=a(t,p);m<l?(o=[{element:c,datasetIndex:u,index:d}],l=m):m===l&&o.push({element:c,datasetIndex:u,index:d})}return jr(e,i,t,h),o}function dh(e,t,i,s,n,r){return!r&&!e.isPointInArea(t)?[]:i==="r"&&!s?IC(e,t,i,n):PC(e,t,i,s,n,r)}function np(e,t,i,s,n){const r=[],o=i==="x"?"inXRange":"inYRange";let a=!1;return jr(e,i,t,(l,h,c)=>{l[o](t[i],n)&&(r.push({element:l,datasetIndex:h,index:c}),a=a||l.inRange(t.x,t.y,n))}),s&&!a?[]:r}var RC={evaluateInteractionItems:jr,modes:{index(e,t,i,s){const n=Ss(t,e),r=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?uh(e,n,r,s,o):dh(e,n,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const c=a[0].index,u=h.data[c];u&&!u.skip&&l.push({element:u,datasetIndex:h.index,index:c})}),l):[]},dataset(e,t,i,s){const n=Ss(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?uh(e,n,r,s,o):dh(e,n,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,h=e.getDatasetMeta(l).data;a=[];for(let c=0;c<h.length;++c)a.push({element:h[c],datasetIndex:l,index:c})}return a},point(e,t,i,s){const n=Ss(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return uh(e,n,r,s,o)},nearest(e,t,i,s){const n=Ss(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return dh(e,n,r,i.intersect,s,o)},x(e,t,i,s){const n=Ss(t,e);return np(e,n,"x",i.intersect,s)},y(e,t,i,s){const n=Ss(t,e);return np(e,n,"y",i.intersect,s)}}};const I0=["left","top","right","bottom"];function jn(e,t){return e.filter(i=>i.pos===t)}function rp(e,t){return e.filter(i=>I0.indexOf(i.pos)===-1&&i.box.axis===t)}function Xn(e,t){return e.sort((i,s)=>{const n=t?s:i,r=t?i:s;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function DC(e){const t=[];let i,s,n,r,o,a;for(i=0,s=(e||[]).length;i<s;++i)n=e[i],{position:r,options:{stack:o,stackWeight:a=1}}=n,t.push({index:i,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return t}function OC(e){const t={};for(const i of e){const{stack:s,pos:n,stackWeight:r}=i;if(!s||!I0.includes(n))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function kC(e,t){const i=OC(e),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,h=i[a.stack],c=h&&a.stackWeight/h.weight;a.horizontal?(a.width=c?c*s:l&&t.availableWidth,a.height=n):(a.width=s,a.height=c?c*n:l&&t.availableHeight)}return i}function FC(e){const t=DC(e),i=Xn(t.filter(h=>h.box.fullSize),!0),s=Xn(jn(t,"left"),!0),n=Xn(jn(t,"right")),r=Xn(jn(t,"top"),!0),o=Xn(jn(t,"bottom")),a=rp(t,"x"),l=rp(t,"y");return{fullSize:i,leftAndTop:s.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:jn(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function op(e,t,i,s){return Math.max(e[i],t[i])+Math.max(e[s],t[s])}function P0(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function BC(e,t,i,s){const{pos:n,box:r}=i,o=e.maxPadding;if(!vt(n)){i.size&&(e[n]-=i.size);const u=s[i.stack]||{size:0,count:1};u.size=Math.max(u.size,i.horizontal?r.height:r.width),i.size=u.size/u.count,e[n]+=i.size}r.getPadding&&P0(o,r.getPadding());const a=Math.max(0,t.outerWidth-op(o,e,"left","right")),l=Math.max(0,t.outerHeight-op(o,e,"top","bottom")),h=a!==e.w,c=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}function LC(e){const t=e.maxPadding;function i(s){const n=Math.max(t[s]-e[s],0);return e[s]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function NC(e,t){const i=t.maxPadding;function s(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(t[o],i[o])}),r}return s(e?["left","right"]:["top","bottom"])}function ir(e,t,i,s){const n=[];let r,o,a,l,h,c;for(r=0,o=e.length,h=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,NC(a.horizontal,t));const{same:u,other:d}=BC(t,i,a,s);h|=u&&n.length,c=c||d,l.fullSize||n.push(a)}return h&&ir(n,t,i,s)||c}function Po(e,t,i,s,n){e.top=i,e.left=t,e.right=t+s,e.bottom=i+n,e.width=s,e.height=n}function ap(e,t,i,s){const n=i.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,h=s[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/h.weight||1;if(a.horizontal){const u=t.w*c,d=h.size||l.height;ke(h.start)&&(o=h.start),l.fullSize?Po(l,n.left,o,i.outerWidth-n.right-n.left,d):Po(l,t.left+h.placed,o,u,d),h.start=o,h.placed+=u,o=l.bottom}else{const u=t.h*c,d=h.size||l.width;ke(h.start)&&(r=h.start),l.fullSize?Po(l,r,n.top,d,i.outerHeight-n.bottom-n.top):Po(l,r,t.top+h.placed,d,u),h.start=r,h.placed+=u,r=l.right}}t.x=r,t.y=o}var ue={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,s){if(!e)return;const n=fe(e.options.layout.padding),r=Math.max(t-n.width,0),o=Math.max(i-n.height,0),a=FC(e.boxes),l=a.vertical,h=a.horizontal;Ct(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const c=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/c,hBoxMaxHeight:o/2}),d=Object.assign({},n);P0(d,fe(s));const f=Object.assign({maxPadding:d,w:r,h:o,x:n.left,y:n.top},n),p=kC(l.concat(h),u);ir(a.fullSize,f,u,p),ir(l,f,u,p),ir(h,f,u,p)&&ir(l,f,u,p),LC(f),ap(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,ap(a.rightAndBottom,f,u,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Ct(a.chartArea,g=>{const m=g.box;Object.assign(m,e.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class R0{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,s){}removeEventListener(t,i,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,s,n){return i=Math.max(0,i||t.width),s=s||t.height,{width:i,height:Math.max(0,n?Math.floor(i/n):s)}}isAttached(t){return!0}updateConfig(t){}}class UC extends R0{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ta="$chartjs",GC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lp=e=>e===null||e==="";function HC(e,t){const i=e.style,s=e.getAttribute("height"),n=e.getAttribute("width");if(e[ta]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",lp(n)){const r=Wf(e,"width");r!==void 0&&(e.width=r)}if(lp(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=Wf(e,"height");r!==void 0&&(e.height=r)}return e}const D0=VA?{passive:!0}:!1;function zC(e,t,i){e.addEventListener(t,i,D0)}function VC(e,t,i){e.canvas.removeEventListener(t,i,D0)}function WC(e,t){const i=GC[e.type]||e.type,{x:s,y:n}=Ss(e,t);return{type:i,chart:t,native:e,x:s!==void 0?s:null,y:n!==void 0?n:null}}function Oa(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function jC(e,t,i){const s=e.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Oa(a.addedNodes,s),o=o&&!Oa(a.removedNodes,s);o&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}function XC(e,t,i){const s=e.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Oa(a.removedNodes,s),o=o&&!Oa(a.addedNodes,s);o&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}const Or=new Map;let hp=0;function O0(){const e=window.devicePixelRatio;e!==hp&&(hp=e,Or.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function YC(e,t){Or.size||window.addEventListener("resize",O0),Or.set(e,t)}function $C(e){Or.delete(e),Or.size||window.removeEventListener("resize",O0)}function KC(e,t,i){const s=e.canvas,n=s&&su(s);if(!n)return;const r=a0((a,l)=>{const h=n.clientWidth;i(a,l),h<n.clientWidth&&i()},window),o=new ResizeObserver(a=>{const l=a[0],h=l.contentRect.width,c=l.contentRect.height;h===0&&c===0||r(h,c)});return o.observe(n),YC(e,r),o}function fh(e,t,i){i&&i.disconnect(),t==="resize"&&$C(e)}function qC(e,t,i){const s=e.canvas,n=a0(r=>{e.ctx!==null&&i(WC(r,e))},e);return zC(s,t,n),n}class ZC extends R0{acquireContext(t,i){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(HC(t,i),s):null}releaseContext(t){const i=t.canvas;if(!i[ta])return!1;const s=i[ta].initial;["height","width"].forEach(r=>{const o=s[r];At(o)?i.removeAttribute(r):i.setAttribute(r,o)});const n=s.style||{};return Object.keys(n).forEach(r=>{i.style[r]=n[r]}),i.width=i.width,delete i[ta],!0}addEventListener(t,i,s){this.removeEventListener(t,i);const n=t.$proxies||(t.$proxies={}),o={attach:jC,detach:XC,resize:KC}[i]||qC;n[i]=o(t,i,s)}removeEventListener(t,i){const s=t.$proxies||(t.$proxies={}),n=s[i];if(!n)return;({attach:fh,detach:fh,resize:fh}[i]||VC)(t,i,n),s[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,s,n){return zA(t,i,s,n)}isAttached(t){const i=su(t);return!!(i&&i.isConnected)}}function JC(e){return!x0()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?UC:ZC}class ii{constructor(){st(this,"active",!1)}tooltipPosition(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}hasValue(){return An(this.x)&&An(this.y)}getProps(t,i){const s=this.$animations;if(!i||!s)return this;const n={};return t.forEach(r=>{n[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),n}}st(ii,"defaults",{}),st(ii,"defaultRoutes");function QC(e,t){const i=e.options.ticks,s=t2(e),n=Math.min(i.maxTicksLimit||s,s),r=i.major.enabled?i2(t):[],o=r.length,a=r[0],l=r[o-1],h=[];if(o>n)return s2(t,h,r,o/n),h;const c=e2(r,t,n);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Ro(t,h,c,At(f)?0:a-f,a),u=0,d=o-1;u<d;u++)Ro(t,h,c,r[u],r[u+1]);return Ro(t,h,c,l,At(f)?t.length:l+f),h}return Ro(t,h,c),h}function t2(e){const t=e.options.offset,i=e._tickSize(),s=e._length/i+(t?0:1),n=e._maxLength/i;return Math.floor(Math.min(s,n))}function e2(e,t,i){const s=n2(e),n=t.length/i;if(!s)return Math.max(n,1);const r=XT(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>n)return l}return Math.max(n,1)}function i2(e){const t=[];let i,s;for(i=0,s=e.length;i<s;i++)e[i].major&&t.push(i);return t}function s2(e,t,i,s){let n=0,r=i[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),n++,r=i[n*s])}function Ro(e,t,i,s,n){const r=gt(s,0),o=Math.min(gt(n,e.length),e.length);let a=0,l,h,c;for(i=Math.ceil(i),n&&(l=n-s,i=l/Math.floor(l/i)),c=r;c<0;)a++,c=Math.round(r+a*i);for(h=Math.max(r,0);h<o;h++)h===c&&(t.push(e[h]),a++,c=Math.round(r+a*i))}function n2(e){const t=e.length;let i,s;if(t<2)return!1;for(s=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==s)return!1;return s}const r2=e=>e==="left"?"right":e==="right"?"left":e,cp=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,up=(e,t)=>Math.min(t||e,e);function dp(e,t){const i=[],s=e.length/t,n=e.length;let r=0;for(;r<n;r+=s)i.push(e[Math.floor(r)]);return i}function o2(e,t,i){const s=e.ticks.length,n=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(n),h;if(!(i&&(s===1?h=Math.max(l-r,o-l):t===0?h=(e.getPixelForTick(1)-l)/2:h=(l-e.getPixelForTick(n-1))/2,l+=n<t?h:-h,l<r-a||l>o+a)))return l}function a2(e,t){Ct(e,i=>{const s=i.gc,n=s.length/2;let r;if(n>t){for(r=0;r<n;++r)delete i.data[s[r]];s.splice(0,n)}})}function Yn(e){return e.drawTicks?e.tickLength:0}function fp(e,t){if(!e.display)return 0;const i=Qt(e.font,t),s=fe(e.padding);return(Dt(e.text)?e.text.length:1)*i.lineHeight+s.height}function l2(e,t){return us(e,{scale:t,type:"scale"})}function h2(e,t,i){return us(e,{tick:i,index:t,type:"tick"})}function c2(e,t,i){let s=Jc(e);return(i&&t!=="right"||!i&&t==="right")&&(s=r2(s)),s}function u2(e,t,i,s){const{top:n,left:r,bottom:o,right:a,chart:l}=e,{chartArea:h,scales:c}=l;let u=0,d,f,p;const g=o-n,m=a-r;if(e.isHorizontal()){if(f=he(s,r,a),vt(i)){const _=Object.keys(i)[0],b=i[_];p=c[_].getPixelForValue(b)+g-t}else i==="center"?p=(h.bottom+h.top)/2+g-t:p=cp(e,i,t);d=a-r}else{if(vt(i)){const _=Object.keys(i)[0],b=i[_];f=c[_].getPixelForValue(b)-m+t}else i==="center"?f=(h.left+h.right)/2-m+t:f=cp(e,i,t);p=he(s,o,n),u=i==="left"?-Xt:Xt}return{titleX:f,titleY:p,maxWidth:d,rotation:u}}class Vs extends ii{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:s,_suggestedMax:n}=this;return t=Te(t,Number.POSITIVE_INFINITY),i=Te(i,Number.NEGATIVE_INFINITY),s=Te(s,Number.POSITIVE_INFINITY),n=Te(n,Number.NEGATIVE_INFINITY),{min:Te(t,s),max:Te(i,n),minDefined:jt(t),maxDefined:jt(i)}}getMinMax(t){let{min:i,max:s,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:i,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,h=a.length;l<h;++l)o=a[l].controller.getMinMax(this,t),n||(i=Math.min(i,o.min)),r||(s=Math.max(s,o.max));return i=r&&i>s?s:i,s=n&&i>s?i:s,{min:Te(i,Te(s,i)),max:Te(s,Te(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pt(this.options.beforeUpdate,[this])}update(t,i,s){const{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=xA(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?dp(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=QC(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,s;this.isHorizontal()?(i=this.left,s=this.right):(i=this.top,s=this.bottom,t=!t),this._startPixel=i,this._endPixel=s,this._reversePixels=t,this._length=s-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pt(this.options.afterUpdate,[this])}beforeSetDimensions(){Pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Pt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s],r.label=Pt(i.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,s=up(this.ticks.length,t.ticks.maxTicksLimit),n=i.minRotation||0,r=i.maxRotation;let o=n,a,l,h;if(!this._isVisible()||!i.display||n>=r||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,f=ne(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/s:f/(s-1),u+6>a&&(a=f/(s-(t.offset?.5:1)),l=this.maxHeight-Yn(t.grid)-i.padding-fp(t.title,this.chart.options.font),h=Math.sqrt(u*u+d*d),o=qc(Math.min(Math.asin(ne((c.highest.height+6)/a,-1,1)),Math.asin(ne(l/h,-1,1))-Math.asin(ne(d/h,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:s,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=fp(n,i.options.font);if(a?(t.width=this.maxWidth,t.height=Yn(r)+l):(t.height=this.maxHeight,t.width=Yn(r)+l),s.display&&this.ticks.length){const{first:h,last:c,widest:u,highest:d}=this._getLabelSizes(),f=s.padding*2,p=Ke(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){const _=s.mirror?0:m*u.width+g*d.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{const _=s.mirror?0:g*u.width+m*d.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(h,c,m,g)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,s,n){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,h=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?h?(d=n*t.width,f=s*i.height):(d=s*t.height,f=n*i.width):r==="start"?f=i.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=i.width/2),this.paddingLeft=Math.max((d-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let c=i.height/2,u=t.height/2;r==="start"?(c=0,u=t.height):r==="end"&&(c=i.height,u=0),this.paddingTop=c+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,s;for(i=0,s=t.length;i<s;i++)At(t[i].label)&&(t.splice(i,1),s--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let s=this.ticks;i<s.length&&(s=dp(s,i)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,s){const{ctx:n,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(i/up(i,s));let h=0,c=0,u,d,f,p,g,m,_,b,y,E,x;for(u=0;u<i;u+=l){if(p=t[u].label,g=this._resolveTickFontOptions(u),n.font=m=g.string,_=r[m]=r[m]||{data:{},gc:[]},b=g.lineHeight,y=E=0,!At(p)&&!Dt(p))y=Ra(n,_.data,_.gc,y,p),E=b;else if(Dt(p))for(d=0,f=p.length;d<f;++d)x=p[d],!At(x)&&!Dt(x)&&(y=Ra(n,_.data,_.gc,y,x),E+=b);o.push(y),a.push(E),h=Math.max(y,h),c=Math.max(E,c)}a2(r,i);const T=o.indexOf(h),A=a.indexOf(c),C=R=>({width:o[R]||0,height:a[R]||0});return{first:C(0),last:C(i-1),widest:C(T),highest:C(A),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return KT(this._alignToPixels?_s(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const s=i[t];return s.$context||(s.$context=h2(this.getContext(),t,s))}return this.$context||(this.$context=l2(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=Ke(this.labelRotation),s=Math.abs(Math.cos(i)),n=Math.abs(Math.sin(i)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*n?a/s:l/n:l*n<a*s?l/s:a/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,s=this.chart,n=this.options,{grid:r,position:o,border:a}=n,l=r.offset,h=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=Yn(r),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,_=function(B){return _s(s,B,g)};let b,y,E,x,T,A,C,R,I,S,F,O;if(o==="top")b=_(this.bottom),A=this.bottom-d,R=b-m,S=_(t.top)+m,O=t.bottom;else if(o==="bottom")b=_(this.top),S=t.top,O=_(t.bottom)-m,A=b+m,R=this.top+d;else if(o==="left")b=_(this.right),T=this.right-d,C=b-m,I=_(t.left)+m,F=t.right;else if(o==="right")b=_(this.left),I=t.left,F=_(t.right)-m,T=b+m,C=this.left+d;else if(i==="x"){if(o==="center")b=_((t.top+t.bottom)/2+.5);else if(vt(o)){const B=Object.keys(o)[0],P=o[B];b=_(this.chart.scales[B].getPixelForValue(P))}S=t.top,O=t.bottom,A=b+m,R=A+d}else if(i==="y"){if(o==="center")b=_((t.left+t.right)/2);else if(vt(o)){const B=Object.keys(o)[0],P=o[B];b=_(this.chart.scales[B].getPixelForValue(P))}T=b-m,C=T-d,I=t.left,F=t.right}const v=gt(n.ticks.maxTicksLimit,u),w=Math.max(1,Math.ceil(u/v));for(y=0;y<u;y+=w){const B=this.getContext(y),P=r.setContext(B),N=a.setContext(B),k=P.lineWidth,D=P.color,z=N.dash||[],j=N.dashOffset,J=P.tickWidth,H=P.tickColor,L=P.tickBorderDash||[],U=P.tickBorderDashOffset;E=o2(this,y,l),E!==void 0&&(x=_s(s,E,k),h?T=C=I=F=x:A=R=S=O=x,f.push({tx1:T,ty1:A,tx2:C,ty2:R,x1:I,y1:S,x2:F,y2:O,width:k,color:D,borderDash:z,borderDashOffset:j,tickWidth:J,tickColor:H,tickBorderDash:L,tickBorderDashOffset:U}))}return this._ticksLength=u,this._borderValue=b,f}_computeLabelItems(t){const i=this.axis,s=this.options,{position:n,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:h,padding:c,mirror:u}=r,d=Yn(s.grid),f=d+c,p=u?-c:f,g=-Ke(this.labelRotation),m=[];let _,b,y,E,x,T,A,C,R,I,S,F,O="middle";if(n==="top")T=this.bottom-p,A=this._getXAxisLabelAlignment();else if(n==="bottom")T=this.top+p,A=this._getXAxisLabelAlignment();else if(n==="left"){const w=this._getYAxisLabelAlignment(d);A=w.textAlign,x=w.x}else if(n==="right"){const w=this._getYAxisLabelAlignment(d);A=w.textAlign,x=w.x}else if(i==="x"){if(n==="center")T=(t.top+t.bottom)/2+f;else if(vt(n)){const w=Object.keys(n)[0],B=n[w];T=this.chart.scales[w].getPixelForValue(B)+f}A=this._getXAxisLabelAlignment()}else if(i==="y"){if(n==="center")x=(t.left+t.right)/2-f;else if(vt(n)){const w=Object.keys(n)[0],B=n[w];x=this.chart.scales[w].getPixelForValue(B)}A=this._getYAxisLabelAlignment(d).textAlign}i==="y"&&(l==="start"?O="top":l==="end"&&(O="bottom"));const v=this._getLabelSizes();for(_=0,b=a.length;_<b;++_){y=a[_],E=y.label;const w=r.setContext(this.getContext(_));C=this.getPixelForTick(_)+r.labelOffset,R=this._resolveTickFontOptions(_),I=R.lineHeight,S=Dt(E)?E.length:1;const B=S/2,P=w.color,N=w.textStrokeColor,k=w.textStrokeWidth;let D=A;o?(x=C,A==="inner"&&(_===b-1?D=this.options.reverse?"left":"right":_===0?D=this.options.reverse?"right":"left":D="center"),n==="top"?h==="near"||g!==0?F=-S*I+I/2:h==="center"?F=-v.highest.height/2-B*I+I:F=-v.highest.height+I/2:h==="near"||g!==0?F=I/2:h==="center"?F=v.highest.height/2-B*I:F=v.highest.height-S*I,u&&(F*=-1),g!==0&&!w.showLabelBackdrop&&(x+=I/2*Math.sin(g))):(T=C,F=(1-S)*I/2);let z;if(w.showLabelBackdrop){const j=fe(w.backdropPadding),J=v.heights[_],H=v.widths[_];let L=F-j.top,U=0-j.left;switch(O){case"middle":L-=J/2;break;case"bottom":L-=J;break}switch(A){case"center":U-=H/2;break;case"right":U-=H;break}z={left:U,top:L,width:H+j.width,height:J+j.height,color:w.backdropColor}}m.push({label:E,font:R,textOffset:F,options:{rotation:g,color:P,strokeColor:N,strokeWidth:k,textAlign:D,textBaseline:O,translation:[x,T],backdrop:z}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-Ke(this.labelRotation))return t==="top"?"left":"right";let n="center";return i.align==="start"?n="left":i.align==="end"?n="right":i.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:s,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let h,c;return i==="left"?n?(c=this.right+r,s==="near"?h="left":s==="center"?(h="center",c+=l/2):(h="right",c+=l)):(c=this.right-a,s==="near"?h="right":s==="center"?(h="center",c-=l/2):(h="left",c=this.left)):i==="right"?n?(c=this.left+r,s==="near"?h="right":s==="center"?(h="center",c-=l/2):(h="left",c-=l)):(c=this.left+a,s==="near"?h="left":s==="center"?(h="center",c+=l/2):(h="right",c=this.right)):h="right",{textAlign:h,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:s,top:n,width:r,height:o}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(s,n,r,o),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const n=this.ticks.findIndex(r=>r.value===t);return n>=0?i.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const i=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,h,c)=>{!c.width||!c.color||(s.save(),s.lineWidth=c.width,s.strokeStyle=c.color,s.setLineDash(c.borderDash||[]),s.lineDashOffset=c.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(h.x,h.y),s.stroke(),s.restore())};if(i.display)for(r=0,o=n.length;r<o;++r){const l=n[r];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:s,grid:n}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,c,u,d;this.isHorizontal()?(h=_s(t,this.left,o)-o/2,c=_s(t,this.right,a)+a/2,u=d=l):(u=_s(t,this.top,o)-o/2,d=_s(t,this.bottom,a)+a/2,h=c=l),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(h,u),i.lineTo(c,d),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&ll(s,n);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,h=o.label,c=o.textOffset;Us(s,h,0,c,l,a)}n&&hl(s)}drawTitle(){const{ctx:t,options:{position:i,title:s,reverse:n}}=this;if(!s.display)return;const r=Qt(s.font),o=fe(s.padding),a=s.align;let l=r.lineHeight/2;i==="bottom"||i==="center"||vt(i)?(l+=o.bottom,Dt(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:h,titleY:c,maxWidth:u,rotation:d}=u2(this,l,i,a);Us(t,s.text,0,0,r,{color:s.color,maxWidth:u,rotation:d,textAlign:c2(a,i,n),textBaseline:"middle",translation:[h,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,s=gt(t.grid&&t.grid.z,-1),n=gt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Vs.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let r,o;for(r=0,o=i.length;r<o;++r){const a=i[r];a[s]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return Qt(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Do{constructor(t,i,s){this.type=t,this.scope=i,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let s;p2(i)&&(s=this.register(i));const n=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,d2(t,o,s),this.override&&Kt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const i=this.items,s=t.id,n=this.scope;s in i&&delete i[s],n&&s in Kt[n]&&(delete Kt[n][s],this.override&&delete Ns[s])}}function d2(e,t,i){const s=Ir(Object.create(null),[i?Kt.get(i):{},Kt.get(t),e.defaults]);Kt.set(t,s),e.defaultRoutes&&f2(t,e.defaultRoutes),e.descriptors&&Kt.describe(t,e.descriptors)}function f2(e,t){Object.keys(t).forEach(i=>{const s=i.split("."),n=s.pop(),r=[e].concat(s).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");Kt.route(r,n,l,a)})}function p2(e){return"id"in e&&"defaults"in e}class g2{constructor(){this.controllers=new Do(ti,"datasets",!0),this.elements=new Do(ii,"elements"),this.plugins=new Do(Object,"plugins"),this.scales=new Do(Vs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,s){[...i].forEach(n=>{const r=s||this._getRegistryForType(n);s||r.isForType(n)||r===this.plugins&&n.id?this._exec(t,r,n):Ct(n,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,i,s){const n=Kc(t);Pt(s["before"+n],[],s),i[t](s),Pt(s["after"+n],[],s)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const s=this._typedRegistries[i];if(s.isForType(t))return s}return this.plugins}_get(t,i,s){const n=i.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var li=new g2;class m2{constructor(){this._init=[]}notify(t,i,s,n){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,i,s);return i==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,i,s,n){n=n||{};for(const r of t){const o=r.plugin,a=o[s],l=[i,n,r.options];if(Pt(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){At(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const s=t&&t.config,n=gt(s.options&&s.options.plugins,{}),r=_2(s);return n===!1&&!i?[]:y2(t,r,n,i)}_notifyStateChanges(t){const i=this._oldCache||[],s=this._cache,n=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(i,s),t,"stop"),this._notify(n(s,i),t,"start")}}function _2(e){const t={},i=[],s=Object.keys(li.plugins.items);for(let r=0;r<s.length;r++)i.push(li.getPlugin(s[r]));const n=e.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];i.indexOf(o)===-1&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}function b2(e,t){return!t&&e===!1?null:e===!0?{}:e}function y2(e,{plugins:t,localIds:i},s,n){const r=[],o=e.getContext();for(const a of t){const l=a.id,h=b2(s[l],n);h!==null&&r.push({plugin:a,options:x2(e.config,{plugin:a,local:i[l]},h,o)})}return r}function x2(e,{plugin:t,local:i},s,n){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function pc(e,t){const i=Kt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function v2(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function E2(e,t){return e===t?"_index_":"_value_"}function w2(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function ka(e,t){if(e==="x"||e==="y"||e==="r"||(e=t.axis||w2(t.position)||e.length>1&&ka(e[0].toLowerCase(),t),e))return e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function S2(e,t){const i=Ns[e.type]||{scales:{}},s=t.scales||{},n=pc(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!vt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ka(o,a),h=E2(l,n),c=i.scales||{};r[o]=ur(Object.create(null),[{axis:l},a,c[l],c[h]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||pc(a,t),c=(Ns[a]||{}).scales||{};Object.keys(c).forEach(u=>{const d=v2(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),ur(r[f],[{axis:d},s[f],c[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];ur(a,[Kt.scales[a.type],Kt.scale])}),r}function k0(e){const t=e.options||(e.options={});t.plugins=gt(t.plugins,{}),t.scales=S2(e,t)}function F0(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function T2(e){return e=e||{},e.data=F0(e.data),k0(e),e}const pp=new Map,B0=new Set;function Oo(e,t){let i=pp.get(e);return i||(i=t(),pp.set(e,i),B0.add(i)),i}const $n=(e,t,i)=>{const s=hs(t,i);s!==void 0&&e.add(s)};class A2{constructor(t){this._config=T2(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=F0(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),k0(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Oo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Oo(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Oo(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,s=this.type;return Oo(`${s}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const s=this._scopeCache;let n=s.get(t);return(!n||i)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,i,s){const{options:n,type:r}=this,o=this._cachedScopes(t,s),a=o.get(i);if(a)return a;const l=new Set;i.forEach(c=>{t&&(l.add(t),c.forEach(u=>$n(l,t,u))),c.forEach(u=>$n(l,n,u)),c.forEach(u=>$n(l,Ns[r]||{},u)),c.forEach(u=>$n(l,Kt,u)),c.forEach(u=>$n(l,uc,u))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),B0.has(i)&&o.set(i,h),h}chartOptionScopes(){const{options:t,type:i}=this;return[t,Ns[i]||{},Kt.datasets[i]||{},{type:i},Kt,uc]}resolveNamedOptions(t,i,s,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=gp(this._resolverCache,t,n);let l=o;if(M2(o,i)){r.$shared=!1,s=cs(s)?s():s;const h=this.createResolver(t,s,a);l=Cn(o,s,h)}for(const h of i)r[h]=l[h];return r}createResolver(t,i,s=[""],n){const{resolver:r}=gp(this._resolverCache,t,s);return vt(i)?Cn(r,i,void 0,n):r}}function gp(e,t,i){let s=e.get(t);s||(s=new Map,e.set(t,s));const n=i.join();let r=s.get(n);return r||(r={resolver:tu(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,r)),r}const C2=e=>vt(e)&&Object.getOwnPropertyNames(e).reduce((t,i)=>t||cs(e[i]),!1);function M2(e,t){const{isScriptable:i,isIndexable:s}=p0(e);for(const n of t){const r=i(n),o=s(n),a=(o||r)&&e[n];if(r&&(cs(a)||C2(a))||o&&Dt(a))return!0}return!1}var I2="4.2.1";const P2=["top","bottom","left","right","chartArea"];function mp(e,t){return e==="top"||e==="bottom"||P2.indexOf(e)===-1&&t==="x"}function _p(e,t){return function(i,s){return i[e]===s[e]?i[t]-s[t]:i[e]-s[e]}}function bp(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Pt(i&&i.onComplete,[e],t)}function R2(e){const t=e.chart,i=t.options.animation;Pt(i&&i.onProgress,[e],t)}function L0(e){return x0()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ea={},yp=e=>{const t=L0(e);return Object.values(ea).filter(i=>i.canvas===t).pop()};function D2(e,t,i){const s=Object.keys(e);for(const n of s){const r=+n;if(r>=t){const o=e[n];delete e[n],(i>0||r>t)&&(e[r+i]=o)}}}function O2(e,t,i,s){return!i||e.type==="mouseout"?null:s?t:e}function k2(e){const{xScale:t,yScale:i}=e;if(t&&i)return{left:t.left,right:t.right,top:i.top,bottom:i.bottom}}class Xe{static register(...t){li.add(...t),xp()}static unregister(...t){li.remove(...t),xp()}constructor(t,i){const s=this.config=new A2(i),n=L0(t),r=yp(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||JC(n)),this.platform.updateConfig(s);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,h=l&&l.height,c=l&&l.width;if(this.id=LT(),this.ctx=a,this.canvas=l,this.width=c,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new m2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=QT(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],ea[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Di.listen(this,"complete",bp),Di.listen(this,"progress",R2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:s,height:n,_aspectRatio:r}=this;return At(t)?i&&r?r:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return li}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Vf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Gf(this.canvas,this.ctx),this}stop(){return Di.stop(this),this}resize(t,i){Di.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const s=this.options,n=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,i,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Vf(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Pt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Ct(i,(s,n)=>{s.id=n})}buildOrUpdateScales(){const t=this.options,i=t.scales,s=this.scales,n=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];i&&(r=r.concat(Object.keys(i).map(o=>{const a=i[o],l=ka(o,a),h=l==="r",c=l==="x";return{options:a,dposition:h?"chartArea":c?"bottom":"left",dtype:h?"radialLinear":c?"category":"linear"}}))),Ct(r,o=>{const a=o.options,l=a.id,h=ka(l,a),c=gt(a.type,o.dtype);(a.position===void 0||mp(a.position,h)!==mp(o.dposition))&&(a.position=o.dposition),n[l]=!0;let u=null;if(l in s&&s[l].type===c)u=s[l];else{const d=li.getScale(c);u=new d({id:l,type:c,ctx:this.ctx,chart:this}),s[u.id]=u}u.init(a,t)}),Ct(n,(o,a)=>{o||delete s[a]}),Ct(s,o=>{ue.configure(this,o,o.options),ue.addBox(this,o)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,s=t.length;if(t.sort((n,r)=>n.index-r.index),s>i){for(let n=i;n<s;++n)this._destroyDatasetMeta(n);t.splice(i,s-i)}this._sortedMetasets=t.slice(0).sort(_p("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((s,n)=>{i.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=i.length;s<n;s++){const r=i[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||pc(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=li.getController(a),{datasetElementType:h,dataElementType:c}=Kt.datasets[a];Object.assign(l,{dataElementType:li.getElement(c),datasetElementType:h&&li.getElement(h)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ct(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const s=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,c=this.data.datasets.length;h<c;h++){const{controller:u}=this.getDatasetMeta(h),d=!n&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),n||Ct(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(_p("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ct(this.scales,t=>{ue.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Rf(i,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:r}of i){const o=s==="_removeElements"?-r:r;D2(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),n=s(0);for(let r=1;r<i;r++)if(!Rf(n,s(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ue.update(this,this.width,this.height,t);const i=this.chartArea,s=i.width<=0||i.height<=0;this._layers=[],Ct(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,s=this.data.datasets.length;i<s;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,s=this.data.datasets.length;i<s;++i)this._updateDataset(i,cs(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const s=this.getDatasetMeta(t),n={meta:s,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(i),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Di.has(this)?this.attached&&!Di.running(this)&&Di.start(this):(this.draw(),bp({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resize(s,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,s=[];let n,r;for(n=0,r=i.length;n<r;++n){const o=i[n];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,s=t._clip,n=!s.disabled,r=k2(t)||this.chartArea,o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(n&&ll(i,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),t.controller.draw(),n&&hl(i),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Rr(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,s,n){const r=RC.modes[i];return typeof r=="function"?r(this,t,s,n):[]}getDatasetMeta(t){const i=this.data.datasets[t],s=this._metasets;let n=s.filter(r=>r&&r._dataset===i).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=us(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!i.hidden}setDatasetVisibility(t,i){const s=this.getDatasetMeta(t);s.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,s){const n=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,n);ke(i)?(r.data[i].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?n:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Di.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Gf(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete ea[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,s=(r,o)=>{i.addEventListener(this,r,o),t[r]=o},n=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Ct(this.options.events,r=>s(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,s=(l,h)=>{i.addEventListener(this,l,h),t[l]=h},n=(l,h)=>{t[l]&&(i.removeEventListener(this,l,h),delete t[l])},r=(l,h)=>{this.canvas&&this.resize(l,h)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),s("attach",a)},i.isAttached(this.canvas)?a():o()}unbindEvents(){Ct(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Ct(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,s){const n=s?"set":"remove";let r,o,a,l;for(i==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Ma(s,i)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,i))}notifyPlugins(t,i,s){return this._plugins.notify(this,t,i,s)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,s){const n=this.options.hover,r=(l,h)=>l.filter(c=>!h.some(u=>c.datasetIndex===u.datasetIndex&&c.index===u.index)),o=r(i,t),a=s?t:r(t,i);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,i){const s={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const r=this._handleEvent(t,i,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(r||s.changed)&&this.render(),this}_handleEvent(t,i,s){const{_active:n=[],options:r}=this,o=i,a=this._getActiveElements(t,n,s,o),l=VT(t),h=O2(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Pt(r.onHover,[t,a,this],this),l&&Pt(r.onClick,[t,a,this],this));const c=!Ma(a,n);return(c||i)&&(this._active=a,this._updateHoverStyles(a,n,i)),this._lastEvent=h,c}_getActiveElements(t,i,s,n){if(t.type==="mouseout")return[];if(!s)return i;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,n)}}st(Xe,"defaults",Kt),st(Xe,"instances",ea),st(Xe,"overrides",Ns),st(Xe,"registry",li),st(Xe,"version",I2),st(Xe,"getChart",yp);function xp(){return Ct(Xe.instances,e=>e._plugins.invalidate())}function F2(e,t,i){const{startAngle:s,pixelMargin:n,x:r,y:o,outerRadius:a,innerRadius:l}=t;let h=n/a;e.beginPath(),e.arc(r,o,a,s-h,i+h),l>n?(h=n/l,e.arc(r,o,l,i+h,s-h,!0)):e.arc(r,o,n,i+Xt,s-Xt),e.closePath(),e.clip()}function B2(e){return Qc(e,["outerStart","outerEnd","innerStart","innerEnd"])}function L2(e,t,i,s){const n=B2(e.options.borderRadius),r=(i-t)/2,o=Math.min(r,s*t/2),a=l=>{const h=(i-Math.min(r,l))*s/2;return ne(l,0,Math.min(r,h))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:ne(n.innerStart,0,o),innerEnd:ne(n.innerEnd,0,o)}}function Qs(e,t,i,s){return{x:i+e*Math.cos(t),y:s+e*Math.sin(t)}}function Fa(e,t,i,s,n,r){const{x:o,y:a,startAngle:l,pixelMargin:h,innerRadius:c}=t,u=Math.max(t.outerRadius+s+i-h,0),d=c>0?c+s+i+h:0;let f=0;const p=n-l;if(s){const w=c>0?c-s:0,B=u>0?u-s:0,P=(w+B)/2,N=P!==0?p*P/(P+s):p;f=(p-N)/2}const g=Math.max(.001,p*u-i/Ft)/u,m=(p-g)/2,_=l+m+f,b=n-m-f,{outerStart:y,outerEnd:E,innerStart:x,innerEnd:T}=L2(t,d,u,b-_),A=u-y,C=u-E,R=_+y/A,I=b-E/C,S=d+x,F=d+T,O=_+x/S,v=b-T/F;if(e.beginPath(),r){const w=(R+I)/2;if(e.arc(o,a,u,R,w),e.arc(o,a,u,w,I),E>0){const k=Qs(C,I,o,a);e.arc(k.x,k.y,E,I,b+Xt)}const B=Qs(F,b,o,a);if(e.lineTo(B.x,B.y),T>0){const k=Qs(F,v,o,a);e.arc(k.x,k.y,T,b+Xt,v+Math.PI)}const P=(b-T/d+(_+x/d))/2;if(e.arc(o,a,d,b-T/d,P,!0),e.arc(o,a,d,P,_+x/d,!0),x>0){const k=Qs(S,O,o,a);e.arc(k.x,k.y,x,O+Math.PI,_-Xt)}const N=Qs(A,_,o,a);if(e.lineTo(N.x,N.y),y>0){const k=Qs(A,R,o,a);e.arc(k.x,k.y,y,_-Xt,R)}}else{e.moveTo(o,a);const w=Math.cos(R)*u+o,B=Math.sin(R)*u+a;e.lineTo(w,B);const P=Math.cos(I)*u+o,N=Math.sin(I)*u+a;e.lineTo(P,N)}e.closePath()}function N2(e,t,i,s,n){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){Fa(e,t,i,s,l,n);for(let h=0;h<r;++h)e.fill();isNaN(a)||(l=o+(a%Ot||Ot))}return Fa(e,t,i,s,l,n),e.fill(),l}function U2(e,t,i,s,n){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:h,borderJoinStyle:c}=l,u=l.borderAlign==="inner";if(!h)return;u?(e.lineWidth=h*2,e.lineJoin=c||"round"):(e.lineWidth=h,e.lineJoin=c||"bevel");let d=t.endAngle;if(r){Fa(e,t,i,s,d,n);for(let f=0;f<r;++f)e.stroke();isNaN(a)||(d=o+(a%Ot||Ot))}u&&F2(e,t,d),r||(Fa(e,t,i,s,d,n),e.stroke())}class ia extends ii{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,s){const n=this.getProps(["x","y"],s),{angle:r,distance:o}=s0(n,{x:t,y:i}),{startAngle:a,endAngle:l,innerRadius:h,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),d=this.options.spacing/2,p=gt(u,l-a)>=Ot||Pr(r,a,l),g=Li(o,h+d,c+d);return p&&g}getCenterPoint(t){const{x:i,y:s,startAngle:n,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:h}=this.options,c=(n+r)/2,u=(o+a+h+l)/2;return{x:i+Math.cos(c)*u,y:s+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:s}=this,n=(i.offset||0)/4,r=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>Ot?Math.floor(s/Ot):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*n,Math.sin(a)*n);const l=1-Math.sin(Math.min(Ft,s||0)),h=n*l;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,N2(t,this,h,r,o),U2(t,this,h,r,o),t.restore()}}st(ia,"id","arc"),st(ia,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),st(ia,"defaultRoutes",{backgroundColor:"backgroundColor"});function N0(e,t,i=t){e.lineCap=gt(i.borderCapStyle,t.borderCapStyle),e.setLineDash(gt(i.borderDash,t.borderDash)),e.lineDashOffset=gt(i.borderDashOffset,t.borderDashOffset),e.lineJoin=gt(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=gt(i.borderWidth,t.borderWidth),e.strokeStyle=gt(i.borderColor,t.borderColor)}function G2(e,t,i){e.lineTo(i.x,i.y)}function H2(e){return e.stepped?uA:e.tension||e.cubicInterpolationMode==="monotone"?dA:G2}function U0(e,t,i={}){const s=e.length,{start:n=0,end:r=s-1}=i,{start:o,end:a}=t,l=Math.max(n,o),h=Math.min(r,a),c=n<o&&r<o||n>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:h<l&&!c?s+h-l:h-l}}function z2(e,t,i,s){const{points:n,options:r}=t,{count:o,start:a,loop:l,ilen:h}=U0(n,i,s),c=H2(r);let{move:u=!0,reverse:d}=s||{},f,p,g;for(f=0;f<=h;++f)p=n[(a+(d?h-f:f))%o],!p.skip&&(u?(e.moveTo(p.x,p.y),u=!1):c(e,g,p,d,r.stepped),g=p);return l&&(p=n[(a+(d?h:0))%o],c(e,g,p,d,r.stepped)),!!l}function V2(e,t,i,s){const n=t.points,{count:r,start:o,ilen:a}=U0(n,i,s),{move:l=!0,reverse:h}=s||{};let c=0,u=0,d,f,p,g,m,_;const b=E=>(o+(h?a-E:E))%r,y=()=>{g!==m&&(e.lineTo(c,m),e.lineTo(c,g),e.lineTo(c,_))};for(l&&(f=n[b(0)],e.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=n[b(d)],f.skip)continue;const E=f.x,x=f.y,T=E|0;T===p?(x<g?g=x:x>m&&(m=x),c=(u*c+E)/++u):(y(),e.lineTo(E,x),p=T,u=0,g=m=x),_=x}y()}function gc(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?V2:z2}function W2(e){return e.stepped?WA:e.tension||e.cubicInterpolationMode==="monotone"?jA:Ts}function j2(e,t,i,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,i,s)&&n.closePath()),N0(e,t.options),e.stroke(n)}function X2(e,t,i,s){const{segments:n,options:r}=t,o=gc(t);for(const a of n)N0(e,r,a.style),e.beginPath(),o(e,t,a,{start:i,end:i+s-1})&&e.closePath(),e.stroke()}const Y2=typeof Path2D=="function";function $2(e,t,i,s){Y2&&!t.options.segment?j2(e,t,i,s):X2(e,t,i,s)}class Ji extends ii{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;BA(this._points,s,t,n,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ZA(this,this.options.segment))}first(){const t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){const t=this.segments,i=this.points,s=t.length;return s&&i[t[s-1].end]}interpolate(t,i){const s=this.options,n=t[i],r=this.points,o=T0(this,{property:i,start:n,end:n});if(!o.length)return;const a=[],l=W2(s);let h,c;for(h=0,c=o.length;h<c;++h){const{start:u,end:d}=o[h],f=r[u],p=r[d];if(f===p){a.push(f);continue}const g=Math.abs((n-f[i])/(p[i]-f[i])),m=l(f,p,g,s.stepped);m[i]=t[i],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,i,s){return gc(this)(t,this,i,s)}path(t,i,s){const n=this.segments,r=gc(this);let o=this._loop;i=i||0,s=s||this.points.length-i;for(const a of n)o&=r(t,this,a,{start:i,end:i+s-1});return!!o}draw(t,i,s,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),$2(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}st(Ji,"id","line"),st(Ji,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),st(Ji,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),st(Ji,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function vp(e,t,i,s){const n=e.options,{[i]:r}=e.getProps([i],s);return Math.abs(t-r)<n.radius+n.hitRadius}class sa extends ii{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const n=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(i-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,i){return vp(this,t,"x",i)}inYRange(t,i){return vp(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!Rr(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,dc(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}st(sa,"id","point"),st(sa,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),st(sa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function G0(e,t){const{x:i,y:s,base:n,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,h,c,u;return e.horizontal?(u=o/2,a=Math.min(i,n),l=Math.max(i,n),h=s-u,c=s+u):(u=r/2,a=i-u,l=i+u,h=Math.min(s,n),c=Math.max(s,n)),{left:a,top:h,right:l,bottom:c}}function Qi(e,t,i,s){return e?0:ne(t,i,s)}function K2(e,t,i){const s=e.options.borderWidth,n=e.borderSkipped,r=f0(s);return{t:Qi(n.top,r.top,0,i),r:Qi(n.right,r.right,0,t),b:Qi(n.bottom,r.bottom,0,i),l:Qi(n.left,r.left,0,t)}}function q2(e,t,i){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,r=Rs(n),o=Math.min(t,i),a=e.borderSkipped,l=s||vt(n);return{topLeft:Qi(!l||a.top||a.left,r.topLeft,0,o),topRight:Qi(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Qi(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Qi(!l||a.bottom||a.right,r.bottomRight,0,o)}}function Z2(e){const t=G0(e),i=t.right-t.left,s=t.bottom-t.top,n=K2(e,i/2,s/2),r=q2(e,i/2,s/2);return{outer:{x:t.left,y:t.top,w:i,h:s,radius:r},inner:{x:t.left+n.l,y:t.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function ph(e,t,i,s){const n=t===null,r=i===null,a=e&&!(n&&r)&&G0(e,s);return a&&(n||Li(t,a.left,a.right))&&(r||Li(i,a.top,a.bottom))}function J2(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Q2(e,t){e.rect(t.x,t.y,t.w,t.h)}function gh(e,t,i={}){const s=e.x!==i.x?-t:0,n=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-s,o=(e.y+e.h!==i.y+i.h?t:0)-n;return{x:e.x+s,y:e.y+n,w:e.w+r,h:e.h+o,radius:e.radius}}class na extends ii{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:s,backgroundColor:n}}=this,{inner:r,outer:o}=Z2(this),a=J2(o.radius)?Dr:Q2;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,gh(o,i,r)),t.clip(),a(t,gh(r,-i,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,gh(r,i)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,i,s){return ph(this,t,i,s)}inXRange(t,i){return ph(this,t,null,i)}inYRange(t,i){return ph(this,null,t,i)}getCenterPoint(t){const{x:i,y:s,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(i+n)/2:i,y:r?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}st(na,"id","bar"),st(na,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),st(na,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var tM=Object.freeze({__proto__:null,ArcElement:ia,LineElement:Ji,PointElement:sa,BarElement:na});const mc=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Ep=mc.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function H0(e){return mc[e%mc.length]}function z0(e){return Ep[e%Ep.length]}function eM(e,t){return e.borderColor=H0(t),e.backgroundColor=z0(t),++t}function iM(e,t){return e.backgroundColor=e.data.map(()=>H0(t++)),t}function sM(e,t){return e.backgroundColor=e.data.map(()=>z0(t++)),t}function nM(e){let t=0;return(i,s)=>{const n=e.getDatasetMeta(s).controller;n instanceof Ms?t=iM(i,t):n instanceof gr?t=sM(i,t):n&&(t=eM(i,t))}}function wp(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function rM(e){return e&&(e.borderColor||e.backgroundColor)}var oM={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;const{data:{datasets:s},options:n}=e.config,{elements:r}=n;if(!i.forceOverride&&(wp(s)||rM(n)||r&&wp(r)))return;const o=nM(e);s.forEach(o)}};function aM(e,t,i,s,n){const r=n.samples||s;if(r>=i)return e.slice(t,t+i);const o=[],a=(i-2)/(r-2);let l=0;const h=t+i-1;let c=t,u,d,f,p,g;for(o[l++]=e[c],u=0;u<r-2;u++){let m=0,_=0,b;const y=Math.floor((u+1)*a)+1+t,E=Math.min(Math.floor((u+2)*a)+1,i)+t,x=E-y;for(b=y;b<E;b++)m+=e[b].x,_+=e[b].y;m/=x,_/=x;const T=Math.floor(u*a)+1+t,A=Math.min(Math.floor((u+1)*a)+1,i)+t,{x:C,y:R}=e[c];for(f=p=-1,b=T;b<A;b++)p=.5*Math.abs((C-m)*(e[b].y-R)-(C-e[b].x)*(_-R)),p>f&&(f=p,d=e[b],g=b);o[l++]=d,c=g}return o[l++]=e[h],o}function lM(e,t,i,s){let n=0,r=0,o,a,l,h,c,u,d,f,p,g;const m=[],_=t+i-1,b=e[t].x,E=e[_].x-b;for(o=t;o<t+i;++o){a=e[o],l=(a.x-b)/E*s,h=a.y;const x=l|0;if(x===c)h<p?(p=h,u=o):h>g&&(g=h,d=o),n=(r*n+a.x)/++r;else{const T=o-1;if(!At(u)&&!At(d)){const A=Math.min(u,d),C=Math.max(u,d);A!==f&&A!==T&&m.push({...e[A],x:n}),C!==f&&C!==T&&m.push({...e[C],x:n})}o>0&&T!==f&&m.push(e[T]),m.push(a),c=x,r=0,p=g=h,u=d=f=o}}return m}function V0(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Sp(e){e.data.datasets.forEach(t=>{V0(t)})}function hM(e,t){const i=t.length;let s=0,n;const{iScale:r}=e,{min:o,max:a,minDefined:l,maxDefined:h}=r.getUserBounds();return l&&(s=ne(Ni(t,r.axis,o).lo,0,i-1)),h?n=ne(Ni(t,r.axis,a).hi+1,s,i)-s:n=i-s,{start:s,count:n}}var cM={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){Sp(e);return}const s=e.width;e.data.datasets.forEach((n,r)=>{const{_data:o,indexAxis:a}=n,l=e.getDatasetMeta(r),h=o||n.data;if(er([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const c=e.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||e.options.parsing)return;let{start:u,count:d}=hM(l,h);const f=i.threshold||4*s;if(d<=f){V0(n);return}At(o)&&(n._data=h,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(i.algorithm){case"lttb":p=aM(h,u,d,s,i);break;case"min-max":p=lM(h,u,d,s);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}n._decimated=p})},destroy(e){Sp(e)}};function uM(e,t,i){const s=e.segments,n=e.points,r=t.points,o=[];for(const a of s){let{start:l,end:h}=a;h=ru(l,h,n);const c=_c(i,n[l],n[h],a.loop);if(!t.segments){o.push({source:a,target:c,start:n[l],end:n[h]});continue}const u=T0(t,c);for(const d of u){const f=_c(i,r[d.start],r[d.end],d.loop),p=S0(a,n,f);for(const g of p)o.push({source:g,target:d,start:{[i]:Tp(c,f,"start",Math.max)},end:{[i]:Tp(c,f,"end",Math.min)}})}}return o}function _c(e,t,i,s){if(s)return;let n=t[e],r=i[e];return e==="angle"&&(n=Ce(n),r=Ce(r)),{property:e,start:n,end:r}}function dM(e,t){const{x:i=null,y:s=null}=e||{},n=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=ru(o,a,n);const l=n[o],h=n[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:h.x,y:s})):i!==null&&(r.push({x:i,y:l.y}),r.push({x:i,y:h.y}))}),r}function ru(e,t,i){for(;t>e;t--){const s=i[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function Tp(e,t,i,s){return e&&t?s(e[i],t[i]):e?e[i]:t?t[i]:0}function W0(e,t){let i=[],s=!1;return Dt(e)?(s=!0,i=e):i=dM(e,t),i.length?new Ji({points:i,options:{tension:0},_loop:s,_fullLoop:s}):null}function Ap(e){return e&&e.fill!==!1}function fM(e,t,i){let n=e[t].fill;const r=[t];let o;if(!i)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!jt(n))return n;if(o=e[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function pM(e,t,i){const s=bM(e);if(vt(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return jt(n)&&Math.floor(n)===n?gM(s[0],t,n,i):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function gM(e,t,i,s){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=s?!1:i}function mM(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:vt(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function _M(e,t,i){let s;return e==="start"?s=i:e==="end"?s=t.options.reverse?t.min:t.max:vt(e)?s=e.value:s=t.getBaseValue(),s}function bM(e){const t=e.options,i=t.fill;let s=gt(i&&i.target,i);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function yM(e){const{scale:t,index:i,line:s}=e,n=[],r=s.segments,o=s.points,a=xM(t,i);a.push(W0({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const h=r[l];for(let c=h.start;c<=h.end;c++)vM(n,o[c],a)}return new Ji({points:n,options:{}})}function xM(e,t){const i=[],s=e.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const r=s[n];if(r.index===t)break;r.hidden||i.unshift(r.dataset)}return i}function vM(e,t,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n],{first:o,last:a,point:l}=EM(r,t,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(e.push(l),!a)break}}e.push(...s)}function EM(e,t,i){const s=e.interpolate(t,i);if(!s)return{};const n=s[i],r=e.segments,o=e.points;let a=!1,l=!1;for(let h=0;h<r.length;h++){const c=r[h],u=o[c.start][i],d=o[c.end][i];if(Li(n,u,d)){a=n===u,l=n===d;break}}return{first:a,last:l,point:s}}class j0{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,s){const{x:n,y:r,radius:o}=this;return i=i||{start:0,end:Ot},t.arc(n,r,o,i.end,i.start,!0),!s.bounds}interpolate(t){const{x:i,y:s,radius:n}=this,r=t.angle;return{x:i+Math.cos(r)*n,y:s+Math.sin(r)*n,angle:r}}}function wM(e){const{chart:t,fill:i,line:s}=e;if(jt(i))return SM(t,i);if(i==="stack")return yM(e);if(i==="shape")return!0;const n=TM(e);return n instanceof j0?n:W0(n,s)}function SM(e,t){const i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function TM(e){return(e.scale||{}).getPointPositionForValue?CM(e):AM(e)}function AM(e){const{scale:t={},fill:i}=e,s=mM(i,t);if(jt(s)){const n=t.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function CM(e){const{scale:t,fill:i}=e,s=t.options,n=t.getLabels().length,r=s.reverse?t.max:t.min,o=_M(i,t,r),a=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,r);return new j0({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(t.getPointPositionForValue(l,o));return a}function mh(e,t,i){const s=wM(t),{line:n,scale:r,axis:o}=t,a=n.options,l=a.fill,h=a.backgroundColor,{above:c=h,below:u=h}=l||{};s&&n.points.length&&(ll(e,i),MM(e,{line:n,target:s,above:c,below:u,area:i,scale:r,axis:o}),hl(e))}function MM(e,t){const{line:i,target:s,above:n,below:r,area:o,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),l==="x"&&r!==n&&(Cp(e,s,o.top),Mp(e,{line:i,target:s,color:n,scale:a,property:l}),e.restore(),e.save(),Cp(e,s,o.bottom)),Mp(e,{line:i,target:s,color:r,scale:a,property:l}),e.restore()}function Cp(e,t,i){const{segments:s,points:n}=t;let r=!0,o=!1;e.beginPath();for(const a of s){const{start:l,end:h}=a,c=n[l],u=n[ru(l,h,n)];r?(e.moveTo(c.x,c.y),r=!1):(e.lineTo(c.x,i),e.lineTo(c.x,c.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(u.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Mp(e,t){const{line:i,target:s,property:n,color:r,scale:o}=t,a=uM(i,s,n);for(const{source:l,target:h,start:c,end:u}of a){const{style:{backgroundColor:d=r}={}}=l,f=s!==!0;e.save(),e.fillStyle=d,IM(e,o,f&&_c(n,c,u)),e.beginPath();const p=!!i.pathSegment(e,l);let g;if(f){p?e.closePath():Ip(e,s,u,n);const m=!!s.pathSegment(e,h,{move:p,reverse:!0});g=p&&m,g||Ip(e,s,c,n)}e.closePath(),e.fill(g?"evenodd":"nonzero"),e.restore()}}function IM(e,t,i){const{top:s,bottom:n}=t.chart.chartArea,{property:r,start:o,end:a}=i||{};r==="x"&&(e.beginPath(),e.rect(o,s,a-o,n-s),e.clip())}function Ip(e,t,i,s){const n=t.interpolate(i,s);n&&e.lineTo(n.x,n.y)}var PM={id:"filler",afterDatasetsUpdate(e,t,i){const s=(e.data.datasets||[]).length,n=[];let r,o,a,l;for(o=0;o<s;++o)r=e.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Ji&&(l={visible:e.isDatasetVisible(o),index:o,fill:pM(a,o,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,n.push(l);for(o=0;o<s;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=fM(n,o,i.propagate))},beforeDraw(e,t,i){const s=i.drawTime==="beforeDraw",n=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=n.length-1;o>=0;--o){const a=n[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&mh(e.ctx,a,r))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const r=s[n].$filler;Ap(r)&&mh(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,i){const s=t.meta.$filler;!Ap(s)||i.drawTime!=="beforeDatasetDraw"||mh(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Pp=(e,t)=>{let{boxHeight:i=t,boxWidth:s=t}=e;return e.usePointStyle&&(i=Math.min(i,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(t,i)}},RM=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Rp extends ii{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,s){this.maxWidth=t,this.maxHeight=i,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=Pt(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(s=>t.filter(s,this.chart.data))),t.sort&&(i=i.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,n=Qt(s.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Pp(s,r);let h,c;i.font=n.string,this.isHorizontal()?(h=this.maxWidth,c=this._fitRows(o,r,a,l)+10):(c=this.maxHeight,h=this._fitCols(o,n,a,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,i,s,n){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],c=n+a;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-c;return this.legendItems.forEach((p,g)=>{const m=s+i/2+r.measureText(p.text).width;(g===0||h[h.length-1]+m+2*a>o)&&(u+=c,h[h.length-(g>0?0:1)]=0,f+=c,d++),l[g]={left:0,top:f,row:d,width:m,height:n},h[h.length-1]+=m+a}),u}_fitCols(t,i,s,n){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],c=o-t;let u=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((m,_)=>{const{itemWidth:b,itemHeight:y}=DM(s,i,r,m,n);_>0&&f+y+2*a>c&&(u+=d+a,h.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[_]={left:p,top:f,col:g,width:b,height:y},d=Math.max(d,b),f+=y+a}),u+=d,h.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:s,labels:{padding:n},rtl:r}}=this,o=xn(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=he(s,this.left+n,this.right-this.lineWidths[a]);for(const h of i)a!==h.row&&(a=h.row,l=he(s,this.left+n,this.right-this.lineWidths[a])),h.top+=this.top+t+n,h.left=o.leftForLtr(o.x(l),h.width),l+=h.width+n}else{let a=0,l=he(s,this.top+t+n,this.bottom-this.columnSizes[a].height);for(const h of i)h.col!==a&&(a=h.col,l=he(s,this.top+t+n,this.bottom-this.columnSizes[a].height)),h.top=l,h.left+=this.left+n,h.left=o.leftForLtr(o.x(h.left),h.width),l+=h.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ll(t,this),this._draw(),hl(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:s,ctx:n}=this,{align:r,labels:o}=t,a=Kt.color,l=xn(t.rtl,this.left,this.width),h=Qt(o.font),{padding:c}=o,u=h.size,d=u/2;let f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=Pp(o,u),_=function(T,A,C){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();const R=gt(C.lineWidth,1);if(n.fillStyle=gt(C.fillStyle,a),n.lineCap=gt(C.lineCap,"butt"),n.lineDashOffset=gt(C.lineDashOffset,0),n.lineJoin=gt(C.lineJoin,"miter"),n.lineWidth=R,n.strokeStyle=gt(C.strokeStyle,a),n.setLineDash(gt(C.lineDash,[])),o.usePointStyle){const I={radius:g*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:R},S=l.xPlus(T,p/2),F=A+d;d0(n,I,S,F,o.pointStyleWidth&&p)}else{const I=A+Math.max((u-g)/2,0),S=l.leftForLtr(T,p),F=Rs(C.borderRadius);n.beginPath(),Object.values(F).some(O=>O!==0)?Dr(n,{x:S,y:I,w:p,h:g,radius:F}):n.rect(S,I,p,g),n.fill(),R!==0&&n.stroke()}n.restore()},b=function(T,A,C){Us(n,C.text,T,A+m/2,h,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},y=this.isHorizontal(),E=this._computeTitleHeight();y?f={x:he(r,this.left+c,this.right-s[0]),y:this.top+c+E,line:0}:f={x:this.left+c,y:he(r,this.top+E+c,this.bottom-i[0].height),line:0},v0(this.ctx,t.textDirection);const x=m+c;this.legendItems.forEach((T,A)=>{n.strokeStyle=T.fontColor,n.fillStyle=T.fontColor;const C=n.measureText(T.text).width,R=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),I=p+d+C;let S=f.x,F=f.y;l.setWidth(this.width),y?A>0&&S+I+c>this.right&&(F=f.y+=x,f.line++,S=f.x=he(r,this.left+c,this.right-s[f.line])):A>0&&F+x>this.bottom&&(S=f.x=S+i[f.line].width+c,f.line++,F=f.y=he(r,this.top+E+c,this.bottom-i[f.line].height));const O=l.x(S);if(_(O,F,T),S=tA(R,S+p+d,y?S+I:this.right,t.rtl),b(l.x(S),F,T),y)f.x+=I+c;else if(typeof T.text!="string"){const v=h.lineHeight;f.y+=X0(T,v)}else f.y+=x}),E0(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,s=Qt(i.font),n=fe(i.padding);if(!i.display)return;const r=xn(t.rtl,this.left,this.width),o=this.ctx,a=i.position,l=s.size/2,h=n.top+l;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+h,u=he(t.align,u,this.right-d);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);c=h+he(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=he(a,u,u+d);o.textAlign=r.textAlign(Jc(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=s.string,Us(o,i.text,f,c,s)}_computeTitleHeight(){const t=this.options.title,i=Qt(t.font),s=fe(t.padding);return t.display?i.lineHeight+s.height:0}_getLegendItemAt(t,i){let s,n,r;if(Li(t,this.left,this.right)&&Li(i,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(n=r[s],Li(t,n.left,n.left+n.width)&&Li(i,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){const i=this.options;if(!FM(t.type,i))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,r=RM(n,s);n&&!r&&Pt(i.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!r&&Pt(i.onHover,[t,s,this],this)}else s&&Pt(i.onClick,[t,s,this],this)}}function DM(e,t,i,s,n){const r=OM(s,e,t,i),o=kM(n,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function OM(e,t,i,s){let n=e.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),t+i.size/2+s.measureText(n).width}function kM(e,t,i){let s=e;return typeof t.text!="string"&&(s=X0(t,i)),s}function X0(e,t){const i=e.text?e.text.length+.5:0;return t*i}function FM(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var BM={id:"legend",_element:Rp,start(e,t,i){const s=e.legend=new Rp({ctx:e.ctx,options:i,chart:e});ue.configure(e,s,i),ue.addBox(e,s)},stop(e){ue.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const s=e.legend;ue.configure(e,s,i),s.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const s=t.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(i?0:void 0),c=fe(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:h.borderColor,pointStyle:s||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:o&&(a||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};let ou=class extends ii{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;const n=Dt(s.text)?s.text.length:1;this._padding=fe(s.padding);const r=n*Qt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:i,left:s,bottom:n,right:r,options:o}=this,a=o.align;let l=0,h,c,u;return this.isHorizontal()?(c=he(a,s,r),u=i+t,h=r-s):(o.position==="left"?(c=s+t,u=he(a,n,i),l=Ft*-.5):(c=r-t,u=he(a,i,n),l=Ft*.5),h=n-i),{titleX:c,titleY:u,maxWidth:h,rotation:l}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const s=Qt(i.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:h}=this._drawArgs(r);Us(t,i.text,0,0,s,{color:i.color,maxWidth:l,rotation:h,textAlign:Jc(i.align),textBaseline:"middle",translation:[o,a]})}};function LM(e,t){const i=new ou({ctx:e.ctx,options:t,chart:e});ue.configure(e,i,t),ue.addBox(e,i),e.titleBlock=i}var NM={id:"title",_element:ou,start(e,t,i){LM(e,i)},stop(e){const t=e.titleBlock;ue.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const s=e.titleBlock;ue.configure(e,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ko=new WeakMap;var UM={id:"subtitle",start(e,t,i){const s=new ou({ctx:e.ctx,options:i,chart:e});ue.configure(e,s,i),ue.addBox(e,s),ko.set(e,s)},stop(e){ue.removeBox(e,ko.get(e)),ko.delete(e)},beforeUpdate(e,t,i){const s=ko.get(e);ue.configure(e,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sr={average(e){if(!e.length)return!1;let t,i,s=0,n=0,r=0;for(t=0,i=e.length;t<i;++t){const o=e[t].element;if(o&&o.hasValue()){const a=o.tooltipPosition();s+=a.x,n+=a.y,++r}}return{x:s/r,y:n/r}},nearest(e,t){if(!e.length)return!1;let i=t.x,s=t.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),c=cc(t,h);c<n&&(n=c,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,s=l.y}return{x:i,y:s}}};function ai(e,t){return t&&(Dt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Oi(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function GM(e,t){const{element:i,datasetIndex:s,index:n}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:e,label:o,parsed:r.getParsed(n),raw:e.data.datasets[s].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function Dp(e,t){const i=e.chart.ctx,{body:s,footer:n,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Qt(t.bodyFont),h=Qt(t.titleFont),c=Qt(t.footerFont),u=r.length,d=n.length,f=s.length,p=fe(t.padding);let g=p.height,m=0,_=s.reduce((E,x)=>E+x.before.length+x.lines.length+x.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,u&&(g+=u*h.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_){const E=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*E+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*c.lineHeight+(d-1)*t.footerSpacing);let b=0;const y=function(E){m=Math.max(m,i.measureText(E).width+b)};return i.save(),i.font=h.string,Ct(e.title,y),i.font=l.string,Ct(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?o+2+t.boxPadding:0,Ct(s,E=>{Ct(E.before,y),Ct(E.lines,y),Ct(E.after,y)}),b=0,i.font=c.string,Ct(e.footer,y),i.restore(),m+=p.width,{width:m,height:g}}function HM(e,t){const{y:i,height:s}=t;return i<s/2?"top":i>e.height-s/2?"bottom":"center"}function zM(e,t,i,s){const{x:n,width:r}=s,o=i.caretSize+i.caretPadding;if(e==="left"&&n+r+o>t.width||e==="right"&&n-r-o<0)return!0}function VM(e,t,i,s){const{x:n,width:r}=i,{width:o,chartArea:{left:a,right:l}}=e;let h="center";return s==="center"?h=n<=(a+l)/2?"left":"right":n<=r/2?h="left":n>=o-r/2&&(h="right"),zM(h,e,t,i)&&(h="center"),h}function Op(e,t,i){const s=i.yAlign||t.yAlign||HM(e,i);return{xAlign:i.xAlign||t.xAlign||VM(e,t,i,s),yAlign:s}}function WM(e,t){let{x:i,width:s}=e;return t==="right"?i-=s:t==="center"&&(i-=s/2),i}function jM(e,t,i){let{y:s,height:n}=e;return t==="top"?s+=i:t==="bottom"?s-=n+i:s-=n/2,s}function kp(e,t,i,s){const{caretSize:n,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,h=n+r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=Rs(o);let p=WM(t,a);const g=jM(t,l,h);return l==="center"?a==="left"?p+=h:a==="right"&&(p-=h):a==="left"?p-=Math.max(c,d)+n:a==="right"&&(p+=Math.max(u,f)+n),{x:ne(p,0,s.width-t.width),y:ne(g,0,s.height-t.height)}}function Fo(e,t,i){const s=fe(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function Fp(e){return ai([],Oi(e))}function XM(e,t,i){return us(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function Bp(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const Y0={beforeTitle:Pi,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,s=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return i[t.dataIndex]}return""},afterTitle:Pi,beforeBody:Pi,beforeLabel:Pi,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return At(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Pi,afterBody:Pi,beforeFooter:Pi,footer:Pi,afterFooter:Pi};function _e(e,t,i,s){const n=e[t].call(i,s);return typeof n>"u"?Y0[t].call(i,s):n}class bc extends ii{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&i.options.animation&&s.animations,r=new A0(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=XM(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:s}=i,n=_e(s,"beforeTitle",this,t),r=_e(s,"title",this,t),o=_e(s,"afterTitle",this,t);let a=[];return a=ai(a,Oi(n)),a=ai(a,Oi(r)),a=ai(a,Oi(o)),a}getBeforeBody(t,i){return Fp(_e(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:s}=i,n=[];return Ct(t,r=>{const o={before:[],lines:[],after:[]},a=Bp(s,r);ai(o.before,Oi(_e(a,"beforeLabel",this,r))),ai(o.lines,_e(a,"label",this,r)),ai(o.after,Oi(_e(a,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(t,i){return Fp(_e(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:s}=i,n=_e(s,"beforeFooter",this,t),r=_e(s,"footer",this,t),o=_e(s,"afterFooter",this,t);let a=[];return a=ai(a,Oi(n)),a=ai(a,Oi(r)),a=ai(a,Oi(o)),a}_createItems(t){const i=this._active,s=this.chart.data,n=[],r=[],o=[];let a=[],l,h;for(l=0,h=i.length;l<h;++l)a.push(GM(this.chart,i[l]));return t.filter&&(a=a.filter((c,u,d)=>t.filter(c,u,d,s))),t.itemSort&&(a=a.sort((c,u)=>t.itemSort(c,u,s))),Ct(a,c=>{const u=Bp(t.callbacks,c);n.push(_e(u,"labelColor",this,c)),r.push(_e(u,"labelPointStyle",this,c)),o.push(_e(u,"labelTextColor",this,c))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,i){const s=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const a=sr[s.position].call(this,n,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=Dp(this,s),h=Object.assign({},a,l),c=Op(this.chart,s,h),u=kp(s,h,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,s,n){const r=this.getCaretPosition(t,s,n);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(t,i,s){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:h,bottomLeft:c,bottomRight:u}=Rs(a),{x:d,y:f}=t,{width:p,height:g}=i;let m,_,b,y,E,x;return r==="center"?(E=f+g/2,n==="left"?(m=d,_=m-o,y=E+o,x=E-o):(m=d+p,_=m+o,y=E-o,x=E+o),b=m):(n==="left"?_=d+Math.max(l,c)+o:n==="right"?_=d+p-Math.max(h,u)-o:_=this.caretX,r==="top"?(y=f,E=y-o,m=_-o,b=_+o):(y=f+g,E=y+o,m=_+o,b=_-o),x=y),{x1:m,x2:_,x3:b,y1:y,y2:E,y3:x}}drawTitle(t,i,s){const n=this.title,r=n.length;let o,a,l;if(r){const h=xn(s.rtl,this.x,this.width);for(t.x=Fo(this,s.titleAlign,s),i.textAlign=h.textAlign(s.titleAlign),i.textBaseline="middle",o=Qt(s.titleFont),a=s.titleSpacing,i.fillStyle=s.titleColor,i.font=o.string,l=0;l<r;++l)i.fillText(n[l],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,i,s,n,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:h,boxPadding:c}=r,u=Qt(r.bodyFont),d=Fo(this,"left",r),f=n.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,g=i.y+p;if(r.usePointStyle){const m={radius:Math.min(h,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=n.leftForLtr(f,h)+h/2,b=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,dc(t,m,_,b),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,dc(t,m,_,b)}else{t.lineWidth=vt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=n.leftForLtr(f,h-c),_=n.leftForLtr(n.xPlus(f,1),h-c-2),b=Rs(o.borderRadius);Object.values(b).some(y=>y!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Dr(t,{x:m,y:g,w:h,h:l,radius:b}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Dr(t,{x:_,y:g+1,w:h-2,h:l-2,radius:b}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,h,l),t.strokeRect(m,g,h,l),t.fillStyle=o.backgroundColor,t.fillRect(_,g+1,h-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,i,s){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:h,boxPadding:c}=s,u=Qt(s.bodyFont);let d=u.lineHeight,f=0;const p=xn(s.rtl,this.x,this.width),g=function(C){i.fillText(C,p.x(t.x+f),t.y+d/2),t.y+=d+r},m=p.textAlign(o);let _,b,y,E,x,T,A;for(i.textAlign=o,i.textBaseline="middle",i.font=u.string,t.x=Fo(this,m,s),i.fillStyle=s.bodyColor,Ct(this.beforeBody,g),f=a&&m!=="right"?o==="center"?h/2+c:h+2+c:0,E=0,T=n.length;E<T;++E){for(_=n[E],b=this.labelTextColors[E],i.fillStyle=b,Ct(_.before,g),y=_.lines,a&&y.length&&(this._drawColorBox(i,t,E,p,s),d=Math.max(u.lineHeight,l)),x=0,A=y.length;x<A;++x)g(y[x]),d=u.lineHeight;Ct(_.after,g)}f=0,d=u.lineHeight,Ct(this.afterBody,g),t.y-=r}drawFooter(t,i,s){const n=this.footer,r=n.length;let o,a;if(r){const l=xn(s.rtl,this.x,this.width);for(t.x=Fo(this,s.footerAlign,s),t.y+=s.footerMarginTop,i.textAlign=l.textAlign(s.footerAlign),i.textBaseline="middle",o=Qt(s.footerFont),i.fillStyle=s.footerColor,i.font=o.string,a=0;a<r;++a)i.fillText(n[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,i,s,n){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:h,height:c}=s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Rs(n.cornerRadius);i.fillStyle=n.backgroundColor,i.strokeStyle=n.borderColor,i.lineWidth=n.borderWidth,i.beginPath(),i.moveTo(a+u,l),o==="top"&&this.drawCaret(t,i,s,n),i.lineTo(a+h-d,l),i.quadraticCurveTo(a+h,l,a+h,l+d),o==="center"&&r==="right"&&this.drawCaret(t,i,s,n),i.lineTo(a+h,l+c-p),i.quadraticCurveTo(a+h,l+c,a+h-p,l+c),o==="bottom"&&this.drawCaret(t,i,s,n),i.lineTo(a+f,l+c),i.quadraticCurveTo(a,l+c,a,l+c-f),o==="center"&&r==="left"&&this.drawCaret(t,i,s,n),i.lineTo(a,l+u),i.quadraticCurveTo(a,l,a+u,l),i.closePath(),i.fill(),n.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,s=this.$animations,n=s&&s.x,r=s&&s.y;if(n||r){const o=sr[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Dp(this,t),l=Object.assign({},o,this._size),h=Op(i,t,l),c=kp(t,l,h,i);(n._to!==c.x||r._to!==c.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(i);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=fe(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,n,i),v0(t,i.textDirection),r.y+=o.top,this.drawTitle(r,t,i),this.drawBody(r,t,i),this.drawFooter(r,t,i),E0(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const s=this._active,n=t.map(({datasetIndex:a,index:l})=>{const h=this.chart.getDatasetMeta(a);if(!h)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:h.data[l],index:l}}),r=!Ma(s,n),o=this._positionChanged(n,i);(r||o)&&(this._active=n,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(t,r,i,s),a=this._positionChanged(o,t),l=i||!Ma(o,r)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,s,n){const r=this.options;if(t.type==="mouseout")return[];if(!n)return i;const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,i){const{caretX:s,caretY:n,options:r}=this,o=sr[r.position].call(this,t,i);return o!==!1&&(s!==o.x||n!==o.y)}}st(bc,"positioners",sr);var YM={id:"tooltip",_element:bc,positioners:sr,afterInit(e,t,i){i&&(e.tooltip=new bc({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Y0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},$M=Object.freeze({__proto__:null,Colors:oM,Decimation:cM,Filler:PM,Legend:BM,SubTitle:UM,Title:NM,Tooltip:YM});const KM=(e,t,i,s)=>(typeof t=="string"?(i=e.push(t)-1,s.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function qM(e,t,i,s){const n=e.indexOf(t);if(n===-1)return KM(e,t,i,s);const r=e.lastIndexOf(t);return n!==r?i:n}const ZM=(e,t)=>e===null?null:ne(Math.round(e),0,t);function Lp(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class yc extends Vs{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const s=this.getLabels();for(const{index:n,label:r}of i)s[n]===r&&s.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(At(t))return null;const s=this.getLabels();return i=isFinite(i)&&s[i]===t?i:qM(s,t,gt(i,t),this._addedLabels),ZM(i,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),i||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const t=this.min,i=this.max,s=this.options.offset,n=[];let r=this.getLabels();r=t===0&&i===r.length-1?r:r.slice(t,i+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=i;o++)n.push({value:o});return n}getLabelForValue(t){return Lp.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}st(yc,"id","category"),st(yc,"defaults",{ticks:{callback:Lp}});function JM(e,t){const i=[],{bounds:n,step:r,min:o,max:a,precision:l,count:h,maxTicks:c,maxDigits:u,includeBounds:d}=e,f=r||1,p=c-1,{min:g,max:m}=t,_=!At(o),b=!At(a),y=!At(h),E=(m-g)/(u+1);let x=Of((m-g)/p/f)*f,T,A,C,R;if(x<1e-14&&!_&&!b)return[{value:g},{value:m}];R=Math.ceil(m/x)-Math.floor(g/x),R>p&&(x=Of(R*x/p/f)*f),At(l)||(T=Math.pow(10,l),x=Math.ceil(x*T)/T),n==="ticks"?(A=Math.floor(g/x)*x,C=Math.ceil(m/x)*x):(A=g,C=m),_&&b&&r&&YT((a-o)/r,x/1e3)?(R=Math.round(Math.min((a-o)/x,c)),x=(a-o)/R,A=o,C=a):y?(A=_?o:A,C=b?a:C,R=h-1,x=(C-A)/R):(R=(C-A)/x,dr(R,Math.round(R),x/1e3)?R=Math.round(R):R=Math.ceil(R));const I=Math.max(kf(x),kf(A));T=Math.pow(10,At(l)?I:l),A=Math.round(A*T)/T,C=Math.round(C*T)/T;let S=0;for(_&&(d&&A!==o?(i.push({value:o}),A<o&&S++,dr(Math.round((A+S*x)*T)/T,o,Np(o,E,e))&&S++):A<o&&S++);S<R;++S)i.push({value:Math.round((A+S*x)*T)/T});return b&&d&&C!==a?i.length&&dr(i[i.length-1].value,a,Np(a,E,e))?i[i.length-1].value=a:i.push({value:a}):(!b||C===a)&&i.push({value:C}),i}function Np(e,t,{horizontal:i,minRotation:s}){const n=Ke(s),r=(i?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class Ba extends Vs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return At(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this;const o=l=>n=i?n:l,a=l=>r=s?r:l;if(t){const l=bi(n),h=bi(r);l<0&&h<0?a(0):l>0&&h>0&&o(0)}if(n===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(n-l)}this.min=n,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),i=i||11),i&&(n=Math.min(i,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,o=JM(n,r);return t.bounds==="ticks"&&i0(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let i=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const n=(s-i)/Math.max(t.length-1,1)/2;i-=n,s+=n}this._startValue=i,this._endValue=s,this._valueRange=s-i}getLabelForValue(t){return Wr(t,this.chart.options.locale,this.options.ticks.format)}}class xc extends Ba{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=jt(t)?t:0,this.max=jt(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,s=Ke(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}st(xc,"id","linear"),st(xc,"defaults",{ticks:{callback:al.formatters.numeric}});const kr=e=>Math.floor(Zi(e)),ys=(e,t)=>Math.pow(10,kr(e)+t);function Up(e){return e/Math.pow(10,kr(e))===1}function Gp(e,t,i){const s=Math.pow(10,i),n=Math.floor(e/s);return Math.ceil(t/s)-n}function QM(e,t){const i=t-e;let s=kr(i);for(;Gp(e,t,s)>10;)s++;for(;Gp(e,t,s)<10;)s--;return Math.min(s,kr(e))}function tI(e,{min:t,max:i}){t=Te(e.min,t);const s=[],n=kr(t);let r=QM(t,i),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=n>r?Math.pow(10,n):0,h=Math.round((t-l)*o)/o,c=Math.floor((t-l)/a/10)*a*10;let u=Math.floor((h-c)/Math.pow(10,r)),d=Te(e.min,Math.round((l+c+u*Math.pow(10,r))*o)/o);for(;d<i;)s.push({value:d,major:Up(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+c+u*Math.pow(10,r))*o)/o;const f=Te(e.max,d);return s.push({value:f,major:Up(f),significand:u}),s}class vc extends Vs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){const s=Ba.prototype.parse.apply(this,[t,i]);if(s===0){this._zero=!0;return}return jt(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=jt(t)?Math.max(0,t):null,this.max=jt(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!jt(this._userMin)&&(this.min=t===ys(this.min,0)?ys(this.min,-1):ys(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let s=this.min,n=this.max;const r=a=>s=t?s:a,o=a=>n=i?n:a;s===n&&(s<=0?(r(1),o(10)):(r(ys(s,-1)),o(ys(n,1)))),s<=0&&r(ys(n,-1)),n<=0&&o(ys(s,1)),this.min=s,this.max=n}buildTicks(){const t=this.options,i={min:this._userMin,max:this._userMax},s=tI(i,this);return t.bounds==="ticks"&&i0(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Wr(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Zi(t),this._valueRange=Zi(this.max)-Zi(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Zi(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}}st(vc,"id","logarithmic"),st(vc,"defaults",{ticks:{callback:al.formatters.logarithmic,major:{enabled:!0}}});function Ec(e){const t=e.ticks;if(t.display&&e.display){const i=fe(t.backdropPadding);return gt(t.font&&t.font.size,Kt.font.size)+i.height}return 0}function eI(e,t,i){return i=Dt(i)?i:[i],{w:cA(e,t.string,i),h:i.length*t.lineHeight}}function Hp(e,t,i,s,n){return e===s||e===n?{start:t-i/2,end:t+i/2}:e<s||e>n?{start:t-i,end:t}:{start:t,end:t+i}}function iI(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),s=[],n=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Ft/r:0;for(let l=0;l<r;l++){const h=o.setContext(e.getPointLabelContext(l));n[l]=h.padding;const c=e.getPointPosition(l,e.drawingArea+n[l],a),u=Qt(h.font),d=eI(e.ctx,u,e._pointLabels[l]);s[l]=d;const f=Ce(e.getIndexAngle(l)+a),p=Math.round(qc(f)),g=Hp(p,c.x,d.w,0,180),m=Hp(p,c.y,d.h,90,270);sI(i,t,f,g,m)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=nI(e,s,n)}function sI(e,t,i,s,n){const r=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),n.start<t.t?(l=(t.t-n.start)/o,e.t=Math.min(e.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function nI(e,t,i){const s=[],n=e._pointLabels.length,r=e.options,o=Ec(r)/2,a=e.drawingArea,l=r.pointLabels.centerPointLabels?Ft/n:0;for(let h=0;h<n;h++){const c=e.getPointPosition(h,a+o+i[h],l),u=Math.round(qc(Ce(c.angle+Xt))),d=t[h],f=aI(c.y,d.h,u),p=rI(u),g=oI(c.x,d.w,p);s.push({x:c.x,y:f,textAlign:p,left:g,top:f,right:g+d.w,bottom:f+d.h})}return s}function rI(e){return e===0||e===180?"center":e<180?"left":"right"}function oI(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function aI(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function lI(e,t){const{ctx:i,options:{pointLabels:s}}=e;for(let n=t-1;n>=0;n--){const r=s.setContext(e.getPointLabelContext(n)),o=Qt(r.font),{x:a,y:l,textAlign:h,left:c,top:u,right:d,bottom:f}=e._pointLabelItems[n],{backdropColor:p}=r;if(!At(p)){const g=Rs(r.borderRadius),m=fe(r.backdropPadding);i.fillStyle=p;const _=c-m.left,b=u-m.top,y=d-c+m.width,E=f-u+m.height;Object.values(g).some(x=>x!==0)?(i.beginPath(),Dr(i,{x:_,y:b,w:y,h:E,radius:g}),i.fill()):i.fillRect(_,b,y,E)}Us(i,e._pointLabels[n],a,l+o.lineHeight/2,o,{color:r.color,textAlign:h,textBaseline:"middle"})}}function $0(e,t,i,s){const{ctx:n}=e;if(i)n.arc(e.xCenter,e.yCenter,t,0,Ot);else{let r=e.getPointPosition(0,t);n.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=e.getPointPosition(o,t),n.lineTo(r.x,r.y)}}function hI(e,t,i,s,n){const r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||i<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(n.dash),r.lineDashOffset=n.dashOffset,r.beginPath(),$0(e,i,o,s),r.closePath(),r.stroke(),r.restore())}function cI(e,t,i){return us(e,{label:i,index:t,type:"pointLabel"})}class nr extends Ba{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=fe(Ec(this.options)/2),i=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(i,s)/2)}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!1);this.min=jt(t)&&!isNaN(t)?t:0,this.max=jt(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ec(this.options))}generateTickLabels(t){Ba.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,s)=>{const n=Pt(this.options.pointLabels.callback,[i,s],this);return n||n===0?n:""}).filter((i,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?iI(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,s,n){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,s,n))}getIndexAngle(t){const i=Ot/(this._pointLabels.length||1),s=this.options.startAngle||0;return Ce(t*i+Ke(s))}getDistanceFromCenterForValue(t){if(At(t))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(At(t))return NaN;const i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){const i=this._pointLabels||[];if(t>=0&&t<i.length){const s=i[t];return cI(this.getContext(),t,s)}}getPointPosition(t,i,s=0){const n=this.getIndexAngle(t)-Xt+s;return{x:Math.cos(n)*i+this.xCenter,y:Math.sin(n)*i+this.yCenter,angle:n}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:i,top:s,right:n,bottom:r}=this._pointLabelItems[t];return{left:i,top:s,right:n,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:i}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),$0(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,i=this.options,{angleLines:s,grid:n,border:r}=i,o=this._pointLabels.length;let a,l,h;if(i.pointLabels.display&&lI(this,o),n.display&&this.ticks.forEach((c,u)=>{if(u!==0){l=this.getDistanceFromCenterForValue(c.value);const d=this.getContext(u),f=n.setContext(d),p=r.setContext(d);hI(this,f,l,o,p)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const c=s.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=c;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),h=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,i=this.options,s=i.ticks;if(!s.display)return;const n=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!i.reverse)return;const h=s.setContext(this.getContext(l)),c=Qt(h.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),h.showLabelBackdrop){t.font=c.string,o=t.measureText(a.label).width,t.fillStyle=h.backdropColor;const u=fe(h.backdropPadding);t.fillRect(-o/2-u.left,-r-c.size/2-u.top,o+u.width,c.size+u.height)}Us(t,a.label,0,-r,c,{color:h.color})}),t.restore()}drawTitle(){}}st(nr,"id","radialLinear"),st(nr,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:al.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),st(nr,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),st(nr,"descriptors",{angleLines:{_fallback:"grid"}});const ul={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ye=Object.keys(ul);function uI(e,t){return e-t}function zp(e,t){if(At(t))return null;const i=e._adapter,{parser:s,round:n,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),jt(o)||(o=typeof s=="string"?i.parse(o,s):i.parse(o)),o===null?null:(n&&(o=n==="week"&&(An(r)||r===!0)?i.startOf(o,"isoWeek",r):i.startOf(o,n)),+o)}function Vp(e,t,i,s){const n=ye.length;for(let r=ye.indexOf(e);r<n-1;++r){const o=ul[ye[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-t)/(a*o.size))<=s)return ye[r]}return ye[n-1]}function dI(e,t,i,s,n){for(let r=ye.length-1;r>=ye.indexOf(i);r--){const o=ye[r];if(ul[o].common&&e._adapter.diff(n,s,o)>=t-1)return o}return ye[i?ye.indexOf(i):0]}function fI(e){for(let t=ye.indexOf(e)+1,i=ye.length;t<i;++t)if(ul[ye[t]].common)return ye[t]}function Wp(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:s,hi:n}=Zc(i,t),r=i[s]>=t?i[s]:i[n];e[r]=!0}}function pI(e,t,i,s){const n=e._adapter,r=+n.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+n.add(a,1,s))l=i[a],l>=0&&(t[l].major=!0);return t}function jp(e,t,i){const s=[],n={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],n[a]=o,s.push({value:a,major:!1});return r===0||!i?s:pI(e,s,n,i)}class Fr extends Vs{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const s=t.time||(t.time={}),n=this._adapter=new AC._date(t.adapters.date);n.init(i),ur(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:zp(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,s=t.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(h){!o&&!isNaN(h.min)&&(n=Math.min(n,h.min)),!a&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=jt(n)&&!isNaN(n)?n:+i.startOf(Date.now(),s),r=jt(r)&&!isNaN(r)?r:+i.endOf(Date.now(),s)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],s=t[t.length-1]),{min:i,max:s}}buildTicks(){const t=this.options,i=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,a=ZT(n,r,o);return this._unit=i.unit||(s.autoSkip?Vp(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):dI(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:fI(this._unit),this.initOffsets(n),t.reverse&&a.reverse(),jp(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,s=0,n,r;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?i=1-n:i=(this.getDecimalForValue(t[1])-n)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=ne(i,0,o),s=ne(s,0,o),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const t=this._adapter,i=this.min,s=this.max,n=this.options,r=n.time,o=r.unit||Vp(r.minUnit,i,s,this._getLabelCapacity(i)),a=gt(n.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,h=An(l)||l===!0,c={};let u=i,d,f;if(h&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,h?"day":o),t.diff(s,i,o)>1e5*a)throw new Error(i+" and "+s+" are too far apart with stepSize of "+a+" "+o);const p=n.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<s;d=+t.add(d,a,o),f++)Wp(c,d,p);return(d===s||n.bounds==="ticks"||f===1)&&Wp(c,d,p),Object.keys(c).sort((g,m)=>g-m).map(g=>+g)}getLabelForValue(t){const i=this._adapter,s=this.options.time;return s.tooltipFormat?i.format(t,s.tooltipFormat):i.format(t,s.displayFormats.datetime)}format(t,i){const n=this.options.time.displayFormats,r=this._unit,o=i||n[r];return this._adapter.format(t,o)}_tickFormatFunction(t,i,s,n){const r=this.options,o=r.ticks.callback;if(o)return Pt(o,[t,i,s],this);const a=r.time.displayFormats,l=this._unit,h=this._majorUnit,c=l&&a[l],u=h&&a[h],d=s[i],f=h&&u&&d&&d.major;return this._adapter.format(t,n||(f?u:c))}generateTickLabels(t){let i,s,n;for(i=0,s=t.length;i<s;++i)n=t[i],n.label=this._tickFormatFunction(n.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,s=this.ctx.measureText(t).width,n=Ke(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const i=this.options.time,s=i.displayFormats,n=s[i.unit]||s.millisecond,r=this._tickFormatFunction(t,0,jp(this,[t],this._majorUnit),n),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,s;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(i=0,s=n.length;i<s;++i)t=t.concat(n[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,s;if(t.length)return t;const n=this.getLabels();for(i=0,s=n.length;i<s;++i)t.push(zp(this,n[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return r0(t.sort(uI))}}st(Fr,"id","time"),st(Fr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Bo(e,t,i){let s=0,n=e.length-1,r,o,a,l;i?(t>=e[s].pos&&t<=e[n].pos&&({lo:s,hi:n}=Ni(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[n]):(t>=e[s].time&&t<=e[n].time&&({lo:s,hi:n}=Ni(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[n]);const h=o-r;return h?a+(l-a)*(t-r)/h:a}class wc extends Fr{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Bo(i,this.min),this._tableRange=Bo(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:s}=this,n=[],r=[];let o,a,l,h,c;for(o=0,a=t.length;o<a;++o)h=t[o],h>=i&&h<=s&&n.push(h);if(n.length<2)return[{time:i,pos:0},{time:s,pos:1}];for(o=0,a=n.length;o<a;++o)c=n[o+1],l=n[o-1],h=n[o],Math.round((c+l)/2)!==h&&r.push({time:h,pos:o/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),s=this.getLabelTimestamps();return i.length&&s.length?t=this.normalize(i.concat(s)):t=i.length?i:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Bo(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return Bo(this._table,s*this._tableRange+this._minPos,!0)}}st(wc,"id","timeseries"),st(wc,"defaults",Fr.defaults);var gI=Object.freeze({__proto__:null,CategoryScale:yc,LinearScale:xc,LogarithmicScale:vc,RadialLinearScale:nr,TimeScale:Fr,TimeSeriesScale:wc});const K0=[TC,tM,$M,gI];function mI(e){let t,i,s,n,r;return{c(){t=Z("div"),i=Z("h2"),i.textContent="My History",s=yt(),n=Z("div"),r=Z("canvas"),G(r,"class","svelte-1mw7v7m"),G(n,"class","container svelte-1mw7v7m"),G(t,"class","card svelte-1mw7v7m")},m(o,a){at(o,t,a),q(t,i),q(t,s),q(t,n),q(n,r),e[1](r)},p:it,i:it,o:it,d(o){o&&ot(t),e[1](null)}}}function _I(e,t,i){Xe.register(...K0);const s=JSON.parse(localStorage.getItem("userStats"));let n,r;const o=(d,f)=>{let p,g,m;const _=f.right-f.left,b=f.bottom-f.top;return(!m||p!==_||g!==b)&&(p=_,g=b,m=d.createLinearGradient(0,f.bottom,0,f.top),m.addColorStop(0,"#57ff54"),m.addColorStop(.5,"#f7ff54"),m.addColorStop(1,"#d60626")),m},a=(d,f)=>{let p,g,m;const _=f.right-f.left,b=f.bottom-f.top;return(!m||p!==_||g!==b)&&(p=_,g=b,m=d.createLinearGradient(0,f.bottom,0,f.top),m.addColorStop(0,"rgba(87, 255, 84, 0)"),m.addColorStop(.5,"rgba(247, 255, 84, 0.25)"),m.addColorStop(1,"rgba(214, 6, 38, 0.5)")),m},l=(d,f)=>{const p=d.createLinearGradient(f.left,0,f.right,0);return p.addColorStop(0,"rgba(59, 71, 88, 0.2)"),p.addColorStop(.5,"rgba(59, 71, 88, 0.5)"),p.addColorStop(1,"rgba(59, 71, 88, 0.2)"),p};let h={labels:s.scoreHistory.map((d,f)=>f),datasets:[{type:"line",data:s.scoreHistory,fill:{target:"origin",above(d){const f=d.chart,{ctx:p,chartArea:g}=f;if(g)return a(p,g)}},tension:.5,backgroundColor:"rgba(255, 255, 255, 0.2)",borderColor(d){const f=d.chart,{ctx:p,chartArea:g}=f;if(g)return o(p,g)}}]};const c={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"nearest",includeInivisible:!1},layout:{},plugins:{legend:{display:!1},tooltip:{displayColors:!1,xAlign:"center",titleMarginBottom:0,margin:10,yAlign:"bottom",titleAlign:"center",lineHeight:-5,backgroundColor:"#586A84",titleColor:"white",titleFont:{weight:"bold"},callbacks:{title:d=>`${d[0].raw}`,label:d=>""}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{display:!1}},y:{grid:{color(d){const f=d.chart,{ctx:p,chartArea:g}=f;if(g)return l(p,g)},lineWidth:1.5},border:{display:!1},beginAtZero:!1,ticks:{autoSkip:!1,maxTicksLimit:5,maxRotation:0,color:"#3B4758",font:{size:12}}}}};Fe(()=>{r=new Xe(n.getContext("2d"),{type:"line",data:h,options:c})}),Pn(()=>{r.destroy()});function u(d){pi[d?"unshift":"push"](()=>{n=d,i(0,n)})}return[n,u]}class bI extends $t{constructor(t){super(),Yt(this,t,_I,mI,Vt,{})}}function yI(e){let t,i,s,n,r;return{c(){t=Z("div"),i=Z("h2"),i.textContent="Global Scores",s=yt(),n=Z("div"),r=Z("canvas"),G(r,"class","svelte-r9j32a"),G(n,"class","container svelte-r9j32a"),G(t,"class","card svelte-r9j32a")},m(o,a){at(o,t,a),q(t,i),q(t,s),q(t,n),q(n,r),e[2](r)},p:it,i:it,o:it,d(o){o&&ot(t),e[2](null)}}}function xI(e,t,i){Xe.register(...K0);let{globalScores:s=null}=t,n,r;const o=JSON.parse(localStorage.getItem("dailyData")).moves.length,a=(d,f)=>{let p,g,m;const _=f.right-f.left,b=f.bottom-f.top;return(!m||p!==_||g!==b)&&(p=_,g=b,m=d.createLinearGradient(0,f.bottom,0,f.top),m.addColorStop(0,"#57ff54"),m.addColorStop(.5,"#f7ff54"),m.addColorStop(1,"#d60626")),m};let l={labels:s.map((d,f)=>f),datasets:[{type:"bar",data:s,fill:!1,tension:.5,backgroundColor:d=>d.index===o?"#f1d324":"rgba(255, 255, 255, 0.75)",borderColor(d){const f=d.chart,{ctx:p,chartArea:g}=f;if(g)return a(p,g)}}]},h;const c={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"nearest",includeInivisible:!1},animation:{onComplete:()=>{h=!0},delay:d=>{let f=0;return d.type==="data"&&d.mode==="default"&&!h&&(f=d.dataIndex*10+d.datasetIndex*100),f}},layout:{},plugins:{legend:{display:!1},tooltip:{displayColors:!1,xAlign:"center",titleMarginBottom:0,margin:10,yAlign:"bottom",titleAlign:"center",lineHeight:-5,backgroundColor:"#586A84",titleColor:"white",titleFont:{weight:"bold"},callbacks:{title:d=>`Score: ${d[0].label}`,afterTitle:d=>`People: ${d[0].raw}`,label:d=>""}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{display:!1}},y:{grid:{display:!1},border:{display:!1},beginAtZero:!1,ticks:{autoSkip:!1,maxTicksLimit:5,maxRotation:0,color:"rgba(255, 255, 255, 0.25)",font:{size:12}}}}};Fe(()=>{r=new Xe(n.getContext("2d"),{type:"line",data:l,options:c})}),Pn(()=>{r.destroy()});function u(d){pi[d?"unshift":"push"](()=>{n=d,i(0,n)})}return e.$$set=d=>{"globalScores"in d&&i(1,s=d.globalScores)},[n,s,u]}class vI extends $t{constructor(t){super(),Yt(this,t,xI,yI,Vt,{globalScores:1})}}const q0="en",Z0={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:["People's Republic of China","China"],CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:["Republic of the Congo","Congo"],CD:["Democratic Republic of the Congo","Congo"],CK:"Cook Islands",CR:"Costa Rica",CI:["Cote D'Ivoire","Ivory Coast"],HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:["Czech Republic","Czechia"],DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:["Republic of The Gambia","The Gambia","Gambia"],GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:["Islamic Republic of Iran","Iran"],IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"North Korea",KR:["South Korea","Korea, Republic of","Republic of Korea"],KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MK:["The Republic of North Macedonia","North Macedonia"],MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:["State of Palestine","Palestine"],PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:["Russian Federation","Russia"],RW:"Rwanda",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Eswatini",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:["Taiwan, Province of China","Taiwan"],TJ:"Tajikistan",TZ:["United Republic of Tanzania","Tanzania"],TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:["Türkiye","Turkey"],TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:["United Kingdom","UK","Great Britain"],US:["United States of America","United States","USA"],UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Vietnam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",AX:"Åland Islands",BQ:"Bonaire, Sint Eustatius and Saba",CW:"Curaçao",GG:"Guernsey",IM:"Isle of Man",JE:"Jersey",ME:"Montenegro",BL:"Saint Barthélemy",MF:"Saint Martin (French part)",RS:"Serbia",SX:"Sint Maarten (Dutch part)",SS:"South Sudan",XK:"Kosovo"},J0={locale:q0,countries:Z0},EI=Object.freeze(Object.defineProperty({__proto__:null,countries:Z0,default:J0,locale:q0},Symbol.toStringTag,{value:"Module"}));function Xp(e,t,i){const s=e.slice();return s[3]=t[i].score,s[4]=t[i].countries,s[6]=i,s}function Yp(e,t,i){const s=e.slice();return s[7]=t[i],s[9]=i,s}function wI(e){let t,i=e[3]+"",s;return{c(){t=Z("p"),s=ge(i),G(t,"class","svelte-i3a2fb")},m(n,r){at(n,t,r),q(t,s)},p(n,r){r&1&&i!==(i=n[3]+"")&&Ie(s,i)},d(n){n&&ot(t)}}}function SI(e){let t,i=e[3]+"",s;return{c(){t=Z("p"),s=ge(i),_r(t,"color","#CD7F32"),G(t,"class","svelte-i3a2fb")},m(n,r){at(n,t,r),q(t,s)},p(n,r){r&1&&i!==(i=n[3]+"")&&Ie(s,i)},d(n){n&&ot(t)}}}function TI(e){let t,i=e[3]+"",s;return{c(){t=Z("p"),s=ge(i),_r(t,"color","silver"),G(t,"class","svelte-i3a2fb")},m(n,r){at(n,t,r),q(t,s)},p(n,r){r&1&&i!==(i=n[3]+"")&&Ie(s,i)},d(n){n&&ot(t)}}}function AI(e){let t,i=e[3]+"",s;return{c(){t=Z("p"),s=ge(i),_r(t,"color","gold"),G(t,"class","svelte-i3a2fb")},m(n,r){at(n,t,r),q(t,s)},p(n,r){r&1&&i!==(i=n[3]+"")&&Ie(s,i)},d(n){n&&ot(t)}}}function $p(e){let t,i,s,n,r,o,a;function l(u,d){return u[6]===0?AI:u[6]===1?TI:u[6]===2?SI:wI}let c=l(e)(e);return{c(){t=Z("div"),i=Z("img"),o=yt(),c.c(),a=yt(),yi(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${e[7].toLowerCase()}.svg`)||G(i,"src",s),G(i,"alt",n=e[1](e[7])),G(i,"title",r=e[1](e[7])),G(i,"class","svelte-i3a2fb"),G(t,"class","country svelte-i3a2fb")},m(u,d){at(u,t,d),q(t,i),q(t,o),c.m(t,null),q(t,a)},p(u,d){d&1&&!yi(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${u[7].toLowerCase()}.svg`)&&G(i,"src",s),d&1&&n!==(n=u[1](u[7]))&&G(i,"alt",n),d&1&&r!==(r=u[1](u[7]))&&G(i,"title",r),c.p(u,d)},d(u){u&&ot(t),c.d()}}}function Kp(e){let t,i=e[4],s=[];for(let n=0;n<i.length;n+=1)s[n]=$p(Yp(e,i,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();t=In()},m(n,r){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,r);at(n,t,r)},p(n,r){if(r&3){i=n[4];let o;for(o=0;o<i.length;o+=1){const a=Yp(n,i,o);s[o]?s[o].p(a,r):(s[o]=$p(a),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}},d(n){La(s,n),n&&ot(t)}}}function CI(e){let t,i,s,n,r=e[0],o=[];for(let a=0;a<r.length;a+=1)o[a]=Kp(Xp(e,r,a));return{c(){t=Z("div"),i=Z("h2"),i.textContent="Leader Board",s=yt(),n=Z("div");for(let a=0;a<o.length;a+=1)o[a].c();G(i,"class","svelte-i3a2fb"),G(n,"class","board svelte-i3a2fb"),G(t,"class","card svelte-i3a2fb")},m(a,l){at(a,t,l),q(t,i),q(t,s),q(t,n);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(n,null)},p(a,[l]){if(l&3){r=a[0];let h;for(h=0;h<r.length;h+=1){const c=Xp(a,r,h);o[h]?o[h].p(c,l):(o[h]=Kp(c),o[h].c(),o[h].m(n,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=r.length}},i:it,o:it,d(a){a&&ot(t),La(o,a)}}}function MI(e,t,i){let{leaderBoard:s=[]}=t;bn.registerLocale(J0);let n=[];function r(o){return bn.getName(o,"en",{select:"official"})}return e.$$set=o=>{"leaderBoard"in o&&i(2,s=o.leaderBoard)},e.$$.update=()=>{if(e.$$.dirty&5){i(0,n=[]);for(let o=0;o<s.length;o++)s[o].length>0&&n.push({score:o,countries:s[o]})}},[n,r,s]}class II extends $t{constructor(t){super(),Yt(this,t,MI,CI,Vt,{leaderBoard:2})}}function PI(e){let t,i,s,n,r,o,a,l,h,c;return{c(){t=Z("div"),i=Z("h2"),s=ge(e[0]),n=Z("span"),n.textContent="h",r=yt(),o=ge(e[1]),a=Z("span"),a.textContent="m",l=yt(),h=ge(e[2]),c=Z("span"),c.textContent="s",G(n,"class","svelte-4aifb5"),G(a,"class","svelte-4aifb5"),G(c,"class","svelte-4aifb5"),G(i,"class","svelte-4aifb5"),G(t,"class","card svelte-4aifb5")},m(u,d){at(u,t,d),q(t,i),q(i,s),q(i,n),q(i,r),q(i,o),q(i,a),q(i,l),q(i,h),q(i,c)},p(u,[d]){d&1&&Ie(s,u[0]),d&2&&Ie(o,u[1]),d&4&&Ie(h,u[2])},i:it,o:it,d(u){u&&ot(t)}}}function RI(e,t,i){function s(){const u=di().utc().tz("Europe/Paris"),f=u.clone().endOf("day").diff(u,"second");return Math.floor(f/3600)}function n(){const u=di().utc().tz("Europe/Paris"),f=u.clone().endOf("day").diff(u,"second");return Math.floor(f%3600/60)}function r(){const u=di().utc().tz("Europe/Paris");return u.clone().endOf("day").diff(u,"second")%60}let o=s(),a=n(),l=r(),h;return Fe(()=>{h=setInterval(()=>{i(0,o=s()),i(1,a=n()),i(2,l=r())},1e3)}),Pn(()=>{clearInterval(h)}),[o,a,l]}class DI extends $t{constructor(t){super(),Yt(this,t,RI,PI,Vt,{})}}function OI(e){let t,i,s;return{c(){t=Z("button"),t.textContent="Copy & Share",G(t,"class","svelte-xlgzd8")},m(n,r){at(n,t,r),i||(s=Rt(t,"click",e[2]),i=!0)},p:it,i:it,o:it,d(n){n&&ot(t),i=!1,s()}}}const kI="⬛";function qp(e){const t=parseInt(e.slice(1),16),i=t>>16&255,s=t>>8&255,n=t&255;return[i,s,n]}function FI(e,t){const[i,s,n]=e,[r,o,a]=t;return Math.sqrt((i-r)**2+(s-o)**2+(n-a)**2)}function BI(e,t,i){const s=JSON.parse(localStorage.getItem("dailyData")),n=s.pieceMap,r=s.palette,o=[{char:"🟥",hex:"#FF0000"},{char:"🟧",hex:"#FFA500"},{char:"🟨",hex:"#FFFF00"},{char:"🟩",hex:"#008000"},{char:"🟦",hex:"#0000FF"},{char:"🟪",hex:"#800080"},{char:"🟫",hex:"#A52A2A"},{char:"⬜",hex:"#FFFFFF"}],a=["😎","😎","😎","😎","😎","😁","😁","😁","😃","😃","😃","🌟","🌟","🌟","🌟","✨","✨","✨","⚡","⚡","⚡","⚡","⚡","⚡","🦍","🦧"];function l(f){let p=1/0,g=null;for(const m of o){const _=FI(qp(f),qp(m.hex));_<p&&(p=_,g=m)}return g}function h(f){const p=[];for(const g of f){const m=l(g);p.push(m.char),o.splice(o.indexOf(m),1)}return p}let c="Solved in "+s.moves.length+" moves "+a[Math.floor(Math.random()*a.length)],u=[];return Fe(()=>{const f=h(r);for(let p=0;p<n.length;p++){let g="";for(let m=0;m<n[p].length;m++){let _="";n[m][p]?_=f[r.indexOf(n[m][p].color)]:_=kI,g+=_}i(0,u=[...u,g])}}),[u,c,()=>navigator.clipboard.writeText(`${c}
${u.flat().join(`
`)}`)]}class LI extends $t{constructor(t){super(),Yt(this,t,BI,OI,Vt,{})}}function NI(e){let t;return{c(){t=Z("div"),t.innerHTML='<h2 class="svelte-wm1ky6">Good job!</h2>',G(t,"class","card svelte-wm1ky6")},m(i,s){at(i,t,s)},p:it,i:it,o:it,d(i){i&&ot(t)}}}class UI extends $t{constructor(t){super(),Yt(this,t,null,NI,Vt,{})}}function GI(e){let t,i,s,n,r,o,a,l,h,c,u,d,f,p;return t=new UI({}),s=new vI({props:{globalScores:e[1]}}),r=new II({props:{leaderBoard:e[2]}}),a=new bI({}),h=new pT({}),u=new DI({}),f=new LI({}),{c(){Wt(t.$$.fragment),i=yt(),Wt(s.$$.fragment),n=yt(),Wt(r.$$.fragment),o=yt(),Wt(a.$$.fragment),l=yt(),Wt(h.$$.fragment),c=yt(),Wt(u.$$.fragment),d=yt(),Wt(f.$$.fragment)},m(g,m){Ut(t,g,m),at(g,i,m),Ut(s,g,m),at(g,n,m),Ut(r,g,m),at(g,o,m),Ut(a,g,m),at(g,l,m),Ut(h,g,m),at(g,c,m),Ut(u,g,m),at(g,d,m),Ut(f,g,m),p=!0},p(g,m){const _={};m&2&&(_.globalScores=g[1]),s.$set(_);const b={};m&4&&(b.leaderBoard=g[2]),r.$set(b)},i(g){p||(X(t.$$.fragment,g),X(s.$$.fragment,g),X(r.$$.fragment,g),X(a.$$.fragment,g),X(h.$$.fragment,g),X(u.$$.fragment,g),X(f.$$.fragment,g),p=!0)},o(g){tt(t.$$.fragment,g),tt(s.$$.fragment,g),tt(r.$$.fragment,g),tt(a.$$.fragment,g),tt(h.$$.fragment,g),tt(u.$$.fragment,g),tt(f.$$.fragment,g),p=!1},d(g){Gt(t,g),g&&ot(i),Gt(s,g),g&&ot(n),Gt(r,g),g&&ot(o),Gt(a,g),g&&ot(l),Gt(h,g),g&&ot(c),Gt(u,g),g&&ot(d),Gt(f,g)}}}function HI(e){let t;return{c(){t=Z("h1"),t.textContent="Loading..."},m(i,s){at(i,t,s)},p:it,i:it,o:it,d(i){i&&ot(t)}}}function zI(e){let t,i,s,n;const r=[HI,GI],o=[];function a(l,h){return l[0]?1:0}return i=a(e),s=o[i]=r[i](e),{c(){t=Z("div"),s.c(),G(t,"class","dashboard-container svelte-jlo7w8")},m(l,h){at(l,t,h),o[i].m(t,null),n=!0},p(l,[h]){let c=i;i=a(l),i===c?o[i].p(l,h):(ie(),tt(o[c],1,1,()=>{o[c]=null}),se(),s=o[i],s?s.p(l,h):(s=o[i]=r[i](l),s.c()),X(s,1),s.m(t,null))},i(l){n||(X(s),n=!0)},o(l){tt(s),n=!1},d(l){l&&ot(t),o[i].d()}}}function VI(e,t,i){const s="bombastic";let n=null,r=null,o=null;return Fe(()=>{Rc.get(s+"/statistics").then(a=>{a.status===200&&(i(0,n=a.data),i(1,r=n.globalScores),i(2,o=n.leaderBoard))}).catch(a=>{console.error(a)})}),[n,r,o]}class WI extends $t{constructor(t){super(),Yt(this,t,VI,zI,Vt,{})}}function Zp(e){let t,i;return t=new uT({}),{c(){Wt(t.$$.fragment)},m(s,n){Ut(t,s,n),i=!0},i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){tt(t.$$.fragment,s),i=!1},d(s){Gt(t,s)}}}function jI(e){let t,i;return t=new my({}),{c(){Wt(t.$$.fragment)},m(s,n){Ut(t,s,n),i=!0},p:it,i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){tt(t.$$.fragment,s),i=!1},d(s){Gt(t,s)}}}function XI(e){let t,i,s,n;const r=[KI,$I],o=[];function a(l,h){return!l[1]||l[3]?0:1}return t=a(e),i=o[t]=r[t](e),{c(){i.c(),s=In()},m(l,h){o[t].m(l,h),at(l,s,h),n=!0},p(l,h){let c=t;t=a(l),t===c?o[t].p(l,h):(ie(),tt(o[c],1,1,()=>{o[c]=null}),se(),i=o[t],i?i.p(l,h):(i=o[t]=r[t](l),i.c()),X(i,1),i.m(s.parentNode,s))},i(l){n||(X(i),n=!0)},o(l){tt(i),n=!1},d(l){o[t].d(l),l&&ot(s)}}}function YI(e){let t,i;return t=new Fw({}),{c(){Wt(t.$$.fragment)},m(s,n){Ut(t,s,n),i=!0},p:it,i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){tt(t.$$.fragment,s),i=!1},d(s){Gt(t,s)}}}function $I(e){let t,i,s,n;t=new Dw({props:{mapData:JSON.parse(localStorage.getItem("dailyData"))}});let r=e[4]&&Jp();return{c(){Wt(t.$$.fragment),i=yt(),r&&r.c(),s=In()},m(o,a){Ut(t,o,a),at(o,i,a),r&&r.m(o,a),at(o,s,a),n=!0},p(o,a){o[4]?r?a&16&&X(r,1):(r=Jp(),r.c(),X(r,1),r.m(s.parentNode,s)):r&&(ie(),tt(r,1,1,()=>{r=null}),se())},i(o){n||(X(t.$$.fragment,o),X(r),n=!0)},o(o){tt(t.$$.fragment,o),tt(r),n=!1},d(o){Gt(t,o),o&&ot(i),r&&r.d(o),o&&ot(s)}}}function KI(e){let t,i;return t=new lT({}),t.$on("play",e[5]),{c(){Wt(t.$$.fragment)},m(s,n){Ut(t,s,n),i=!0},p:it,i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){tt(t.$$.fragment,s),i=!1},d(s){Gt(t,s)}}}function Jp(e){let t,i;return t=new WI({}),{c(){Wt(t.$$.fragment)},m(s,n){Ut(t,s,n),i=!0},i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){tt(t.$$.fragment,s),i=!1},d(s){Gt(t,s)}}}function qI(e){let t,i,s,n,r,o,a,l,h,c;i=new wy({});let u=e[2]&&Zp();const d=[YI,XI,jI],f=[];function p(g,m){return g[0]==="Loading"?0:g[0]==="Loaded"?1:g[0]==="Error"?2:-1}return~(o=p(e))&&(a=f[o]=d[o](e)),h=new Xw({}),{c(){t=Z("main"),Wt(i.$$.fragment),s=yt(),u&&u.c(),n=yt(),r=Z("div"),a&&a.c(),l=yt(),Wt(h.$$.fragment),G(r,"class","layout svelte-1dbb4bc"),G(t,"id","app")},m(g,m){at(g,t,m),Ut(i,t,null),q(t,s),u&&u.m(t,null),q(t,n),q(t,r),~o&&f[o].m(r,null),q(t,l),Ut(h,t,null),c=!0},p(g,[m]){g[2]?u?m&4&&X(u,1):(u=Zp(),u.c(),X(u,1),u.m(t,n)):u&&(ie(),tt(u,1,1,()=>{u=null}),se());let _=o;o=p(g),o===_?~o&&f[o].p(g,m):(a&&(ie(),tt(f[_],1,1,()=>{f[_]=null}),se()),~o?(a=f[o],a?a.p(g,m):(a=f[o]=d[o](g),a.c()),X(a,1),a.m(r,null)):a=null)},i(g){c||(X(i.$$.fragment,g),X(u),X(a),X(h.$$.fragment,g),c=!0)},o(g){tt(i.$$.fragment,g),tt(u),tt(a),tt(h.$$.fragment,g),c=!1},d(g){g&&ot(t),Gt(i),u&&u.d(),~o&&f[o].d(),Gt(h)}}}const ZI=1;function JI(e,t,i){let s,n,r;Ye(e,Dc,f=>i(2,s=f)),Ye(e,aa,f=>i(3,n=f)),Ye(e,ca,f=>i(4,r=f)),di.extend(Sg),di.extend(Tg);const o="bombastic";let a="Loading",l,h=!1;const c=f=>{l=f;for(let p=0;p<l.pieceMap.length;p++)for(let g=0;g<l.pieceMap[p].length;g++)if(f.pieceMap[p][g]===0)l.pieceMap[p][g]=null;else{const _={id:`${p}-${g}`,color:l.palette[f.pieceMap[p][g]-1]};l.pieceMap[p][g]=_}l.moves=[],localStorage.setItem("dailyData",JSON.stringify(l))},u=()=>{let f=localStorage.getItem("dailyData");if(f){f=JSON.parse(f);const p=di().tz("Etc/GMT-2").format("YYYYMMDD");if(f.version&&f.version===ZI&&f.seed===p){l=f,i(0,a="Loaded");return}else localStorage.removeItem("dailyData")}Rc.get(o+"/daily").then(p=>{p.status===200?(c(p.data),i(0,a="Loaded")):i(0,a="Error")}).catch(p=>{i(0,a="Error"),console.error(p)})};return Fe(()=>{console.log(`   __ ____  _____  ______     _    
  / //_/ / / / _ )/ __/ /    (_)__ 
 / ,< / /_/ / _  / _// /___ / / _ \\
/_/|_|\\____/____/___/____(_)_/\\___/`),localStorage.getItem("userCountry")&&i(1,h=!0),setTimeout(()=>{u()},1e3)}),[a,h,s,n,r,()=>{i(1,h=!0),aa.set(!1)}]}class QI extends $t{constructor(t){super(),Yt(this,t,JI,qI,Vt,{})}}new QI({target:document.getElementById("app")})});export default tP();
