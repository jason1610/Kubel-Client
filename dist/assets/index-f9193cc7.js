var Ev=Object.defineProperty;var Tv=(e,t,i)=>t in e?Ev(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Av=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var nt=(e,t,i)=>(Tv(e,typeof t!="symbol"?t+"":t,i),i);var DL=Av((BL,Da)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();function ht(){}function P_(e,t){for(const i in t)e[i]=t[i];return e}function R_(e){return e()}function vp(){return Object.create(null)}function cs(e){e.forEach(R_)}function Jo(e){return typeof e=="function"}function Jt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Ua;function _i(e,t){return Ua||(Ua=document.createElement("a")),Ua.href=t,e===Ua.href}function Cv(e){return Object.keys(e).length===0}function Mv(e,...t){if(e==null)return ht;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function ui(e,t,i){e.$$.on_destroy.push(Mv(t,i))}function Ve(e,t,i,s){if(e){const n=D_(e,t,i,s);return e[0](n)}}function D_(e,t,i,s){return e[1]&&s?P_(i.ctx.slice(),e[1](s(t))):i.ctx}function We(e,t,i,s){if(e[2]&&s){const n=e[2](s(i));if(t.dirty===void 0)return n;if(typeof n=="object"){const r=[],o=Math.max(t.dirty.length,n.length);for(let a=0;a<o;a+=1)r[a]=t.dirty[a]|n[a];return r}return t.dirty|n}return t.dirty}function je(e,t,i,s,n,r){if(n){const o=D_(t,i,s,r);e.p(o,n)}}function Xe(e){if(e.ctx.length>32){const t=[],i=e.ctx.length/32;for(let s=0;s<i;s++)t[s]=-1;return t}return-1}function Iv(e){const t={};for(const i in e)t[i]=!0;return t}function eh(e){return e&&Jo(e.destroy)?e.destroy:ht}function K(e,t){e.appendChild(t)}function lt(e,t,i){e.insertBefore(t,i||null)}function at(e){e.parentNode&&e.parentNode.removeChild(e)}function Hh(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function J(e){return document.createElement(e)}function Wr(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Oe(e){return document.createTextNode(e)}function vt(){return Oe(" ")}function oo(){return Oe("")}function Bt(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function on(e){return function(t){return t.preventDefault(),e.call(this,t)}}function jr(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function U(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function wp(e,t){const i=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:i[s]&&i[s].set?e[s]=t[s]:U(e,s,t[s])}function Pv(e){return Array.from(e.childNodes)}function si(e,t){t=""+t,e.data!==t&&(e.data=t)}function Sp(e,t){e.value=t??""}function Qo(e,t,i,s){i===null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}function At(e,t,i){e.classList[i?"add":"remove"](t)}function Rv(e,t,{bubbles:i=!1,cancelable:s=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,i,s,t),n}let ta;function Uo(e){ta=e}function zh(){if(!ta)throw new Error("Function called outside component initialization");return ta}function Dv(e){zh().$$.before_update.push(e)}function oi(e){zh().$$.on_mount.push(e)}function ao(e){zh().$$.on_destroy.push(e)}function O_(){const e=zh();return(t,i,{cancelable:s=!1}={})=>{const n=e.$$.callbacks[t];if(n){const r=Rv(t,i,{cancelable:s});return n.slice().forEach(o=>{o.call(e,r)}),!r.defaultPrevented}return!0}}function Ga(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const yr=[],es=[];let Ir=[];const Ep=[],Ov=Promise.resolve();let Bu=!1;function kv(){Bu||(Bu=!0,Ov.then(k_))}function Nu(e){Ir.push(e)}const Pc=new Set;let ar=0;function k_(){if(ar!==0)return;const e=ta;do{try{for(;ar<yr.length;){const t=yr[ar];ar++,Uo(t),Fv(t.$$)}}catch(t){throw yr.length=0,ar=0,t}for(Uo(null),yr.length=0,ar=0;es.length;)es.pop()();for(let t=0;t<Ir.length;t+=1){const i=Ir[t];Pc.has(i)||(Pc.add(i),i())}Ir.length=0}while(yr.length);for(;Ep.length;)Ep.pop()();Bu=!1,Pc.clear(),Uo(e)}function Fv(e){if(e.fragment!==null){e.update(),cs(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Nu)}}function Lv(e){const t=[],i=[];Ir.forEach(s=>e.indexOf(s)===-1?t.push(s):i.push(s)),i.forEach(s=>s()),Ir=t}const Ml=new Set;let kn;function me(){kn={r:0,c:[],p:kn}}function ge(){kn.r||cs(kn.c),kn=kn.p}function $(e,t){e&&e.i&&(Ml.delete(e),e.i(t))}function et(e,t,i,s){if(e&&e.o){if(Ml.has(e))return;Ml.add(e),kn.c.push(()=>{Ml.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function Bv(e,t){const i={},s={},n={$$scope:1};let r=e.length;for(;r--;){const o=e[r],a=t[r];if(a){for(const l in o)l in a||(s[l]=1);for(const l in a)n[l]||(i[l]=a[l],n[l]=1);e[r]=a}else for(const l in o)n[l]=1}for(const o in s)o in i||(i[o]=void 0);return i}function Qt(e){e&&e.c()}function Yt(e,t,i,s){const{fragment:n,after_update:r}=e.$$;n&&n.m(t,i),s||Nu(()=>{const o=e.$$.on_mount.map(R_).filter(Jo);e.$$.on_destroy?e.$$.on_destroy.push(...o):cs(o),e.$$.on_mount=[]}),r.forEach(Nu)}function $t(e,t){const i=e.$$;i.fragment!==null&&(Lv(i.after_update),cs(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Nv(e,t){e.$$.dirty[0]===-1&&(yr.push(e),kv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,i,s,n,r,o,a=[-1]){const l=ta;Uo(e);const h=e.$$={fragment:null,ctx:[],props:r,update:ht,not_equal:n,bound:vp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:vp(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(h.root);let c=!1;if(h.ctx=i?i(e,t.props||{},(u,d,...f)=>{const p=f.length?f[0]:d;return h.ctx&&n(h.ctx[u],h.ctx[u]=p)&&(!h.skip_bound&&h.bound[u]&&h.bound[u](p),c&&Nv(e,u)),d}):[],h.update(),c=!0,cs(h.before_update),h.fragment=s?s(h.ctx):!1,t.target){if(t.hydrate){const u=Pv(t.target);h.fragment&&h.fragment.l(u),u.forEach(at)}else h.fragment&&h.fragment.c();t.intro&&$(e.$$.fragment),Yt(e,t.target,t.anchor,t.customElement),k_()}Uo(l)}class ne{$destroy(){$t(this,1),this.$destroy=ht}$on(t,i){if(!Jo(i))return ht;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const n=s.indexOf(i);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!Cv(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function F_(e,t){return function(){return e.apply(t,arguments)}}const{toString:L_}=Object.prototype,{getPrototypeOf:hf}=Object,cf=(e=>t=>{const i=L_.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Bs=e=>(e=e.toLowerCase(),t=>cf(t)===e),Vh=e=>t=>typeof t===e,{isArray:lo}=Array,ea=Vh("undefined");function Uv(e){return e!==null&&!ea(e)&&e.constructor!==null&&!ea(e.constructor)&&an(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const B_=Bs("ArrayBuffer");function Gv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&B_(e.buffer),t}const Hv=Vh("string"),an=Vh("function"),N_=Vh("number"),uf=e=>e!==null&&typeof e=="object",zv=e=>e===!0||e===!1,Il=e=>{if(cf(e)!=="object")return!1;const t=hf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Vv=Bs("Date"),Wv=Bs("File"),jv=Bs("Blob"),Xv=Bs("FileList"),Yv=e=>uf(e)&&an(e.pipe),$v=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||L_.call(e)===t||an(e.toString)&&e.toString()===t)},Zv=Bs("URLSearchParams"),Kv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ea(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),lo(e))for(s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(s=0;s<o;s++)a=r[s],t.call(null,e[a],a,e)}}function U_(e,t){t=t.toLowerCase();const i=Object.keys(e);let s=i.length,n;for(;s-- >0;)if(n=i[s],t===n.toLowerCase())return n;return null}const G_=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),H_=e=>!ea(e)&&e!==G_;function Uu(){const{caseless:e}=H_(this)&&this||{},t={},i=(s,n)=>{const r=e&&U_(t,n)||n;Il(t[r])&&Il(s)?t[r]=Uu(t[r],s):Il(s)?t[r]=Uu({},s):lo(s)?t[r]=s.slice():t[r]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&Ea(arguments[s],i);return t}const qv=(e,t,i,{allOwnKeys:s}={})=>(Ea(t,(n,r)=>{i&&an(n)?e[r]=F_(n,i):e[r]=n},{allOwnKeys:s}),e),Jv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Qv=(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},tw=(e,t,i,s)=>{let n,r,o;const a={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),r=n.length;r-- >0;)o=n[r],(!s||s(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=i!==!1&&hf(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},ew=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return s!==-1&&s===i},iw=e=>{if(!e)return null;if(lo(e))return e;let t=e.length;if(!N_(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},sw=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&hf(Uint8Array)),nw=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=s.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},rw=(e,t)=>{let i;const s=[];for(;(i=e.exec(t))!==null;)s.push(i);return s},ow=Bs("HTMLFormElement"),aw=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,n){return s.toUpperCase()+n}),Tp=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),lw=Bs("RegExp"),z_=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};Ea(i,(n,r)=>{t(n,r,e)!==!1&&(s[r]=n)}),Object.defineProperties(e,s)},hw=e=>{z_(e,(t,i)=>{if(an(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=e[i];if(an(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},cw=(e,t)=>{const i={},s=n=>{n.forEach(r=>{i[r]=!0})};return lo(e)?s(e):s(String(e).split(t)),i},uw=()=>{},dw=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Rc="abcdefghijklmnopqrstuvwxyz",Ap="0123456789",V_={DIGIT:Ap,ALPHA:Rc,ALPHA_DIGIT:Rc+Rc.toUpperCase()+Ap},fw=(e=16,t=V_.ALPHA_DIGIT)=>{let i="";const{length:s}=t;for(;e--;)i+=t[Math.random()*s|0];return i};function pw(e){return!!(e&&an(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const mw=e=>{const t=new Array(10),i=(s,n)=>{if(uf(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[n]=s;const r=lo(s)?[]:{};return Ea(s,(o,a)=>{const l=i(o,n+1);!ea(l)&&(r[a]=l)}),t[n]=void 0,r}}return s};return i(e,0)},V={isArray:lo,isArrayBuffer:B_,isBuffer:Uv,isFormData:$v,isArrayBufferView:Gv,isString:Hv,isNumber:N_,isBoolean:zv,isObject:uf,isPlainObject:Il,isUndefined:ea,isDate:Vv,isFile:Wv,isBlob:jv,isRegExp:lw,isFunction:an,isStream:Yv,isURLSearchParams:Zv,isTypedArray:sw,isFileList:Xv,forEach:Ea,merge:Uu,extend:qv,trim:Kv,stripBOM:Jv,inherits:Qv,toFlatObject:tw,kindOf:cf,kindOfTest:Bs,endsWith:ew,toArray:iw,forEachEntry:nw,matchAll:rw,isHTMLForm:ow,hasOwnProperty:Tp,hasOwnProp:Tp,reduceDescriptors:z_,freezeMethods:hw,toObjectSet:cw,toCamelCase:aw,noop:uw,toFiniteNumber:dw,findKey:U_,global:G_,isContextDefined:H_,ALPHABET:V_,generateString:fw,isSpecCompliantForm:pw,toJSONObject:mw};function Ct(e,t,i,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),n&&(this.response=n)}V.inherits(Ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const W_=Ct.prototype,j_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{j_[e]={value:e}});Object.defineProperties(Ct,j_);Object.defineProperty(W_,"isAxiosError",{value:!0});Ct.from=(e,t,i,s,n,r)=>{const o=Object.create(W_);return V.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Ct.call(o,e.message,t,i,s,n),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const gw=null;function Gu(e){return V.isPlainObject(e)||V.isArray(e)}function X_(e){return V.endsWith(e,"[]")?e.slice(0,-2):e}function Cp(e,t,i){return e?e.concat(t).map(function(n,r){return n=X_(n),!i&&r?"["+n+"]":n}).join(i?".":""):t}function _w(e){return V.isArray(e)&&!e.some(Gu)}const yw=V.toFlatObject(V,{},null,function(t){return/^is[A-Z]/.test(t)});function Wh(e,t,i){if(!V.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=V.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!V.isUndefined(g[m])});const s=i.metaTokens,n=i.visitor||c,r=i.dots,o=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(n))throw new TypeError("visitor must be a function");function h(p){if(p===null)return"";if(V.isDate(p))return p.toISOString();if(!l&&V.isBlob(p))throw new Ct("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(p)||V.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,m,g){let _=p;if(p&&!g&&typeof p=="object"){if(V.endsWith(m,"{}"))m=s?m:m.slice(0,-2),p=JSON.stringify(p);else if(V.isArray(p)&&_w(p)||(V.isFileList(p)||V.endsWith(m,"[]"))&&(_=V.toArray(p)))return m=X_(m),_.forEach(function(b,v){!(V.isUndefined(b)||b===null)&&t.append(o===!0?Cp([m],v,r):o===null?m:m+"[]",h(b))}),!1}return Gu(p)?!0:(t.append(Cp(g,m,r),h(p)),!1)}const u=[],d=Object.assign(yw,{defaultVisitor:c,convertValue:h,isVisitable:Gu});function f(p,m){if(!V.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(p),V.forEach(p,function(_,y){(!(V.isUndefined(_)||_===null)&&n.call(t,_,V.isString(y)?y.trim():y,m,d))===!0&&f(_,m?m.concat(y):[y])}),u.pop()}}if(!V.isObject(e))throw new TypeError("data must be an object");return f(e),t}function Mp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function df(e,t){this._pairs=[],e&&Wh(e,this,t)}const Y_=df.prototype;Y_.append=function(t,i){this._pairs.push([t,i])};Y_.toString=function(t){const i=t?function(s){return t.call(this,s,Mp)}:Mp;return this._pairs.map(function(n){return i(n[0])+"="+i(n[1])},"").join("&")};function bw(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $_(e,t,i){if(!t)return e;const s=i&&i.encode||bw,n=i&&i.serialize;let r;if(n?r=n(t,i):r=V.isURLSearchParams(t)?t.toString():new df(t,i).toString(s),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class xw{constructor(){this.handlers=[]}use(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){V.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Ip=xw,Z_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vw=typeof URLSearchParams<"u"?URLSearchParams:df,ww=typeof FormData<"u"?FormData:null,Sw=typeof Blob<"u"?Blob:null,Ew=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Tw=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ji={isBrowser:!0,classes:{URLSearchParams:vw,FormData:ww,Blob:Sw},isStandardBrowserEnv:Ew,isStandardBrowserWebWorkerEnv:Tw,protocols:["http","https","file","blob","url","data"]};function Aw(e,t){return Wh(e,new Ji.classes.URLSearchParams,Object.assign({visitor:function(i,s,n,r){return Ji.isNode&&V.isBuffer(i)?(this.append(s,i.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function Cw(e){return V.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Mw(e){const t={},i=Object.keys(e);let s;const n=i.length;let r;for(s=0;s<n;s++)r=i[s],t[r]=e[r];return t}function K_(e){function t(i,s,n,r){let o=i[r++];const a=Number.isFinite(+o),l=r>=i.length;return o=!o&&V.isArray(n)?n.length:o,l?(V.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!a):((!n[o]||!V.isObject(n[o]))&&(n[o]=[]),t(i,s,n[o],r)&&V.isArray(n[o])&&(n[o]=Mw(n[o])),!a)}if(V.isFormData(e)&&V.isFunction(e.entries)){const i={};return V.forEachEntry(e,(s,n)=>{t(Cw(s),n,i,0)}),i}return null}const Iw={"Content-Type":void 0};function Pw(e,t,i){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}const jh={transitional:Z_,adapter:["xhr","http"],transformRequest:[function(t,i){const s=i.getContentType()||"",n=s.indexOf("application/json")>-1,r=V.isObject(t);if(r&&V.isHTMLForm(t)&&(t=new FormData(t)),V.isFormData(t))return n&&n?JSON.stringify(K_(t)):t;if(V.isArrayBuffer(t)||V.isBuffer(t)||V.isStream(t)||V.isFile(t)||V.isBlob(t))return t;if(V.isArrayBufferView(t))return t.buffer;if(V.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Aw(t,this.formSerializer).toString();if((a=V.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Wh(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||n?(i.setContentType("application/json",!1),Pw(t)):t}],transformResponse:[function(t){const i=this.transitional||jh.transitional,s=i&&i.forcedJSONParsing,n=this.responseType==="json";if(t&&V.isString(t)&&(s&&!this.responseType||n)){const o=!(i&&i.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Ct.from(a,Ct.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ji.classes.FormData,Blob:Ji.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};V.forEach(["delete","get","head"],function(t){jh.headers[t]={}});V.forEach(["post","put","patch"],function(t){jh.headers[t]=V.merge(Iw)});const ff=jh,Rw=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dw=e=>{const t={};let i,s,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),i=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!i||t[i]&&Rw[i])&&(i==="set-cookie"?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)}),t},Pp=Symbol("internals");function po(e){return e&&String(e).trim().toLowerCase()}function Pl(e){return e===!1||e==null?e:V.isArray(e)?e.map(Pl):String(e)}function Ow(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}const kw=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Dc(e,t,i,s,n){if(V.isFunction(s))return s.call(this,t,i);if(n&&(t=i),!!V.isString(t)){if(V.isString(s))return t.indexOf(s)!==-1;if(V.isRegExp(s))return s.test(t)}}function Fw(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,s)=>i.toUpperCase()+s)}function Lw(e,t){const i=V.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+i,{value:function(n,r,o){return this[s].call(this,t,n,r,o)},configurable:!0})})}class Xh{constructor(t){t&&this.set(t)}set(t,i,s){const n=this;function r(a,l,h){const c=po(l);if(!c)throw new Error("header name must be a non-empty string");const u=V.findKey(n,c);(!u||n[u]===void 0||h===!0||h===void 0&&n[u]!==!1)&&(n[u||l]=Pl(a))}const o=(a,l)=>V.forEach(a,(h,c)=>r(h,c,l));return V.isPlainObject(t)||t instanceof this.constructor?o(t,i):V.isString(t)&&(t=t.trim())&&!kw(t)?o(Dw(t),i):t!=null&&r(i,t,s),this}get(t,i){if(t=po(t),t){const s=V.findKey(this,t);if(s){const n=this[s];if(!i)return n;if(i===!0)return Ow(n);if(V.isFunction(i))return i.call(this,n,s);if(V.isRegExp(i))return i.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=po(t),t){const s=V.findKey(this,t);return!!(s&&this[s]!==void 0&&(!i||Dc(this,this[s],s,i)))}return!1}delete(t,i){const s=this;let n=!1;function r(o){if(o=po(o),o){const a=V.findKey(s,o);a&&(!i||Dc(s,s[a],a,i))&&(delete s[a],n=!0)}}return V.isArray(t)?t.forEach(r):r(t),n}clear(t){const i=Object.keys(this);let s=i.length,n=!1;for(;s--;){const r=i[s];(!t||Dc(this,this[r],r,t,!0))&&(delete this[r],n=!0)}return n}normalize(t){const i=this,s={};return V.forEach(this,(n,r)=>{const o=V.findKey(s,r);if(o){i[o]=Pl(n),delete i[r];return}const a=t?Fw(r):String(r).trim();a!==r&&delete i[r],i[a]=Pl(n),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return V.forEach(this,(s,n)=>{s!=null&&s!==!1&&(i[n]=t&&V.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const s=new this(t);return i.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[Pp]=this[Pp]={accessors:{}}).accessors,n=this.prototype;function r(o){const a=po(o);s[a]||(Lw(n,o),s[a]=!0)}return V.isArray(t)?t.forEach(r):r(t),this}}Xh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.freezeMethods(Xh.prototype);V.freezeMethods(Xh);const Ds=Xh;function Oc(e,t){const i=this||ff,s=t||i,n=Ds.from(s.headers);let r=s.data;return V.forEach(e,function(a){r=a.call(i,r,n.normalize(),t?t.status:void 0)}),n.normalize(),r}function q_(e){return!!(e&&e.__CANCEL__)}function Ta(e,t,i){Ct.call(this,e??"canceled",Ct.ERR_CANCELED,t,i),this.name="CanceledError"}V.inherits(Ta,Ct,{__CANCEL__:!0});function Bw(e,t,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?e(i):t(new Ct("Request failed with status code "+i.status,[Ct.ERR_BAD_REQUEST,Ct.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const Nw=Ji.isStandardBrowserEnv?function(){return{write:function(i,s,n,r,o,a){const l=[];l.push(i+"="+encodeURIComponent(s)),V.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),V.isString(r)&&l.push("path="+r),V.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(i){const s=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Uw(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Gw(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function J_(e,t){return e&&!Uw(t)?Gw(e,t):t}const Hw=Ji.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let s;function n(r){let o=r;return t&&(i.setAttribute("href",o),o=i.href),i.setAttribute("href",o),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return s=n(window.location.href),function(o){const a=V.isString(o)?n(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}();function zw(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Vw(e,t){e=e||10;const i=new Array(e),s=new Array(e);let n=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const h=Date.now(),c=s[r];o||(o=h),i[n]=l,s[n]=h;let u=r,d=0;for(;u!==n;)d+=i[u++],u=u%e;if(n=(n+1)%e,n===r&&(r=(r+1)%e),h-o<t)return;const f=c&&h-c;return f?Math.round(d*1e3/f):void 0}}function Rp(e,t){let i=0;const s=Vw(50,250);return n=>{const r=n.loaded,o=n.lengthComputable?n.total:void 0,a=r-i,l=s(a),h=r<=o;i=r;const c={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&h?(o-r)/l:void 0,event:n};c[t?"download":"upload"]=!0,e(c)}}const Ww=typeof XMLHttpRequest<"u",jw=Ww&&function(e){return new Promise(function(i,s){let n=e.data;const r=Ds.from(e.headers).normalize(),o=e.responseType;let a;function l(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}V.isFormData(n)&&(Ji.isStandardBrowserEnv||Ji.isStandardBrowserWebWorkerEnv)&&r.setContentType(!1);let h=new XMLHttpRequest;if(e.auth){const f=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(f+":"+p))}const c=J_(e.baseURL,e.url);h.open(e.method.toUpperCase(),$_(c,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function u(){if(!h)return;const f=Ds.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),m={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:f,config:e,request:h};Bw(function(_){i(_),l()},function(_){s(_),l()},m),h=null}if("onloadend"in h?h.onloadend=u:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(u)},h.onabort=function(){h&&(s(new Ct("Request aborted",Ct.ECONNABORTED,e,h)),h=null)},h.onerror=function(){s(new Ct("Network Error",Ct.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let p=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const m=e.transitional||Z_;e.timeoutErrorMessage&&(p=e.timeoutErrorMessage),s(new Ct(p,m.clarifyTimeoutError?Ct.ETIMEDOUT:Ct.ECONNABORTED,e,h)),h=null},Ji.isStandardBrowserEnv){const f=(e.withCredentials||Hw(c))&&e.xsrfCookieName&&Nw.read(e.xsrfCookieName);f&&r.set(e.xsrfHeaderName,f)}n===void 0&&r.setContentType(null),"setRequestHeader"in h&&V.forEach(r.toJSON(),function(p,m){h.setRequestHeader(m,p)}),V.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),o&&o!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",Rp(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",Rp(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=f=>{h&&(s(!f||f.type?new Ta(null,e,h):f),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const d=zw(c);if(d&&Ji.protocols.indexOf(d)===-1){s(new Ct("Unsupported protocol "+d+":",Ct.ERR_BAD_REQUEST,e));return}h.send(n||null)})},Rl={http:gw,xhr:jw};V.forEach(Rl,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Xw={getAdapter:e=>{e=V.isArray(e)?e:[e];const{length:t}=e;let i,s;for(let n=0;n<t&&(i=e[n],!(s=V.isString(i)?Rl[i.toLowerCase()]:i));n++);if(!s)throw s===!1?new Ct(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(V.hasOwnProp(Rl,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!V.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:Rl};function kc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ta(null,e)}function Dp(e){return kc(e),e.headers=Ds.from(e.headers),e.data=Oc.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Xw.getAdapter(e.adapter||ff.adapter)(e).then(function(s){return kc(e),s.data=Oc.call(e,e.transformResponse,s),s.headers=Ds.from(s.headers),s},function(s){return q_(s)||(kc(e),s&&s.response&&(s.response.data=Oc.call(e,e.transformResponse,s.response),s.response.headers=Ds.from(s.response.headers))),Promise.reject(s)})}const Op=e=>e instanceof Ds?e.toJSON():e;function Xr(e,t){t=t||{};const i={};function s(h,c,u){return V.isPlainObject(h)&&V.isPlainObject(c)?V.merge.call({caseless:u},h,c):V.isPlainObject(c)?V.merge({},c):V.isArray(c)?c.slice():c}function n(h,c,u){if(V.isUndefined(c)){if(!V.isUndefined(h))return s(void 0,h,u)}else return s(h,c,u)}function r(h,c){if(!V.isUndefined(c))return s(void 0,c)}function o(h,c){if(V.isUndefined(c)){if(!V.isUndefined(h))return s(void 0,h)}else return s(void 0,c)}function a(h,c,u){if(u in t)return s(h,c);if(u in e)return s(void 0,h)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(h,c)=>n(Op(h),Op(c),!0)};return V.forEach(Object.keys(e).concat(Object.keys(t)),function(c){const u=l[c]||n,d=u(e[c],t[c],c);V.isUndefined(d)&&u!==a||(i[c]=d)}),i}const Q_="1.3.5",pf={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{pf[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const kp={};pf.transitional=function(t,i,s){function n(r,o){return"[Axios v"+Q_+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(t===!1)throw new Ct(n(o," has been removed"+(i?" in "+i:"")),Ct.ERR_DEPRECATED);return i&&!kp[o]&&(kp[o]=!0,console.warn(n(o," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(r,o,a):!0}};function Yw(e,t,i){if(typeof e!="object")throw new Ct("options must be an object",Ct.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const r=s[n],o=t[r];if(o){const a=e[r],l=a===void 0||o(a,r,e);if(l!==!0)throw new Ct("option "+r+" must be "+l,Ct.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Ct("Unknown option "+r,Ct.ERR_BAD_OPTION)}}const Hu={assertOptions:Yw,validators:pf},Hs=Hu.validators;class ih{constructor(t){this.defaults=t,this.interceptors={request:new Ip,response:new Ip}}request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=Xr(this.defaults,i);const{transitional:s,paramsSerializer:n,headers:r}=i;s!==void 0&&Hu.assertOptions(s,{silentJSONParsing:Hs.transitional(Hs.boolean),forcedJSONParsing:Hs.transitional(Hs.boolean),clarifyTimeoutError:Hs.transitional(Hs.boolean)},!1),n!=null&&(V.isFunction(n)?i.paramsSerializer={serialize:n}:Hu.assertOptions(n,{encode:Hs.function,serialize:Hs.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let o;o=r&&V.merge(r.common,r[i.method]),o&&V.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),i.headers=Ds.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(i)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const h=[];this.interceptors.response.forEach(function(m){h.push(m.fulfilled,m.rejected)});let c,u=0,d;if(!l){const p=[Dp.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,h),d=p.length,c=Promise.resolve(i);u<d;)c=c.then(p[u++],p[u++]);return c}d=a.length;let f=i;for(u=0;u<d;){const p=a[u++],m=a[u++];try{f=p(f)}catch(g){m.call(this,g);break}}try{c=Dp.call(this,f)}catch(p){return Promise.reject(p)}for(u=0,d=h.length;u<d;)c=c.then(h[u++],h[u++]);return c}getUri(t){t=Xr(this.defaults,t);const i=J_(t.baseURL,t.url);return $_(i,t.params,t.paramsSerializer)}}V.forEach(["delete","get","head","options"],function(t){ih.prototype[t]=function(i,s){return this.request(Xr(s||{},{method:t,url:i,data:(s||{}).data}))}});V.forEach(["post","put","patch"],function(t){function i(s){return function(r,o,a){return this.request(Xr(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}ih.prototype[t]=i(),ih.prototype[t+"Form"]=i(!0)});const Dl=ih;class mf{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const s=this;this.promise.then(n=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](n);s._listeners=null}),this.promise.then=n=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(n);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,a){s.reason||(s.reason=new Ta(r,o,a),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new mf(function(n){t=n}),cancel:t}}}const $w=mf;function Zw(e){return function(i){return e.apply(null,i)}}function Kw(e){return V.isObject(e)&&e.isAxiosError===!0}const zu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zu).forEach(([e,t])=>{zu[t]=e});const qw=zu;function ty(e){const t=new Dl(e),i=F_(Dl.prototype.request,t);return V.extend(i,Dl.prototype,t,{allOwnKeys:!0}),V.extend(i,t,null,{allOwnKeys:!0}),i.create=function(n){return ty(Xr(e,n))},i}const fe=ty(ff);fe.Axios=Dl;fe.CanceledError=Ta;fe.CancelToken=$w;fe.isCancel=q_;fe.VERSION=Q_;fe.toFormData=Wh;fe.AxiosError=Ct;fe.Cancel=fe.CanceledError;fe.all=function(t){return Promise.all(t)};fe.spread=Zw;fe.isAxiosError=Kw;fe.mergeConfig=Xr;fe.AxiosHeaders=Ds;fe.formToJSON=e=>K_(V.isHTMLForm(e)?new FormData(e):e);fe.HttpStatusCode=qw;fe.default=fe;const gf=fe;var Pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vu={},Jw={get exports(){return Vu},set exports(e){Vu=e}};(function(e,t){(function(i,s){e.exports=s()})(Pr,function(){var i=1e3,s=6e4,n=36e5,r="millisecond",o="second",a="minute",l="hour",h="day",c="week",u="month",d="quarter",f="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var w=["th","st","nd","rd"],E=P%100;return"["+P+(w[(E-20)%10]||w[E]||w[0])+"]"}},b=function(P,w,E){var L=String(P);return!L||L.length>=w?P:""+Array(w+1-L.length).join(E)+P},v={s:b,z:function(P){var w=-P.utcOffset(),E=Math.abs(w),L=Math.floor(E/60),I=E%60;return(w<=0?"+":"-")+b(L,2,"0")+":"+b(I,2,"0")},m:function P(w,E){if(w.date()<E.date())return-P(E,w);var L=12*(E.year()-w.year())+(E.month()-w.month()),I=w.clone().add(L,u),N=E-I<0,F=w.clone().add(L+(N?-1:1),u);return+(-(L+(E-I)/(N?I-F:F-I))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:u,y:f,w:c,d:h,D:p,h:l,m:a,s:o,ms:r,Q:d}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},x="en",T={};T[x]=y;var S=function(P){return P instanceof C},A=function P(w,E,L){var I;if(!w)return x;if(typeof w=="string"){var N=w.toLowerCase();T[N]&&(I=N),E&&(T[N]=E,I=N);var F=w.split("-");if(!I&&F.length>1)return P(F[0])}else{var D=w.name;T[D]=w,I=D}return!L&&I&&(x=I),I||!L&&x},M=function(P,w){if(S(P))return P.clone();var E=typeof w=="object"?w:{};return E.date=P,E.args=arguments,new C(E)},O=v;O.l=A,O.i=S,O.w=function(P,w){return M(P,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var C=function(){function P(E){this.$L=A(E.locale,null,!0),this.parse(E)}var w=P.prototype;return w.parse=function(E){this.$d=function(L){var I=L.date,N=L.utc;if(I===null)return new Date(NaN);if(O.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var F=I.match(g);if(F){var D=F[2]-1||0,G=(F[7]||"0").substring(0,3);return N?new Date(Date.UTC(F[1],D,F[3]||1,F[4]||0,F[5]||0,F[6]||0,G)):new Date(F[1],D,F[3]||1,F[4]||0,F[5]||0,F[6]||0,G)}}return new Date(I)}(E),this.$x=E.x||{},this.init()},w.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},w.$utils=function(){return O},w.isValid=function(){return this.$d.toString()!==m},w.isSame=function(E,L){var I=M(E);return this.startOf(L)<=I&&I<=this.endOf(L)},w.isAfter=function(E,L){return M(E)<this.startOf(L)},w.isBefore=function(E,L){return this.endOf(L)<M(E)},w.$g=function(E,L,I){return O.u(E)?this[L]:this.set(I,E)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(E,L){var I=this,N=!!O.u(L)||L,F=O.p(E),D=function(bt,z){var B=O.w(I.$u?Date.UTC(I.$y,z,bt):new Date(I.$y,z,bt),I);return N?B:B.endOf(h)},G=function(bt,z){return O.w(I.toDate()[bt].apply(I.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(z)),I)},W=this.$W,q=this.$M,X=this.$D,st="set"+(this.$u?"UTC":"");switch(F){case f:return N?D(1,0):D(31,11);case u:return N?D(1,q):D(0,q+1);case c:var ft=this.$locale().weekStart||0,rt=(W<ft?W+7:W)-ft;return D(N?X-rt:X+(6-rt),q);case h:case p:return G(st+"Hours",0);case l:return G(st+"Minutes",1);case a:return G(st+"Seconds",2);case o:return G(st+"Milliseconds",3);default:return this.clone()}},w.endOf=function(E){return this.startOf(E,!1)},w.$set=function(E,L){var I,N=O.p(E),F="set"+(this.$u?"UTC":""),D=(I={},I[h]=F+"Date",I[p]=F+"Date",I[u]=F+"Month",I[f]=F+"FullYear",I[l]=F+"Hours",I[a]=F+"Minutes",I[o]=F+"Seconds",I[r]=F+"Milliseconds",I)[N],G=N===h?this.$D+(L-this.$W):L;if(N===u||N===f){var W=this.clone().set(p,1);W.$d[D](G),W.init(),this.$d=W.set(p,Math.min(this.$D,W.daysInMonth())).$d}else D&&this.$d[D](G);return this.init(),this},w.set=function(E,L){return this.clone().$set(E,L)},w.get=function(E){return this[O.p(E)]()},w.add=function(E,L){var I,N=this;E=Number(E);var F=O.p(L),D=function(q){var X=M(N);return O.w(X.date(X.date()+Math.round(q*E)),N)};if(F===u)return this.set(u,this.$M+E);if(F===f)return this.set(f,this.$y+E);if(F===h)return D(1);if(F===c)return D(7);var G=(I={},I[a]=s,I[l]=n,I[o]=i,I)[F]||1,W=this.$d.getTime()+E*G;return O.w(W,this)},w.subtract=function(E,L){return this.add(-1*E,L)},w.format=function(E){var L=this,I=this.$locale();if(!this.isValid())return I.invalidDate||m;var N=E||"YYYY-MM-DDTHH:mm:ssZ",F=O.z(this),D=this.$H,G=this.$m,W=this.$M,q=I.weekdays,X=I.months,st=function(z,B,H,j){return z&&(z[B]||z(L,N))||H[B].slice(0,j)},ft=function(z){return O.s(D%12||12,z,"0")},rt=I.meridiem||function(z,B,H){var j=z<12?"AM":"PM";return H?j.toLowerCase():j},bt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:W+1,MM:O.s(W+1,2,"0"),MMM:st(I.monthsShort,W,X,3),MMMM:st(X,W),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:st(I.weekdaysMin,this.$W,q,2),ddd:st(I.weekdaysShort,this.$W,q,3),dddd:q[this.$W],H:String(D),HH:O.s(D,2,"0"),h:ft(1),hh:ft(2),a:rt(D,G,!0),A:rt(D,G,!1),m:String(G),mm:O.s(G,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:F};return N.replace(_,function(z,B){return B||bt[z]||F.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(E,L,I){var N,F=O.p(L),D=M(E),G=(D.utcOffset()-this.utcOffset())*s,W=this-D,q=O.m(this,D);return q=(N={},N[f]=q/12,N[u]=q,N[d]=q/3,N[c]=(W-G)/6048e5,N[h]=(W-G)/864e5,N[l]=W/n,N[a]=W/s,N[o]=W/i,N)[F]||W,I?q:O.a(q)},w.daysInMonth=function(){return this.endOf(u).$D},w.$locale=function(){return T[this.$L]},w.locale=function(E,L){if(!E)return this.$L;var I=this.clone(),N=A(E,L,!0);return N&&(I.$L=N),I},w.clone=function(){return O.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},P}(),k=C.prototype;return M.prototype=k,[["$ms",r],["$s",o],["$m",a],["$H",l],["$W",h],["$M",u],["$y",f],["$D",p]].forEach(function(P){k[P[1]]=function(w){return this.$g(w,P[0],P[1])}}),M.extend=function(P,w){return P.$i||(P(w,C,M),P.$i=!0),M},M.locale=A,M.isDayjs=S,M.unix=function(P){return M(1e3*P)},M.en=T[x],M.Ls=T,M.p={},M})})(Jw);const Cs=Vu;var Wu={},Qw={get exports(){return Wu},set exports(e){Wu=e}};(function(e,t){(function(i,s){e.exports=s()})(Pr,function(){var i="minute",s=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,o,a){var l=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},l.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),i):g},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var h=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),h.call(this,m)};var c=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var u=l.utcOffset;l.utcOffset=function(m,g){var _=this.$utils().u;if(_(m))return this.$u?0:_(this.$offset)?u.call(this):this.$offset;if(typeof m=="string"&&(m=function(x){x===void 0&&(x="");var T=x.match(s);if(!T)return null;var S=(""+T[0]).match(n)||["-",0,0],A=S[0],M=60*+S[1]+ +S[2];return M===0?0:A==="+"?M:-M}(m),m===null))return this;var y=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=y,b.$u=m===0,b;if(m!==0){var v=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(y+v,i)).$offset=y,b.$x.$localOffset=v}else b=this.utc();return b};var d=l.format;l.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var f=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var p=l.diff;l.diff=function(m,g,_){if(m&&this.$u===m.$u)return p.call(this,m,g,_);var y=this.local(),b=a(m).local();return p.call(y,b,g,_)}}})})(Qw);const ey=Wu;var ju={},tS={get exports(){return ju},set exports(e){ju=e}};(function(e,t){(function(i,s){e.exports=s()})(Pr,function(){var i={year:0,month:1,day:2,hour:3,minute:4,second:5},s={};return function(n,r,o){var a,l=function(d,f,p){p===void 0&&(p={});var m=new Date(d),g=function(_,y){y===void 0&&(y={});var b=y.timeZoneName||"short",v=_+"|"+b,x=s[v];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:_,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),s[v]=x),x}(f,p);return g.formatToParts(m)},h=function(d,f){for(var p=l(d,f),m=[],g=0;g<p.length;g+=1){var _=p[g],y=_.type,b=_.value,v=i[y];v>=0&&(m[v]=parseInt(b,10))}var x=m[3],T=x===24?0:x,S=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(S).valueOf()-(A-=A%1e3))/6e4},c=r.prototype;c.tz=function(d,f){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),_=Math.round((m-new Date(g))/1e3/60),y=o(g).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-_,!0);if(f){var b=y.utcOffset();y=y.add(p-b,"minute")}return y.$x.$timezone=d,y},c.offsetName=function(d){var f=this.$x.$timezone||o.tz.guess(),p=l(this.valueOf(),f,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var u=c.startOf;c.startOf=function(d,f){if(!this.$x||!this.$x.$timezone)return u.call(this,d,f);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return u.call(p,d,f).tz(this.$x.$timezone,!0)},o.tz=function(d,f,p){var m=p&&f,g=p||f||a,_=h(+o(),g);if(typeof d!="string")return o(d).tz(g);var y=function(T,S,A){var M=T-60*S*1e3,O=h(M,A);if(S===O)return[M,S];var C=h(M-=60*(O-S)*1e3,A);return O===C?[M,O]:[T-60*Math.min(O,C)*1e3,Math.max(O,C)]}(o.utc(d,m).valueOf(),_,g),b=y[0],v=y[1],x=o(b).utcOffset(v);return x.$x.$timezone=g,x},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(tS);const iy=ju;function eS(e){let t;return{c(){t=J("div"),t.innerHTML=`<h1>💀</h1> 
	<h1>Uh oh...</h1> 
	<p class="svelte-b1vsv5">Something went wrong.</p>`,U(t,"class","error svelte-b1vsv5")},m(i,s){lt(i,t,s)},p:ht,i:ht,o:ht,d(i){i&&at(t)}}}let iS=class extends ne{constructor(t){super(),se(this,t,null,eS,Jt,{})}};const sS="/assets/logo-b904ad33.svg",nS="/assets/help-icon-1ee29c03.svg",lr=[];function vi(e,t=ht){let i;const s=new Set;function n(a){if(Jt(e,a)&&(e=a,i)){const l=!lr.length;for(const h of s)h[1](),lr.push(h,e);if(l){for(let h=0;h<lr.length;h+=2)lr[h][0](lr[h+1]);lr.length=0}}}function r(a){n(a(e))}function o(a,l=ht){const h=[a,l];return s.add(h),s.size===1&&(i=t(n)||ht),a(e),()=>{s.delete(h),s.size===0&&i&&(i(),i=null)}}return{set:n,update:r,subscribe:o}}const sy=vi(null),sh=vi(!1),_f=vi(!1),ny=vi(null),Er=vi(0),Rr=vi(!1),nh=vi(!0),Xu=vi(!1),rS=vi([[]]),rh=vi(),oh=vi(!1),Ol=vi(null);function oS(e){let t,i,s,n,r;return{c(){t=J("button"),i=J("img"),_i(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${e[2].toLowerCase()}.svg`)||U(i,"src",s),U(i,"alt","flag"),U(i,"class","svelte-11p4ias"),U(t,"class","flag svelte-11p4ias"),t.disabled=e[0]},m(o,a){lt(o,t,a),K(t,i),n||(r=Bt(t,"click",e[4]),n=!0)},p(o,a){a&1&&(t.disabled=o[0])},d(o){o&&at(t),n=!1,r()}}}function aS(e){let t,i,s,n,r;return{c(){t=J("button"),i=J("img"),_i(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${e[1].toLowerCase()}.svg`)||U(i,"src",s),U(i,"alt","flag"),U(i,"class","svelte-11p4ias"),U(t,"class","flag svelte-11p4ias"),t.disabled=e[0]},m(o,a){lt(o,t,a),K(t,i),n||(r=Bt(t,"click",e[3]),n=!0)},p(o,a){a&2&&!_i(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${o[1].toLowerCase()}.svg`)&&U(i,"src",s),a&1&&(t.disabled=o[0])},d(o){o&&at(t),n=!1,r()}}}function lS(e){let t,i,s,n,r,o,a,l,h,c,u,d,f;function p(_,y){if(_[1])return aS;if(_[2])return oS}let m=p(e),g=m&&m(e);return{c(){t=J("header"),i=J("div"),s=J("img"),r=vt(),o=J("h1"),o.textContent="KUBEL.io",a=vt(),g&&g.c(),l=vt(),h=J("button"),c=J("img"),_i(s.src,n=sS)||U(s,"src",n),U(s,"alt","Kubel"),U(s,"class","svelte-11p4ias"),U(o,"class","svelte-11p4ias"),U(i,"class","logo svelte-11p4ias"),_i(c.src,u=nS)||U(c,"src",u),U(c,"alt","help"),U(c,"class","svelte-11p4ias"),U(h,"class","help svelte-11p4ias"),U(t,"class","svelte-11p4ias")},m(_,y){lt(_,t,y),K(t,i),K(i,s),K(i,r),K(i,o),K(t,a),g&&g.m(t,null),K(t,l),K(t,h),K(h,c),d||(f=Bt(h,"click",e[5]),d=!0)},p(_,[y]){m===(m=p(_))&&g?g.p(_,y):(g&&g.d(1),g=m&&m(_),g&&(g.c(),g.m(t,l)))},i:ht,o:ht,d(_){_&&at(t),g&&g.d(),d=!1,f()}}}function hS(e,t,i){let s;ui(e,sy,c=>i(1,s=c));let n=localStorage.getItem("userCountry"),r=!1;const o=()=>{let c=localStorage.getItem("userStats");c&&(c=JSON.parse(c),c.dailyHistory.length>0&&i(0,r=!0))};return oi(()=>{const c=Rr.subscribe(u=>{u&&i(0,r=!0)});return o(),()=>{c()}}),[r,s,n,()=>sh.set(!0),()=>sh.set(!0),()=>{_f.set(!0)}]}class cS extends ne{constructor(t){super(),se(this,t,hS,lS,Jt,{})}}var Yu=function(){return Yu=Object.assign||function(t){for(var i,s=1,n=arguments.length;s<n;s++){i=arguments[s];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Yu.apply(this,arguments)};function Ns(e,t,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function a(c){try{h(s.next(c))}catch(u){o(u)}}function l(c){try{h(s.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):n(c.value).then(a,l)}h((s=s.apply(e,t||[])).next())})}function as(e,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,n,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(c){return l([h,c])}}function l(h){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(i=0)),i;)try{if(s=1,n&&(r=h[0]&2?n.return:h[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,h[1])).done)return r;switch(n=0,r&&(h=[h[0]&2,r.value]),h[0]){case 0:case 1:r=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,n=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!r||h[1]>r[0]&&h[1]<r[3])){i.label=h[1];break}if(h[0]===6&&i.label<r[1]){i.label=r[1],r=h;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(h);break}r[2]&&i.ops.pop(),i.trys.pop();continue}h=t.call(e,i)}catch(c){h=[6,c],n=0}finally{s=r=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function ry(e,t,i){if(i||arguments.length===2)for(var s=0,n=t.length,r;s<n;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}var oy="3.4.1";function Yr(e,t){return new Promise(function(i){return setTimeout(i,e,t)})}function uS(e,t){t===void 0&&(t=1/0);var i=window.requestIdleCallback;return i?new Promise(function(s){return i.call(window,function(){return s()},{timeout:t})}):Yr(Math.min(e,t))}function ay(e){return!!e&&typeof e.then=="function"}function Fp(e,t){try{var i=e();ay(i)?i.then(function(s){return t(!0,s)},function(s){return t(!1,s)}):t(!0,i)}catch(s){t(!1,s)}}function Lp(e,t,i){return i===void 0&&(i=16),Ns(this,void 0,void 0,function(){var s,n,r;return as(this,function(o){switch(o.label){case 0:s=Date.now(),n=0,o.label=1;case 1:return n<e.length?(t(e[n],n),r=Date.now(),r>=s+i?(s=r,[4,Yr(0)]):[3,3]):[3,4];case 2:o.sent(),o.label=3;case 3:return++n,[3,1];case 4:return[2]}})})}function Yh(e){e.then(void 0,function(){})}function zs(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535],t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var i=[0,0,0,0];return i[3]+=e[3]+t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]+t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]+t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]+t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]}function li(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535],t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var i=[0,0,0,0];return i[3]+=e[3]*t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]*t[3],i[1]+=i[2]>>>16,i[2]&=65535,i[2]+=e[3]*t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]*t[3],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[2]*t[2],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[3]*t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]}function hr(e,t){return t%=64,t===32?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function Ze(e,t){return t%=64,t===0?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function Gt(e,t){return[e[0]^t[0],e[1]^t[1]]}function Bp(e){return e=Gt(e,[0,e[0]>>>1]),e=li(e,[4283543511,3981806797]),e=Gt(e,[0,e[0]>>>1]),e=li(e,[3301882366,444984403]),e=Gt(e,[0,e[0]>>>1]),e}function dS(e,t){e=e||"",t=t||0;var i=e.length%16,s=e.length-i,n=[0,t],r=[0,t],o=[0,0],a=[0,0],l=[2277735313,289559509],h=[1291169091,658871167],c;for(c=0;c<s;c=c+16)o=[e.charCodeAt(c+4)&255|(e.charCodeAt(c+5)&255)<<8|(e.charCodeAt(c+6)&255)<<16|(e.charCodeAt(c+7)&255)<<24,e.charCodeAt(c)&255|(e.charCodeAt(c+1)&255)<<8|(e.charCodeAt(c+2)&255)<<16|(e.charCodeAt(c+3)&255)<<24],a=[e.charCodeAt(c+12)&255|(e.charCodeAt(c+13)&255)<<8|(e.charCodeAt(c+14)&255)<<16|(e.charCodeAt(c+15)&255)<<24,e.charCodeAt(c+8)&255|(e.charCodeAt(c+9)&255)<<8|(e.charCodeAt(c+10)&255)<<16|(e.charCodeAt(c+11)&255)<<24],o=li(o,l),o=hr(o,31),o=li(o,h),n=Gt(n,o),n=hr(n,27),n=zs(n,r),n=zs(li(n,[0,5]),[0,1390208809]),a=li(a,h),a=hr(a,33),a=li(a,l),r=Gt(r,a),r=hr(r,31),r=zs(r,n),r=zs(li(r,[0,5]),[0,944331445]);switch(o=[0,0],a=[0,0],i){case 15:a=Gt(a,Ze([0,e.charCodeAt(c+14)],48));case 14:a=Gt(a,Ze([0,e.charCodeAt(c+13)],40));case 13:a=Gt(a,Ze([0,e.charCodeAt(c+12)],32));case 12:a=Gt(a,Ze([0,e.charCodeAt(c+11)],24));case 11:a=Gt(a,Ze([0,e.charCodeAt(c+10)],16));case 10:a=Gt(a,Ze([0,e.charCodeAt(c+9)],8));case 9:a=Gt(a,[0,e.charCodeAt(c+8)]),a=li(a,h),a=hr(a,33),a=li(a,l),r=Gt(r,a);case 8:o=Gt(o,Ze([0,e.charCodeAt(c+7)],56));case 7:o=Gt(o,Ze([0,e.charCodeAt(c+6)],48));case 6:o=Gt(o,Ze([0,e.charCodeAt(c+5)],40));case 5:o=Gt(o,Ze([0,e.charCodeAt(c+4)],32));case 4:o=Gt(o,Ze([0,e.charCodeAt(c+3)],24));case 3:o=Gt(o,Ze([0,e.charCodeAt(c+2)],16));case 2:o=Gt(o,Ze([0,e.charCodeAt(c+1)],8));case 1:o=Gt(o,[0,e.charCodeAt(c)]),o=li(o,l),o=hr(o,31),o=li(o,h),n=Gt(n,o)}return n=Gt(n,[0,e.length]),r=Gt(r,[0,e.length]),n=zs(n,r),r=zs(r,n),n=Bp(n),r=Bp(r),n=zs(n,r),r=zs(r,n),("00000000"+(n[0]>>>0).toString(16)).slice(-8)+("00000000"+(n[1]>>>0).toString(16)).slice(-8)+("00000000"+(r[0]>>>0).toString(16)).slice(-8)+("00000000"+(r[1]>>>0).toString(16)).slice(-8)}function fS(e){var t;return Yu({name:e.name,message:e.message,stack:(t=e.stack)===null||t===void 0?void 0:t.split(`
`)},e)}function pS(e,t){for(var i=0,s=e.length;i<s;++i)if(e[i]===t)return!0;return!1}function mS(e,t){return!pS(e,t)}function yf(e){return parseInt(e)}function Mi(e){return parseFloat(e)}function Es(e,t){return typeof e=="number"&&isNaN(e)?t:e}function zi(e){return e.reduce(function(t,i){return t+(i?1:0)},0)}function ly(e,t){if(t===void 0&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var i=1/t;return Math.round(e*i)/i}function gS(e){for(var t,i,s="Unexpected syntax '".concat(e,"'"),n=/^\s*([a-z-]*)(.*)$/i.exec(e),r=n[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,l=function(d,f){o[d]=o[d]||[],o[d].push(f)};;){var h=a.exec(n[2]);if(!h)break;var c=h[0];switch(c[0]){case".":l("class",c.slice(1));break;case"#":l("id",c.slice(1));break;case"[":{var u=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(c);if(u)l(u[1],(i=(t=u[4])!==null&&t!==void 0?t:u[5])!==null&&i!==void 0?i:"");else throw new Error(s);break}default:throw new Error(s)}}return[r,o]}function Np(e){return e&&typeof e=="object"&&"message"in e?e:{message:e}}function _S(e){return typeof e!="function"}function yS(e,t){var i=new Promise(function(s){var n=Date.now();Fp(e.bind(null,t),function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=Date.now()-n;if(!r[0])return s(function(){return{error:Np(r[1]),duration:a}});var l=r[1];if(_S(l))return s(function(){return{value:l,duration:a}});s(function(){return new Promise(function(h){var c=Date.now();Fp(l,function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var f=a+Date.now()-c;if(!u[0])return h({error:Np(u[1]),duration:f});h({value:u[1],duration:f})})})})})});return Yh(i),function(){return i.then(function(n){return n()})}}function bS(e,t,i){var s=Object.keys(e).filter(function(r){return mS(i,r)}),n=Array(s.length);return Lp(s,function(r,o){n[o]=yS(e[r],t)}),function(){return Ns(this,void 0,void 0,function(){var o,a,l,h,c,u,d;return as(this,function(f){switch(f.label){case 0:for(o={},a=0,l=s;a<l.length;a++)h=l[a],o[h]=void 0;c=Array(s.length),u=function(){var p;return as(this,function(m){switch(m.label){case 0:return p=!0,[4,Lp(s,function(g,_){if(!c[_])if(n[_]){var y=n[_]().then(function(b){return o[g]=b});Yh(y),c[_]=y}else p=!1})];case 1:return m.sent(),p?[2,"break"]:[4,Yr(1)];case 2:return m.sent(),[2]}})},f.label=1;case 1:return[5,u()];case 2:if(d=f.sent(),d==="break")return[3,4];f.label=3;case 3:return[3,1];case 4:return[4,Promise.all(c)];case 5:return f.sent(),[2,o]}})})}}function hy(){var e=window,t=navigator;return zi(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function xS(){var e=window,t=navigator;return zi(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!hy()}function bf(){var e=window,t=navigator;return zi(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,t.vendor.indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function Aa(){var e=window,t=navigator;return zi(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,t.vendor.indexOf("Apple")===0,"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function xf(){var e=window;return zi(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3}function vS(){var e,t,i=window;return zi(["buildID"in navigator,"MozAppearance"in((t=(e=document.documentElement)===null||e===void 0?void 0:e.style)!==null&&t!==void 0?t:{}),"onmozfullscreenchange"in i,"mozInnerScreenX"in i,"CSSMozDocumentRule"in i,"CanvasCaptureMediaStream"in i])>=4}function wS(){var e=window;return zi([!("MediaSettingsRange"in e),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3}function SS(){var e=window;return zi(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}function ES(){if(navigator.platform==="iPad")return!0;var e=screen,t=e.width/e.height;return zi(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}function TS(){var e=document;return e.fullscreenElement||e.msFullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||null}function AS(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function cy(){var e=bf(),t=vS();if(!e&&!t)return!1;var i=window;return zi(["onorientationchange"in i,"orientation"in i,e&&!("SharedWorker"in i),t&&/android/i.test(navigator.appVersion)])>=2}function CS(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(MS())return-1;var i=4500,s=5e3,n=new t(1,s,44100),r=n.createOscillator();r.type="triangle",r.frequency.value=1e4;var o=n.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,r.connect(o),o.connect(n.destination),r.start(0);var a=IS(n),l=a[0],h=a[1],c=l.then(function(u){return PS(u.getChannelData(0).subarray(i))},function(u){if(u.name==="timeout"||u.name==="suspended")return-3;throw u});return Yh(c),function(){return h(),c}}function MS(){return Aa()&&!xf()&&!SS()}function IS(e){var t=3,i=500,s=500,n=5e3,r=function(){},o=new Promise(function(a,l){var h=!1,c=0,u=0;e.oncomplete=function(p){return a(p.renderedBuffer)};var d=function(){setTimeout(function(){return l(Up("timeout"))},Math.min(s,u+n-Date.now()))},f=function(){try{var p=e.startRendering();switch(ay(p)&&Yh(p),e.state){case"running":u=Date.now(),h&&d();break;case"suspended":document.hidden||c++,h&&c>=t?l(Up("suspended")):setTimeout(f,i);break}}catch(m){l(m)}};f(),r=function(){h||(h=!0,u>0&&d())}});return[o,r]}function PS(e){for(var t=0,i=0;i<e.length;++i)t+=Math.abs(e[i]);return t}function Up(e){var t=new Error(e);return t.name=e,t}function uy(e,t,i){var s,n,r;return i===void 0&&(i=50),Ns(this,void 0,void 0,function(){var o,a;return as(this,function(l){switch(l.label){case 0:o=document,l.label=1;case 1:return o.body?[3,3]:[4,Yr(i)];case 2:return l.sent(),[3,1];case 3:a=o.createElement("iframe"),l.label=4;case 4:return l.trys.push([4,,10,11]),[4,new Promise(function(h,c){var u=!1,d=function(){u=!0,h()},f=function(g){u=!0,c(g)};a.onload=d,a.onerror=f;var p=a.style;p.setProperty("display","block","important"),p.position="absolute",p.top="0",p.left="0",p.visibility="hidden",t&&"srcdoc"in a?a.srcdoc=t:a.src="about:blank",o.body.appendChild(a);var m=function(){var g,_;u||(((_=(g=a.contentWindow)===null||g===void 0?void 0:g.document)===null||_===void 0?void 0:_.readyState)==="complete"?d():setTimeout(m,10))};m()})];case 5:l.sent(),l.label=6;case 6:return!((n=(s=a.contentWindow)===null||s===void 0?void 0:s.document)===null||n===void 0)&&n.body?[3,8]:[4,Yr(i)];case 7:return l.sent(),[3,6];case 8:return[4,e(a,a.contentWindow)];case 9:return[2,l.sent()];case 10:return(r=a.parentNode)===null||r===void 0||r.removeChild(a),[7];case 11:return[2]}})})}function RS(e){for(var t=gS(e),i=t[0],s=t[1],n=document.createElement(i??"div"),r=0,o=Object.keys(s);r<o.length;r++){var a=o[r],l=s[a].join(" ");a==="style"?DS(n.style,l):n.setAttribute(a,l)}return n}function DS(e,t){for(var i=0,s=t.split(";");i<s.length;i++){var n=s[i],r=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(r){var o=r[1],a=r[2],l=r[4];e.setProperty(o,a,l||"")}}}var OS="mmMwWLliI0O&1",kS="48px",cr=["monospace","sans-serif","serif"],Gp=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function FS(){return uy(function(e,t){var i=t.document,s=i.body;s.style.fontSize=kS;var n=i.createElement("div"),r={},o={},a=function(m){var g=i.createElement("span"),_=g.style;return _.position="absolute",_.top="0",_.left="0",_.fontFamily=m,g.textContent=OS,n.appendChild(g),g},l=function(m,g){return a("'".concat(m,"',").concat(g))},h=function(){return cr.map(a)},c=function(){for(var m={},g=function(v){m[v]=cr.map(function(x){return l(v,x)})},_=0,y=Gp;_<y.length;_++){var b=y[_];g(b)}return m},u=function(m){return cr.some(function(g,_){return m[_].offsetWidth!==r[g]||m[_].offsetHeight!==o[g]})},d=h(),f=c();s.appendChild(n);for(var p=0;p<cr.length;p++)r[cr[p]]=d[p].offsetWidth,o[cr[p]]=d[p].offsetHeight;return Gp.filter(function(m){return u(f[m])})})}function LS(){var e=navigator.plugins;if(e){for(var t=[],i=0;i<e.length;++i){var s=e[i];if(s){for(var n=[],r=0;r<s.length;++r){var o=s[r];n.push({type:o.type,suffixes:o.suffixes})}t.push({name:s.name,description:s.description,mimeTypes:n})}}return t}}function BS(){var e=!1,t,i,s=NS(),n=s[0],r=s[1];if(!US(n,r))t=i="";else{e=GS(r),HS(n,r);var o=Fc(n),a=Fc(n);o!==a?t=i="unstable":(i=o,zS(n,r),t=Fc(n))}return{winding:e,geometry:t,text:i}}function NS(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}function US(e,t){return!!(t&&e.toDataURL)}function GS(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}function HS(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var i="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));t.fillText(i,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(i,4,45)}function zS(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var i=0,s=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];i<s.length;i++){var n=s[i],r=n[0],o=n[1],a=n[2];t.fillStyle=r,t.beginPath(),t.arc(o,a,40,0,Math.PI*2,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,Math.PI*2,!0),t.arc(60,60,20,0,Math.PI*2,!0),t.fill("evenodd")}function Fc(e){return e.toDataURL()}function VS(){var e=navigator,t=0,i;e.maxTouchPoints!==void 0?t=yf(e.maxTouchPoints):e.msMaxTouchPoints!==void 0&&(t=e.msMaxTouchPoints);try{document.createEvent("TouchEvent"),i=!0}catch{i=!1}var s="ontouchstart"in window;return{maxTouchPoints:t,touchEvent:i,touchStart:s}}function WS(){return navigator.oscpu}function jS(){var e=navigator,t=[],i=e.language||e.userLanguage||e.browserLanguage||e.systemLanguage;if(i!==void 0&&t.push([i]),Array.isArray(e.languages))bf()&&wS()||t.push(e.languages);else if(typeof e.languages=="string"){var s=e.languages;s&&t.push(s.split(","))}return t}function XS(){return window.screen.colorDepth}function YS(){return Es(Mi(navigator.deviceMemory),void 0)}function $S(){var e=screen,t=function(s){return Es(yf(s),null)},i=[t(e.width),t(e.height)];return i.sort().reverse(),i}var ZS=2500,KS=10,kl,Lc;function qS(){if(Lc===void 0){var e=function(){var t=$u();Zu(t)?Lc=setTimeout(e,ZS):(kl=t,Lc=void 0)};e()}}function JS(){var e=this;return qS(),function(){return Ns(e,void 0,void 0,function(){var t;return as(this,function(i){switch(i.label){case 0:return t=$u(),Zu(t)?kl?[2,ry([],kl,!0)]:TS()?[4,AS()]:[3,2]:[3,2];case 1:i.sent(),t=$u(),i.label=2;case 2:return Zu(t)||(kl=t),[2,t]}})})}}function QS(){var e=this,t=JS();return function(){return Ns(e,void 0,void 0,function(){var i,s;return as(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return i=n.sent(),s=function(r){return r===null?null:ly(r,KS)},[2,[s(i[0]),s(i[1]),s(i[2]),s(i[3])]]}})})}}function $u(){var e=screen;return[Es(Mi(e.availTop),null),Es(Mi(e.width)-Mi(e.availWidth)-Es(Mi(e.availLeft),0),null),Es(Mi(e.height)-Mi(e.availHeight)-Es(Mi(e.availTop),0),null),Es(Mi(e.availLeft),null)]}function Zu(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function tE(){return Es(yf(navigator.hardwareConcurrency),void 0)}function eE(){var e,t=(e=window.Intl)===null||e===void 0?void 0:e.DateTimeFormat;if(t){var i=new t().resolvedOptions().timeZone;if(i)return i}var s=-iE();return"UTC".concat(s>=0?"+":"").concat(Math.abs(s))}function iE(){var e=new Date().getFullYear();return Math.max(Mi(new Date(e,0,1).getTimezoneOffset()),Mi(new Date(e,6,1).getTimezoneOffset()))}function sE(){try{return!!window.sessionStorage}catch{return!0}}function nE(){try{return!!window.localStorage}catch{return!0}}function rE(){if(!(hy()||xS()))try{return!!window.indexedDB}catch{return!0}}function oE(){return!!window.openDatabase}function aE(){return navigator.cpuClass}function lE(){var e=navigator.platform;return e==="MacIntel"&&Aa()&&!xf()?ES()?"iPad":"iPhone":e}function hE(){return navigator.vendor||""}function cE(){for(var e=[],t=0,i=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<i.length;t++){var s=i[t],n=window[s];n&&typeof n=="object"&&e.push(s)}return e.sort()}function uE(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=e.cookie.indexOf("cookietest=")!==-1;return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch{return!1}}function dE(){var e=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",e("YVt0aXRsZT0iN25hZ2EgcG9rZXIiIGld"),'[title="ALIENBOLA" i]'],abpvn:["#quangcaomb",e("Lmlvc0Fkc2lvc0Fkcy1sYXlvdXQ="),".quangcao",e("W2hyZWZePSJodHRwczovL3I4OC52bi8iXQ=="),e("W2hyZWZePSJodHRwczovL3piZXQudm4vIl0=")],adBlockFinland:[".mainostila",e("LnNwb25zb3JpdA=="),".ylamainos",e("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),e("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",e("I2FkMl9pbmxpbmU=")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",e("LmhlYWRlci1ibG9ja2VkLWFk"),e("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:['amp-embed[type="zen"]',".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil"],adGuardBase:[".BetterJsPopOverlay",e("I2FkXzMwMFgyNTA="),e("I2Jhbm5lcmZsb2F0MjI="),e("I2FkLWJhbm5lcg=="),e("I2NhbXBhaWduLWJhbm5lcg==")],adGuardChinese:[e("LlppX2FkX2FfSA=="),e("YVtocmVmKj0iL29kMDA1LmNvbSJd"),e("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),".qq_nr_lad","#widget-quan"],adGuardFrench:[e("I2Jsb2NrLXZpZXdzLWFkcy1zaWRlYmFyLWJsb2NrLWJsb2Nr"),"#pavePub",e("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv"],adGuardGerman:[e("LmJhbm5lcml0ZW13ZXJidW5nX2hlYWRfMQ=="),e("LmJveHN0YXJ0d2VyYnVuZw=="),e("LndlcmJ1bmcz"),e("YVtocmVmXj0iaHR0cDovL3d3dy5laXMuZGUvaW5kZXgucGh0bWw/cmVmaWQ9Il0="),e("YVtocmVmXj0iaHR0cHM6Ly93d3cudGlwaWNvLmNvbS8/YWZmaWxpYXRlSWQ9Il0=")],adGuardJapanese:["#kauli_yad_1",e("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),e("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),e("LmFkZ29vZ2xl"),e("LmFkX3JlZ3VsYXIz")],adGuardMobile:[e("YW1wLWF1dG8tYWRz"),e("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",e("I2FkX2ludmlld19hcmVh")],adGuardRussian:[e("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),e("LnJlY2xhbWE="),'div[id^="smi2adblock"]',e("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),e("I2FkX3NxdWFyZQ==")],adGuardSocial:[e("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),e("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",e("W2hyZWZePSJodHRwOi8vYWRzLmdsaXNwYS5jb20vIl0=")],adGuardTrackingProtection:["#qoo-counter",e("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),e("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),e("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",e("I3Jla2xhbWk="),e("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),e("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),e("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[e("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers",e("I25ld0Fk")],easyList:[e("I0FEX0NPTlRST0xfMjg="),e("LnNlY29uZC1wb3N0LWFkcy13cmFwcGVy"),".universalboxADVBOX03",e("LmFkdmVydGlzZW1lbnQtNzI4eDkw"),e("LnNxdWFyZV9hZHM=")],easyListChina:[e("YVtocmVmKj0iLndlbnNpeHVldGFuZy5jb20vIl0="),e("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),e("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box"],easyListCookie:["#AdaCompliance.app-notice",".text-center.rgpd",".panel--cookie",".js-cookies-andromeda",".elxtr-consent"],easyListCzechSlovak:["#onlajny-stickers",e("I3Jla2xhbW5pLWJveA=="),e("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",e("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[e("I2FkdmVydGVudGll"),e("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",e("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:[e("I0FkX1dpbjJkYXk="),e("I3dlcmJ1bmdzYm94MzAw"),e("YVtocmVmXj0iaHR0cDovL3d3dy5yb3RsaWNodGthcnRlaS5jb20vP3NjPSJd"),e("I3dlcmJ1bmdfd2lkZXNreXNjcmFwZXJfc2NyZWVu"),e("YVtocmVmXj0iaHR0cDovL2xhbmRpbmcucGFya3BsYXR6a2FydGVpLmNvbS8/YWc9Il0=")],easyListItaly:[e("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",e("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),e("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),e("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[e("LnJla2xhbW9zX3RhcnBhcw=="),e("LnJla2xhbW9zX251b3JvZG9z"),e("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),e("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),e("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[e("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#feedback-tab","#taboola-below-article",".feedburnerFeedBlock",".widget-feedburner-counter",'[title="Subscribe to our blog"]'],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:[".td-tags-and-social-wrapper-box",".twitterContainer",".youtube-social",'a[title^="Like us on Facebook"]','img[alt^="Share on Digg"]'],frellwitSwedish:[e("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),e("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",e("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[e("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),e("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),e("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",e("LmFkX19tYWlu"),e("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container",".cookie-msg-info-container","#cookies-policy-sticky"],icelandicAbp:[e("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[e("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),e("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[e("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),e("I2xpdmVyZUFkV3JhcHBlcg=="),e("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),e("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[e("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",e("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),e("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),e("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[e("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),e("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),e("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",e("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),e("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),e("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),e("ZGl2I3NrYXBpZWNfYWQ=")],ro:[e("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),'a[href^="/magazin/"]',e("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),e("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),e("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd")],ruAd:[e("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),e("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),e("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",e("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),e("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",e("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}function fE(e){var t=e===void 0?{}:e,i=t.debug;return Ns(this,void 0,void 0,function(){var s,n,r,o,a,l;return as(this,function(h){switch(h.label){case 0:return pE()?(s=dE(),n=Object.keys(s),r=(l=[]).concat.apply(l,n.map(function(c){return s[c]})),[4,mE(r)]):[2,void 0];case 1:return o=h.sent(),i&&gE(s,o),a=n.filter(function(c){var u=s[c],d=zi(u.map(function(f){return o[f]}));return d>u.length*.6}),a.sort(),[2,a]}})})}function pE(){return Aa()||cy()}function mE(e){var t;return Ns(this,void 0,void 0,function(){var i,s,n,r,l,o,a,l;return as(this,function(h){switch(h.label){case 0:for(i=document,s=i.createElement("div"),n=new Array(e.length),r={},Hp(s),l=0;l<e.length;++l)o=RS(e[l]),a=i.createElement("div"),Hp(a),a.appendChild(o),s.appendChild(a),n[l]=o;h.label=1;case 1:return i.body?[3,3]:[4,Yr(50)];case 2:return h.sent(),[3,1];case 3:i.body.appendChild(s);try{for(l=0;l<e.length;++l)n[l].offsetParent||(r[e[l]]=!0)}finally{(t=s.parentNode)===null||t===void 0||t.removeChild(s)}return[2,r]}})})}function Hp(e){e.style.setProperty("display","block","important")}function gE(e,t){for(var i="DOM blockers debug:\n```",s=0,n=Object.keys(e);s<n.length;s++){var r=n[s];i+=`
`.concat(r,":");for(var o=0,a=e[r];o<a.length;o++){var l=a[o];i+=`
  `.concat(t[l]?"🚫":"➡️"," ").concat(l)}}console.log("".concat(i,"\n```"))}function _E(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var i=t[e];if(matchMedia("(color-gamut: ".concat(i,")")).matches)return i}}function yE(){if(zp("inverted"))return!0;if(zp("none"))return!1}function zp(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function bE(){if(Vp("active"))return!0;if(Vp("none"))return!1}function Vp(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}var xE=100;function vE(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=xE;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}}function wE(){if(ur("no-preference"))return 0;if(ur("high")||ur("more"))return 1;if(ur("low")||ur("less"))return-1;if(ur("forced"))return 10}function ur(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function SE(){if(Wp("reduce"))return!0;if(Wp("no-preference"))return!1}function Wp(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function EE(){if(jp("high"))return!0;if(jp("standard"))return!1}function jp(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var Pt=Math,De=function(){return 0};function TE(){var e=Pt.acos||De,t=Pt.acosh||De,i=Pt.asin||De,s=Pt.asinh||De,n=Pt.atanh||De,r=Pt.atan||De,o=Pt.sin||De,a=Pt.sinh||De,l=Pt.cos||De,h=Pt.cosh||De,c=Pt.tan||De,u=Pt.tanh||De,d=Pt.exp||De,f=Pt.expm1||De,p=Pt.log1p||De,m=function(A){return Pt.pow(Pt.PI,A)},g=function(A){return Pt.log(A+Pt.sqrt(A*A-1))},_=function(A){return Pt.log(A+Pt.sqrt(A*A+1))},y=function(A){return Pt.log((1+A)/(1-A))/2},b=function(A){return Pt.exp(A)-1/Pt.exp(A)/2},v=function(A){return(Pt.exp(A)+1/Pt.exp(A))/2},x=function(A){return Pt.exp(A)-1},T=function(A){return(Pt.exp(2*A)-1)/(Pt.exp(2*A)+1)},S=function(A){return Pt.log(1+A)};return{acos:e(.12312423423423424),acosh:t(1e308),acoshPf:g(1e154),asin:i(.12312423423423424),asinh:s(1),asinhPf:_(1),atanh:n(.5),atanhPf:y(.5),atan:r(.5),sin:o(-1e300),sinh:a(1),sinhPf:b(1),cos:l(10.000000000123),cosh:h(1),coshPf:v(1),tan:c(-1e300),tanh:u(1),tanhPf:T(1),exp:d(1),expm1:f(1),expm1Pf:x(1),log1p:p(10),log1pPf:S(10),powPI:m(-100)}}var AE="mmMwWLliI0fiflO&1",Bc={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function CE(){return ME(function(e,t){for(var i={},s={},n=0,r=Object.keys(Bc);n<r.length;n++){var o=r[n],a=Bc[o],l=a[0],h=l===void 0?{}:l,c=a[1],u=c===void 0?AE:c,d=e.createElement("span");d.textContent=u,d.style.whiteSpace="nowrap";for(var f=0,p=Object.keys(h);f<p.length;f++){var m=p[f],g=h[m];g!==void 0&&(d.style[m]=g)}i[o]=d,t.appendChild(e.createElement("br")),t.appendChild(d)}for(var _=0,y=Object.keys(Bc);_<y.length;_++){var o=y[_];s[o]=i[o].getBoundingClientRect().width}return s})}function ME(e,t){return t===void 0&&(t=4e3),uy(function(i,s){var n=s.document,r=n.body,o=r.style;o.width="".concat(t,"px"),o.webkitTextSizeAdjust=o.textSizeAdjust="none",bf()?r.style.zoom="".concat(1/s.devicePixelRatio):Aa()&&(r.style.zoom="reset");var a=n.createElement("div");return a.textContent=ry([],Array(t/20<<0),!0).map(function(){return"word"}).join(" "),r.appendChild(a),e(n,r)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function IE(){var e,t=document.createElement("canvas"),i=(e=t.getContext("webgl"))!==null&&e!==void 0?e:t.getContext("experimental-webgl");if(i&&"getExtension"in i){var s=i.getExtension("WEBGL_debug_renderer_info");if(s)return{vendor:(i.getParameter(s.UNMASKED_VENDOR_WEBGL)||"").toString(),renderer:(i.getParameter(s.UNMASKED_RENDERER_WEBGL)||"").toString()}}}function PE(){return navigator.pdfViewerEnabled}function RE(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]}var DE={fonts:FS,domBlockers:fE,fontPreferences:CE,audio:CS,screenFrame:QS,osCpu:WS,languages:jS,colorDepth:XS,deviceMemory:YS,screenResolution:$S,hardwareConcurrency:tE,timezone:eE,sessionStorage:sE,localStorage:nE,indexedDB:rE,openDatabase:oE,cpuClass:aE,platform:lE,plugins:LS,canvas:BS,touchSupport:VS,vendor:hE,vendorFlavors:cE,cookiesEnabled:uE,colorGamut:_E,invertedColors:yE,forcedColors:bE,monochrome:vE,contrast:wE,reducedMotion:SE,hdr:EE,math:TE,videoCard:IE,pdfViewerEnabled:PE,architecture:RE};function OE(e){return bS(DE,e,[])}var kE="$ if upgrade to Pro: https://fpjs.dev/pro";function FE(e){var t=LE(e),i=BE(t);return{score:t,comment:kE.replace(/\$/g,"".concat(i))}}function LE(e){if(cy())return .4;if(Aa())return xf()?.5:.3;var t=e.platform.value||"";return/^Win/.test(t)?.6:/^Mac/.test(t)?.5:.7}function BE(e){return ly(.99+.01*e,1e-4)}function NE(e){for(var t="",i=0,s=Object.keys(e).sort();i<s.length;i++){var n=s[i],r=e[n],o=r.error?"error":JSON.stringify(r.value);t+="".concat(t?"|":"").concat(n.replace(/([:|\\])/g,"\\$1"),":").concat(o)}return t}function dy(e){return JSON.stringify(e,function(t,i){return i instanceof Error?fS(i):i},2)}function fy(e){return dS(NE(e))}function UE(e){var t,i=FE(e);return{get visitorId(){return t===void 0&&(t=fy(this.components)),t},set visitorId(s){t=s},confidence:i,components:e,version:oy}}function GE(e){return e===void 0&&(e=50),uS(e,e*2)}function HE(e,t){var i=Date.now();return{get:function(s){return Ns(this,void 0,void 0,function(){var n,r,o;return as(this,function(a){switch(a.label){case 0:return n=Date.now(),[4,e()];case 1:return r=a.sent(),o=UE(r),(t||s!=null&&s.debug)&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(o.version,`
userAgent: `).concat(navigator.userAgent,`
timeBetweenLoadAndGet: `).concat(n-i,`
visitorId: `).concat(o.visitorId,`
components: `).concat(dy(r),"\n```")),[2,o]}})})}}}function zE(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(oy,"/npm-monitoring"),!0),e.send()}catch(t){console.error(t)}}function VE(e){var t=e===void 0?{}:e,i=t.delayFallback,s=t.debug,n=t.monitoring,r=n===void 0?!0:n;return Ns(this,void 0,void 0,function(){var o;return as(this,function(a){switch(a.label){case 0:return r&&zE(),[4,GE(i)];case 1:return a.sent(),o=OE({debug:s}),[2,HE(o,s)]}})})}var WE={load:VE,hashComponents:fy,componentsToDebugString:dy},Qn=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Qn||{}),py=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(py||{}),Ku=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Ku||{}),mt=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(mt||{}),Qi=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(Qi||{}),Z=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(Z||{}),Dr=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Dr||{}),pt=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(pt||{}),qu=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(qu||{}),Ms=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(Ms||{}),tn=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(tn||{}),ls=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(ls||{}),Vi=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(Vi||{}),Zi=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(Zi||{}),vf=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(vf||{}),di=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(di||{}),he=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(he||{}),ae=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(ae||{}),is=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(is||{});const jE={createCanvas:(e,t)=>{const i=document.createElement("canvas");return i.width=e,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},Q={ADAPTER:jE,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Nc=/iPhone/i,Xp=/iPod/i,Yp=/iPad/i,$p=/\biOS-universal(?:.+)Mac\b/i,Uc=/\bAndroid(?:.+)Mobile\b/i,Zp=/Android/i,dr=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ha=/Silk/i,_s=/Windows Phone/i,Kp=/\bWindows(?:.+)ARM\b/i,qp=/BlackBerry/i,Jp=/BB10/i,Qp=/Opera Mini/i,tm=/\b(CriOS|Chrome)(?:.+)Mobile/i,em=/Mobile(?:.+)Firefox\b/i,im=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function XE(e){return function(t){return t.test(e)}}function sm(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var i=t.userAgent,s=i.split("[FBAN");typeof s[1]<"u"&&(i=s[0]),s=i.split("Twitter"),typeof s[1]<"u"&&(i=s[0]);var n=XE(i),r={apple:{phone:n(Nc)&&!n(_s),ipod:n(Xp),tablet:!n(Nc)&&(n(Yp)||im(t))&&!n(_s),universal:n($p),device:(n(Nc)||n(Xp)||n(Yp)||n($p)||im(t))&&!n(_s)},amazon:{phone:n(dr),tablet:!n(dr)&&n(Ha),device:n(dr)||n(Ha)},android:{phone:!n(_s)&&n(dr)||!n(_s)&&n(Uc),tablet:!n(_s)&&!n(dr)&&!n(Uc)&&(n(Ha)||n(Zp)),device:!n(_s)&&(n(dr)||n(Ha)||n(Uc)||n(Zp))||n(/\bokhttp\b/i)},windows:{phone:n(_s),tablet:n(Kp),device:n(_s)||n(Kp)},other:{blackberry:n(qp),blackberry10:n(Jp),opera:n(Qp),firefox:n(em),chrome:n(tm),device:n(qp)||n(Jp)||n(Qp)||n(em)||n(tm)},any:!1,phone:!1,tablet:!1};return r.any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}const YE=sm.default??sm,Is=YE(globalThis.navigator);Q.RETINA_PREFIX=/@([0-9\.]+)x/;Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var jn={},$E={get exports(){return jn},set exports(e){jn=e}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1));function n(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function r(l,h,c,u,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new n(c,u||l,d),p=i?i+h:h;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new s:delete l._events[h]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],c,u;if(this._eventsCount===0)return h;for(u in c=this._events)t.call(c,u)&&h.push(i?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},a.prototype.listeners=function(h){var c=i?i+h:h,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},a.prototype.listenerCount=function(h){var c=i?i+h:h,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(h,c,u,d,f,p){var m=i?i+h:h;if(!this._events[m])return!1;var g=this._events[m],_=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(h,g.fn,void 0,!0),_){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,u),!0;case 4:return g.fn.call(g.context,c,u,d),!0;case 5:return g.fn.call(g.context,c,u,d,f),!0;case 6:return g.fn.call(g.context,c,u,d,f,p),!0}for(b=1,y=new Array(_-1);b<_;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var v=g.length,x;for(b=0;b<v;b++)switch(g[b].once&&this.removeListener(h,g[b].fn,void 0,!0),_){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,c);break;case 3:g[b].fn.call(g[b].context,c,u);break;case 4:g[b].fn.call(g[b].context,c,u,d);break;default:if(!y)for(x=1,y=new Array(_-1);x<_;x++)y[x-1]=arguments[x];g[b].fn.apply(g[b].context,y)}}return!0},a.prototype.on=function(h,c,u){return r(this,h,c,u,!1)},a.prototype.once=function(h,c,u){return r(this,h,c,u,!0)},a.prototype.removeListener=function(h,c,u,d){var f=i?i+h:h;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!d||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var m=0,g=[],_=p.length;m<_;m++)(p[m].fn!==c||d&&!p[m].once||u&&p[m].context!==u)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(h){var c;return h?(c=i?i+h:h,this._events[c]&&o(this,c)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a})($E);var ah={},ZE={get exports(){return ah},set exports(e){ah=e}};ZE.exports=$h;ah.default=$h;function $h(e,t,i){i=i||2;var s=t&&t.length,n=s?t[0]*i:e.length,r=my(e,0,n,i,!0),o=[];if(!r||r.next===r.prev)return o;var a,l,h,c,u,d,f;if(s&&(r=tT(e,t,r,i)),e.length>80*i){a=h=e[0],l=c=e[1];for(var p=i;p<n;p+=i)u=e[p],d=e[p+1],u<a&&(a=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);f=Math.max(h-a,c-l),f=f!==0?32767/f:0}return ia(r,o,i,a,l,f,0),o}function my(e,t,i,s,n){var r,o;if(n===td(e,t,i,s)>0)for(r=t;r<i;r+=s)o=nm(r,e[r],e[r+1],o);else for(r=i-s;r>=t;r-=s)o=nm(r,e[r],e[r+1],o);return o&&Zh(o,o.next)&&(na(o),o=o.next),o}function Xn(e,t){if(!e)return e;t||(t=e);var i=e,s;do if(s=!1,!i.steiner&&(Zh(i,i.next)||Zt(i.prev,i,i.next)===0)){if(na(i),i=t=i.prev,i===i.next)break;s=!0}else i=i.next;while(s||i!==t);return t}function ia(e,t,i,s,n,r,o){if(e){!o&&r&&rT(e,s,n,r);for(var a=e,l,h;e.prev!==e.next;){if(l=e.prev,h=e.next,r?qE(e,s,n,r):KE(e)){t.push(l.i/i|0),t.push(e.i/i|0),t.push(h.i/i|0),na(e),e=h.next,a=h.next;continue}if(e=h,e===a){o?o===1?(e=JE(Xn(e),t,i),ia(e,t,i,s,n,r,2)):o===2&&QE(e,t,i,s,n,r):ia(Xn(e),t,i,s,n,r,1);break}}}}function KE(e){var t=e.prev,i=e,s=e.next;if(Zt(t,i,s)>=0)return!1;for(var n=t.x,r=i.x,o=s.x,a=t.y,l=i.y,h=s.y,c=n<r?n<o?n:o:r<o?r:o,u=a<l?a<h?a:h:l<h?l:h,d=n>r?n>o?n:o:r>o?r:o,f=a>l?a>h?a:h:l>h?l:h,p=s.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=u&&p.y<=f&&Tr(n,a,r,l,o,h,p.x,p.y)&&Zt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function qE(e,t,i,s){var n=e.prev,r=e,o=e.next;if(Zt(n,r,o)>=0)return!1;for(var a=n.x,l=r.x,h=o.x,c=n.y,u=r.y,d=o.y,f=a<l?a<h?a:h:l<h?l:h,p=c<u?c<d?c:d:u<d?u:d,m=a>l?a>h?a:h:l>h?l:h,g=c>u?c>d?c:d:u>d?u:d,_=Ju(f,p,t,i,s),y=Ju(m,g,t,i,s),b=e.prevZ,v=e.nextZ;b&&b.z>=_&&v&&v.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==o&&Tr(a,c,l,u,h,d,b.x,b.y)&&Zt(b.prev,b,b.next)>=0||(b=b.prevZ,v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==n&&v!==o&&Tr(a,c,l,u,h,d,v.x,v.y)&&Zt(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;b&&b.z>=_;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==o&&Tr(a,c,l,u,h,d,b.x,b.y)&&Zt(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;v&&v.z<=y;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==n&&v!==o&&Tr(a,c,l,u,h,d,v.x,v.y)&&Zt(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function JE(e,t,i){var s=e;do{var n=s.prev,r=s.next.next;!Zh(n,r)&&gy(n,s,s.next,r)&&sa(n,r)&&sa(r,n)&&(t.push(n.i/i|0),t.push(s.i/i|0),t.push(r.i/i|0),na(s),na(s.next),s=e=r),s=s.next}while(s!==e);return Xn(s)}function QE(e,t,i,s,n,r){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&lT(o,a)){var l=_y(o,a);o=Xn(o,o.next),l=Xn(l,l.next),ia(o,t,i,s,n,r,0),ia(l,t,i,s,n,r,0);return}a=a.next}o=o.next}while(o!==e)}function tT(e,t,i,s){var n=[],r,o,a,l,h;for(r=0,o=t.length;r<o;r++)a=t[r]*s,l=r<o-1?t[r+1]*s:e.length,h=my(e,a,l,s,!1),h===h.next&&(h.steiner=!0),n.push(aT(h));for(n.sort(eT),r=0;r<n.length;r++)i=iT(n[r],i);return i}function eT(e,t){return e.x-t.x}function iT(e,t){var i=sT(e,t);if(!i)return t;var s=_y(i,e);return Xn(s,s.next),Xn(i,i.next)}function sT(e,t){var i=t,s=e.x,n=e.y,r=-1/0,o;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var a=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=s&&a>r&&(r=a,o=i.x<i.next.x?i:i.next,a===s))return o}i=i.next}while(i!==t);if(!o)return null;var l=o,h=o.x,c=o.y,u=1/0,d;i=o;do s>=i.x&&i.x>=h&&s!==i.x&&Tr(n<c?s:r,n,h,c,n<c?r:s,n,i.x,i.y)&&(d=Math.abs(n-i.y)/(s-i.x),sa(i,e)&&(d<u||d===u&&(i.x>o.x||i.x===o.x&&nT(o,i)))&&(o=i,u=d)),i=i.next;while(i!==l);return o}function nT(e,t){return Zt(e.prev,e,t.prev)<0&&Zt(t.next,e,e.next)<0}function rT(e,t,i,s){var n=e;do n.z===0&&(n.z=Ju(n.x,n.y,t,i,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,oT(n)}function oT(e){var t,i,s,n,r,o,a,l,h=1;do{for(i=e,e=null,r=null,o=0;i;){for(o++,s=i,a=0,t=0;t<h&&(a++,s=s.nextZ,!!s);t++);for(l=h;a>0||l>0&&s;)a!==0&&(l===0||!s||i.z<=s.z)?(n=i,i=i.nextZ,a--):(n=s,s=s.nextZ,l--),r?r.nextZ=n:e=n,n.prevZ=r,r=n;i=s}r.nextZ=null,h*=2}while(o>1);return e}function Ju(e,t,i,s,n){return e=(e-i)*n|0,t=(t-s)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function aT(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Tr(e,t,i,s,n,r,o,a){return(n-o)*(t-a)>=(e-o)*(r-a)&&(e-o)*(s-a)>=(i-o)*(t-a)&&(i-o)*(r-a)>=(n-o)*(s-a)}function lT(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!hT(e,t)&&(sa(e,t)&&sa(t,e)&&cT(e,t)&&(Zt(e.prev,e,t.prev)||Zt(e,t.prev,t))||Zh(e,t)&&Zt(e.prev,e,e.next)>0&&Zt(t.prev,t,t.next)>0)}function Zt(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Zh(e,t){return e.x===t.x&&e.y===t.y}function gy(e,t,i,s){var n=Va(Zt(e,t,i)),r=Va(Zt(e,t,s)),o=Va(Zt(i,s,e)),a=Va(Zt(i,s,t));return!!(n!==r&&o!==a||n===0&&za(e,i,t)||r===0&&za(e,s,t)||o===0&&za(i,e,s)||a===0&&za(i,t,s))}function za(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Va(e){return e>0?1:e<0?-1:0}function hT(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&gy(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function sa(e,t){return Zt(e.prev,e,e.next)<0?Zt(e,t,e.next)>=0&&Zt(e,e.prev,t)>=0:Zt(e,t,e.prev)<0||Zt(e,e.next,t)<0}function cT(e,t){var i=e,s=!1,n=(e.x+t.x)/2,r=(e.y+t.y)/2;do i.y>r!=i.next.y>r&&i.next.y!==i.y&&n<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next;while(i!==e);return s}function _y(e,t){var i=new Qu(e.i,e.x,e.y),s=new Qu(t.i,t.x,t.y),n=e.next,r=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,s.next=i,i.prev=s,r.next=s,s.prev=r,s}function nm(e,t,i,s){var n=new Qu(e,t,i);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function na(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Qu(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}$h.deviation=function(e,t,i,s){var n=t&&t.length,r=n?t[0]*i:e.length,o=Math.abs(td(e,0,r,i));if(n)for(var a=0,l=t.length;a<l;a++){var h=t[a]*i,c=a<l-1?t[a+1]*i:e.length;o-=Math.abs(td(e,h,c,i))}var u=0;for(a=0;a<s.length;a+=3){var d=s[a]*i,f=s[a+1]*i,p=s[a+2]*i;u+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function td(e,t,i,s){for(var n=0,r=t,o=i-s;r<i;r+=s)n+=(e[o]-e[r])*(e[r+1]+e[o+1]),o=r;return n}$h.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},s=0,n=0;n<e.length;n++){for(var r=0;r<e[n].length;r++)for(var o=0;o<t;o++)i.vertices.push(e[n][r][o]);n>0&&(s+=e[n-1].length,i.holes.push(s))}return i};var lh={},uT={get exports(){return lh},set exports(e){lh=e}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(i){var s=t&&!t.nodeType&&t,n=e&&!e.nodeType&&e,r=typeof Pr=="object"&&Pr;(r.global===r||r.window===r||r.self===r)&&(i=r);var o,a=2147483647,l=36,h=1,c=26,u=38,d=700,f=72,p=128,m="-",g=/^xn--/,_=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=l-h,x=Math.floor,T=String.fromCharCode,S;function A(D){throw RangeError(b[D])}function M(D,G){for(var W=D.length,q=[];W--;)q[W]=G(D[W]);return q}function O(D,G){var W=D.split("@"),q="";W.length>1&&(q=W[0]+"@",D=W[1]),D=D.replace(y,".");var X=D.split("."),st=M(X,G).join(".");return q+st}function C(D){for(var G=[],W=0,q=D.length,X,st;W<q;)X=D.charCodeAt(W++),X>=55296&&X<=56319&&W<q?(st=D.charCodeAt(W++),(st&64512)==56320?G.push(((X&1023)<<10)+(st&1023)+65536):(G.push(X),W--)):G.push(X);return G}function k(D){return M(D,function(G){var W="";return G>65535&&(G-=65536,W+=T(G>>>10&1023|55296),G=56320|G&1023),W+=T(G),W}).join("")}function P(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:l}function w(D,G){return D+22+75*(D<26)-((G!=0)<<5)}function E(D,G,W){var q=0;for(D=W?x(D/d):D>>1,D+=x(D/G);D>v*c>>1;q+=l)D=x(D/v);return x(q+(v+1)*D/(D+u))}function L(D){var G=[],W=D.length,q,X=0,st=p,ft=f,rt,bt,z,B,H,j,Y,tt,gt;for(rt=D.lastIndexOf(m),rt<0&&(rt=0),bt=0;bt<rt;++bt)D.charCodeAt(bt)>=128&&A("not-basic"),G.push(D.charCodeAt(bt));for(z=rt>0?rt+1:0;z<W;){for(B=X,H=1,j=l;z>=W&&A("invalid-input"),Y=P(D.charCodeAt(z++)),(Y>=l||Y>x((a-X)/H))&&A("overflow"),X+=Y*H,tt=j<=ft?h:j>=ft+c?c:j-ft,!(Y<tt);j+=l)gt=l-tt,H>x(a/gt)&&A("overflow"),H*=gt;q=G.length+1,ft=E(X-B,q,B==0),x(X/q)>a-st&&A("overflow"),st+=x(X/q),X%=q,G.splice(X++,0,st)}return k(G)}function I(D){var G,W,q,X,st,ft,rt,bt,z,B,H,j=[],Y,tt,gt,Et;for(D=C(D),Y=D.length,G=p,W=0,st=f,ft=0;ft<Y;++ft)H=D[ft],H<128&&j.push(T(H));for(q=X=j.length,X&&j.push(m);q<Y;){for(rt=a,ft=0;ft<Y;++ft)H=D[ft],H>=G&&H<rt&&(rt=H);for(tt=q+1,rt-G>x((a-W)/tt)&&A("overflow"),W+=(rt-G)*tt,G=rt,ft=0;ft<Y;++ft)if(H=D[ft],H<G&&++W>a&&A("overflow"),H==G){for(bt=W,z=l;B=z<=st?h:z>=st+c?c:z-st,!(bt<B);z+=l)Et=bt-B,gt=l-B,j.push(T(w(B+Et%gt,0))),bt=x(Et/gt);j.push(T(w(bt,0))),st=E(W,tt,q==X),W=0,++q}++W,++G}return j.join("")}function N(D){return O(D,function(G){return g.test(G)?L(G.slice(4).toLowerCase()):G})}function F(D){return O(D,function(G){return _.test(G)?"xn--"+I(G):G})}if(o={version:"1.3.2",ucs2:{decode:C,encode:k},decode:L,encode:I,toASCII:F,toUnicode:N},s&&n)if(e.exports==s)n.exports=o;else for(S in o)o.hasOwnProperty(S)&&(s[S]=o[S]);else i.punycode=o})(Pr)})(uT,lh);var dT={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},ra={};function fT(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var pT=function(e,t,i,s){t=t||"&",i=i||"=";var n={};if(typeof e!="string"||e.length===0)return n;var r=/\+/g;e=e.split(t);var o=1e3;s&&typeof s.maxKeys=="number"&&(o=s.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var h=e[l].replace(r,"%20"),c=h.indexOf(i),u,d,f,p;c>=0?(u=h.substr(0,c),d=h.substr(c+1)):(u=h,d=""),f=decodeURIComponent(u),p=decodeURIComponent(d),fT(n,f)?Array.isArray(n[f])?n[f].push(p):n[f]=[n[f],p]:n[f]=p}return n},mo=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},mT=function(e,t,i,s){return t=t||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(n){var r=encodeURIComponent(mo(n))+i;return Array.isArray(e[n])?e[n].map(function(o){return r+encodeURIComponent(mo(o))}).join(t):r+encodeURIComponent(mo(e[n]))}).join(t):s?encodeURIComponent(mo(s))+i+encodeURIComponent(mo(e)):""};ra.decode=ra.parse=pT;ra.encode=ra.stringify=mT;var gT=lh,Ki=dT,_T=Kh,yT=IT,bT=MT;function Fi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var xT=/^([a-z0-9.+-]+:)/i,vT=/:[0-9]*$/,wT=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ST=["<",">",'"',"`"," ","\r",`
`,"	"],ET=["{","}","|","\\","^","`"].concat(ST),ed=["'"].concat(ET),rm=["%","/","?",";","#"].concat(ed),om=["/","?","#"],TT=255,am=/^[+a-z0-9A-Z_-]{0,63}$/,AT=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,CT={javascript:!0,"javascript:":!0},id={javascript:!0,"javascript:":!0},Or={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},sd=ra;function Kh(e,t,i){if(e&&Ki.isObject(e)&&e instanceof Fi)return e;var s=new Fi;return s.parse(e,t,i),s}Fi.prototype.parse=function(e,t,i){if(!Ki.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),n=s!==-1&&s<e.indexOf("#")?"?":"#",r=e.split(n),o=/\\/g;r[0]=r[0].replace(o,"/"),e=r.join(n);var a=e;if(a=a.trim(),!i&&e.split("#").length===1){var l=wT.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=sd.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=xT.exec(a);if(h){h=h[0];var c=h.toLowerCase();this.protocol=c,a=a.substr(h.length)}if(i||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=a.substr(0,2)==="//";u&&!(h&&id[h])&&(a=a.substr(2),this.slashes=!0)}if(!id[h]&&(u||h&&!Or[h])){for(var d=-1,f=0;f<om.length;f++){var p=a.indexOf(om[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,g;d===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",d),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),d=-1;for(var f=0;f<rm.length;f++){var p=a.indexOf(rm[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var y=this.hostname.split(/\./),f=0,b=y.length;f<b;f++){var v=y[f];if(v&&!v.match(am)){for(var x="",T=0,S=v.length;T<S;T++)v.charCodeAt(T)>127?x+="x":x+=v[T];if(!x.match(am)){var A=y.slice(0,f),M=y.slice(f+1),O=v.match(AT);O&&(A.push(O[1]),M.unshift(O[2])),M.length&&(a="/"+M.join(".")+a),this.hostname=A.join(".");break}}}this.hostname.length>TT?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=gT.toASCII(this.hostname));var C=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+C,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!CT[c])for(var f=0,b=ed.length;f<b;f++){var P=ed[f];if(a.indexOf(P)!==-1){var w=encodeURIComponent(P);w===P&&(w=escape(P)),a=a.split(P).join(w)}}var E=a.indexOf("#");E!==-1&&(this.hash=a.substr(E),a=a.slice(0,E));var L=a.indexOf("?");if(L!==-1?(this.search=a.substr(L),this.query=a.substr(L+1),t&&(this.query=sd.parse(this.query)),a=a.slice(0,L)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Or[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var C=this.pathname||"",I=this.search||"";this.path=C+I}return this.href=this.format(),this};function MT(e){return Ki.isString(e)&&(e=Kh(e)),e instanceof Fi?e.format():Fi.prototype.format.call(e)}Fi.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",s=this.hash||"",n=!1,r="";this.host?n=e+this.host:this.hostname&&(n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Ki.isObject(this.query)&&Object.keys(this.query).length&&(r=sd.stringify(this.query));var o=this.search||r&&"?"+r||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Or[t])&&n!==!1?(n="//"+(n||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):n||(n=""),s&&s.charAt(0)!=="#"&&(s="#"+s),o&&o.charAt(0)!=="?"&&(o="?"+o),i=i.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+n+i+o+s};function IT(e,t){return Kh(e,!1,!0).resolve(t)}Fi.prototype.resolve=function(e){return this.resolveObject(Kh(e,!1,!0)).format()};Fi.prototype.resolveObject=function(e){if(Ki.isString(e)){var t=new Fi;t.parse(e,!1,!0),e=t}for(var i=new Fi,s=Object.keys(this),n=0;n<s.length;n++){var r=s[n];i[r]=this[r]}if(i.hash=e.hash,e.href==="")return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(i[l]=e[l])}return Or[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!Or[e.protocol]){for(var h=Object.keys(e),c=0;c<h.length;c++){var u=h[c];i[u]=e[u]}return i.href=i.format(),i}if(i.protocol=e.protocol,!e.host&&!id[e.protocol]){for(var b=(e.pathname||"").split("/");b.length&&!(e.host=b.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),b[0]!==""&&b.unshift(""),b.length<2&&b.unshift(""),i.pathname=b.join("/")}else i.pathname=e.pathname;if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var d=i.pathname||"",f=i.search||"";i.path=d+f}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var p=i.pathname&&i.pathname.charAt(0)==="/",m=e.host||e.pathname&&e.pathname.charAt(0)==="/",g=m||p||i.host&&e.pathname,_=g,y=i.pathname&&i.pathname.split("/")||[],b=e.pathname&&e.pathname.split("/")||[],v=i.protocol&&!Or[i.protocol];if(v&&(i.hostname="",i.port=null,i.host&&(y[0]===""?y[0]=i.host:y.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(b[0]===""?b[0]=e.host:b.unshift(e.host)),e.host=null),g=g&&(b[0]===""||y[0]==="")),m)i.host=e.host||e.host===""?e.host:i.host,i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname,i.search=e.search,i.query=e.query,y=b;else if(b.length)y||(y=[]),y.pop(),y=y.concat(b),i.search=e.search,i.query=e.query;else if(!Ki.isNullOrUndefined(e.search)){if(v){i.hostname=i.host=y.shift();var x=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;x&&(i.auth=x.shift(),i.host=i.hostname=x.shift())}return i.search=e.search,i.query=e.query,(!Ki.isNull(i.pathname)||!Ki.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!y.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var T=y.slice(-1)[0],S=(i.host||e.host||y.length>1)&&(T==="."||T==="..")||T==="",A=0,M=y.length;M>=0;M--)T=y[M],T==="."?y.splice(M,1):T===".."?(y.splice(M,1),A++):A&&(y.splice(M,1),A--);if(!g&&!_)for(;A--;A)y.unshift("..");g&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),S&&y.join("/").substr(-1)!=="/"&&y.push("");var O=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(v){i.hostname=i.host=O?"":y.length?y.shift():"";var x=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;x&&(i.auth=x.shift(),i.host=i.hostname=x.shift())}return g=g||i.host&&y.length,g&&!O&&y.unshift(""),y.length?i.pathname=y.join("/"):(i.pathname=null,i.path=null),(!Ki.isNull(i.pathname)||!Ki.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i};Fi.prototype.parseHost=function(){var e=this.host,t=vT.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const PT={parse:_T,format:bT,resolve:yT};function Si(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function go(e){return e.split("?")[0].split("#")[0]}function RT(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function DT(e,t,i){return e.replace(new RegExp(RT(t),"g"),i)}function OT(e,t){let i="",s=0,n=-1,r=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||r===1))if(n!==a-1&&r===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const l=i.lastIndexOf("/");if(l!==i.length-1){l===-1?(i="",s=0):(i=i.slice(0,l),s=i.length-1-i.lastIndexOf("/")),n=a,r=0;continue}}else if(i.length===2||i.length===1){i="",s=0,n=a,r=0;continue}}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+=`/${e.slice(n+1,a)}`:i=e.slice(n+1,a),s=a-n-1;n=a,r=0}else o===46&&r!==-1?++r:r=-1}return i}const Me={toPosix(e){return DT(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){Si(e),e=this.toPosix(e);let t="";const i=/^file:\/\/\//.exec(e),s=/^[^/:]+:\/\//.exec(e),n=/^[^/:]+:\//.exec(e);if(i||s||n){const r=(i==null?void 0:i[0])||(s==null?void 0:s[0])||(n==null?void 0:n[0]);t=r,e=e.slice(r.length)}return t},toAbsolute(e,t,i){if(this.isDataUrl(e))return e;const s=go(this.toPosix(t??Q.ADAPTER.getBaseUrl())),n=go(this.toPosix(i??this.rootname(s)));return Si(e),e=this.toPosix(e),e.startsWith("/")?Me.join(n,e.slice(1)):this.isAbsolute(e)?e:this.join(s,e)},normalize(e){if(e=this.toPosix(e),Si(e),e.length===0)return".";let t="";const i=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const s=e.endsWith("/");return e=OT(e,!1),e.length>0&&s&&(e+="/"),i?`/${e}`:t+e},isAbsolute(e){return Si(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let i=0;i<e.length;++i){const s=e[i];if(Si(s),s.length>0)if(t===void 0)t=s;else{const n=e[i-1]??"";this.extname(n)?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(Si(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const i=t===47;let s=-1,n=!0;const r=this.getProtocol(e),o=e;e=e.slice(r.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!n){s=a;break}}else n=!1;return s===-1?i?"/":this.isUrl(o)?r+e:r:i&&s===1?"//":r+e.slice(0,s)},rootname(e){Si(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const i=e.indexOf("/",t.length);i!==-1?t=e.slice(0,i):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){Si(e),t&&Si(t),e=go(this.toPosix(e));let i=0,s=-1,n=!0,r;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(r=e.length-1;r>=0;--r){const l=e.charCodeAt(r);if(l===47){if(!n){i=r+1;break}}else a===-1&&(n=!1,a=r+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(s=r):(o=-1,s=a))}return i===s?s=a:s===-1&&(s=e.length),e.slice(i,s)}for(r=e.length-1;r>=0;--r)if(e.charCodeAt(r)===47){if(!n){i=r+1;break}}else s===-1&&(n=!1,s=r+1);return s===-1?"":e.slice(i,s)},extname(e){Si(e),e=go(this.toPosix(e));let t=-1,i=0,s=-1,n=!0,r=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!n){i=o+1;break}continue}s===-1&&(n=!1,s=o+1),a===46?t===-1?t=o:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||s===-1||r===0||r===1&&t===s-1&&t===i+1?"":e.slice(t,s)},parse(e){Si(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=go(this.toPosix(e));let i=e.charCodeAt(0);const s=this.isAbsolute(e);let n;t.root=this.rootname(e),s||this.hasProtocol(e)?n=1:n=0;let r=-1,o=0,a=-1,l=!0,h=e.length-1,c=0;for(;h>=n;--h){if(i=e.charCodeAt(h),i===47){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),i===46?r===-1?r=h:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||a===-1||c===0||c===1&&r===a-1&&r===o+1?a!==-1&&(o===0&&s?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&s?(t.name=e.slice(1,r),t.base=e.slice(1,a)):(t.name=e.slice(o,r),t.base=e.slice(o,a)),t.ext=e.slice(r,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},lm={};function wt(e,t,i=3){if(lm[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(s=s.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(s))),lm[t]=!0}let Gc;function kT(){return typeof Gc>"u"&&(Gc=function(){var i;const t={stencil:!0,failIfMajorPerformanceCaveat:Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Q.ADAPTER.getWebGLRenderingContext())return!1;const s=Q.ADAPTER.createCanvas();let n=s.getContext("webgl",t)||s.getContext("experimental-webgl",t);const r=!!((i=n==null?void 0:n.getContextAttributes())!=null&&i.stencil);if(n){const o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,r}catch{return!1}}()),Gc}var FT={grad:.9,turn:360,rad:360/(2*Math.PI)},ys=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},pe=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},fi=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),e>i?i:e>t?e:t},yy=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},hm=function(e){return{r:fi(e.r,0,255),g:fi(e.g,0,255),b:fi(e.b,0,255),a:fi(e.a)}},Hc=function(e){return{r:pe(e.r),g:pe(e.g),b:pe(e.b),a:pe(e.a,3)}},LT=/^#([0-9a-f]{3,8})$/i,Wa=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},by=function(e){var t=e.r,i=e.g,s=e.b,n=e.a,r=Math.max(t,i,s),o=r-Math.min(t,i,s),a=o?r===t?(i-s)/o:r===i?2+(s-t)/o:4+(t-i)/o:0;return{h:60*(a<0?a+6:a),s:r?o/r*100:0,v:r/255*100,a:n}},xy=function(e){var t=e.h,i=e.s,s=e.v,n=e.a;t=t/360*6,i/=100,s/=100;var r=Math.floor(t),o=s*(1-i),a=s*(1-(t-r)*i),l=s*(1-(1-t+r)*i),h=r%6;return{r:255*[s,a,o,o,l,s][h],g:255*[l,s,s,a,o,o][h],b:255*[o,o,l,s,s,a][h],a:n}},cm=function(e){return{h:yy(e.h),s:fi(e.s,0,100),l:fi(e.l,0,100),a:fi(e.a)}},um=function(e){return{h:pe(e.h),s:pe(e.s),l:pe(e.l),a:pe(e.a,3)}},dm=function(e){return xy((i=(t=e).s,{h:t.h,s:(i*=((s=t.l)<50?s:100-s)/100)>0?2*i/(s+i)*100:0,v:s+i,a:t.a}));var t,i,s},Go=function(e){return{h:(t=by(e)).h,s:(n=(200-(i=t.s))*(s=t.v)/100)>0&&n<200?i*s/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,i,s,n},BT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,NT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,UT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,GT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nd={string:[[function(e){var t=LT.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?pe(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?pe(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=UT.exec(e)||GT.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:hm({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=BT.exec(e)||NT.exec(e);if(!t)return null;var i,s,n=cm({h:(i=t[1],s=t[2],s===void 0&&(s="deg"),Number(i)*(FT[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return dm(n)},"hsl"]],object:[[function(e){var t=e.r,i=e.g,s=e.b,n=e.a,r=n===void 0?1:n;return ys(t)&&ys(i)&&ys(s)?hm({r:Number(t),g:Number(i),b:Number(s),a:Number(r)}):null},"rgb"],[function(e){var t=e.h,i=e.s,s=e.l,n=e.a,r=n===void 0?1:n;if(!ys(t)||!ys(i)||!ys(s))return null;var o=cm({h:Number(t),s:Number(i),l:Number(s),a:Number(r)});return dm(o)},"hsl"],[function(e){var t=e.h,i=e.s,s=e.v,n=e.a,r=n===void 0?1:n;if(!ys(t)||!ys(i)||!ys(s))return null;var o=function(a){return{h:yy(a.h),s:fi(a.s,0,100),v:fi(a.v,0,100),a:fi(a.a)}}({h:Number(t),s:Number(i),v:Number(s),a:Number(r)});return xy(o)},"hsv"]]},fm=function(e,t){for(var i=0;i<t.length;i++){var s=t[i][0](e);if(s)return[s,t[i][1]]}return[null,void 0]},HT=function(e){return typeof e=="string"?fm(e.trim(),nd.string):typeof e=="object"&&e!==null?fm(e,nd.object):[null,void 0]},zc=function(e,t){var i=Go(e);return{h:i.h,s:fi(i.s+100*t,0,100),l:i.l,a:i.a}},Vc=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},pm=function(e,t){var i=Go(e);return{h:i.h,s:i.s,l:fi(i.l+100*t,0,100),a:i.a}},rd=function(){function e(t){this.parsed=HT(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return pe(Vc(this.rgba),2)},e.prototype.isDark=function(){return Vc(this.rgba)<.5},e.prototype.isLight=function(){return Vc(this.rgba)>=.5},e.prototype.toHex=function(){return t=Hc(this.rgba),i=t.r,s=t.g,n=t.b,o=(r=t.a)<1?Wa(pe(255*r)):"","#"+Wa(i)+Wa(s)+Wa(n)+o;var t,i,s,n,r,o},e.prototype.toRgb=function(){return Hc(this.rgba)},e.prototype.toRgbString=function(){return t=Hc(this.rgba),i=t.r,s=t.g,n=t.b,(r=t.a)<1?"rgba("+i+", "+s+", "+n+", "+r+")":"rgb("+i+", "+s+", "+n+")";var t,i,s,n,r},e.prototype.toHsl=function(){return um(Go(this.rgba))},e.prototype.toHslString=function(){return t=um(Go(this.rgba)),i=t.h,s=t.s,n=t.l,(r=t.a)<1?"hsla("+i+", "+s+"%, "+n+"%, "+r+")":"hsl("+i+", "+s+"%, "+n+"%)";var t,i,s,n,r},e.prototype.toHsv=function(){return t=by(this.rgba),{h:pe(t.h),s:pe(t.s),v:pe(t.v),a:pe(t.a,3)};var t},e.prototype.invert=function(){return ji({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),ji(zc(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),ji(zc(this.rgba,-t))},e.prototype.grayscale=function(){return ji(zc(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),ji(pm(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),ji(pm(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?ji({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):pe(this.rgba.a,3);var i},e.prototype.hue=function(t){var i=Go(this.rgba);return typeof t=="number"?ji({h:t,s:i.s,l:i.l,a:i.a}):pe(i.h)},e.prototype.isEqual=function(t){return this.toHex()===ji(t).toHex()},e}(),ji=function(e){return e instanceof rd?e:new rd(e)},mm=[],zT=function(e){e.forEach(function(t){mm.indexOf(t)<0&&(t(rd,nd),mm.push(t))})};function VT(e,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var n in i)s[i[n]]=n;var r={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,h=s[this.toHex()];if(h)return h;if(o!=null&&o.closest){var c=this.toRgb(),u=1/0,d="black";if(!r.length)for(var f in i)r[f]=new e(i[f]).toRgb();for(var p in i){var m=(a=c,l=r[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<u&&(u=m,d=p)}return d}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":i[a];return l?new e(l).toRgb():null},"name"])}zT([VT]);const kr=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof kr)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((n,r)=>n===t[r]);if(e!==null&&t!==null){const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:n.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,i,s]=this._components;return{r:e,g:t,b:i,a:s}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,s]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[t,i,s]=this._components;return e[0]=t,e[1]=i,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,s,n]=kr.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=s,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,n=this._int&255;return t&&(i=i*e+.5|0,s=s*e+.5|0,n=n*e+.5|0),(e*255<<24)+(i<<16)+(s<<8)+n}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,s]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,s,n]=this._components;return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e}normalize(e){let t,i,s,n;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const r=e;t=(r>>16&255)/255,i=(r>>8&255)/255,s=(r&255)/255,n=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,s,n=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,s,n=255]=e,t/=255,i/=255,s/=255,n/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=kr.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const r=ji(e);r.isValid()&&({r:t,g:i,b:s,a:n}=r.rgba,t/=255,i/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=s,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((s,n)=>{e[n]=Math.min(Math.max(s,t),i)}),e)}};let Ot=kr;Ot.shared=new kr;Ot.temp=new kr;Ot.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function WT(e){return wt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Ot.shared.setValue(e).toHex()}function jT(e){return wt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Ot.shared.setValue(e).toNumber()}function XT(){const e=[],t=[];for(let s=0;s<32;s++)e[s]=s,t[s]=s;e[mt.NORMAL_NPM]=mt.NORMAL,e[mt.ADD_NPM]=mt.ADD,e[mt.SCREEN_NPM]=mt.SCREEN,t[mt.NORMAL]=mt.NORMAL_NPM,t[mt.ADD]=mt.ADD_NPM,t[mt.SCREEN]=mt.SCREEN_NPM;const i=[];return i.push(t),i.push(e),i}const vy=XT();function wy(e,t){return vy[t?1:0][e]}function YT(e,t=null){const i=e*6;if(t=t||new Uint16Array(i),t.length!==i)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${i}`);for(let s=0,n=0;s<i;s+=6,n+=4)t[s+0]=n+0,t[s+1]=n+1,t[s+2]=n+2,t[s+3]=n+0,t[s+4]=n+2,t[s+5]=n+3;return t}function Sy(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function hh(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function gm(e){return!(e&e-1)&&!!e}function _m(e){let t=(e>65535?1:0)<<4;e>>>=t;let i=(e>255?1:0)<<3;return e>>>=i,t|=i,i=(e>15?1:0)<<2,e>>>=i,t|=i,i=(e>3?1:0)<<1,e>>>=i,t|=i,t|e>>1}function Fr(e,t,i){const s=e.length;let n;if(t>=s||i===0)return;i=t+i>s?s-t:i;const r=s-i;for(n=t;n<r;++n)e[n]=e[n+i];e.length=r}function js(e){return e===0?0:e<0?-1:1}let $T=0;function Yn(){return++$T}const Ey=class{constructor(e,t,i,s){this.left=e,this.top=t,this.right=i,this.bottom=s}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let od=Ey;od.EMPTY=new Ey(0,0,0,0);const ym={},Xi=Object.create(null),Vs=Object.create(null);class ZT{constructor(t,i,s){this._canvas=Q.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=s||Q.RESOLUTION,this.resize(t,i)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,i){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(i*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function bm(e,t,i){for(let s=0,n=4*i*t;s<t;++s,n+=4)if(e[n+3]!==0)return!1;return!0}function xm(e,t,i,s,n){const r=4*t;for(let o=s,a=s*r+4*i;o<=n;++o,a+=r)if(e[a+3]!==0)return!1;return!0}function KT(e){const{width:t,height:i}=e,s=e.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");const r=s.getImageData(0,0,t,i).data;let o=0,a=0,l=t-1,h=i-1;for(;a<i&&bm(r,t,a);)++a;if(a===i)return od.EMPTY;for(;bm(r,t,h);)--h;for(;xm(r,t,o,a,h);)++o;for(;xm(r,t,l,a,h);)--l;return++l,++h,new od(o,a,l,h)}function qT(e){const t=KT(e),{width:i,height:s}=t;let n=null;if(!t.isEmpty()){const r=e.getContext("2d");if(r===null)throw new TypeError("Failed to get canvas 2D context");n=r.getImageData(t.left,t.top,i,s)}return{width:i,height:s,data:n}}let ja;function JT(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,ja||(ja=document.createElement("a")),ja.href=e;const i=PT.parse(ja.href),s=!i.port&&t.port===""||i.port===t.port;return i.hostname!==t.hostname||!s||i.protocol!==t.protocol?"anonymous":""}function ln(e,t=1){var s;const i=(s=Q.RETINA_PREFIX)==null?void 0:s.exec(e);return i?parseFloat(i[1]):t}var it=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(it||{});const ad=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},vm=(e,t)=>ad(e).priority??t,dt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(ad).forEach(t=>{t.type.forEach(i=>{var s,n;return(n=(s=this._removeHandlers)[i])==null?void 0:n.call(s,t)})}),this},add(...e){return e.map(ad).forEach(t=>{t.type.forEach(i=>{const s=this._addHandlers,n=this._queue;s[i]?s[i](t):(n[i]=n[i]||[],n[i].push(t))})}),this},handle(e,t,i){const s=this._addHandlers,n=this._removeHandlers;if(s[e]||n[e])throw new Error(`Extension type ${e} already has a handler`);s[e]=t,n[e]=i;const r=this._queue;return r[e]&&(r[e].forEach(o=>t(o)),delete r[e]),this},handleByMap(e,t){return this.handle(e,i=>{t[i.name]=i.ref},i=>{delete t[i.name]})},handleByList(e,t,i=-1){return this.handle(e,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((n,r)=>vm(r,i)-vm(n,i)))},s=>{const n=t.indexOf(s.ref);n!==-1&&t.splice(n,1)})}};class ld{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const QT=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function t2(e){let t="";for(let i=0;i<e;++i)i>0&&(t+=`
else `),i<e-1&&(t+=`if(test == ${i}.0){}`);return t}function e2(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);for(;;){const s=QT.replace(/%forloop%/gi,t2(e));if(t.shaderSource(i,s),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))e=e/2|0;else break}return e}const Wc=0,jc=1,Xc=2,Yc=3,$c=4,Zc=5;class Us{constructor(){this.data=0,this.blendMode=mt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Wc)}set blend(t){!!(this.data&1<<Wc)!==t&&(this.data^=1<<Wc)}get offsets(){return!!(this.data&1<<jc)}set offsets(t){!!(this.data&1<<jc)!==t&&(this.data^=1<<jc)}get culling(){return!!(this.data&1<<Xc)}set culling(t){!!(this.data&1<<Xc)!==t&&(this.data^=1<<Xc)}get depthTest(){return!!(this.data&1<<Yc)}set depthTest(t){!!(this.data&1<<Yc)!==t&&(this.data^=1<<Yc)}get depthMask(){return!!(this.data&1<<Zc)}set depthMask(t){!!(this.data&1<<Zc)!==t&&(this.data^=1<<Zc)}get clockwiseFrontFace(){return!!(this.data&1<<$c)}set clockwiseFrontFace(t){!!(this.data&1<<$c)!==t&&(this.data^=1<<$c)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==mt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Us;return t.depthTest=!1,t.blend=!0,t}}const hd=[];function Ty(e,t){if(!e)return null;let i="";if(typeof e=="string"){const s=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);s&&(i=s[1].toLowerCase())}for(let s=hd.length-1;s>=0;--s){const n=hd[s];if(n.test&&n.test(e,i))return new n(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Li{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,i,s,n,r,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:c}=this;this._aliasCount++;for(let u=0,d=c.length;u<d;u++)c[u][h](t,i,s,n,r,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Li.prototype,{dispatch:{value:Li.prototype.emit},run:{value:Li.prototype.emit}});class oa{constructor(t=0,i=0){this._width=t,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new Li("setRealSize"),this.onUpdate=new Li("update"),this.onError=new Li("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,i){(t!==this._width||i!==this._height)&&(this._width=t,this._height=i,this.onResize.emit(t,i))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,i,s){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,i){return!1}}class Ca extends oa{constructor(t,i){const{width:s,height:n}=i||{};if(!s||!n)throw new Error("BufferResource width or height invalid");super(s,n),this.data=t}upload(t,i,s){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Vi.UNPACK);const r=i.realWidth,o=i.realHeight;return s.width===r&&s.height===o?n.texSubImage2D(i.target,0,0,0,r,o,i.format,s.type,this.data):(s.width=r,s.height=o,n.texImage2D(i.target,0,s.internalFormat,r,o,0,i.format,s.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const i2={scaleMode:Ms.NEAREST,format:Z.RGBA,alphaMode:Vi.NPM},br=class extends jn{constructor(e=null,t=null){super(),t=Object.assign({},br.defaultOptions,t);const{alphaMode:i,mipmap:s,anisotropicLevel:n,scaleMode:r,width:o,height:a,wrapMode:l,format:h,type:c,target:u,resolution:d,resourceOptions:f}=t;e&&!(e instanceof oa)&&(e=Ty(e,f),e.internal=!0),this.resolution=d||Q.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=n,this._wrapMode=l,this._scaleMode=r,this.format=h,this.type=c,this.target=u,this.alphaMode=i,this.uid=Yn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=gm(this.realWidth)&&gm(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Vs[this.cacheId],delete Xi[this.cacheId],this.cacheId=null),this.dispose(),br.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=Q.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let n=null;if(s)n=e;else{if(!e._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${Yn()}`}n=e._pixiId}let r=Vs[n];if(s&&i&&!r)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return r||(r=new br(e,t),r.cacheId=n,br.addToCache(r,n)),r}static fromBuffer(e,t,i,s){e=e||new Float32Array(t*i*4);const n=new Ca(e,{width:t,height:i}),r=e instanceof Float32Array?pt.FLOAT:pt.UNSIGNED_BYTE;return new br(n,Object.assign({},i2,{type:r},s))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Vs[t]&&Vs[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Vs[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Vs[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Vs[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Vs[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let _t=br;_t.defaultOptions={mipmap:ls.POW2,anisotropicLevel:0,scaleMode:Ms.LINEAR,wrapMode:tn.CLAMP,alphaMode:Vi.UNPACK,target:Dr.TEXTURE_2D,format:Z.RGBA,type:pt.UNSIGNED_BYTE};_t._globalBatch=0;class cd{constructor(){this.texArray=null,this.blend=0,this.type=Qi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let s2=0,ue=class Ay{constructor(t,i=!0,s=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=s,this.static=i,this.id=s2++,this.disposeRunner=new Li("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?is.ELEMENT_ARRAY_BUFFER:is.ARRAY_BUFFER}get index(){return this.type===is.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Ay(t)}};class ch{constructor(t,i=0,s=!1,n=pt.FLOAT,r,o,a,l=1){this.buffer=t,this.size=i,this.normalized=s,this.type=n,this.stride=r,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,i,s,n,r){return new ch(t,i,s,n,r)}}const n2={Float32Array,Uint32Array,Int32Array,Uint8Array};function r2(e,t){let i=0,s=0;const n={};for(let l=0;l<e.length;l++)s+=t[l],i+=e[l].length;const r=new ArrayBuffer(i*4);let o=null,a=0;for(let l=0;l<e.length;l++){const h=t[l],c=e[l],u=Sy(c);n[u]||(n[u]=new n2[u](r)),o=n[u];for(let d=0;d<c.length;d++){const f=(d/h|0)*s+a,p=d%h;o[f+p]=c[d]}a+=h}return new Float32Array(r)}const wm={5126:4,5123:2,5121:1};let o2=0;const a2={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class hn{constructor(t=[],i={}){this.buffers=t,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=o2++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Li("disposeGeometry"),this.refCount=0}addAttribute(t,i,s=0,n=!1,r,o,a,l=!1){if(!i)throw new Error("You must pass a buffer when creating an attribute");i instanceof ue||(i instanceof Array&&(i=new Float32Array(i)),i=new ue(i));const h=t.split("|");if(h.length>1){for(let u=0;u<h.length;u++)this.addAttribute(h[u],i,s,n,r);return this}let c=this.buffers.indexOf(i);return c===-1&&(this.buffers.push(i),c=this.buffers.length-1),this.attributes[t]=new ch(c,s,n,r,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ue||(t instanceof Array&&(t=new Uint16Array(t)),t=new ue(t)),t.type=is.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],i=[],s=new ue;let n;for(n in this.attributes){const r=this.attributes[n],o=this.buffers[r.buffer];t.push(o.data),i.push(r.size*wm[r.type]/4),r.buffer=0}for(s.data=r2(t,i),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const i=this.attributes[t];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new hn;for(let i=0;i<this.buffers.length;i++)t.buffers[i]=new ue(this.buffers[i].data.slice(0));for(const i in this.attributes){const s=this.attributes[i];t.attributes[i]=new ch(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=is.ELEMENT_ARRAY_BUFFER),t}static merge(t){const i=new hn,s=[],n=[],r=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,r[l]=0}for(let a=0;a<o.buffers.length;a++)s[a]=new a2[Sy(o.buffers[a].data)](n[a]),i.buffers[a]=new ue(s[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)s[l].set(o.buffers[l].data,r[l]),r[l]+=o.buffers[l].data.length}if(i.attributes=o.attributes,o.indexBuffer){i.indexBuffer=i.buffers[o.buffers.indexOf(o.indexBuffer)],i.indexBuffer.type=is.ELEMENT_ARRAY_BUFFER;let a=0,l=0,h=0,c=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){c=u;break}for(const u in o.attributes){const d=o.attributes[u];(d.buffer|0)===c&&(l+=d.size*wm[d.type]/4)}for(let u=0;u<t.length;u++){const d=t[u].indexBuffer.data;for(let f=0;f<d.length;f++)i.indexBuffer.data[f+h]+=a;a+=t[u].buffers[c].data.length/l,h+=d.length}}return i}}class Cy extends hn{constructor(t=!1){super(),this._buffer=new ue(null,t,!1),this._indexBuffer=new ue(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,pt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,pt.FLOAT).addAttribute("aColor",this._buffer,4,!0,pt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,pt.FLOAT).addIndex(this._indexBuffer)}}const uh=Math.PI*2,l2=180/Math.PI,h2=Math.PI/180;var we=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(we||{});class Mt{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new Mt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Xa=[new Mt,new Mt,new Mt,new Mt];class xt{constructor(t=0,i=0,s=0,n=0){this.x=Number(t),this.y=Number(i),this.width=Number(s),this.height=Number(n),this.type=we.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new xt(0,0,0,0)}clone(){return new xt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(t,i){if(!i){const A=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=A)return!1;const O=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>O}const s=this.left,n=this.right,r=this.top,o=this.bottom;if(n<=s||o<=r)return!1;const a=Xa[0].set(t.left,t.top),l=Xa[1].set(t.left,t.bottom),h=Xa[2].set(t.right,t.top),c=Xa[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(i.a*i.d-i.b*i.c);if(u===0||(i.apply(a,a),i.apply(l,l),i.apply(h,h),i.apply(c,c),Math.max(a.x,l.x,h.x,c.x)<=s||Math.min(a.x,l.x,h.x,c.x)>=n||Math.max(a.y,l.y,h.y,c.y)<=r||Math.min(a.y,l.y,h.y,c.y)>=o))return!1;const d=u*(l.y-a.y),f=u*(a.x-l.x),p=d*s+f*r,m=d*n+f*r,g=d*s+f*o,_=d*n+f*o;if(Math.max(p,m,g,_)<=d*a.x+f*a.y||Math.min(p,m,g,_)>=d*c.x+f*c.y)return!1;const y=u*(a.y-h.y),b=u*(h.x-a.x),v=y*s+b*r,x=y*n+b*r,T=y*s+b*o,S=y*n+b*o;return!(Math.max(v,x,T,S)<=y*a.x+b*a.y||Math.min(v,x,T,S)>=y*c.x+b*c.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(s-i,0),this.y=n,this.height=Math.max(r-n,0),this}ceil(t=1,i=.001){const s=Math.ceil((this.x+this.width-i)*t)/t,n=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=s-this.x,this.height=n-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=s-i,this.y=n,this.height=r-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class wf{constructor(t=0,i=0,s=0){this.x=t,this.y=i,this.radius=s,this.type=we.CIRC}clone(){return new wf(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const s=this.radius*this.radius;let n=this.x-t,r=this.y-i;return n*=n,r*=r,n+r<=s}getBounds(){return new xt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Sf{constructor(t=0,i=0,s=0,n=0){this.x=t,this.y=i,this.width=s,this.height=n,this.type=we.ELIP}clone(){return new Sf(this.x,this.y,this.width,this.height)}contains(t,i){if(this.width<=0||this.height<=0)return!1;let s=(t-this.x)/this.width,n=(i-this.y)/this.height;return s*=s,n*=n,s+n<=1}getBounds(){return new xt(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Lr{constructor(...t){let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const s=[];for(let n=0,r=i.length;n<r;n++)s.push(i[n].x,i[n].y);i=s}this.points=i,this.type=we.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),i=new Lr(t);return i.closeStroke=this.closeStroke,i}contains(t,i){let s=!1;const n=this.points.length/2;for(let r=0,o=n-1;r<n;o=r++){const a=this.points[r*2],l=this.points[r*2+1],h=this.points[o*2],c=this.points[o*2+1];l>i!=c>i&&t<(h-a)*((i-l)/(c-l))+a&&(s=!s)}return s}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,i)=>`${t}, ${i}`,"")}]`}}class Ef{constructor(t=0,i=0,s=0,n=0,r=20){this.x=t,this.y=i,this.width=s,this.height=n,this.radius=r,this.type=we.RREC}clone(){return new Ef(this.x,this.y,this.width,this.height,this.radius)}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+s&&i<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let n=t-(this.x+s),r=i-(this.y+s);const o=s*s;if(n*n+r*r<=o||(n=t-(this.x+this.width-s),n*n+r*r<=o)||(r=i-(this.y+this.height-s),n*n+r*r<=o)||(n=t-(this.x+s),n*n+r*r<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Ht{constructor(t=1,i=0,s=0,n=1,r=0,o=0){this.array=null,this.a=t,this.b=i,this.c=s,this.d=n,this.tx=r,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,s,n,r,o){return this.a=t,this.b=i,this.c=s,this.d=n,this.tx=r,this.ty=o,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const s=i||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,i){i=i||new Mt;const s=t.x,n=t.y;return i.x=this.a*s+this.c*n+this.tx,i.y=this.b*s+this.d*n+this.ty,i}applyInverse(t,i){i=i||new Mt;const s=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return i.x=this.d*s*n+-this.c*s*r+(this.ty*this.c-this.tx*this.d)*s,i.y=this.a*s*r+-this.b*s*n+(-this.ty*this.a+this.tx*this.b)*s,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),s=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*i-this.b*s,this.b=n*s+this.b*i,this.c=r*i-this.d*s,this.d=r*s+this.d*i,this.tx=o*i-this.ty*s,this.ty=o*s+this.ty*i,this}append(t){const i=this.a,s=this.b,n=this.c,r=this.d;return this.a=t.a*i+t.b*n,this.b=t.a*s+t.b*r,this.c=t.c*i+t.d*n,this.d=t.c*s+t.d*r,this.tx=t.tx*i+t.ty*n+this.tx,this.ty=t.tx*s+t.ty*r+this.ty,this}setTransform(t,i,s,n,r,o,a,l,h){return this.a=Math.cos(a+h)*r,this.b=Math.sin(a+h)*r,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(s*this.a+n*this.c),this.ty=i-(s*this.b+n*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,n=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,s=this.b,n=this.c,r=this.d,o=t.pivot,a=-Math.atan2(-n,r),l=Math.atan2(s,i),h=Math.abs(a+l);return h<1e-5||Math.abs(uh-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(i*i+s*s),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx+(o.x*i+o.y*n),t.position.y=this.ty+(o.x*s+o.y*r),t}invert(){const t=this.a,i=this.b,s=this.c,n=this.d,r=this.tx,o=t*n-i*s;return this.a=n/o,this.b=-i/o,this.c=-s/o,this.d=t/o,this.tx=(s*this.ty-n*r)/o,this.ty=-(t*this.ty-i*r)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Ht;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Ht}static get TEMP_MATRIX(){return new Ht}}const Cn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Mn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],In=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Pn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ud=[],My=[],Ya=Math.sign;function c2(){for(let e=0;e<16;e++){const t=[];ud.push(t);for(let i=0;i<16;i++){const s=Ya(Cn[e]*Cn[i]+In[e]*Mn[i]),n=Ya(Mn[e]*Cn[i]+Pn[e]*Mn[i]),r=Ya(Cn[e]*In[i]+In[e]*Pn[i]),o=Ya(Mn[e]*In[i]+Pn[e]*Pn[i]);for(let a=0;a<16;a++)if(Cn[a]===s&&Mn[a]===n&&In[a]===r&&Pn[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new Ht;t.set(Cn[e],Mn[e],In[e],Pn[e],0,0),My.push(t)}}c2();const jt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>Cn[e],uY:e=>Mn[e],vX:e=>In[e],vY:e=>Pn[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>ud[e][t],sub:(e,t)=>ud[e][jt.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?jt.S:jt.N:Math.abs(t)*2<=Math.abs(e)?e>0?jt.E:jt.W:t>0?e>0?jt.SE:jt.SW:e>0?jt.NE:jt.NW,matrixAppendRotationInv:(e,t,i=0,s=0)=>{const n=My[jt.inv(t)];n.tx=i,n.ty=s,e.append(n)}};class Xs{constructor(t,i,s=0,n=0){this._x=s,this._y=n,this.cb=t,this.scope=i}clone(t=this.cb,i=this.scope){return new Xs(t,i,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const Iy=class{constructor(){this.worldTransform=new Ht,this.localTransform=new Ht,this.position=new Xs(this.onChange,this,0,0),this.scale=new Xs(this.onChange,this,1,1),this.pivot=new Xs(this.onChange,this,0,0),this.skew=new Xs(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const i=e.worldTransform,s=this.worldTransform;s.a=t.a*i.a+t.b*i.c,s.b=t.a*i.b+t.b*i.d,s.c=t.c*i.a+t.d*i.c,s.d=t.c*i.b+t.d*i.d,s.tx=t.tx*i.a+t.ty*i.c+i.tx,s.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let Tf=Iy;Tf.IDENTITY=new Iy;var u2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,d2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Sm(e,t,i){const s=e.createShader(t);return e.shaderSource(s,i),e.compileShader(s),s}function Kc(e){const t=new Array(e);for(let i=0;i<t.length;i++)t[i]=!1;return t}function Py(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Kc(2*t);case"bvec3":return Kc(3*t);case"bvec4":return Kc(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Br=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],f2={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},p2={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function m2(e,t){var s;const i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in e.uniforms){const r=t[n];if(!r){(s=e.uniforms[n])!=null&&s.group&&(e.uniforms[n].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=e.uniforms[n];let a=!1;for(let l=0;l<Br.length;l++)if(Br[l].test(r,o)){i.push(Br[l].code(n,o)),a=!0;break}if(!a){const h=(r.size===1&&!r.isArray?f2:p2)[r.type].replace("location",`ud["${n}"].location`);i.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}const Ry={};let fr=Ry;function g2(){if(fr===Ry||fr!=null&&fr.isContextLost()){const e=Q.ADAPTER.createCanvas();let t;Q.PREFER_ENV>=Qn.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),fr=t}return fr}let $a;function _2(){if(!$a){$a=di.MEDIUM;const e=g2();e&&e.getShaderPrecisionFormat&&($a=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?di.HIGH:di.MEDIUM)}return $a}function Em(e,t){const i=e.getShaderSource(t).split(`
`).map((h,c)=>`${c}: ${h}`),s=e.getShaderInfoLog(t),n=s.split(`
`),r={},o=n.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!r[h]?(r[h]=!0,!0):!1),a=[""];o.forEach(h=>{i[h-1]=`%c${i[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=i.join(`
`);a[0]=l,console.error(s),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function y2(e,t,i,s){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(i,e.COMPILE_STATUS)||Em(e,i),e.getShaderParameter(s,e.COMPILE_STATUS)||Em(e,s),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const b2={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Dy(e){return b2[e]}let Za=null;const Tm={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Oy(e,t){if(!Za){const i=Object.keys(Tm);Za={};for(let s=0;s<i.length;++s){const n=i[s];Za[e[n]]=Tm[n]}}return Za[t]}function Am(e,t,i){if(e.substring(0,9)!=="precision"){let s=t;return t===di.HIGH&&i!==di.HIGH&&(s=di.MEDIUM),`precision ${s} float;
${e}`}else if(i!==di.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let _o;function x2(){if(typeof _o=="boolean")return _o;try{_o=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{_o=!1}return _o}let v2=0;const Ka={},xr=class{constructor(e,t,i="pixi-shader",s={}){this.extra={},this.id=v2++,this.vertexSrc=e||xr.defaultVertexSrc,this.fragmentSrc=t||xr.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Ka[i]?(Ka[i]++,i+=`-${Ka[i]}`):Ka[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=Am(this.vertexSrc,xr.defaultVertexPrecision,di.HIGH),this.fragmentSrc=Am(this.fragmentSrc,xr.defaultFragmentPrecision,_2())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return d2}static get defaultFragmentSrc(){return u2}static from(e,t,i){const s=e+t;let n=ym[s];return n||(ym[s]=n=new xr(e,t,i)),n}};let Oi=xr;Oi.defaultVertexPrecision=di.HIGH;Oi.defaultFragmentPrecision=Is.apple.device?di.HIGH:di.MEDIUM;let w2=0;class Bi{constructor(t,i,s){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=w2++,this.static=!!i,this.ubo=!!s,t instanceof ue?(this.buffer=t,this.buffer.type=is.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ue(new Float32Array(1)),this.buffer.type=is.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,i,s){if(!this.ubo)this.uniforms[t]=new Bi(i,s);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,i,s){return new Bi(t,i,s)}static uboFrom(t,i){return new Bi(t,i??!0,!0)}}class ss{constructor(t,i){this.uniformBindCount=0,this.program=t,i?i instanceof Bi?this.uniformGroup=i:this.uniformGroup=new Bi(i):this.uniformGroup=new Bi({}),this.disposeRunner=new Li("disposeShader")}checkUniformExists(t,i){if(i.uniforms[t])return!0;for(const s in i.uniforms){const n=i.uniforms[s];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,i,s){const n=Oi.from(t,i);return new ss(n,s)}}class S2{constructor(t,i){if(this.vertexSrc=t,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},!i.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!i.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const s=new Int32Array(t);for(let r=0;r<t;r++)s[r]=r;this.defaultGroupCache[t]=Bi.from({uSamplers:s},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Oi(this.vertexSrc,n)}const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ht,default:this.defaultGroupCache[t]};return new ss(this.programCache[t],i)}generateSampleSrc(t){let i="";i+=`
`,i+=`
`;for(let s=0;s<t;s++)s>0&&(i+=`
else `),s<t-1&&(i+=`if(vTextureId < ${s}.5)`),i+=`
{`,i+=`
	color = texture2D(uSamplers[${s}], vTextureCoord);`,i+=`
}`;return i+=`
`,i+=`
`,i}}class dd{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function E2(){return!Is.apple.device}function T2(e){let t=!0;const i=Q.ADAPTER.getNavigator();if(Is.tablet||Is.phone){if(Is.apple.device){const s=i.userAgent.match(/OS (\d+)_(\d+)?/);s&&parseInt(s[1],10)<11&&(t=!1)}if(Is.android.device){const s=i.userAgent.match(/Android\s([0-9.]*)/);s&&parseInt(s[1],10)<7&&(t=!1)}}return t?e:4}class qh{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var A2=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,C2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Ti=class extends qh{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=Cy,this.vertexSize=6,this.state=Us.for2d(),this.size=Ti.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??T2(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??E2(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return wt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return C2}static get defaultFragmentTemplate(){return A2}setShaderGenerator({vertex:e=Ti.defaultVertexSrc,fragment:t=Ti.defaultFragmentTemplate}={}){this.shaderGenerator=new S2(e,t)}contextChange(){const e=this.renderer.gl;Q.PREFER_ENV===Qn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ti.defaultMaxTextures),this.maxTextures=e2(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Ti,i=this.size/4,s=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new cd);for(;t.length<s;)t.push(new dd);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=Ti._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,r=this.renderer.textureGC.count;let o=++_t._globalBatch,a=0,l=i[0],h=0;s.copyBoundTextures(n,t);for(let c=0;c<this._bufferSize;++c){const u=e[c];e[c]=null,u._batchEnabled!==o&&(l.count>=t&&(s.boundArray(l,n,o,t),this.buildDrawCalls(l,h,c),h=c,l=i[++a],++o),u._batchEnabled=o,u.touched=r,l.elements[l.count++]=u)}l.count>0&&(s.boundArray(l,n,o,t),this.buildDrawCalls(l,h,this._bufferSize),++a,++o);for(let c=0;c<n.length;c++)n[c]=null;_t._globalBatch=o}buildDrawCalls(e,t,i){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:r,vertexSize:o}=this,a=Ti._drawCallPool;let l=this._dcIndex,h=this._aIndex,c=this._iIndex,u=a[l];u.start=this._iIndex,u.texArray=e;for(let d=t;d<i;++d){const f=s[d],p=f._texture.baseTexture,m=vy[p.alphaMode?1:0][f.blendMode];s[d]=null,t<d&&u.blend!==m&&(u.size=c-u.start,t=d,u=a[++l],u.texArray=e,u.start=c),this.packInterleavedGeometry(f,n,r,h,c),h+=f.vertexData.length/2*o,c+=f.indices.length,u.blend=m}t<i&&(u.size=c-u.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;Ti.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,s=Ti._drawCallPool;let n=null;for(let r=0;r<e;r++){const{texArray:o,type:a,size:l,start:h,blend:c}=s[r];n!==o&&(n=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,i.set(this.state),t.drawElements(a,l,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ti.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=hh(Math.ceil(e/8)),i=_m(t),s=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new ld(s*this.vertexSize*4)),n}getIndexBuffer(e){const t=hh(Math.ceil(e/12)),i=_m(t),s=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(s)),n}packInterleavedGeometry(e,t,i,s,n){const{uint32View:r,float32View:o}=t,a=s/this.vertexSize,l=e.uvs,h=e.indices,c=e.vertexData,u=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=Ot.shared.setValue(e._tintRGB).toPremultiplied(d,e._texture.baseTexture.alphaMode>0);for(let p=0;p<c.length;p+=2)o[s++]=c[p],o[s++]=c[p+1],o[s++]=l[p],o[s++]=l[p+1],r[s++]=f,o[s++]=u;for(let p=0;p<h.length;p++)i[n++]=a+h[p]}};let Pi=Ti;Pi.defaultBatchSize=4096;Pi.extension={name:"batch",type:it.RendererPlugin};Pi._drawCallPool=[];Pi._textureArrayPool=[];dt.add(Pi);var M2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,I2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Co=class extends ss{constructor(e,t,i){const s=Oi.from(e||Co.defaultVertexSrc,t||Co.defaultFragmentSrc);super(s,i),this.padding=0,this.resolution=Co.defaultResolution,this.multisample=Co.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Us}apply(e,t,i,s,n){e.applyFilter(this,t,i,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return I2}static get defaultFragmentSrc(){return M2}};let Se=Co;Se.defaultResolution=1;Se.defaultMultisample=ae.NONE;class Jh{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ot(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:i,background:s,backgroundAlpha:n}=t,r=s??i;r!==void 0&&(this.color=r),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Jh.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Jh.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"background"};dt.add(Jh);class ky{constructor(t){this.renderer=t,this.emptyRenderer=new qh(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,i){const{boundTextures:s}=this.renderer.texture;for(let n=i-1;n>=0;--n)t[n]=s[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,i,s,n){const{elements:r,ids:o,count:a}=t;let l=0;for(let h=0;h<a;h++){const c=r[h],u=c._batchLocation;if(u>=0&&u<n&&i[u]===c){o[h]=u;continue}for(;l<n;){const d=i[l];if(d&&d._batchEnabled===s&&d._batchLocation===l){l++;continue}o[h]=l,c._batchLocation=l,i[l]=c;break}}}destroy(){this.renderer=null}}ky.extension={type:it.RendererSystem,name:"batch"};dt.add(ky);let Cm=0;class Qh{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Cm++}init(t){if(t.context)this.initFromContext(t.context);else{const i=this.renderer.background.alpha<1,s=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:i,premultipliedAlpha:s,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Cm++,this.renderer.runners.contextChange.emit(t);const i=this.renderer.view;i.addEventListener!==void 0&&(i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const i=this.createContext(this.renderer.view,t);this.initFromContext(i)}createContext(t,i){let s;if(Q.PREFER_ENV>=Qn.WEBGL2&&(s=t.getContext("webgl2",i)),s)this.webGLVersion=2;else if(this.webGLVersion=1,s=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!s)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=s,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,i={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const i=t.getContextAttributes(),s="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;s&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=s||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Qh.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};Qh.extension={type:it.RendererSystem,name:"context"};dt.add(Qh);class P2 extends Ca{upload(t,i,s){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Vi.UNPACK);const r=i.realWidth,o=i.realHeight;return s.width===r&&s.height===o?n.texSubImage2D(i.target,0,0,0,r,o,i.format,s.type,this.data):(s.width=r,s.height=o,n.texImage2D(i.target,0,s.internalFormat,r,o,0,i.format,s.type,this.data)),!0}}class fd{constructor(t,i){this.width=Math.round(t||100),this.height=Math.round(i||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Li("disposeFramebuffer"),this.multisample=ae.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,i){return this.colorTextures[t]=i||new _t(null,{scaleMode:Ms.NEAREST,resolution:1,mipmap:ls.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new _t(new P2(null,{width:this.width,height:this.height}),{scaleMode:Ms.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ls.OFF,format:Z.DEPTH_COMPONENT,type:pt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,i){if(t=Math.round(t),i=Math.round(i),!(t===this.width&&i===this.height)){this.width=t,this.height=i,this.dirtyId++,this.dirtySize++;for(let s=0;s<this.colorTextures.length;s++){const n=this.colorTextures[s],r=n.resolution;n.setSize(t/r,i/r)}if(this.depthTexture){const s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,i/s)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Fy extends _t{constructor(t={}){if(typeof t=="number"){const i=arguments[0],s=arguments[1],n=arguments[2],r=arguments[3];t={width:i,height:s,scaleMode:n,resolution:r}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=ae.NONE),super(null,t),this.mipmap=ls.OFF,this.valid=!0,this._clear=new Ot([0,0,0,0]),this.framebuffer=new fd(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class cn extends oa{constructor(t){const i=t,s=i.naturalWidth||i.videoWidth||i.width,n=i.naturalHeight||i.videoHeight||i.height;super(s,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,i,s){s===void 0&&!i.startsWith("data:")?t.crossOrigin=JT(i):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}upload(t,i,s,n){const r=t.gl,o=i.realWidth,a=i.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1&&n.buffered.length===0)return!1;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Vi.UNPACK),!this.noSubImage&&i.target===r.TEXTURE_2D&&s.width===o&&s.height===a?r.texSubImage2D(r.TEXTURE_2D,0,0,0,i.format,s.type,n):(s.width=o,s.height=a,r.texImage2D(i.target,0,s.internalFormat,i.format,s.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,i=t.naturalWidth||t.videoWidth||t.width,s=t.naturalHeight||t.videoHeight||t.height;this.resize(i,s),super.update()}dispose(){this.source=null}}class Ly extends cn{constructor(t,i){if(i=i||{},typeof t=="string"){const s=new Image;cn.crossOrigin(s,t,i.crossorigin),s.src=t,t=s}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(i.createBitmap??Q.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.bitmap=null,this._load=null,i.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((i,s)=>{const n=this.source;this.url=n.src;const r=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.resize(n.width,n.height),this._load=null,this.createBitmap?i(this.process()):i(this))};n.complete&&n.src?r():(n.onload=r,n.onerror=o=>{s(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const i=globalThis.createImageBitmap,s=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:s?"cors":"no-cors"}).then(n=>n.blob()).then(n=>i(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Vi.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,i,s){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,i,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,i,s,this.bitmap),!this.preserveBitmap){let n=!0;const r=i._glTextures;for(const o in r){const a=r[o];if(a!==s&&a.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class By{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,i,s){const n=i.width,r=i.height;if(s){const o=t.width/2/n,a=t.height/2/r,l=t.x/n+o,h=t.y/r+a;s=jt.add(s,jt.NW),this.x0=l+o*jt.uX(s),this.y0=h+a*jt.uY(s),s=jt.add(s,2),this.x1=l+o*jt.uX(s),this.y1=h+a*jt.uY(s),s=jt.add(s,2),this.x2=l+o*jt.uX(s),this.y2=h+a*jt.uY(s),s=jt.add(s,2),this.x3=l+o*jt.uX(s),this.y3=h+a*jt.uY(s)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Mm=new By;function qa(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class ut extends jn{constructor(t,i,s,n,r,o,a){if(super(),this.noFrame=!1,i||(this.noFrame=!0,i=new xt(0,0,1,1)),t instanceof ut&&(t=t.baseTexture),this.baseTexture=t,this._frame=i,this.trim=n,this.valid=!1,this._uvs=Mm,this.uvMatrix=null,this.orig=s||i,this._rotate=Number(r||0),r===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Mt(o.x,o.y):new Mt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=i:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:i}=this.baseTexture;i!=null&&i.url&&Xi[i.url]&&ut.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ut.removeFromCache(this),this.textureCacheIds=null}clone(){var n;const t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),s=new ut(this.baseTexture,!this.noFrame&&t,i,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(s._frame=t),s}updateUvs(){this._uvs===Mm&&(this._uvs=new By),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,i={},s=Q.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let r=null;if(n)r=t;else if(t instanceof _t){if(!t.cacheId){const a=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${Yn()}`,_t.addToCache(t,t.cacheId)}r=t.cacheId}else{if(!t._pixiId){const a=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Yn()}`}r=t._pixiId}let o=Xi[r];if(n&&s&&!o)throw new Error(`The cacheId "${r}" does not exist in TextureCache.`);return!o&&!(t instanceof _t)?(i.resolution||(i.resolution=ln(t)),o=new ut(new _t(t,i)),o.baseTexture.cacheId=r,_t.addToCache(o.baseTexture,r),ut.addToCache(o,r)):!o&&t instanceof _t&&(o=new ut(t),ut.addToCache(o,r)),o}static fromURL(t,i){const s=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),n=ut.from(t,Object.assign({resourceOptions:s},i),!1),r=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):r.load().then(()=>Promise.resolve(n))}static fromBuffer(t,i,s,n){return new ut(_t.fromBuffer(t,i,s,n))}static fromLoader(t,i,s,n){const r=new _t(t,Object.assign({scaleMode:_t.defaultOptions.scaleMode,resolution:ln(i)},n)),{resource:o}=r;o instanceof Ly&&(o.url=i);const a=new ut(r);return s||(s=i),_t.addToCache(a.baseTexture,s),ut.addToCache(a,s),s!==i&&(_t.addToCache(a.baseTexture,i),ut.addToCache(a,i)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),Xi[i]&&Xi[i]!==t&&console.warn(`Texture added to the cache with an id [${i}] that already had an entry`),Xi[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=Xi[t];if(i){const s=i.textureCacheIds.indexOf(t);return s>-1&&i.textureCacheIds.splice(s,1),delete Xi[t],i}}else if(t!=null&&t.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)Xi[t.textureCacheIds[i]]===t&&delete Xi[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:i,y:s,width:n,height:r}=t,o=i+n>this.baseTexture.width,a=s+r>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",h=`X: ${i} + ${n} = ${i+n} > ${this.baseTexture.width}`,c=`Y: ${s} + ${r} = ${s+r} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${l} ${c}`)}this.valid=n&&r&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ut._EMPTY||(ut._EMPTY=new ut(new _t),qa(ut._EMPTY),qa(ut._EMPTY.baseTexture)),ut._EMPTY}static get WHITE(){if(!ut._WHITE){const t=Q.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),ut._WHITE=new ut(_t.from(t)),qa(ut._WHITE),qa(ut._WHITE.baseTexture)}return ut._WHITE}}class tr extends ut{constructor(t,i){super(t,i),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i,s=!0){const n=this.baseTexture.resolution,r=Math.round(t*n)/n,o=Math.round(i*n)/n;this.valid=r>0&&o>0,this._frame.width=this.orig.width=r,this._frame.height=this.orig.height=o,s&&this.baseTexture.resize(r,o),this.updateUvs()}setResolution(t){const{baseTexture:i}=this;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))}static create(t){return new tr(new Fy(t))}}class Ny{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,i,s=ae.NONE){const n=new Fy(Object.assign({width:t,height:i,resolution:1,multisample:s},this.textureOptions));return new tr(n)}getOptimalTexture(t,i,s=1,n=ae.NONE){let r;t=Math.ceil(t*s-1e-6),i=Math.ceil(i*s-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||i!==this._pixelsHeight?(t=hh(t),i=hh(i),r=((t&65535)<<16|i&65535)>>>0,n>1&&(r+=n*4294967296)):r=n>1?-n:-1,this.texturePool[r]||(this.texturePool[r]=[]);let o=this.texturePool[r].pop();return o||(o=this.createTexture(t,i,n)),o.filterPoolKey=r,o.setResolution(s),o}getFilterTexture(t,i,s){const n=this.getOptimalTexture(t.width,t.height,i||t.resolution,s||ae.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const i=t.filterPoolKey;t.filterFrame=null,this.texturePool[i].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const i in this.texturePool){const s=this.texturePool[i];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const s=this.texturePool[i];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Ny.SCREEN_KEY=-1;class R2 extends hn{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Uy extends hn{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ue(this.vertices),this.uvBuffer=new ue(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,i){let s=0,n=0;return this.uvs[0]=s,this.uvs[1]=n,this.uvs[2]=s+i.width/t.width,this.uvs[3]=n,this.uvs[4]=s+i.width/t.width,this.uvs[5]=n+i.height/t.height,this.uvs[6]=s,this.uvs[7]=n+i.height/t.height,s=i.x,n=i.y,this.vertices[0]=s,this.vertices[1]=n,this.vertices[2]=s+i.width,this.vertices[3]=n,this.vertices[4]=s+i.width,this.vertices[5]=n+i.height,this.vertices[6]=s,this.vertices[7]=n+i.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class D2{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ae.NONE,this.sourceFrame=new xt,this.destinationFrame=new xt,this.bindingSourceFrame=new xt,this.bindingDestinationFrame=new xt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ja=[new Mt,new Mt,new Mt,new Mt],qc=new Ht;class Gy{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Ny,this.statePool=[],this.quad=new R2,this.quadUv=new Uy,this.tempRect=new xt,this.activeState={},this.globalUniforms=new Bi({outputFrame:new xt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,i){const s=this.renderer,n=this.defaultFilterStack,r=this.statePool.pop()||new D2,o=this.renderer.renderTexture;let a=i[0].resolution,l=i[0].multisample,h=i[0].padding,c=i[0].autoFit,u=i[0].legacy??!0;for(let p=1;p<i.length;p++){const m=i[p];a=Math.min(a,m.resolution),l=Math.min(l,m.multisample),h=this.useMaxPadding?Math.max(h,m.padding):h+m.padding,c=c&&m.autoFit,u=u||(m.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(r),r.resolution=a,r.multisample=l,r.legacy=u,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(h);const d=this.tempRect.copyFrom(o.sourceFrame);s.projection.transform&&this.transformAABB(qc.copyFrom(s.projection.transform).invert(),d),c?(r.sourceFrame.fit(d),(r.sourceFrame.width<=0||r.sourceFrame.height<=0)&&(r.sourceFrame.width=0,r.sourceFrame.height=0)):r.sourceFrame.intersects(d)||(r.sourceFrame.width=0,r.sourceFrame.height=0),this.roundFrame(r.sourceFrame,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,a,l),r.filters=i,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=r.sourceFrame.width,f.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,r.bindingSourceFrame.copyFrom(o.sourceFrame),r.bindingDestinationFrame.copyFrom(o.destinationFrame),r.transform=s.projection.transform,s.projection.transform=null,o.bind(r.renderTexture,r.sourceFrame,f),s.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,i=t.pop(),s=i.filters;this.activeState=i;const n=this.globalUniforms.uniforms;n.outputFrame=i.sourceFrame,n.resolution=i.resolution;const r=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(r[0]=i.destinationFrame.width,r[1]=i.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],o[0]=Math.round(r[0]*i.resolution),o[1]=Math.round(r[1]*i.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=i.sourceFrame.width*r[2]-.5*o[2],a[3]=i.sourceFrame.height*r[3]-.5*o[3],i.legacy){const h=n.filterArea;h[0]=i.destinationFrame.width,h[1]=i.destinationFrame.height,h[2]=i.sourceFrame.x,h[3]=i.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),s.length===1)s[0].apply(this,i.renderTexture,l.renderTexture,Zi.BLEND,i),this.returnFilterTexture(i.renderTexture);else{let h=i.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,i.resolution);c.filterFrame=h.filterFrame;let u=0;for(u=0;u<s.length-1;++u){u===1&&i.multisample>1&&(c=this.getOptimalFilterTexture(h.width,h.height,i.resolution),c.filterFrame=h.filterFrame),s[u].apply(this,h,c,Zi.CLEAR,i);const d=h;h=c,c=d}s[u].apply(this,h,l.renderTexture,Zi.BLEND,i),u>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(c)}i.clear(),this.statePool.push(i)}bindAndClear(t,i=Zi.CLEAR){const{renderTexture:s,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,s.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const r=n.stateId&1||this.forceClear;(i===Zi.CLEAR||i===Zi.BLIT&&r)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,i,s,n){const r=this.renderer;r.state.set(t.state),this.bindAndClear(s,n),t.uniforms.uSampler=i,t.uniforms.filterGlobals=this.globalUniforms,r.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(i._frame,i.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(Qi.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(Qi.TRIANGLE_STRIP))}calculateSpriteMatrix(t,i){const{sourceFrame:s,destinationFrame:n}=this.activeState,{orig:r}=i._texture,o=t.set(n.width,0,0,n.height,s.x,s.y),a=i.worldTransform.copyTo(Ht.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/r.width,1/r.height),o.translate(i.anchor.x,i.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,i,s=1,n=ae.NONE){return this.texturePool.getOptimalTexture(t,i,s,n)}getFilterTexture(t,i,s){if(typeof t=="number"){const r=t;t=i,i=r}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,i||t.resolution,s||ae.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,i){const s=Ja[0],n=Ja[1],r=Ja[2],o=Ja[3];s.set(i.left,i.top),n.set(i.left,i.bottom),r.set(i.right,i.top),o.set(i.right,i.bottom),t.apply(s,s),t.apply(n,n),t.apply(r,r),t.apply(o,o);const a=Math.min(s.x,n.x,r.x,o.x),l=Math.min(s.y,n.y,r.y,o.y),h=Math.max(s.x,n.x,r.x,o.x),c=Math.max(s.y,n.y,r.y,o.y);i.x=a,i.y=l,i.width=h-a,i.height=c-l}roundFrame(t,i,s,n,r){if(!(t.width<=0||t.height<=0||s.width<=0||s.height<=0)){if(r){const{a:o,b:a,c:l,d:h}=r;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}r=r?qc.copyFrom(r):qc.identity(),r.translate(-s.x,-s.y).scale(n.width/s.width,n.height/s.height).translate(n.x,n.y),this.transformAABB(r,t),t.ceil(i),this.transformAABB(r.invert(),t)}}}Gy.extension={type:it.RendererSystem,name:"filter"};dt.add(Gy);class O2{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ae.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const k2=new xt;class Hy{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new fd(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new xt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let i=this.renderer.context.extensions.drawBuffers,s=this.renderer.context.extensions.depthTexture;Q.PREFER_ENV===Qn.WEBGL_LEGACY&&(i=null,s=null),i?t.drawBuffers=n=>i.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),s||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,i,s=0){const{gl:n}=this;if(t){const r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,r.framebuffer)),r.mipLevel!==s&&(t.dirtyId++,t.dirtyFormat++,r.mipLevel=s),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,r.dirtySize=t.dirtySize,this.updateFramebuffer(t,s)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),i){const o=i.width>>s,a=i.height>>s,l=o/i.width;this.setViewport(i.x*l,i.y*l,o,a)}else{const o=t.width>>s,a=t.height>>s;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,i,s,n){const r=this.viewport;t=Math.round(t),i=Math.round(i),s=Math.round(s),n=Math.round(n),(r.width!==s||r.height!==n||r.x!==t||r.y!==i)&&(r.x=t,r.y=i,r.width=s,r.height=n,this.gl.viewport(t,i,s,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,i,s,n,r=Ku.COLOR|Ku.DEPTH){const{gl:o}=this;o.clearColor(t,i,s,n),o.clear(r)}initFramebuffer(t){const{gl:i}=this,s=new O2(i.createFramebuffer());return s.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(t),t.disposeRunner.add(this),s}resizeFramebuffer(t){const{gl:i}=this,s=t.glFramebuffers[this.CONTEXT_UID];s.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let r=n.length;i.drawBuffers||(r=Math.min(r,1));for(let o=0;o<r;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&s.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,i){const{gl:s}=this,n=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures;let o=r.length;s.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||s.createRenderbuffer():n.msaaBuffer&&(s.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const h=r[l],c=h.parentTextureArray||h;this.renderer.texture.bind(c,0),l===0&&n.msaaBuffer?(s.bindRenderbuffer(s.RENDERBUFFER,n.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,n.msaaBuffer)):(s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+l,h.target,c._glTextures[this.CONTEXT_UID].texture,i),a.push(s.COLOR_ATTACHMENT0+l))}if(a.length>1&&s.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const h=t.depthTexture;this.renderer.texture.bind(h,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,i)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,n.stencil),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,t.width,t.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n.stencil)):n.stencil&&(s.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:i}=this;let s=ae.NONE;if(t<=1||i===null)return s;for(let n=0;n<i.length;n++)if(i[n]<=t){s=i[n];break}return s===1&&(s=ae.NONE),s}blit(t,i,s){const{current:n,renderer:r,gl:o,CONTEXT_UID:a}=this;if(r.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const c=n.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new fd(n.width,n.height),l.blitFramebuffer.addColorTexture(0,c)),t=l.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}i||(i=k2,i.width=n.width,i.height=n.height),s||(s=i);const h=i.width===s.width&&i.height===s.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(i.left,i.top,i.right,i.bottom,s.left,s.top,s.right,s.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,i){const s=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!s)return;delete t.glFramebuffers[this.CONTEXT_UID];const r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),i||(n.deleteFramebuffer(s.framebuffer),s.msaaBuffer&&n.deleteRenderbuffer(s.msaaBuffer),s.stencil&&n.deleteRenderbuffer(s.stencil)),s.blitFramebuffer&&this.disposeFramebuffer(s.blitFramebuffer,i)}disposeAll(t){const i=this.managedFramebuffers;this.managedFramebuffers=[];for(let s=0;s<i.length;s++)this.disposeFramebuffer(i[s],t)}forceStencil(){const t=this.current;if(!t)return;const i=t.glFramebuffers[this.CONTEXT_UID];if(!i||i.stencil)return;t.stencil=!0;const s=t.width,n=t.height,r=this.gl,o=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,o),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,s,n):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,s,n),i.stencil=o,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new xt}destroy(){this.renderer=null}}Hy.extension={type:it.RendererSystem,name:"framebuffer"};dt.add(Hy);const Jc={5126:4,5123:2,5121:1};class zy{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){let s=this.renderer.context.extensions.vertexArrayObject;Q.PREFER_ENV===Qn.WEBGL_LEGACY&&(s=null),s?(t.createVertexArray=()=>s.createVertexArrayOES(),t.bindVertexArray=n=>s.bindVertexArrayOES(n),t.deleteVertexArray=n=>s.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(i.webGLVersion!==2){const s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=(n,r)=>s.vertexAttribDivisorANGLE(n,r),t.drawElementsInstanced=(n,r,o,a,l)=>s.drawElementsInstancedANGLE(n,r,o,a,l),t.drawArraysInstanced=(n,r,o,a)=>s.drawArraysInstancedANGLE(n,r,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex}bind(t,i){i=i||this.renderer.shader.shader;const{gl:s}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},r=!0);const o=n[i.program.id]||this.initGeometryVao(t,i,r);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?s.bindVertexArray(o):this.activateVao(t,i.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,i=this.renderer.buffer;for(let s=0;s<t.buffers.length;s++){const n=t.buffers[s];i.update(n)}}checkCompatibility(t,i){const s=t.attributes,n=i.attributeData;for(const r in n)if(!s[r])throw new Error(`shader and geometry incompatible, geometry missing the "${r}" attribute`)}getSignature(t,i){const s=t.attributes,n=i.attributeData,r=["g",t.id];for(const o in s)n[o]&&r.push(o,n[o].location);return r.join("-")}initGeometryVao(t,i,s=!0){const n=this.gl,r=this.CONTEXT_UID,o=this.renderer.buffer,a=i.program;a.glPrograms[r]||this.renderer.shader.generateProgram(i),this.checkCompatibility(t,a);const l=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID];let c=h[l];if(c)return h[a.id]=c,c;const u=t.buffers,d=t.attributes,f={},p={};for(const m in u)f[m]=0,p[m]=0;for(const m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[m].buffer]+=d[m].size*Jc[d[m].type];for(const m in d){const g=d[m],_=g.size;g.stride===void 0&&(f[g.buffer]===_*Jc[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=_*Jc[g.type])}c=n.createVertexArray(),n.bindVertexArray(c);for(let m=0;m<u.length;m++){const g=u[m];o.bind(g),s&&g._glBuffers[r].refCount++}return this.activateVao(t,a),h[a.id]=c,h[l]=c,n.bindVertexArray(null),o.unbind(is.ARRAY_BUFFER),c}disposeGeometry(t,i){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const s=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,r=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!s){if(o)for(let l=0;l<r.length;l++){const h=r[l]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!i&&o.dispose(r[l],i))}if(!i){for(const l in s)if(l[0]==="g"){const h=s[l];this._activeVao===h&&this.unbind(),n.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const i=Object.keys(this.managedGeometries);for(let s=0;s<i.length;s++)this.disposeGeometry(this.managedGeometries[i[s]],t)}activateVao(t,i){const s=this.gl,n=this.CONTEXT_UID,r=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&r.bind(t.indexBuffer);let l=null;for(const h in a){const c=a[h],u=o[c.buffer],d=u._glBuffers[n];if(i.attributeData[h]){l!==d&&(r.bind(u),l=d);const f=i.attributeData[h].location;if(s.enableVertexAttribArray(f),s.vertexAttribPointer(f,c.size,c.type||s.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)s.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,i,s,n){const{gl:r}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?r.UNSIGNED_SHORT:r.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?r.drawElementsInstanced(t,i||o.indexBuffer.data.length,l,(s||0)*a,n||1):r.drawElements(t,i||o.indexBuffer.data.length,l,(s||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?r.drawArraysInstanced(t,s,i||o.getSize(),n||1):r.drawArrays(t,s,i||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}zy.extension={type:it.RendererSystem,name:"geometry"};dt.add(zy);const Im=new Ht;class Vy{constructor(t,i){this._texture=t,this.mapCoord=new Ht,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,i){i===void 0&&(i=t);const s=this.mapCoord;for(let n=0;n<t.length;n+=2){const r=t[n],o=t[n+1];i[n]=r*s.a+o*s.c+s.tx,i[n+1]=r*s.b+o*s.d+s.ty}return i}update(t){const i=this._texture;if(!i||!i.valid||!t&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;const s=i._uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const n=i.orig,r=i.trim;r&&(Im.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Im));const o=i.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(i._frame.x+l+h)/o.width,a[1]=(i._frame.y+l+h)/o.height,a[2]=(i._frame.x+i._frame.width-l+h)/o.width,a[3]=(i._frame.y+i._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=i._frame.width===o.width&&i._frame.height===o.height&&i.rotate===0,!0}}var F2=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,L2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class B2 extends Se{constructor(t,i,s){let n=null;typeof t!="string"&&i===void 0&&s===void 0&&(n=t,t=void 0,i=void 0,s=void 0),super(t||L2,i||F2,s),this.maskSprite=n,this.maskMatrix=new Ht}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,i,s,n){const r=this._maskSprite,o=r._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Vy(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,i,s,n))}}class N2{constructor(t=null){this.type=he.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Se.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=he.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Wy{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,i){let s=i;if(!s.isMaskData){const r=this.maskDataPool.pop()||new N2;r.pooled=!0,r.maskObject=i,s=r}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(s.copyCountersOrReset(n),s._colorMask=n?n._colorMask:15,s.autoDetect&&this.detect(s),s._target=t,s.type!==he.SPRITE&&this.maskStack.push(s),s.enabled)switch(s.type){case he.SCISSOR:this.renderer.scissor.push(s);break;case he.STENCIL:this.renderer.stencil.push(s);break;case he.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s);break;case he.COLOR:this.pushColorMask(s);break}s.type===he.SPRITE&&this.maskStack.push(s)}pop(t){const i=this.maskStack.pop();if(!(!i||i._target!==t)){if(i.enabled)switch(i.type){case he.SCISSOR:this.renderer.scissor.pop(i);break;case he.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case he.SPRITE:this.popSpriteMask(i);break;case he.COLOR:this.popColorMask(i);break}if(i.reset(),i.pooled&&this.maskDataPool.push(i),this.maskStack.length!==0){const s=this.maskStack[this.maskStack.length-1];s.type===he.SPRITE&&s._filters&&(s._filters[0].maskSprite=s.maskObject)}}}detect(t){const i=t.maskObject;i?i.isSprite?t.type=he.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=he.SCISSOR:t.type=he.STENCIL:t.type=he.COLOR}pushSpriteMask(t){const{maskObject:i}=t,s=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new B2]));const r=this.renderer,o=r.renderTexture;let a,l;if(o.current){const c=o.current;a=t.resolution||c.resolution,l=t.multisample??c.multisample}else a=t.resolution||r.resolution,l=t.multisample??r.multisample;n[0].resolution=a,n[0].multisample=l,n[0].maskSprite=i;const h=s.filterArea;s.filterArea=i.getBounds(!0),r.filter.push(s,n),s.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const i=t._colorMask,s=t._colorMask=i&t.colorMask;s!==i&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}popColorMask(t){const i=t._colorMask,s=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;s!==i&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}destroy(){this.renderer=null}}Wy.extension={type:it.RendererSystem,name:"mask"};dt.add(Wy);class jy{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:i}=this.renderer,s=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==s&&(n===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Pm=new Ht,Rm=[],Fl=class extends jy{constructor(e){super(e),this.glConst=Q.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:s}=this,n=s.renderTexture,r=i.getBounds(!0,Rm.pop()??new xt);this.roundFrameToPixels(r,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),t&&r.fit(t),e._scissorRectLocal=r}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:s,d:n}=e;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Fl.isMatrixRotated(t.worldTransform)||Fl.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,s,n){Fl.isMatrixRotated(n)||(n=n?Pm.copyFrom(n):Pm.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,e),e.fit(s),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Rm.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let Xy=Fl;Xy.extension={type:it.RendererSystem,name:"scissor"};dt.add(Xy);class Yy extends jy{constructor(t){super(t),this.glConst=Q.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const i=t.maskObject,{gl:s}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),t._stencilCounter++;const r=t._colorMask;r!==0&&(t._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,n,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,r!==0&&(t._colorMask=r,s.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}pop(t){const i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=s?s._colorMask:15;n!==0&&(s._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(s._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Yy.extension={type:it.RendererSystem,name:"stencil"};dt.add(Yy);class $y{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return wt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return wt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return wt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const i in t)this.plugins[i]=new t[i](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}$y.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"_plugin"};dt.add($y);class Zy{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ht,this.transform=null}update(t,i,s,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,s,n),this.transform&&this.projectionMatrix.append(this.transform);const r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)}calculateProjection(t,i,s,n){const r=this.projectionMatrix,o=n?-1:1;r.identity(),r.a=1/i.width*2,r.d=o*(1/i.height*2),r.tx=-1-i.x*r.a,r.ty=-o-i.y*r.d}setTransform(t){}destroy(){this.renderer=null}}Zy.extension={type:it.RendererSystem,name:"projection"};dt.add(Zy);const U2=new Tf;class Ky{constructor(t){this.renderer=t,this._tempMatrix=new Ht}generateTexture(t,i){const{region:s,...n}=i||{},r=s||t.getLocalBounds(null,!0);r.width===0&&(r.width=1),r.height===0&&(r.height=1);const o=tr.create({width:r.width,height:r.height,...n});this._tempMatrix.tx=-r.x,this._tempMatrix.ty=-r.y;const a=t.transform;return t.transform=U2,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}Ky.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"textureGenerator"};dt.add(Ky);const bn=new xt,yo=new xt;class qy{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new xt,this.destinationFrame=new xt,this.viewportFrame=new xt}contextChange(){var i;const t=(i=this.renderer)==null?void 0:i.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,i,s){const n=this.renderer;this.current=t;let r,o,a;t?(r=t.baseTexture,a=r.resolution,i||(bn.width=t.frame.width,bn.height=t.frame.height,i=bn),s||(yo.x=t.frame.x,yo.y=t.frame.y,yo.width=i.width,yo.height=i.height,s=yo),o=r.framebuffer):(a=n.resolution,i||(bn.width=n._view.screen.width,bn.height=n._view.screen.height,i=bn),s||(s=bn,s.width=i.width,s.height=i.height));const l=this.viewportFrame;l.x=s.x*a,l.y=s.y*a,l.width=s.width*a,l.height=s.height*a,t||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(s,i,a,!o),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(s)}clear(t,i){const s=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=Ot.shared.setValue(t||s);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const r=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=r.width!==o.width||r.height!==o.height;if(a){let{x:l,y:h,width:c,height:u}=this.viewportFrame;l=Math.round(l),h=Math.round(h),c=Math.round(c),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,h,c,u)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,i),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}qy.extension={type:it.RendererSystem,name:"renderTexture"};dt.add(qy);class G2{constructor(t,i){this.program=t,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function H2(e,t){const i={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let n=0;n<s;n++){const r=t.getActiveAttrib(e,n);if(r.name.startsWith("gl_"))continue;const o=Oy(t,r.type),a={type:o,name:r.name,size:Dy(o),location:t.getAttribLocation(e,r.name)};i[r.name]=a}return i}function z2(e,t){const i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let n=0;n<s;n++){const r=t.getActiveUniform(e,n),o=r.name.replace(/\[.*?\]$/,""),a=!!r.name.match(/\[.*?\]$/),l=Oy(t,r.type);i[o]={name:o,index:n,type:l,size:r.size,isArray:a,value:Py(l,r.size)}}return i}function V2(e,t){var l;const i=Sm(e,e.VERTEX_SHADER,t.vertexSrc),s=Sm(e,e.FRAGMENT_SHADER,t.fragmentSrc),n=e.createProgram();e.attachShader(n,i),e.attachShader(n,s);const r=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(r&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(n,r.names,r.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||y2(e,n,i,s),t.attributeData=H2(n,e),t.uniformData=z2(n,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((c,u)=>c>u?1:-1);for(let c=0;c<h.length;c++)t.attributeData[h[c]].location=c,e.bindAttribLocation(n,c,h[c]);e.linkProgram(n)}e.deleteShader(i),e.deleteShader(s);const o={};for(const h in t.uniformData){const c=t.uniformData[h];o[h]={location:e.getUniformLocation(n,h),value:Py(c.type,c.size)}}return new G2(n,o)}function W2(e,t,i,s,n){i.buffer.update(n)}const j2={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Jy={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function X2(e){const t=e.map(r=>({data:r,offset:0,dataLen:0,dirty:0}));let i=0,s=0,n=0;for(let r=0;r<t.length;r++){const o=t[r];if(i=Jy[o.data.type],o.data.size>1&&(i=Math.max(i,16)*o.data.size),o.dataLen=i,s%i!==0&&s<16){const a=s%i%16;s+=a,n+=a}s+i>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=i,s=i):(o.offset=n,s+=i,n+=i)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function Y2(e,t){const i=[];for(const s in e)t[s]&&i.push(t[s]);return i.sort((s,n)=>s.index-n.index),i}function $2(e,t){if(!e.autoManage)return{size:0,syncFunc:W2};const i=Y2(e.uniforms,t),{uboElements:s,size:n}=X2(i),r=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<s.length;o++){const a=s[o],l=e.uniforms[a.data.name],h=a.data.name;let c=!1;for(let u=0;u<Br.length;u++){const d=Br[u];if(d.codeUbo&&d.test(a.data,l)){r.push(`offset = ${a.offset/4};`,Br[u].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const u=Dy(a.data.type),d=Math.max(Jy[a.data.type]/16,1),f=u/d,p=(4-f%4)%4;r.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const u=j2[a.data.type];r.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${u};
                `)}}return r.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",r.join(`
`))}}let Z2=0;const Qa={textureCount:0,uboCount:0};class Qy{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Z2++}systemCheck(){if(!x2())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,i){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const s=t.program,n=s.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==s&&(this.program=s,this.gl.useProgram(n.program)),i||(Qa.textureCount=0,Qa.uboCount=0,this.syncUniformGroup(t.uniformGroup,Qa)),n}setUniforms(t){const i=this.shader.program,s=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(s.uniformData,t,this.renderer)}syncUniformGroup(t,i){const s=this.getGlProgram();(!t.static||t.dirtyId!==s.uniformDirtyGroups[t.id])&&(s.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,s,i))}syncUniforms(t,i,s){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(i.uniformData,t.uniforms,this.renderer,s)}createSyncGroups(t){const i=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=m2(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[i],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,i){const s=this.getGlProgram();if(!t.static||t.dirtyId!==0||!s.uniformGroups[t.id]){t.dirtyId=0;const n=s.uniformGroups[t.id]||this.createSyncBufferGroup(t,s,i);t.buffer.update(),n(s.uniformData,t.uniforms,this.renderer,Qa,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,s.uniformBufferBindings[i])}createSyncBufferGroup(t,i,s){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const r=this.gl.getUniformBlockIndex(i.program,s);i.uniformBufferBindings[s]=this.shader.uniformBindCount,n.uniformBlockBinding(i.program,r,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=$2(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return i.uniformGroups[t.id]=a.syncFunc,i.uniformGroups[t.id]}getSignature(t,i,s){const n=t.uniforms,r=[`${s}-`];for(const o in n)r.push(o),i[o]&&r.push(i[o].type);return r.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const i=this.gl,s=t.program,n=V2(i,s);return s.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Qy.extension={type:it.RendererSystem,name:"shader"};dt.add(Qy);class tc{constructor(t){this.renderer=t}run(t){const{renderer:i}=this;i.runners.init.emit(i.options),t.hello&&console.log(`PixiJS 7.2.4 - ${i.rendererLogId} - https://pixijs.com`),i.resize(i.screen.width,i.screen.height)}destroy(){}}tc.defaultOptions={hello:!1};tc.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"startup"};dt.add(tc);function K2(e,t=[]){return t[mt.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.ADD]=[e.ONE,e.ONE],t[mt.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.NONE]=[0,0],t[mt.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[mt.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[mt.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[mt.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[mt.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[mt.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[mt.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[mt.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[mt.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[mt.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[mt.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const q2=0,J2=1,Q2=2,tA=3,eA=4,iA=5,pd=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=mt.NONE,this._blendEq=!1,this.map=[],this.map[q2]=this.setBlend,this.map[J2]=this.setOffset,this.map[Q2]=this.setCullFace,this.map[tA]=this.setDepthTest,this.map[eA]=this.setFrontFace,this.map[iA]=this.setDepthMask,this.checks=[],this.defaultState=new Us,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=K2(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(pd.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(pd.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let tb=pd;tb.extension={type:it.RendererSystem,name:"state"};dt.add(tb);class sA extends jn{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const i=(t.priority??[]).filter(n=>t.systems[n]),s=[...i,...Object.keys(t.systems).filter(n=>!i.includes(n))];for(const n of s)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(i=>{this.runners[i]=new Li(i)})}addSystem(t,i){const s=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=s,this._systemsHash[i]=s;for(const n in this.runners)this.runners[n].add(s);return this}emitWithCustomOptions(t,i){const s=Object.keys(this._systemsHash);t.items.forEach(n=>{const r=s.find(o=>this._systemsHash[o]===n);n[t.name](i[r])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Ll=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Ll.defaultMaxIdle,this.checkCountMax=Ll.defaultCheckCountMax,this.mode=Ll.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==vf.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let s=0;s<t.length;s++){const n=t[s];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[s]=null,i=!0)}if(i){let s=0;for(let n=0;n<t.length;n++)t[n]!==null&&(t[s++]=t[n]);t.length=s}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};let Ri=Ll;Ri.defaultMode=vf.AUTO;Ri.defaultMaxIdle=60*60;Ri.defaultCheckCountMax=60*10;Ri.extension={type:it.RendererSystem,name:"textureGC"};dt.add(Ri);class Qc{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=pt.UNSIGNED_BYTE,this.internalFormat=Z.RGBA,this.samplerType=0}}function nA(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[pt.UNSIGNED_BYTE]:{[Z.RGBA]:e.RGBA8,[Z.RGB]:e.RGB8,[Z.RG]:e.RG8,[Z.RED]:e.R8,[Z.RGBA_INTEGER]:e.RGBA8UI,[Z.RGB_INTEGER]:e.RGB8UI,[Z.RG_INTEGER]:e.RG8UI,[Z.RED_INTEGER]:e.R8UI,[Z.ALPHA]:e.ALPHA,[Z.LUMINANCE]:e.LUMINANCE,[Z.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[pt.BYTE]:{[Z.RGBA]:e.RGBA8_SNORM,[Z.RGB]:e.RGB8_SNORM,[Z.RG]:e.RG8_SNORM,[Z.RED]:e.R8_SNORM,[Z.RGBA_INTEGER]:e.RGBA8I,[Z.RGB_INTEGER]:e.RGB8I,[Z.RG_INTEGER]:e.RG8I,[Z.RED_INTEGER]:e.R8I},[pt.UNSIGNED_SHORT]:{[Z.RGBA_INTEGER]:e.RGBA16UI,[Z.RGB_INTEGER]:e.RGB16UI,[Z.RG_INTEGER]:e.RG16UI,[Z.RED_INTEGER]:e.R16UI,[Z.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[pt.SHORT]:{[Z.RGBA_INTEGER]:e.RGBA16I,[Z.RGB_INTEGER]:e.RGB16I,[Z.RG_INTEGER]:e.RG16I,[Z.RED_INTEGER]:e.R16I},[pt.UNSIGNED_INT]:{[Z.RGBA_INTEGER]:e.RGBA32UI,[Z.RGB_INTEGER]:e.RGB32UI,[Z.RG_INTEGER]:e.RG32UI,[Z.RED_INTEGER]:e.R32UI,[Z.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[pt.INT]:{[Z.RGBA_INTEGER]:e.RGBA32I,[Z.RGB_INTEGER]:e.RGB32I,[Z.RG_INTEGER]:e.RG32I,[Z.RED_INTEGER]:e.R32I},[pt.FLOAT]:{[Z.RGBA]:e.RGBA32F,[Z.RGB]:e.RGB32F,[Z.RG]:e.RG32F,[Z.RED]:e.R32F,[Z.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[pt.HALF_FLOAT]:{[Z.RGBA]:e.RGBA16F,[Z.RGB]:e.RGB16F,[Z.RG]:e.RG16F,[Z.RED]:e.R16F},[pt.UNSIGNED_SHORT_5_6_5]:{[Z.RGB]:e.RGB565},[pt.UNSIGNED_SHORT_4_4_4_4]:{[Z.RGBA]:e.RGBA4},[pt.UNSIGNED_SHORT_5_5_5_1]:{[Z.RGBA]:e.RGB5_A1},[pt.UNSIGNED_INT_2_10_10_10_REV]:{[Z.RGBA]:e.RGB10_A2,[Z.RGBA_INTEGER]:e.RGB10_A2UI},[pt.UNSIGNED_INT_10F_11F_11F_REV]:{[Z.RGB]:e.R11F_G11F_B10F},[pt.UNSIGNED_INT_5_9_9_9_REV]:{[Z.RGB]:e.RGB9_E5},[pt.UNSIGNED_INT_24_8]:{[Z.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[pt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Z.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[pt.UNSIGNED_BYTE]:{[Z.RGBA]:e.RGBA,[Z.RGB]:e.RGB,[Z.ALPHA]:e.ALPHA,[Z.LUMINANCE]:e.LUMINANCE,[Z.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[pt.UNSIGNED_SHORT_5_6_5]:{[Z.RGB]:e.RGB},[pt.UNSIGNED_SHORT_4_4_4_4]:{[Z.RGBA]:e.RGBA},[pt.UNSIGNED_SHORT_5_5_5_1]:{[Z.RGBA]:e.RGBA}},t}class eb{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new _t,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=nA(t);const i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(let n=0;n<i;n++)this.boundTextures[n]=null;this.emptyTextures={};const s=new Qc(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Qc(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,i=0){const{gl:s}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[i]!==t&&(this.currentLocation!==i&&(this.currentLocation=i,s.activeTexture(s.TEXTURE0+i)),s.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,s.activeTexture(s.TEXTURE0+i)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[i]=t}else this.currentLocation!==i&&(this.currentLocation=i,s.activeTexture(s.TEXTURE0+i)),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[s.TEXTURE_2D].texture),this.boundTextures[i]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:i,boundTextures:s}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<s.length;n++)s[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<s.length;n++)s[n]===t&&(this.currentLocation!==n&&(i.activeTexture(i.TEXTURE0+n),this.currentLocation=n),i.bindTexture(t.target,this.emptyTextures[t.target].texture),s[n]=null)}ensureSamplerType(t){const{boundTextures:i,hasIntegerTextures:s,CONTEXT_UID:n}=this;if(s)for(let r=t-1;r>=0;--r){const o=i[r];o&&o._glTextures[n].samplerType!==qu.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const i=new Qc(this.gl.createTexture());return i.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),i}initTextureType(t,i){var s;i.internalFormat=((s=this.internalFormats[t.type])==null?void 0:s[t.format])??t.format,this.webGLVersion===2&&t.type===pt.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=t.type}updateTexture(t){var n;const i=t._glTextures[this.CONTEXT_UID];if(!i)return;const s=this.renderer;if(this.initTextureType(t,i),(n=t.resource)!=null&&n.upload(s,t,i))i.samplerType!==qu.FLOAT&&(this.hasIntegerTextures=!0);else{const r=t.realWidth,o=t.realHeight,a=s.gl;(i.width!==r||i.height!==o||i.dirtyId<0)&&(i.width=r,i.height=o,a.texImage2D(t.target,0,i.internalFormat,r,o,0,t.format,i.type,null))}t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId}destroyTexture(t,i){const{gl:s}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),s.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!i)){const n=this.managedTextures.indexOf(t);n!==-1&&Fr(this.managedTextures,n,1)}}updateTextureStyle(t){var s;const i=t._glTextures[this.CONTEXT_UID];i&&((t.mipmap===ls.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?i.mipmap=!1:i.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?i.wrapMode=tn.CLAMP:i.wrapMode=t.wrapMode,(s=t.resource)!=null&&s.style(this.renderer,t,i)||this.setStyle(t,i),i.dirtyStyleId=t.dirtyStyleId)}setStyle(t,i){const s=this.gl;if(i.mipmap&&t.mipmap!==ls.ON_MANUAL&&s.generateMipmap(t.target),s.texParameteri(t.target,s.TEXTURE_WRAP_S,i.wrapMode),s.texParameteri(t.target,s.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===Ms.LINEAR?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===Ms.LINEAR){const r=Math.min(t.anisotropicLevel,s.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));s.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===Ms.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(t.target,s.TEXTURE_MAG_FILTER,t.scaleMode===Ms.LINEAR?s.LINEAR:s.NEAREST)}destroy(){this.renderer=null}}eb.extension={type:it.RendererSystem,name:"texture"};dt.add(eb);class ib{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:s}=this,n=t._glTransformFeedbacks[s]||this.createGLTransformFeedback(t);i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,i){const{gl:s,renderer:n}=this;i&&n.shader.bind(i),s.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:i,renderer:s,CONTEXT_UID:n}=this,r=i.createTransformFeedback();t._glTransformFeedbacks[n]=r,i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(s.buffer.update(a),a._glBuffers[n].refCount++,i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),r}disposeTransformFeedback(t,i){const s=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const r=this.renderer.buffer;if(r)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!i&&r.dispose(a,i))}s&&(i||n.deleteTransformFeedback(s),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}ib.extension={type:it.RendererSystem,name:"transformFeedback"};dt.add(ib);class ec{constructor(t){this.renderer=t}init(t){this.screen=new xt(0,0,t.width,t.height),this.element=t.view||Q.ADAPTER.createCanvas(),this.resolution=t.resolution||Q.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,i){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(i*this.resolution);const s=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=s,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${s}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",s,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var i;t&&((i=this.element.parentNode)==null||i.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ec.defaultOptions={width:800,height:600,resolution:Q.RESOLUTION,autoDensity:!1};ec.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"_view"};dt.add(ec);Q.PREFER_ENV=Qn.WEBGL2;Q.STRICT_TEXTURE_CACHE=!1;Q.RENDER_OPTIONS={...Qh.defaultOptions,...Jh.defaultOptions,...ec.defaultOptions,...tc.defaultOptions};Object.defineProperties(Q,{WRAP_MODE:{get(){return _t.defaultOptions.wrapMode},set(e){wt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),_t.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return _t.defaultOptions.scaleMode},set(e){wt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),_t.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return _t.defaultOptions.mipmap},set(e){wt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),_t.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return _t.defaultOptions.anisotropicLevel},set(e){wt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),_t.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return wt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Se.defaultResolution},set(e){Se.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return wt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Se.defaultMultisample},set(e){Se.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return Pi.defaultMaxTextures},set(e){wt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Pi.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return Pi.defaultBatchSize},set(e){wt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Pi.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return Pi.canUploadSameBuffer},set(e){wt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Pi.canUploadSameBuffer=e}},GC_MODE:{get(){return Ri.defaultMode},set(e){wt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ri.defaultMode=e}},GC_MAX_IDLE:{get(){return Ri.defaultMaxIdle},set(e){wt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ri.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return Ri.defaultCheckCountMax},set(e){wt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ri.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return Oi.defaultVertexPrecision},set(e){wt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Oi.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return Oi.defaultFragmentPrecision},set(e){wt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Oi.defaultFragmentPrecision=e}}});var $n=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))($n||{});class tu{constructor(t,i=null,s=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=i,this.priority=s,this.once=n}match(t,i=null){return this.fn===t&&this.context===i}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const Ke=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new tu(null,null,1/0),this.deltaMS=1/Ke.targetFPMS,this.elapsedMS=1/Ke.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=$n.NORMAL){return this._addListener(new tu(e,t,i))}addOnce(e,t,i=$n.NORMAL){return this._addListener(new tu(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Ke.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,Ke.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Ke._shared){const e=Ke._shared=new Ke;e.autoStart=!0,e._protected=!0}return Ke._shared}static get system(){if(!Ke._system){const e=Ke._system=new Ke;e.autoStart=!0,e._protected=!0}return Ke._system}};let Te=Ke;Te.targetFPMS=.06;Object.defineProperties(Q,{TARGET_FPMS:{get(){return Te.targetFPMS},set(e){wt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Te.targetFPMS=e}}});class sb{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,$n.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Te.shared:new Te,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}sb.extension=it.Application;dt.add(sb);const nb=[];dt.handleByList(it.Renderer,nb);function rA(e){for(const t of nb)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var oA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,aA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const lA=oA,rb=aA;class ob{constructor(t){this.renderer=t}contextChange(t){let i;if(this.renderer.context.webGLVersion===1){const s=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,s)}else{const s=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,s)}i>=ae.HIGH?this.multisample=ae.HIGH:i>=ae.MEDIUM?this.multisample=ae.MEDIUM:i>=ae.LOW?this.multisample=ae.LOW:this.multisample=ae.NONE}destroy(){}}ob.extension={type:it.RendererSystem,name:"_multisample"};dt.add(ob);class hA{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class ab{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:s}=this,n=t._glBuffers[s]||this.createGLBuffer(t);i.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:i}=this;i.bindBuffer(t,null)}bindBufferBase(t,i){const{gl:s,CONTEXT_UID:n}=this;if(this.boundBufferBases[i]!==t){const r=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[i]=t,s.bindBufferBase(s.UNIFORM_BUFFER,i,r.buffer)}}bindBufferRange(t,i,s){const{gl:n,CONTEXT_UID:r}=this;s=s||0;const o=t._glBuffers[r]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,i||0,o.buffer,s*256,256)}update(t){const{gl:i,CONTEXT_UID:s}=this,n=t._glBuffers[s]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,i.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{const r=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,r)}}dispose(t,i){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const s=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),s&&(i||n.deleteBuffer(s.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const i=Object.keys(this.managedBuffers);for(let s=0;s<i.length;s++)this.dispose(this.managedBuffers[i[s]],t)}createGLBuffer(t){const{CONTEXT_UID:i,gl:s}=this;return t._glBuffers[i]=new hA(s.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]}}ab.extension={type:it.RendererSystem,name:"buffer"};dt.add(ab);class lb{constructor(t){this.renderer=t}render(t,i){const s=this.renderer;let n,r,o,a;if(i&&(n=i.renderTexture,r=i.clear,o=i.transform,a=i.skipUpdateTransform),this.renderingToScreen=!n,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=o,!s.context.isLost){if(n||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}s.renderTexture.bind(n),s.batch.currentRenderer.start(),(r??s.background.clearBeforeRender)&&s.renderTexture.clear(),t.render(s),s.batch.currentRenderer.flush(),n&&(i.blit&&s.framebuffer.blit(),n.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}lb.extension={type:it.RendererSystem,name:"objectRenderer"};dt.add(lb);const md=class extends sA{constructor(e){super(),this.type=py.WEBGL,e=Object.assign({},Q.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Bi({projectionMatrix:new Ht},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:md.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(wt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=md.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:kT()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return wt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return wt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return wt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return wt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){wt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return wt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){wt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return wt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let ho=md;ho.extension={type:it.Renderer,priority:1};ho.__plugins={};ho.__systems={};dt.handleByMap(it.RendererPlugin,ho.__plugins);dt.handleByMap(it.RendererSystem,ho.__systems);dt.add(ho);class hb extends oa{constructor(t,i){const{width:s,height:n}=i||{};super(s,n),this.items=[],this.itemDirtyIds=[];for(let r=0;r<t;r++){const o=new _t;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,i){for(let s=0;s<this.length;s++)t[s]&&(t[s].castToBaseTexture?this.addBaseTextureAt(t[s].castToBaseTexture(),s):t[s]instanceof oa?this.addResourceAt(t[s],s):this.addResourceAt(Ty(t[s],i),s))}dispose(){for(let t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,i){if(!this.items[i])throw new Error(`Index ${i} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)}unbind(t){super.unbind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)}load(){if(this._load)return this._load;const i=this.items.map(s=>s.resource).filter(s=>s).map(s=>s.load());return this._load=Promise.all(i).then(()=>{const{realWidth:s,realHeight:n}=this.items[0];return this.resize(s,n),Promise.resolve(this)}),this._load}}class cA extends hb{constructor(t,i){const{width:s,height:n}=i||{};let r,o;Array.isArray(t)?(r=t,o=t.length):o=t,super(o,{width:s,height:n}),r&&this.initFromArray(r,i)}addBaseTextureAt(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Dr.TEXTURE_2D_ARRAY}upload(t,i,s){const{length:n,itemDirtyIds:r,items:o}=this,{gl:a}=t;s.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,n,0,i.format,s.type,null);for(let l=0;l<n;l++){const h=o[l];r[l]<h.dirtyId&&(r[l]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,h.resource.width,h.resource.height,1,i.format,s.type,h.resource.source))}return!0}}class uA extends cn{constructor(t){super(t)}static test(t){const{OffscreenCanvas:i}=globalThis;return i&&t instanceof i?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Mo=class extends hb{constructor(e,t){const{width:i,height:s,autoLoad:n,linkBaseTexture:r}=t||{};if(e&&e.length!==Mo.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:s});for(let o=0;o<Mo.SIDES;o++)this.items[o].target=Dr.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=r!==!1,e&&this.initFromArray(e,t),n!==!1&&this.load()}bind(e){super.bind(e),e.target=Dr.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Dr.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const s=this.itemDirtyIds;for(let n=0;n<Mo.SIDES;n++){const r=this.items[n];(s[n]<r.dirtyId||i.dirtyId<t.dirtyId)&&(r.valid&&r.resource?(r.resource.upload(e,r,i),s[n]=r.dirtyId):s[n]<-1&&(e.gl.texImage2D(r.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),s[n]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Mo.SIDES}};let cb=Mo;cb.SIDES=6;class Ar extends cn{constructor(t,i){i=i||{};let s,n;typeof t=="string"?(s=Ar.EMPTY,n=t):(s=t,n=null),super(s),this.url=n,this.crossOrigin=i.crossOrigin??!0,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,i)=>{if(this.url===null){t(this);return}try{const s=await Q.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await s.blob();if(this.destroyed)return;const r=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Vi.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=r,this.update(),t(this)}catch(s){if(this.destroyed)return;i(s),this.onError.emit(s)}}),this._load)}upload(t,i,s){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),super.upload(t,i,s)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Ar._EMPTY=Ar._EMPTY??Q.ADAPTER.createCanvas(0,0),Ar._EMPTY}}const Bl=class extends cn{constructor(e,t){t=t||{},super(Q.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},Bl.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;cn.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/i*t,n=this._overrideHeight||this._overrideWidth/t*i),s=Math.round(s),n=Math.round(n);const r=this.source;r.width=s,r.height=n,r._pixiId=`canvas_${Yn()}`,r.getContext("2d").drawImage(e,0,0,t,i,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(e){const t=Bl.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Bl.SVG_XML.test(e)}};let aa=Bl;aa.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;aa.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const gd=class extends cn{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];cn.crossOrigin(i,s,t.crossorigin);for(let n=0;n<e.length;++n){const r=document.createElement("source");let{src:o,mime:a}=e[n];o=o||e[n];const l=o.split("?").shift().toLowerCase(),h=l.slice(l.lastIndexOf(".")+1);a=a||gd.MIME_TYPES[h]||`video/${h}`,r.src=o,r.type=a,i.appendChild(r)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=Te.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Te.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Te.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(Te.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Te.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Te.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||gd.TYPES.includes(t)}};let Af=gd;Af.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Af.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};hd.push(Ar,Ly,uA,Af,aa,Ca,cb,cA);class dh{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?xt.EMPTY:(t=t||new xt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,i){const{a:s,b:n,c:r,d:o,tx:a,ty:l}=t,h=s*i.x+r*i.y+a,c=n*i.x+o*i.y+l;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let i=this.minX,s=this.minY,n=this.maxX,r=this.maxY,o=t[0],a=t[1];i=o<i?o:i,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,o=t[2],a=t[3],i=o<i?o:i,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,o=t[4],a=t[5],i=o<i?o:i,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,o=t[6],a=t[7],i=o<i?o:i,s=a<s?a:s,n=o>n?o:n,r=a>r?a:r,this.minX=i,this.minY=s,this.maxX=n,this.maxY=r}addFrame(t,i,s,n,r){this.addFrameMatrix(t.worldTransform,i,s,n,r)}addFrameMatrix(t,i,s,n,r){const o=t.a,a=t.b,l=t.c,h=t.d,c=t.tx,u=t.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=o*i+l*s+c,_=a*i+h*s+u;d=g<d?g:d,f=_<f?_:f,p=g>p?g:p,m=_>m?_:m,g=o*n+l*s+c,_=a*n+h*s+u,d=g<d?g:d,f=_<f?_:f,p=g>p?g:p,m=_>m?_:m,g=o*i+l*r+c,_=a*i+h*r+u,d=g<d?g:d,f=_<f?_:f,p=g>p?g:p,m=_>m?_:m,g=o*n+l*r+c,_=a*n+h*r+u,d=g<d?g:d,f=_<f?_:f,p=g>p?g:p,m=_>m?_:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(t,i,s){let n=this.minX,r=this.minY,o=this.maxX,a=this.maxY;for(let l=i;l<s;l+=2){const h=t[l],c=t[l+1];n=h<n?h:n,r=c<r?c:r,o=h>o?h:o,a=c>a?c:a}this.minX=n,this.minY=r,this.maxX=o,this.maxY=a}addVertices(t,i,s,n){this.addVerticesMatrix(t.worldTransform,i,s,n)}addVerticesMatrix(t,i,s,n,r=0,o=r){const a=t.a,l=t.b,h=t.c,c=t.d,u=t.tx,d=t.ty;let f=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let _=s;_<n;_+=2){const y=i[_],b=i[_+1],v=a*y+h*b+u,x=c*b+l*y+d;f=Math.min(f,v-r),m=Math.max(m,v+r),p=Math.min(p,x-o),g=Math.max(g,x+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=g}addBounds(t){const i=this.minX,s=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<i?t.minX:i,this.minY=t.minY<s?t.minY:s,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r}addBoundsMask(t,i){const s=t.minX>i.minX?t.minX:i.minX,n=t.minY>i.minY?t.minY:i.minY,r=t.maxX<i.maxX?t.maxX:i.maxX,o=t.maxY<i.maxY?t.maxY:i.maxY;if(s<=r&&n<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=s<a?s:a,this.minY=n<l?n:l,this.maxX=r>h?r:h,this.maxY=o>c?o:c}}addBoundsMatrix(t,i){this.addFrameMatrix(i,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,i){const s=t.minX>i.x?t.minX:i.x,n=t.minY>i.y?t.minY:i.y,r=t.maxX<i.x+i.width?t.maxX:i.x+i.width,o=t.maxY<i.y+i.height?t.maxY:i.y+i.height;if(s<=r&&n<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=s<a?s:a,this.minY=n<l?n:l,this.maxX=r>h?r:h,this.maxY=o>c?o:c}}pad(t=0,i=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i)}addFramePad(t,i,s,n,r,o){t-=r,i-=o,s+=r,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>s?this.maxX:s,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>n?this.maxY:n}}class qt extends jn{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Tf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new dh,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const i=Object.keys(t);for(let s=0;s<i.length;++s){const n=i[s];Object.defineProperty(qt.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new xt),i=this._boundsRect),this._bounds.getRectangle(i)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new xt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new dh);const i=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,r=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=s,this.transform=i,this._bounds=n,this._bounds.updateID+=this._boundsID-r,o}toGlobal(t,i,s=!1){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)}toLocal(t,i,s,n){return i&&(t=i.toGlobal(t,s,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,i=0,s=1,n=1,r=0,o=0,a=0,l=0,h=0){return this.position.x=t,this.position.y=i,this.scale.x=s||1,this.scale.y=n||1,this.rotation=r,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new dA),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*l2}set angle(t){this.transform.rotation=t*h2}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=t,this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}}}class dA extends qt{constructor(){super(...arguments),this.sortDirty=null}}qt.prototype.displayObjectUpdateTransform=qt.prototype.updateTransform;const fA=new Ht;function pA(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const _d=class extends qt{constructor(){super(),this.children=[],this.sortableChildren=_d.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),s=this.getChildIndex(t);this.children[i]=t,this.children[s]=e,this.onChildrenChange(i<s?i:s)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);Fr(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,Fr(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Fr(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,s=t,n=s-i;let r;if(n>0&&n<=s){r=this.children.splice(i,n);for(let o=0;o<r.length;++o)r[o].parent=null,r[o].transform&&(r[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<r.length;++o)r[o].emit("removed",this),this.emit("childRemoved",r[o],this,o);return r}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const s=this.children[t];s._lastSortedIndex=t,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(pA),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let s=0,n=this.children.length;s<n;++s){const r=this.children[s];r.visible&&r.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,s;this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==_d.prototype._render&&(i=this.getBounds(!0));const n=e.projection.transform;if(n&&(s?(s=fA.copyFrom(s),s.prepend(n)):s=n),i&&t.intersects(i,s))this._render(e);else if(this.cullArea)return;for(let r=0,o=this.children.length;r<o;++r){const a=this.children[r],l=a.cullable;a.cullable=l||!this.cullArea,a.render(e),a.cullable=l}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(e)}}renderAdvanced(e){var n,r,o;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const s=t&&((n=this._enabledFilters)==null?void 0:n.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==he.NONE));if(s&&e.batch.flush(),t&&((r=this._enabledFilters)!=null&&r.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(e)}s&&e.batch.flush(),i&&e.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<i.length;++s)i[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let yi=_d;yi.defaultSortableChildren=!1;yi.prototype.containerUpdateTransform=yi.prototype.updateTransform;Object.defineProperties(Q,{SORTABLE_CHILDREN:{get(){return yi.defaultSortableChildren},set(e){wt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),yi.defaultSortableChildren=e}}});const bo=new Mt,mA=new Uint16Array([0,1,2,0,2,3]);class co extends yi{constructor(t){super(),this._anchor=new Xs(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Ot(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=mt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ut.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=mA,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Q.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=js(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=js(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const i=this.transform.worldTransform,s=i.a,n=i.b,r=i.c,o=i.d,a=i.tx,l=i.ty,h=this.vertexData,c=t.trim,u=t.orig,d=this._anchor;let f=0,p=0,m=0,g=0;if(c?(p=c.x-d._x*u.width,f=p+c.width,g=c.y-d._y*u.height,m=g+c.height):(p=-d._x*u.width,f=p+u.width,g=-d._y*u.height,m=g+u.height),h[0]=s*p+r*g+a,h[1]=o*g+n*p+l,h[2]=s*f+r*g+a,h[3]=o*g+n*f+l,h[4]=s*f+r*m+a,h[5]=o*m+n*f+l,h[6]=s*p+r*m+a,h[7]=o*m+n*p+l,this._roundPixels){const _=Q.RESOLUTION;for(let y=0;y<h.length;++y)h[y]=Math.round(h[y]*_)/_}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,i=this.vertexTrimmedData,s=t.orig,n=this._anchor,r=this.transform.worldTransform,o=r.a,a=r.b,l=r.c,h=r.d,c=r.tx,u=r.ty,d=-n._x*s.width,f=d+s.width,p=-n._y*s.height,m=p+s.height;i[0]=o*d+l*p+c,i[1]=h*p+a*d+u,i[2]=o*f+l*p+c,i[3]=h*p+a*f+u,i[4]=o*f+l*m+c,i[5]=h*m+a*f+u,i[6]=o*d+l*m+c,i[7]=h*m+a*d+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new dh),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new xt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,bo);const i=this._texture.orig.width,s=this._texture.orig.height,n=-i*this.anchor.x;let r=0;return bo.x>=n&&bo.x<n+i&&(r=-s*this.anchor.y,bo.y>=r&&bo.y<r+s)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!s)}this._texture=null}static from(t,i){const s=t instanceof ut?t:ut.from(t,i);return new co(s)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const i=js(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const i=js(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ut.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const ub=new Ht;qt.prototype._cacheAsBitmap=!1;qt.prototype._cacheData=null;qt.prototype._cacheAsBitmapResolution=null;qt.prototype._cacheAsBitmapMultisample=null;class gA{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(qt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new gA),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});qt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};qt.prototype._initCachedDisplayObject=function(t){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const i=this.alpha;this.alpha=1,t.batch.flush();const s=this.getLocalBounds(null,!0).clone();if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;s.pad(p)}s.ceil(Q.RESOLUTION);const n=t.renderTexture.current,r=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=tr.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${Yn()}`;this._cacheData.textureCacheId=h,_t.addToCache(l.baseTexture,h),ut.addToCache(l,h);const c=this.transform.localTransform.copyTo(ub).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(n,r,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const u=new co(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(s.x/s.width),u.anchor.y=-(s.y/s.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)};qt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};qt.prototype._initCachedDisplayObjectCanvas=function(t){var c;if((c=this._cacheData)!=null&&c.sprite)return;const i=this.getLocalBounds(null,!0),s=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,r=t._projTransform;i.ceil(Q.RESOLUTION);const o=tr.create({width:i.width,height:i.height}),a=`cacheAsBitmap_${Yn()}`;this._cacheData.textureCacheId=a,_t.addToCache(o.baseTexture,a),ut.addToCache(o,a);const l=ub;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=i.x,l.ty-=i.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=s;const h=new co(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(i.x/i.width),h.anchor.y=-(i.y/i.height),h.alpha=s,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};qt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};qt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};qt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_t.removeFromCache(this._cacheData.textureCacheId),ut.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};qt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};qt.prototype.name=null;yi.prototype.getChildByName=function(t,i){for(let s=0,n=this.children.length;s<n;s++)if(this.children[s].name===t)return this.children[s];if(i)for(let s=0,n=this.children.length;s<n;s++){const r=this.children[s];if(!r.getChildByName)continue;const o=r.getChildByName(t,!0);if(o)return o}return null};qt.prototype.getGlobalPosition=function(t=new Mt,i=!1){return this.parent?this.parent.toGlobal(this.position,t,i):(t.x=this.position.x,t.y=this.position.y),t};var _A=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class yA extends Se{constructor(t=1){super(lA,_A,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const bA={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},xA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function vA(e){const t=bA[e],i=t.length;let s=xA,n="";const r="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<e;a++){let l=r.replace("%index%",a.toString());o=a,a>=i&&(o=e-a-1),l=l.replace("%value%",t[o].toString()),n+=l,n+=`
`}return s=s.replace("%blur%",n),s=s.replace("%size%",e.toString()),s}const wA=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function SA(e,t){const i=Math.ceil(e/2);let s=wA,n="",r;t?r="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":r="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let a=r.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(i-1)}.0`),n+=a,n+=`
`}return s=s.replace("%blur%",n),s=s.replace("%size%",e.toString()),s}class yd extends Se{constructor(t,i=8,s=4,n=Se.defaultResolution,r=5){const o=SA(r,t),a=vA(r);super(o,a),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=s,this.blur=i}apply(t,i,s,n){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/i.width):this.uniforms.strength=1/s.height*(s.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,s,n);else{const r=t.getFilterTexture(),o=t.renderer;let a=i,l=r;this.state.blend=!1,t.applyFilter(this,a,l,Zi.CLEAR);for(let h=1;h<this.passes-1;h++){t.bindAndClear(a,Zi.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,s,n),t.returnFilterTexture(r)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class EA extends Se{constructor(t=8,i=4,s=Se.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new yd(!0,t,i,s,n),this.blurYFilter=new yd(!1,t,i,s,n),this.resolution=s,this.quality=i,this.blur=t,this.repeatEdgePixels=!1}apply(t,i,s,n){const r=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(r&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,i,a,Zi.CLEAR),this.blurYFilter.apply(t,a,s,n),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,i,s,n):this.blurXFilter.apply(t,i,s,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var TA=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class bd extends Se{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(rb,TA,t),this.alpha=1}_loadMatrix(t,i=!1){let s=t;i&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s}_multiply(t,i,s){return t[0]=i[0]*s[0]+i[1]*s[5]+i[2]*s[10]+i[3]*s[15],t[1]=i[0]*s[1]+i[1]*s[6]+i[2]*s[11]+i[3]*s[16],t[2]=i[0]*s[2]+i[1]*s[7]+i[2]*s[12]+i[3]*s[17],t[3]=i[0]*s[3]+i[1]*s[8]+i[2]*s[13]+i[3]*s[18],t[4]=i[0]*s[4]+i[1]*s[9]+i[2]*s[14]+i[3]*s[19]+i[4],t[5]=i[5]*s[0]+i[6]*s[5]+i[7]*s[10]+i[8]*s[15],t[6]=i[5]*s[1]+i[6]*s[6]+i[7]*s[11]+i[8]*s[16],t[7]=i[5]*s[2]+i[6]*s[7]+i[7]*s[12]+i[8]*s[17],t[8]=i[5]*s[3]+i[6]*s[8]+i[7]*s[13]+i[8]*s[18],t[9]=i[5]*s[4]+i[6]*s[9]+i[7]*s[14]+i[8]*s[19]+i[9],t[10]=i[10]*s[0]+i[11]*s[5]+i[12]*s[10]+i[13]*s[15],t[11]=i[10]*s[1]+i[11]*s[6]+i[12]*s[11]+i[13]*s[16],t[12]=i[10]*s[2]+i[11]*s[7]+i[12]*s[12]+i[13]*s[17],t[13]=i[10]*s[3]+i[11]*s[8]+i[12]*s[13]+i[13]*s[18],t[14]=i[10]*s[4]+i[11]*s[9]+i[12]*s[14]+i[13]*s[19]+i[14],t[15]=i[15]*s[0]+i[16]*s[5]+i[17]*s[10]+i[18]*s[15],t[16]=i[15]*s[1]+i[16]*s[6]+i[17]*s[11]+i[18]*s[16],t[17]=i[15]*s[2]+i[16]*s[7]+i[17]*s[12]+i[18]*s[17],t[18]=i[15]*s[3]+i[16]*s[8]+i[17]*s[13]+i[18]*s[18],t[19]=i[15]*s[4]+i[16]*s[9]+i[17]*s[14]+i[18]*s[19]+i[19],t}_colorMatrix(t){const i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(t,i){const s=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(s,i)}tint(t,i){const[s,n,r]=Ot.shared.setValue(t).toArray(),o=[s,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(o,i)}greyscale(t,i){const s=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(s,i)}blackAndWhite(t){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)}hue(t,i){t=(t||0)/180*Math.PI;const s=Math.cos(t),n=Math.sin(t),r=Math.sqrt,o=1/3,a=r(o),l=s+(1-s)*o,h=o*(1-s)-a*n,c=o*(1-s)+a*n,u=o*(1-s)+a*n,d=s+o*(1-s),f=o*(1-s)-a*n,p=o*(1-s)-a*n,m=o*(1-s)+a*n,g=s+o*(1-s),_=[l,h,c,0,0,u,d,f,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(_,i)}contrast(t,i){const s=(t||0)+1,n=-.5*(s-1),r=[s,0,0,0,n,0,s,0,0,n,0,0,s,0,n,0,0,0,1,0];this._loadMatrix(r,i)}saturate(t=0,i){const s=t*2/3+1,n=(s-1)*-.5,r=[s,n,n,0,0,n,s,n,0,0,n,n,s,0,0,0,0,0,1,0];this._loadMatrix(r,i)}desaturate(){this.saturate(-1)}negative(t){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)}sepia(t){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)}technicolor(t){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)}polaroid(t){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)}toBGR(t){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)}kodachrome(t){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)}browni(t){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)}vintage(t){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)}colorTone(t,i,s,n,r){t=t||.2,i=i||.15,s=s||16770432,n=n||3375104;const o=Ot.shared,[a,l,h]=o.setValue(s).toArray(),[c,u,d]=o.setValue(n).toArray(),f=[.3,.59,.11,0,0,a,l,h,t,0,c,u,d,i,0,a-c,l-u,h-d,0,0];this._loadMatrix(f,r)}night(t,i){t=t||.1;const s=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(s,i)}predator(t,i){const s=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(s,i)}lsd(t){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}bd.prototype.grayscale=bd.prototype.greyscale;var AA=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,CA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class MA extends Se{constructor(t,i){const s=new Ht;t.renderable=!1,super(CA,AA,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=s,i==null&&(i=20),this.scale=new Mt(i,i)}apply(t,i,s,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const r=this.maskSprite.worldTransform,o=Math.sqrt(r.a*r.a+r.b*r.b),a=Math.sqrt(r.c*r.c+r.d*r.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=r.a/o,this.uniforms.rotation[1]=r.b/o,this.uniforms.rotation[2]=r.c/a,this.uniforms.rotation[3]=r.d/a),t.applyFilter(this,i,s,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var IA=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,PA=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class RA extends Se{constructor(){super(PA,IA)}}var DA=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class OA extends Se{constructor(t=.5,i=Math.random()){super(rb,DA,{uNoise:0,uSeed:0}),this.noise=t,this.seed=i}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Dm={AlphaFilter:yA,BlurFilter:EA,BlurFilterPass:yd,ColorMatrixFilter:bd,DisplacementFilter:MA,FXAAFilter:RA,NoiseFilter:OA};Object.entries(Dm).forEach(([e,t])=>{Object.defineProperty(Dm,e,{get(){return wt("7.1.0",`filters.${e} has moved to ${e}`),t}})});class kA{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Te.system.add(this.tickerUpdate,this,$n.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Te.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Ws=new kA;class Ma{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Ma.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Mt,this.page=new Mt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,i,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,i,s,n,r){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class fh extends Ma{constructor(){super(...arguments),this.client=new Mt,this.movement=new Mt,this.offset=new Mt,this.global=new Mt,this.screen=new Mt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,i,s){return t.worldTransform.applyInverse(s||this.global,i)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,i,s,n,r,o,a,l,h,c,u,d,f,p,m){throw new Error("Method not implemented.")}}class Ai extends fh{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class $r extends fh{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}$r.DOM_DELTA_PIXEL=0;$r.DOM_DELTA_LINE=1;$r.DOM_DELTA_PAGE=2;const FA=2048,LA=new Mt,eu=new Mt;class BA{constructor(t){this.dispatch=new jn,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,i){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:i,priority:0}),this.mappingTable[t].sort((s,n)=>s.priority-n.priority)}dispatchEvent(t,i){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,i),this.dispatch.emit(i||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const i=this.mappingTable[t.type];if(i)for(let s=0,n=i.length;s<n;s++)i[s].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,i){Ws.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[n](this.rootTarget,this.rootTarget.eventMode,LA.set(t,i),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,i){if(!t.target)return;const s=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,r=s.length-1;n<r;n++)if(t.currentTarget=s[n],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,i),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=s.length-2;n>=0;n--)if(t.currentTarget=s[n],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,i,s=this._allInteractiveElements){if(s.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const n=Array.isArray(i)?i:[i];for(let r=s.length-1;r>=0;r--)n.forEach(o=>{t.currentTarget=s[r],this.notifyTarget(t,o)})}propagationPath(t){const i=[t];for(let s=0;s<FA&&t!==this.rootTarget;s++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(t.parent),t=t.parent}return i.reverse(),i}hitTestMoveRecursive(t,i,s,n,r,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(Ws.pauseUpdate=!1),t.interactiveChildren&&t.children){const c=t.children;for(let u=c.length-1;u>=0;u--){const d=c[u],f=this.hitTestMoveRecursive(d,this._isInteractive(i)?i:d.eventMode,s,n,r,o||r(t,s));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=t.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(t),f.push(t)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(i),h=t.isInteractive();return h&&h&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!r(t,s)&&n(t,s)?h?[t]:[]:null}hitTestRecursive(t,i,s,n,r){if(this._interactivePrune(t)||r(t,s))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(Ws.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let h=l.length-1;h>=0;h--){const c=l[h],u=this.hitTestRecursive(c,this._isInteractive(i)?i:c.eventMode,s,n,r);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const d=t.isInteractive();return(u.length>0||d)&&u.push(t),u}}}const o=this._isInteractive(i),a=t.isInteractive();return o&&n(t,s)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,i){var s;if(t.hitArea&&(t.worldTransform.applyInverse(i,eu),!t.hitArea.contains(eu.x,eu.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!((s=n.containsPoint)!=null&&s.call(n,i)))return!0}return!1}hitTestFn(t,i){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(i):!1}notifyTarget(t,i){var r,o;i=i??t.type;const s=`on${i}`;(o=(r=t.currentTarget)[s])==null||o.call(r,t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${i}capture`:i;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,i)}mapPointerDown(t){if(!(t instanceof Ai)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const n=i.button===2;this.dispatchEvent(i,n?"rightdown":"mousedown")}const s=this.trackingData(t.pointerId);s.pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(t){var l,h;if(!(t instanceof Ai)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const s=i.pointerType==="mouse"||i.pointerType==="pen",n=this.trackingData(t.pointerId),r=this.findMountedTarget(n.overTargets);if(((l=n.overTargets)==null?void 0:l.length)>0&&r!==i.target){const c=t.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(t,c,r);if(this.dispatchEvent(u,"pointerout"),s&&this.dispatchEvent(u,"mouseout"),!i.composedPath().includes(r)){const d=this.createPointerEvent(t,"pointerleave",r);for(d.eventPhase=d.AT_TARGET;d.target&&!i.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),s&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(u)}if(r!==i.target){const c=t.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(i,c);this.dispatchEvent(u,"pointerover"),s&&this.dispatchEvent(u,"mouseover");let d=r==null?void 0:r.parent;for(;d&&d!==this.rootTarget.parent&&d!==i.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(i,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==r&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),s&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(u)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(i,"pointermove"),a&&o.push("globalpointermove"),i.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),a&&o.push("globaltouchmove")),s&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(h=i.target)==null?void 0:h.cursor),o.length>0&&this.all(i,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(t){var o;if(!(t instanceof Ai)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),s=this.createPointerEvent(t),n=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),n&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(o=s.target)==null?void 0:o.cursor);const r=this.clonePointerEvent(s,"pointerenter");for(r.eventPhase=r.AT_TARGET;r.target&&r.target!==this.rootTarget.parent;)r.currentTarget=r.target,this.notifyTarget(r),n&&this.notifyTarget(r,"mouseenter"),r.target=r.target.parent;i.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(r)}mapPointerOut(t){if(!(t instanceof Ai)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId);if(i.overTargets){const s=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(i.overTargets),r=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(r),s&&this.dispatchEvent(r,"mouseout");const o=this.createPointerEvent(t,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;i.overTargets=null,this.freeEvent(r),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Ai)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),s=this.createPointerEvent(t);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const a=s.button===2;this.dispatchEvent(s,a?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[t.button]);let o=r;if(r&&!s.composedPath().includes(r)){let a=r;for(;a&&!s.composedPath().includes(a);){if(s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const l=s.button===2;this.notifyTarget(s,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(s,"click");a.target=o,a.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:i});const l=n.clicksByButton[t.button];if(l.target===a.target&&i-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=i,a.detail=l.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(s)}mapPointerUpOutside(t){if(!(t instanceof Ai)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(s){let r=s;for(;r;)n.currentTarget=r,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),r=r.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof $r)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(t);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(t){if(!t)return null;let i=t[0];for(let s=1;s<t.length&&t[s].parent===i;s++)i=t[s];return i}createPointerEvent(t,i,s){const n=this.allocateEvent(Ai);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=s??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof i=="string"&&(n.type=i),n}createWheelEvent(t){const i=this.allocateEvent($r);return this.copyWheelData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(t,i){const s=this.allocateEvent(Ai);return s.nativeEvent=t.nativeEvent,s.originalEvent=t.originalEvent,this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.target=t.target,s.path=t.composedPath().slice(),s.type=i??s.type,s}copyWheelData(t,i){i.deltaMode=t.deltaMode,i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ}copyPointerData(t,i){t instanceof Ai&&i instanceof Ai&&(i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist)}copyMouseData(t,i){t instanceof fh&&i instanceof fh&&(i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.copyFrom(t.client),i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.copyFrom(t.movement),i.screen.copyFrom(t.screen),i.shiftKey=t.shiftKey,i.global.copyFrom(t.global))}copyData(t,i){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.detail=t.detail,i.view=t.view,i.which=t.which,i.layer.copyFrom(t.layer),i.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const i=this.eventPool.get(t).pop()||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(t)}notifyListeners(t,i){const s=t.currentTarget._events[i];if(s&&t.currentTarget.isInteractive())if("fn"in s)s.once&&t.currentTarget.removeListener(i,s.fn,void 0,!0),s.fn.call(s.context,t);else for(let n=0,r=s.length;n<r&&!t.propagationImmediatelyStopped;n++)s[n].once&&t.currentTarget.removeListener(i,s[n].fn,void 0,!0),s[n].fn.call(s[n].context,t)}}const NA=1,UA={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},xd=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new BA(null),Ws.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ai(null),this.rootWheelEvent=new $r(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...xd.defaultEventFeatures},{set:(t,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[i]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,xd._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,s=t.length;i<s;i++){const n=t[i],r=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;Ws.pointerMoved();const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let n=0,r=s.length;n<r;n++){const o=this.bootstrapEvent(this.rootPointerEvent,s[n]);o.type+=i,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Ws.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Ws.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Ws.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){let s;this.domElement.parentElement?s=this.domElement.getBoundingClientRect():s={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const n=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*n,e.y=(i-s.top)*(this.domElement.height/s.height)*n}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,s=e.changedTouches.length;i<s;i++){const n=e.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=NA),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=UA[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let la=xd;la.extension={name:"events",type:[it.RendererSystem,it.CanvasRendererSystem]};la.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};dt.add(la);function Om(e){return e==="dynamic"||e==="static"}const GA={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Om(la.defaultEventMode)},set interactive(e){wt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??la.defaultEventMode},set eventMode(e){this._internalInteractive=Om(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,i){const s=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,n=typeof t=="function"?void 0:t;e=s?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,n)},removeEventListener(e,t,i){const s=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,n=typeof t=="function"?void 0:t;e=s?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,n)},dispatchEvent(e){if(!(e instanceof Ma))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};qt.mixin(GA);const HA={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};qt.mixin(HA);const zA=9,tl=100,VA=0,WA=0,km=2,Fm=1,jA=-1e3,XA=-1e3,YA=2;class db{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Is.tablet||Is.phone)&&this.createTouchHook();const i=document.createElement("div");i.style.width=`${tl}px`,i.style.height=`${tl}px`,i.style.position="absolute",i.style.top=`${VA}px`,i.style.left=`${WA}px`,i.style.zIndex=km.toString(),this.div=i,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${Fm}px`,t.style.height=`${Fm}px`,t.style.position="absolute",t.style.top=`${jA}px`,t.style.left=`${XA}px`,t.style.zIndex=YA.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const i=t.children;if(i)for(let s=0;s<i.length;s++)this.updateAccessibleObjects(i[s])}update(){const t=performance.now();if(Is.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:i,y:s,width:n,height:r}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,h=n/o*l,c=r/a*l;let u=this.div;u.style.left=`${i}px`,u.style.top=`${s}px`,u.style.width=`${o}px`,u.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,Fr(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{u=f._accessibleDiv;let p=f.hitArea;const m=f.worldTransform;f.hitArea?(u.style.left=`${(m.tx+p.x*m.a)*h}px`,u.style.top=`${(m.ty+p.y*m.d)*c}px`,u.style.width=`${p.width*m.a*h}px`,u.style.height=`${p.height*m.d*c}px`):(p=f.getBounds(),this.capHitArea(p),u.style.left=`${p.x*h}px`,u.style.top=`${p.y*c}px`,u.style.width=`${p.width*h}px`,u.style.height=`${p.height*c}px`,u.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(u.title=f.accessibleTitle),u.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&u.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==u.title||f.tabIndex!==u.tabIndex)&&(u.title=f.accessibleTitle,u.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:i,height:s}=this.renderer;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>s&&(t.height=s-t.y)}addChild(t){let i=this.pool.pop();i||(i=document.createElement("button"),i.style.width=`${tl}px`,i.style.height=`${tl}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=km.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=t.accessiblePointerEvents,i.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?i.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(i.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&i.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(i),t._accessibleActive=!0,t._accessibleDiv=i,i.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,i){const{displayObject:s}=t.target,n=this.renderer.events.rootBoundary,r=Object.assign(new Ma(n),{target:s});n.rootTarget=this.renderer.lastObjectRendered,i.forEach(o=>n.dispatchEvent(r,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===zA&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}db.extension={name:"accessibility",type:[it.RendererPlugin,it.CanvasRendererPlugin]};dt.add(db);const vd=class{constructor(e){this.stage=new yi,e=Object.assign({forceCanvas:!1},e),this.renderer=rA(e),vd._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const i=vd._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let Cf=vd;Cf._plugins=[];dt.handleByList(it.Application,Cf._plugins);class fb{static init(t){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let i,s;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:r}=this._resizeTo;i=n,s=r}this.renderer.resize(i,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}fb.extension=it.Application;dt.add(fb);const Lm={loader:it.LoadParser,resolver:it.ResolveParser,cache:it.CacheParser,detection:it.DetectionParser};dt.handle(it.Asset,e=>{const t=e.ref;Object.entries(Lm).filter(([i])=>!!t[i]).forEach(([i,s])=>dt.add(Object.assign(t[i],{extension:t[i].extension??s})))},e=>{const t=e.ref;Object.keys(Lm).filter(i=>!!t[i]).forEach(i=>dt.remove(t[i]))});class $A{constructor(t,i=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(t){t.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<i;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Ia(e,t){if(Array.isArray(t)){for(const i of t)if(e.startsWith(`data:${i}`))return!0;return!1}return e.startsWith(`data:${t}`)}function er(e,t){const i=e.split("?")[0],s=Me.extname(i).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const Os=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(i=>typeof i=="string"?t(i):i):e),wd=(e,t)=>{const i=t.split("?")[1];return i&&(e+=`?${i}`),e};function pb(e,t,i,s,n){const r=t[i];for(let o=0;o<r.length;o++){const a=r[o];i<t.length-1?pb(e.replace(s[i],a),t,i+1,s,n):n.push(e.replace(s[i],a))}}function ZA(e){const t=/\{(.*?)\}/g,i=e.match(t),s=[];if(i){const n=[];i.forEach(r=>{const o=r.substring(1,r.length-1).split(",");n.push(o)}),pb(e,n,0,i,s)}else s.push(e);return s}const ph=e=>!Array.isArray(e);class KA{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const s=Os(t);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(i)){n=l.getCacheableAssets(s,i);break}}n||(n={},s.forEach(a=>{n[a]=i}));const r=Object.keys(n),o={cacheKeys:r,keys:s};if(s.forEach(a=>{this._cacheMap.set(a,o)}),r.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==i&&console.warn("[Cache] already has key:",a),this._cache.set(a,n[a])}),i instanceof ut){const a=i;s.forEach(l=>{a.baseTexture!==ut.EMPTY.baseTexture&&_t.addToCache(a.baseTexture,l),ut.addToCache(a,l)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(n=>{this._cache.delete(n)}),i.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const xo=new KA;class qA{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,i,s)=>(this._parsersValidated=!1,t[i]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,i){const s={promise:null,parser:null};return s.promise=(async()=>{var o,a;let n=null,r=null;if(i.loadParser&&(r=this._parserHash[i.loadParser],r||console.warn(`[Assets] specified load parser "${i.loadParser}" not found while loading ${t}`)),!r){for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.load&&((o=h.test)!=null&&o.call(h,t,i,this))){r=h;break}}if(!r)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await r.load(t,i,this),s.parser=r;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];h.parse&&h.parse&&await((a=h.testParse)==null?void 0:a.call(h,n,i,this))&&(n=await h.parse(n,i,this)||n,s.parser=h)}return n})(),s}async load(t,i){this._parsersValidated||this._validateParsers();let s=0;const n={},r=ph(t),o=Os(t,h=>({src:h})),a=o.length,l=o.map(async h=>{const c=Me.toAbsolute(h.src);if(!n[h.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,h)),n[h.src]=await this.promiseCache[c].promise,i&&i(++s/a)}catch(u){throw delete this.promiseCache[c],delete n[h.src],new Error(`[Loader.load] Failed to load ${c}.
${u}`)}});return await Promise.all(l),r?n[o[0].src]:n}async unload(t){const s=Os(t,n=>({src:n})).map(async n=>{var a,l;const r=Me.toAbsolute(n.src),o=this.promiseCache[r];if(o){const h=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,h,n,this),delete this.promiseCache[r]}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,i)=>(t[i.name]&&console.warn(`[Assets] loadParser name conflict "${i.name}"`),{...t,[i.name]:i}),{})}}var us=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(us||{});const JA=".json",QA="application/json",tC={extension:{type:it.LoadParser,priority:us.Low},name:"loadJson",test(e){return Ia(e,QA)||er(e,JA)},async load(e){return await(await Q.ADAPTER.fetch(e)).json()}};dt.add(tC);const eC=".txt",iC="text/plain",sC={name:"loadTxt",extension:{type:it.LoadParser,priority:us.Low},test(e){return Ia(e,iC)||er(e,eC)},async load(e){return await(await Q.ADAPTER.fetch(e)).text()}};dt.add(sC);const nC=["normal","bold","100","200","300","400","500","600","700","800","900"],rC=[".ttf",".otf",".woff",".woff2"],oC=["font/ttf","font/otf","font/woff","font/woff2"],aC=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function lC(e){const t=Me.extname(e),n=Me.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let r=n.length>0;for(const a of n)if(!a.match(aC)){r=!1;break}let o=n.join(" ");return r||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const hC={extension:{type:it.LoadParser,priority:us.Low},name:"loadWebFont",test(e){return Ia(e,oC)||er(e,rC)},async load(e,t){var s,n,r;const i=Q.ADAPTER.getFontFaceSet();if(i){const o=[],a=((s=t.data)==null?void 0:s.family)??lC(e),l=((r=(n=t.data)==null?void 0:n.weights)==null?void 0:r.filter(c=>nC.includes(c)))??["normal"],h=t.data??{};for(let c=0;c<l.length;c++){const u=l[c],d=new FontFace(a,`url(${encodeURI(e)})`,{...h,weight:u});await d.load(),i.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>Q.ADAPTER.getFontFaceSet().delete(t))}};dt.add(hC);let Bm=0,iu;const cC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",uC={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${cC}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},dC={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let su;class fC{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const i=URL.createObjectURL(new Blob([uC.code],{type:"application/javascript"})),s=new Worker(i);s.addEventListener("message",n=>{s.terminate(),URL.revokeObjectURL(i),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){iu===void 0&&(iu=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<iu&&(su||(su=URL.createObjectURL(new Blob([dC.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(su),t.addEventListener("message",i=>{this.complete(i.data),this.returnWorker(i.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,i){await this._initWorkers();const s=new Promise((n,r)=>{this.queue.push({id:t,arguments:i,resolve:n,reject:r})});return this.next(),s}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const i=this.queue.pop(),s=i.id;this.resolveHash[Bm]={resolve:i.resolve,reject:i.reject},t.postMessage({data:i.arguments,uuid:Bm++,id:s})}}const Nm=new fC;function ic(e,t,i){const s=new ut(e);return s.baseTexture.on("dispose",()=>{delete t.promiseCache[i]}),s}const pC=[".jpeg",".jpg",".png",".webp",".avif"],mC=["image/jpeg","image/png","image/webp","image/avif"];async function gC(e){const t=await Q.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const i=await t.blob();return await createImageBitmap(i)}const sc={name:"loadTextures",extension:{type:it.LoadParser,priority:us.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return Ia(e,mC)||er(e,pC)},async load(e,t,i){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Nm.isImageBitmapSupported()?s=await Nm.loadImageBitmap(e):s=await gC(e):s=await new Promise(r=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=e,s.complete?r(s):s.onload=()=>{r(s)}});const n=new _t(s,{resolution:ln(e),...t.data});return n.resource.src=e,ic(n,i,e)},unload(e){e.destroy(!0)}};dt.add(sc);const _C=".svg",yC="image/svg+xml",bC={extension:{type:it.LoadParser,priority:us.High},name:"loadSVG",test(e){return Ia(e,yC)||er(e,_C)},async testParse(e){return aa.test(e)},async parse(e,t,i){var o;const s=new aa(e,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);await s.load();const n=new _t(s,{resolution:ln(e),...t==null?void 0:t.data});return n.resource.src=e,ic(n,i,e)},async load(e,t){return(await Q.ADAPTER.fetch(e)).text()},unload:sc.unload};dt.add(bC);class xC{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(i[s])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const s=[];Array.isArray(i)?i.forEach(n=>{if(typeof n.name=="string"){const r=this._createBundleAssetId(t,n.name);s.push(r),this.add([n.name,r],n.srcs,n.data)}else{const r=n.name.map(o=>this._createBundleAssetId(t,o));r.forEach(o=>{s.push(o)}),this.add([...n.name,...r],n.srcs)}}):Object.keys(i).forEach(n=>{s.push(this._createBundleAssetId(t,n)),this.add([n,this._createBundleAssetId(t,n)],i[n])}),this._bundles[t]=s}add(t,i,s){const n=Os(t);n.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(i)||(typeof i=="string"?i=ZA(i):i=[i]);const r=i.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let h=0;h<this._parsers.length;h++){const c=this._parsers[h];if(c.test(o)){a=c.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=n),(this._basePath||this._rootPath)&&(a.src=Me.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??s,a});n.forEach(o=>{this._assetMap[o]=r})}resolveBundle(t){const i=ph(t);t=Os(t);const s={};return t.forEach(n=>{const r=this._bundles[n];if(r){const o=this.resolve(r),a={};for(const l in o){const h=o[l];a[this._extractAssetIdFromBundle(n,l)]=h}s[n]=a}}),i?s[t[0]]:s}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const s={};for(const n in i)s[n]=i[n].src;return s}return i.src}resolve(t){const i=ph(t);t=Os(t);const s={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let r=this._assetMap[n];const o=this._getPreferredOrder(r),a=r[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(h=>{const c=r.filter(u=>u[l]?u[l]===h:!1);c.length&&(r=c)})}),this._resolverHash[n]=r[0]??a}else{let r=n;(this._basePath||this._rootPath)&&(r=Me.toAbsolute(r,this._basePath,this._rootPath)),r=this._appendDefaultSearchParams(r),this._resolverHash[n]={src:r}}s[n]=this._resolverHash[n]}),i?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const s=t[0],n=this._preferredOrder.find(r=>r.params.format.includes(s.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}}class vC{constructor(){this._detections=[],this._initialized=!1,this.resolver=new xC,this.loader=new qA,this.cache=xo,this._backgroundLoader=new $A(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var r,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const i=((r=t.texturePreference)==null?void 0:r.resolution)??1,s=typeof i=="number"?[i]:i;let n=[];if((o=t.texturePreference)!=null&&o.format){const l=(a=t.texturePreference)==null?void 0:a.format;n=typeof l=="string"?[l]:l;for(const h of this._detections)await h.test()||(n=await h.remove(n))}else for(const l of this._detections)await l.test()&&(n=await l.add(n));this.resolver.prefer({params:{format:n,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t,i,s){this.resolver.add(t,i,s)}async load(t,i){this._initialized||await this.init();const s=ph(t),n=Os(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),r=this.resolver.resolve(n),o=await this._mapLoadToResolve(r,i);return s?o[n[0]]:o}addBundle(t,i){this.resolver.addBundle(t,i)}async loadBundle(t,i){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const n=this.resolver.resolveBundle(t),r={},o=Object.keys(n);let a=0,l=0;const h=()=>{i==null||i(++a/l)},c=o.map(u=>{const d=n[u];return l+=Object.keys(d).length,this._mapLoadToResolve(d,h).then(f=>{r[u]=f})});return await Promise.all(c),s?r[t[0]]:r}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolveBundle(t);Object.values(i).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return xo.get(t);const i={};for(let s=0;s<t.length;s++)i[s]=xo.get(t[s]);return i}async _mapLoadToResolve(t,i){const s=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const r=await this.loader.load(s,i);this._backgroundLoader.active=!0;const o={};return s.forEach((a,l)=>{const h=r[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[n[l]]=h,xo.set(c,h)}),o}async unload(t){this._initialized||await this.init();const i=Os(t).map(n=>typeof n!="string"?n.src:n),s=this.resolver.resolve(i);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=Os(t);const i=this.resolver.resolveBundle(t),s=Object.keys(i).map(n=>this._unloadFromResolved(i[n]));await Promise.all(s)}async _unloadFromResolved(t){const i=Object.values(t);i.forEach(s=>{xo.remove(s.src)}),await this.loader.unload(i)}get detections(){return this._detections}get preferWorkers(){return sc.config.preferWorkers}set preferWorkers(t){wt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(s=>s in t).forEach(s=>{i.config[s]=t[s]})})}}const el=new vC;dt.handleByList(it.LoadParser,el.loader.parsers).handleByList(it.ResolveParser,el.resolver.parsers).handleByList(it.CacheParser,el.cache.parsers).handleByList(it.DetectionParser,el.detections);const wC={extension:it.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof ut),getCacheableAssets:(e,t)=>{const i={};return e.forEach(s=>{t.forEach((n,r)=>{i[s+(r===0?"":r+1)]=n})}),i}};dt.add(wC);const SC={extension:{type:it.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await Q.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};dt.add(SC);const EC={extension:{type:it.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await Q.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};dt.add(EC);const Um=["png","jpg","jpeg"],TC={extension:{type:it.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Um],remove:async e=>e.filter(t=>!Um.includes(t))};dt.add(TC);const AC={extension:it.ResolveParser,test:sc.test,parse:e=>{var t;return{resolution:parseFloat(((t=Q.RETINA_PREFIX.exec(e))==null?void 0:t[1])??"1"),format:e.split(".").pop(),src:e}}};dt.add(AC);var Je=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(Je||{});const mh={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let xs,vr;function Gm(){vr={s3tc:xs.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:xs.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:xs.getExtension("WEBGL_compressed_texture_etc"),etc1:xs.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:xs.getExtension("WEBGL_compressed_texture_pvrtc")||xs.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:xs.getExtension("WEBGL_compressed_texture_atc"),astc:xs.getExtension("WEBGL_compressed_texture_astc")}}const CC={extension:{type:it.DetectionParser,priority:2},test:async()=>{const t=Q.ADAPTER.createCanvas().getContext("webgl");return t?(xs=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{vr||Gm();const t=[];for(const i in vr)vr[i]&&t.push(i);return[...t,...e]},remove:async e=>(vr||Gm(),e.filter(t=>!(t in vr)))};dt.add(CC);class MC extends Ca{constructor(t,i={width:1,height:1,autoLoad:!0}){let s,n;typeof t=="string"?(s=t,n=new Uint8Array):(s=null,n=t),super(n,i),this.origin=s,this.buffer=n?new ld(n):null,this._load=null,this.loaded=!1,this.origin!==null&&i.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new ld(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Nn extends MC{constructor(t,i){super(t,i),this.format=i.format,this.levels=i.levels||1,this._width=i.width,this._height=i.height,this._extension=Nn._formatToExtension(this.format),(i.levelBuffers||this.buffer)&&(this._levelBuffers=i.levelBuffers||Nn._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,i,s){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:h,levelHeight:c,levelBuffer:u}=this._levelBuffers[o];n.compressedTexImage2D(n.TEXTURE_2D,l,this.format,h,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=Nn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,i,s,n,r,o,a){const l=new Array(s);let h=t.byteOffset,c=o,u=a,d=c+n-1&~(n-1),f=u+r-1&~(r-1),p=d*f*mh[i];for(let m=0;m<s;m++)l[m]={levelID:m,levelWidth:s>1?c:d,levelHeight:s>1?u:f,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,c=c>>1||1,u=u>>1||1,d=c+n-1&~(n-1),f=u+r-1&~(r-1),p=d*f*mh[i];return l}}const nu=4,il=124,IC=32,Hm=20,PC=542327876,sl={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},RC={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},nl={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},DC=1,OC=2,kC=4,FC=64,LC=512,BC=131072,NC=827611204,UC=861165636,GC=894720068,HC=808540228,zC=4,VC={[NC]:Je.COMPRESSED_RGBA_S3TC_DXT1_EXT,[UC]:Je.COMPRESSED_RGBA_S3TC_DXT3_EXT,[GC]:Je.COMPRESSED_RGBA_S3TC_DXT5_EXT},WC={[70]:Je.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:Je.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:Je.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:Je.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:Je.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:Je.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:Je.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:Je.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:Je.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function jC(e){const t=new Uint32Array(e);if(t[0]!==PC)throw new Error("Invalid DDS file magic word");const s=new Uint32Array(e,0,il/Uint32Array.BYTES_PER_ELEMENT),n=s[sl.HEIGHT],r=s[sl.WIDTH],o=s[sl.MIPMAP_COUNT],a=new Uint32Array(e,sl.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,IC/Uint32Array.BYTES_PER_ELEMENT),l=a[DC];if(l&kC){const h=a[RC.FOURCC];if(h!==HC){const b=VC[h],v=nu+il,x=new Uint8Array(e,v);return[new Nn(x,{format:b,width:r,height:n,levels:o})]}const c=nu+il,u=new Uint32Array(t.buffer,c,Hm/Uint32Array.BYTES_PER_ELEMENT),d=u[nl.DXGI_FORMAT],f=u[nl.RESOURCE_DIMENSION],p=u[nl.MISC_FLAG],m=u[nl.ARRAY_SIZE],g=WC[d];if(g===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(p===zC)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const _=new Array,y=nu+il+Hm;if(m===1)_.push(new Uint8Array(e,y));else{const b=mh[g];let v=0,x=r,T=n;for(let A=0;A<o;A++){const M=Math.max(1,x+3&-4),O=Math.max(1,T+3&-4),C=M*O*b;v+=C,x=x>>>1,T=T>>>1}let S=y;for(let A=0;A<m;A++)_.push(new Uint8Array(e,S,v)),S+=v}return _.map(b=>new Nn(b,{format:g,width:r,height:n,levels:o}))}throw l&FC?new Error("DDSParser does not support uncompressed texture data."):l&LC?new Error("DDSParser does not supported YUV uncompressed texture data."):l&BC?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&OC?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const zm=[171,75,84,88,32,49,49,187,13,10,26,10],XC=67305985,Ei={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Sd=64,Vm={[pt.UNSIGNED_BYTE]:1,[pt.UNSIGNED_SHORT]:2,[pt.INT]:4,[pt.UNSIGNED_INT]:4,[pt.FLOAT]:4,[pt.HALF_FLOAT]:8},YC={[Z.RGBA]:4,[Z.RGB]:3,[Z.RG]:2,[Z.RED]:1,[Z.LUMINANCE]:1,[Z.LUMINANCE_ALPHA]:2,[Z.ALPHA]:1},$C={[pt.UNSIGNED_SHORT_4_4_4_4]:2,[pt.UNSIGNED_SHORT_5_5_5_1]:2,[pt.UNSIGNED_SHORT_5_6_5]:2};function ZC(e,t,i=!1){const s=new DataView(t);if(!KC(e,s))return null;const n=s.getUint32(Ei.ENDIANNESS,!0)===XC,r=s.getUint32(Ei.GL_TYPE,n),o=s.getUint32(Ei.GL_FORMAT,n),a=s.getUint32(Ei.GL_INTERNAL_FORMAT,n),l=s.getUint32(Ei.PIXEL_WIDTH,n),h=s.getUint32(Ei.PIXEL_HEIGHT,n)||1,c=s.getUint32(Ei.PIXEL_DEPTH,n)||1,u=s.getUint32(Ei.NUMBER_OF_ARRAY_ELEMENTS,n)||1,d=s.getUint32(Ei.NUMBER_OF_FACES,n),f=s.getUint32(Ei.NUMBER_OF_MIPMAP_LEVELS,n),p=s.getUint32(Ei.BYTES_OF_KEY_VALUE_DATA,n);if(h===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");const m=4,g=4,_=l+3&-4,y=h+3&-4,b=new Array(u);let v=l*h;r===0&&(v=_*y);let x;if(r!==0?Vm[r]?x=Vm[r]*YC[o]:x=$C[r]:x=mh[a],x===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=i?JC(s,p,n):null;let A=v*x,M=l,O=h,C=_,k=y,P=Sd+p;for(let w=0;w<f;w++){const E=s.getUint32(P,n);let L=P+4;for(let I=0;I<u;I++){let N=b[I];N||(N=b[I]=new Array(f)),N[w]={levelID:w,levelWidth:f>1||r!==0?M:C,levelHeight:f>1||r!==0?O:k,levelBuffer:new Uint8Array(t,L,A)},L+=A}P+=E+4,P=P%4!==0?P+4-P%4:P,M=M>>1||1,O=O>>1||1,C=M+m-1&~(m-1),k=O+g-1&~(g-1),A=C*k*x}return r!==0?{uncompressed:b.map(w=>{let E=w[0].levelBuffer,L=!1;return r===pt.FLOAT?E=new Float32Array(w[0].levelBuffer.buffer,w[0].levelBuffer.byteOffset,w[0].levelBuffer.byteLength/4):r===pt.UNSIGNED_INT?(L=!0,E=new Uint32Array(w[0].levelBuffer.buffer,w[0].levelBuffer.byteOffset,w[0].levelBuffer.byteLength/4)):r===pt.INT&&(L=!0,E=new Int32Array(w[0].levelBuffer.buffer,w[0].levelBuffer.byteOffset,w[0].levelBuffer.byteLength/4)),{resource:new Ca(E,{width:w[0].levelWidth,height:w[0].levelHeight}),type:r,format:L?qC(o):o}}),kvData:T}:{compressed:b.map(w=>new Nn(null,{format:a,width:l,height:h,levels:f,levelBuffers:w})),kvData:T}}function KC(e,t){for(let i=0;i<zm.length;i++)if(t.getUint8(i)!==zm[i])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function qC(e){switch(e){case Z.RGBA:return Z.RGBA_INTEGER;case Z.RGB:return Z.RGB_INTEGER;case Z.RG:return Z.RG_INTEGER;case Z.RED:return Z.RED_INTEGER;default:return e}}function JC(e,t,i){const s=new Map;let n=0;for(;n<t;){const r=e.getUint32(Sd+n,i),o=Sd+n+4,a=3-(r+3)%4;if(r===0||r>t-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<r&&e.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(e.buffer,o,l)),c=new DataView(e.buffer,o+l+1,r-l-1);s.set(h,c),n+=4+r+a}return s}const QC={extension:{type:it.LoadParser,priority:us.High},name:"loadDDS",test(e){return er(e,".dds")},async load(e,t,i){const n=await(await Q.ADAPTER.fetch(e)).arrayBuffer(),o=jC(n).map(a=>{const l=new _t(a,{mipmap:ls.OFF,alphaMode:Vi.NO_PREMULTIPLIED_ALPHA,resolution:ln(e),...t.data});return ic(l,i,e)});return o.length===1?o[0]:o},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};dt.add(QC);const tM={extension:{type:it.LoadParser,priority:us.High},name:"loadKTX",test(e){return er(e,".ktx")},async load(e,t,i){const n=await(await Q.ADAPTER.fetch(e)).arrayBuffer(),{compressed:r,uncompressed:o,kvData:a}=ZC(e,n),l=r??o,h={mipmap:ls.OFF,alphaMode:Vi.NO_PREMULTIPLIED_ALPHA,resolution:ln(e),...t.data},c=l.map(u=>{l===o&&Object.assign(h,{type:u.type,format:u.format});const d=new _t(u,h);return d.ktxKeyValueData=a,ic(d,i,e)});return c.length===1?c[0]:c},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};dt.add(tM);const eM={extension:it.ResolveParser,test:e=>{const i=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(i)},parse:e=>{var s,n;if(e.split("?")[0].split(".").pop()==="ktx"){const r=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(r.some(o=>e.endsWith(o)))return{resolution:parseFloat(((s=Q.RETINA_PREFIX.exec(e))==null?void 0:s[1])??"1"),format:r.find(o=>e.endsWith(o)),src:e}}return{resolution:parseFloat(((n=Q.RETINA_PREFIX.exec(e))==null?void 0:n[1])??"1"),format:e.split(".").pop(),src:e}}};dt.add(eM);const iM=new xt,sM=4,Io=class{constructor(e){this.renderer=e}async image(e,t,i){const s=new Image;return s.src=await this.base64(e,t,i),s}async base64(e,t,i){const s=this.canvas(e);if(s.toBlob!==void 0)return new Promise((n,r)=>{s.toBlob(o=>{if(!o){r(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>n(a.result),a.onerror=r,a.readAsDataURL(o)},t,i)});if(s.toDataURL!==void 0)return s.toDataURL(t,i);if(s.convertToBlob!==void 0){const n=await s.convertToBlob({type:t,quality:i});return new Promise((r,o)=>{const a=new FileReader;a.onload=()=>r(a.result),a.onerror=o,a.readAsDataURL(n)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:s,height:n,flipY:r}=this._rawPixels(e,t);r&&Io._flipY(i,s,n),Io._unpremultiplyAlpha(i);const o=new ZT(s,n,1),a=new ImageData(new Uint8ClampedArray(i.buffer),s,n);return o.context.putImageData(a,0,0),o.canvas}pixels(e,t){const{pixels:i,width:s,height:n,flipY:r}=this._rawPixels(e,t);return r&&Io._flipY(i,s,n),Io._unpremultiplyAlpha(i),i}_rawPixels(e,t){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let s,n=!1,r,o=!1;if(e&&(e instanceof tr?r=e:(r=i.generateTexture(e,{resolution:i.resolution,multisample:i.multisample}),o=!0)),r){if(s=r.baseTexture.resolution,t=t??r.frame,n=!1,!o){i.renderTexture.bind(r);const u=r.framebuffer.glFramebuffers[i.CONTEXT_UID];u.blitFramebuffer&&i.framebuffer.bind(u.blitFramebuffer)}}else s=i.resolution,t||(t=iM,t.width=i.width/s,t.height=i.height/s),n=!0,i.renderTexture.bind();const a=Math.round(t.width*s),l=Math.round(t.height*s),h=new Uint8Array(sM*a*l),c=i.gl;return c.readPixels(Math.round(t.x*s),Math.round(t.y*s),a,l,c.RGBA,c.UNSIGNED_BYTE,h),o&&(r==null||r.destroy(!0)),{pixels:h,width:a,height:l,flipY:n}}destroy(){this.renderer=null}static _flipY(e,t,i){const s=t<<2,n=i>>1,r=new Uint8Array(s);for(let o=0;o<n;o++){const a=o*s,l=(i-o-1)*s;r.set(e.subarray(a,a+s)),e.copyWithin(a,l,l+s),e.set(r,l)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let i=0;i<t;i+=4){const s=e[i+3];if(s!==0){const n=255.001/s;e[i]=e[i]*n+.5,e[i+1]=e[i+1]*n+.5,e[i+2]=e[i+2]*n+.5}}}};let mb=Io;mb.extension={name:"extract",type:it.RendererSystem};dt.add(mb);const gh={build(e){const t=e.points;let i,s,n,r,o,a;if(e.type===we.CIRC){const p=e.shape;i=p.x,s=p.y,o=a=p.radius,n=r=0}else if(e.type===we.ELIP){const p=e.shape;i=p.x,s=p.y,o=p.width,a=p.height,n=r=0}else{const p=e.shape,m=p.width/2,g=p.height/2;i=p.x+m,s=p.y+g,o=a=Math.max(0,Math.min(p.radius,Math.min(m,g))),n=m-o,r=g-a}if(!(o>=0&&a>=0&&n>=0&&r>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),h=l*8+(n?4:0)+(r?4:0);if(t.length=h,h===0)return;if(l===0){t.length=8,t[0]=t[6]=i+n,t[1]=t[3]=s+r,t[2]=t[4]=i-n,t[5]=t[7]=s-r;return}let c=0,u=l*4+(n?2:0)+2,d=u,f=h;{const p=n+o,m=r,g=i+p,_=i-p,y=s+m;if(t[c++]=g,t[c++]=y,t[--u]=y,t[--u]=_,r){const b=s-m;t[d++]=_,t[d++]=b,t[--f]=b,t[--f]=g}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),g=n+Math.cos(m)*o,_=r+Math.sin(m)*a,y=i+g,b=i-g,v=s+_,x=s-_;t[c++]=y,t[c++]=v,t[--u]=v,t[--u]=b,t[d++]=b,t[d++]=x,t[--f]=x,t[--f]=y}{const p=n,m=r+a,g=i+p,_=i-p,y=s+m,b=s-m;t[c++]=g,t[c++]=y,t[--f]=b,t[--f]=g,n&&(t[c++]=_,t[c++]=y,t[--f]=b,t[--f]=_)}},triangulate(e,t){const i=e.points,s=t.points,n=t.indices;if(i.length===0)return;let r=s.length/2;const o=r;let a,l;if(e.type!==we.RREC){const c=e.shape;a=c.x,l=c.y}else{const c=e.shape;a=c.x+c.width/2,l=c.y+c.height/2}const h=e.matrix;s.push(e.matrix?h.a*a+h.c*l+h.tx:a,e.matrix?h.b*a+h.d*l+h.ty:l),r++,s.push(i[0],i[1]);for(let c=2;c<i.length;c+=2)s.push(i[c],i[c+1]),n.push(r++,o,r);n.push(o+1,o,r)}};function Wm(e,t=!1){const i=e.length;if(i<6)return;let s=0;for(let n=0,r=e[i-2],o=e[i-1];n<i;n+=2){const a=e[n],l=e[n+1];s+=(a-r)*(l+o),r=a,o=l}if(!t&&s>0||t&&s<=0){const n=i/2;for(let r=n+n%2;r<i;r+=2){const o=i-r-2,a=i-r-1,l=r,h=r+1;[e[o],e[l]]=[e[l],e[o]],[e[a],e[h]]=[e[h],e[a]]}}}const gb={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let i=e.points;const s=e.holes,n=t.points,r=t.indices;if(i.length>=6){Wm(i,!1);const o=[];for(let h=0;h<s.length;h++){const c=s[h];Wm(c.points,!0),o.push(i.length/2),i=i.concat(c.points)}const a=ah(i,o,2);if(!a)return;const l=n.length/2;for(let h=0;h<a.length;h+=3)r.push(a[h]+l),r.push(a[h+1]+l),r.push(a[h+2]+l);for(let h=0;h<i.length;h++)n.push(i[h])}}},nM={build(e){const t=e.shape,i=t.x,s=t.y,n=t.width,r=t.height,o=e.points;o.length=0,n>=0&&r>=0&&o.push(i,s,i+n,s,i+n,s+r,i,s+r)},triangulate(e,t){const i=e.points,s=t.points;if(i.length===0)return;const n=s.length/2;s.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},rM={build(e){gh.build(e)},triangulate(e,t){gh.triangulate(e,t)}};var Ii=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Ii||{}),Fn=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(Fn||{});const Zr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let i=Math.ceil(e/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}};class jm{static curveTo(t,i,s,n,r,o){const a=o[o.length-2],h=o[o.length-1]-i,c=a-t,u=n-i,d=s-t,f=Math.abs(h*d-c*u);if(f<1e-8||r===0)return(o[o.length-2]!==t||o[o.length-1]!==i)&&o.push(t,i),null;const p=h*h+c*c,m=u*u+d*d,g=h*u+c*d,_=r*Math.sqrt(p)/f,y=r*Math.sqrt(m)/f,b=_*g/p,v=y*g/m,x=_*d+y*c,T=_*u+y*h,S=c*(y+b),A=h*(y+b),M=d*(_+v),O=u*(_+v),C=Math.atan2(A-T,S-x),k=Math.atan2(O-T,M-x);return{cx:x+t,cy:T+i,radius:r,startAngle:C,endAngle:k,anticlockwise:c*u>d*h}}static arc(t,i,s,n,r,o,a,l,h){const c=a-o,u=Zr._segmentsCount(Math.abs(c)*r,Math.ceil(Math.abs(c)/uh)*40),d=c/(u*2),f=d*2,p=Math.cos(d),m=Math.sin(d),g=u-1,_=g%1/g;for(let y=0;y<=g;++y){const b=y+_*y,v=d+o+f*b,x=Math.cos(v),T=-Math.sin(v);h.push((p*x+m*T)*r+s,(p*-T+m*x)*r+n)}}}class oM{constructor(){this.reset()}begin(t,i,s){this.reset(),this.style=t,this.start=i,this.attribStart=s}end(t,i){this.attribSize=i-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Mf{static curveLength(t,i,s,n,r,o,a,l){let c=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=t,T=i;for(let S=1;S<=10;++S)u=S/10,d=u*u,f=d*u,p=1-u,m=p*p,g=m*p,_=g*t+3*m*u*s+3*p*d*r+f*a,y=g*i+3*m*u*n+3*p*d*o+f*l,b=x-_,v=T-y,x=_,T=y,c+=Math.sqrt(b*b+v*v);return c}static curveTo(t,i,s,n,r,o,a){const l=a[a.length-2],h=a[a.length-1];a.length-=2;const c=Zr._segmentsCount(Mf.curveLength(l,h,t,i,s,n,r,o));let u=0,d=0,f=0,p=0,m=0;a.push(l,h);for(let g=1,_=0;g<=c;++g)_=g/c,u=1-_,d=u*u,f=d*u,p=_*_,m=p*_,a.push(f*l+3*d*_*t+3*u*p*s+m*r,f*h+3*d*_*i+3*u*p*n+m*o)}}function Xm(e,t,i,s,n,r,o,a){const l=e-i*n,h=t-s*n,c=e+i*r,u=t+s*r;let d,f;o?(d=s,f=-i):(d=-s,f=i);const p=l+d,m=h+f,g=c+d,_=u+f;return a.push(p,m,g,_),2}function xn(e,t,i,s,n,r,o,a){const l=i-e,h=s-t;let c=Math.atan2(l,h),u=Math.atan2(n-e,r-t);a&&c<u?c+=Math.PI*2:!a&&c>u&&(u+=Math.PI*2);let d=c;const f=u-c,p=Math.abs(f),m=Math.sqrt(l*l+h*h),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,_=f/g;if(d+=_,a){o.push(e,t,i,s);for(let y=1,b=d;y<g;y++,b+=_)o.push(e,t,e+Math.sin(b)*m,t+Math.cos(b)*m);o.push(e,t,n,r)}else{o.push(i,s,e,t);for(let y=1,b=d;y<g;y++,b+=_)o.push(e+Math.sin(b)*m,t+Math.cos(b)*m,e,t);o.push(n,r,e,t)}return g*2}function aM(e,t){const i=e.shape;let s=e.points||i.points.slice();const n=t.closePointEps;if(s.length===0)return;const r=e.lineStyle,o=new Mt(s[0],s[1]),a=new Mt(s[s.length-2],s[s.length-1]),l=i.type!==we.POLY||i.closeStroke,h=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){s=s.slice(),h&&(s.pop(),s.pop(),a.set(s[s.length-2],s[s.length-1]));const I=(o.x+a.x)*.5,N=(a.y+o.y)*.5;s.unshift(I,N),s.push(I,N)}const c=t.points,u=s.length/2;let d=s.length;const f=c.length/2,p=r.width/2,m=p*p,g=r.miterLimit*r.miterLimit;let _=s[0],y=s[1],b=s[2],v=s[3],x=0,T=0,S=-(y-v),A=_-b,M=0,O=0,C=Math.sqrt(S*S+A*A);S/=C,A/=C,S*=p,A*=p;const k=r.alignment,P=(1-k)*2,w=k*2;l||(r.cap===Fn.ROUND?d+=xn(_-S*(P-w)*.5,y-A*(P-w)*.5,_-S*P,y-A*P,_+S*w,y+A*w,c,!0)+2:r.cap===Fn.SQUARE&&(d+=Xm(_,y,S,A,P,w,!0,c))),c.push(_-S*P,y-A*P,_+S*w,y+A*w);for(let I=1;I<u-1;++I){_=s[(I-1)*2],y=s[(I-1)*2+1],b=s[I*2],v=s[I*2+1],x=s[(I+1)*2],T=s[(I+1)*2+1],S=-(y-v),A=_-b,C=Math.sqrt(S*S+A*A),S/=C,A/=C,S*=p,A*=p,M=-(v-T),O=b-x,C=Math.sqrt(M*M+O*O),M/=C,O/=C,M*=p,O*=p;const N=b-_,F=y-v,D=b-x,G=T-v,W=N*D+F*G,q=F*D-G*N,X=q<0;if(Math.abs(q)<.001*Math.abs(W)){c.push(b-S*P,v-A*P,b+S*w,v+A*w),W>=0&&(r.join===Ii.ROUND?d+=xn(b,v,b-S*P,v-A*P,b-M*P,v-O*P,c,!1)+4:d+=2,c.push(b-M*w,v-O*w,b+M*P,v+O*P));continue}const st=(-S+_)*(-A+v)-(-S+b)*(-A+y),ft=(-M+x)*(-O+v)-(-M+b)*(-O+T),rt=(N*ft-D*st)/q,bt=(G*st-F*ft)/q,z=(rt-b)*(rt-b)+(bt-v)*(bt-v),B=b+(rt-b)*P,H=v+(bt-v)*P,j=b-(rt-b)*w,Y=v-(bt-v)*w,tt=Math.min(N*N+F*F,D*D+G*G),gt=X?P:w,Et=tt+gt*gt*m,ke=z<=Et;let $e=r.join;if($e===Ii.MITER&&z/m>g&&($e=Ii.BEVEL),ke)switch($e){case Ii.MITER:{c.push(B,H,j,Y);break}case Ii.BEVEL:{X?c.push(B,H,b+S*w,v+A*w,B,H,b+M*w,v+O*w):c.push(b-S*P,v-A*P,j,Y,b-M*P,v-O*P,j,Y),d+=2;break}case Ii.ROUND:{X?(c.push(B,H,b+S*w,v+A*w),d+=xn(b,v,b+S*w,v+A*w,b+M*w,v+O*w,c,!0)+4,c.push(B,H,b+M*w,v+O*w)):(c.push(b-S*P,v-A*P,j,Y),d+=xn(b,v,b-S*P,v-A*P,b-M*P,v-O*P,c,!1)+4,c.push(b-M*P,v-O*P,j,Y));break}}else{switch(c.push(b-S*P,v-A*P,b+S*w,v+A*w),$e){case Ii.MITER:{X?c.push(j,Y,j,Y):c.push(B,H,B,H),d+=2;break}case Ii.ROUND:{X?d+=xn(b,v,b+S*w,v+A*w,b+M*w,v+O*w,c,!0)+2:d+=xn(b,v,b-S*P,v-A*P,b-M*P,v-O*P,c,!1)+2;break}}c.push(b-M*P,v-O*P,b+M*w,v+O*w),d+=2}}_=s[(u-2)*2],y=s[(u-2)*2+1],b=s[(u-1)*2],v=s[(u-1)*2+1],S=-(y-v),A=_-b,C=Math.sqrt(S*S+A*A),S/=C,A/=C,S*=p,A*=p,c.push(b-S*P,v-A*P,b+S*w,v+A*w),l||(r.cap===Fn.ROUND?d+=xn(b-S*(P-w)*.5,v-A*(P-w)*.5,b-S*P,v-A*P,b+S*w,v+A*w,c,!1)+2:r.cap===Fn.SQUARE&&(d+=Xm(b,v,S,A,P,w,!1,c)));const E=t.indices,L=Zr.epsilon*Zr.epsilon;for(let I=f;I<d+f-2;++I)_=c[I*2],y=c[I*2+1],b=c[(I+1)*2],v=c[(I+1)*2+1],x=c[(I+2)*2],T=c[(I+2)*2+1],!(Math.abs(_*(v-T)+b*(T-y)+x*(y-v))<L)&&E.push(I,I+1,I+2)}function lM(e,t){let i=0;const s=e.shape,n=e.points||s.points,r=s.type!==we.POLY||s.closeStroke;if(n.length===0)return;const o=t.points,a=t.indices,l=n.length/2,h=o.length/2;let c=h;for(o.push(n[0],n[1]),i=1;i<l;i++)o.push(n[i*2],n[i*2+1]),a.push(c,c+1),c++;r&&a.push(c,h)}function Ym(e,t){e.lineStyle.native?lM(e,t):aM(e,t)}class If{static curveLength(t,i,s,n,r,o){const a=t-2*s+r,l=i-2*n+o,h=2*s-2*t,c=2*n-2*i,u=4*(a*a+l*l),d=4*(a*h+l*c),f=h*h+c*c,p=2*Math.sqrt(u+d+f),m=Math.sqrt(u),g=2*u*m,_=2*Math.sqrt(f),y=d/m;return(g*p+m*d*(p-_)+(4*f*u-d*d)*Math.log((2*m+y+p)/(y+_)))/(4*g)}static curveTo(t,i,s,n,r){const o=r[r.length-2],a=r[r.length-1],l=Zr._segmentsCount(If.curveLength(o,a,t,i,s,n));let h=0,c=0;for(let u=1;u<=l;++u){const d=u/l;h=o+(t-o)*d,c=a+(i-a)*d,r.push(h+(t+(s-t)*d-h)*d,c+(i+(n-i)*d-c)*d)}}}const ru={[we.POLY]:gb,[we.CIRC]:gh,[we.ELIP]:gh,[we.RECT]:nM,[we.RREC]:rM},$m=[],rl=[];class _h{constructor(t,i=null,s=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=s,this.fillStyle=i,this.matrix=n,this.type=t.type}clone(){return new _h(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const pr=new Mt,_b=class extends Cy{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new dh,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),rl.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),$m.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,s=null){const n=new _h(e,t,i,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new _h(e,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const s=t[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,pr):pr.copyFrom(e),s.shape.contains(pr.x,pr.y))){let n=!1;if(s.holes){for(let r=0;r<s.holes.length;r++)if(s.holes[r].shape.contains(pr.x,pr.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const l=t[a],h=l.fillStyle,c=l.lineStyle;ru[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(h.visible||c.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?h:c;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=tn.REPEAT,d===0?this.processFill(l):this.processLine(l);const _=this.points.length/2-g;_!==0&&(i&&!this._compareStyles(s,f)&&(i.end(m,g),i=null),i||(i=$m.pop()||new oM,i.begin(f,m,g),this.batches.push(i),s=f),this.addUvs(this.points,e,f.texture,g,_,f.matrix))}}const n=this.indices.length,r=this.points.length/2;if(i&&i.end(n,r),this.batches.length===0){this.batchable=!0;return}const o=r>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],s=i.fillStyle,n=i.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const s=e[t];for(let n=0;n<s.size;n++){const r=s.start+n;this.indicesUint16[r]=this.indicesUint16[r]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<_b.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++_t._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),rl.push(this.drawCalls[c]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let s=rl.pop();s||(s=new cd,s.texArray=new dd),s.texArray.count=0,s.start=0,s.size=0,s.type=Qi.TRIANGLES;let n=0,r=null,o=0,a=!1,l=Qi.TRIANGLES,h=0;this.drawCalls.push(s);for(let c=0;c<this.batches.length;c++){const u=this.batches[c],d=8,f=u.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?Qi.LINES:Qi.TRIANGLES,r=null,n=d,e++),r!==p&&(r=p,p._batchEnabled!==e&&(n===d&&(e++,n=0,s.size>0&&(s=rl.pop(),s||(s=new cd,s.texArray=new dd),this.drawCalls.push(s)),s.start=h,s.size=0,s.texArray.count=0,s.type=l),p.touched=1,p._batchEnabled=e,p._batchLocation=n,p.wrapMode=tn.REPEAT,s.texArray.elements[s.texArray.count++]=p,n++)),s.size+=u.size,h+=u.size,o=p._batchLocation,this.addColors(t,f.color,f.alpha,u.attribSize,u.attribStart),this.addTextureIds(i,o,u.attribSize,u.attribStart)}_t._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,s=this.textureIds,n=new ArrayBuffer(e.length*3*4),r=new Float32Array(n),o=new Uint32Array(n);let a=0;for(let l=0;l<e.length/2;l++)r[a++]=e[l*2],r[a++]=e[l*2+1],r[a++]=t[l*2],r[a++]=t[l*2+1],o[a++]=i[l],r[a++]=s[l];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?gb.triangulate(e,this):ru[e.type].triangulate(e,this)}processLine(e){Ym(e,this);for(let t=0;t<e.holes.length;t++)Ym(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];ru[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const s=e[i*2],n=e[i*2+1];e[i*2]=t.a*s+t.c*n+t.tx,e[i*2+1]=t.b*s+t.d*n+t.ty}}addColors(e,t,i,s,n=0){const r=Ot.shared.setValue(t).toLittleEndianNumber(),o=Ot.shared.setValue(r).toPremultiplied(i);e.length=Math.max(e.length,n+s);for(let a=0;a<s;a++)e[n+a]=o}addTextureIds(e,t,i,s=0){e.length=Math.max(e.length,s+i);for(let n=0;n<i;n++)e[s+n]=t}addUvs(e,t,i,s,n,r=null){let o=0;const a=t.length,l=i.frame;for(;o<n;){let c=e[(s+o)*2],u=e[(s+o)*2+1];if(r){const d=r.a*c+r.c*u+r.tx;u=r.b*c+r.d*u+r.ty,c=d}o++,t.push(c/l.width,u/l.height)}const h=i.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,i,a,n)}adjustUvs(e,t,i,s){const n=t.baseTexture,r=1e-6,o=i+s*2,a=t.frame,l=a.width/n.width,h=a.height/n.height;let c=a.x/a.width,u=a.y/a.height,d=Math.floor(e[i]+r),f=Math.floor(e[i+1]+r);for(let p=i+2;p<o;p+=2)d=Math.min(d,Math.floor(e[p]+r)),f=Math.min(f,Math.floor(e[p+1]+r));c-=d,u-=f;for(let p=i;p<o;p+=2)e[p]=(e[p]+c)*l,e[p+1]=(e[p+1]+u)*h}};let yb=_b;yb.BATCHABLE_SIZE=100;class nc{constructor(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new nc;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Pf extends nc{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Fn.BUTT,this.join=Ii.MITER,this.miterLimit=10}clone(){const t=new Pf;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const ou={},Nl=class extends yi{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new nc,this._lineStyle=new Pf,this._matrix=null,this._holeMode=!1,this.state=Us.for2d(),this._geometry=e||new yb,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Ot(16777215),this.blendMode=mt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Nl(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i,s=.5,n=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:s,native:n}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:ut.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Fn.BUTT,join:Ii.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Lr,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Lr,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,s=i[i.length-2],n=i[i.length-1];return(s!==e||n!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),If.curveTo(e,t,i,s,n),this}bezierCurveTo(e,t,i,s,n,r){return this._initCurve(),Mf.curveTo(e,t,i,s,n,r,this.currentPath.points),this}arcTo(e,t,i,s,n){this._initCurve(e,t);const r=this.currentPath.points,o=jm.curveTo(e,t,i,s,n,r);if(o){const{cx:a,cy:l,radius:h,startAngle:c,endAngle:u,anticlockwise:d}=o;this.arc(a,l,h,c,u,d)}return this}arc(e,t,i,s,n,r=!1){if(s===n)return this;if(!r&&n<=s?n+=uh:r&&s<=n&&(s+=uh),n-s===0)return this;const a=e+Math.cos(s)*i,l=t+Math.sin(s)*i,h=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const u=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);u<h&&d<h||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return jm.arc(a,l,e,t,i,s,n,r,c),this}beginFill(e=0,t){return this.beginTextureFill({texture:ut.WHITE,color:e,alpha:t})}normalizeColor(e){const t=Ot.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:ut.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,s){return this.drawShape(new xt(e,t,i,s))}drawRoundedRect(e,t,i,s,n){return this.drawShape(new Ef(e,t,i,s,n))}drawCircle(e,t,i){return this.drawShape(new wf(e,t,i))}drawEllipse(e,t,i,s){return this.drawShape(new Sf(e,t,i,s))}drawPolygon(...e){let t,i=!0;const s=e[0];s.points?(i=s.closeStroke,t=s.points):Array.isArray(e[0])?t=e[0]:t=e;const n=new Lr(t);return n.closeStroke=i,this.drawShape(n),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===we.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let s=0;s<i;s++){const n=e.batches[s],r=n.style.color,o=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),a=new Float32Array(e.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),l=new Uint16Array(e.indicesUint16.buffer,n.start*2,n.size),h={vertexData:o,blendMode:t,indices:l,uvs:a,_batchRGB:Ot.shared.setValue(r).toRgbArray(),_tintRGB:r,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,s=this.worldAlpha,n=t.uniforms,r=i.drawCalls;n.translationMatrix=this.transform.worldTransform,Ot.shared.setValue(this._tintColor).premultiply(s).toArray(n.tint),e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let o=0,a=r.length;o<a;o++)this._renderDrawCallDirect(e,i.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:i,type:s,size:n,start:r}=t,o=i.count;for(let a=0;a<o;a++)e.texture.bind(i.elements[a],a);e.geometry.draw(s,n,r)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!ou[i]){const{maxTextures:s}=e.plugins[i],n=new Int32Array(s);for(let a=0;a<s;a++)n[a]=a;const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ht,default:Bi.from({uSamplers:n},!0)},o=e.plugins[i]._shader.program;ou[i]=new ss(o,r)}t=ou[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:s,maxY:n}=e.bounds;this._bounds.addFrame(this.transform,t,i,s,n)}containsPoint(e){return this.worldTransform.applyInverse(e,Nl._TEMP_POINT),this._geometry.containsPoint(Nl._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=Ot.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,s=t.b,n=t.c,r=t.d,o=t.tx,a=t.ty,l=this._geometry.points,h=this.vertexData;let c=0;for(let u=0;u<l.length;u+=2){const d=l[u],f=l[u+1];h[c++]=i*d+n*f+o,h[c++]=r*f+s*d+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let Pa=Nl;Pa.curves=Zr;Pa._TEMP_POINT=new Mt;class hM{constructor(t,i){this.uvBuffer=t,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const i=this.uvBuffer.data;(!this.data||this.data.length!==i.length)&&(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}}const au=new Mt,Zm=new Lr,bb=class extends yi{constructor(e,t,i,s=Qi.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||Us.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Q.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Qi.TRIANGLES&&t.length<bb.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const t=this.geometry.buffers[0],i=t.data,s=t._updateID;if(s===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));const n=this.transform.worldTransform,r=n.a,o=n.b,a=n.c,l=n.d,h=n.tx,c=n.ty,u=this.vertexData;for(let d=0;d<u.length/2;d++){const f=i[d*2],p=i[d*2+1];u[d*2]=r*f+a*p+h,u[d*2+1]=o*f+l*p+c}if(this._roundPixels){const d=Q.RESOLUTION;for(let f=0;f<u.length;++f)u[f]=Math.round(u[f]*d)/d}this.vertexDirty=s}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new hM(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,au);const t=this.geometry.getBuffer("aVertexPosition").data,i=Zm.points,s=this.geometry.getIndex().data,n=s.length,r=this.drawMode===4?3:1;for(let o=0;o+2<n;o+=r){const a=s[o]*2,l=s[o+1]*2,h=s[o+2]*2;if(i[0]=t[a],i[1]=t[a+1],i[2]=t[l],i[3]=t[l+1],i[4]=t[h],i[5]=t[h+1],Zm.contains(au.x,au.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Ed=bb;Ed.BATCHABLE_SIZE=100;class cM extends hn{constructor(t,i,s){super();const n=new ue(t),r=new ue(i,!0),o=new ue(s,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,pt.FLOAT).addAttribute("aTextureCoord",r,2,!1,pt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var uM=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,dM=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Km extends ss{constructor(t,i){const s={uSampler:t,alpha:1,uTextureMatrix:Ht.IDENTITY,uColor:new Float32Array([1,1,1,1])};i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(s,i.uniforms),super(i.program||Oi.from(dM,uM),s),this._colorDirty=!1,this.uvMatrix=new Vy(t),this.batchable=i.program===void 0,this.pluginName=i.pluginName,this._tintColor=new Ot(i.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=i.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const i=this.texture.baseTexture.alphaMode;Ot.shared.setValue(this._tintColor).premultiply(this._alpha,i).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class qm{constructor(t,i,s){this.geometry=new hn,this.indexBuffer=null,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let r=t[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||pt.FLOAT,offset:r.offset},i[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let i=0;this.indexBuffer=new ue(YT(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=i,i+=a.size,this.dynamicStride+=a.size}const s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new ue(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const r=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(r),this.staticDataUint32=new Uint32Array(r),this.staticBuffer=new ue(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===pt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===pt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,i,s){for(let n=0;n<this.dynamicProperties.length;n++){const r=this.dynamicProperties[n];r.uploadFunction(t,i,s,r.type===pt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,i,s){for(let n=0;n<this.staticProperties.length;n++){const r=this.staticProperties[n];r.uploadFunction(t,i,s,r.type===pt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fM=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,pM=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class xb extends qh{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Ht,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:pt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=ss.from(pM,fM,{}),this.state=Us.for2d()}render(t){const i=t.children,s=t._maxSize,n=t._batchSize,r=this.renderer;let o=i.length;if(o===0)return;o>s&&!t.autoResize&&(o=s);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=i[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=wy(t.blendMode,h),r.state.set(this.state);const c=r.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Ot.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=n,p+=1){let m=o-f;m>n&&(m=n),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const g=a[p];g.uploadDynamic(i,f,m);const _=t._bufferUpdateIDs[p]||0;d=d||g._updateID<_,d&&(g._updateID=t._updateID,g.uploadStatic(i,f,m)),r.geometry.bind(g.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}generateBuffers(t){const i=[],s=t._maxSize,n=t._batchSize,r=t._properties;for(let o=0;o<s;o+=n)i.push(new qm(this.properties,r,n));return i}_generateOneMoreBuffer(t){const i=t._batchSize,s=t._properties;return new qm(this.properties,s,i)}uploadVertices(t,i,s,n,r,o){let a=0,l=0,h=0,c=0;for(let u=0;u<s;++u){const d=t[i+u],f=d._texture,p=d.scale.x,m=d.scale.y,g=f.trim,_=f.orig;g?(l=g.x-d.anchor.x*_.width,a=l+g.width,c=g.y-d.anchor.y*_.height,h=c+g.height):(a=_.width*(1-d.anchor.x),l=_.width*-d.anchor.x,h=_.height*(1-d.anchor.y),c=_.height*-d.anchor.y),n[o]=l*p,n[o+1]=c*m,n[o+r]=a*p,n[o+r+1]=c*m,n[o+r*2]=a*p,n[o+r*2+1]=h*m,n[o+r*3]=l*p,n[o+r*3+1]=h*m,o+=r*4}}uploadPosition(t,i,s,n,r,o){for(let a=0;a<s;a++){const l=t[i+a].position;n[o]=l.x,n[o+1]=l.y,n[o+r]=l.x,n[o+r+1]=l.y,n[o+r*2]=l.x,n[o+r*2+1]=l.y,n[o+r*3]=l.x,n[o+r*3+1]=l.y,o+=r*4}}uploadRotation(t,i,s,n,r,o){for(let a=0;a<s;a++){const l=t[i+a].rotation;n[o]=l,n[o+r]=l,n[o+r*2]=l,n[o+r*3]=l,o+=r*4}}uploadUvs(t,i,s,n,r,o){for(let a=0;a<s;++a){const l=t[i+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+r]=l.x1,n[o+r+1]=l.y1,n[o+r*2]=l.x2,n[o+r*2+1]=l.y2,n[o+r*3]=l.x3,n[o+r*3+1]=l.y3,o+=r*4):(n[o]=0,n[o+1]=0,n[o+r]=0,n[o+r+1]=0,n[o+r*2]=0,n[o+r*2+1]=0,n[o+r*3]=0,n[o+r*3+1]=0,o+=r*4)}}uploadTint(t,i,s,n,r,o){for(let a=0;a<s;++a){const l=t[i+a],h=Ot.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);n[o]=h,n[o+r]=h,n[o+r*2]=h,n[o+r*3]=h,o+=r*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}xb.extension={name:"particle",type:it.RendererPlugin};dt.add(xb);var rc=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(rc||{});const ol={willReadFrequently:!0},ct=class{static get experimentalLetterSpacingSupported(){let e=ct._experimentalLetterSpacingSupported;if(e!==void 0){const t=Q.ADAPTER.getCanvasRenderingContext2D().prototype;e=ct._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,s,n,r,o,a,l){this.text=e,this.style=t,this.width=i,this.height=s,this.lines=n,this.lineWidths=r,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(e,t,i,s=ct._canvas){i=i??t.wordWrap;const n=t.toFontString(),r=ct.measureFont(n);r.fontSize===0&&(r.fontSize=t.fontSize,r.ascent=t.fontSize);const o=s.getContext("2d",ol);o.font=n;const l=(i?ct.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),h=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const m=ct._measureText(l[p],t.letterSpacing,o);h[p]=m,c=Math.max(c,m)}let u=c+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance);const d=t.lineHeight||r.fontSize+t.strokeThickness;let f=Math.max(d,r.fontSize+t.strokeThickness*2)+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new ct(e,t,u,f,l,h,d+t.leading,c,r)}static _measureText(e,t,i){let s=!1;ct.experimentalLetterSpacingSupported&&(ct.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(e).width;return n>0&&(s?n-=t:n+=(ct.graphemeSegmenter(e).length-1)*t),n}static wordWrap(e,t,i=ct._canvas){const s=i.getContext("2d",ol);let n=0,r="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:h}=t,c=ct.collapseSpaces(h),u=ct.collapseNewlines(h);let d=!c;const f=t.wordWrapWidth+l,p=ct.tokenize(e);for(let m=0;m<p.length;m++){let g=p[m];if(ct.isNewline(g)){if(!u){o+=ct.addLine(r),d=!c,r="",n=0;continue}g=" "}if(c){const y=ct.isBreakingSpace(g),b=ct.isBreakingSpace(r[r.length-1]);if(y&&b)continue}const _=ct.getFromCache(g,l,a,s);if(_>f)if(r!==""&&(o+=ct.addLine(r),r="",n=0),ct.canBreakWords(g,t.breakWords)){const y=ct.wordWrapSplit(g);for(let b=0;b<y.length;b++){let v=y[b],x=v,T=1;for(;y[b+T];){const A=y[b+T];if(!ct.canBreakChars(x,A,g,b,t.breakWords))v+=A;else break;x=A,T++}b+=T-1;const S=ct.getFromCache(v,l,a,s);S+n>f&&(o+=ct.addLine(r),d=!1,r="",n=0),r+=v,n+=S}}else{r.length>0&&(o+=ct.addLine(r),r="",n=0);const y=m===p.length-1;o+=ct.addLine(g,!y),d=!1,r="",n=0}else _+n>f&&(d=!1,o+=ct.addLine(r),r="",n=0),(r.length>0||!ct.isBreakingSpace(g)||d)&&(r+=g,n+=_)}return o+=ct.addLine(r,!1),o}static addLine(e,t=!0){return e=ct.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,i,s){let n=i[e];return typeof n!="number"&&(n=ct._measureText(e,t,s)+t,i[e]=n),n}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!ct.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ct._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ct._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){const n=e[s],r=e[s+1];if(ct.isBreakingSpace(n,r)||ct.isNewline(n)){i!==""&&(t.push(i),i=""),t.push(n);continue}i+=n}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,s,n){return!0}static wordWrapSplit(e){return ct.graphemeSegmenter(e)}static measureFont(e){if(ct._fonts[e])return ct._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=ct._canvas,s=ct._context;s.font=e;const n=ct.METRICS_STRING+ct.BASELINE_SYMBOL,r=Math.ceil(s.measureText(n).width);let o=Math.ceil(s.measureText(ct.BASELINE_SYMBOL).width);const a=Math.ceil(ct.HEIGHT_MULTIPLIER*o);if(o=o*ct.BASELINE_MULTIPLIER|0,r===0||a===0)return ct._fonts[e]=t,t;i.width=r,i.height=a,s.fillStyle="#f00",s.fillRect(0,0,r,a),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(n,0,o);const l=s.getImageData(0,0,r,a).data,h=l.length,c=r*4;let u=0,d=0,f=!1;for(u=0;u<o;++u){for(let p=0;p<c;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d+=c;else break}for(t.ascent=o-u,d=h-c,f=!1,u=a;u>o;--u){for(let p=0;p<c;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d-=c;else break}return t.descent=u-o,t.fontSize=t.ascent+t.descent,ct._fonts[e]=t,t}static clearMetrics(e=""){e?delete ct._fonts[e]:ct._fonts={}}static get _canvas(){if(!ct.__canvas){let e;try{const t=new OffscreenCanvas(0,0),i=t.getContext("2d",ol);if(i!=null&&i.measureText)return ct.__canvas=t,t;e=Q.ADAPTER.createCanvas()}catch{e=Q.ADAPTER.createCanvas()}e.width=e.height=10,ct.__canvas=e}return ct.__canvas}static get _context(){return ct.__context||(ct.__context=ct._canvas.getContext("2d",ol)),ct.__context}};let xe=ct;xe.METRICS_STRING="|ÉqÅ";xe.BASELINE_SYMBOL="M";xe.BASELINE_MULTIPLIER=1.4;xe.HEIGHT_MULTIPLIER=2;xe.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(i=>i.segment)}return e=>[...e]})();xe.experimentalLetterSpacing=!1;xe._fonts={};xe._newlines=[10,13];xe._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const mM=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Po=class{constructor(e){this.styleID=0,this.reset(),hu(this,e,e)}clone(){const e={};return hu(e,this,Po.defaultStyle),new Po(e)}reset(){hu(this,Po.defaultStyle,Po.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=lu(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=lu(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){gM(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=lu(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let s=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!mM.includes(s)&&(s=`"${s}"`),t[i]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let ks=Po;ks.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:rc.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function lu(e){const t=Ot.shared;return Array.isArray(e)?e.map(i=>t.setValue(i).toHex()):t.setValue(e).toHex()}function gM(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}function hu(e,t,i){for(const s in i)Array.isArray(t[s])?e[s]=t[s].slice():e[s]=t[s]}const _M={texture:!0,children:!1,baseTexture:!0},Td=class extends co{constructor(e,t,i){let s=!1;i||(i=Q.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;const n=ut.from(i);n.orig=new xt,n.trim=new xt,super(n),this._ownCanvas=s,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Td.defaultResolution??Q.RESOLUTION,this._autoResolution=Td.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return xe.experimentalLetterSpacing}static set experimentalLetterSpacing(e){wt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),xe.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,s=xe.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,r=s.height,o=s.lines,a=s.lineHeight,l=s.lineWidths,h=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,r)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let u,d;const f=t.dropShadow?2:1;for(let p=0;p<f;++p){const m=t.dropShadow&&p===0,g=m?Math.ceil(Math.max(1,r)+t.padding*2):0,_=g*this._resolution;if(m){i.fillStyle="black",i.strokeStyle="black";const b=t.dropShadowColor,v=t.dropShadowBlur*this._resolution,x=t.dropShadowDistance*this._resolution;i.shadowColor=Ot.shared.setValue(b).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=v,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*x,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*x+_}else i.fillStyle=this._generateFillStyle(t,o,s),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let y=(a-c.fontSize)/2;a-c.fontSize<0&&(y=0);for(let b=0;b<o.length;b++)u=t.strokeThickness/2,d=t.strokeThickness/2+b*a+c.ascent+y,t.align==="right"?u+=h-l[b]:t.align==="center"&&(u+=(h-l[b])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[b],u+t.padding,d+t.padding-g,!0),t.fill&&this.drawLetterSpacing(o[b],u+t.padding,d+t.padding-g)}this.updateTexture()}drawLetterSpacing(e,t,i,s=!1){const r=this._style.letterSpacing;let o=!1;if(xe.experimentalLetterSpacingSupported&&(xe.experimentalLetterSpacing?(this.context.letterSpacing=`${r}px`,this.context.textLetterSpacing=`${r}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),r===0||o){s?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let a=t;const l=xe.graphemeSegmenter(e);let h=this.context.measureText(e).width,c=0;for(let u=0;u<l.length;++u){const d=l[u];s?this.context.strokeText(d,a,i):this.context.fillText(d,a,i);let f="";for(let p=u+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,a+=h-c+r,h=c}}updateTexture(){const e=this.canvas;if(this._style.trim){const r=qT(e);r.data&&(e.width=r.width,e.height=r.height,this.context.putImageData(r.data,0,0))}const t=this._texture,i=this._style,s=i.trim?0:i.padding,n=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const r=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,a=this.canvas.width/this._resolution-r-o*2,l=this.canvas.height/this._resolution-r-o*2,h=s.slice(),c=e.fillGradientStops.slice();if(!c.length){const u=h.length+1;for(let d=1;d<u;++d)c.push(d/u)}if(h.unshift(s[0]),c.unshift(0),h.push(s[s.length-1]),c.push(1),e.fillGradientType===rc.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,o,a/2,l+o);const u=i.fontProperties.fontSize+e.strokeThickness;for(let d=0;d<t.length;d++){const f=i.lineHeight*(d-1)+u,p=i.lineHeight*d;let m=p;d>0&&f>p&&(m=(p+f)/2);const g=p+u,_=i.lineHeight*(d+1);let y=g;d+1<t.length&&_<g&&(y=(g+_)/2);const b=(y-m)/l;for(let v=0;v<h.length;v++){let x=0;typeof c[v]=="number"?x=c[v]:x=v/h.length;let T=Math.min(1,Math.max(0,m/l+x*b));T=Number(T.toFixed(5)),n.addColorStop(T,h[v])}}}else{n=this.context.createLinearGradient(o,l/2,a+o,l/2);const u=h.length+1;let d=1;for(let f=0;f<h.length;f++){let p;typeof c[f]=="number"?p=c[f]:p=d/u,n.addColorStop(p,h[f]),d++}}return n}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},_M,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=js(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=js(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof ks?this._style=e:this._style=new ks(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Rf=Td;Rf.defaultAutoResolution=!0;class yM{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function bM(e,t){var s;let i=!1;if((s=e==null?void 0:e._textures)!=null&&s.length){for(let n=0;n<e._textures.length;n++)if(e._textures[n]instanceof ut){const r=e._textures[n].baseTexture;t.includes(r)||(t.push(r),i=!0)}}return i}function xM(e,t){if(e.baseTexture instanceof _t){const i=e.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function vM(e,t){if(e._texture&&e._texture instanceof ut){const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function wM(e,t){return t instanceof Rf?(t.updateText(!0),!0):!1}function SM(e,t){if(t instanceof ks){const i=t.toFontString();return xe.measureFont(i),!0}return!1}function EM(e,t){if(e instanceof Rf){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function TM(e,t){return e instanceof ks?(t.includes(e)||t.push(e),!0):!1}const vb=class{constructor(e){this.limiter=new yM(vb.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(EM),this.registerFindHook(TM),this.registerFindHook(bM),this.registerFindHook(xM),this.registerFindHook(vM),this.registerUploadHook(wM),this.registerUploadHook(SM)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Te.system.addOnce(this.tick,this,$n.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Te.system.addOnce(this.tick,this,$n.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof yi)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Te.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let yh=vb;yh.uploadsPerFrame=4;Object.defineProperties(Q,{UPLOADS_PER_FRAME:{get(){return yh.uploadsPerFrame},set(e){wt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),yh.uploadsPerFrame=e}}});function wb(e,t){return t instanceof _t?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function AM(e,t){if(!(t instanceof Pa))return!1;const{geometry:i}=t;t.finishPoly(),i.updateBatches();const{batches:s}=i;for(let n=0;n<s.length;n++){const{texture:r}=s[n].style;r&&wb(e,r.baseTexture)}return i.batchable||e.geometry.bind(i,t._resolveDirectShader(e)),!0}function CM(e,t){return e instanceof Pa?(t.push(e),!0):!1}class Sb extends yh{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(CM),this.registerUploadHook(wb),this.registerUploadHook(AM)}}Sb.extension={name:"prepare",type:it.RendererSystem};dt.add(Sb);var MM=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,IM=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,PM=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Jm=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,RM=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const al=new Ht;class Eb extends qh{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Uy,this.state=Us.for2d()}contextChange(){const t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=ss.from(Jm,RM,i),this.shader=t.context.webGLVersion>1?ss.from(IM,MM,i):ss.from(Jm,PM,i)}render(t){const i=this.renderer,s=this.quad;let n=s.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const r=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;n=s.uvs,n[0]=n[6]=-r,n[1]=n[3]=-o,n[2]=n[4]=1-r,n[5]=n[7]=1-o,s.invalidate();const a=t._texture,l=a.baseTexture,h=l.alphaMode>0,c=t.tileTransform.localTransform,u=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[i.CONTEXT_UID]?d=l.wrapMode!==tn.CLAMP:l.wrapMode===tn.CLAMP&&(l.wrapMode=tn.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,m=a.height,g=t._width,_=t._height;al.set(c.a*p/g,c.b*p/_,c.c*m/g,c.d*m/_,c.tx/g,c.ty/_),al.invert(),d?al.prepend(u.mapCoord):(f.uniforms.uMapCoord=u.mapCoord.toArray(!0),f.uniforms.uClampFrame=u.uClampFrame,f.uniforms.uClampOffset=u.uClampOffset),f.uniforms.uTransform=al.toArray(!0),f.uniforms.uColor=Ot.shared.setValue(t.tint).premultiply(t.worldAlpha,h).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,i.shader.bind(f),i.geometry.bind(s),this.state.blendMode=wy(t.blendMode,h),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Eb.extension={name:"tilingSprite",type:it.RendererPlugin};dt.add(Eb);const Ro=class{constructor(e,t,i=null){this.linkedSheets=[],this._texture=e instanceof ut?e:null,this.baseTexture=e instanceof _t?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const s=this.baseTexture.resource;this.resolution=this._updateResolution(i||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=ln(e,null);return i===null&&(i=parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Ro.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=Ro.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const s=this._frameKeys[t],n=this._frames[s],r=n.frame;if(r){let o=null,a=null;const l=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,h=new xt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);n.rotated?o=new xt(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):o=new xt(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(a=new xt(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[s]=new ut(this.baseTexture,o,h,a,n.rotated?2:0,n.anchor,n.borders),ut.addToCache(this.textures[s],s)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const s=e[t][i];this.animations[t].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ro.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ro.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Ad=Ro;Ad.BATCH_SIZE=1e3;const DM=["jpg","png","jpeg","avif","webp"];function Tb(e,t,i){const s={};if(e.forEach(n=>{s[n]=t}),Object.keys(t.textures).forEach(n=>{s[n]=t.textures[n]}),!i){const n=Me.dirname(e[0]);t.linkedSheets.forEach((r,o)=>{const a=Tb([`${n}/${t.data.meta.related_multi_packs[o]}`],r,!0);Object.assign(s,a)})}return s}const OM={extension:it.Asset,cache:{test:e=>e instanceof Ad,getCacheableAssets:(e,t)=>Tb(e,t,!1)},resolver:{test:e=>{const i=e.split("?")[0].split("."),s=i.pop(),n=i.pop();return s==="json"&&DM.includes(n)},parse:e=>{var i;const t=e.split(".");return{resolution:parseFloat(((i=Q.RETINA_PREFIX.exec(e))==null?void 0:i[1])??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:it.LoadParser,priority:us.Normal},async testParse(e,t){return Me.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,i){var h,c;let s=Me.dirname(t.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");let n=s+e.meta.image;n=wd(n,t.src);const o=(await i.load([n]))[n],a=new Ad(o.baseTexture,e,t.src);await a.parse();const l=(h=e==null?void 0:e.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(l)){const u=[];for(const f of l){if(typeof f!="string")continue;let p=s+f;(c=t.data)!=null&&c.ignoreMultiPack||(p=wd(p,t.src),u.push(i.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(u);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(e){e.destroy(!0)}}};dt.add(OM);class bh{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Ul{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const i=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const r in i){const o=i[r].match(/^[a-z]+/gm)[0],a=i[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const h in a){const c=a[h].split("="),u=c[0],d=c[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[u]=p}s[o].push(l)}const n=new bh;return s.info.forEach(r=>n.info.push({face:r.face,size:parseInt(r.size,10)})),s.common.forEach(r=>n.common.push({lineHeight:parseInt(r.lineHeight,10)})),s.page.forEach(r=>n.page.push({id:parseInt(r.id,10),file:r.file})),s.char.forEach(r=>n.char.push({id:parseInt(r.id,10),page:parseInt(r.page,10),x:parseInt(r.x,10),y:parseInt(r.y,10),width:parseInt(r.width,10),height:parseInt(r.height,10),xoffset:parseInt(r.xoffset,10),yoffset:parseInt(r.yoffset,10),xadvance:parseInt(r.xadvance,10)})),s.kerning.forEach(r=>n.kerning.push({first:parseInt(r.first,10),second:parseInt(r.second,10),amount:parseInt(r.amount,10)})),s.distanceField.forEach(r=>n.distanceField.push({distanceRange:parseInt(r.distanceRange,10),fieldType:r.fieldType})),n}}class Cd{static test(t){const i=t;return"getElementsByTagName"in i&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const i=new bh,s=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let h=0;h<s.length;h++)i.info.push({face:s[h].getAttribute("face"),size:parseInt(s[h].getAttribute("size"),10)});for(let h=0;h<n.length;h++)i.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(let h=0;h<r.length;h++)i.page.push({id:parseInt(r[h].getAttribute("id"),10)||0,file:r[h].getAttribute("file")});for(let h=0;h<o.length;h++){const c=o[h];i.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)i.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<l.length;h++)i.distanceField.push({fieldType:l[h].getAttribute("fieldType"),distanceRange:parseInt(l[h].getAttribute("distanceRange"),10)});return i}}class Md{static test(t){return typeof t=="string"&&t.includes("<font>")?Cd.test(Q.ADAPTER.parseXML(t)):!1}static parse(t){return Cd.parse(Q.ADAPTER.parseXML(t))}}const cu=[Ul,Cd,Md];function kM(e){for(let t=0;t<cu.length;t++)if(cu[t].test(e))return cu[t];return null}function FM(e,t,i,s,n,r){const o=i.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=i.dropShadow?i.dropShadowDistance:0,h=i.padding||0,c=e.width/s-l-h*2,u=e.height/s-l-h*2,d=o.slice(),f=i.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),i.fillGradientType===rc.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,h,c/2,u+h);let p=0;const g=(r.fontProperties.fontSize+i.strokeThickness)/u;for(let _=0;_<n.length;_++){const y=r.lineHeight*_;for(let b=0;b<d.length;b++){let v=0;typeof f[b]=="number"?v=f[b]:v=b/d.length;const x=y/u+v*g;let T=Math.max(p,x);T=Math.min(T,1),a.addColorStop(T,d[b]),p=T}}}else{a=t.createLinearGradient(h,u/2,c+h,u/2);const p=d.length+1;let m=1;for(let g=0;g<d.length;g++){let _;typeof f[g]=="number"?_=f[g]:_=m/p,a.addColorStop(_,d[g]),m++}}return a}function LM(e,t,i,s,n,r,o){const a=i.text,l=i.fontProperties;t.translate(s,n),t.scale(r,r);const h=o.strokeThickness/2,c=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=FM(e,t,o,r,[a],i),t.strokeStyle=o.stroke,o.dropShadow){const u=o.dropShadowColor,d=o.dropShadowBlur*r,f=o.dropShadowDistance*r;t.shadowColor=Ot.shared.setValue(u).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=d,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,h,c+i.lineHeight-l.descent),o.fill&&t.fillText(a,h,c+i.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Gl(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function Ab(e){return Array.from?Array.from(e):e.split("")}function BM(e){typeof e=="string"&&(e=[e]);const t=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const r=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<r)throw new Error("[BitmapFont]: Invalid character range.");for(let a=r,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...Ab(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Ci=class{constructor(e,t,i){var h;const[s]=e.info,[n]=e.common,[r]=e.page,[o]=e.distanceField,a=ln(r.file),l={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<e.page.length;c++){const{id:u,file:d}=e.page[c];l[u]=t instanceof Array?t[c]:t[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[u].baseTexture.alphaMode=Vi.NO_PREMULTIPLIED_ALPHA,l[u].baseTexture.mipmap=ls.OFF)}for(let c=0;c<e.char.length;c++){const{id:u,page:d}=e.char[c];let{x:f,y:p,width:m,height:g,xoffset:_,yoffset:y,xadvance:b}=e.char[c];f/=a,p/=a,m/=a,g/=a,_/=a,y/=a,b/=a;const v=new xt(f+l[d].frame.x/a,p+l[d].frame.y/a,m,g);this.chars[u]={xOffset:_,yOffset:y,xAdvance:b,kerning:{},texture:new ut(l[d].baseTexture,v),page:d}}for(let c=0;c<e.kerning.length;c++){let{first:u,second:d,amount:f}=e.kerning[c];u/=a,d/=a,f/=a,this.chars[d]&&(this.chars[d].kerning[u]=f)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((h=o==null?void 0:o.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let s;if(e instanceof bh)s=e;else{const r=kM(e);if(!r)throw new Error("Unrecognized data format for font.");s=r.parse(e)}t instanceof ut&&(t=[t]);const n=new Ci(s,t,i);return Ci.available[n.font]=n,n}static uninstall(e){const t=Ci.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Ci.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:r,textureWidth:o,textureHeight:a,...l}=Object.assign({},Ci.defaultOptions,i),h=BM(s),c=t instanceof ks?t:new ks(t),u=o,d=new bh;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};let f=0,p=0,m,g,_,y=0;const b=[];for(let x=0;x<h.length;x++){m||(m=Q.ADAPTER.createCanvas(),m.width=o,m.height=a,g=m.getContext("2d"),_=new _t(m,{resolution:r,...l}),b.push(new ut(_)),d.page.push({id:b.length-1,file:""}));const T=h[x],S=xe.measureText(T,c,!1,m),A=S.width,M=Math.ceil(S.height),O=Math.ceil((c.fontStyle==="italic"?2:1)*A);if(p>=a-M*r){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${T}')`);--x,m=null,g=null,_=null,p=0,f=0,y=0;continue}if(y=Math.max(M+S.fontProperties.descent,y),O*r+f>=u){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${T}')`);--x,p+=y*r,p=Math.ceil(p),f=0,y=0;continue}LM(m,g,S,f,p,r,c);const C=Gl(S.text);d.char.push({id:C,page:b.length-1,x:f/r,y:p/r,width:O,height:M,xoffset:0,yoffset:0,xadvance:A-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),f+=(O+2*n)*r,f=Math.ceil(f)}for(let x=0,T=h.length;x<T;x++){const S=h[x];for(let A=0;A<T;A++){const M=h[A],O=g.measureText(S).width,C=g.measureText(M).width,P=g.measureText(S+M).width-(O+C);P&&d.kerning.push({first:Gl(S),second:Gl(M),amount:P})}}const v=new Ci(d,b,!0);return Ci.available[e]!==void 0&&Ci.uninstall(e),Ci.available[e]=v,v}};let Be=Ci;Be.ALPHA=[["a","z"],["A","Z"]," "];Be.NUMERIC=[["0","9"]];Be.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];Be.ASCII=[[" ","~"]];Be.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Ci.ALPHANUMERIC};Be.available={};var NM=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,UM=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Qm=[],tg=[],eg=[],Cb=class extends yi{constructor(e,t={}){super();const{align:i,tint:s,maxWidth:n,letterSpacing:r,fontName:o,fontSize:a}=Object.assign({},Cb.styleDefaults,t);if(!Be.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Ot(s),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=e,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=r,this._anchor=new Xs(()=>{this.dirty=!0},this,0,0),this._roundPixels=Q.ROUND_PIXELS,this.dirty=!0,this._resolution=Q.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var O;const e=Be.available[this._fontName],t=this.fontSize,i=t/e.size,s=new Mt,n=[],r=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Ab(a),h=this._maxWidth*e.size/t,c=e.distanceFieldType==="none"?Qm:tg;let u=null,d=0,f=0,p=0,m=-1,g=0,_=0,y=0,b=0;for(let C=0;C<l.length;C++){const k=l[C],P=Gl(k);if(/(?:\s)/.test(k)&&(m=C,g=d,b++),k==="\r"||k===`
`){r.push(d),o.push(-1),f=Math.max(f,d),++p,++_,s.x=0,s.y+=e.lineHeight,u=null,b=0;continue}const w=e.chars[P];if(!w)continue;u&&w.kerning[u]&&(s.x+=w.kerning[u]);const E=eg.pop()||{texture:ut.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Mt};E.texture=w.texture,E.line=p,E.charCode=P,E.position.x=Math.round(s.x+w.xOffset+this._letterSpacing/2),E.position.y=Math.round(s.y+w.yOffset),E.prevSpaces=b,n.push(E),d=E.position.x+Math.max(w.xAdvance-w.xOffset,w.texture.orig.width),s.x+=w.xAdvance+this._letterSpacing,y=Math.max(y,w.yOffset+w.texture.height),u=P,m!==-1&&h>0&&s.x>h&&(++_,Fr(n,1+m-_,1+C-m),C=m,m=-1,r.push(g),o.push(n.length>0?n[n.length-1].prevSpaces:0),f=Math.max(f,g),p++,s.x=0,s.y+=e.lineHeight,u=null,b=0)}const v=l[l.length-1];v!=="\r"&&v!==`
`&&(/(?:\s)/.test(v)&&(d=g),r.push(d),f=Math.max(f,d),o.push(-1));const x=[];for(let C=0;C<=p;C++){let k=0;this._align==="right"?k=f-r[C]:this._align==="center"?k=(f-r[C])/2:this._align==="justify"&&(k=o[C]<0?0:(f-r[C])/o[C]),x.push(k)}const T=n.length,S={},A=[],M=this._activePagesMeshData;c.push(...M);for(let C=0;C<T;C++){const k=n[C].texture,P=k.baseTexture.uid;if(!S[P]){let w=c.pop();if(!w){const L=new cM;let I,N;e.distanceFieldType==="none"?(I=new Km(ut.EMPTY),N=mt.NORMAL):(I=new Km(ut.EMPTY,{program:Oi.from(UM,NM),uniforms:{uFWidth:0}}),N=mt.NORMAL_NPM);const F=new Ed(L,I);F.blendMode=N,w={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:F,vertices:null,uvs:null,indices:null}}w.index=0,w.indexCount=0,w.vertexCount=0,w.uvsCount=0,w.total=0;const{_textureCache:E}=this;E[P]=E[P]||new ut(k.baseTexture),w.mesh.texture=E[P],w.mesh.tint=this._tintColor.value,A.push(w),S[P]=w}S[P].total++}for(let C=0;C<M.length;C++)A.includes(M[C])||this.removeChild(M[C].mesh);for(let C=0;C<A.length;C++)A[C].mesh.parent!==this&&this.addChild(A[C].mesh);this._activePagesMeshData=A;for(const C in S){const k=S[C],P=k.total;if(!(((O=k.indices)==null?void 0:O.length)>6*P)||k.vertices.length<Ed.BATCHABLE_SIZE*2)k.vertices=new Float32Array(4*2*P),k.uvs=new Float32Array(4*2*P),k.indices=new Uint16Array(6*P);else{const w=k.total,E=k.vertices;for(let L=w*4*2;L<E.length;L++)E[L]=0}k.mesh.size=6*P}for(let C=0;C<T;C++){const k=n[C];let P=k.position.x+x[k.line]*(this._align==="justify"?k.prevSpaces:1);this._roundPixels&&(P=Math.round(P));const w=P*i,E=k.position.y*i,L=k.texture,I=S[L.baseTexture.uid],N=L.frame,F=L._uvs,D=I.index++;I.indices[D*6+0]=0+D*4,I.indices[D*6+1]=1+D*4,I.indices[D*6+2]=2+D*4,I.indices[D*6+3]=0+D*4,I.indices[D*6+4]=2+D*4,I.indices[D*6+5]=3+D*4,I.vertices[D*8+0]=w,I.vertices[D*8+1]=E,I.vertices[D*8+2]=w+N.width*i,I.vertices[D*8+3]=E,I.vertices[D*8+4]=w+N.width*i,I.vertices[D*8+5]=E+N.height*i,I.vertices[D*8+6]=w,I.vertices[D*8+7]=E+N.height*i,I.uvs[D*8+0]=F.x0,I.uvs[D*8+1]=F.y0,I.uvs[D*8+2]=F.x1,I.uvs[D*8+3]=F.y1,I.uvs[D*8+4]=F.x2,I.uvs[D*8+5]=F.y2,I.uvs[D*8+6]=F.x3,I.uvs[D*8+7]=F.y3}this._textWidth=f*i,this._textHeight=(s.y+e.lineHeight)*i;for(const C in S){const k=S[C];if(this.anchor.x!==0||this.anchor.y!==0){let L=0;const I=this._textWidth*this.anchor.x,N=this._textHeight*this.anchor.y;for(let F=0;F<k.total;F++)k.vertices[L++]-=I,k.vertices[L++]-=N,k.vertices[L++]-=I,k.vertices[L++]-=N,k.vertices[L++]-=I,k.vertices[L++]-=N,k.vertices[L++]-=I,k.vertices[L++]-=N}this._maxLineHeight=y*i;const P=k.mesh.geometry.getBuffer("aVertexPosition"),w=k.mesh.geometry.getBuffer("aTextureCoord"),E=k.mesh.geometry.getIndex();P.data=k.vertices,w.data=k.uvs,E.data=k.indices,P.update(),w.update(),E.update()}for(let C=0;C<n.length;C++)eg.push(n[C]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:s}=Be.available[this._fontName];if(i!=="none"){const{a:n,b:r,c:o,d:a}=this.worldTransform,l=Math.sqrt(n*n+r*r),h=Math.sqrt(o*o+a*a),c=(Math.abs(l)+Math.abs(h))/2,u=this.fontSize/s,d=e._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=c*t*u*d}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Be.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Be.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Be.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,s=Be.available[this._fontName].distanceFieldType==="none"?Qm:tg;s.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],s.filter(n=>t[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=ut.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let GM=Cb;GM.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const HM=[".xml",".fnt"],zM={extension:{type:it.LoadParser,priority:us.Normal},name:"loadBitmapFont",test(e){return HM.includes(Me.extname(e).toLowerCase())},async testParse(e){return Ul.test(e)||Md.test(e)},async parse(e,t,i){const s=Ul.test(e)?Ul.parse(e):Md.parse(e),{src:n}=t,{page:r}=s,o=[];for(let h=0;h<r.length;++h){const c=r[h].file;let u=Me.join(Me.dirname(n),c);u=wd(u,n),o.push(u)}const a=await i.load(o),l=o.map(h=>a[h]);return Be.install(s,l,!0)},async load(e,t){return(await Q.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};dt.add(zM);const wr=class extends ks{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new wr(Object.keys(wr.defaultOptions).reduce((t,i)=>({...t,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete wr.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:i}=wr;if(i[e]){const s=i[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Q.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((n,r)=>{const o=URL.createObjectURL(s),a=new FileReader;a.onload=()=>n([o,a.result]),a.onerror=r,a.readAsDataURL(s)})).then(async([s,n])=>{const r=Object.assign({family:Me.basename(e,Me.extname(e)),weight:"normal",style:"normal",src:s,dataSrc:n,refs:1,originalUrl:e,fontFace:null},t);i[e]=r,this._fonts.push(r),this.styleID++;const o=new FontFace(r.family,`url(${r.src})`,{weight:r.weight,style:r.style});r.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(i=>!this._overrides.includes(i));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(i=>this._overrides.includes(i));t.length>0&&(this._overrides=this._overrides.filter(i=>!t.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=jT(e)),typeof e=="number"?WT(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${n} ${e}`}reset(){Object.assign(this,wr.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=Q.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let Ho=wr;Ho.availableFonts={};Ho.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const Sr=class extends co{constructor(e="",t={}){super(ut.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const i=new Image,s=ut.from(i,{scaleMode:Q.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new xt,s.trim=new xt,this.texture=s;const n="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xhtml",o=document.createElementNS(n,"svg"),a=document.createElementNS(n,"foreignObject"),l=document.createElementNS(r,"div"),h=document.createElementNS(r,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=Sr.defaultMaxWidth,this.maxHeight=Sr.defaultMaxHeight,this._domElement=l,this._styleElement=h,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(h),this._foreignObject.appendChild(l),this._image=i,this._loadImage=new Image,this._autoResolution=Sr.defaultAutoResolution,this._resolution=Sr.defaultResolution??Q.RESOLUTION,this.text=e,this.style=t}measureText(e){var a,l;const{text:t,style:i,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:i.toCSS(s)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const r=Math.min(this.maxWidth,Math.ceil(n.width)),o=Math.min(this.maxHeight,Math.ceil(n.height));return this._svgRoot.setAttribute("width",r.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(a=this._style)==null?void 0:a.toCSS(s)}),this._styleElement.textContent=(l=this._style)==null?void 0:l.toGlobalCSS()),{width:r+i.padding*2,height:o+i.padding*2}}async updateText(e=!0){const{style:t,_image:i,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:n,height:r}=this.measureText();i.width=s.width=Math.ceil(Math.max(1,n)),i.height=s.height=Math.ceil(Math.max(1,r)),this._loading||(this._loading=!0,await new Promise(o=>{s.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,i.src=s.src,s.onload=null,s.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:i,resolution:s}=this,{padding:n}=e,{baseTexture:r}=t;t.trim.width=t._frame.width=i.width/s,t.trim.height=t._frame.height=i.height/s,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),r.setRealSize(i.width,i.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var i,s,n,r,o;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Sr.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=t,(s=this._svgRoot)==null||s.remove(),this._svgRoot=t,(n=this._domElement)==null||n.remove(),this._domElement=t,(r=this._foreignObject)==null||r.remove(),this._foreignObject=t,(o=this._styleElement)==null||o.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=js(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=js(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Ho?(this.ownsStyle=!1,this._style=e):e instanceof ks?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Ho.from(e)):(this.ownsStyle=!0,this._style=new Ho(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let oc=Sr;oc.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};oc.defaultMaxWidth=2024;oc.defaultMaxHeight=2024;oc.defaultAutoResolution=!0;function Ss(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mb(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ni={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Kr={duration:.5,overwrite:!1,delay:0},Df,Ie,le,pi=1e8,Ft=1/pi,Id=Math.PI*2,VM=Id/4,WM=0,Ib=Math.sqrt,jM=Math.cos,XM=Math.sin,ye=function(t){return typeof t=="string"},te=function(t){return typeof t=="function"},Fs=function(t){return typeof t=="number"},Of=function(t){return typeof t>"u"},hs=function(t){return typeof t=="object"},Ge=function(t){return t!==!1},kf=function(){return typeof window<"u"},ll=function(t){return te(t)||ye(t)},Pb=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Pe=Array.isArray,Pd=/(?:-?\.?\d|\.)+/gi,Rb=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Cr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,uu=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Db=/[+-]=-?[.\d]+/,Ob=/[^,'"\[\]\s]+/gi,YM=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Xt,ci,Rd,Ff,ri={},xh={},kb,Fb=function(t){return(xh=Zn(t,ri))&&Ye},Lf=function(t,i){return console.warn("Invalid property",t,"set to",i,"Missing plugin? gsap.registerPlugin()")},vh=function(t,i){return!i&&console.warn(t)},Lb=function(t,i){return t&&(ri[t]=i)&&xh&&(xh[t]=i)||ri},ha=function(){return 0},$M={suppressEvents:!0,isStart:!0,kill:!1},Hl={suppressEvents:!0,kill:!1},ZM={suppressEvents:!0},Bf={},en=[],Dd={},Bb,Qe={},du={},ig=30,zl=[],Nf="",Uf=function(t){var i=t[0],s,n;if(hs(i)||te(i)||(t=[t]),!(s=(i._gsap||{}).harness)){for(n=zl.length;n--&&!zl[n].targetTest(i););s=zl[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new a1(t[n],s)))||t.splice(n,1);return t},Un=function(t){return t._gsap||Uf(mi(t))[0]._gsap},Nb=function(t,i,s){return(s=t[i])&&te(s)?t[i]():Of(s)&&t.getAttribute&&t.getAttribute(i)||s},He=function(t,i){return(t=t.split(",")).forEach(i)||t},re=function(t){return Math.round(t*1e5)/1e5||0},ve=function(t){return Math.round(t*1e7)/1e7||0},Nr=function(t,i){var s=i.charAt(0),n=parseFloat(i.substr(2));return t=parseFloat(t),s==="+"?t+n:s==="-"?t-n:s==="*"?t*n:t/n},KM=function(t,i){for(var s=i.length,n=0;t.indexOf(i[n])<0&&++n<s;);return n<s},wh=function(){var t=en.length,i=en.slice(0),s,n;for(Dd={},en.length=0,s=0;s<t;s++)n=i[s],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Ub=function(t,i,s,n){en.length&&!Ie&&wh(),t.render(i,s,n||Ie&&i<0&&(t._initted||t._startAt)),en.length&&!Ie&&wh()},Gb=function(t){var i=parseFloat(t);return(i||i===0)&&(t+"").match(Ob).length<2?i:ye(t)?t.trim():t},Hb=function(t){return t},bi=function(t,i){for(var s in i)s in t||(t[s]=i[s]);return t},qM=function(t){return function(i,s){for(var n in s)n in i||n==="duration"&&t||n==="ease"||(i[n]=s[n])}},Zn=function(t,i){for(var s in i)t[s]=i[s];return t},sg=function e(t,i){for(var s in i)s!=="__proto__"&&s!=="constructor"&&s!=="prototype"&&(t[s]=hs(i[s])?e(t[s]||(t[s]={}),i[s]):i[s]);return t},Sh=function(t,i){var s={},n;for(n in t)n in i||(s[n]=t[n]);return s},zo=function(t){var i=t.parent||Xt,s=t.keyframes?qM(Pe(t.keyframes)):bi;if(Ge(t.inherit))for(;i;)s(t,i.vars.defaults),i=i.parent||i._dp;return t},JM=function(t,i){for(var s=t.length,n=s===i.length;n&&s--&&t[s]===i[s];);return s<0},zb=function(t,i,s,n,r){s===void 0&&(s="_first"),n===void 0&&(n="_last");var o=t[n],a;if(r)for(a=i[r];o&&o[r]>a;)o=o._prev;return o?(i._next=o._next,o._next=i):(i._next=t[s],t[s]=i),i._next?i._next._prev=i:t[n]=i,i._prev=o,i.parent=i._dp=t,i},ac=function(t,i,s,n){s===void 0&&(s="_first"),n===void 0&&(n="_last");var r=i._prev,o=i._next;r?r._next=o:t[s]===i&&(t[s]=o),o?o._prev=r:t[n]===i&&(t[n]=r),i._next=i._prev=i.parent=null},un=function(t,i){t.parent&&(!i||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Gn=function(t,i){if(t&&(!i||i._end>t._dur||i._start<0))for(var s=t;s;)s._dirty=1,s=s.parent;return t},QM=function(t){for(var i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},Od=function(t,i,s,n){return t._startAt&&(Ie?t._startAt.revert(Hl):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(i,!0,n))},tI=function e(t){return!t||t._ts&&e(t.parent)},ng=function(t){return t._repeat?qr(t._tTime,t=t.duration()+t._rDelay)*t:0},qr=function(t,i){var s=Math.floor(t/=i);return t&&s===t?s-1:s},Eh=function(t,i){return(t-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},lc=function(t){return t._end=ve(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ft)||0))},hc=function(t,i){var s=t._dp;return s&&s.smoothChildTiming&&t._ts&&(t._start=ve(s._time-(t._ts>0?i/t._ts:((t._dirty?t.totalDuration():t._tDur)-i)/-t._ts)),lc(t),s._dirty||Gn(s,t)),t},Vb=function(t,i){var s;if((i._time||i._initted&&!i._dur)&&(s=Eh(t.rawTime(),i),(!i._dur||Ra(0,i.totalDuration(),s)-i._tTime>Ft)&&i.render(s,!0)),Gn(t,i)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(s=t;s._dp;)s.rawTime()>=0&&s.totalTime(s._tTime),s=s._dp;t._zTime=-Ft}},qi=function(t,i,s,n){return i.parent&&un(i),i._start=ve((Fs(s)?s:s||t!==Xt?hi(t,s,i):t._time)+i._delay),i._end=ve(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),zb(t,i,"_first","_last",t._sort?"_start":0),kd(i)||(t._recent=i),n||Vb(t,i),t._ts<0&&hc(t,t._tTime),t},Wb=function(t,i){return(ri.ScrollTrigger||Lf("scrollTrigger",i))&&ri.ScrollTrigger.create(i,t)},jb=function(t,i,s,n,r){if(Hf(t,i,r),!t._initted)return 1;if(!s&&t._pt&&!Ie&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Bb!==ei.frame)return en.push(t),t._lazy=[r,n],1},eI=function e(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||e(i))},kd=function(t){var i=t.data;return i==="isFromStart"||i==="isStart"},iI=function(t,i,s,n){var r=t.ratio,o=i<0||!i&&(!t._start&&eI(t)&&!(!t._initted&&kd(t))||(t._ts<0||t._dp._ts<0)&&!kd(t))?0:1,a=t._rDelay,l=0,h,c,u;if(a&&t._repeat&&(l=Ra(0,t._tDur,i),c=qr(l,a),t._yoyo&&c&1&&(o=1-o),c!==qr(t._tTime,a)&&(r=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==r||Ie||n||t._zTime===Ft||!i&&t._zTime){if(!t._initted&&jb(t,i,n,s,l))return;for(u=t._zTime,t._zTime=i||(s?Ft:0),s||(s=i&&!u),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,h=t._pt;h;)h.r(o,h.d),h=h._next;i<0&&Od(t,i,s,!0),t._onUpdate&&!s&&gi(t,"onUpdate"),l&&t._repeat&&!s&&t.parent&&gi(t,"onRepeat"),(i>=t._tDur||i<0)&&t.ratio===o&&(o&&un(t,1),!s&&!Ie&&(gi(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=i)},sI=function(t,i,s){var n;if(s>i)for(n=t._first;n&&n._start<=s;){if(n.data==="isPause"&&n._start>i)return n;n=n._next}else for(n=t._last;n&&n._start>=s;){if(n.data==="isPause"&&n._start<i)return n;n=n._prev}},Jr=function(t,i,s,n){var r=t._repeat,o=ve(i)||0,a=t._tTime/t._tDur;return a&&!n&&(t._time*=o/t._dur),t._dur=o,t._tDur=r?r<0?1e10:ve(o*(r+1)+t._rDelay*r):o,a>0&&!n&&hc(t,t._tTime=t._tDur*a),t.parent&&lc(t),s||Gn(t.parent,t),t},rg=function(t){return t instanceof Ne?Gn(t):Jr(t,t._dur)},nI={_start:0,endTime:ha,totalDuration:ha},hi=function e(t,i,s){var n=t.labels,r=t._recent||nI,o=t.duration()>=pi?r.endTime(!1):t._dur,a,l,h;return ye(i)&&(isNaN(i)||i in n)?(l=i.charAt(0),h=i.substr(-1)==="%",a=i.indexOf("="),l==="<"||l===">"?(a>=0&&(i=i.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(i.substr(1))||0)*(h?(a<0?r:s).totalDuration()/100:1)):a<0?(i in n||(n[i]=o),n[i]):(l=parseFloat(i.charAt(a-1)+i.substr(a+1)),h&&s&&(l=l/100*(Pe(s)?s[0]:s).totalDuration()),a>1?e(t,i.substr(0,a-1),s)+l:o+l)):i==null?o:+i},Vo=function(t,i,s){var n=Fs(i[1]),r=(n?2:1)+(t<2?0:1),o=i[r],a,l;if(n&&(o.duration=i[1]),o.parent=s,t){for(a=o,l=s;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Ge(l.vars.inherit)&&l.parent;o.immediateRender=Ge(a.immediateRender),t<2?o.runBackwards=1:o.startAt=i[r-1]}return new ce(i[0],o,i[r+1])},gn=function(t,i){return t||t===0?i(t):i},Ra=function(t,i,s){return s<t?t:s>i?i:s},Ae=function(t,i){return!ye(t)||!(i=YM.exec(t))?"":i[1]},rI=function(t,i,s){return gn(s,function(n){return Ra(t,i,n)})},Fd=[].slice,Xb=function(t,i){return t&&hs(t)&&"length"in t&&(!i&&!t.length||t.length-1 in t&&hs(t[0]))&&!t.nodeType&&t!==ci},oI=function(t,i,s){return s===void 0&&(s=[]),t.forEach(function(n){var r;return ye(n)&&!i||Xb(n,1)?(r=s).push.apply(r,mi(n)):s.push(n)})||s},mi=function(t,i,s){return le&&!i&&le.selector?le.selector(t):ye(t)&&!s&&(Rd||!Qr())?Fd.call((i||Ff).querySelectorAll(t),0):Pe(t)?oI(t,s):Xb(t)?Fd.call(t,0):t?[t]:[]},Ld=function(t){return t=mi(t)[0]||vh("Invalid scope")||{},function(i){var s=t.current||t.nativeElement||t;return mi(i,s.querySelectorAll?s:s===t?vh("Invalid scope")||Ff.createElement("div"):t)}},Yb=function(t){return t.sort(function(){return .5-Math.random()})},$b=function(t){if(te(t))return t;var i=hs(t)?t:{each:t},s=Hn(i.ease),n=i.from||0,r=parseFloat(i.base)||0,o={},a=n>0&&n<1,l=isNaN(n)||a,h=i.axis,c=n,u=n;return ye(n)?c=u={center:.5,edges:.5,end:1}[n]||0:!a&&l&&(c=n[0],u=n[1]),function(d,f,p){var m=(p||i).length,g=o[m],_,y,b,v,x,T,S,A,M;if(!g){if(M=i.grid==="auto"?0:(i.grid||[1,pi])[1],!M){for(S=-pi;S<(S=p[M++].getBoundingClientRect().left)&&M<m;);M--}for(g=o[m]=[],_=l?Math.min(M,m)*c-.5:n%M,y=M===pi?0:l?m*u/M-.5:n/M|0,S=0,A=pi,T=0;T<m;T++)b=T%M-_,v=y-(T/M|0),g[T]=x=h?Math.abs(h==="y"?v:b):Ib(b*b+v*v),x>S&&(S=x),x<A&&(A=x);n==="random"&&Yb(g),g.max=S-A,g.min=A,g.v=m=(parseFloat(i.amount)||parseFloat(i.each)*(M>m?m-1:h?h==="y"?m/M:M:Math.max(M,m/M))||0)*(n==="edges"?-1:1),g.b=m<0?r-m:r,g.u=Ae(i.amount||i.each)||0,s=s&&m<0?n1(s):s}return m=(g[d]-g.min)/g.max||0,ve(g.b+(s?s(m):m)*g.v)+g.u}},Bd=function(t){var i=Math.pow(10,((t+"").split(".")[1]||"").length);return function(s){var n=ve(Math.round(parseFloat(s)/t)*t*i);return(n-n%1)/i+(Fs(s)?0:Ae(s))}},Zb=function(t,i){var s=Pe(t),n,r;return!s&&hs(t)&&(n=s=t.radius||pi,t.values?(t=mi(t.values),(r=!Fs(t[0]))&&(n*=n)):t=Bd(t.increment)),gn(i,s?te(t)?function(o){return r=t(o),Math.abs(r-o)<=n?r:o}:function(o){for(var a=parseFloat(r?o.x:o),l=parseFloat(r?o.y:0),h=pi,c=0,u=t.length,d,f;u--;)r?(d=t[u].x-a,f=t[u].y-l,d=d*d+f*f):d=Math.abs(t[u]-a),d<h&&(h=d,c=u);return c=!n||h<=n?t[c]:o,r||c===o||Fs(o)?c:c+Ae(o)}:Bd(t))},Kb=function(t,i,s,n){return gn(Pe(t)?!i:s===!0?!!(s=0):!n,function(){return Pe(t)?t[~~(Math.random()*t.length)]:(s=s||1e-5)&&(n=s<1?Math.pow(10,(s+"").length-2):1)&&Math.floor(Math.round((t-s/2+Math.random()*(i-t+s*.99))/s)*s*n)/n})},aI=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return function(n){return i.reduce(function(r,o){return o(r)},n)}},lI=function(t,i){return function(s){return t(parseFloat(s))+(i||Ae(s))}},hI=function(t,i,s){return Jb(t,i,0,1,s)},qb=function(t,i,s){return gn(s,function(n){return t[~~i(n)]})},cI=function e(t,i,s){var n=i-t;return Pe(t)?qb(t,e(0,t.length),i):gn(s,function(r){return(n+(r-t)%n)%n+t})},uI=function e(t,i,s){var n=i-t,r=n*2;return Pe(t)?qb(t,e(0,t.length-1),i):gn(s,function(o){return o=(r+(o-t)%r)%r||0,t+(o>n?r-o:o)})},ca=function(t){for(var i=0,s="",n,r,o,a;~(n=t.indexOf("random(",i));)o=t.indexOf(")",n),a=t.charAt(n+7)==="[",r=t.substr(n+7,o-n-7).match(a?Ob:Pd),s+=t.substr(i,n-i)+Kb(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),i=o+1;return s+t.substr(i,t.length-i)},Jb=function(t,i,s,n,r){var o=i-t,a=n-s;return gn(r,function(l){return s+((l-t)/o*a||0)})},dI=function e(t,i,s,n){var r=isNaN(t+i)?0:function(f){return(1-f)*t+f*i};if(!r){var o=ye(t),a={},l,h,c,u,d;if(s===!0&&(n=1)&&(s=null),o)t={p:t},i={p:i};else if(Pe(t)&&!Pe(i)){for(c=[],u=t.length,d=u-2,h=1;h<u;h++)c.push(e(t[h-1],t[h]));u--,r=function(p){p*=u;var m=Math.min(d,~~p);return c[m](p-m)},s=i}else n||(t=Zn(Pe(t)?[]:{},t));if(!c){for(l in i)Gf.call(a,t,l,"get",i[l]);r=function(p){return Wf(p,a)||(o?t.p:t)}}}return gn(s,r)},og=function(t,i,s){var n=t.labels,r=pi,o,a,l;for(o in n)a=n[o]-i,a<0==!!s&&a&&r>(a=Math.abs(a))&&(l=o,r=a);return l},gi=function(t,i,s){var n=t.vars,r=n[i],o=le,a=t._ctx,l,h,c;if(r)return l=n[i+"Params"],h=n.callbackScope||t,s&&en.length&&wh(),a&&(le=a),c=l?r.apply(h,l):r.call(h),le=o,c},Do=function(t){return un(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Ie),t.progress()<1&&gi(t,"onInterrupt"),t},Mr,Qb=[],t1=function(t){if(!kf()){Qb.push(t);return}t=!t.name&&t.default||t;var i=t.name,s=te(t),n=i&&!s&&t.init?function(){this._props=[]}:t,r={init:ha,render:Wf,add:Gf,kill:MI,modifier:CI,rawVars:0},o={targetTest:0,get:0,getSetter:Vf,aliases:{},register:0};if(Qr(),t!==n){if(Qe[i])return;bi(n,bi(Sh(t,r),o)),Zn(n.prototype,Zn(r,Sh(t,o))),Qe[n.prop=i]=n,t.targetTest&&(zl.push(n),Bf[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}Lb(i,n),t.register&&t.register(Ye,n,ze)},kt=255,Oo={aqua:[0,kt,kt],lime:[0,kt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,kt],navy:[0,0,128],white:[kt,kt,kt],olive:[128,128,0],yellow:[kt,kt,0],orange:[kt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[kt,0,0],pink:[kt,192,203],cyan:[0,kt,kt],transparent:[kt,kt,kt,0]},fu=function(t,i,s){return t+=t<0?1:t>1?-1:0,(t*6<1?i+(s-i)*t*6:t<.5?s:t*3<2?i+(s-i)*(2/3-t)*6:i)*kt+.5|0},e1=function(t,i,s){var n=t?Fs(t)?[t>>16,t>>8&kt,t&kt]:0:Oo.black,r,o,a,l,h,c,u,d,f,p;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Oo[t])n=Oo[t];else if(t.charAt(0)==="#"){if(t.length<6&&(r=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+r+r+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&kt,n&kt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&kt,t&kt]}else if(t.substr(0,3)==="hsl"){if(n=p=t.match(Pd),!i)l=+n[0]%360/360,h=+n[1]/100,c=+n[2]/100,o=c<=.5?c*(h+1):c+h-c*h,r=c*2-o,n.length>3&&(n[3]*=1),n[0]=fu(l+1/3,r,o),n[1]=fu(l,r,o),n[2]=fu(l-1/3,r,o);else if(~t.indexOf("="))return n=t.match(Rb),s&&n.length<4&&(n[3]=1),n}else n=t.match(Pd)||Oo.transparent;n=n.map(Number)}return i&&!p&&(r=n[0]/kt,o=n[1]/kt,a=n[2]/kt,u=Math.max(r,o,a),d=Math.min(r,o,a),c=(u+d)/2,u===d?l=h=0:(f=u-d,h=c>.5?f/(2-u-d):f/(u+d),l=u===r?(o-a)/f+(o<a?6:0):u===o?(a-r)/f+2:(r-o)/f+4,l*=60),n[0]=~~(l+.5),n[1]=~~(h*100+.5),n[2]=~~(c*100+.5)),s&&n.length<4&&(n[3]=1),n},i1=function(t){var i=[],s=[],n=-1;return t.split(sn).forEach(function(r){var o=r.match(Cr)||[];i.push.apply(i,o),s.push(n+=o.length+1)}),i.c=s,i},ag=function(t,i,s){var n="",r=(t+n).match(sn),o=i?"hsla(":"rgba(",a=0,l,h,c,u;if(!r)return t;if(r=r.map(function(d){return(d=e1(d,i,1))&&o+(i?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),s&&(c=i1(t),l=s.c,l.join(n)!==c.c.join(n)))for(h=t.replace(sn,"1").split(Cr),u=h.length-1;a<u;a++)n+=h[a]+(~l.indexOf(a)?r.shift()||o+"0,0,0,0)":(c.length?c:r.length?r:s).shift());if(!h)for(h=t.split(sn),u=h.length-1;a<u;a++)n+=h[a]+r[a];return n+h[u]},sn=function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Oo)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),fI=/hsl[a]?\(/,s1=function(t){var i=t.join(" "),s;if(sn.lastIndex=0,sn.test(i))return s=fI.test(i),t[1]=ag(t[1],s),t[0]=ag(t[0],s,i1(t[1])),!0},ua,ei=function(){var e=Date.now,t=500,i=33,s=e(),n=s,r=1e3/240,o=r,a=[],l,h,c,u,d,f,p=function m(g){var _=e()-n,y=g===!0,b,v,x,T;if(_>t&&(s+=_-i),n+=_,x=n-s,b=x-o,(b>0||y)&&(T=++u.frame,d=x-u.time*1e3,u.time=x=x/1e3,o+=b+(b>=r?4:r-b),v=1),y||(l=h(m)),v)for(f=0;f<a.length;f++)a[f](x,d,T,g)};return u={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){kb&&(!Rd&&kf()&&(ci=Rd=window,Ff=ci.document||{},ri.gsap=Ye,(ci.gsapVersions||(ci.gsapVersions=[])).push(Ye.version),Fb(xh||ci.GreenSockGlobals||!ci.gsap&&ci||{}),c=ci.requestAnimationFrame,Qb.forEach(t1)),l&&u.sleep(),h=c||function(g){return setTimeout(g,o-u.time*1e3+1|0)},ua=1,p(2))},sleep:function(){(c?ci.cancelAnimationFrame:clearTimeout)(l),ua=0,h=ha},lagSmoothing:function(g,_){t=g||1/0,i=Math.min(_||33,t)},fps:function(g){r=1e3/(g||240),o=u.time*1e3+r},add:function(g,_,y){var b=_?function(v,x,T,S){g(v,x,T,S),u.remove(b)}:g;return u.remove(g),a[y?"unshift":"push"](b),Qr(),b},remove:function(g,_){~(_=a.indexOf(g))&&a.splice(_,1)&&f>=_&&f--},_listeners:a},u}(),Qr=function(){return!ua&&ei.wake()},Tt={},pI=/^[\d.\-M][\d.\-,\s]/,mI=/["']/g,gI=function(t){for(var i={},s=t.substr(1,t.length-3).split(":"),n=s[0],r=1,o=s.length,a,l,h;r<o;r++)l=s[r],a=r!==o-1?l.lastIndexOf(","):l.length,h=l.substr(0,a),i[n]=isNaN(h)?h.replace(mI,"").trim():+h,n=l.substr(a+1).trim();return i},_I=function(t){var i=t.indexOf("(")+1,s=t.indexOf(")"),n=t.indexOf("(",i);return t.substring(i,~n&&n<s?t.indexOf(")",s+1):s)},yI=function(t){var i=(t+"").split("("),s=Tt[i[0]];return s&&i.length>1&&s.config?s.config.apply(null,~t.indexOf("{")?[gI(i[1])]:_I(t).split(",").map(Gb)):Tt._CE&&pI.test(t)?Tt._CE("",t):s},n1=function(t){return function(i){return 1-t(1-i)}},r1=function e(t,i){for(var s=t._first,n;s;)s instanceof Ne?e(s,i):s.vars.yoyoEase&&(!s._yoyo||!s._repeat)&&s._yoyo!==i&&(s.timeline?e(s.timeline,i):(n=s._ease,s._ease=s._yEase,s._yEase=n,s._yoyo=i)),s=s._next},Hn=function(t,i){return t&&(te(t)?t:Tt[t]||yI(t))||i},ir=function(t,i,s,n){s===void 0&&(s=function(l){return 1-i(1-l)}),n===void 0&&(n=function(l){return l<.5?i(l*2)/2:1-i((1-l)*2)/2});var r={easeIn:i,easeOut:s,easeInOut:n},o;return He(t,function(a){Tt[a]=ri[a]=r,Tt[o=a.toLowerCase()]=s;for(var l in r)Tt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Tt[a+"."+l]=r[l]}),r},o1=function(t){return function(i){return i<.5?(1-t(1-i*2))/2:.5+t((i-.5)*2)/2}},pu=function e(t,i,s){var n=i>=1?i:1,r=(s||(t?.3:.45))/(i<1?i:1),o=r/Id*(Math.asin(1/n)||0),a=function(c){return c===1?1:n*Math.pow(2,-10*c)*XM((c-o)*r)+1},l=t==="out"?a:t==="in"?function(h){return 1-a(1-h)}:o1(a);return r=Id/r,l.config=function(h,c){return e(t,h,c)},l},mu=function e(t,i){i===void 0&&(i=1.70158);var s=function(o){return o?--o*o*((i+1)*o+i)+1:0},n=t==="out"?s:t==="in"?function(r){return 1-s(1-r)}:o1(s);return n.config=function(r){return e(t,r)},n};He("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var i=t<5?t+1:t;ir(e+",Power"+(i-1),t?function(s){return Math.pow(s,i)}:function(s){return s},function(s){return 1-Math.pow(1-s,i)},function(s){return s<.5?Math.pow(s*2,i)/2:1-Math.pow((1-s)*2,i)/2})});Tt.Linear.easeNone=Tt.none=Tt.Linear.easeIn;ir("Elastic",pu("in"),pu("out"),pu());(function(e,t){var i=1/t,s=2*i,n=2.5*i,r=function(a){return a<i?e*a*a:a<s?e*Math.pow(a-1.5/t,2)+.75:a<n?e*(a-=2.25/t)*a+.9375:e*Math.pow(a-2.625/t,2)+.984375};ir("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);ir("Expo",function(e){return e?Math.pow(2,10*(e-1)):0});ir("Circ",function(e){return-(Ib(1-e*e)-1)});ir("Sine",function(e){return e===1?1:-jM(e*VM)+1});ir("Back",mu("in"),mu("out"),mu());Tt.SteppedEase=Tt.steps=ri.SteppedEase={config:function(t,i){t===void 0&&(t=1);var s=1/t,n=t+(i?0:1),r=i?1:0,o=1-Ft;return function(a){return((n*Ra(0,o,a)|0)+r)*s}}};Kr.ease=Tt["quad.out"];He("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Nf+=e+","+e+"Params,"});var a1=function(t,i){this.id=WM++,t._gsap=this,this.target=t,this.harness=i,this.get=i?i.get:Nb,this.set=i?i.getSetter:Vf},to=function(){function e(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,Jr(this,+i.duration,1,1),this.data=i.data,le&&(this._ctx=le,le.data.push(this)),ua||ei.wake()}var t=e.prototype;return t.delay=function(s){return s||s===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+s-this._delay),this._delay=s,this):this._delay},t.duration=function(s){return arguments.length?this.totalDuration(this._repeat>0?s+(s+this._rDelay)*this._repeat:s):this.totalDuration()&&this._dur},t.totalDuration=function(s){return arguments.length?(this._dirty=0,Jr(this,this._repeat<0?s:(s-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(s,n){if(Qr(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(hc(this,s),!r._dp||r.parent||Vb(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&s<this._tDur||this._ts<0&&s>0||!this._tDur&&!s)&&qi(this._dp,this,this._start-this._delay)}return(this._tTime!==s||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Ft||!s&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=s),Ub(this,s,n)),this},t.time=function(s,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),s+ng(this))%(this._dur+this._rDelay)||(s?this._dur:0),n):this._time},t.totalProgress=function(s,n){return arguments.length?this.totalTime(this.totalDuration()*s,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(s,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-s:s)+ng(this),n):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(s,n){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(s-1)*r,n):this._repeat?qr(this._tTime,r)+1:1},t.timeScale=function(s){if(!arguments.length)return this._rts===-Ft?0:this._rts;if(this._rts===s)return this;var n=this.parent&&this._ts?Eh(this.parent._time,this):this._tTime;return this._rts=+s||0,this._ts=this._ps||s===-Ft?0:this._rts,this.totalTime(Ra(-Math.abs(this._delay),this._tDur,n),!0),lc(this),QM(this)},t.paused=function(s){return arguments.length?(this._ps!==s&&(this._ps=s,s?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Qr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ft&&(this._tTime-=Ft)))),this):this._ps},t.startTime=function(s){if(arguments.length){this._start=s;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&qi(n,this,s-this._delay),this}return this._start},t.endTime=function(s){return this._start+(Ge(s)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(s){var n=this.parent||this._dp;return n?s&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Eh(n.rawTime(s),this):this._tTime:this._tTime},t.revert=function(s){s===void 0&&(s=ZM);var n=Ie;return Ie=s,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(s),this.totalTime(-.01,s.suppressEvents)),this.data!=="nested"&&s.kill!==!1&&this.kill(),Ie=n,this},t.globalTime=function(s){for(var n=this,r=arguments.length?s:n.rawTime();n;)r=n._start+r/(n._ts||1),n=n._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(s):r},t.repeat=function(s){return arguments.length?(this._repeat=s===1/0?-2:s,rg(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(s){if(arguments.length){var n=this._time;return this._rDelay=s,rg(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(s){return arguments.length?(this._yoyo=s,this):this._yoyo},t.seek=function(s,n){return this.totalTime(hi(this,s),Ge(n))},t.restart=function(s,n){return this.play().totalTime(s?-this._delay:0,Ge(n))},t.play=function(s,n){return s!=null&&this.seek(s,n),this.reversed(!1).paused(!1)},t.reverse=function(s,n){return s!=null&&this.seek(s||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(s,n){return s!=null&&this.seek(s,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(s){return arguments.length?(!!s!==this.reversed()&&this.timeScale(-this._rts||(s?-Ft:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ft,this},t.isActive=function(){var s=this.parent||this._dp,n=this._start,r;return!!(!s||this._ts&&this._initted&&s.isActive()&&(r=s.rawTime(!0))>=n&&r<this.endTime(!0)-Ft)},t.eventCallback=function(s,n,r){var o=this.vars;return arguments.length>1?(n?(o[s]=n,r&&(o[s+"Params"]=r),s==="onUpdate"&&(this._onUpdate=n)):delete o[s],this):o[s]},t.then=function(s){var n=this;return new Promise(function(r){var o=te(s)?s:Hb,a=function(){var h=n.then;n.then=null,te(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=h),r(o),n.then=h};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?a():n._prom=a})},t.kill=function(){Do(this)},e}();bi(to.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ft,_prom:0,_ps:!1,_rts:1});var Ne=function(e){Mb(t,e);function t(s,n){var r;return s===void 0&&(s={}),r=e.call(this,s)||this,r.labels={},r.smoothChildTiming=!!s.smoothChildTiming,r.autoRemoveChildren=!!s.autoRemoveChildren,r._sort=Ge(s.sortChildren),Xt&&qi(s.parent||Xt,Ss(r),n),s.reversed&&r.reverse(),s.paused&&r.paused(!0),s.scrollTrigger&&Wb(Ss(r),s.scrollTrigger),r}var i=t.prototype;return i.to=function(n,r,o){return Vo(0,arguments,this),this},i.from=function(n,r,o){return Vo(1,arguments,this),this},i.fromTo=function(n,r,o,a){return Vo(2,arguments,this),this},i.set=function(n,r,o){return r.duration=0,r.parent=this,zo(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new ce(n,r,hi(this,o),1),this},i.call=function(n,r,o){return qi(this,ce.delayedCall(0,n,r),o)},i.staggerTo=function(n,r,o,a,l,h,c){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=h,o.onCompleteParams=c,o.parent=this,new ce(n,o,hi(this,l)),this},i.staggerFrom=function(n,r,o,a,l,h,c){return o.runBackwards=1,zo(o).immediateRender=Ge(o.immediateRender),this.staggerTo(n,r,o,a,l,h,c)},i.staggerFromTo=function(n,r,o,a,l,h,c,u){return a.startAt=o,zo(a).immediateRender=Ge(a.immediateRender),this.staggerTo(n,r,a,l,h,c,u)},i.render=function(n,r,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,h=this._dur,c=n<=0?0:ve(n),u=this._zTime<0!=n<0&&(this._initted||!h),d,f,p,m,g,_,y,b,v,x,T,S;if(this!==Xt&&c>l&&n>=0&&(c=l),c!==this._tTime||o||u){if(a!==this._time&&h&&(c+=this._time-a,n+=this._time-a),d=c,v=this._start,b=this._ts,_=!b,u&&(h||(a=this._zTime),(n||!r)&&(this._zTime=n)),this._repeat){if(T=this._yoyo,g=h+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(g*100+n,r,o);if(d=ve(c%g),c===l?(m=this._repeat,d=h):(m=~~(c/g),m&&m===c/g&&(d=h,m--),d>h&&(d=h)),x=qr(this._tTime,g),!a&&this._tTime&&x!==m&&this._tTime-x*g-this._dur<=0&&(x=m),T&&m&1&&(d=h-d,S=1),m!==x&&!this._lock){var A=T&&x&1,M=A===(T&&m&1);if(m<x&&(A=!A),a=A?0:h,this._lock=1,this.render(a||(S?0:ve(m*g)),r,!h)._lock=0,this._tTime=c,!r&&this.parent&&gi(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,l=this._tDur,M&&(this._lock=2,a=A?h:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;r1(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=sI(this,ve(a),ve(d)),y&&(c-=d-(d=y._start))),this._tTime=c,this._time=d,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,a=0),!a&&d&&!r&&!m&&(gi(this,"onStart"),this._tTime!==c))return this;if(d>=a&&n>=0)for(f=this._first;f;){if(p=f._next,(f._act||d>=f._start)&&f._ts&&y!==f){if(f.parent!==this)return this.render(n,r,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,r,o),d!==this._time||!this._ts&&!_){y=0,p&&(c+=this._zTime=-Ft);break}}f=p}else{f=this._last;for(var O=n<0?n:d;f;){if(p=f._prev,(f._act||O<=f._end)&&f._ts&&y!==f){if(f.parent!==this)return this.render(n,r,o);if(f.render(f._ts>0?(O-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(O-f._start)*f._ts,r,o||Ie&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!_){y=0,p&&(c+=this._zTime=O?-Ft:Ft);break}}f=p}}if(y&&!r&&(this.pause(),y.render(d>=a?0:-Ft)._zTime=d>=a?1:-1,this._ts))return this._start=v,lc(this),this.render(n,r,o);this._onUpdate&&!r&&gi(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(v===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((n||!h)&&(c===l&&this._ts>0||!c&&this._ts<0)&&un(this,1),!r&&!(n<0&&!a)&&(c||a||!l)&&(gi(this,c===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(n,r){var o=this;if(Fs(r)||(r=hi(this,r,n)),!(n instanceof to)){if(Pe(n))return n.forEach(function(a){return o.add(a,r)}),this;if(ye(n))return this.addLabel(n,r);if(te(n))n=ce.delayedCall(0,n);else return this}return this!==n?qi(this,n,r):this},i.getChildren=function(n,r,o,a){n===void 0&&(n=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=-pi);for(var l=[],h=this._first;h;)h._start>=a&&(h instanceof ce?r&&l.push(h):(o&&l.push(h),n&&l.push.apply(l,h.getChildren(!0,r,o)))),h=h._next;return l},i.getById=function(n){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===n)return r[o]},i.remove=function(n){return ye(n)?this.removeLabel(n):te(n)?this.killTweensOf(n):(ac(this,n),n===this._recent&&(this._recent=this._last),Gn(this))},i.totalTime=function(n,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ve(ei.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),e.prototype.totalTime.call(this,n,r),this._forcing=0,this):this._tTime},i.addLabel=function(n,r){return this.labels[n]=hi(this,r),this},i.removeLabel=function(n){return delete this.labels[n],this},i.addPause=function(n,r,o){var a=ce.delayedCall(0,r||ha,o);return a.data="isPause",this._hasPause=1,qi(this,a,hi(this,n))},i.removePause=function(n){var r=this._first;for(n=hi(this,n);r;)r._start===n&&r.data==="isPause"&&un(r),r=r._next},i.killTweensOf=function(n,r,o){for(var a=this.getTweensOf(n,o),l=a.length;l--;)Ys!==a[l]&&a[l].kill(n,r);return this},i.getTweensOf=function(n,r){for(var o=[],a=mi(n),l=this._first,h=Fs(r),c;l;)l instanceof ce?KM(l._targets,a)&&(h?(!Ys||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&o.push(l):(c=l.getTweensOf(a,r)).length&&o.push.apply(o,c),l=l._next;return o},i.tweenTo=function(n,r){r=r||{};var o=this,a=hi(o,n),l=r,h=l.startAt,c=l.onStart,u=l.onStartParams,d=l.immediateRender,f,p=ce.to(o,bi({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale())||Ft,onStart:function(){if(o.pause(),!f){var g=r.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale());p._dur!==g&&Jr(p,g,0,1).render(p._time,!0,!0),f=1}c&&c.apply(p,u||[])}},r));return d?p.render(0):p},i.tweenFromTo=function(n,r,o){return this.tweenTo(r,bi({startAt:{time:hi(this,n)}},o))},i.recent=function(){return this._recent},i.nextLabel=function(n){return n===void 0&&(n=this._time),og(this,hi(this,n))},i.previousLabel=function(n){return n===void 0&&(n=this._time),og(this,hi(this,n),1)},i.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Ft)},i.shiftChildren=function(n,r,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,h;a;)a._start>=o&&(a._start+=n,a._end+=n),a=a._next;if(r)for(h in l)l[h]>=o&&(l[h]+=n);return Gn(this)},i.invalidate=function(n){var r=this._first;for(this._lock=0;r;)r.invalidate(n),r=r._next;return e.prototype.invalidate.call(this,n)},i.clear=function(n){n===void 0&&(n=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Gn(this)},i.totalDuration=function(n){var r=0,o=this,a=o._last,l=pi,h,c,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(u=o.parent;a;)h=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,qi(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(r-=c,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>r&&a._ts&&(r=a._end),a=h;Jr(o,o===Xt&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(n){if(Xt._ts&&(Ub(Xt,Eh(n,Xt)),Bb=ei.frame),ei.frame>=ig){ig+=ni.autoSleep||120;var r=Xt._first;if((!r||!r._ts)&&ni.autoSleep&&ei._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||ei.sleep()}}},t}(to);bi(Ne.prototype,{_lock:0,_hasPause:0,_forcing:0});var bI=function(t,i,s,n,r,o,a){var l=new ze(this._pt,t,i,0,1,f1,null,r),h=0,c=0,u,d,f,p,m,g,_,y;for(l.b=s,l.e=n,s+="",n+="",(_=~n.indexOf("random("))&&(n=ca(n)),o&&(y=[s,n],o(y,t,i),s=y[0],n=y[1]),d=s.match(uu)||[];u=uu.exec(n);)p=u[0],m=n.substring(h,u.index),f?f=(f+1)%5:m.substr(-5)==="rgba("&&(f=1),p!==d[c++]&&(g=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:m||c===1?m:",",s:g,c:p.charAt(1)==="="?Nr(g,p)-g:parseFloat(p)-g,m:f&&f<4?Math.round:0},h=uu.lastIndex);return l.c=h<n.length?n.substring(h,n.length):"",l.fp=a,(Db.test(n)||_)&&(l.e=0),this._pt=l,l},Gf=function(t,i,s,n,r,o,a,l,h,c){te(n)&&(n=n(r||0,t,o));var u=t[i],d=s!=="get"?s:te(u)?h?t[i.indexOf("set")||!te(t["get"+i.substr(3)])?i:"get"+i.substr(3)](h):t[i]():u,f=te(u)?h?EI:u1:zf,p;if(ye(n)&&(~n.indexOf("random(")&&(n=ca(n)),n.charAt(1)==="="&&(p=Nr(d,n)+(Ae(d)||0),(p||p===0)&&(n=p))),!c||d!==n||Nd)return!isNaN(d*n)&&n!==""?(p=new ze(this._pt,t,i,+d||0,n-(d||0),typeof u=="boolean"?AI:d1,0,f),h&&(p.fp=h),a&&p.modifier(a,this,t),this._pt=p):(!u&&!(i in t)&&Lf(i,n),bI.call(this,t,i,d,n,f,l||ni.stringFilter,h))},xI=function(t,i,s,n,r){if(te(t)&&(t=Wo(t,r,i,s,n)),!hs(t)||t.style&&t.nodeType||Pe(t)||Pb(t))return ye(t)?Wo(t,r,i,s,n):t;var o={},a;for(a in t)o[a]=Wo(t[a],r,i,s,n);return o},l1=function(t,i,s,n,r,o){var a,l,h,c;if(Qe[t]&&(a=new Qe[t]).init(r,a.rawVars?i[t]:xI(i[t],n,r,o,s),s,n,o)!==!1&&(s._pt=l=new ze(s._pt,r,t,0,1,a.render,a,0,a.priority),s!==Mr))for(h=s._ptLookup[s._targets.indexOf(r)],c=a._props.length;c--;)h[a._props[c]]=l;return a},Ys,Nd,Hf=function e(t,i,s){var n=t.vars,r=n.ease,o=n.startAt,a=n.immediateRender,l=n.lazy,h=n.onUpdate,c=n.onUpdateParams,u=n.callbackScope,d=n.runBackwards,f=n.yoyoEase,p=n.keyframes,m=n.autoRevert,g=t._dur,_=t._startAt,y=t._targets,b=t.parent,v=b&&b.data==="nested"?b.vars.targets:y,x=t._overwrite==="auto"&&!Df,T=t.timeline,S,A,M,O,C,k,P,w,E,L,I,N,F;if(T&&(!p||!r)&&(r="none"),t._ease=Hn(r,Kr.ease),t._yEase=f?n1(Hn(f===!0?r:f,Kr.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!T&&!!n.runBackwards,!T||p&&!n.stagger){if(w=y[0]?Un(y[0]).harness:0,N=w&&n[w.prop],S=Sh(n,Bf),_&&(_._zTime<0&&_.progress(1),i<0&&d&&a&&!m?_.render(-1,!0):_.revert(d&&g?Hl:$M),_._lazy=0),o){if(un(t._startAt=ce.set(y,bi({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!_&&Ge(l),startAt:null,delay:0,onUpdate:h,onUpdateParams:c,callbackScope:u,stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,i<0&&(Ie||!a&&!m)&&t._startAt.revert(Hl),a&&g&&i<=0&&s<=0){i&&(t._zTime=i);return}}else if(d&&g&&!_){if(i&&(a=!1),M=bi({overwrite:!1,data:"isFromStart",lazy:a&&!_&&Ge(l),immediateRender:a,stagger:0,parent:b},S),N&&(M[w.prop]=N),un(t._startAt=ce.set(y,M)),t._startAt._dp=0,t._startAt._sat=t,i<0&&(Ie?t._startAt.revert(Hl):t._startAt.render(-1,!0)),t._zTime=i,!a)e(t._startAt,Ft,Ft);else if(!i)return}for(t._pt=t._ptCache=0,l=g&&Ge(l)||l&&!g,A=0;A<y.length;A++){if(C=y[A],P=C._gsap||Uf(y)[A]._gsap,t._ptLookup[A]=L={},Dd[P.id]&&en.length&&wh(),I=v===y?A:v.indexOf(C),w&&(E=new w).init(C,N||S,t,I,v)!==!1&&(t._pt=O=new ze(t._pt,C,E.name,0,1,E.render,E,0,E.priority),E._props.forEach(function(D){L[D]=O}),E.priority&&(k=1)),!w||N)for(M in S)Qe[M]&&(E=l1(M,S,t,I,C,v))?E.priority&&(k=1):L[M]=O=Gf.call(t,C,M,"get",S[M],I,v,0,n.stringFilter);t._op&&t._op[A]&&t.kill(C,t._op[A]),x&&t._pt&&(Ys=t,Xt.killTweensOf(C,L,t.globalTime(i)),F=!t.parent,Ys=0),t._pt&&l&&(Dd[P.id]=1)}k&&p1(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!F,p&&i<=0&&T.render(pi,!0,!0)},vI=function(t,i,s,n,r,o,a){var l=(t._pt&&t._ptCache||(t._ptCache={}))[i],h,c,u,d;if(!l)for(l=t._ptCache[i]=[],u=t._ptLookup,d=t._targets.length;d--;){if(h=u[d][i],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==i&&h.fp!==i;)h=h._next;if(!h)return Nd=1,t.vars[i]="+=0",Hf(t,a),Nd=0,1;l.push(h)}for(d=l.length;d--;)c=l[d],h=c._pt||c,h.s=(n||n===0)&&!r?n:h.s+(n||0)+o*h.c,h.c=s-h.s,c.e&&(c.e=re(s)+Ae(c.e)),c.b&&(c.b=h.s+Ae(c.b))},wI=function(t,i){var s=t[0]?Un(t[0]).harness:0,n=s&&s.aliases,r,o,a,l;if(!n)return i;r=Zn({},i);for(o in n)if(o in r)for(l=n[o].split(","),a=l.length;a--;)r[l[a]]=r[o];return r},SI=function(t,i,s,n){var r=i.ease||n||"power1.inOut",o,a;if(Pe(i))a=s[t]||(s[t]=[]),i.forEach(function(l,h){return a.push({t:h/(i.length-1)*100,v:l,e:r})});else for(o in i)a=s[o]||(s[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:i[o],e:r})},Wo=function(t,i,s,n,r){return te(t)?t.call(i,s,n,r):ye(t)&&~t.indexOf("random(")?ca(t):t},h1=Nf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",c1={};He(h1+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return c1[e]=1});var ce=function(e){Mb(t,e);function t(s,n,r,o){var a;typeof n=="number"&&(r.duration=n,n=r,r=null),a=e.call(this,o?n:zo(n))||this;var l=a.vars,h=l.duration,c=l.delay,u=l.immediateRender,d=l.stagger,f=l.overwrite,p=l.keyframes,m=l.defaults,g=l.scrollTrigger,_=l.yoyoEase,y=n.parent||Xt,b=(Pe(s)||Pb(s)?Fs(s[0]):"length"in n)?[s]:mi(s),v,x,T,S,A,M,O,C;if(a._targets=b.length?Uf(b):vh("GSAP target "+s+" not found. https://greensock.com",!ni.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||d||ll(h)||ll(c)){if(n=a.vars,v=a.timeline=new Ne({data:"nested",defaults:m||{},targets:y&&y.data==="nested"?y.vars.targets:b}),v.kill(),v.parent=v._dp=Ss(a),v._start=0,d||ll(h)||ll(c)){if(S=b.length,O=d&&$b(d),hs(d))for(A in d)~h1.indexOf(A)&&(C||(C={}),C[A]=d[A]);for(x=0;x<S;x++)T=Sh(n,c1),T.stagger=0,_&&(T.yoyoEase=_),C&&Zn(T,C),M=b[x],T.duration=+Wo(h,Ss(a),x,M,b),T.delay=(+Wo(c,Ss(a),x,M,b)||0)-a._delay,!d&&S===1&&T.delay&&(a._delay=c=T.delay,a._start+=c,T.delay=0),v.to(M,T,O?O(x,M,b):0),v._ease=Tt.none;v.duration()?h=c=0:a.timeline=0}else if(p){zo(bi(v.vars.defaults,{ease:"none"})),v._ease=Hn(p.ease||n.ease||"none");var k=0,P,w,E;if(Pe(p))p.forEach(function(L){return v.to(b,L,">")}),v.duration();else{T={};for(A in p)A==="ease"||A==="easeEach"||SI(A,p[A],T,p.easeEach);for(A in T)for(P=T[A].sort(function(L,I){return L.t-I.t}),k=0,x=0;x<P.length;x++)w=P[x],E={ease:w.e,duration:(w.t-(x?P[x-1].t:0))/100*h},E[A]=w.v,v.to(b,E,k),k+=E.duration;v.duration()<h&&v.to({},{duration:h-v.duration()})}}h||a.duration(h=v.duration())}else a.timeline=0;return f===!0&&!Df&&(Ys=Ss(a),Xt.killTweensOf(b),Ys=0),qi(y,Ss(a),r),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(u||!h&&!p&&a._start===ve(y._time)&&Ge(u)&&tI(Ss(a))&&y.data!=="nested")&&(a._tTime=-Ft,a.render(Math.max(0,-c)||0)),g&&Wb(Ss(a),g),a}var i=t.prototype;return i.render=function(n,r,o){var a=this._time,l=this._tDur,h=this._dur,c=n<0,u=n>l-Ft&&!c?l:n<Ft?0:n,d,f,p,m,g,_,y,b,v;if(!h)iI(this,n,r,o);else if(u!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=u,b=this.timeline,this._repeat){if(m=h+this._rDelay,this._repeat<-1&&c)return this.totalTime(m*100+n,r,o);if(d=ve(u%m),u===l?(p=this._repeat,d=h):(p=~~(u/m),p&&p===u/m&&(d=h,p--),d>h&&(d=h)),_=this._yoyo&&p&1,_&&(v=this._yEase,d=h-d),g=qr(this._tTime,m),d===a&&!o&&this._initted)return this._tTime=u,this;p!==g&&(b&&this._yEase&&r1(b,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=o=1,this.render(ve(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(jb(this,c?n:d,o,r,u))return this._tTime=0,this;if(a!==this._time)return this;if(h!==this._dur)return this.render(n,r,o)}if(this._tTime=u,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(v||this._ease)(d/h),this._from&&(this.ratio=y=1-y),d&&!a&&!r&&!p&&(gi(this,"onStart"),this._tTime!==u))return this;for(f=this._pt;f;)f.r(y,f.d),f=f._next;b&&b.render(n<0?n:!d&&_?-Ft:b._dur*b._ease(d/this._dur),r,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!r&&(c&&Od(this,n,r,o),gi(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!r&&this.parent&&gi(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&Od(this,n,!0,!0),(n||!h)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&un(this,1),!r&&!(c&&!a)&&(u||a||_)&&(gi(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),e.prototype.invalidate.call(this,n)},i.resetTo=function(n,r,o,a){ua||ei.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||Hf(this,l),h=this._ease(l/this._dur),vI(this,n,r,o,a,h,l)?this.resetTo(n,r,o,a):(hc(this,0),this.parent||zb(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(n,r){if(r===void 0&&(r="all"),!n&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Do(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,r,Ys&&Ys.vars.overwrite!==!0)._first||Do(this),this.parent&&o!==this.timeline.totalDuration()&&Jr(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=n?mi(n):a,h=this._ptLookup,c=this._pt,u,d,f,p,m,g,_;if((!r||r==="all")&&JM(a,l))return r==="all"&&(this._pt=0),Do(this);for(u=this._op=this._op||[],r!=="all"&&(ye(r)&&(m={},He(r,function(y){return m[y]=1}),r=m),r=wI(a,r)),_=a.length;_--;)if(~l.indexOf(a[_])){d=h[_],r==="all"?(u[_]=r,p=d,f={}):(f=u[_]=u[_]||{},p=r);for(m in p)g=d&&d[m],g&&((!("kill"in g.d)||g.d.kill(m)===!0)&&ac(this,g,"_pt"),delete d[m]),f!=="all"&&(f[m]=1)}return this._initted&&!this._pt&&c&&Do(this),this},t.to=function(n,r){return new t(n,r,arguments[2])},t.from=function(n,r){return Vo(1,arguments)},t.delayedCall=function(n,r,o,a){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(n,r,o){return Vo(2,arguments)},t.set=function(n,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(n,r)},t.killTweensOf=function(n,r,o){return Xt.killTweensOf(n,r,o)},t}(to);bi(ce.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});He("staggerTo,staggerFrom,staggerFromTo",function(e){ce[e]=function(){var t=new Ne,i=Fd.call(arguments,0);return i.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,i)}});var zf=function(t,i,s){return t[i]=s},u1=function(t,i,s){return t[i](s)},EI=function(t,i,s,n){return t[i](n.fp,s)},TI=function(t,i,s){return t.setAttribute(i,s)},Vf=function(t,i){return te(t[i])?u1:Of(t[i])&&t.setAttribute?TI:zf},d1=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e6)/1e6,i)},AI=function(t,i){return i.set(i.t,i.p,!!(i.s+i.c*t),i)},f1=function(t,i){var s=i._pt,n="";if(!t&&i.b)n=i.b;else if(t===1&&i.e)n=i.e;else{for(;s;)n=s.p+(s.m?s.m(s.s+s.c*t):Math.round((s.s+s.c*t)*1e4)/1e4)+n,s=s._next;n+=i.c}i.set(i.t,i.p,n,i)},Wf=function(t,i){for(var s=i._pt;s;)s.r(t,s.d),s=s._next},CI=function(t,i,s,n){for(var r=this._pt,o;r;)o=r._next,r.p===n&&r.modifier(t,i,s),r=o},MI=function(t){for(var i=this._pt,s,n;i;)n=i._next,i.p===t&&!i.op||i.op===t?ac(this,i,"_pt"):i.dep||(s=1),i=n;return!s},II=function(t,i,s,n){n.mSet(t,i,n.m.call(n.tween,s,n.mt),n)},p1=function(t){for(var i=t._pt,s,n,r,o;i;){for(s=i._next,n=r;n&&n.pr>i.pr;)n=n._next;(i._prev=n?n._prev:o)?i._prev._next=i:r=i,(i._next=n)?n._prev=i:o=i,i=s}t._pt=r},ze=function(){function e(i,s,n,r,o,a,l,h,c){this.t=s,this.s=r,this.c=o,this.p=n,this.r=a||d1,this.d=l||this,this.set=h||zf,this.pr=c||0,this._next=i,i&&(i._prev=this)}var t=e.prototype;return t.modifier=function(s,n,r){this.mSet=this.mSet||this.set,this.set=II,this.m=s,this.mt=r,this.tween=n},e}();He(Nf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Bf[e]=1});ri.TweenMax=ri.TweenLite=ce;ri.TimelineLite=ri.TimelineMax=Ne;Xt=new Ne({sortChildren:!1,defaults:Kr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ni.stringFilter=s1;var eo=[],Vl={},PI=[],lg=0,gu=function(t){return(Vl[t]||PI).map(function(i){return i()})},Ud=function(){var t=Date.now(),i=[];t-lg>2&&(gu("matchMediaInit"),eo.forEach(function(s){var n=s.queries,r=s.conditions,o,a,l,h;for(a in n)o=ci.matchMedia(n[a]).matches,o&&(l=1),o!==r[a]&&(r[a]=o,h=1);h&&(s.revert(),l&&i.push(s))}),gu("matchMediaRevert"),i.forEach(function(s){return s.onMatch(s)}),lg=t,gu("matchMedia"))},m1=function(){function e(i,s){this.selector=s&&Ld(s),this.data=[],this._r=[],this.isReverted=!1,i&&this.add(i)}var t=e.prototype;return t.add=function(s,n,r){te(s)&&(r=n,n=s,s=te);var o=this,a=function(){var h=le,c=o.selector,u;return h&&h!==o&&h.data.push(o),r&&(o.selector=Ld(r)),le=o,u=n.apply(o,arguments),te(u)&&o._r.push(u),le=h,o.selector=c,o.isReverted=!1,u};return o.last=a,s===te?a(o):s?o[s]=a:a},t.ignore=function(s){var n=le;le=null,s(this),le=n},t.getTweens=function(){var s=[];return this.data.forEach(function(n){return n instanceof e?s.push.apply(s,n.getTweens()):n instanceof ce&&!(n.parent&&n.parent.data==="nested")&&s.push(n)}),s},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(s,n){var r=this;if(s){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(h){return o.splice(o.indexOf(h),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,h){return h.g-l.g||-1}).forEach(function(l){return l.t.revert(s)}),this.data.forEach(function(l){return!(l instanceof to)&&l.revert&&l.revert(s)}),this._r.forEach(function(l){return l(s,r)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),n){var a=eo.indexOf(this);~a&&eo.splice(a,1)}},t.revert=function(s){this.kill(s||{})},e}(),RI=function(){function e(i){this.contexts=[],this.scope=i}var t=e.prototype;return t.add=function(s,n,r){hs(s)||(s={matches:s});var o=new m1(0,r||this.scope),a=o.conditions={},l,h,c;this.contexts.push(o),n=o.add("onMatch",n),o.queries=s;for(h in s)h==="all"?c=1:(l=ci.matchMedia(s[h]),l&&(eo.indexOf(o)<0&&eo.push(o),(a[h]=l.matches)&&(c=1),l.addListener?l.addListener(Ud):l.addEventListener("change",Ud)));return c&&n(o),this},t.revert=function(s){this.kill(s||{})},t.kill=function(s){this.contexts.forEach(function(n){return n.kill(s,!0)})},e}(),Th={registerPlugin:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];i.forEach(function(n){return t1(n)})},timeline:function(t){return new Ne(t)},getTweensOf:function(t,i){return Xt.getTweensOf(t,i)},getProperty:function(t,i,s,n){ye(t)&&(t=mi(t)[0]);var r=Un(t||{}).get,o=s?Hb:Gb;return s==="native"&&(s=""),t&&(i?o((Qe[i]&&Qe[i].get||r)(t,i,s,n)):function(a,l,h){return o((Qe[a]&&Qe[a].get||r)(t,a,l,h))})},quickSetter:function(t,i,s){if(t=mi(t),t.length>1){var n=t.map(function(c){return Ye.quickSetter(c,i,s)}),r=n.length;return function(c){for(var u=r;u--;)n[u](c)}}t=t[0]||{};var o=Qe[i],a=Un(t),l=a.harness&&(a.harness.aliases||{})[i]||i,h=o?function(c){var u=new o;Mr._pt=0,u.init(t,s?c+s:c,Mr,0,[t]),u.render(1,u),Mr._pt&&Wf(1,Mr)}:a.set(t,l);return o?h:function(c){return h(t,l,s?c+s:c,a,1)}},quickTo:function(t,i,s){var n,r=Ye.to(t,Zn((n={},n[i]="+=0.1",n.paused=!0,n),s||{})),o=function(l,h,c){return r.resetTo(i,l,h,c)};return o.tween=r,o},isTweening:function(t){return Xt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Hn(t.ease,Kr.ease)),sg(Kr,t||{})},config:function(t){return sg(ni,t||{})},registerEffect:function(t){var i=t.name,s=t.effect,n=t.plugins,r=t.defaults,o=t.extendTimeline;(n||"").split(",").forEach(function(a){return a&&!Qe[a]&&!ri[a]&&vh(i+" effect requires "+a+" plugin.")}),du[i]=function(a,l,h){return s(mi(a),bi(l||{},r),h)},o&&(Ne.prototype[i]=function(a,l,h){return this.add(du[i](a,hs(l)?l:(h=l)&&{},this),h)})},registerEase:function(t,i){Tt[t]=Hn(i)},parseEase:function(t,i){return arguments.length?Hn(t,i):Tt},getById:function(t){return Xt.getById(t)},exportRoot:function(t,i){t===void 0&&(t={});var s=new Ne(t),n,r;for(s.smoothChildTiming=Ge(t.smoothChildTiming),Xt.remove(s),s._dp=0,s._time=s._tTime=Xt._time,n=Xt._first;n;)r=n._next,(i||!(!n._dur&&n instanceof ce&&n.vars.onComplete===n._targets[0]))&&qi(s,n,n._start-n._delay),n=r;return qi(Xt,s,0),s},context:function(t,i){return t?new m1(t,i):le},matchMedia:function(t){return new RI(t)},matchMediaRefresh:function(){return eo.forEach(function(t){var i=t.conditions,s,n;for(n in i)i[n]&&(i[n]=!1,s=1);s&&t.revert()})||Ud()},addEventListener:function(t,i){var s=Vl[t]||(Vl[t]=[]);~s.indexOf(i)||s.push(i)},removeEventListener:function(t,i){var s=Vl[t],n=s&&s.indexOf(i);n>=0&&s.splice(n,1)},utils:{wrap:cI,wrapYoyo:uI,distribute:$b,random:Kb,snap:Zb,normalize:hI,getUnit:Ae,clamp:rI,splitColor:e1,toArray:mi,selector:Ld,mapRange:Jb,pipe:aI,unitize:lI,interpolate:dI,shuffle:Yb},install:Fb,effects:du,ticker:ei,updateRoot:Ne.updateRoot,plugins:Qe,globalTimeline:Xt,core:{PropTween:ze,globals:Lb,Tween:ce,Timeline:Ne,Animation:to,getCache:Un,_removeLinkedListItem:ac,reverting:function(){return Ie},context:function(t){return t&&le&&(le.data.push(t),t._ctx=le),le},suppressOverwrites:function(t){return Df=t}}};He("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Th[e]=ce[e]});ei.add(Ne.updateRoot);Mr=Th.to({},{duration:0});var DI=function(t,i){for(var s=t._pt;s&&s.p!==i&&s.op!==i&&s.fp!==i;)s=s._next;return s},OI=function(t,i){var s=t._targets,n,r,o;for(n in i)for(r=s.length;r--;)o=t._ptLookup[r][n],o&&(o=o.d)&&(o._pt&&(o=DI(o,n)),o&&o.modifier&&o.modifier(i[n],t,s[r],n))},_u=function(t,i){return{name:t,rawVars:1,init:function(n,r,o){o._onInit=function(a){var l,h;if(ye(r)&&(l={},He(r,function(c){return l[c]=1}),r=l),i){l={};for(h in r)l[h]=i(r[h]);r=l}OI(a,r)}}}},Ye=Th.registerPlugin({name:"attr",init:function(t,i,s,n,r){var o,a,l;this.tween=s;for(o in i)l=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(l||0)+"",i[o],n,r,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(t,i){for(var s=i._pt;s;)Ie?s.set(s.t,s.p,s.b,s):s.r(t,s.d),s=s._next}},{name:"endArray",init:function(t,i){for(var s=i.length;s--;)this.add(t,s,t[s]||0,i[s],0,0,0,0,0,1)}},_u("roundProps",Bd),_u("modifiers"),_u("snap",Zb))||Th;ce.version=Ne.version=Ye.version="3.11.5";kb=1;kf()&&Qr();Tt.Power0;Tt.Power1;Tt.Power2;Tt.Power3;Tt.Power4;Tt.Linear;Tt.Quad;Tt.Cubic;Tt.Quart;Tt.Quint;Tt.Strong;Tt.Elastic;Tt.Back;Tt.SteppedEase;Tt.Bounce;Tt.Sine;Tt.Expo;Tt.Circ;/*!
 * CSSPlugin 3.11.5
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var hg,$s,Ur,jf,Ln,cg,Xf,kI=function(){return typeof window<"u"},Ls={},Rn=180/Math.PI,Gr=Math.PI/180,mr=Math.atan2,ug=1e8,Yf=/([A-Z])/g,FI=/(left|right|width|margin|padding|x)/i,LI=/[\s,\(]\S/,ts={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Gd=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},BI=function(t,i){return i.set(i.t,i.p,t===1?i.e:Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},NI=function(t,i){return i.set(i.t,i.p,t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},UI=function(t,i){var s=i.s+i.c*t;i.set(i.t,i.p,~~(s+(s<0?-.5:.5))+i.u,i)},g1=function(t,i){return i.set(i.t,i.p,t?i.e:i.b,i)},_1=function(t,i){return i.set(i.t,i.p,t!==1?i.b:i.e,i)},GI=function(t,i,s){return t.style[i]=s},HI=function(t,i,s){return t.style.setProperty(i,s)},zI=function(t,i,s){return t._gsap[i]=s},VI=function(t,i,s){return t._gsap.scaleX=t._gsap.scaleY=s},WI=function(t,i,s,n,r){var o=t._gsap;o.scaleX=o.scaleY=s,o.renderTransform(r,o)},jI=function(t,i,s,n,r){var o=t._gsap;o[i]=s,o.renderTransform(r,o)},Kt="transform",Ni=Kt+"Origin",XI=function e(t,i){var s=this,n=this.target,r=n.style;if(t in Ls){if(this.tfm=this.tfm||{},t!=="transform")t=ts[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return s.tfm[o]=Ts(n,o)}):this.tfm[t]=n._gsap.x?n._gsap[t]:Ts(n,t);else return ts.transform.split(",").forEach(function(o){return e.call(s,o,i)});if(this.props.indexOf(Kt)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Ni,i,"")),t=Kt}(r||i)&&this.props.push(t,i,r[t])},y1=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},YI=function(){var t=this.props,i=this.target,s=i.style,n=i._gsap,r,o;for(r=0;r<t.length;r+=3)t[r+1]?i[t[r]]=t[r+2]:t[r+2]?s[t[r]]=t[r+2]:s.removeProperty(t[r].substr(0,2)==="--"?t[r]:t[r].replace(Yf,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),r=Xf(),(!r||!r.isStart)&&!s[Kt]&&(y1(s),n.uncache=1)}},b1=function(t,i){var s={target:t,props:[],revert:YI,save:XI};return t._gsap||Ye.core.getCache(t),i&&i.split(",").forEach(function(n){return s.save(n)}),s},x1,Hd=function(t,i){var s=$s.createElementNS?$s.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):$s.createElement(t);return s.style?s:$s.createElement(t)},ns=function e(t,i,s){var n=getComputedStyle(t);return n[i]||n.getPropertyValue(i.replace(Yf,"-$1").toLowerCase())||n.getPropertyValue(i)||!s&&e(t,io(i)||i,1)||""},dg="O,Moz,ms,Ms,Webkit".split(","),io=function(t,i,s){var n=i||Ln,r=n.style,o=5;if(t in r&&!s)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(dg[o]+t in r););return o<0?null:(o===3?"ms":o>=0?dg[o]:"")+t},zd=function(){kI()&&window.document&&(hg=window,$s=hg.document,Ur=$s.documentElement,Ln=Hd("div")||{style:{}},Hd("div"),Kt=io(Kt),Ni=Kt+"Origin",Ln.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",x1=!!io("perspective"),Xf=Ye.core.reverting,jf=1)},yu=function e(t){var i=Hd("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,n=this.nextSibling,r=this.style.cssText,o;if(Ur.appendChild(i),i.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch{}else this._gsapBBox&&(o=this._gsapBBox());return s&&(n?s.insertBefore(this,n):s.appendChild(this)),Ur.removeChild(i),this.style.cssText=r,o},fg=function(t,i){for(var s=i.length;s--;)if(t.hasAttribute(i[s]))return t.getAttribute(i[s])},v1=function(t){var i;try{i=t.getBBox()}catch{i=yu.call(t,!0)}return i&&(i.width||i.height)||t.getBBox===yu||(i=yu.call(t,!0)),i&&!i.width&&!i.x&&!i.y?{x:+fg(t,["x","cx","x1"])||0,y:+fg(t,["y","cy","y1"])||0,width:0,height:0}:i},w1=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&v1(t))},da=function(t,i){if(i){var s=t.style;i in Ls&&i!==Ni&&(i=Kt),s.removeProperty?((i.substr(0,2)==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),s.removeProperty(i.replace(Yf,"-$1").toLowerCase())):s.removeAttribute(i)}},Zs=function(t,i,s,n,r,o){var a=new ze(t._pt,i,s,0,1,o?_1:g1);return t._pt=a,a.b=n,a.e=r,t._props.push(s),a},pg={deg:1,rad:1,turn:1},$I={grid:1,flex:1},dn=function e(t,i,s,n){var r=parseFloat(s)||0,o=(s+"").trim().substr((r+"").length)||"px",a=Ln.style,l=FI.test(i),h=t.tagName.toLowerCase()==="svg",c=(h?"client":"offset")+(l?"Width":"Height"),u=100,d=n==="px",f=n==="%",p,m,g,_;return n===o||!r||pg[n]||pg[o]?r:(o!=="px"&&!d&&(r=e(t,i,s,"px")),_=t.getCTM&&w1(t),(f||o==="%")&&(Ls[i]||~i.indexOf("adius"))?(p=_?t.getBBox()[l?"width":"height"]:t[c],re(f?r/p*u:r/100*p)):(a[l?"width":"height"]=u+(d?o:n),m=~i.indexOf("adius")||n==="em"&&t.appendChild&&!h?t:t.parentNode,_&&(m=(t.ownerSVGElement||{}).parentNode),(!m||m===$s||!m.appendChild)&&(m=$s.body),g=m._gsap,g&&f&&g.width&&l&&g.time===ei.time&&!g.uncache?re(r/g.width*u):((f||o==="%")&&!$I[ns(m,"display")]&&(a.position=ns(t,"position")),m===t&&(a.position="static"),m.appendChild(Ln),p=Ln[c],m.removeChild(Ln),a.position="absolute",l&&f&&(g=Un(m),g.time=ei.time,g.width=m[c]),re(d?p*r/u:p&&r?u/p*r:0))))},Ts=function(t,i,s,n){var r;return jf||zd(),i in ts&&i!=="transform"&&(i=ts[i],~i.indexOf(",")&&(i=i.split(",")[0])),Ls[i]&&i!=="transform"?(r=pa(t,n),r=i!=="transformOrigin"?r[i]:r.svg?r.origin:Ch(ns(t,Ni))+" "+r.zOrigin+"px"):(r=t.style[i],(!r||r==="auto"||n||~(r+"").indexOf("calc("))&&(r=Ah[i]&&Ah[i](t,i,s)||ns(t,i)||Nb(t,i)||(i==="opacity"?1:0))),s&&!~(r+"").trim().indexOf(" ")?dn(t,i,r,s)+s:r},ZI=function(t,i,s,n){if(!s||s==="none"){var r=io(i,t,1),o=r&&ns(t,r,1);o&&o!==s?(i=r,s=o):i==="borderColor"&&(s=ns(t,"borderTopColor"))}var a=new ze(this._pt,t.style,i,0,1,f1),l=0,h=0,c,u,d,f,p,m,g,_,y,b,v,x;if(a.b=s,a.e=n,s+="",n+="",n==="auto"&&(t.style[i]=n,n=ns(t,i)||n,t.style[i]=s),c=[s,n],s1(c),s=c[0],n=c[1],d=s.match(Cr)||[],x=n.match(Cr)||[],x.length){for(;u=Cr.exec(n);)g=u[0],y=n.substring(l,u.index),p?p=(p+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(p=1),g!==(m=d[h++]||"")&&(f=parseFloat(m)||0,v=m.substr((f+"").length),g.charAt(1)==="="&&(g=Nr(f,g)+v),_=parseFloat(g),b=g.substr((_+"").length),l=Cr.lastIndex-b.length,b||(b=b||ni.units[i]||v,l===n.length&&(n+=b,a.e+=b)),v!==b&&(f=dn(t,i,m,b)||0),a._pt={_next:a._pt,p:y||h===1?y:",",s:f,c:_-f,m:p&&p<4||i==="zIndex"?Math.round:0});a.c=l<n.length?n.substring(l,n.length):""}else a.r=i==="display"&&n==="none"?_1:g1;return Db.test(n)&&(a.e=0),this._pt=a,a},mg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},KI=function(t){var i=t.split(" "),s=i[0],n=i[1]||"50%";return(s==="top"||s==="bottom"||n==="left"||n==="right")&&(t=s,s=n,n=t),i[0]=mg[s]||s,i[1]=mg[n]||n,i.join(" ")},qI=function(t,i){if(i.tween&&i.tween._time===i.tween._dur){var s=i.t,n=s.style,r=i.u,o=s._gsap,a,l,h;if(r==="all"||r===!0)n.cssText="",l=1;else for(r=r.split(","),h=r.length;--h>-1;)a=r[h],Ls[a]&&(l=1,a=a==="transformOrigin"?Ni:Kt),da(s,a);l&&(da(s,Kt),o&&(o.svg&&s.removeAttribute("transform"),pa(s,1),o.uncache=1,y1(n)))}},Ah={clearProps:function(t,i,s,n,r){if(r.data!=="isFromStart"){var o=t._pt=new ze(t._pt,i,s,0,0,qI);return o.u=n,o.pr=-10,o.tween=r,t._props.push(s),1}}},fa=[1,0,0,1,0,0],S1={},E1=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},gg=function(t){var i=ns(t,Kt);return E1(i)?fa:i.substr(7).match(Rb).map(re)},$f=function(t,i){var s=t._gsap||Un(t),n=t.style,r=gg(t),o,a,l,h;return s.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?fa:r):(r===fa&&!t.offsetParent&&t!==Ur&&!s.svg&&(l=n.display,n.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(h=1,a=t.nextElementSibling,Ur.appendChild(t)),r=gg(t),l?n.display=l:da(t,"display"),h&&(a?o.insertBefore(t,a):o?o.appendChild(t):Ur.removeChild(t))),i&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},Vd=function(t,i,s,n,r,o){var a=t._gsap,l=r||$f(t,!0),h=a.xOrigin||0,c=a.yOrigin||0,u=a.xOffset||0,d=a.yOffset||0,f=l[0],p=l[1],m=l[2],g=l[3],_=l[4],y=l[5],b=i.split(" "),v=parseFloat(b[0])||0,x=parseFloat(b[1])||0,T,S,A,M;s?l!==fa&&(S=f*g-p*m)&&(A=v*(g/S)+x*(-m/S)+(m*y-g*_)/S,M=v*(-p/S)+x*(f/S)-(f*y-p*_)/S,v=A,x=M):(T=v1(t),v=T.x+(~b[0].indexOf("%")?v/100*T.width:v),x=T.y+(~(b[1]||b[0]).indexOf("%")?x/100*T.height:x)),n||n!==!1&&a.smooth?(_=v-h,y=x-c,a.xOffset=u+(_*f+y*m)-_,a.yOffset=d+(_*p+y*g)-y):a.xOffset=a.yOffset=0,a.xOrigin=v,a.yOrigin=x,a.smooth=!!n,a.origin=i,a.originIsAbsolute=!!s,t.style[Ni]="0px 0px",o&&(Zs(o,a,"xOrigin",h,v),Zs(o,a,"yOrigin",c,x),Zs(o,a,"xOffset",u,a.xOffset),Zs(o,a,"yOffset",d,a.yOffset)),t.setAttribute("data-svg-origin",v+" "+x)},pa=function(t,i){var s=t._gsap||new a1(t);if("x"in s&&!i&&!s.uncache)return s;var n=t.style,r=s.scaleX<0,o="px",a="deg",l=getComputedStyle(t),h=ns(t,Ni)||"0",c,u,d,f,p,m,g,_,y,b,v,x,T,S,A,M,O,C,k,P,w,E,L,I,N,F,D,G,W,q,X,st;return c=u=d=m=g=_=y=b=v=0,f=p=1,s.svg=!!(t.getCTM&&w1(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[Kt]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Kt]!=="none"?l[Kt]:"")),n.scale=n.rotate=n.translate="none"),S=$f(t,s.svg),s.svg&&(s.uncache?(N=t.getBBox(),h=s.xOrigin-N.x+"px "+(s.yOrigin-N.y)+"px",I=""):I=!i&&t.getAttribute("data-svg-origin"),Vd(t,I||h,!!I||s.originIsAbsolute,s.smooth!==!1,S)),x=s.xOrigin||0,T=s.yOrigin||0,S!==fa&&(C=S[0],k=S[1],P=S[2],w=S[3],c=E=S[4],u=L=S[5],S.length===6?(f=Math.sqrt(C*C+k*k),p=Math.sqrt(w*w+P*P),m=C||k?mr(k,C)*Rn:0,y=P||w?mr(P,w)*Rn+m:0,y&&(p*=Math.abs(Math.cos(y*Gr))),s.svg&&(c-=x-(x*C+T*P),u-=T-(x*k+T*w))):(st=S[6],q=S[7],D=S[8],G=S[9],W=S[10],X=S[11],c=S[12],u=S[13],d=S[14],A=mr(st,W),g=A*Rn,A&&(M=Math.cos(-A),O=Math.sin(-A),I=E*M+D*O,N=L*M+G*O,F=st*M+W*O,D=E*-O+D*M,G=L*-O+G*M,W=st*-O+W*M,X=q*-O+X*M,E=I,L=N,st=F),A=mr(-P,W),_=A*Rn,A&&(M=Math.cos(-A),O=Math.sin(-A),I=C*M-D*O,N=k*M-G*O,F=P*M-W*O,X=w*O+X*M,C=I,k=N,P=F),A=mr(k,C),m=A*Rn,A&&(M=Math.cos(A),O=Math.sin(A),I=C*M+k*O,N=E*M+L*O,k=k*M-C*O,L=L*M-E*O,C=I,E=N),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,_=180-_),f=re(Math.sqrt(C*C+k*k+P*P)),p=re(Math.sqrt(L*L+st*st)),A=mr(E,L),y=Math.abs(A)>2e-4?A*Rn:0,v=X?1/(X<0?-X:X):0),s.svg&&(I=t.getAttribute("transform"),s.forceCSS=t.setAttribute("transform","")||!E1(ns(t,Kt)),I&&t.setAttribute("transform",I))),Math.abs(y)>90&&Math.abs(y)<270&&(r?(f*=-1,y+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,y+=y<=0?180:-180)),i=i||s.uncache,s.x=c-((s.xPercent=c&&(!i&&s.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*s.xPercent/100:0)+o,s.y=u-((s.yPercent=u&&(!i&&s.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-u)?-50:0)))?t.offsetHeight*s.yPercent/100:0)+o,s.z=d+o,s.scaleX=re(f),s.scaleY=re(p),s.rotation=re(m)+a,s.rotationX=re(g)+a,s.rotationY=re(_)+a,s.skewX=y+a,s.skewY=b+a,s.transformPerspective=v+o,(s.zOrigin=parseFloat(h.split(" ")[2])||0)&&(n[Ni]=Ch(h)),s.xOffset=s.yOffset=0,s.force3D=ni.force3D,s.renderTransform=s.svg?QI:x1?T1:JI,s.uncache=0,s},Ch=function(t){return(t=t.split(" "))[0]+" "+t[1]},bu=function(t,i,s){var n=Ae(i);return re(parseFloat(i)+parseFloat(dn(t,"x",s+"px",n)))+n},JI=function(t,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,T1(t,i)},vn="0deg",vo="0px",wn=") ",T1=function(t,i){var s=i||this,n=s.xPercent,r=s.yPercent,o=s.x,a=s.y,l=s.z,h=s.rotation,c=s.rotationY,u=s.rotationX,d=s.skewX,f=s.skewY,p=s.scaleX,m=s.scaleY,g=s.transformPerspective,_=s.force3D,y=s.target,b=s.zOrigin,v="",x=_==="auto"&&t&&t!==1||_===!0;if(b&&(u!==vn||c!==vn)){var T=parseFloat(c)*Gr,S=Math.sin(T),A=Math.cos(T),M;T=parseFloat(u)*Gr,M=Math.cos(T),o=bu(y,o,S*M*-b),a=bu(y,a,-Math.sin(T)*-b),l=bu(y,l,A*M*-b+b)}g!==vo&&(v+="perspective("+g+wn),(n||r)&&(v+="translate("+n+"%, "+r+"%) "),(x||o!==vo||a!==vo||l!==vo)&&(v+=l!==vo||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+wn),h!==vn&&(v+="rotate("+h+wn),c!==vn&&(v+="rotateY("+c+wn),u!==vn&&(v+="rotateX("+u+wn),(d!==vn||f!==vn)&&(v+="skew("+d+", "+f+wn),(p!==1||m!==1)&&(v+="scale("+p+", "+m+wn),y.style[Kt]=v||"translate(0, 0)"},QI=function(t,i){var s=i||this,n=s.xPercent,r=s.yPercent,o=s.x,a=s.y,l=s.rotation,h=s.skewX,c=s.skewY,u=s.scaleX,d=s.scaleY,f=s.target,p=s.xOrigin,m=s.yOrigin,g=s.xOffset,_=s.yOffset,y=s.forceCSS,b=parseFloat(o),v=parseFloat(a),x,T,S,A,M;l=parseFloat(l),h=parseFloat(h),c=parseFloat(c),c&&(c=parseFloat(c),h+=c,l+=c),l||h?(l*=Gr,h*=Gr,x=Math.cos(l)*u,T=Math.sin(l)*u,S=Math.sin(l-h)*-d,A=Math.cos(l-h)*d,h&&(c*=Gr,M=Math.tan(h-c),M=Math.sqrt(1+M*M),S*=M,A*=M,c&&(M=Math.tan(c),M=Math.sqrt(1+M*M),x*=M,T*=M)),x=re(x),T=re(T),S=re(S),A=re(A)):(x=u,A=d,T=S=0),(b&&!~(o+"").indexOf("px")||v&&!~(a+"").indexOf("px"))&&(b=dn(f,"x",o,"px"),v=dn(f,"y",a,"px")),(p||m||g||_)&&(b=re(b+p-(p*x+m*S)+g),v=re(v+m-(p*T+m*A)+_)),(n||r)&&(M=f.getBBox(),b=re(b+n/100*M.width),v=re(v+r/100*M.height)),M="matrix("+x+","+T+","+S+","+A+","+b+","+v+")",f.setAttribute("transform",M),y&&(f.style[Kt]=M)},tP=function(t,i,s,n,r){var o=360,a=ye(r),l=parseFloat(r)*(a&&~r.indexOf("rad")?Rn:1),h=l-n,c=n+h+"deg",u,d;return a&&(u=r.split("_")[1],u==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),u==="cw"&&h<0?h=(h+o*ug)%o-~~(h/o)*o:u==="ccw"&&h>0&&(h=(h-o*ug)%o-~~(h/o)*o)),t._pt=d=new ze(t._pt,i,s,n,h,BI),d.e=c,d.u="deg",t._props.push(s),d},_g=function(t,i){for(var s in i)t[s]=i[s];return t},eP=function(t,i,s){var n=_g({},s._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=s.style,a,l,h,c,u,d,f,p;n.svg?(h=s.getAttribute("transform"),s.setAttribute("transform",""),o[Kt]=i,a=pa(s,1),da(s,Kt),s.setAttribute("transform",h)):(h=getComputedStyle(s)[Kt],o[Kt]=i,a=pa(s,1),o[Kt]=h);for(l in Ls)h=n[l],c=a[l],h!==c&&r.indexOf(l)<0&&(f=Ae(h),p=Ae(c),u=f!==p?dn(s,l,h,p):parseFloat(h),d=parseFloat(c),t._pt=new ze(t._pt,a,l,u,d-u,Gd),t._pt.u=p||0,t._props.push(l));_g(a,n)};He("padding,margin,Width,Radius",function(e,t){var i="Top",s="Right",n="Bottom",r="Left",o=(t<3?[i,s,n,r]:[i+r,i+s,n+s,n+r]).map(function(a){return t<2?e+a:"border"+a+e});Ah[t>1?"border"+e:e]=function(a,l,h,c,u){var d,f;if(arguments.length<4)return d=o.map(function(p){return Ts(a,p,h)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(c+"").split(" "),f={},o.forEach(function(p,m){return f[p]=d[m]=d[m]||d[(m-1)/2|0]}),a.init(l,f,u)}});var A1={name:"css",register:zd,targetTest:function(t){return t.style&&t.nodeType},init:function(t,i,s,n,r){var o=this._props,a=t.style,l=s.vars.startAt,h,c,u,d,f,p,m,g,_,y,b,v,x,T,S,A;jf||zd(),this.styles=this.styles||b1(t),A=this.styles.props,this.tween=s;for(m in i)if(m!=="autoRound"&&(c=i[m],!(Qe[m]&&l1(m,i,s,n,t,r)))){if(f=typeof c,p=Ah[m],f==="function"&&(c=c.call(s,n,t,r),f=typeof c),f==="string"&&~c.indexOf("random(")&&(c=ca(c)),p)p(this,t,m,c,s)&&(S=1);else if(m.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(m)+"").trim(),c+="",sn.lastIndex=0,sn.test(h)||(g=Ae(h),_=Ae(c)),_?g!==_&&(h=dn(t,m,h,_)+_):g&&(c+=g),this.add(a,"setProperty",h,c,n,r,0,0,m),o.push(m),A.push(m,0,a[m]);else if(f!=="undefined"){if(l&&m in l?(h=typeof l[m]=="function"?l[m].call(s,n,t,r):l[m],ye(h)&&~h.indexOf("random(")&&(h=ca(h)),Ae(h+"")||(h+=ni.units[m]||Ae(Ts(t,m))||""),(h+"").charAt(1)==="="&&(h=Ts(t,m))):h=Ts(t,m),d=parseFloat(h),y=f==="string"&&c.charAt(1)==="="&&c.substr(0,2),y&&(c=c.substr(2)),u=parseFloat(c),m in ts&&(m==="autoAlpha"&&(d===1&&Ts(t,"visibility")==="hidden"&&u&&(d=0),A.push("visibility",0,a.visibility),Zs(this,a,"visibility",d?"inherit":"hidden",u?"inherit":"hidden",!u)),m!=="scale"&&m!=="transform"&&(m=ts[m],~m.indexOf(",")&&(m=m.split(",")[0]))),b=m in Ls,b){if(this.styles.save(m),v||(x=t._gsap,x.renderTransform&&!i.parseTransform||pa(t,i.parseTransform),T=i.smoothOrigin!==!1&&x.smooth,v=this._pt=new ze(this._pt,a,Kt,0,1,x.renderTransform,x,0,-1),v.dep=1),m==="scale")this._pt=new ze(this._pt,x,"scaleY",x.scaleY,(y?Nr(x.scaleY,y+u):u)-x.scaleY||0,Gd),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){A.push(Ni,0,a[Ni]),c=KI(c),x.svg?Vd(t,c,0,T,0,this):(_=parseFloat(c.split(" ")[2])||0,_!==x.zOrigin&&Zs(this,x,"zOrigin",x.zOrigin,_),Zs(this,a,m,Ch(h),Ch(c)));continue}else if(m==="svgOrigin"){Vd(t,c,1,T,0,this);continue}else if(m in S1){tP(this,x,m,d,y?Nr(d,y+c):c);continue}else if(m==="smoothOrigin"){Zs(this,x,"smooth",x.smooth,c);continue}else if(m==="force3D"){x[m]=c;continue}else if(m==="transform"){eP(this,c,t);continue}}else m in a||(m=io(m)||m);if(b||(u||u===0)&&(d||d===0)&&!LI.test(c)&&m in a)g=(h+"").substr((d+"").length),u||(u=0),_=Ae(c)||(m in ni.units?ni.units[m]:g),g!==_&&(d=dn(t,m,h,_)),this._pt=new ze(this._pt,b?x:a,m,d,(y?Nr(d,y+u):u)-d,!b&&(_==="px"||m==="zIndex")&&i.autoRound!==!1?UI:Gd),this._pt.u=_||0,g!==_&&_!=="%"&&(this._pt.b=h,this._pt.r=NI);else if(m in a)ZI.call(this,t,m,h,y?y+c:c);else if(m in t)this.add(t,m,h||t[m],y?y+c:c,n,r);else if(m!=="parseTransform"){Lf(m,c);continue}b||(m in a?A.push(m,0,a[m]):A.push(m,1,h||t[m])),o.push(m)}}S&&p1(this)},render:function(t,i){if(i.tween._time||!Xf())for(var s=i._pt;s;)s.r(t,s.d),s=s._next;else i.styles.revert()},get:Ts,aliases:ts,getSetter:function(t,i,s){var n=ts[i];return n&&n.indexOf(",")<0&&(i=n),i in Ls&&i!==Ni&&(t._gsap.x||Ts(t,"x"))?s&&cg===s?i==="scale"?VI:zI:(cg=s||{})&&(i==="scale"?WI:jI):t.style&&!Of(t.style[i])?GI:~i.indexOf("-")?HI:Vf(t,i)},core:{_removeProperty:da,_getMatrix:$f}};Ye.utils.checkPrefix=io;Ye.core.getStyleSaver=b1;(function(e,t,i,s){var n=He(e+","+t+","+i,function(r){Ls[r]=1});He(t,function(r){ni.units[r]="deg",S1[r]=1}),ts[n[13]]=e+","+t,He(s,function(r){var o=r.split(":");ts[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");He("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){ni.units[e]="px"});Ye.registerPlugin(A1);var Wd=Ye.registerPlugin(A1)||Ye;Wd.core.Tween;function iP(e){let t,i;return{c(){t=J("div"),i=J("canvas"),U(i,"class","svelte-txr5xd"),U(t,"class","board svelte-txr5xd"),Qo(t,"cursor",e[2]?e[1]?"grabbing":"grab":"")},m(s,n){lt(s,t,n),K(t,i),e[4](i)},p(s,n){n[0]&6&&Qo(t,"cursor",s[2]?s[1]?"grabbing":"grab":"")},i:ht,o:ht,d(s){s&&at(t),e[4](null)}}}const hl=600,be=20,sP=.4;function nP(e,t,i){let s,n;ui(e,Ol,z=>i(16,s=z)),ui(e,Er,z=>i(17,n=z));let{mapData:r}=t;const o="https://api.kubel.io";Cs.extend(iy),Cs.extend(ey);let a,l,h,c=r.pieceMap.length;const u=hl/c,d=u/7,f=(hl-be*(c+1))/c;let p=!1,m="",g=!1,_={x:0,y:0},y=r.pieceMap,b={x:0,y:0},v={x:0,y:0},x=null,T={x:0,y:0},S={x:0,y:0},A={x:0,y:0};const M=()=>{const z=h.clientWidth,B=h.clientHeight,H=z/l.view.width,j=B/l.view.height,Y=(H+j)/2;return u*Y},O=z=>{const B=M(),H=h.getBoundingClientRect(),j=H.left,Y=H.top,tt=z.x*B+j,gt=z.y*B+Y;return{x:tt,y:gt}},C=(z,B)=>{let H={x:z,y:B},j=_.x?Math.abs(_.x):Math.abs(_.y);const Y={x:Math.sign(_.x),y:Math.sign(_.y)};for(;j>0;)H.x+=Y.x,H.y+=Y.y,H.x<0&&(H.x=y.length-1),H.x>=y.length&&(H.x=0),H.y<0&&(H.y=y[0].length-1),H.y>=y[0].length&&(H.y=0),y[H.x][H.y]!==null&&j--;return H},k=()=>{const z=y.map(B=>[...B]);for(let B=0;B<c;B++)for(let H=0;H<c;H++){if(y[B][H]===null||x==="x"&&H!==S.y||x==="y"&&B!==S.x)continue;let j=C(B,H);z[j.x][j.y]=y[B][H]}return z},P=(z,B)=>z+(B-z)*sP,w=()=>{const z=k();for(let B=0;B<c;B++)for(let H=0;H<c;H++){if(y[B][H]===null)continue;const j=l.stage.getChildByName(z[B][H].id),Y={x:B*be+B*f+be,y:H*be+H*f+be};j.position.set(P(j.position.x,Y.x),P(j.position.y,Y.y));const tt={x:Y.x-j.position.x,y:Y.y-j.position.y};tt.x!==0&&Math.sign(tt.x)!==T.x||tt.y!==0&&Math.sign(tt.y)!==T.y?j.zIndex=10:(j.scale.set(1),j.zIndex=0)}},E=z=>{for(let B=0;B<c;B++)for(let H=0;H<c;H++)if(y[B][H]!==null&&y[B][H].id===z)return{x:B,y:H};return{x:0,y:0}},L=(z,B,H)=>{let j=[[z,B]],Y=[],tt=0;for(;j.length>0;){let[gt,Et]=j.shift();Y.includes(gt+"-"+Et)||(Y.push(gt+"-"+Et),tt++,gt>0&&y[gt-1][Et]!==null&&y[gt-1][Et].color===H&&j.push([gt-1,Et]),gt<y.length-1&&y[gt+1][Et]!==null&&y[gt+1][Et].color===H&&j.push([gt+1,Et]),Et>0&&y[gt][Et-1]!==null&&y[gt][Et-1].color===H&&j.push([gt,Et-1]),Et<y[0].length-1&&y[gt][Et+1]!==null&&y[gt][Et+1].color===H&&j.push([gt,Et+1]))}return tt},I=z=>{for(let B=0;B<y.length;B++)for(let H=0;H<y[0].length;H++)if(y[B][H]!==null&&y[B][H].color===z)return[B,H];return[0,0]},N=()=>{let z=new Array(a.length).fill(!0);for(let B=0;B<a.length;B++){let[H,j]=I(r.palette[B]);L(H,j,r.palette[B])!==a[B]&&(z[B]=!1)}return rh.set(z),!z.includes(!1)};Xu.subscribe(z=>{if(!z)return;const B=y.map(j=>[...j]);for(let j=0;j<c;j++)for(let Y=0;Y<c;Y++){if(y[j][Y]===null)continue;const tt=y[j][Y].id.split("-").map(ke=>parseInt(ke));B[tt[0]][tt[1]]=y[j][Y];const gt=l.stage.getChildByName(`${j}-${Y}`),Et={x:j*be+j*f+be,y:Y*be+Y*f+be};gt.position.set(Et.x,Et.y)}Er.set(0),Rr.set(!1),nh.set(!0),oh.set(!1),rh.set(new Array(a.length).fill(!1)),Xu.set(!1);const H=JSON.parse(JSON.stringify(r));H.pieceMap=B,y=B.map(j=>[...j]),H.moves=[],localStorage.setItem("dailyData",JSON.stringify(H)),i(2,g=!0)});const F=(z,B)=>{const H=f/2,j=.2;Wd.to(z,{duration:j,borderRadius:H,onUpdate:()=>{z.clear(),z.beginFill(rt(B)),z.drawRoundedRect(0,0,f,f,z.borderRadius);const Y=f*.8,tt=(f-Y)/2,gt=(f-Y)/2;z.beginFill(B),z.drawRoundedRect(tt,gt,Y,Y,z.borderRadius*.8),z.endFill(),z.endFill()}})},D=z=>{if(!g)return;i(1,p=!0);const B=E(z),H=O(B),j=M(),Y=H.x+j/2,tt=H.y+j/2;b.x=Y,b.y=tt,S.x=B.x,S.y=B.y,m=z,Ol.set(y[B.x][B.y].color),F(l.stage.getChildByName(z),y[B.x][B.y].color)},G=z=>{if(!p)return;const B=z.clientX-b.x,H=z.clientY-b.y,j=M(),Y=Math.round(B/j),tt=Math.round(H/j);Y===0&&tt===0&&(x=null),x||(x=Math.abs(B)>Math.abs(H)?"x":"y"),x==="x"?(_.x=Y,_.y=0):(_.x=0,_.y=tt);const gt=Math.floor(B/j),Et=Math.floor(H/j),ke=gt*j+j/2,$e=Et*j+j/2,wi=z.clientX-ke,ds=z.clientY-$e;A={x:wi,y:ds},console.log(A),!(_.x===v.x&&_.y===v.y)&&(T.x=_.x-v.x,T.y=_.y-v.y,v={x:_.x,y:_.y})},W=()=>{let z=localStorage.getItem("userStats"),B;const H=Cs().tz("Etc/GMT-2").format("YYYYMMDD"),j=Cs().tz("Etc/GMT-2").subtract(1,"day").format("YYYYMMDD");z?(B=JSON.parse(z),B.gamesWon++,B.scoreHistory.push(n),B&&B.scoreHistory.length>10&&B.scoreHistory.shift(),(Er<B.dailyHighScore||B.today!==H||!B.dailyHighScore)&&(B.dailyHighScore=n),B.lastWin===j?B.winStreak+=1:B.winStreak=1,B.lastWin!==H?B.dailyHistory=[n]:B.dailyHistory.push(n),B.lastWin=H,localStorage.setItem("userStats",JSON.stringify(B))):localStorage.setItem("userStats",JSON.stringify({gamesWon:1,scoreHistory:[n],winStreak:1,lastWin:H,dailyHighScore:n,dailyHistory:[n]}))},q=(z,B)=>{const H=d,j=.2;Wd.to(z,{duration:j,borderRadius:H,onUpdate:()=>{z.clear(),z.beginFill(rt(B)),z.drawRoundedRect(0,0,f,f,z.borderRadius);const Y=f*.8,tt=(f-Y)/2,gt=(f-Y)/2;z.beginFill(B),z.drawRoundedRect(tt,gt,Y,Y,z.borderRadius*.8),z.endFill(),z.endFill()}})};async function X(z,B){try{const tt=(await(await WE.load()).get()).visitorId;gf.post(o+"/win",{moves:z,iso:B,id:tt})}catch(H){console.log(H)}}const st=()=>{if(!p)return;q(l.stage.getChildByName(m),s),Ol.set(null),y=k().map(B=>[...B]);const z=E(m);if(z.x===S.x&&z.y===S.y)i(2,g=!0);else{const B=JSON.parse(JSON.stringify(r));B.pieceMap=y;const H={offset:_,position:S};let j=JSON.parse(localStorage.getItem("dailyData")).moves;if(j.push(H),B.moves=j,localStorage.setItem("dailyData",JSON.stringify(B)),Er.update(Y=>Y+1),N()){Rr.set(!0),i(2,g=!1);const Y=localStorage.getItem("userCountry"),tt=JSON.parse(localStorage.getItem("userStats"));Y!==null&&Y!=="XX"&&(tt==null||!tt.dailyHistory.includes(j.length))&&X(j,Y),W()}else i(2,g=!0)}i(1,p=!1),b={x:0,y:0},_={x:0,y:0},x=null},ft=()=>{let z=new Array(r.palette.length).fill(0);for(let B=0;B<c;B++)for(let H=0;H<c;H++){if(y[B][H]===null)continue;const j=y[B][H].color,Y=r.palette.indexOf(j);z[Y]=z[Y]+1}return z},rt=z=>{const H=z.replace("#",""),j=parseInt(H.substring(0,2),16),Y=parseInt(H.substring(2,4),16),tt=parseInt(H.substring(4,6),16),gt=Math.min(255,j+10),Et=Math.min(255,Y+10),ke=Math.min(255,tt+10),$e=gt.toString(16).padStart(2,"0"),wi=Et.toString(16).padStart(2,"0"),ds=ke.toString(16).padStart(2,"0");return`#${$e}${wi}${ds}`};oi(()=>{a=ft(),l=new Cf({width:hl,height:hl,view:h,antialias:!0,backgroundAlpha:0}),l.ticker.add(w);for(let z=0;z<c;z++)for(let B=0;B<c;B++){if(y[z][B]===null)continue;const H=new Pa;H.beginFill(rt(y[z][B].color)),H.drawRoundedRect(0,0,f,f,d);const j=f*.8,Y=(f-j)/2,tt=(f-j)/2;H.beginFill(y[z][B].color),H.drawRoundedRect(Y,tt,j,j,d*.8),H.borderRadius=d,H.endFill(),H.hitArea=new xt(-be/2,-be/2,u-be/4,u-be/4),H.position.set(z*be+z*f+be,B*be+B*f+be),H.endFill(),H.name=y[z][B].id,H.eventMode="static",H.on("pointerdown",gt=>{D(H.name)}),l.stage.addChild(H)}l.stage.eventMode="static",window.addEventListener("pointermove",z=>{G(z)}),window.addEventListener("pointerup",z=>{st()}),N()?(nh.set(!1),Rr.set(!0),i(2,g=!1)):i(2,g=!0)});function bt(z){es[z?"unshift":"push"](()=>{h=z,i(0,h)})}return e.$$set=z=>{"mapData"in z&&i(3,r=z.mapData)},[h,p,g,r,bt]}class rP extends ne{constructor(t){super(),se(this,t,nP,iP,Jt,{mapData:3},null,[-1,-1])}}var Da={};(function e(t,i,s,n){var r=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL);function o(){}function a(w){var E=i.exports.Promise,L=E!==void 0?E:t.Promise;return typeof L=="function"?new L(w):(w(o,o),null)}var l=function(){var w=Math.floor(16.666666666666668),E,L,I={},N=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(E=function(F){var D=Math.random();return I[D]=requestAnimationFrame(function G(W){N===W||N+w-1<W?(N=W,delete I[D],F()):I[D]=requestAnimationFrame(G)}),D},L=function(F){I[F]&&cancelAnimationFrame(I[F])}):(E=function(F){return setTimeout(F,w)},L=function(F){return clearTimeout(F)}),{frame:E,cancel:L}}(),h=function(){var w,E,L={};function I(N){function F(D,G){N.postMessage({options:D||{},callback:G})}N.init=function(G){var W=G.transferControlToOffscreen();N.postMessage({canvas:W},[W])},N.fire=function(G,W,q){if(E)return F(G,null),E;var X=Math.random().toString(36).slice(2);return E=a(function(st){function ft(rt){rt.data.callback===X&&(delete L[X],N.removeEventListener("message",ft),E=null,q(),st())}N.addEventListener("message",ft),F(G,X),L[X]=ft.bind(null,{data:{callback:X}})}),E},N.reset=function(){N.postMessage({reset:!0});for(var G in L)L[G](),delete L[G]}}return function(){if(w)return w;if(!s&&r){var N=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{w=new Worker(URL.createObjectURL(new Blob([N])))}catch(F){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",F),null}I(w)}return w}}(),c={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function u(w,E){return E?E(w):w}function d(w){return w!=null}function f(w,E,L){return u(w&&d(w[E])?w[E]:c[E],L)}function p(w){return w<0?0:Math.floor(w)}function m(w,E){return Math.floor(Math.random()*(E-w))+w}function g(w){return parseInt(w,16)}function _(w){return w.map(y)}function y(w){var E=String(w).replace(/[^0-9a-f]/gi,"");return E.length<6&&(E=E[0]+E[0]+E[1]+E[1]+E[2]+E[2]),{r:g(E.substring(0,2)),g:g(E.substring(2,4)),b:g(E.substring(4,6))}}function b(w){var E=f(w,"origin",Object);return E.x=f(E,"x",Number),E.y=f(E,"y",Number),E}function v(w){w.width=document.documentElement.clientWidth,w.height=document.documentElement.clientHeight}function x(w){var E=w.getBoundingClientRect();w.width=E.width,w.height=E.height}function T(w){var E=document.createElement("canvas");return E.style.position="fixed",E.style.top="0px",E.style.left="0px",E.style.pointerEvents="none",E.style.zIndex=w,E}function S(w,E,L,I,N,F,D,G,W){w.save(),w.translate(E,L),w.rotate(F),w.scale(I,N),w.arc(0,0,1,D,G,W),w.restore()}function A(w){var E=w.angle*(Math.PI/180),L=w.spread*(Math.PI/180);return{x:w.x,y:w.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:w.startVelocity*.5+Math.random()*w.startVelocity,angle2D:-E+(.5*L-Math.random()*L),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:w.color,shape:w.shape,tick:0,totalTicks:w.ticks,decay:w.decay,drift:w.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:w.gravity*3,ovalScalar:.6,scalar:w.scalar}}function M(w,E){E.x+=Math.cos(E.angle2D)*E.velocity+E.drift,E.y+=Math.sin(E.angle2D)*E.velocity+E.gravity,E.wobble+=E.wobbleSpeed,E.velocity*=E.decay,E.tiltAngle+=.1,E.tiltSin=Math.sin(E.tiltAngle),E.tiltCos=Math.cos(E.tiltAngle),E.random=Math.random()+2,E.wobbleX=E.x+10*E.scalar*Math.cos(E.wobble),E.wobbleY=E.y+10*E.scalar*Math.sin(E.wobble);var L=E.tick++/E.totalTicks,I=E.x+E.random*E.tiltCos,N=E.y+E.random*E.tiltSin,F=E.wobbleX+E.random*E.tiltCos,D=E.wobbleY+E.random*E.tiltSin;if(w.fillStyle="rgba("+E.color.r+", "+E.color.g+", "+E.color.b+", "+(1-L)+")",w.beginPath(),E.shape==="circle")w.ellipse?w.ellipse(E.x,E.y,Math.abs(F-I)*E.ovalScalar,Math.abs(D-N)*E.ovalScalar,Math.PI/10*E.wobble,0,2*Math.PI):S(w,E.x,E.y,Math.abs(F-I)*E.ovalScalar,Math.abs(D-N)*E.ovalScalar,Math.PI/10*E.wobble,0,2*Math.PI);else if(E.shape==="star")for(var G=Math.PI/2*3,W=4*E.scalar,q=8*E.scalar,X=E.x,st=E.y,ft=5,rt=Math.PI/ft;ft--;)X=E.x+Math.cos(G)*q,st=E.y+Math.sin(G)*q,w.lineTo(X,st),G+=rt,X=E.x+Math.cos(G)*W,st=E.y+Math.sin(G)*W,w.lineTo(X,st),G+=rt;else w.moveTo(Math.floor(E.x),Math.floor(E.y)),w.lineTo(Math.floor(E.wobbleX),Math.floor(N)),w.lineTo(Math.floor(F),Math.floor(D)),w.lineTo(Math.floor(I),Math.floor(E.wobbleY));return w.closePath(),w.fill(),E.tick<E.totalTicks}function O(w,E,L,I,N){var F=E.slice(),D=w.getContext("2d"),G,W,q=a(function(X){function st(){G=W=null,D.clearRect(0,0,I.width,I.height),N(),X()}function ft(){s&&!(I.width===n.width&&I.height===n.height)&&(I.width=w.width=n.width,I.height=w.height=n.height),!I.width&&!I.height&&(L(w),I.width=w.width,I.height=w.height),D.clearRect(0,0,I.width,I.height),F=F.filter(function(rt){return M(D,rt)}),F.length?G=l.frame(ft):st()}G=l.frame(ft),W=st});return{addFettis:function(X){return F=F.concat(X),q},canvas:w,promise:q,reset:function(){G&&l.cancel(G),W&&W()}}}function C(w,E){var L=!w,I=!!f(E||{},"resize"),N=f(E,"disableForReducedMotion",Boolean),F=r&&!!f(E||{},"useWorker"),D=F?h():null,G=L?v:x,W=w&&D?!!w.__confetti_initialized:!1,q=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,X;function st(rt,bt,z){for(var B=f(rt,"particleCount",p),H=f(rt,"angle",Number),j=f(rt,"spread",Number),Y=f(rt,"startVelocity",Number),tt=f(rt,"decay",Number),gt=f(rt,"gravity",Number),Et=f(rt,"drift",Number),ke=f(rt,"colors",_),$e=f(rt,"ticks",Number),wi=f(rt,"shapes"),ds=f(rt,"scalar"),uo=b(rt),nr=B,Dt=[],fs=w.width*uo.x,La=w.height*uo.y;nr--;)Dt.push(A({x:fs,y:La,angle:H,spread:j,startVelocity:Y,color:ke[nr%ke.length],shape:wi[m(0,wi.length)],ticks:$e,decay:tt,gravity:gt,drift:Et,scalar:ds}));return X?X.addFettis(Dt):(X=O(w,Dt,G,bt,z),X.promise)}function ft(rt){var bt=N||f(rt,"disableForReducedMotion",Boolean),z=f(rt,"zIndex",Number);if(bt&&q)return a(function(Y){Y()});L&&X?w=X.canvas:L&&!w&&(w=T(z),document.body.appendChild(w)),I&&!W&&G(w);var B={width:w.width,height:w.height};D&&!W&&D.init(w),W=!0,D&&(w.__confetti_initialized=!0);function H(){if(D){var Y={getBoundingClientRect:function(){if(!L)return w.getBoundingClientRect()}};G(Y),D.postMessage({resize:{width:Y.width,height:Y.height}});return}B.width=B.height=null}function j(){X=null,I&&t.removeEventListener("resize",H),L&&w&&(document.body.removeChild(w),w=null,W=!1)}return I&&t.addEventListener("resize",H,!1),D?D.fire(rt,B,j):st(rt,B,j)}return ft.reset=function(){D&&D.reset(),X&&X.reset()},ft}var k;function P(){return k||(k=C(null,{useWorker:!0,resize:!0})),k}i.exports=function(){return P().apply(this,arguments)},i.exports.reset=function(){P().reset()},i.exports.create=C})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Da,!1);const xu=Da.exports;Da.exports.create;function oP(e){let t,i,s,n,r;return{c(){t=J("div"),i=J("p"),s=Oe(e[4]),U(i,"class","svelte-4j72mv"),U(t,"class",n="counter "+(e[1]&&e[2]?"new-win":"")+" "+(e[2]?"win":"")+" svelte-4j72mv"),U(t,"style",r=e[3]!==null?`box-shadow: 0 0 25px 0 ${e[3]}; border-radius: 50%`:"")},m(o,a){lt(o,t,a),K(t,i),K(i,s),e[5](t)},p(o,[a]){a&16&&si(s,o[4]),a&6&&n!==(n="counter "+(o[1]&&o[2]?"new-win":"")+" "+(o[2]?"win":"")+" svelte-4j72mv")&&U(t,"class",n),a&8&&r!==(r=o[3]!==null?`box-shadow: 0 0 25px 0 ${o[3]}; border-radius: 50%`:"")&&U(t,"style",r)},i:ht,o:ht,d(o){o&&at(t),e[5](null)}}}function aP(e,t,i){let s,n,r,o,a;ui(e,nh,h=>i(1,n=h)),ui(e,Rr,h=>i(2,r=h)),ui(e,Ol,h=>i(3,o=h)),ui(e,Er,h=>i(4,a=h)),oi(()=>{const h=()=>{const u=s.getBoundingClientRect(),d=u.left/window.innerWidth,f=(u.top+u.height)/window.innerHeight,p=(u.left+u.width)/window.innerWidth;xu({particleCount:50,spread:70,startVelocity:20,gravity:.5,scalar:.75,zIndex:-1,angle:135,origin:{x:d,y:f}}),xu({particleCount:50,spread:70,startVelocity:20,gravity:.5,scalar:.75,zIndex:-1,angle:45,origin:{x:p,y:f}})},c=Rr.subscribe(u=>{u&&(n?(h(),setTimeout(()=>{nh.set(!1),oh.set(!0)},1500)):oh.set(!0))});return()=>{c()}}),ao(()=>{xu.reset()});function l(h){es[h?"unshift":"push"](()=>{s=h,i(0,s)})}return i(0,s=null),[s,n,r,o,a,l]}class lP extends ne{constructor(t){super(),se(this,t,aP,oP,Jt,{})}}function hP(e){let t,i,s,n,r;return i=new lP({}),n=new rP({props:{mapData:e[0]}}),{c(){t=J("div"),Qt(i.$$.fragment),s=vt(),Qt(n.$$.fragment),U(t,"class","game-wrapper svelte-1mslmw3")},m(o,a){lt(o,t,a),Yt(i,t,null),K(t,s),Yt(n,t,null),r=!0},p(o,[a]){const l={};a&1&&(l.mapData=o[0]),n.$set(l)},i(o){r||($(i.$$.fragment,o),$(n.$$.fragment,o),r=!0)},o(o){et(i.$$.fragment,o),et(n.$$.fragment,o),r=!1},d(o){o&&at(t),$t(i),$t(n)}}}function cP(e,t,i){let{mapData:s}=t;return oi(()=>{rS.set(s.pieceMap),ny.set(s.palette),Er.set(s.moves.length)}),e.$$set=n=>{"mapData"in n&&i(0,s=n.mapData)},[s]}class uP extends ne{constructor(t){super(),se(this,t,cP,hP,Jt,{mapData:0})}}const C1="/assets/loading-icon-ccea71d8.gif";function dP(e){let t,i,s;return{c(){t=J("div"),i=J("img"),_i(i.src,s=C1)||U(i,"src",s),U(i,"alt","Loading"),U(i,"class","svelte-1fii7bo"),U(t,"class","loading svelte-1fii7bo")},m(n,r){lt(n,t,r),K(t,i)},p:ht,i:ht,o:ht,d(n){n&&at(t)}}}class fP extends ne{constructor(t){super(),se(this,t,null,dP,Jt,{})}}const pP=1/3,Wi=1/6,vu=e=>Math.floor(e)|0,wu=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function mP(e=Math.random){const t=gP(e),i=new Float64Array(t).map(r=>wu[r%12*3]),s=new Float64Array(t).map(r=>wu[r%12*3+1]),n=new Float64Array(t).map(r=>wu[r%12*3+2]);return function(o,a,l){let h,c,u,d;const f=(o+a+l)*pP,p=vu(o+f),m=vu(a+f),g=vu(l+f),_=(p+m+g)*Wi,y=p-_,b=m-_,v=g-_,x=o-y,T=a-b,S=l-v;let A,M,O,C,k,P;x>=T?T>=S?(A=1,M=0,O=0,C=1,k=1,P=0):x>=S?(A=1,M=0,O=0,C=1,k=0,P=1):(A=0,M=0,O=1,C=1,k=0,P=1):T<S?(A=0,M=0,O=1,C=0,k=1,P=1):x<S?(A=0,M=1,O=0,C=0,k=1,P=1):(A=0,M=1,O=0,C=1,k=1,P=0);const w=x-A+Wi,E=T-M+Wi,L=S-O+Wi,I=x-C+2*Wi,N=T-k+2*Wi,F=S-P+2*Wi,D=x-1+3*Wi,G=T-1+3*Wi,W=S-1+3*Wi,q=p&255,X=m&255,st=g&255;let ft=.6-x*x-T*T-S*S;if(ft<0)h=0;else{const B=q+t[X+t[st]];ft*=ft,h=ft*ft*(i[B]*x+s[B]*T+n[B]*S)}let rt=.6-w*w-E*E-L*L;if(rt<0)c=0;else{const B=q+A+t[X+M+t[st+O]];rt*=rt,c=rt*rt*(i[B]*w+s[B]*E+n[B]*L)}let bt=.6-I*I-N*N-F*F;if(bt<0)u=0;else{const B=q+C+t[X+k+t[st+P]];bt*=bt,u=bt*bt*(i[B]*I+s[B]*N+n[B]*F)}let z=.6-D*D-G*G-W*W;if(z<0)d=0;else{const B=q+1+t[X+1+t[st+1]];z*=z,d=z*z*(i[B]*D+s[B]*G+n[B]*W)}return 32*(h+c+u+d)}}function gP(e){const i=new Uint8Array(512);for(let s=0;s<512/2;s++)i[s]=s;for(let s=0;s<512/2-1;s++){const n=s+~~(e()*(256-s)),r=i[s];i[s]=i[n],i[n]=r}for(let s=256;s<512;s++)i[s]=i[s-256];return i}function _P(e){let t,i,s;return{c(){t=J("div"),i=J("canvas"),U(i,"width",e[2]),U(i,"height",e[3]),U(i,"class","svelte-qae6t8"),U(t,"class","container svelte-qae6t8"),U(t,"style",s=e[0]?"filter: blur(20px)":"")},m(n,r){lt(n,t,r),K(t,i),e[4](i)},p(n,[r]){r&4&&U(i,"width",n[2]),r&8&&U(i,"height",n[3]),r&1&&s!==(s=n[0]?"filter: blur(20px)":"")&&U(t,"style",s)},i:ht,o:ht,d(n){n&&at(t),e[4](null)}}}const cl=50,ul=200,yP=5,bP=.6,yg=50,xP=.05,vP=.01,wP=5e-4;function SP(e,t,i){let s,n;ui(e,rh,C=>i(12,s=C)),ui(e,ny,C=>i(13,n=C));const r=mP();let o=!1,a=document.createElement("canvas");const l=a.getContext("2d");let h,c,u,d,f,p,m,g=0;const _=[[5,5,5],[55,55,55],[5,5,5],[50,50,50],[15,15,15],[15,15,15]];let y=[..._.map(C=>[...C])],b=[..._.map(C=>[...C])];const v=C=>{let k=parseInt(C.substring(1,3),16),P=parseInt(C.substring(3,5),16),w=parseInt(C.substring(5,7),16);return[k,P,w]},x=()=>{const C=window.innerWidth,k=window.innerHeight,P=C/k;P>=1?(h=cl,c=Math.floor(cl/P),i(2,f=ul),i(3,p=Math.floor(ul/P))):(h=cl,c=cl,i(2,f=Math.floor(ul*P)),i(3,p=ul))},T=()=>{for(let C=0;C<y.length;C++)for(let k=0;k<y[C].length;k++)b[C][k]=b[C][k]+(y[C][k]-b[C][k])*vP},S=C=>{const k=Math.floor((C+1)/2*b.length),P=Math.min(k,b.length-1);return b[P]},A=()=>{const C=l.createImageData(h,c),k=C.data;for(let P=0;P<h;P++)for(let w=0;w<c;w++){const E=(P+w*h)*4,L=m?[m[E],m[E+1],m[E+2]]:[0,0,0],I=r(P/yg,w/yg,g),N=S(I),F=L.map((D,G)=>D+(N[G]-D)*xP);k[E]=F[0],k[E+1]=F[1],k[E+2]=F[2],k[E+3]=255}m=k,g+=wP,l.putImageData(C,0,0),d.drawImage(a,0,0,h,c,0,0,f,p),d.filter=`blur(${yP}px) brightness(${bP})`},M=()=>{A(),T(),requestAnimationFrame(M)};oi(()=>{const C=window.navigator.userAgent.toLowerCase();C.indexOf("safari")!==-1&&C.indexOf("chrome")===-1&&i(0,o=!0),d=u.getContext("2d"),x(),M(),window.addEventListener("resize",x),rh.subscribe(()=>{if(n&&s){y=n.map(k=>v(k));for(let k=0;k<y.length;k++)s[k]||(y[k]=_[k]);b=b.slice(0,y.length)}else y=[..._.map(k=>[...k])]})});function O(C){es[C?"unshift":"push"](()=>{u=C,i(1,u)})}return[o,u,f,p,O]}class EP extends ne{constructor(t){super(),se(this,t,SP,_P,Jt,{})}}const TP="modulepreload",AP=function(e){return"/"+e},bg={},CP=function(t,i,s){if(!i||i.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(i.map(r=>{if(r=AP(r),r in bg)return;bg[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let c=n.length-1;c>=0;c--){const u=n[c];if(u.href===r&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":TP,o||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),o)return new Promise((c,u)=>{h.addEventListener("load",c),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};var Hr={};const MP=[["AF","AFG","004","ISO 3166-2:AF"],["AL","ALB","008","ISO 3166-2:AL"],["DZ","DZA","012","ISO 3166-2:DZ"],["AS","ASM","016","ISO 3166-2:AS"],["AD","AND","020","ISO 3166-2:AD"],["AO","AGO","024","ISO 3166-2:AO"],["AI","AIA","660","ISO 3166-2:AI"],["AQ","ATA","010","ISO 3166-2:AQ"],["AG","ATG","028","ISO 3166-2:AG"],["AR","ARG","032","ISO 3166-2:AR"],["AM","ARM","051","ISO 3166-2:AM"],["AW","ABW","533","ISO 3166-2:AW"],["AU","AUS","036","ISO 3166-2:AU"],["AT","AUT","040","ISO 3166-2:AT"],["AZ","AZE","031","ISO 3166-2:AZ"],["BS","BHS","044","ISO 3166-2:BS"],["BH","BHR","048","ISO 3166-2:BH"],["BD","BGD","050","ISO 3166-2:BD"],["BB","BRB","052","ISO 3166-2:BB"],["BY","BLR","112","ISO 3166-2:BY"],["BE","BEL","056","ISO 3166-2:BE"],["BZ","BLZ","084","ISO 3166-2:BZ"],["BJ","BEN","204","ISO 3166-2:BJ"],["BM","BMU","060","ISO 3166-2:BM"],["BT","BTN","064","ISO 3166-2:BT"],["BO","BOL","068","ISO 3166-2:BO"],["BA","BIH","070","ISO 3166-2:BA"],["BW","BWA","072","ISO 3166-2:BW"],["BV","BVT","074","ISO 3166-2:BV"],["BR","BRA","076","ISO 3166-2:BR"],["IO","IOT","086","ISO 3166-2:IO"],["BN","BRN","096","ISO 3166-2:BN"],["BG","BGR","100","ISO 3166-2:BG"],["BF","BFA","854","ISO 3166-2:BF"],["BI","BDI","108","ISO 3166-2:BI"],["KH","KHM","116","ISO 3166-2:KH"],["CM","CMR","120","ISO 3166-2:CM"],["CA","CAN","124","ISO 3166-2:CA"],["CV","CPV","132","ISO 3166-2:CV"],["KY","CYM","136","ISO 3166-2:KY"],["CF","CAF","140","ISO 3166-2:CF"],["TD","TCD","148","ISO 3166-2:TD"],["CL","CHL","152","ISO 3166-2:CL"],["CN","CHN","156","ISO 3166-2:CN"],["CX","CXR","162","ISO 3166-2:CX"],["CC","CCK","166","ISO 3166-2:CC"],["CO","COL","170","ISO 3166-2:CO"],["KM","COM","174","ISO 3166-2:KM"],["CG","COG","178","ISO 3166-2:CG"],["CD","COD","180","ISO 3166-2:CD"],["CK","COK","184","ISO 3166-2:CK"],["CR","CRI","188","ISO 3166-2:CR"],["CI","CIV","384","ISO 3166-2:CI"],["HR","HRV","191","ISO 3166-2:HR"],["CU","CUB","192","ISO 3166-2:CU"],["CY","CYP","196","ISO 3166-2:CY"],["CZ","CZE","203","ISO 3166-2:CZ"],["DK","DNK","208","ISO 3166-2:DK"],["DJ","DJI","262","ISO 3166-2:DJ"],["DM","DMA","212","ISO 3166-2:DM"],["DO","DOM","214","ISO 3166-2:DO"],["EC","ECU","218","ISO 3166-2:EC"],["EG","EGY","818","ISO 3166-2:EG"],["SV","SLV","222","ISO 3166-2:SV"],["GQ","GNQ","226","ISO 3166-2:GQ"],["ER","ERI","232","ISO 3166-2:ER"],["EE","EST","233","ISO 3166-2:EE"],["ET","ETH","231","ISO 3166-2:ET"],["FK","FLK","238","ISO 3166-2:FK"],["FO","FRO","234","ISO 3166-2:FO"],["FJ","FJI","242","ISO 3166-2:FJ"],["FI","FIN","246","ISO 3166-2:FI"],["FR","FRA","250","ISO 3166-2:FR"],["GF","GUF","254","ISO 3166-2:GF"],["PF","PYF","258","ISO 3166-2:PF"],["TF","ATF","260","ISO 3166-2:TF"],["GA","GAB","266","ISO 3166-2:GA"],["GM","GMB","270","ISO 3166-2:GM"],["GE","GEO","268","ISO 3166-2:GE"],["DE","DEU","276","ISO 3166-2:DE"],["GH","GHA","288","ISO 3166-2:GH"],["GI","GIB","292","ISO 3166-2:GI"],["GR","GRC","300","ISO 3166-2:GR"],["GL","GRL","304","ISO 3166-2:GL"],["GD","GRD","308","ISO 3166-2:GD"],["GP","GLP","312","ISO 3166-2:GP"],["GU","GUM","316","ISO 3166-2:GU"],["GT","GTM","320","ISO 3166-2:GT"],["GN","GIN","324","ISO 3166-2:GN"],["GW","GNB","624","ISO 3166-2:GW"],["GY","GUY","328","ISO 3166-2:GY"],["HT","HTI","332","ISO 3166-2:HT"],["HM","HMD","334","ISO 3166-2:HM"],["VA","VAT","336","ISO 3166-2:VA"],["HN","HND","340","ISO 3166-2:HN"],["HK","HKG","344","ISO 3166-2:HK"],["HU","HUN","348","ISO 3166-2:HU"],["IS","ISL","352","ISO 3166-2:IS"],["IN","IND","356","ISO 3166-2:IN"],["ID","IDN","360","ISO 3166-2:ID"],["IR","IRN","364","ISO 3166-2:IR"],["IQ","IRQ","368","ISO 3166-2:IQ"],["IE","IRL","372","ISO 3166-2:IE"],["IL","ISR","376","ISO 3166-2:IL"],["IT","ITA","380","ISO 3166-2:IT"],["JM","JAM","388","ISO 3166-2:JM"],["JP","JPN","392","ISO 3166-2:JP"],["JO","JOR","400","ISO 3166-2:JO"],["KZ","KAZ","398","ISO 3166-2:KZ"],["KE","KEN","404","ISO 3166-2:KE"],["KI","KIR","296","ISO 3166-2:KI"],["KP","PRK","408","ISO 3166-2:KP"],["KR","KOR","410","ISO 3166-2:KR"],["KW","KWT","414","ISO 3166-2:KW"],["KG","KGZ","417","ISO 3166-2:KG"],["LA","LAO","418","ISO 3166-2:LA"],["LV","LVA","428","ISO 3166-2:LV"],["LB","LBN","422","ISO 3166-2:LB"],["LS","LSO","426","ISO 3166-2:LS"],["LR","LBR","430","ISO 3166-2:LR"],["LY","LBY","434","ISO 3166-2:LY"],["LI","LIE","438","ISO 3166-2:LI"],["LT","LTU","440","ISO 3166-2:LT"],["LU","LUX","442","ISO 3166-2:LU"],["MO","MAC","446","ISO 3166-2:MO"],["MG","MDG","450","ISO 3166-2:MG"],["MW","MWI","454","ISO 3166-2:MW"],["MY","MYS","458","ISO 3166-2:MY"],["MV","MDV","462","ISO 3166-2:MV"],["ML","MLI","466","ISO 3166-2:ML"],["MT","MLT","470","ISO 3166-2:MT"],["MH","MHL","584","ISO 3166-2:MH"],["MQ","MTQ","474","ISO 3166-2:MQ"],["MR","MRT","478","ISO 3166-2:MR"],["MU","MUS","480","ISO 3166-2:MU"],["YT","MYT","175","ISO 3166-2:YT"],["MX","MEX","484","ISO 3166-2:MX"],["FM","FSM","583","ISO 3166-2:FM"],["MD","MDA","498","ISO 3166-2:MD"],["MC","MCO","492","ISO 3166-2:MC"],["MN","MNG","496","ISO 3166-2:MN"],["MS","MSR","500","ISO 3166-2:MS"],["MA","MAR","504","ISO 3166-2:MA"],["MZ","MOZ","508","ISO 3166-2:MZ"],["MM","MMR","104","ISO 3166-2:MM"],["NA","NAM","516","ISO 3166-2:NA"],["NR","NRU","520","ISO 3166-2:NR"],["NP","NPL","524","ISO 3166-2:NP"],["NL","NLD","528","ISO 3166-2:NL"],["NC","NCL","540","ISO 3166-2:NC"],["NZ","NZL","554","ISO 3166-2:NZ"],["NI","NIC","558","ISO 3166-2:NI"],["NE","NER","562","ISO 3166-2:NE"],["NG","NGA","566","ISO 3166-2:NG"],["NU","NIU","570","ISO 3166-2:NU"],["NF","NFK","574","ISO 3166-2:NF"],["MP","MNP","580","ISO 3166-2:MP"],["MK","MKD","807","ISO 3166-2:MK"],["NO","NOR","578","ISO 3166-2:NO"],["OM","OMN","512","ISO 3166-2:OM"],["PK","PAK","586","ISO 3166-2:PK"],["PW","PLW","585","ISO 3166-2:PW"],["PS","PSE","275","ISO 3166-2:PS"],["PA","PAN","591","ISO 3166-2:PA"],["PG","PNG","598","ISO 3166-2:PG"],["PY","PRY","600","ISO 3166-2:PY"],["PE","PER","604","ISO 3166-2:PE"],["PH","PHL","608","ISO 3166-2:PH"],["PN","PCN","612","ISO 3166-2:PN"],["PL","POL","616","ISO 3166-2:PL"],["PT","PRT","620","ISO 3166-2:PT"],["PR","PRI","630","ISO 3166-2:PR"],["QA","QAT","634","ISO 3166-2:QA"],["RE","REU","638","ISO 3166-2:RE"],["RO","ROU","642","ISO 3166-2:RO"],["RU","RUS","643","ISO 3166-2:RU"],["RW","RWA","646","ISO 3166-2:RW"],["SH","SHN","654","ISO 3166-2:SH"],["KN","KNA","659","ISO 3166-2:KN"],["LC","LCA","662","ISO 3166-2:LC"],["PM","SPM","666","ISO 3166-2:PM"],["VC","VCT","670","ISO 3166-2:VC"],["WS","WSM","882","ISO 3166-2:WS"],["SM","SMR","674","ISO 3166-2:SM"],["ST","STP","678","ISO 3166-2:ST"],["SA","SAU","682","ISO 3166-2:SA"],["SN","SEN","686","ISO 3166-2:SN"],["SC","SYC","690","ISO 3166-2:SC"],["SL","SLE","694","ISO 3166-2:SL"],["SG","SGP","702","ISO 3166-2:SG"],["SK","SVK","703","ISO 3166-2:SK"],["SI","SVN","705","ISO 3166-2:SI"],["SB","SLB","090","ISO 3166-2:SB"],["SO","SOM","706","ISO 3166-2:SO"],["ZA","ZAF","710","ISO 3166-2:ZA"],["GS","SGS","239","ISO 3166-2:GS"],["ES","ESP","724","ISO 3166-2:ES"],["LK","LKA","144","ISO 3166-2:LK"],["SD","SDN","729","ISO 3166-2:SD"],["SR","SUR","740","ISO 3166-2:SR"],["SJ","SJM","744","ISO 3166-2:SJ"],["SZ","SWZ","748","ISO 3166-2:SZ"],["SE","SWE","752","ISO 3166-2:SE"],["CH","CHE","756","ISO 3166-2:CH"],["SY","SYR","760","ISO 3166-2:SY"],["TW","TWN","158","ISO 3166-2:TW"],["TJ","TJK","762","ISO 3166-2:TJ"],["TZ","TZA","834","ISO 3166-2:TZ"],["TH","THA","764","ISO 3166-2:TH"],["TL","TLS","626","ISO 3166-2:TL"],["TG","TGO","768","ISO 3166-2:TG"],["TK","TKL","772","ISO 3166-2:TK"],["TO","TON","776","ISO 3166-2:TO"],["TT","TTO","780","ISO 3166-2:TT"],["TN","TUN","788","ISO 3166-2:TN"],["TR","TUR","792","ISO 3166-2:TR"],["TM","TKM","795","ISO 3166-2:TM"],["TC","TCA","796","ISO 3166-2:TC"],["TV","TUV","798","ISO 3166-2:TV"],["UG","UGA","800","ISO 3166-2:UG"],["UA","UKR","804","ISO 3166-2:UA"],["AE","ARE","784","ISO 3166-2:AE"],["GB","GBR","826","ISO 3166-2:GB"],["US","USA","840","ISO 3166-2:US"],["UM","UMI","581","ISO 3166-2:UM"],["UY","URY","858","ISO 3166-2:UY"],["UZ","UZB","860","ISO 3166-2:UZ"],["VU","VUT","548","ISO 3166-2:VU"],["VE","VEN","862","ISO 3166-2:VE"],["VN","VNM","704","ISO 3166-2:VN"],["VG","VGB","092","ISO 3166-2:VG"],["VI","VIR","850","ISO 3166-2:VI"],["WF","WLF","876","ISO 3166-2:WF"],["EH","ESH","732","ISO 3166-2:EH"],["YE","YEM","887","ISO 3166-2:YE"],["ZM","ZMB","894","ISO 3166-2:ZM"],["ZW","ZWE","716","ISO 3166-2:ZW"],["AX","ALA","248","ISO 3166-2:AX"],["BQ","BES","535","ISO 3166-2:BQ"],["CW","CUW","531","ISO 3166-2:CW"],["GG","GGY","831","ISO 3166-2:GG"],["IM","IMN","833","ISO 3166-2:IM"],["JE","JEY","832","ISO 3166-2:JE"],["ME","MNE","499","ISO 3166-2:ME"],["BL","BLM","652","ISO 3166-2:BL"],["MF","MAF","663","ISO 3166-2:MF"],["RS","SRB","688","ISO 3166-2:RS"],["SX","SXM","534","ISO 3166-2:SX"],["SS","SSD","728","ISO 3166-2:SS"],["XK","XKX","983","ISO 3166-2:XK"]],IP=["br","cy","dv","sw","eu","af","am","ha","ku","ml","no","ps","sd","so","sq","ta","tg","tt","ug","ur","vi","ar","az","be","bg","bn","bs","ca","cs","da","de","el","en","es","et","fa","fi","fr","gl","he","hi","hr","hu","hy","id","is","it","ja","ka","kk","km","ko","ky","lt","lv","mk","mn","mr","ms","nb","nl","nn","pl","pt","ro","ru","sk","sl","sr","sv","th","tr","uk","uz","zh"];var cc={};cc.remove=PP;var Wl=[{base:" ",chars:" "},{base:"0",chars:"߀"},{base:"A",chars:"ⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",chars:"Ꜳ"},{base:"AE",chars:"ÆǼǢ"},{base:"AO",chars:"Ꜵ"},{base:"AU",chars:"Ꜷ"},{base:"AV",chars:"ꜸꜺ"},{base:"AY",chars:"Ꜽ"},{base:"B",chars:"ⒷＢḂḄḆɃƁ"},{base:"C",chars:"ⒸＣꜾḈĆCĈĊČÇƇȻ"},{base:"D",chars:"ⒹＤḊĎḌḐḒḎĐƊƉᴅꝹ"},{base:"Dh",chars:"Ð"},{base:"DZ",chars:"ǱǄ"},{base:"Dz",chars:"ǲǅ"},{base:"E",chars:"ɛⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎᴇ"},{base:"F",chars:"ꝼⒻＦḞƑꝻ"},{base:"G",chars:"ⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾɢ"},{base:"H",chars:"ⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",chars:"ⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",chars:"ⒿＪĴɈȷ"},{base:"K",chars:"ⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",chars:"ⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",chars:"Ǉ"},{base:"Lj",chars:"ǈ"},{base:"M",chars:"ⓂＭḾṀṂⱮƜϻ"},{base:"N",chars:"ꞤȠⓃＮǸŃÑṄŇṆŅṊṈƝꞐᴎ"},{base:"NJ",chars:"Ǌ"},{base:"Nj",chars:"ǋ"},{base:"O",chars:"ⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OE",chars:"Œ"},{base:"OI",chars:"Ƣ"},{base:"OO",chars:"Ꝏ"},{base:"OU",chars:"Ȣ"},{base:"P",chars:"ⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",chars:"ⓆＱꝖꝘɊ"},{base:"R",chars:"ⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",chars:"ⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",chars:"ⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"Th",chars:"Þ"},{base:"TZ",chars:"Ꜩ"},{base:"U",chars:"ⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",chars:"ⓋＶṼṾƲꝞɅ"},{base:"VY",chars:"Ꝡ"},{base:"W",chars:"ⓌＷẀẂŴẆẄẈⱲ"},{base:"X",chars:"ⓍＸẊẌ"},{base:"Y",chars:"ⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",chars:"ⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",chars:"ⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑ"},{base:"aa",chars:"ꜳ"},{base:"ae",chars:"æǽǣ"},{base:"ao",chars:"ꜵ"},{base:"au",chars:"ꜷ"},{base:"av",chars:"ꜹꜻ"},{base:"ay",chars:"ꜽ"},{base:"b",chars:"ⓑｂḃḅḇƀƃɓƂ"},{base:"c",chars:"ｃⓒćĉċčçḉƈȼꜿↄ"},{base:"d",chars:"ⓓｄḋďḍḑḓḏđƌɖɗƋᏧԁꞪ"},{base:"dh",chars:"ð"},{base:"dz",chars:"ǳǆ"},{base:"e",chars:"ⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇǝ"},{base:"f",chars:"ⓕｆḟƒ"},{base:"ff",chars:"ﬀ"},{base:"fi",chars:"ﬁ"},{base:"fl",chars:"ﬂ"},{base:"ffi",chars:"ﬃ"},{base:"ffl",chars:"ﬄ"},{base:"g",chars:"ⓖｇǵĝḡğġǧģǥɠꞡꝿᵹ"},{base:"h",chars:"ⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",chars:"ƕ"},{base:"i",chars:"ⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",chars:"ⓙｊĵǰɉ"},{base:"k",chars:"ⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",chars:"ⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇɭ"},{base:"lj",chars:"ǉ"},{base:"m",chars:"ⓜｍḿṁṃɱɯ"},{base:"n",chars:"ⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥлԉ"},{base:"nj",chars:"ǌ"},{base:"o",chars:"ⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿꝋꝍɵɔᴑ"},{base:"oe",chars:"œ"},{base:"oi",chars:"ƣ"},{base:"oo",chars:"ꝏ"},{base:"ou",chars:"ȣ"},{base:"p",chars:"ⓟｐṕṗƥᵽꝑꝓꝕρ"},{base:"q",chars:"ⓠｑɋꝗꝙ"},{base:"r",chars:"ⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",chars:"ⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛʂ"},{base:"ss",chars:"ß"},{base:"t",chars:"ⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"th",chars:"þ"},{base:"tz",chars:"ꜩ"},{base:"u",chars:"ⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",chars:"ⓥｖṽṿʋꝟʌ"},{base:"vy",chars:"ꝡ"},{base:"w",chars:"ⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",chars:"ⓧｘẋẍ"},{base:"y",chars:"ⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",chars:"ⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Zf={};for(var dl=0;dl<Wl.length;dl+=1)for(var xg=Wl[dl].chars,Su=0;Su<xg.length;Su+=1)Zf[xg[Su]]=Wl[dl].base;function PP(e){return e.replace(/[^\u0000-\u007e]/g,function(t){return Zf[t]||t})}cc.replacementList=Wl;cc.diacriticsMap=Zf;(function(e){const t=MP,i=IP,s=cc.remove,n={},r={},o={},a={},l={};t.forEach(function(x){const T=x;r[T[0]]=T[1],o[T[1]]=T[0],a[T[2]]=T[0],l[T[0]]=T[2]});function h(x){return("000"+(x||"")).slice(-3)}function c(x,T){return Object.prototype.hasOwnProperty.call(x,T)}function u(x,T){return Object.keys(x).reduce(function(S,A){const M=x[A];return S[A]=T(M,A),S},{})}function d(x,T){switch(x){case"official":return Array.isArray(T)?T[0]:T;case"all":return typeof T=="string"?[T]:T;case"alias":return Array.isArray(T)?T[1]||T[0]:T;default:throw new TypeError("LocaleNameType must be one of these: all, official, alias!")}}e.registerLocale=function(x){if(!x.locale)throw new TypeError("Missing localeData.locale");if(!x.countries)throw new TypeError("Missing localeData.countries");n[x.locale]=x.countries};function f(x){return o[x]}e.alpha3ToAlpha2=f;function p(x){return r[x]}e.alpha2ToAlpha3=p;function m(x){return l[f(x)]}e.alpha3ToNumeric=m;function g(x){return l[x]}e.alpha2ToNumeric=g;function _(x){const T=h(x);return p(a[T])}e.numericToAlpha3=_;function y(x){const T=h(x);return a[T]}e.numericToAlpha2=y;function b(x){if(typeof x=="string"){if(/^[0-9]*$/.test(x))return _(x);if(x.length===2)return p(x.toUpperCase());if(x.length===3)return x.toUpperCase()}if(typeof x=="number")return _(x)}e.toAlpha3=b;function v(x){if(typeof x=="string"){if(/^[0-9]*$/.test(x))return y(x);if(x.length===2)return x.toUpperCase();if(x.length===3)return f(x.toUpperCase())}if(typeof x=="number")return y(x)}e.toAlpha2=v,e.getName=function(x,T,S={}){"select"in S||(S.select="official");try{const M=n[T.toLowerCase()][v(x)];return d(S.select,M)}catch{return}},e.getNames=function(x,T={}){"select"in T||(T.select="official");const S=n[x.toLowerCase()];return S===void 0?{}:u(S,function(A){return d(T.select,A)})},e.getAlpha2Code=function(x,T){const S=M=>M.toLowerCase(),A=(M,O)=>S(M)===S(O);try{const M=n[T.toLowerCase()];for(const O in M)if(c(M,O)){if(typeof M[O]=="string"&&A(M[O],x))return O;if(Array.isArray(M[O])){for(const C of M[O])if(A(C,x))return O}}return}catch{return}},e.getSimpleAlpha2Code=function(x,T){const S=M=>s(M.toLowerCase()),A=(M,O)=>S(M)===S(O);try{const M=n[T.toLowerCase()];for(const O in M)if(c(M,O)){if(typeof M[O]=="string"&&A(M[O],x))return O;if(Array.isArray(M[O])){for(const C of M[O])if(A(C,x))return O}}return}catch{return}},e.getAlpha2Codes=function(){return r},e.getAlpha3Code=function(x,T){const S=e.getAlpha2Code(x,T);if(S)return e.toAlpha3(S)},e.getSimpleAlpha3Code=function(x,T){const S=e.getSimpleAlpha2Code(x,T);if(S)return e.toAlpha3(S)},e.getAlpha3Codes=function(){return o},e.getNumericCodes=function(){return a},e.langs=function(){return Object.keys(n)},e.getSupportedLanguages=function(){return i},e.isValid=function(x){if(!x)return!1;const T=x.toString().toUpperCase();return c(o,T)||c(r,T)||c(a,T)}})(Hr);function uc(e){return e.split("-")[1]}function M1(e){return e==="y"?"height":"width"}function zn(e){return e.split("-")[0]}function dc(e){return["top","bottom"].includes(zn(e))?"x":"y"}function vg(e,t,i){let{reference:s,floating:n}=e;const r=s.x+s.width/2-n.width/2,o=s.y+s.height/2-n.height/2,a=dc(t),l=M1(a),h=s[l]/2-n[l]/2,c=a==="x";let u;switch(zn(t)){case"top":u={x:r,y:s.y-n.height};break;case"bottom":u={x:r,y:s.y+s.height};break;case"right":u={x:s.x+s.width,y:o};break;case"left":u={x:s.x-n.width,y:o};break;default:u={x:s.x,y:s.y}}switch(uc(t)){case"start":u[a]-=h*(i&&c?-1:1);break;case"end":u[a]+=h*(i&&c?-1:1)}return u}const RP=async(e,t,i)=>{const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o}=i,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:n}),{x:c,y:u}=vg(h,s,l),d=s,f={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:_}=a[m],{x:y,y:b,data:v,reset:x}=await _({x:c,y:u,initialPlacement:s,placement:d,strategy:n,middlewareData:f,rects:h,platform:o,elements:{reference:e,floating:t}});c=y??c,u=b??u,f={...f,[g]:{...f[g],...v}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(h=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:n}):x.rects),{x:c,y:u}=vg(h,d,l)),m=-1)}return{x:c,y:u,placement:d,strategy:n,middlewareData:f}};function DP(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Mh(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function I1(e,t){var i;t===void 0&&(t={});const{x:s,y:n,platform:r,rects:o,elements:a,strategy:l}=e,{boundary:h="clippingAncestors",rootBoundary:c="viewport",elementContext:u="floating",altBoundary:d=!1,padding:f=0}=t,p=DP(f),m=a[d?u==="floating"?"reference":"floating":u],g=Mh(await r.getClippingRect({element:(i=await(r.isElement==null?void 0:r.isElement(m)))==null||i?m:m.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:h,rootBoundary:c,strategy:l})),_=u==="floating"?{...o.floating,x:s,y:n}:o.reference,y=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),b=await(r.isElement==null?void 0:r.isElement(y))&&await(r.getScale==null?void 0:r.getScale(y))||{x:1,y:1},v=Mh(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:y,strategy:l}):_);return{top:(g.top-v.top+p.top)/b.y,bottom:(v.bottom-g.bottom+p.bottom)/b.y,left:(g.left-v.left+p.left)/b.x,right:(v.right-g.right+p.right)/b.x}}const OP=Math.min,kP=Math.max;function wg(e,t,i){return kP(e,OP(t,i))}const FP=["top","right","bottom","left"];FP.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const LP={left:"right",right:"left",bottom:"top",top:"bottom"};function Ih(e){return e.replace(/left|right|bottom|top/g,t=>LP[t])}function BP(e,t,i){i===void 0&&(i=!1);const s=uc(e),n=dc(e),r=M1(n);let o=n==="x"?s===(i?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=Ih(o)),{main:o,cross:Ih(o)}}const NP={start:"end",end:"start"};function Eu(e){return e.replace(/start|end/g,t=>NP[t])}const UP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:s,middlewareData:n,rects:r,initialPlacement:o,platform:a,elements:l}=t,{mainAxis:h=!0,crossAxis:c=!0,fallbackPlacements:u,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...m}=e,g=zn(s),_=zn(o)===o,y=await(a.isRTL==null?void 0:a.isRTL(l.floating)),b=u||(_||!p?[Ih(o)]:function(C){const k=Ih(C);return[Eu(C),k,Eu(k)]}(o));u||f==="none"||b.push(...function(C,k,P,w){const E=uc(C);let L=function(I,N,F){const D=["left","right"],G=["right","left"],W=["top","bottom"],q=["bottom","top"];switch(I){case"top":case"bottom":return F?N?G:D:N?D:G;case"left":case"right":return N?W:q;default:return[]}}(zn(C),P==="start",w);return E&&(L=L.map(I=>I+"-"+E),k&&(L=L.concat(L.map(Eu)))),L}(o,p,f,y));const v=[o,...b],x=await I1(t,m),T=[];let S=((i=n.flip)==null?void 0:i.overflows)||[];if(h&&T.push(x[g]),c){const{main:C,cross:k}=BP(s,r,y);T.push(x[C],x[k])}if(S=[...S,{placement:s,overflows:T}],!T.every(C=>C<=0)){var A,M;const C=(((A=n.flip)==null?void 0:A.index)||0)+1,k=v[C];if(k)return{data:{index:C,overflows:S},reset:{placement:k}};let P=(M=S.filter(w=>w.overflows[0]<=0).sort((w,E)=>w.overflows[1]-E.overflows[1])[0])==null?void 0:M.placement;if(!P)switch(d){case"bestFit":{var O;const w=(O=S.map(E=>[E.placement,E.overflows.filter(L=>L>0).reduce((L,I)=>L+I,0)]).sort((E,L)=>E[1]-L[1])[0])==null?void 0:O[0];w&&(P=w);break}case"initialPlacement":P=o}if(s!==P)return{reset:{placement:P}}}return{}}}},GP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:s}=t,n=await async function(r,o){const{placement:a,platform:l,elements:h}=r,c=await(l.isRTL==null?void 0:l.isRTL(h.floating)),u=zn(a),d=uc(a),f=dc(a)==="x",p=["left","top"].includes(u)?-1:1,m=c&&f?-1:1,g=typeof o=="function"?o(r):o;let{mainAxis:_,crossAxis:y,alignmentAxis:b}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return d&&typeof b=="number"&&(y=d==="end"?-1*b:b),f?{x:y*m,y:_*p}:{x:_*p,y:y*m}}(t,e);return{x:i+n.x,y:s+n.y,data:n}}}};function HP(e){return e==="x"?"y":"x"}const zP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:s,placement:n}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:_,y}=g;return{x:_,y}}},...l}=e,h={x:i,y:s},c=await I1(t,l),u=dc(zn(n)),d=HP(u);let f=h[u],p=h[d];if(r){const g=u==="y"?"bottom":"right";f=wg(f+c[u==="y"?"top":"left"],f,f-c[g])}if(o){const g=d==="y"?"bottom":"right";p=wg(p+c[d==="y"?"top":"left"],p,p-c[g])}const m=a.fn({...t,[u]:f,[d]:p});return{...m,data:{x:m.x-i,y:m.y-s}}}}};function ii(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function rs(e){return ii(e).getComputedStyle(e)}function P1(e){return e instanceof ii(e).Node}function fn(e){return P1(e)?(e.nodeName||"").toLowerCase():""}let fl;function R1(){if(fl)return fl;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(fl=e.brands.map(t=>t.brand+"/"+t.version).join(" "),fl):navigator.userAgent}function Hi(e){return e instanceof ii(e).HTMLElement}function Ui(e){return e instanceof ii(e).Element}function Sg(e){return typeof ShadowRoot>"u"?!1:e instanceof ii(e).ShadowRoot||e instanceof ShadowRoot}function fc(e){const{overflow:t,overflowX:i,overflowY:s,display:n}=rs(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+i)&&!["inline","contents"].includes(n)}function VP(e){return["table","td","th"].includes(fn(e))}function jd(e){const t=/firefox/i.test(R1()),i=rs(e),s=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||!!s&&s!=="none"||t&&i.willChange==="filter"||t&&!!i.filter&&i.filter!=="none"||["transform","perspective"].some(n=>i.willChange.includes(n))||["paint","layout","strict","content"].some(n=>{const r=i.contain;return r!=null&&r.includes(n)})}function Xd(){return/^((?!chrome|android).)*safari/i.test(R1())}function Kf(e){return["html","body","#document"].includes(fn(e))}const Eg=Math.min,jo=Math.max,Ph=Math.round;function D1(e){const t=rs(e);let i=parseFloat(t.width),s=parseFloat(t.height);const n=Hi(e),r=n?e.offsetWidth:i,o=n?e.offsetHeight:s,a=Ph(i)!==r||Ph(s)!==o;return a&&(i=r,s=o),{width:i,height:s,fallback:a}}function O1(e){return Ui(e)?e:e.contextElement}const k1={x:1,y:1};function zr(e){const t=O1(e);if(!Hi(t))return k1;const i=t.getBoundingClientRect(),{width:s,height:n,fallback:r}=D1(t);let o=(r?Ph(i.width):i.width)/s,a=(r?Ph(i.height):i.height)/n;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function Kn(e,t,i,s){var n,r;t===void 0&&(t=!1),i===void 0&&(i=!1);const o=e.getBoundingClientRect(),a=O1(e);let l=k1;t&&(s?Ui(s)&&(l=zr(s)):l=zr(e));const h=a?ii(a):window,c=Xd()&&i;let u=(o.left+(c&&((n=h.visualViewport)==null?void 0:n.offsetLeft)||0))/l.x,d=(o.top+(c&&((r=h.visualViewport)==null?void 0:r.offsetTop)||0))/l.y,f=o.width/l.x,p=o.height/l.y;if(a){const m=ii(a),g=s&&Ui(s)?ii(s):s;let _=m.frameElement;for(;_&&s&&g!==m;){const y=zr(_),b=_.getBoundingClientRect(),v=getComputedStyle(_);b.x+=(_.clientLeft+parseFloat(v.paddingLeft))*y.x,b.y+=(_.clientTop+parseFloat(v.paddingTop))*y.y,u*=y.x,d*=y.y,f*=y.x,p*=y.y,u+=b.x,d+=b.y,_=ii(_).frameElement}}return Mh({width:f,height:p,x:u,y:d})}function nn(e){return((P1(e)?e.ownerDocument:e.document)||window.document).documentElement}function pc(e){return Ui(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function F1(e){return Kn(nn(e)).left+pc(e).scrollLeft}function ma(e){if(fn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Sg(e)&&e.host||nn(e);return Sg(t)?t.host:t}function L1(e){const t=ma(e);return Kf(t)?t.ownerDocument.body:Hi(t)&&fc(t)?t:L1(t)}function Xo(e,t){var i;t===void 0&&(t=[]);const s=L1(e),n=s===((i=e.ownerDocument)==null?void 0:i.body),r=ii(s);return n?t.concat(r,r.visualViewport||[],fc(s)?s:[]):t.concat(s,Xo(s))}function Tg(e,t,i){let s;if(t==="viewport")s=function(o,a){const l=ii(o),h=nn(o),c=l.visualViewport;let u=h.clientWidth,d=h.clientHeight,f=0,p=0;if(c){u=c.width,d=c.height;const m=Xd();(!m||m&&a==="fixed")&&(f=c.offsetLeft,p=c.offsetTop)}return{width:u,height:d,x:f,y:p}}(e,i);else if(t==="document")s=function(o){const a=nn(o),l=pc(o),h=o.ownerDocument.body,c=jo(a.scrollWidth,a.clientWidth,h.scrollWidth,h.clientWidth),u=jo(a.scrollHeight,a.clientHeight,h.scrollHeight,h.clientHeight);let d=-l.scrollLeft+F1(o);const f=-l.scrollTop;return rs(h).direction==="rtl"&&(d+=jo(a.clientWidth,h.clientWidth)-c),{width:c,height:u,x:d,y:f}}(nn(e));else if(Ui(t))s=function(o,a){const l=Kn(o,!0,a==="fixed"),h=l.top+o.clientTop,c=l.left+o.clientLeft,u=Hi(o)?zr(o):{x:1,y:1};return{width:o.clientWidth*u.x,height:o.clientHeight*u.y,x:c*u.x,y:h*u.y}}(t,i);else{const o={...t};if(Xd()){var n,r;const a=ii(e);o.x-=((n=a.visualViewport)==null?void 0:n.offsetLeft)||0,o.y-=((r=a.visualViewport)==null?void 0:r.offsetTop)||0}s=o}return Mh(s)}function Ag(e,t){return Hi(e)&&rs(e).position!=="fixed"?t?t(e):e.offsetParent:null}function Cg(e,t){const i=ii(e);if(!Hi(e))return i;let s=Ag(e,t);for(;s&&VP(s)&&rs(s).position==="static";)s=Ag(s,t);return s&&(fn(s)==="html"||fn(s)==="body"&&rs(s).position==="static"&&!jd(s))?i:s||function(n){let r=ma(n);for(;Hi(r)&&!Kf(r);){if(jd(r))return r;r=ma(r)}return null}(e)||i}function WP(e,t,i){const s=Hi(t),n=nn(t),r=Kn(e,!0,i==="fixed",t);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(s||!s&&i!=="fixed")if((fn(t)!=="body"||fc(n))&&(o=pc(t)),Hi(t)){const l=Kn(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else n&&(a.x=F1(n));return{x:r.left+o.scrollLeft-a.x,y:r.top+o.scrollTop-a.y,width:r.width,height:r.height}}const jP={getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:s,strategy:n}=e;const r=i==="clippingAncestors"?function(h,c){const u=c.get(h);if(u)return u;let d=Xo(h).filter(g=>Ui(g)&&fn(g)!=="body"),f=null;const p=rs(h).position==="fixed";let m=p?ma(h):h;for(;Ui(m)&&!Kf(m);){const g=rs(m),_=jd(m);g.position==="fixed"&&(f=null),(p?_||f:_||g.position!=="static"||!f||!["absolute","fixed"].includes(f.position))?f=g:d=d.filter(y=>y!==m),m=ma(m)}return c.set(h,d),d}(t,this._c):[].concat(i),o=[...r,s],a=o[0],l=o.reduce((h,c)=>{const u=Tg(t,c,n);return h.top=jo(u.top,h.top),h.right=Eg(u.right,h.right),h.bottom=Eg(u.bottom,h.bottom),h.left=jo(u.left,h.left),h},Tg(t,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:i,strategy:s}=e;const n=Hi(i),r=nn(i);if(i===r)return t;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((n||!n&&s!=="fixed")&&((fn(i)!=="body"||fc(r))&&(o=pc(i)),Hi(i))){const h=Kn(i);a=zr(i),l.x=h.x+i.clientLeft,l.y=h.y+i.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+l.x,y:t.y*a.y-o.scrollTop*a.y+l.y}},isElement:Ui,getDimensions:function(e){return D1(e)},getOffsetParent:Cg,getDocumentElement:nn,getScale:zr,async getElementRects(e){let{reference:t,floating:i,strategy:s}=e;const n=this.getOffsetParent||Cg,r=this.getDimensions;return{reference:WP(t,await n(i),s),floating:{x:0,y:0,...await r(i)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>rs(e).direction==="rtl"};function XP(e,t,i,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:o=!0,animationFrame:a=!1}=s,l=n&&!a,h=l||r?[...Ui(e)?Xo(e):e.contextElement?Xo(e.contextElement):[],...Xo(t)]:[];h.forEach(f=>{l&&f.addEventListener("scroll",i,{passive:!0}),r&&f.addEventListener("resize",i)});let c,u=null;o&&(u=new ResizeObserver(()=>{i()}),Ui(e)&&!a&&u.observe(e),Ui(e)||!e.contextElement||a||u.observe(e.contextElement),u.observe(t));let d=a?Kn(e):null;return a&&function f(){const p=Kn(e);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||i(),d=p,c=requestAnimationFrame(f)}(),i(),()=>{var f;h.forEach(p=>{l&&p.removeEventListener("scroll",i),r&&p.removeEventListener("resize",i)}),(f=u)==null||f.disconnect(),u=null,a&&cancelAnimationFrame(c)}}const YP=(e,t,i)=>{const s=new Map,n={platform:jP,...i},r={...n.platform,_c:s};return RP(e,t,{...n,platform:r})};function $P(e){let t,i;const s={autoUpdate:!0};let n=e;const r=c=>({...s,...e||{},...c||{}}),o=c=>{t&&i&&(n=r(c),YP(t,i,n).then(u=>{Object.assign(i.style,{position:u.strategy,left:`${u.x}px`,top:`${u.y}px`}),n!=null&&n.onComputed&&n.onComputed(u)}))},a=c=>{if("subscribe"in c)return h(c),{};t=c,o()},l=(c,u)=>{let d;i=c,n=r(u),setTimeout(()=>o(u),0),o(u);const f=()=>{d&&(d(),d=void 0)},p=({autoUpdate:m}=n||{})=>{if(f(),m!==!1)return XP(t,i,()=>o(n),m===!0?{}:m)};return d=p(),{update(m){o(m),d=p(m)},destroy(){f()}}},h=c=>{const u=c.subscribe(d=>{t===void 0?(t=d,o()):(Object.assign(t,d),o())});ao(u)};return[a,l,o]}function ZP({loadOptions:e,filterText:t,items:i,multiple:s,value:n,itemId:r,groupBy:o,filterSelectedItems:a,itemFilter:l,convertStringItemsToObjects:h,filterGroupedItems:c,label:u}){if(i&&e)return i;if(!i)return[];i&&i.length>0&&typeof i[0]!="object"&&(i=h(i));let d=i.filter(f=>{let p=l(f[u],t,f);return p&&s&&(n!=null&&n.length)&&(p=!n.some(m=>a?m[r]===f[r]:!1)),p});return o&&(d=c(d)),d}async function KP({dispatch:e,loadOptions:t,convertStringItemsToObjects:i,filterText:s}){let n=await t(s).catch(r=>{console.warn("svelte-select loadOptions error :>> ",r),e("error",{type:"loadOptions",details:r})});if(n&&!n.cancelled)return n?(n&&n.length>0&&typeof n[0]!="object"&&(n=i(n)),e("loaded",{items:n})):n=[],{filteredItems:n,loading:!1,focused:!0,listOpen:!0}}function qP(e){let t,i;return{c(){t=Wr("svg"),i=Wr("path"),U(i,"fill","currentColor"),U(i,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),U(t,"width","100%"),U(t,"height","100%"),U(t,"viewBox","0 0 20 20"),U(t,"focusable","false"),U(t,"aria-hidden","true"),U(t,"class","svelte-qbd276")},m(s,n){lt(s,t,n),K(t,i)},p:ht,i:ht,o:ht,d(s){s&&at(t)}}}class JP extends ne{constructor(t){super(),se(this,t,null,qP,Jt,{})}}function QP(e){let t,i;return{c(){t=Wr("svg"),i=Wr("path"),U(i,"fill","currentColor"),U(i,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),U(t,"width","100%"),U(t,"height","100%"),U(t,"viewBox","-2 -2 50 50"),U(t,"focusable","false"),U(t,"aria-hidden","true"),U(t,"role","presentation"),U(t,"class","svelte-whdbu1")},m(s,n){lt(s,t,n),K(t,i)},p:ht,i:ht,o:ht,d(s){s&&at(t)}}}class Rh extends ne{constructor(t){super(),se(this,t,null,QP,Jt,{})}}function tR(e){let t,i;return{c(){t=Wr("svg"),i=Wr("circle"),U(i,"class","circle_path svelte-1p3nqvd"),U(i,"cx","50"),U(i,"cy","50"),U(i,"r","20"),U(i,"fill","none"),U(i,"stroke","currentColor"),U(i,"stroke-width","5"),U(i,"stroke-miterlimit","10"),U(t,"class","loading svelte-1p3nqvd"),U(t,"viewBox","25 25 50 50")},m(s,n){lt(s,t,n),K(t,i)},p:ht,i:ht,o:ht,d(s){s&&at(t)}}}class eR extends ne{constructor(t){super(),se(this,t,null,tR,Jt,{})}}const iR=e=>({value:e[0]&8}),Mg=e=>({value:e[3]}),sR=e=>({value:e[0]&8}),Ig=e=>({value:e[3]}),nR=e=>({listOpen:e[0]&64}),Pg=e=>({listOpen:e[6]}),rR=e=>({}),Rg=e=>({}),oR=e=>({}),Dg=e=>({}),aR=e=>({selection:e[0]&8}),Og=e=>({selection:e[3]});function kg(e,t,i){const s=e.slice();return s[125]=t[i],s[127]=i,s}const lR=e=>({}),Fg=e=>({}),hR=e=>({selection:e[0]&8}),Lg=e=>({selection:e[125],index:e[127]}),cR=e=>({}),Bg=e=>({}),uR=e=>({}),Ng=e=>({}),dR=e=>({}),Ug=e=>({});function Gg(e,t,i){const s=e.slice();return s[125]=t[i],s[127]=i,s}const fR=e=>({item:e[0]&16777216}),Hg=e=>({item:e[125],index:e[127]}),pR=e=>({filteredItems:e[0]&16777216}),zg=e=>({filteredItems:e[24]}),mR=e=>({}),Vg=e=>({});function Wg(e){let t,i,s,n,r,o,a,l,h=e[50]["list-prepend"]&&jg(e);const c=[yR,_R,gR],u=[];function d(p,m){return p[50].list?0:p[24].length>0?1:p[19]?-1:2}~(s=d(e))&&(n=u[s]=c[s](e));let f=e[50]["list-append"]&&Yg(e);return{c(){t=J("div"),h&&h.c(),i=vt(),n&&n.c(),r=vt(),f&&f.c(),U(t,"class","svelte-select-list svelte-apvs86"),At(t,"prefloat",e[28])},m(p,m){lt(p,t,m),h&&h.m(t,null),K(t,i),~s&&u[s].m(t,null),K(t,r),f&&f.m(t,null),e[90](t),o=!0,a||(l=[eh(e[49].call(null,t)),Bt(t,"scroll",e[41]),Bt(t,"pointerup",jr(on(e[85])))],a=!0)},p(p,m){p[50]["list-prepend"]?h?(h.p(p,m),m[1]&524288&&$(h,1)):(h=jg(p),h.c(),$(h,1),h.m(t,i)):h&&(me(),et(h,1,1,()=>{h=null}),ge());let g=s;s=d(p),s===g?~s&&u[s].p(p,m):(n&&(me(),et(u[g],1,1,()=>{u[g]=null}),ge()),~s?(n=u[s],n?n.p(p,m):(n=u[s]=c[s](p),n.c()),$(n,1),n.m(t,r)):n=null),p[50]["list-append"]?f?(f.p(p,m),m[1]&524288&&$(f,1)):(f=Yg(p),f.c(),$(f,1),f.m(t,null)):f&&(me(),et(f,1,1,()=>{f=null}),ge()),(!o||m[0]&268435456)&&At(t,"prefloat",p[28])},i(p){o||($(h),$(n),$(f),o=!0)},o(p){et(h),et(n),et(f),o=!1},d(p){p&&at(t),h&&h.d(),~s&&u[s].d(),f&&f.d(),e[90](null),a=!1,cs(l)}}}function jg(e){let t;const i=e[82]["list-prepend"],s=Ve(i,e,e[81],Vg);return{c(){s&&s.c()},m(n,r){s&&s.m(n,r),t=!0},p(n,r){s&&s.p&&(!t||r[2]&524288)&&je(s,i,n,n[81],t?We(i,n[81],r,mR):Xe(n[81]),Vg)},i(n){t||($(s,n),t=!0)},o(n){et(s,n),t=!1},d(n){s&&s.d(n)}}}function gR(e){let t;const i=e[82].empty,s=Ve(i,e,e[81],Ug),n=s||bR();return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),t=!0},p(r,o){s&&s.p&&(!t||o[2]&524288)&&je(s,i,r,r[81],t?We(i,r[81],o,dR):Xe(r[81]),Ug)},i(r){t||($(n,r),t=!0)},o(r){et(n,r),t=!1},d(r){n&&n.d(r)}}}function _R(e){let t,i,s=e[24],n=[];for(let o=0;o<s.length;o+=1)n[o]=Xg(Gg(e,s,o));const r=o=>et(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=oo()},m(o,a){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(o,a);lt(o,t,a),i=!0},p(o,a){if(a[0]&1627402376|a[1]&28672|a[2]&524288){s=o[24];let l;for(l=0;l<s.length;l+=1){const h=Gg(o,s,l);n[l]?(n[l].p(h,a),$(n[l],1)):(n[l]=Xg(h),n[l].c(),$(n[l],1),n[l].m(t.parentNode,t))}for(me(),l=s.length;l<n.length;l+=1)r(l);ge()}},i(o){if(!i){for(let a=0;a<s.length;a+=1)$(n[a]);i=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)et(n[a]);i=!1},d(o){Hh(n,o),o&&at(t)}}}function yR(e){let t;const i=e[82].list,s=Ve(i,e,e[81],zg);return{c(){s&&s.c()},m(n,r){s&&s.m(n,r),t=!0},p(n,r){s&&s.p&&(!t||r[0]&16777216|r[2]&524288)&&je(s,i,n,n[81],t?We(i,n[81],r,pR):Xe(n[81]),zg)},i(n){t||($(s,n),t=!0)},o(n){et(s,n),t=!1},d(n){s&&s.d(n)}}}function bR(e){let t;return{c(){t=J("div"),t.textContent="No options",U(t,"class","empty svelte-apvs86")},m(i,s){lt(i,t,s)},p:ht,d(i){i&&at(t)}}}function xR(e){var s;let t=((s=e[125])==null?void 0:s[e[12]])+"",i;return{c(){i=Oe(t)},m(n,r){lt(n,i,r)},p(n,r){var o;r[0]&16781312&&t!==(t=((o=n[125])==null?void 0:o[n[12]])+"")&&si(i,t)},d(n){n&&at(i)}}}function Xg(e){let t,i,s,n,r,o,a,l;const h=e[82].item,c=Ve(h,e,e[81],Hg),u=c||xR(e);function d(){return e[87](e[127])}function f(){return e[88](e[127])}function p(){return e[89](e[125],e[127])}return{c(){var m;t=J("div"),i=J("div"),u&&u.c(),r=vt(),U(i,"class","item svelte-apvs86"),At(i,"list-group-title",e[125].groupHeader),At(i,"active",e[45](e[125],e[3],e[13])),At(i,"first",DR(e[127])),At(i,"hover",e[7]===e[127]),At(i,"group-item",e[125].groupItem),At(i,"not-selectable",((m=e[125])==null?void 0:m.selectable)===!1),U(t,"class","list-item svelte-apvs86"),U(t,"tabindex","-1")},m(m,g){lt(m,t,g),K(t,i),u&&u.m(i,null),K(t,r),o=!0,a||(l=[eh(s=e[46].call(null,i,{scroll:e[45](e[125],e[3],e[13]),listDom:e[30]})),eh(n=e[47].call(null,i,{scroll:e[29]===e[127],listDom:e[30]})),Bt(t,"mouseover",d),Bt(t,"focus",f),Bt(t,"click",jr(p)),Bt(t,"keydown",jr(on(e[86])))],a=!0)},p(m,g){var _;e=m,c?c.p&&(!o||g[0]&16777216|g[2]&524288)&&je(c,h,e,e[81],o?We(h,e[81],g,fR):Xe(e[81]),Hg):u&&u.p&&(!o||g[0]&16781312)&&u.p(e,o?g:[-1,-1,-1,-1,-1]),s&&Jo(s.update)&&g[0]&1090527240&&s.update.call(null,{scroll:e[45](e[125],e[3],e[13]),listDom:e[30]}),n&&Jo(n.update)&&g[0]&1610612736&&n.update.call(null,{scroll:e[29]===e[127],listDom:e[30]}),(!o||g[0]&16777216)&&At(i,"list-group-title",e[125].groupHeader),(!o||g[0]&16785416|g[1]&16384)&&At(i,"active",e[45](e[125],e[3],e[13])),(!o||g[0]&128)&&At(i,"hover",e[7]===e[127]),(!o||g[0]&16777216)&&At(i,"group-item",e[125].groupItem),(!o||g[0]&16777216)&&At(i,"not-selectable",((_=e[125])==null?void 0:_.selectable)===!1)},i(m){o||($(u,m),o=!0)},o(m){et(u,m),o=!1},d(m){m&&at(t),u&&u.d(m),a=!1,cs(l)}}}function Yg(e){let t;const i=e[82]["list-append"],s=Ve(i,e,e[81],Ng);return{c(){s&&s.c()},m(n,r){s&&s.m(n,r),t=!0},p(n,r){s&&s.p&&(!t||r[2]&524288)&&je(s,i,n,n[81],t?We(i,n[81],r,uR):Xe(n[81]),Ng)},i(n){t||($(s,n),t=!0)},o(n){et(s,n),t=!1},d(n){s&&s.d(n)}}}function $g(e){let t,i,s,n,r;return{c(){t=J("span"),i=Oe(e[32]),s=vt(),n=J("span"),r=Oe(e[31]),U(t,"id","aria-selection"),U(t,"class","svelte-apvs86"),U(n,"id","aria-context"),U(n,"class","svelte-apvs86")},m(o,a){lt(o,t,a),K(t,i),lt(o,s,a),lt(o,n,a),K(n,r)},p(o,a){a[1]&2&&si(i,o[32]),a[1]&1&&si(r,o[31])},d(o){o&&at(t),o&&at(s),o&&at(n)}}}function Zg(e){let t,i,s,n;const r=[wR,vR],o=[];function a(l,h){return l[9]?0:1}return t=a(e),i=o[t]=r[t](e),{c(){i.c(),s=oo()},m(l,h){o[t].m(l,h),lt(l,s,h),n=!0},p(l,h){let c=t;t=a(l),t===c?o[t].p(l,h):(me(),et(o[c],1,1,()=>{o[c]=null}),ge(),i=o[t],i?i.p(l,h):(i=o[t]=r[t](l),i.c()),$(i,1),i.m(s.parentNode,s))},i(l){n||($(i),n=!0)},o(l){et(i),n=!1},d(l){o[t].d(l),l&&at(s)}}}function vR(e){let t,i;const s=e[82].selection,n=Ve(s,e,e[81],Og),r=n||SR(e);return{c(){t=J("div"),r&&r.c(),U(t,"class","selected-item svelte-apvs86"),At(t,"hide-selected-item",e[35])},m(o,a){lt(o,t,a),r&&r.m(t,null),i=!0},p(o,a){n?n.p&&(!i||a[0]&8|a[2]&524288)&&je(n,s,o,o[81],i?We(s,o[81],a,aR):Xe(o[81]),Og):r&&r.p&&(!i||a[0]&4104)&&r.p(o,i?a:[-1,-1,-1,-1,-1]),(!i||a[1]&16)&&At(t,"hide-selected-item",o[35])},i(o){i||($(r,o),i=!0)},o(o){et(r,o),i=!1},d(o){o&&at(t),r&&r.d(o)}}}function wR(e){let t,i,s=e[3],n=[];for(let o=0;o<s.length;o+=1)n[o]=qg(kg(e,s,o));const r=o=>et(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=oo()},m(o,a){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(o,a);lt(o,t,a),i=!0},p(o,a){if(a[0]&67116040|a[1]&32|a[2]&524288){s=o[3];let l;for(l=0;l<s.length;l+=1){const h=kg(o,s,l);n[l]?(n[l].p(h,a),$(n[l],1)):(n[l]=qg(h),n[l].c(),$(n[l],1),n[l].m(t.parentNode,t))}for(me(),l=s.length;l<n.length;l+=1)r(l);ge()}},i(o){if(!i){for(let a=0;a<s.length;a+=1)$(n[a]);i=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)et(n[a]);i=!1},d(o){Hh(n,o),o&&at(t)}}}function SR(e){let t=e[3][e[12]]+"",i;return{c(){i=Oe(t)},m(s,n){lt(s,i,n)},p(s,n){n[0]&4104&&t!==(t=s[3][s[12]]+"")&&si(i,t)},d(s){s&&at(i)}}}function ER(e){let t=e[125][e[12]]+"",i;return{c(){i=Oe(t)},m(s,n){lt(s,i,n)},p(s,n){n[0]&4104&&t!==(t=s[125][s[12]]+"")&&si(i,t)},d(s){s&&at(i)}}}function Kg(e){let t,i,s,n;const r=e[82]["multi-clear-icon"],o=Ve(r,e,e[81],Fg),a=o||TR();function l(){return e[91](e[127])}return{c(){t=J("div"),a&&a.c(),U(t,"class","multi-item-clear svelte-apvs86")},m(h,c){lt(h,t,c),a&&a.m(t,null),i=!0,s||(n=Bt(t,"pointerup",jr(on(l))),s=!0)},p(h,c){e=h,o&&o.p&&(!i||c[2]&524288)&&je(o,r,e,e[81],i?We(r,e[81],c,lR):Xe(e[81]),Fg)},i(h){i||($(a,h),i=!0)},o(h){et(a,h),i=!1},d(h){h&&at(t),a&&a.d(h),s=!1,n()}}}function TR(e){let t,i;return t=new Rh({}),{c(){Qt(t.$$.fragment)},m(s,n){Yt(t,s,n),i=!0},i(s){i||($(t.$$.fragment,s),i=!0)},o(s){et(t.$$.fragment,s),i=!1},d(s){$t(t,s)}}}function qg(e){let t,i,s,n,r,o,a;const l=e[82].selection,h=Ve(l,e,e[81],Lg),c=h||ER(e);let u=!e[11]&&!e[10]&&Rh&&Kg(e);function d(){return e[92](e[127])}return{c(){t=J("div"),i=J("span"),c&&c.c(),s=vt(),u&&u.c(),n=vt(),U(i,"class","multi-item-text svelte-apvs86"),U(t,"class","multi-item svelte-apvs86"),At(t,"active",e[26]===e[127]),At(t,"disabled",e[11])},m(f,p){lt(f,t,p),K(t,i),c&&c.m(i,null),K(t,s),u&&u.m(t,null),K(t,n),r=!0,o||(a=[Bt(t,"click",on(d)),Bt(t,"keydown",jr(on(e[84])))],o=!0)},p(f,p){e=f,h?h.p&&(!r||p[0]&8|p[2]&524288)&&je(h,l,e,e[81],r?We(l,e[81],p,hR):Xe(e[81]),Lg):c&&c.p&&(!r||p[0]&4104)&&c.p(e,r?p:[-1,-1,-1,-1,-1]),!e[11]&&!e[10]&&Rh?u?(u.p(e,p),p[0]&3072&&$(u,1)):(u=Kg(e),u.c(),$(u,1),u.m(t,n)):u&&(me(),et(u,1,1,()=>{u=null}),ge()),(!r||p[0]&67108864)&&At(t,"active",e[26]===e[127]),(!r||p[0]&2048)&&At(t,"disabled",e[11])},i(f){r||($(c,f),$(u),r=!0)},o(f){et(c,f),et(u),r=!1},d(f){f&&at(t),c&&c.d(f),u&&u.d(),o=!1,cs(a)}}}function Jg(e){let t,i;const s=e[82]["loading-icon"],n=Ve(s,e,e[81],Dg),r=n||AR();return{c(){t=J("div"),r&&r.c(),U(t,"class","icon loading svelte-apvs86"),U(t,"aria-hidden","true")},m(o,a){lt(o,t,a),r&&r.m(t,null),i=!0},p(o,a){n&&n.p&&(!i||a[2]&524288)&&je(n,s,o,o[81],i?We(s,o[81],a,oR):Xe(o[81]),Dg)},i(o){i||($(r,o),i=!0)},o(o){et(r,o),i=!1},d(o){o&&at(t),r&&r.d(o)}}}function AR(e){let t,i;return t=new eR({}),{c(){Qt(t.$$.fragment)},m(s,n){Yt(t,s,n),i=!0},i(s){i||($(t.$$.fragment,s),i=!0)},o(s){et(t.$$.fragment,s),i=!1},d(s){$t(t,s)}}}function Qg(e){let t,i,s,n;const r=e[82]["clear-icon"],o=Ve(r,e,e[81],Rg),a=o||CR();return{c(){t=J("button"),a&&a.c(),U(t,"class","icon clear-select svelte-apvs86")},m(l,h){lt(l,t,h),a&&a.m(t,null),i=!0,s||(n=Bt(t,"pointerup",jr(on(e[22]))),s=!0)},p(l,h){o&&o.p&&(!i||h[2]&524288)&&je(o,r,l,l[81],i?We(r,l[81],h,rR):Xe(l[81]),Rg)},i(l){i||($(a,l),i=!0)},o(l){et(a,l),i=!1},d(l){l&&at(t),a&&a.d(l),s=!1,n()}}}function CR(e){let t,i;return t=new Rh({}),{c(){Qt(t.$$.fragment)},m(s,n){Yt(t,s,n),i=!0},i(s){i||($(t.$$.fragment,s),i=!0)},o(s){et(t.$$.fragment,s),i=!1},d(s){$t(t,s)}}}function t0(e){let t,i;const s=e[82]["chevron-icon"],n=Ve(s,e,e[81],Pg),r=n||MR();return{c(){t=J("div"),r&&r.c(),U(t,"class","icon chevron svelte-apvs86"),U(t,"aria-hidden","true")},m(o,a){lt(o,t,a),r&&r.m(t,null),i=!0},p(o,a){n&&n.p&&(!i||a[0]&64|a[2]&524288)&&je(n,s,o,o[81],i?We(s,o[81],a,nR):Xe(o[81]),Pg)},i(o){i||($(r,o),i=!0)},o(o){et(r,o),i=!1},d(o){o&&at(t),r&&r.d(o)}}}function MR(e){let t,i;return t=new JP({}),{c(){Qt(t.$$.fragment)},m(s,n){Yt(t,s,n),i=!0},i(s){i||($(t.$$.fragment,s),i=!0)},o(s){et(t.$$.fragment,s),i=!1},d(s){$t(t,s)}}}function IR(e){let t,i;return{c(){t=J("input"),U(t,"name",e[8]),U(t,"type","hidden"),t.value=i=e[3]?JSON.stringify(e[3]):null,U(t,"class","svelte-apvs86")},m(s,n){lt(s,t,n)},p(s,n){n[0]&256&&U(t,"name",s[8]),n[0]&8&&i!==(i=s[3]?JSON.stringify(s[3]):null)&&(t.value=i)},d(s){s&&at(t)}}}function e0(e){let t;const i=e[82].required,s=Ve(i,e,e[81],Mg),n=s||PR();return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),t=!0},p(r,o){s&&s.p&&(!t||o[0]&8|o[2]&524288)&&je(s,i,r,r[81],t?We(i,r[81],o,iR):Xe(r[81]),Mg)},i(r){t||($(n,r),t=!0)},o(r){et(n,r),t=!1},d(r){n&&n.d(r)}}}function PR(e){let t;return{c(){t=J("select"),U(t,"class","required svelte-apvs86"),t.required=!0,U(t,"tabindex","-1"),U(t,"aria-hidden","true")},m(i,s){lt(i,t,s)},p:ht,d(i){i&&at(t)}}}function RR(e){let t,i,s,n,r,o,a,l,h,c,u,d,f,p,m,g,_,y,b,v,x=e[6]&&Wg(e),T=e[2]&&$g(e);const S=e[82].prepend,A=Ve(S,e,e[81],Bg);let M=e[25]&&Zg(e),O=[{readOnly:c=!e[17]},e[27],{placeholder:e[33]},{style:e[18]},{disabled:e[11]}],C={};for(let F=0;F<O.length;F+=1)C=P_(C,O[F]);let k=e[5]&&Jg(e),P=e[34]&&Qg(e),w=e[20]&&t0(e);const E=e[82]["input-hidden"],L=Ve(E,e,e[81],Ig),I=L||IR(e);let N=e[16]&&(!e[3]||e[3].length===0)&&e0(e);return{c(){t=J("div"),x&&x.c(),i=vt(),s=J("span"),T&&T.c(),n=vt(),r=J("div"),A&&A.c(),o=vt(),a=J("div"),M&&M.c(),l=vt(),h=J("input"),u=vt(),d=J("div"),k&&k.c(),f=vt(),P&&P.c(),p=vt(),w&&w.c(),m=vt(),I&&I.c(),g=vt(),N&&N.c(),U(s,"aria-live","polite"),U(s,"aria-atomic","false"),U(s,"aria-relevant","additions text"),U(s,"class","a11y-text svelte-apvs86"),U(r,"class","prepend svelte-apvs86"),wp(h,C),At(h,"svelte-apvs86",!0),U(a,"class","value-container svelte-apvs86"),U(d,"class","indicators svelte-apvs86"),U(t,"class",_="svelte-select "+e[21]+" svelte-apvs86"),U(t,"style",e[14]),At(t,"multi",e[9]),At(t,"disabled",e[11]),At(t,"focused",e[2]),At(t,"list-open",e[6]),At(t,"show-chevron",e[20]),At(t,"error",e[15])},m(F,D){lt(F,t,D),x&&x.m(t,null),K(t,i),K(t,s),T&&T.m(s,null),K(t,n),K(t,r),A&&A.m(r,null),K(t,o),K(t,a),M&&M.m(a,null),K(a,l),K(a,h),h.autofocus&&h.focus(),e[93](h),Sp(h,e[4]),K(t,u),K(t,d),k&&k.m(d,null),K(d,f),P&&P.m(d,null),K(d,p),w&&w.m(d,null),K(t,m),I&&I.m(t,null),K(t,g),N&&N.m(t,null),e[95](t),y=!0,b||(v=[Bt(window,"click",e[42]),Bt(window,"keydown",e[37]),Bt(h,"keydown",e[37]),Bt(h,"blur",e[39]),Bt(h,"focus",e[38]),Bt(h,"input",e[94]),Bt(t,"pointerup",on(e[40])),Bt(t,"mousedown",on(e[83])),eh(e[48].call(null,t))],b=!0)},p(F,D){F[6]?x?(x.p(F,D),D[0]&64&&$(x,1)):(x=Wg(F),x.c(),$(x,1),x.m(t,i)):x&&(me(),et(x,1,1,()=>{x=null}),ge()),F[2]?T?T.p(F,D):(T=$g(F),T.c(),T.m(s,null)):T&&(T.d(1),T=null),A&&A.p&&(!y||D[2]&524288)&&je(A,S,F,F[81],y?We(S,F[81],D,cR):Xe(F[81]),Bg),F[25]?M?(M.p(F,D),D[0]&33554432&&$(M,1)):(M=Zg(F),M.c(),$(M,1),M.m(a,l)):M&&(me(),et(M,1,1,()=>{M=null}),ge()),wp(h,C=Bv(O,[(!y||D[0]&131072&&c!==(c=!F[17]))&&{readOnly:c},D[0]&134217728&&F[27],(!y||D[1]&4)&&{placeholder:F[33]},(!y||D[0]&262144)&&{style:F[18]},(!y||D[0]&2048)&&{disabled:F[11]}])),D[0]&16&&h.value!==F[4]&&Sp(h,F[4]),At(h,"svelte-apvs86",!0),F[5]?k?(k.p(F,D),D[0]&32&&$(k,1)):(k=Jg(F),k.c(),$(k,1),k.m(d,f)):k&&(me(),et(k,1,1,()=>{k=null}),ge()),F[34]?P?(P.p(F,D),D[1]&8&&$(P,1)):(P=Qg(F),P.c(),$(P,1),P.m(d,p)):P&&(me(),et(P,1,1,()=>{P=null}),ge()),F[20]?w?(w.p(F,D),D[0]&1048576&&$(w,1)):(w=t0(F),w.c(),$(w,1),w.m(d,null)):w&&(me(),et(w,1,1,()=>{w=null}),ge()),L?L.p&&(!y||D[0]&8|D[2]&524288)&&je(L,E,F,F[81],y?We(E,F[81],D,sR):Xe(F[81]),Ig):I&&I.p&&(!y||D[0]&264)&&I.p(F,y?D:[-1,-1,-1,-1,-1]),F[16]&&(!F[3]||F[3].length===0)?N?(N.p(F,D),D[0]&65544&&$(N,1)):(N=e0(F),N.c(),$(N,1),N.m(t,null)):N&&(me(),et(N,1,1,()=>{N=null}),ge()),(!y||D[0]&2097152&&_!==(_="svelte-select "+F[21]+" svelte-apvs86"))&&U(t,"class",_),(!y||D[0]&16384)&&U(t,"style",F[14]),(!y||D[0]&2097664)&&At(t,"multi",F[9]),(!y||D[0]&2099200)&&At(t,"disabled",F[11]),(!y||D[0]&2097156)&&At(t,"focused",F[2]),(!y||D[0]&2097216)&&At(t,"list-open",F[6]),(!y||D[0]&3145728)&&At(t,"show-chevron",F[20]),(!y||D[0]&2129920)&&At(t,"error",F[15])},i(F){y||($(x),$(A,F),$(M),$(k),$(P),$(w),$(I,F),$(N),y=!0)},o(F){et(x),et(A,F),et(M),et(k),et(P),et(w),et(I,F),et(N),y=!1},d(F){F&&at(t),x&&x.d(),T&&T.d(),A&&A.d(F),M&&M.d(),e[93](null),k&&k.d(),P&&P.d(),w&&w.d(),I&&I.d(F),N&&N.d(),e[95](null),b=!1,cs(v)}}}function i0(e){return e.map((t,i)=>({index:i,value:t,label:`${t}`}))}function DR(e){return e===0}function OR(e){return e.groupHeader&&e.selectable||e.selectable||!e.hasOwnProperty("selectable")}function kR(e,t,i){let s,n,r,o,a,l,h,c,u,{$$slots:d={},$$scope:f}=t;const p=Iv(d),m=O_();let{justValue:g=null}=t,{filter:_=ZP}=t,{getItems:y=KP}=t,{id:b=null}=t,{name:v=null}=t,{container:x=void 0}=t,{input:T=void 0}=t,{multiple:S=!1}=t,{multiFullItemClearable:A=!1}=t,{disabled:M=!1}=t,{focused:O=!1}=t,{value:C=null}=t,{filterText:k=""}=t,{placeholder:P="Please select"}=t,{placeholderAlwaysShow:w=!1}=t,{items:E=null}=t,{label:L="label"}=t,{itemFilter:I=(R,ot,Wt)=>`${R}`.toLowerCase().includes(ot.toLowerCase())}=t,{groupBy:N=void 0}=t,{groupFilter:F=R=>R}=t,{groupHeaderSelectable:D=!1}=t,{itemId:G="value"}=t,{loadOptions:W=void 0}=t,{containerStyles:q=""}=t,{hasError:X=!1}=t,{filterSelectedItems:st=!0}=t,{required:ft=!1}=t,{closeListOnChange:rt=!0}=t,{createGroupHeaderItem:bt=(R,ot)=>({value:R,[L]:R})}=t;const z=()=>h;let{searchable:B=!0}=t,{inputStyles:H=""}=t,{clearable:j=!0}=t,{loading:Y=!1}=t,{listOpen:tt=!1}=t,gt,{debounce:Et=(R,ot=1)=>{clearTimeout(gt),gt=setTimeout(R,ot)}}=t,{debounceWait:ke=300}=t,{hideEmptyState:$e=!1}=t,{inputAttributes:wi={}}=t,{listAutoWidth:ds=!0}=t,{showChevron:uo=!1}=t,{listOffset:nr=5}=t,{hoverItemIndex:Dt=0}=t,{floatingConfig:fs={}}=t,{class:La=""}=t,Vt,yn,xc,vc;function Ux(){if(typeof C=="string"){let R=(E||[]).find(ot=>ot[G]===C);i(3,C=R||{[G]:C,label:C})}else S&&Array.isArray(C)&&C.length>0&&i(3,C=C.map(R=>typeof R=="string"?{value:R,label:R}:R))}let rr;function Gx(){i(27,rr=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},wi)),b&&i(27,rr.id=b,rr),B||i(27,rr.readonly=!0,rr)}function dp(R){const ot=[],Wt={};R.forEach(or=>{const gs=N(or);ot.includes(gs)||(ot.push(gs),Wt[gs]=[],gs&&Wt[gs].push(Object.assign(bt(gs,or),{id:gs,groupHeader:!0,selectable:D}))),Wt[gs].push(Object.assign({groupItem:!!gs},or))});const ms=[];return F(ot).forEach(or=>{Wt[or]&&ms.push(...Wt[or])}),ms}function Hx(){if(S){JSON.stringify(C)!==JSON.stringify(yn)&&pp()&&m("input",C);return}(!yn||JSON.stringify(C[G])!==JSON.stringify(yn[G]))&&m("input",C)}function zx(){C&&(Array.isArray(C)?i(3,C=[...C]):i(3,C=[C]))}function Vx(){C&&i(3,C=null)}function Wx(){const R=h.findIndex(ot=>ot[G]===C[G]);fp(R,!0)}function jx(R){m("hoverItem",R)}function fp(R=0,ot){i(7,Dt=R<0?0:R),!ot&&N&&h[Dt]&&!h[Dt].selectable&&Na(1)}function Xx(){!W&&k.length===0||(W?Et(async function(){i(5,Y=!0);let R=await y({dispatch:m,loadOptions:W,convertStringItemsToObjects:i0,filterText:k});R?(i(5,Y=R.loading),i(6,tt=tt?R.listOpen:k.length>0),i(2,O=tt&&R.focused),i(51,E=N?dp(R.filteredItems):R.filteredItems)):(i(5,Y=!1),i(2,O=!0),i(6,tt=!0))},ke):(i(6,tt=!0),S&&i(26,Vt=void 0)))}function Yx(R){tt&&m("filter",R)}Dv(async()=>{i(77,yn=C),i(78,xc=k),i(79,vc=S)});function $x(){return S?C?C.map(R=>R[G]):null:C&&C[G]}function pp(){let R=!0;if(C){const ot=[],Wt=[];C.forEach(ms=>{ot.includes(ms[G])?R=!1:(ot.push(ms[G]),Wt.push(ms))}),R||i(3,C=Wt)}return R}function mp(R){let ot=R?R[G]:C[G];return E.find(Wt=>Wt[G]===ot)}function Zx(R){!R||R.length===0||R.some(ot=>typeof ot!="object")||!C||(S?C.some(ot=>!ot||!ot[G]):!C[G])||(Array.isArray(C)?i(3,C=C.map(ot=>mp(ot)||ot)):i(3,C=mp()||C))}async function Ba(R){const ot=C[R];C.length===1?i(3,C=void 0):i(3,C=C.filter(Wt=>Wt!==ot)),m("clear",ot)}function Kx(R){if(O)switch(R.stopPropagation(),R.key){case"Escape":R.preventDefault(),ps();break;case"Enter":if(R.preventDefault(),tt){if(h.length===0)break;const ot=h[Dt];if(C&&!S&&C[G]===ot[G]){ps();break}else Cc(h[Dt])}break;case"ArrowDown":R.preventDefault(),tt?Na(1):(i(6,tt=!0),i(26,Vt=void 0));break;case"ArrowUp":R.preventDefault(),tt?Na(-1):(i(6,tt=!0),i(26,Vt=void 0));break;case"Tab":if(tt&&O){if(h.length===0||C&&C[G]===h[Dt][G])return ps();R.preventDefault(),Cc(h[Dt]),ps()}break;case"Backspace":if(!S||k.length>0)return;if(S&&C&&C.length>0){if(Ba(Vt!==void 0?Vt:C.length-1),Vt===0||Vt===void 0)break;i(26,Vt=C.length>Vt?Vt-1:void 0)}break;case"ArrowLeft":if(!C||!S||k.length>0)return;Vt===void 0?i(26,Vt=C.length-1):C.length>Vt&&Vt!==0&&i(26,Vt-=1);break;case"ArrowRight":if(!C||!S||k.length>0||Vt===void 0)return;Vt===C.length-1?i(26,Vt=void 0):Vt<C.length-1&&i(26,Vt+=1);break}}function wc(R){O&&T===(document==null?void 0:document.activeElement)||(R&&m("focus",R),T.focus(),i(2,O=!0))}async function gp(R){Ac||(tt||O)&&(m("blur",R),ps(),i(2,O=!1),i(26,Vt=void 0),T.blur())}function qx(){M||i(6,tt=!tt)}function Jx(){m("clear",C),i(3,C=void 0),ps(),wc()}oi(()=>{tt&&i(2,O=!0),O&&T&&T.focus()});function Qx(R){if(R){i(4,k="");const ot=Object.assign({},R);if(ot.groupHeader&&!ot.selectable)return;i(3,C=S?C?C.concat([ot]):[ot]:i(3,C=ot)),setTimeout(()=>{rt&&ps(),i(26,Vt=void 0),m("change",C),m("select",R)})}}function ps(){i(4,k=""),i(6,tt=!1)}let{ariaValues:Sc=R=>`Option ${R}, selected.`}=t,{ariaListOpen:Ec=(R,ot)=>`You are currently focused on option ${R}. There are ${ot} results available.`}=t,{ariaFocused:Tc=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function tv(R){let ot;return R&&C.length>0?ot=C.map(Wt=>Wt[L]).join(", "):ot=C[L],Sc(ot)}function ev(){if(!h||h.length===0)return"";let R=h[Dt];if(tt&&R){let ot=h?h.length:0;return Ec(R[L],ot)}else return Tc()}let Fe=null,_p;function yp(){clearTimeout(_p),_p=setTimeout(()=>{Ac=!1},100)}function iv(R){!tt&&!O&&x&&!x.contains(R.target)&&!(Fe!=null&&Fe.contains(R.target))&&gp()}ao(()=>{Fe==null||Fe.remove()});let Ac=!1;function Cc(R){!R||R.selectable===!1||Qx(R)}function Mc(R){Ac||i(7,Dt=R)}function bp(R){const{item:ot,i:Wt}=R;if((ot==null?void 0:ot.selectable)!==!1){if(C&&!S&&C[G]===ot[G])return ps();OR(ot)&&(i(7,Dt=Wt),Cc(ot))}}function Na(R){if(h.filter(ms=>!Object.hasOwn(ms,"selectable")||ms.selectable===!0).length===0)return i(7,Dt=0);R>0&&Dt===h.length-1?i(7,Dt=0):R<0&&Dt===0?i(7,Dt=h.length-1):i(7,Dt=Dt+R);const Wt=h[Dt];if(Wt&&Wt.selectable===!1){(R===1||R===-1)&&Na(R);return}}function sv(R,ot,Wt){if(!S)return ot&&ot[Wt]===R[Wt]}const nv=xp,rv=xp;function xp(R){return{update(ot){ot.scroll&&(yp(),R.scrollIntoView({behavior:"auto",block:"nearest"}))}}}function ov(){const{width:R}=x.getBoundingClientRect();i(23,Fe.style.width=ds?R+"px":"auto",Fe)}let fo={strategy:"absolute",placement:"bottom-start",middleware:[GP(nr),UP(),zP()],autoUpdate:!1};const[av,lv,hv]=$P(fo);let Ic=!0;function cv(R,ot){if(!R||!ot)return i(28,Ic=!0);setTimeout(()=>{i(28,Ic=!1)},0)}function uv(R){Ga.call(this,e,R)}function dv(R){Ga.call(this,e,R)}function fv(R){Ga.call(this,e,R)}function pv(R){Ga.call(this,e,R)}const mv=R=>Mc(R),gv=R=>Mc(R),_v=(R,ot)=>bp({item:R,i:ot});function yv(R){es[R?"unshift":"push"](()=>{Fe=R,i(23,Fe)})}const bv=R=>Ba(R),xv=R=>A?Ba(R):{};function vv(R){es[R?"unshift":"push"](()=>{T=R,i(1,T)})}function wv(){k=this.value,i(4,k)}function Sv(R){es[R?"unshift":"push"](()=>{x=R,i(0,x)})}return e.$$set=R=>{"justValue"in R&&i(52,g=R.justValue),"filter"in R&&i(53,_=R.filter),"getItems"in R&&i(54,y=R.getItems),"id"in R&&i(55,b=R.id),"name"in R&&i(8,v=R.name),"container"in R&&i(0,x=R.container),"input"in R&&i(1,T=R.input),"multiple"in R&&i(9,S=R.multiple),"multiFullItemClearable"in R&&i(10,A=R.multiFullItemClearable),"disabled"in R&&i(11,M=R.disabled),"focused"in R&&i(2,O=R.focused),"value"in R&&i(3,C=R.value),"filterText"in R&&i(4,k=R.filterText),"placeholder"in R&&i(56,P=R.placeholder),"placeholderAlwaysShow"in R&&i(57,w=R.placeholderAlwaysShow),"items"in R&&i(51,E=R.items),"label"in R&&i(12,L=R.label),"itemFilter"in R&&i(58,I=R.itemFilter),"groupBy"in R&&i(59,N=R.groupBy),"groupFilter"in R&&i(60,F=R.groupFilter),"groupHeaderSelectable"in R&&i(61,D=R.groupHeaderSelectable),"itemId"in R&&i(13,G=R.itemId),"loadOptions"in R&&i(62,W=R.loadOptions),"containerStyles"in R&&i(14,q=R.containerStyles),"hasError"in R&&i(15,X=R.hasError),"filterSelectedItems"in R&&i(63,st=R.filterSelectedItems),"required"in R&&i(16,ft=R.required),"closeListOnChange"in R&&i(64,rt=R.closeListOnChange),"createGroupHeaderItem"in R&&i(65,bt=R.createGroupHeaderItem),"searchable"in R&&i(17,B=R.searchable),"inputStyles"in R&&i(18,H=R.inputStyles),"clearable"in R&&i(67,j=R.clearable),"loading"in R&&i(5,Y=R.loading),"listOpen"in R&&i(6,tt=R.listOpen),"debounce"in R&&i(68,Et=R.debounce),"debounceWait"in R&&i(69,ke=R.debounceWait),"hideEmptyState"in R&&i(19,$e=R.hideEmptyState),"inputAttributes"in R&&i(70,wi=R.inputAttributes),"listAutoWidth"in R&&i(71,ds=R.listAutoWidth),"showChevron"in R&&i(20,uo=R.showChevron),"listOffset"in R&&i(72,nr=R.listOffset),"hoverItemIndex"in R&&i(7,Dt=R.hoverItemIndex),"floatingConfig"in R&&i(73,fs=R.floatingConfig),"class"in R&&i(21,La=R.class),"ariaValues"in R&&i(74,Sc=R.ariaValues),"ariaListOpen"in R&&i(75,Ec=R.ariaListOpen),"ariaFocused"in R&&i(76,Tc=R.ariaFocused),"$$scope"in R&&i(81,f=R.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&8|e.$$.dirty[1]&1048576&&C&&Ux(),e.$$.dirty[0]&131072|e.$$.dirty[2]&256&&(wi||!B)&&Gx(),e.$$.dirty[0]&512&&S&&zx(),e.$$.dirty[0]&512|e.$$.dirty[2]&131072&&vc&&!S&&Vx(),e.$$.dirty[0]&520&&S&&C&&C.length>1&&pp(),e.$$.dirty[0]&8&&C&&Hx(),e.$$.dirty[0]&520|e.$$.dirty[2]&32768&&!C&&S&&yn&&m("input",C),e.$$.dirty[0]&6&&!O&&T&&ps(),e.$$.dirty[0]&16|e.$$.dirty[2]&65536&&k!==xc&&Xx(),e.$$.dirty[0]&12824|e.$$.dirty[1]&407896064|e.$$.dirty[2]&3&&i(24,h=_({loadOptions:W,filterText:k,items:E,multiple:S,value:C,itemId:G,groupBy:N,label:L,filterSelectedItems:st,itemFilter:I,convertStringItemsToObjects:i0,filterGroupedItems:dp})),e.$$.dirty[0]&16777800&&!S&&tt&&C&&h&&Wx(),e.$$.dirty[0]&576&&tt&&S&&i(7,Dt=0),e.$$.dirty[0]&16&&k&&i(7,Dt=0),e.$$.dirty[0]&128&&jx(Dt),e.$$.dirty[0]&520&&i(25,s=S?C&&C.length>0:C),e.$$.dirty[0]&33554448&&i(35,n=s&&k.length>0),e.$$.dirty[0]&33556512|e.$$.dirty[2]&32&&i(34,r=s&&j&&!M&&!Y),e.$$.dirty[0]&520|e.$$.dirty[1]&100663296&&i(33,o=w&&S||S&&(C==null?void 0:C.length)===0?P:C?"":P),e.$$.dirty[0]&520&&i(32,a=C?tv(S):""),e.$$.dirty[0]&16777412&&i(31,l=ev()),e.$$.dirty[1]&1048576&&Zx(E),e.$$.dirty[0]&8712&&i(52,g=$x()),e.$$.dirty[0]&520|e.$$.dirty[2]&32768&&!S&&yn&&!C&&m("input",C),e.$$.dirty[0]&16777800&&tt&&h&&!S&&!C&&fp(),e.$$.dirty[0]&16777216&&Yx(h),e.$$.dirty[0]&1|e.$$.dirty[2]&2048&&x&&(fs==null?void 0:fs.autoUpdate)===void 0&&i(80,fo.autoUpdate=!0,fo),e.$$.dirty[0]&1|e.$$.dirty[2]&264192&&x&&fs&&hv(Object.assign(fo,fs)),e.$$.dirty[0]&8388608&&i(30,c=!!Fe),e.$$.dirty[0]&8388672&&cv(Fe,tt),e.$$.dirty[0]&8388673&&tt&&x&&Fe&&ov(),e.$$.dirty[0]&128&&i(29,u=Dt),e.$$.dirty[0]&70&&T&&tt&&!O&&wc()},[x,T,O,C,k,Y,tt,Dt,v,S,A,M,L,G,q,X,ft,B,H,$e,uo,La,Jx,Fe,h,s,Vt,rr,Ic,u,c,l,a,o,r,n,Ba,Kx,wc,gp,qx,yp,iv,Mc,bp,sv,nv,rv,av,lv,p,E,g,_,y,b,P,w,I,N,F,D,W,st,rt,bt,z,j,Et,ke,wi,ds,nr,fs,Sc,Ec,Tc,yn,xc,vc,fo,f,d,uv,dv,fv,pv,mv,gv,_v,yv,bv,xv,vv,wv,Sv]}class FR extends ne{constructor(t){super(),se(this,t,kR,RR,Jt,{justValue:52,filter:53,getItems:54,id:55,name:8,container:0,input:1,multiple:9,multiFullItemClearable:10,disabled:11,focused:2,value:3,filterText:4,placeholder:56,placeholderAlwaysShow:57,items:51,label:12,itemFilter:58,groupBy:59,groupFilter:60,groupHeaderSelectable:61,itemId:13,loadOptions:62,containerStyles:14,hasError:15,filterSelectedItems:63,required:16,closeListOnChange:64,createGroupHeaderItem:65,getFilteredItems:66,searchable:17,inputStyles:18,clearable:67,loading:5,listOpen:6,debounce:68,debounceWait:69,hideEmptyState:19,inputAttributes:70,listAutoWidth:71,showChevron:20,listOffset:72,hoverItemIndex:7,floatingConfig:73,class:21,handleClear:22,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[66]}get handleClear(){return this.$$.ctx[22]}}const LR="/assets/spinning-earth-f600d4c3.gif";function BR(e){let t,i;return{c(){t=J("img"),U(t,"class","earth svelte-f3wt8t"),_i(t.src,i=LR)||U(t,"src",i),U(t,"alt","")},m(s,n){lt(s,t,n)},p:ht,d(s){s&&at(t)}}}function NR(e){let t,i,s,n;return{c(){t=J("img"),U(t,"class","flag svelte-f3wt8t"),_i(t.src,i=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${e[1].toLowerCase()}.svg`)||U(t,"src",i),U(t,"alt",s=e[3](e[1])),U(t,"title",n=e[3](e[1]))},m(r,o){lt(r,t,o)},p(r,o){o&2&&!_i(t.src,i=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${r[1].toLowerCase()}.svg`)&&U(t,"src",i),o&2&&s!==(s=r[3](r[1]))&&U(t,"alt",s),o&2&&n!==(n=r[3](r[1]))&&U(t,"title",n)},d(r){r&&at(t)}}}function UR(e){let t,i,s,n,r,o,a,l,h;function c(f,p){return f[1]?NR:BR}let u=c(e),d=u(e);return n=new FR({props:{items:e[0],placeholder:"Pick a country 🌎",searchable:!0,clearable:!1,closeListOnChange:!0,inputAttributes:{autocomplete:"on"},value:e[1]}}),n.$on("change",e[4]),{c(){t=J("div"),d.c(),i=vt(),s=J("div"),Qt(n.$$.fragment),r=vt(),o=J("button"),o.textContent="Play!",U(o,"class","svelte-f3wt8t"),U(s,"class","search svelte-f3wt8t"),U(t,"class","container svelte-f3wt8t")},m(f,p){lt(f,t,p),d.m(t,null),K(t,i),K(t,s),Yt(n,s,null),K(s,r),K(s,o),a=!0,l||(h=Bt(o,"click",e[2]),l=!0)},p(f,[p]){u===(u=c(f))&&d?d.p(f,p):(d.d(1),d=u(f),d&&(d.c(),d.m(t,i)));const m={};p&1&&(m.items=f[0]),p&2&&(m.value=f[1]),n.$set(m)},i(f){a||($(n.$$.fragment,f),a=!0)},o(f){et(n.$$.fragment,f),a=!1},d(f){f&&at(t),d.d(),$t(n),l=!1,h()}}}function GR(e,t,i){let s;const n=O_();let r,o=[];oi(async()=>{const c=await CP(()=>Promise.resolve().then(()=>eL),void 0);Hr.registerLocale(c.default),i(0,o=Object.entries(Hr.getNames("en")).map(([u,d])=>({value:u,label:d}))),r=localStorage.getItem("userCountry"),i(1,s=r)});const a=()=>{s&&(localStorage.setItem("userCountry",s),sy.set(s),n("play",s))};function l(c){return Hr.getName(c,"en",{select:"official"})}const h=c=>{i(1,s=c.detail.value)};return i(1,s=""),[o,s,a,l,h]}class HR extends ne{constructor(t){super(),se(this,t,GR,UR,Jt,{})}}function zR(e){let t,i,s;return{c(){t=J("div"),t.innerHTML=`<div class="card svelte-1stc2p8"><h2 class="svelte-1stc2p8">How to play</h2> 
		<br/> 
		<p>Kubel is like a 2d Rubiks cube. Its very simple!</p> 
		<br/> 
		<p><span class="svelte-1stc2p8">Click and drag</span> a piece to move the row or collumn. Win the game by moving
			all the pieces of the <span class="svelte-1stc2p8">same color</span> next to each other. Use as few moves as possible
			to get the best score.</p> 
		<br/> 
		<p style="text-align: center; font-weight:bold">😄Good luck &amp; have fun!😄</p> 
		<p style="text-align: center; font-size: 14px; color:rgba(150, 150, 200, 0.75)">Feedback? Questions? Message me! <a href="mailto:jason@kubel.io" target="_blank">jason@kubel.io</a></p></div>`,U(t,"class","screen-container svelte-1stc2p8")},m(n,r){lt(n,t,r),i||(s=[Bt(t,"click",e[0]),Bt(t,"keypress",e[0])],i=!0)},p:ht,i:ht,o:ht,d(n){n&&at(t),i=!1,cs(s)}}}function VR(e){return[i=>{i.target.closest(".card")||_f.set(!1)}]}class WR extends ne{constructor(t){super(),se(this,t,VR,zR,Jt,{})}}function jR(e){let t,i,s;return{c(){t=J("button"),t.textContent="PLAY AGAIN",U(t,"class","svelte-9suxba")},m(n,r){lt(n,t,r),i||(s=Bt(t,"click",e[0]),i=!0)},p:ht,i:ht,o:ht,d(n){n&&at(t),i=!1,s()}}}function XR(e){return[()=>{Xu.set(!0)}]}class YR extends ne{constructor(t){super(),se(this,t,XR,jR,Jt,{})}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Oa(e){return e+.5|0}const Ks=(e,t,i)=>Math.max(Math.min(e,i),t);function ko(e){return Ks(Oa(e*2.55),0,255)}function rn(e){return Ks(Oa(e*255),0,255)}function As(e){return Ks(Oa(e/2.55)/100,0,1)}function s0(e){return Ks(Oa(e*100),0,100)}const ai={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yd=[..."0123456789ABCDEF"],$R=e=>Yd[e&15],ZR=e=>Yd[(e&240)>>4]+Yd[e&15],pl=e=>(e&240)>>4===(e&15),KR=e=>pl(e.r)&&pl(e.g)&&pl(e.b)&&pl(e.a);function qR(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&ai[e[1]]*17,g:255&ai[e[2]]*17,b:255&ai[e[3]]*17,a:t===5?ai[e[4]]*17:255}:(t===7||t===9)&&(i={r:ai[e[1]]<<4|ai[e[2]],g:ai[e[3]]<<4|ai[e[4]],b:ai[e[5]]<<4|ai[e[6]],a:t===9?ai[e[7]]<<4|ai[e[8]]:255})),i}const JR=(e,t)=>e<255?t(e):"";function QR(e){var t=KR(e)?$R:ZR;return e?"#"+t(e.r)+t(e.g)+t(e.b)+JR(e.a,t):void 0}const tD=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function B1(e,t,i){const s=t*Math.min(i,1-i),n=(r,o=(r+e/30)%12)=>i-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function eD(e,t,i){const s=(n,r=(n+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function iD(e,t,i){const s=B1(e,1,.5);let n;for(t+i>1&&(n=1/(t+i),t*=n,i*=n),n=0;n<3;n++)s[n]*=1-t-i,s[n]+=t;return s}function sD(e,t,i,s,n){return e===n?(t-i)/s+(t<i?6:0):t===n?(i-e)/s+2:(e-t)/s+4}function qf(e){const i=e.r/255,s=e.g/255,n=e.b/255,r=Math.max(i,s,n),o=Math.min(i,s,n),a=(r+o)/2;let l,h,c;return r!==o&&(c=r-o,h=a>.5?c/(2-r-o):c/(r+o),l=sD(i,s,n,c,r),l=l*60+.5),[l|0,h||0,a]}function Jf(e,t,i,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,s)).map(rn)}function Qf(e,t,i){return Jf(B1,e,t,i)}function nD(e,t,i){return Jf(iD,e,t,i)}function rD(e,t,i){return Jf(eD,e,t,i)}function N1(e){return(e%360+360)%360}function oD(e){const t=tD.exec(e);let i=255,s;if(!t)return;t[5]!==s&&(i=t[6]?ko(+t[5]):rn(+t[5]));const n=N1(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=nD(n,r,o):t[1]==="hsv"?s=rD(n,r,o):s=Qf(n,r,o),{r:s[0],g:s[1],b:s[2],a:i}}function aD(e,t){var i=qf(e);i[0]=N1(i[0]+t),i=Qf(i),e.r=i[0],e.g=i[1],e.b=i[2]}function lD(e){if(!e)return;const t=qf(e),i=t[0],s=s0(t[1]),n=s0(t[2]);return e.a<255?`hsla(${i}, ${s}%, ${n}%, ${As(e.a)})`:`hsl(${i}, ${s}%, ${n}%)`}const n0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},r0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hD(){const e={},t=Object.keys(r0),i=Object.keys(n0);let s,n,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],n=0;n<i.length;n++)r=i[n],a=a.replace(r,n0[r]);r=parseInt(r0[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let ml;function cD(e){ml||(ml=hD(),ml.transparent=[0,0,0,0]);const t=ml[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const uD=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function dD(e){const t=uD.exec(e);let i=255,s,n,r;if(t){if(t[7]!==s){const o=+t[7];i=t[8]?ko(o):Ks(o*255,0,255)}return s=+t[1],n=+t[3],r=+t[5],s=255&(t[2]?ko(s):Ks(s,0,255)),n=255&(t[4]?ko(n):Ks(n,0,255)),r=255&(t[6]?ko(r):Ks(r,0,255)),{r:s,g:n,b:r,a:i}}}function fD(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${As(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Tu=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,gr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function pD(e,t,i){const s=gr(As(e.r)),n=gr(As(e.g)),r=gr(As(e.b));return{r:rn(Tu(s+i*(gr(As(t.r))-s))),g:rn(Tu(n+i*(gr(As(t.g))-n))),b:rn(Tu(r+i*(gr(As(t.b))-r))),a:e.a+i*(t.a-e.a)}}function gl(e,t,i){if(e){let s=qf(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*i,t===0?360:1)),s=Qf(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function U1(e,t){return e&&Object.assign(t||{},e)}function o0(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=rn(e[3]))):(t=U1(e,{r:0,g:0,b:0,a:1}),t.a=rn(t.a)),t}function mD(e){return e.charAt(0)==="r"?dD(e):oD(e)}class ga{constructor(t){if(t instanceof ga)return t;const i=typeof t;let s;i==="object"?s=o0(t):i==="string"&&(s=qR(t)||cD(t)||mD(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=U1(this._rgb);return t&&(t.a=As(t.a)),t}set rgb(t){this._rgb=o0(t)}rgbString(){return this._valid?fD(this._rgb):void 0}hexString(){return this._valid?QR(this._rgb):void 0}hslString(){return this._valid?lD(this._rgb):void 0}mix(t,i){if(t){const s=this.rgb,n=t.rgb;let r;const o=i===r?.5:i,a=2*o-1,l=s.a-n.a,h=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-h,s.r=255&h*s.r+r*n.r+.5,s.g=255&h*s.g+r*n.g+.5,s.b=255&h*s.b+r*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(t,i){return t&&(this._rgb=pD(this._rgb,t._rgb,i)),this}clone(){return new ga(this.rgb)}alpha(t){return this._rgb.a=rn(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=Oa(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return gl(this._rgb,2,t),this}darken(t){return gl(this._rgb,2,-t),this}saturate(t){return gl(this._rgb,1,t),this}desaturate(t){return gl(this._rgb,1,-t),this}rotate(t){return aD(this._rgb,t),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function bs(){}const gD=(()=>{let e=0;return()=>e++})();function It(e){return e===null||typeof e>"u"}function Nt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function St(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function ee(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function qe(e,t){return ee(e)?e:t}function yt(e,t){return typeof e>"u"?t:e}const _D=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,G1=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Lt(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function Rt(e,t,i,s){let n,r,o;if(Nt(e))if(r=e.length,s)for(n=r-1;n>=0;n--)t.call(i,e[n],n);else for(n=0;n<r;n++)t.call(i,e[n],n);else if(St(e))for(o=Object.keys(e),r=o.length,n=0;n<r;n++)t.call(i,e[o[n]],o[n])}function Dh(e,t){let i,s,n,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,s=e.length;i<s;++i)if(n=e[i],r=t[i],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function Oh(e){if(Nt(e))return e.map(Oh);if(St(e)){const t=Object.create(null),i=Object.keys(e),s=i.length;let n=0;for(;n<s;++n)t[i[n]]=Oh(e[i[n]]);return t}return e}function H1(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function yD(e,t,i,s){if(!H1(e))return;const n=t[e],r=i[e];St(n)&&St(r)?_a(n,r,s):t[e]=Oh(r)}function _a(e,t,i){const s=Nt(t)?t:[t],n=s.length;if(!St(e))return e;i=i||{};const r=i.merger||yD;let o;for(let a=0;a<n;++a){if(o=s[a],!St(o))continue;const l=Object.keys(o);for(let h=0,c=l.length;h<c;++h)r(l[h],e,o,i)}return e}function Yo(e,t){return _a(e,t,{merger:bD})}function bD(e,t,i){if(!H1(e))return;const s=t[e],n=i[e];St(s)&&St(n)?Yo(s,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Oh(n))}const a0={"":e=>e,x:e=>e.x,y:e=>e.y};function xD(e){const t=e.split("."),i=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}function vD(e){const t=xD(e);return i=>{for(const s of t){if(s==="")break;i=i&&i[s]}return i}}function pn(e,t){return(a0[t]||(a0[t]=vD(t)))(e)}function tp(e){return e.charAt(0).toUpperCase()+e.slice(1)}const xi=e=>typeof e<"u",mn=e=>typeof e=="function",l0=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function wD(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const zt=Math.PI,Ut=2*zt,SD=Ut+zt,kh=Number.POSITIVE_INFINITY,ED=zt/180,ie=zt/2,Sn=zt/4,h0=zt*2/3,qs=Math.log10,os=Math.sign;function $o(e,t,i){return Math.abs(e-t)<i}function c0(e){const t=Math.round(e);e=$o(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(qs(e))),s=e/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function TD(e){const t=[],i=Math.sqrt(e);let s;for(s=1;s<i;s++)e%s===0&&(t.push(s),t.push(e/s));return i===(i|0)&&t.push(i),t.sort((n,r)=>n-r).pop(),t}function so(e){return!isNaN(parseFloat(e))&&isFinite(e)}function AD(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function z1(e,t,i){let s,n,r;for(s=0,n=e.length;s<n;s++)r=e[s][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function ki(e){return e*(zt/180)}function ep(e){return e*(180/zt)}function u0(e){if(!ee(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function V1(e,t){const i=t.x-e.x,s=t.y-e.y,n=Math.sqrt(i*i+s*s);let r=Math.atan2(s,i);return r<-.5*zt&&(r+=Ut),{angle:r,distance:n}}function $d(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function CD(e,t){return(e-t+SD)%Ut-zt}function ti(e){return(e%Ut+Ut)%Ut}function ya(e,t,i,s){const n=ti(e),r=ti(t),o=ti(i),a=ti(r-n),l=ti(o-n),h=ti(n-r),c=ti(n-o);return n===r||n===o||s&&r===o||a>l&&h<c}function _e(e,t,i){return Math.max(t,Math.min(i,e))}function MD(e){return _e(e,-32768,32767)}function Ps(e,t,i,s=1e-6){return e>=Math.min(t,i)-s&&e<=Math.max(t,i)+s}function ip(e,t,i){i=i||(o=>e[o]<t);let s=e.length-1,n=0,r;for(;s-n>1;)r=n+s>>1,i(r)?n=r:s=r;return{lo:n,hi:s}}const Rs=(e,t,i,s)=>ip(e,i,s?n=>{const r=e[n][t];return r<i||r===i&&e[n+1][t]===i}:n=>e[n][t]<i),ID=(e,t,i)=>ip(e,i,s=>e[s][t]>=i);function PD(e,t,i){let s=0,n=e.length;for(;s<n&&e[s]<t;)s++;for(;n>s&&e[n-1]>i;)n--;return s>0||n<e.length?e.slice(s,n):e}const W1=["push","pop","shift","splice","unshift"];function RD(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),W1.forEach(i=>{const s="_onData"+tp(i),n=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function d0(e,t){const i=e._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(W1.forEach(r=>{delete e[r]}),delete e._chartjs)}function j1(e){const t=new Set;let i,s;for(i=0,s=e.length;i<s;++i)t.add(e[i]);return t.size===s?e:Array.from(t)}const X1=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Y1(e,t){let i=[],s=!1;return function(...n){i=n,s||(s=!0,X1.call(window,()=>{s=!1,e.apply(t,i)}))}}function DD(e,t){let i;return function(...s){return t?(clearTimeout(i),i=setTimeout(e,t,s)):e.apply(this,s),t}}const sp=e=>e==="start"?"left":e==="end"?"right":"center",Ee=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,OD=(e,t,i,s)=>e===(s?"left":"right")?i:e==="center"?(t+i)/2:t;function $1(e,t,i){const s=t.length;let n=0,r=s;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:h,max:c,minDefined:u,maxDefined:d}=o.getUserBounds();u&&(n=_e(Math.min(Rs(a,o.axis,h).lo,i?s:Rs(t,l,o.getPixelForValue(h)).lo),0,s-1)),d?r=_e(Math.max(Rs(a,o.axis,c,!0).hi+1,i?0:Rs(t,l,o.getPixelForValue(c),!0).hi+1),n,s)-n:r=s-n}return{start:n,count:r}}function Z1(e){const{xScale:t,yScale:i,_scaleRanges:s}=e,n={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!s)return e._scaleRanges=n,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,n),r}const _l=e=>e===0||e===1,f0=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ut/i)),p0=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ut/i)+1,Zo={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ie)+1,easeOutSine:e=>Math.sin(e*ie),easeInOutSine:e=>-.5*(Math.cos(zt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>_l(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>_l(e)?e:f0(e,.075,.3),easeOutElastic:e=>_l(e)?e:p0(e,.075,.3),easeInOutElastic(e){return _l(e)?e:e<.5?.5*f0(e*2,.1125,.45):.5+.5*p0(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Zo.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Zo.easeInBounce(e*2)*.5:Zo.easeOutBounce(e*2-1)*.5+.5};function K1(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function m0(e){return K1(e)?e:new ga(e)}function Au(e){return K1(e)?e:new ga(e).saturate(.5).darken(.1).hexString()}const kD=["x","y","borderWidth","radius","tension"],FD=["color","borderColor","backgroundColor"];function LD(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:FD},numbers:{type:"number",properties:kD}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function BD(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const g0=new Map;function ND(e,t){t=t||{};const i=e+JSON.stringify(t);let s=g0.get(i);return s||(s=new Intl.NumberFormat(e,t),g0.set(i,s)),s}function ka(e,t,i){return ND(t,i).format(e)}const q1={values(e){return Nt(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const s=this.chart.options.locale;let n,r=e;if(i.length>1){const h=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(h<1e-4||h>1e15)&&(n="scientific"),r=UD(e,i)}const o=qs(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ka(e,s,l)},logarithmic(e,t,i){if(e===0)return"0";const s=i[t].significand||e/Math.pow(10,Math.floor(qs(e)));return[1,2,3,5,10,15].includes(s)||t>.8*i.length?q1.numeric.call(this,e,t,i):""}};function UD(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var mc={formatters:q1};function GD(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const qn=Object.create(null),Zd=Object.create(null);function Ko(e,t){if(!t)return e;const i=t.split(".");for(let s=0,n=i.length;s<n;++s){const r=i[s];e=e[r]||(e[r]=Object.create(null))}return e}function Cu(e,t,i){return typeof t=="string"?_a(Ko(e,t),i):_a(Ko(e,""),t)}class HD{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>Au(n.backgroundColor),this.hoverBorderColor=(s,n)=>Au(n.borderColor),this.hoverColor=(s,n)=>Au(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return Cu(this,t,i)}get(t){return Ko(this,t)}describe(t,i){return Cu(Zd,t,i)}override(t,i){return Cu(qn,t,i)}route(t,i,s,n){const r=Ko(this,t),o=Ko(this,s),a="_"+i;Object.defineProperties(r,{[a]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],h=o[n];return St(l)?Object.assign({},h,l):yt(l,h)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}}var oe=new HD({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[LD,BD,GD]);function zD(e){return!e||It(e.size)||It(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Fh(e,t,i,s,n){let r=t[n];return r||(r=t[n]=e.measureText(n).width,i.push(n)),r>s&&(s=r),s}function VD(e,t,i,s){s=s||{};let n=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let o=0;const a=i.length;let l,h,c,u,d;for(l=0;l<a;l++)if(u=i[l],u!=null&&Nt(u)!==!0)o=Fh(e,n,r,o,u);else if(Nt(u))for(h=0,c=u.length;h<c;h++)d=u[h],d!=null&&!Nt(d)&&(o=Fh(e,n,r,o,d));e.restore();const f=r.length/2;if(f>i.length){for(l=0;l<f;l++)delete n[r[l]];r.splice(0,f)}return o}function En(e,t,i){const s=e.currentDevicePixelRatio,n=i!==0?Math.max(i/2,.5):0;return Math.round((t-n)*s)/s+n}function _0(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Kd(e,t,i,s){J1(e,t,i,s,null)}function J1(e,t,i,s,n){let r,o,a,l,h,c,u,d;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*ED;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(i,s),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:n?e.ellipse(i,s,n/2,m,0,0,Ut):e.arc(i,s,m,0,Ut),e.closePath();break;case"triangle":c=n?n/2:m,e.moveTo(i+Math.sin(g)*c,s-Math.cos(g)*m),g+=h0,e.lineTo(i+Math.sin(g)*c,s-Math.cos(g)*m),g+=h0,e.lineTo(i+Math.sin(g)*c,s-Math.cos(g)*m),e.closePath();break;case"rectRounded":h=m*.516,l=m-h,o=Math.cos(g+Sn)*l,u=Math.cos(g+Sn)*(n?n/2-h:l),a=Math.sin(g+Sn)*l,d=Math.sin(g+Sn)*(n?n/2-h:l),e.arc(i-u,s-a,h,g-zt,g-ie),e.arc(i+d,s-o,h,g-ie,g),e.arc(i+u,s+a,h,g,g+ie),e.arc(i-d,s+o,h,g+ie,g+zt),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,c=n?n/2:l,e.rect(i-c,s-l,2*c,2*l);break}g+=Sn;case"rectRot":u=Math.cos(g)*(n?n/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(n?n/2:m),e.moveTo(i-u,s-a),e.lineTo(i+d,s-o),e.lineTo(i+u,s+a),e.lineTo(i-d,s+o),e.closePath();break;case"crossRot":g+=Sn;case"cross":u=Math.cos(g)*(n?n/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(n?n/2:m),e.moveTo(i-u,s-a),e.lineTo(i+u,s+a),e.moveTo(i+d,s-o),e.lineTo(i-d,s+o);break;case"star":u=Math.cos(g)*(n?n/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(n?n/2:m),e.moveTo(i-u,s-a),e.lineTo(i+u,s+a),e.moveTo(i+d,s-o),e.lineTo(i-d,s+o),g+=Sn,u=Math.cos(g)*(n?n/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(n?n/2:m),e.moveTo(i-u,s-a),e.lineTo(i+u,s+a),e.moveTo(i+d,s-o),e.lineTo(i-d,s+o);break;case"line":o=n?n/2:Math.cos(g)*m,a=Math.sin(g)*m,e.moveTo(i-o,s-a),e.lineTo(i+o,s+a);break;case"dash":e.moveTo(i,s),e.lineTo(i+Math.cos(g)*(n?n/2:m),s+Math.sin(g)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function ba(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function gc(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function _c(e){e.restore()}function WD(e,t,i,s,n){if(!t)return e.lineTo(i.x,i.y);if(n==="middle"){const r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else n==="after"!=!!s?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function jD(e,t,i,s){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function Jn(e,t,i,s,n,r={}){const o=Nt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,h;for(e.save(),e.font=n.string,XD(e,r),l=0;l<o.length;++l)h=o[l],r.backdrop&&$D(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),It(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(h,i,s,r.maxWidth)),e.fillText(h,i,s,r.maxWidth),YD(e,i,s,h,r),s+=n.lineHeight;e.restore()}function XD(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),It(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function YD(e,t,i,s,n){if(n.strikethrough||n.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,h=i+r.actualBoundingBoxDescent,c=n.strikethrough?(l+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(o,c),e.lineTo(a,c),e.stroke()}}function $D(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function xa(e,t){const{x:i,y:s,w:n,h:r,radius:o}=t;e.arc(i+o.topLeft,s+o.topLeft,o.topLeft,-ie,zt,!0),e.lineTo(i,s+r-o.bottomLeft),e.arc(i+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,zt,ie,!0),e.lineTo(i+n-o.bottomRight,s+r),e.arc(i+n-o.bottomRight,s+r-o.bottomRight,o.bottomRight,ie,0,!0),e.lineTo(i+n,s+o.topRight),e.arc(i+n-o.topRight,s+o.topRight,o.topRight,0,-ie,!0),e.lineTo(i+o.topLeft,s)}const ZD=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,KD=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function qD(e,t){const i=(""+e).match(ZD);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const JD=e=>+e||0;function np(e,t){const i={},s=St(t),n=s?Object.keys(t):t,r=St(e)?s?o=>yt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of n)i[o]=JD(r(o));return i}function Q1(e){return np(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Vn(e){return np(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Re(e){const t=Q1(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function de(e,t){e=e||{},t=t||oe.font;let i=yt(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let s=yt(e.style,t.style);s&&!(""+s).match(KD)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:yt(e.family,t.family),lineHeight:qD(yt(e.lineHeight,t.lineHeight),i),size:i,style:s,weight:yt(e.weight,t.weight),string:""};return n.string=zD(n),n}function Fo(e,t,i,s){let n=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),n=!1),i!==void 0&&Nt(a)&&(a=a[i%a.length],n=!1),a!==void 0))return s&&!n&&(s.cacheable=!1),a}function QD(e,t,i){const{min:s,max:n}=e,r=G1(t,(n-s)/2),o=(a,l)=>i&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(n,r)}}function _n(e,t){return Object.assign(Object.create(e),t)}function rp(e,t=[""],i=e,s,n=()=>e[0]){xi(s)||(s=sx("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:n,override:o=>rp([o,...e],t,i,s)};return new Proxy(r,{deleteProperty(o,a){return delete o[a],delete o._keys,delete e[0][a],!0},get(o,a){return ex(o,a,()=>aO(a,t,e,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(o,a){return b0(o).includes(a)},ownKeys(o){return b0(o)},set(o,a,l){const h=o._storage||(o._storage=n());return o[a]=h[a]=l,delete o._keys,!0}})}function no(e,t,i,s){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:tx(e,s),setContext:r=>no(e,r,i,s),override:r=>no(e.override(r),t,i,s)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return ex(r,o,()=>eO(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function tx(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:i,indexable:s,isScriptable:mn(i)?i:()=>i,isIndexable:mn(s)?s:()=>s}}const tO=(e,t)=>e?e+tp(t):t,op=(e,t)=>St(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ex(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const s=i();return e[t]=s,s}function eO(e,t,i){const{_proxy:s,_context:n,_subProxy:r,_descriptors:o}=e;let a=s[t];return mn(a)&&o.isScriptable(t)&&(a=iO(t,a,e,i)),Nt(a)&&a.length&&(a=sO(t,a,e,o.isIndexable)),op(t,a)&&(a=no(a,n,r&&r[t],o)),a}function iO(e,t,i,s){const{_proxy:n,_context:r,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);return a.add(e),t=t(r,o||s),a.delete(e),op(e,t)&&(t=ap(n._scopes,n,e,t)),t}function sO(e,t,i,s){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=i;if(xi(r.index)&&s(e))t=t[r.index%t.length];else if(St(t[0])){const l=t,h=n._scopes.filter(c=>c!==l);t=[];for(const c of l){const u=ap(h,n,e,c);t.push(no(u,r,o&&o[e],a))}}return t}function ix(e,t,i){return mn(e)?e(t,i):e}const nO=(e,t)=>e===!0?t:typeof e=="string"?pn(t,e):void 0;function rO(e,t,i,s,n){for(const r of t){const o=nO(i,r);if(o){e.add(o);const a=ix(o._fallback,i,n);if(xi(a)&&a!==i&&a!==s)return a}else if(o===!1&&xi(s)&&i!==s)return null}return!1}function ap(e,t,i,s){const n=t._rootScopes,r=ix(t._fallback,i,s),o=[...e,...n],a=new Set;a.add(s);let l=y0(a,o,i,r||i,s);return l===null||xi(r)&&r!==i&&(l=y0(a,o,r,l,s),l===null)?!1:rp(Array.from(a),[""],n,r,()=>oO(t,i,s))}function y0(e,t,i,s,n){for(;i;)i=rO(e,t,i,s,n);return i}function oO(e,t,i){const s=e._getTarget();t in s||(s[t]={});const n=s[t];return Nt(n)&&St(i)?i:n||{}}function aO(e,t,i,s){let n;for(const r of t)if(n=sx(tO(r,e),i),xi(n))return op(e,n)?ap(i,s,e,n):n}function sx(e,t){for(const i of t){if(!i)continue;const s=i[e];if(xi(s))return s}}function b0(e){let t=e._keys;return t||(t=e._keys=lO(e._scopes)),t}function lO(e){const t=new Set;for(const i of e)for(const s of Object.keys(i).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function nx(e,t,i,s){const{iScale:n}=e,{key:r="r"}=this._parsing,o=new Array(s);let a,l,h,c;for(a=0,l=s;a<l;++a)h=a+i,c=t[h],o[a]={r:n.parse(pn(c,r),h)};return o}const hO=Number.EPSILON||1e-14,ro=(e,t)=>t<e.length&&!e[t].skip&&e[t],rx=e=>e==="x"?"y":"x";function cO(e,t,i,s){const n=e.skip?t:e,r=t,o=i.skip?t:i,a=$d(r,n),l=$d(o,r);let h=a/(a+l),c=l/(a+l);h=isNaN(h)?0:h,c=isNaN(c)?0:c;const u=s*h,d=s*c;return{previous:{x:r.x-u*(o.x-n.x),y:r.y-u*(o.y-n.y)},next:{x:r.x+d*(o.x-n.x),y:r.y+d*(o.y-n.y)}}}function uO(e,t,i){const s=e.length;let n,r,o,a,l,h=ro(e,0);for(let c=0;c<s-1;++c)if(l=h,h=ro(e,c+1),!(!l||!h)){if($o(t[c],0,hO)){i[c]=i[c+1]=0;continue}n=i[c]/t[c],r=i[c+1]/t[c],a=Math.pow(n,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),i[c]=n*o*t[c],i[c+1]=r*o*t[c])}}function dO(e,t,i="x"){const s=rx(i),n=e.length;let r,o,a,l=ro(e,0);for(let h=0;h<n;++h){if(o=a,a=l,l=ro(e,h+1),!a)continue;const c=a[i],u=a[s];o&&(r=(c-o[i])/3,a[`cp1${i}`]=c-r,a[`cp1${s}`]=u-r*t[h]),l&&(r=(l[i]-c)/3,a[`cp2${i}`]=c+r,a[`cp2${s}`]=u+r*t[h])}}function fO(e,t="x"){const i=rx(t),s=e.length,n=Array(s).fill(0),r=Array(s);let o,a,l,h=ro(e,0);for(o=0;o<s;++o)if(a=l,l=h,h=ro(e,o+1),!!l){if(h){const c=h[t]-l[t];n[o]=c!==0?(h[i]-l[i])/c:0}r[o]=a?h?os(n[o-1])!==os(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}uO(e,n,r),dO(e,r,t)}function yl(e,t,i){return Math.max(Math.min(e,i),t)}function pO(e,t){let i,s,n,r,o,a=ba(e[0],t);for(i=0,s=e.length;i<s;++i)o=r,r=a,a=i<s-1&&ba(e[i+1],t),r&&(n=e[i],o&&(n.cp1x=yl(n.cp1x,t.left,t.right),n.cp1y=yl(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=yl(n.cp2x,t.left,t.right),n.cp2y=yl(n.cp2y,t.top,t.bottom)))}function mO(e,t,i,s,n){let r,o,a,l;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")fO(e,n);else{let h=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=cO(h,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,h=a}t.capBezierPoints&&pO(e,i)}function ox(){return typeof window<"u"&&typeof document<"u"}function lp(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Lh(e,t,i){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[i])):s=e,s}const yc=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function gO(e,t){return yc(e).getPropertyValue(t)}const _O=["top","right","bottom","left"];function Wn(e,t,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const r=_O[n];s[r]=parseFloat(e[t+"-"+r+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const yO=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function bO(e,t){const i=e.touches,s=i&&i.length?i[0]:e,{offsetX:n,offsetY:r}=s;let o=!1,a,l;if(yO(n,r,e.target))a=n,l=r;else{const h=t.getBoundingClientRect();a=s.clientX-h.left,l=s.clientY-h.top,o=!0}return{x:a,y:l,box:o}}function Dn(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:s}=t,n=yc(i),r=n.boxSizing==="border-box",o=Wn(n,"padding"),a=Wn(n,"border","width"),{x:l,y:h,box:c}=bO(e,i),u=o.left+(c&&a.left),d=o.top+(c&&a.top);let{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*i.width/s),y:Math.round((h-d)/p*i.height/s)}}function xO(e,t,i){let s,n;if(t===void 0||i===void 0){const r=lp(e);if(!r)t=e.clientWidth,i=e.clientHeight;else{const o=r.getBoundingClientRect(),a=yc(r),l=Wn(a,"border","width"),h=Wn(a,"padding");t=o.width-h.width-l.width,i=o.height-h.height-l.height,s=Lh(a.maxWidth,r,"clientWidth"),n=Lh(a.maxHeight,r,"clientHeight")}}return{width:t,height:i,maxWidth:s||kh,maxHeight:n||kh}}const bl=e=>Math.round(e*10)/10;function vO(e,t,i,s){const n=yc(e),r=Wn(n,"margin"),o=Lh(n.maxWidth,e,"clientWidth")||kh,a=Lh(n.maxHeight,e,"clientHeight")||kh,l=xO(e,t,i);let{width:h,height:c}=l;if(n.boxSizing==="content-box"){const d=Wn(n,"border","width"),f=Wn(n,"padding");h-=f.width+d.width,c-=f.height+d.height}return h=Math.max(0,h-r.width),c=Math.max(0,s?h/s:c-r.height),h=bl(Math.min(h,o,l.maxWidth)),c=bl(Math.min(c,a,l.maxHeight)),h&&!c&&(c=bl(h/2)),(t!==void 0||i!==void 0)&&s&&l.height&&c>l.height&&(c=l.height,h=bl(Math.floor(c*s))),{width:h,height:c}}function x0(e,t,i){const s=t||1,n=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==n||o.width!==r?(e.currentDevicePixelRatio=s,o.height=n,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const wO=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function v0(e,t){const i=gO(e,t),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function On(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function SO(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:s==="middle"?i<.5?e.y:t.y:s==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function EO(e,t,i,s){const n={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=On(e,n,i),a=On(n,r,i),l=On(r,t,i),h=On(o,a,i),c=On(a,l,i);return On(h,c,i)}const TO=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,s){return i-s},leftForLtr(i,s){return i-s}}},AO=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Vr(e,t,i){return e?TO(t,i):AO()}function ax(e,t){let i,s;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=s)}function lx(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function hx(e){return e==="angle"?{between:ya,compare:CD,normalize:ti}:{between:Ps,compare:(t,i)=>t-i,normalize:t=>t}}function w0({start:e,end:t,count:i,loop:s,style:n}){return{start:e%i,end:t%i,loop:s&&(t-e+1)%i===0,style:n}}function CO(e,t,i){const{property:s,start:n,end:r}=i,{between:o,normalize:a}=hx(s),l=t.length;let{start:h,end:c,loop:u}=e,d,f;if(u){for(h+=l,c+=l,d=0,f=l;d<f&&o(a(t[h%l][s]),n,r);++d)h--,c--;h%=l,c%=l}return c<h&&(c+=l),{start:h,end:c,loop:u,style:e.style}}function cx(e,t,i){if(!i)return[e];const{property:s,start:n,end:r}=i,o=t.length,{compare:a,between:l,normalize:h}=hx(s),{start:c,end:u,loop:d,style:f}=CO(e,t,i),p=[];let m=!1,g=null,_,y,b;const v=()=>l(n,b,_)&&a(n,b)!==0,x=()=>a(r,_)===0||l(r,b,_),T=()=>m||v(),S=()=>!m||x();for(let A=c,M=c;A<=u;++A)y=t[A%o],!y.skip&&(_=h(y[s]),_!==b&&(m=l(_,n,r),g===null&&T()&&(g=a(_,n)===0?A:M),g!==null&&S()&&(p.push(w0({start:g,end:A,loop:d,count:o,style:f})),g=null),M=A,b=_));return g!==null&&p.push(w0({start:g,end:u,loop:d,count:o,style:f})),p}function ux(e,t){const i=[],s=e.segments;for(let n=0;n<s.length;n++){const r=cx(s[n],e.points,t);r.length&&i.push(...r)}return i}function MO(e,t,i,s){let n=0,r=t-1;if(i&&!s)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,i&&(r+=n);r>n&&e[r%t].skip;)r--;return r%=t,{start:n,end:r}}function IO(e,t,i,s){const n=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=i;++l){const h=e[l%n];h.skip||h.stop?a.skip||(s=!1,r.push({start:t%n,end:(l-1)%n,loop:s}),t=o=h.stop?l:null):(o=l,a.skip&&(t=l)),a=h}return o!==null&&r.push({start:t%n,end:o%n,loop:s}),r}function PO(e,t){const i=e.points,s=e.options.spanGaps,n=i.length;if(!n)return[];const r=!!e._loop,{start:o,end:a}=MO(i,n,r,s);if(s===!0)return S0(e,[{start:o,end:a,loop:r}],i,t);const l=a<o?a+n:a,h=!!e._fullLoop&&o===0&&a===n-1;return S0(e,IO(i,o,l,h),i,t)}function S0(e,t,i,s){return!s||!s.setContext||!i?t:RO(e,t,i,s)}function RO(e,t,i,s){const n=e._chart.getContext(),r=E0(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=i.length,h=[];let c=r,u=t[0].start,d=u;function f(p,m,g,_){const y=a?-1:1;if(p!==m){for(p+=l;i[p%l].skip;)p-=y;for(;i[m%l].skip;)m+=y;p%l!==m%l&&(h.push({start:p%l,end:m%l,loop:g,style:_}),c=_,u=m%l)}}for(const p of t){u=a?u:p.start;let m=i[u%l],g;for(d=u+1;d<=p.end;d++){const _=i[d%l];g=E0(s.setContext(_n(n,{type:"segment",p0:m,p1:_,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),DO(g,c)&&f(u,d-1,p.loop,c),m=_,c=g}u<d-1&&f(u,d-1,p.loop,c)}return h}function E0(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function DO(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class OO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,s,n){const r=i.listeners[n],o=i.duration;r.forEach(a=>a({chart:t,initial:i.initial,numSteps:o,currentStep:Math.min(s-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=X1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,s,t,"progress")),r.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),i+=r.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let s=i.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,s)),s}listen(t,i,s){this._getAnims(t).listeners[i].push(s)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const s=i.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var vs=new OO;const T0="transparent",kO={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const s=m0(e||T0),n=s.valid&&m0(t||T0);return n&&n.valid?n.mix(s,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class FO{constructor(t,i,s,n){const r=i[s];n=Fo([t.to,n,r,t.from]);const o=Fo([t.from,r,n]);this._active=!0,this._fn=t.fn||kO[t.type||typeof o],this._easing=Zo[t.easing]||Zo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,i,s){if(this._active){this._notify(!1);const n=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Fo([t.to,i,n,t.from]),this._from=Fo([t.from,n,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,s=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||i<s),!this._active){this._target[n]=a,this._notify(!0);return}if(i<0){this._target[n]=r;return}l=i/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,s)=>{t.push({res:i,rej:s})})}_notify(t){const i=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][i]()}}class dx{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!St(t))return;const i=Object.keys(oe.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!St(r))return;const o={};for(const a of i)o[a]=r[a];(Nt(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,i){const s=i.options,n=BO(t,s);if(!n)return[];const r=this._createAnimations(n,s);return s.$shared&&LO(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,i){const s=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(i),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const h=o[l];if(h.charAt(0)==="$")continue;if(h==="options"){n.push(...this._animateOptions(t,i));continue}const c=i[h];let u=r[h];const d=s.get(h);if(u)if(d&&u.active()){u.update(d,c,a);continue}else u.cancel();if(!d||!d.duration){t[h]=c;continue}r[h]=u=new FO(d,t,h,c),n.push(u)}return n}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const s=this._createAnimations(t,i);if(s.length)return vs.add(this._chart,s),!0}}function LO(e,t){const i=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const r=e[s[n]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function BO(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function A0(e,t){const i=e&&e.options||{},s=i.reverse,n=i.min===void 0?t:0,r=i.max===void 0?t:0;return{start:s?r:n,end:s?n:r}}function NO(e,t,i){if(i===!1)return!1;const s=A0(e,i),n=A0(t,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function UO(e){let t,i,s,n;return St(e)?(t=e.top,i=e.right,s=e.bottom,n=e.left):t=i=s=n=e,{top:t,right:i,bottom:s,left:n,disabled:e===!1}}function fx(e,t){const i=[],s=e._getSortedDatasetMetas(t);let n,r;for(n=0,r=s.length;n<r;++n)i.push(s[n].index);return i}function C0(e,t,i,s={}){const n=e.keys,r=s.mode==="single";let o,a,l,h;if(t!==null){for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===i){if(s.all)continue;break}h=e.values[l],ee(h)&&(r||t===0||os(t)===os(h))&&(t+=h)}return t}}function GO(e){const t=Object.keys(e),i=new Array(t.length);let s,n,r;for(s=0,n=t.length;s<n;++s)r=t[s],i[s]={x:r,y:e[r]};return i}function M0(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function HO(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function zO(e){const{min:t,max:i,minDefined:s,maxDefined:n}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}function VO(e,t,i){const s=e[t]||(e[t]={});return s[i]||(s[i]={})}function I0(e,t,i,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const r=e[n.index];if(i&&r>0||!i&&r<0)return n.index}return null}function P0(e,t){const{chart:i,_cachedMeta:s}=e,n=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,h=o.axis,c=HO(r,o,s),u=t.length;let d;for(let f=0;f<u;++f){const p=t[f],{[l]:m,[h]:g}=p,_=p._stacks||(p._stacks={});d=_[h]=VO(n,c,m),d[a]=g,d._top=I0(d,o,!0,s.type),d._bottom=I0(d,o,!1,s.type);const y=d._visualValues||(d._visualValues={});y[a]=g}}function Mu(e,t){const i=e.scales;return Object.keys(i).filter(s=>i[s].axis===t).shift()}function WO(e,t){return _n(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function jO(e,t,i){return _n(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function wo(e,t){const i=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const n of t){const r=n._stacks;if(!r||r[s]===void 0||r[s][i]===void 0)return;delete r[s][i],r[s]._visualValues!==void 0&&r[s]._visualValues[i]!==void 0&&delete r[s]._visualValues[i]}}}const Iu=e=>e==="reset"||e==="none",R0=(e,t)=>t?e:Object.assign({},e),XO=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:fx(i,!0),values:null};class Gi{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=M0(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&wo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,s=this.getDataset(),n=(u,d,f,p)=>u==="x"?d:u==="r"?p:f,r=i.xAxisID=yt(s.xAxisID,Mu(t,"x")),o=i.yAxisID=yt(s.yAxisID,Mu(t,"y")),a=i.rAxisID=yt(s.rAxisID,Mu(t,"r")),l=i.indexAxis,h=i.iAxisID=n(l,r,o,a),c=i.vAxisID=n(l,o,r,a);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(h),i.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&d0(this._data,this),t._stacked&&wo(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),s=this._data;if(St(i))this._data=GO(i);else if(s!==i){if(s){d0(s,this);const n=this._cachedMeta;wo(n),n._parsed=[]}i&&Object.isExtensible(i)&&RD(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const r=i._stacked;i._stacked=M0(i.vScale,i),i.stack!==s.stack&&(n=!0,wo(i),i.stack=s.stack),this._resyncElements(t),(n||r!==i._stacked)&&P0(this,i._parsed)}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:s,_data:n}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&i===n.length?!0:s._sorted,h=t>0&&s._parsed[t-1],c,u,d;if(this._parsing===!1)s._parsed=n,s._sorted=!0,d=n;else{Nt(n[t])?d=this.parseArrayData(s,n,t,i):St(n[t])?d=this.parseObjectData(s,n,t,i):d=this.parsePrimitiveData(s,n,t,i);const f=()=>u[a]===null||h&&u[a]<h[a];for(c=0;c<i;++c)s._parsed[c+t]=u=d[c],l&&(f()&&(l=!1),h=u);s._sorted=l}o&&P0(this,d)}parsePrimitiveData(t,i,s,n){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,h=r.getLabels(),c=r===o,u=new Array(n);let d,f,p;for(d=0,f=n;d<f;++d)p=d+s,u[d]={[a]:c||r.parse(h[p],p),[l]:o.parse(i[p],p)};return u}parseArrayData(t,i,s,n){const{xScale:r,yScale:o}=t,a=new Array(n);let l,h,c,u;for(l=0,h=n;l<h;++l)c=l+s,u=i[c],a[l]={x:r.parse(u[0],c),y:o.parse(u[1],c)};return a}parseObjectData(t,i,s,n){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=new Array(n);let c,u,d,f;for(c=0,u=n;c<u;++c)d=c+s,f=i[d],h[c]={x:r.parse(pn(f,a),d),y:o.parse(pn(f,l),d)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,s){const n=this.chart,r=this._cachedMeta,o=i[t.axis],a={keys:fx(n,!0),values:i._stacks[t.axis]._visualValues};return C0(a,o,r.index,{mode:s})}updateRangeFromParsed(t,i,s,n){const r=s[i.axis];let o=r===null?NaN:r;const a=n&&s._stacks[i.axis];n&&a&&(n.values=a,o=C0(n,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,i){const s=this._cachedMeta,n=s._parsed,r=s._sorted&&t===s.iScale,o=n.length,a=this._getOtherScale(t),l=XO(i,s,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=zO(a);let d,f;function p(){f=n[d];const m=f[a.axis];return!ee(f[t.axis])||c>m||u<m}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(h,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(h,t,f,l);break}}return h}getAllParsedValues(t){const i=this._cachedMeta._parsed,s=[];let n,r,o;for(n=0,r=i.length;n<r;++n)o=i[n][t.axis],ee(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,s=i.iScale,n=i.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=UO(yt(this.options.clip,NO(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,s=this._cachedMeta,n=s.data||[],r=i.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,h=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(t,r,a,l),c=a;c<a+l;++c){const u=n[c];u.hidden||(u.active&&h?o.push(u):u.draw(t,r))}for(c=0;c<o.length;++c)o[c].draw(t,r)}getStyle(t,i){const s=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,i,s){const n=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=jO(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=n.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=WO(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",s){const n=i==="active",r=this._cachedDataOpts,o=t+"-"+i,a=r[o],l=this.enableOptionSharing&&xi(s);if(a)return R0(a,l);const h=this.chart.config,c=h.datasetElementScopeKeys(this._type,t),u=n?[`${t}Hover`,"hover",t,""]:[t,""],d=h.getOptionScopes(this.getDataset(),c),f=Object.keys(oe.elements[t]),p=()=>this.getContext(s,n,i),m=h.resolveNamedOptions(d,f,p,u);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(R0(m,l))),m}_resolveAnimations(t,i,s){const n=this.chart,r=this._cachedDataOpts,o=`animation-${i}`,a=r[o];if(a)return a;let l;if(n.options.animation!==!1){const c=this.chart.config,u=c.datasetAnimationScopeKeys(this._type,i),d=c.getOptionScopes(this.getDataset(),u);l=c.createResolver(d,this.getContext(t,s,i))}const h=new dx(n,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||Iu(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const s=this.resolveDataElementOptions(t,i),n=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(i,r)||r!==n;return this.updateSharedOptions(r,i,s),{sharedOptions:r,includeOptions:o}}updateElement(t,i,s,n){Iu(n)?Object.assign(t,s):this._resolveAnimations(i,n).update(t,s)}updateSharedOptions(t,i,s){t&&!Iu(i)&&this._resolveAnimations(void 0,i).update(t,s)}_setStyle(t,i,s,n){t.active=n;const r=this.getStyle(i,n);this._resolveAnimations(i,s,n).update(t,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(t,i,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,i,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,s=this._cachedMeta.data;for(const[a,l,h]of this._syncList)this[a](l,h);this._syncList=[];const n=s.length,r=i.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,t):r<n&&this._removeElements(r,n-r)}_insertElements(t,i,s=!0){const n=this._cachedMeta,r=n.data,o=t+i;let a;const l=h=>{for(h.length+=i,a=h.length-1;a>=o;a--)h[a]=h[a-i]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,i),s&&this.updateElements(r,t,i,"reset")}updateElements(t,i,s,n){}_removeElements(t,i){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(t,i);s._stacked&&wo(s,n)}s.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,s,n]=t;this[i](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}nt(Gi,"defaults",{}),nt(Gi,"datasetElementType",null),nt(Gi,"dataElementType",null);function YO(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let s=[];for(let n=0,r=i.length;n<r;n++)s=s.concat(i[n].controller.getAllParsedValues(e));e._cache.$bar=j1(s.sort((n,r)=>n-r))}return e._cache.$bar}function $O(e){const t=e.iScale,i=YO(t,e.type);let s=t._length,n,r,o,a;const l=()=>{o===32767||o===-32768||(xi(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(n=0,r=i.length;n<r;++n)o=t.getPixelForValue(i[n]),l();for(a=void 0,n=0,r=t.ticks.length;n<r;++n)o=t.getPixelForTick(n),l();return s}function ZO(e,t,i,s){const n=i.barThickness;let r,o;return It(n)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=n*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[e]-r/2}}function KO(e,t,i,s){const n=t.pixels,r=n[e];let o=e>0?n[e-1]:null,a=e<n.length-1?n[e+1]:null;const l=i.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const h=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:i.barPercentage,start:h}}function qO(e,t,i,s){const n=i.parse(e[0],s),r=i.parse(e[1],s),o=Math.min(n,r),a=Math.max(n,r);let l=o,h=a;Math.abs(o)>Math.abs(a)&&(l=a,h=o),t[i.axis]=h,t._custom={barStart:l,barEnd:h,start:n,end:r,min:o,max:a}}function px(e,t,i,s){return Nt(e)?qO(e,t,i,s):t[i.axis]=i.parse(e,s),t}function D0(e,t,i,s){const n=e.iScale,r=e.vScale,o=n.getLabels(),a=n===r,l=[];let h,c,u,d;for(h=i,c=i+s;h<c;++h)d=t[h],u={},u[n.axis]=a||n.parse(o[h],h),l.push(px(d,u,r,h));return l}function Pu(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function JO(e,t,i){return e!==0?os(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function QO(e){let t,i,s,n,r;return e.horizontal?(t=e.base>e.x,i="left",s="right"):(t=e.base<e.y,i="bottom",s="top"),t?(n="end",r="start"):(n="start",r="end"),{start:i,end:s,reverse:t,top:n,bottom:r}}function tk(e,t,i,s){let n=t.borderSkipped;const r={};if(!n){e.borderSkipped=r;return}if(n===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:h,bottom:c}=QO(e);n==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===s?n=h:(i._bottom||0)===s?n=c:(r[O0(c,o,a,l)]=!0,n=h)),r[O0(n,o,a,l)]=!0,e.borderSkipped=r}function O0(e,t,i,s){return s?(e=ek(e,t,i),e=k0(e,i,t)):e=k0(e,t,i),e}function ek(e,t,i){return e===t?i:e===i?t:e}function k0(e,t,i){return e==="start"?t:e==="end"?i:e}function ik(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}class jl extends Gi{parsePrimitiveData(t,i,s,n){return D0(t,i,s,n)}parseArrayData(t,i,s,n){return D0(t,i,s,n)}parseObjectData(t,i,s,n){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=r.axis==="x"?a:l,c=o.axis==="x"?a:l,u=[];let d,f,p,m;for(d=s,f=s+n;d<f;++d)m=i[d],p={},p[r.axis]=r.parse(pn(m,h),d),u.push(px(pn(m,c),p,o,d));return u}updateRangeFromParsed(t,i,s,n){super.updateRangeFromParsed(t,i,s,n);const r=s._custom;r&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:s,vScale:n}=i,r=this.getParsed(t),o=r._custom,a=Pu(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,s,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),h=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(i,n);for(let f=i;f<i+s;f++){const p=this.getParsed(f),m=r||It(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),g=this._calculateBarIndexPixels(f,c),_=(p._stacks||{})[a.axis],y={horizontal:h,base:m.base,enableBorderRadius:!_||Pu(p._custom)||o===_._top||o===_._bottom,x:h?m.head:g.center,y:h?g.center:m.head,height:h?g.size:Math.abs(m.size),width:h?Math.abs(m.size):g.size};d&&(y.options=u||this.resolveDataElementOptions(f,t[f].active?"active":n));const b=y.options||t[f].options;tk(y,b,_,o),ik(y,b,c.ratio),this.updateElement(t[f],f,y,n)}}_getStacks(t,i){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=s.options.stacked,o=[],a=l=>{const h=l.controller.getParsed(i),c=h&&h[l.vScale.axis];if(It(c)||isNaN(c))return!0};for(const l of n)if(!(i!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,s){const n=this._getStacks(t,s),r=i!==void 0?n.indexOf(i):-1;return r===-1?n.length-1:r}_getRuler(){const t=this.options,i=this._cachedMeta,s=i.iScale,n=[];let r,o;for(r=0,o=i.data.length;r<o;++r)n.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||$O(i),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:s,index:n},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),h=l._custom,c=Pu(h);let u=l[i.axis],d=0,f=s?this.applyStack(i,l,s):u,p,m;f!==u&&(d=f-u,f=u),c&&(u=h.barStart,f=h.barEnd-h.barStart,u!==0&&os(u)!==os(h.barEnd)&&(d=0),d+=u);const g=!It(r)&&!c?r:d;let _=i.getPixelForValue(g);if(this.chart.getDataVisibility(t)?p=i.getPixelForValue(d+f):p=_,m=p-_,Math.abs(m)<o){m=JO(m,i,a)*o,u===a&&(_-=m/2);const y=i.getPixelForDecimal(0),b=i.getPixelForDecimal(1),v=Math.min(y,b),x=Math.max(y,b);_=Math.max(Math.min(_,x),v),p=_+m,s&&!c&&(l._stacks[i.axis]._visualValues[n]=i.getValueForPixel(p)-i.getValueForPixel(_))}if(_===i.getPixelForValue(a)){const y=os(m)*i.getLineWidthForValue(a)/2;_+=y,m-=y}return{size:m,base:_,head:p,center:p+m/2}}_calculateBarIndexPixels(t,i){const s=i.scale,n=this.options,r=n.skipNull,o=yt(n.maxBarThickness,1/0);let a,l;if(i.grouped){const h=r?this._getStackCount(t):i.stackCount,c=n.barThickness==="flex"?KO(t,i,n,h):ZO(t,i,n,h),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=c.start+c.chunk*u+c.chunk/2,l=Math.min(o,c.chunk*c.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(o,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,i=t.vScale,s=t.data,n=s.length;let r=0;for(;r<n;++r)this.getParsed(r)[i.axis]!==null&&s[r].draw(this._ctx)}}nt(jl,"id","bar"),nt(jl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),nt(jl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Xl extends Gi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,s,n){const r=super.parsePrimitiveData(t,i,s,n);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(t,i,s,n){const r=super.parseArrayData(t,i,s,n);for(let o=0;o<r.length;o++){const a=i[s+o];r[o]._custom=yt(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(t,i,s,n){const r=super.parseObjectData(t,i,s,n);for(let o=0;o<r.length;o++){const a=i[s+o];r[o]._custom=yt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let i=0;for(let s=t.length-1;s>=0;--s)i=Math.max(i,t[s].size(this.resolveDataElementOptions(s))/2);return i>0&&i}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=i,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y),h=o._custom;return{label:s[t]||"",value:"("+a+", "+l+(h?", "+h:"")+")"}}update(t){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,s,n){const r=n==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:h}=this._getSharedOptions(i,n),c=o.axis,u=a.axis;for(let d=i;d<i+s;d++){const f=t[d],p=!r&&this.getParsed(d),m={},g=m[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[c]),_=m[u]=r?a.getBasePixel():a.getPixelForValue(p[u]);m.skip=isNaN(g)||isNaN(_),h&&(m.options=l||this.resolveDataElementOptions(d,f.active?"active":n),r&&(m.options.radius=0)),this.updateElement(f,d,m,n)}}resolveDataElementOptions(t,i){const s=this.getParsed(t);let n=super.resolveDataElementOptions(t,i);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return i!=="active"&&(n.radius=0),n.radius+=yt(s&&s._custom,r),n}}nt(Xl,"id","bubble"),nt(Xl,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),nt(Xl,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function sk(e,t,i){let s=1,n=1,r=0,o=0;if(t<Ut){const a=e,l=a+t,h=Math.cos(a),c=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(b,v,x)=>ya(b,a,l,!0)?1:Math.max(v,v*i,x,x*i),p=(b,v,x)=>ya(b,a,l,!0)?-1:Math.min(v,v*i,x,x*i),m=f(0,h,u),g=f(ie,c,d),_=p(zt,h,u),y=p(zt+ie,c,d);s=(m-_)/2,n=(g-y)/2,r=-(m+_)/2,o=-(g+y)/2}return{ratioX:s,ratioY:n,offsetX:r,offsetY:o}}class Bn extends Gi{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let r=l=>+s[l];if(St(s[t])){const{key:l="value"}=this._parsing;r=h=>+pn(s[h],l)}let o,a;for(o=t,a=t+i;o<a;++o)n._parsed[o]=r(o)}}_getRotation(){return ki(this.options.rotation-90)}_getCircumference(){return ki(this.options.circumference)}_getRotationExtents(){let t=Ut,i=-Ut;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,r=n._getRotation(),o=n._getCircumference();t=Math.min(t,r),i=Math.max(i,r+o)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:s}=i,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(_D(this.options.cutout,a),1),h=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:m}=sk(u,c,l),g=(s.width-o)/d,_=(s.height-o)/f,y=Math.max(Math.min(g,_)/2,0),b=G1(this.options.radius,y),v=Math.max(b*l,0),x=(b-v)/this._getVisibleDatasetWeightTotal();this.offsetX=p*b,this.offsetY=m*b,n.total=this.calculateTotal(),this.outerRadius=b-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,i){const s=this.options,n=this._cachedMeta,r=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*r/Ut)}updateElements(t,i,s,n){const r=n==="reset",o=this.chart,a=o.chartArea,h=o.options.animation,c=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=r&&h.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:m,includeOptions:g}=this._getSharedOptions(i,n);let _=this._getRotation(),y;for(y=0;y<i;++y)_+=this._circumference(y,r);for(y=i;y<i+s;++y){const b=this._circumference(y,r),v=t[y],x={x:c+this.offsetX,y:u+this.offsetY,startAngle:_,endAngle:_+b,circumference:b,outerRadius:p,innerRadius:f};g&&(x.options=m||this.resolveDataElementOptions(y,v.active?"active":n)),_+=b,this.updateElement(v,y,x,n)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let s=0,n;for(n=0;n<i.length;n++){const r=t._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!i[n].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?Ut*(Math.abs(t)/i):0}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=ka(i._parsed[t],s.options.locale);return{label:n[t]||"",value:r}}getMaxBorderWidth(t){let i=0;const s=this.chart;let n,r,o,a,l;if(!t){for(n=0,r=s.data.datasets.length;n<r;++n)if(s.isDatasetVisible(n)){o=s.getDatasetMeta(n),t=o.data,a=o.controller;break}}if(!t)return 0;for(n=0,r=t.length;n<r;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let s=0,n=t.length;s<n;++s){const r=this.resolveDataElementOptions(s);i=Math.max(i,r.offset||0,r.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(t){return Math.max(yt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}nt(Bn,"id","doughnut"),nt(Bn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),nt(Bn,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"}),nt(Bn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return i.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,s){s.chart.toggleDataVisibility(i.index),s.chart.update()}}}});class Yl extends Gi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:s,data:n=[],_dataset:r}=i,o=this.chart._animationsDisabled;let{start:a,count:l}=$1(i,n,o);this._drawStart=a,this._drawCount=l,Z1(i)&&(a=0,l=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=n;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:h},t),this.updateElements(n,a,l,t)}updateElements(t,i,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,n),d=o.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,g=so(p)?p:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||n==="none",y=i+s,b=t.length;let v=i>0&&this.getParsed(i-1);for(let x=0;x<b;++x){const T=t[x],S=_?T:{};if(x<i||x>=y){S.skip=!0;continue}const A=this.getParsed(x),M=It(A[f]),O=S[d]=o.getPixelForValue(A[d],x),C=S[f]=r||M?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[f],x);S.skip=isNaN(O)||isNaN(C)||M,S.stop=x>0&&Math.abs(A[d]-v[d])>g,m&&(S.parsed=A,S.raw=h.data[x]),u&&(S.options=c||this.resolveDataElementOptions(x,T.active?"active":n)),_||this.updateElement(T,x,S,n),v=A}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,s=i.options&&i.options.borderWidth||0,n=t.data||[];if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}nt(Yl,"id","line"),nt(Yl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),nt(Yl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class qo extends Gi{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=ka(i._parsed[t].r,s.options.locale);return{label:n[t]||"",value:r}}parseObjectData(t,i,s,n){return nx.bind(this)(t,i,s,n)}update(t){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){const t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<i.min&&(i.min=r),r>i.max&&(i.max=r))}),i}_updateRadius(){const t=this.chart,i=t.chartArea,s=t.options,n=Math.min(i.right-i.left,i.bottom-i.top),r=Math.max(n/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,i,s,n){const r=n==="reset",o=this.chart,l=o.options.animation,h=this._cachedMeta.rScale,c=h.xCenter,u=h.yCenter,d=h.getIndexAngle(0)-.5*zt;let f=d,p;const m=360/this.countVisibleElements();for(p=0;p<i;++p)f+=this._computeAngle(p,n,m);for(p=i;p<i+s;p++){const g=t[p];let _=f,y=f+this._computeAngle(p,n,m),b=o.getDataVisibility(p)?h.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=y,r&&(l.animateScale&&(b=0),l.animateRotate&&(_=y=d));const v={x:c,y:u,innerRadius:0,outerRadius:b,startAngle:_,endAngle:y,options:this.resolveDataElementOptions(p,g.active?"active":n)};this.updateElement(g,p,v,n)}}countVisibleElements(){const t=this._cachedMeta;let i=0;return t.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&i++}),i}_computeAngle(t,i,s){return this.chart.getDataVisibility(t)?ki(this.resolveDataElementOptions(t,i).angle||s):0}}nt(qo,"id","polarArea"),nt(qo,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),nt(qo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return i.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,s){s.chart.toggleDataVisibility(i.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class qd extends Bn{}nt(qd,"id","pie"),nt(qd,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class $l extends Gi{getLabelAndValue(t){const i=this._cachedMeta.vScale,s=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(s[i.axis])}}parseObjectData(t,i,s,n){return nx.bind(this)(t,i,s,n)}update(t){const i=this._cachedMeta,s=i.dataset,n=i.data||[],r=i.iScale.getLabels();if(s.points=n,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===n.length,options:o};this.updateElement(s,void 0,a,t)}this.updateElements(n,0,n.length,t)}updateElements(t,i,s,n){const r=this._cachedMeta.rScale,o=n==="reset";for(let a=i;a<i+s;a++){const l=t[a],h=this.resolveDataElementOptions(a,l.active?"active":n),c=r.getPointPositionForValue(a,this.getParsed(a).r),u=o?r.xCenter:c.x,d=o?r.yCenter:c.y,f={x:u,y:d,angle:c.angle,skip:isNaN(u)||isNaN(d),options:h};this.updateElement(l,a,f,n)}}}nt($l,"id","radar"),nt($l,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),nt($l,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Zl extends Gi{getLabelAndValue(t){const i=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=i,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:s[t]||"",value:"("+a+", "+l+")"}}update(t){const i=this._cachedMeta,{data:s=[]}=i,n=this.chart._animationsDisabled;let{start:r,count:o}=$1(i,s,n);if(this._drawStart=r,this._drawCount=o,Z1(i)&&(r=0,o=s.length),this.options.showLine){const{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:h},t)}this.updateElements(s,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,c=this.resolveDataElementOptions(i,n),u=this.getSharedOptions(c),d=this.includeOptions(n,u),f=o.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,_=so(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||n==="none";let b=i>0&&this.getParsed(i-1);for(let v=i;v<i+s;++v){const x=t[v],T=this.getParsed(v),S=y?x:{},A=It(T[p]),M=S[f]=o.getPixelForValue(T[f],v),O=S[p]=r||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[p],v);S.skip=isNaN(M)||isNaN(O)||A,S.stop=v>0&&Math.abs(T[f]-b[f])>_,g&&(S.parsed=T,S.raw=h.data[v]),d&&(S.options=u||this.resolveDataElementOptions(v,x.active?"active":n)),y||this.updateElement(x,v,S,n),b=T}this.updateSharedOptions(u,n,c)}getMaxOverflow(){const t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=t.dataset,n=s.options&&s.options.borderWidth||0;if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}}nt(Zl,"id","scatter"),nt(Zl,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),nt(Zl,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var nk=Object.freeze({__proto__:null,BarController:jl,BubbleController:Xl,DoughnutController:Bn,LineController:Yl,PolarAreaController:qo,PieController:qd,RadarController:$l,ScatterController:Zl});function Tn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hp{static override(t){Object.assign(hp.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return Tn()}parse(){return Tn()}format(){return Tn()}add(){return Tn()}diff(){return Tn()}startOf(){return Tn()}endOf(){return Tn()}}var rk={_date:hp};function ok(e,t,i,s){const{controller:n,data:r,_sorted:o}=e,a=n._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?ID:Rs;if(s){if(n._sharedOptions){const h=r[0],c=typeof h.getRange=="function"&&h.getRange(t);if(c){const u=l(r,t,i-c),d=l(r,t,i+c);return{lo:u.lo,hi:d.hi}}}}else return l(r,t,i)}return{lo:0,hi:r.length-1}}function Fa(e,t,i,s,n){const r=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=r.length;a<l;++a){const{index:h,data:c}=r[a],{lo:u,hi:d}=ok(r[a],t,o,n);for(let f=u;f<=d;++f){const p=c[f];p.skip||s(p,h,f)}}}function ak(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(s,n){const r=t?Math.abs(s.x-n.x):0,o=i?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Ru(e,t,i,s,n){const r=[];return!n&&!e.isPointInArea(t)||Fa(e,i,t,function(a,l,h){!n&&!ba(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:h})},!0),r}function lk(e,t,i,s){let n=[];function r(o,a,l){const{startAngle:h,endAngle:c}=o.getProps(["startAngle","endAngle"],s),{angle:u}=V1(o,{x:t.x,y:t.y});ya(u,h,c)&&n.push({element:o,datasetIndex:a,index:l})}return Fa(e,i,t,r),n}function hk(e,t,i,s,n,r){let o=[];const a=ak(i);let l=Number.POSITIVE_INFINITY;function h(c,u,d){const f=c.inRange(t.x,t.y,n);if(s&&!f)return;const p=c.getCenterPoint(n);if(!(!!r||e.isPointInArea(p))&&!f)return;const g=a(t,p);g<l?(o=[{element:c,datasetIndex:u,index:d}],l=g):g===l&&o.push({element:c,datasetIndex:u,index:d})}return Fa(e,i,t,h),o}function Du(e,t,i,s,n,r){return!r&&!e.isPointInArea(t)?[]:i==="r"&&!s?lk(e,t,i,n):hk(e,t,i,s,n,r)}function F0(e,t,i,s,n){const r=[],o=i==="x"?"inXRange":"inYRange";let a=!1;return Fa(e,i,t,(l,h,c)=>{l[o](t[i],n)&&(r.push({element:l,datasetIndex:h,index:c}),a=a||l.inRange(t.x,t.y,n))}),s&&!a?[]:r}var ck={evaluateInteractionItems:Fa,modes:{index(e,t,i,s){const n=Dn(t,e),r=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?Ru(e,n,r,s,o):Du(e,n,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const c=a[0].index,u=h.data[c];u&&!u.skip&&l.push({element:u,datasetIndex:h.index,index:c})}),l):[]},dataset(e,t,i,s){const n=Dn(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?Ru(e,n,r,s,o):Du(e,n,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,h=e.getDatasetMeta(l).data;a=[];for(let c=0;c<h.length;++c)a.push({element:h[c],datasetIndex:l,index:c})}return a},point(e,t,i,s){const n=Dn(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return Ru(e,n,r,s,o)},nearest(e,t,i,s){const n=Dn(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return Du(e,n,r,i.intersect,s,o)},x(e,t,i,s){const n=Dn(t,e);return F0(e,n,"x",i.intersect,s)},y(e,t,i,s){const n=Dn(t,e);return F0(e,n,"y",i.intersect,s)}}};const mx=["left","top","right","bottom"];function So(e,t){return e.filter(i=>i.pos===t)}function L0(e,t){return e.filter(i=>mx.indexOf(i.pos)===-1&&i.box.axis===t)}function Eo(e,t){return e.sort((i,s)=>{const n=t?s:i,r=t?i:s;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function uk(e){const t=[];let i,s,n,r,o,a;for(i=0,s=(e||[]).length;i<s;++i)n=e[i],{position:r,options:{stack:o,stackWeight:a=1}}=n,t.push({index:i,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return t}function dk(e){const t={};for(const i of e){const{stack:s,pos:n,stackWeight:r}=i;if(!s||!mx.includes(n))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function fk(e,t){const i=dk(e),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,h=i[a.stack],c=h&&a.stackWeight/h.weight;a.horizontal?(a.width=c?c*s:l&&t.availableWidth,a.height=n):(a.width=s,a.height=c?c*n:l&&t.availableHeight)}return i}function pk(e){const t=uk(e),i=Eo(t.filter(h=>h.box.fullSize),!0),s=Eo(So(t,"left"),!0),n=Eo(So(t,"right")),r=Eo(So(t,"top"),!0),o=Eo(So(t,"bottom")),a=L0(t,"x"),l=L0(t,"y");return{fullSize:i,leftAndTop:s.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:So(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function B0(e,t,i,s){return Math.max(e[i],t[i])+Math.max(e[s],t[s])}function gx(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function mk(e,t,i,s){const{pos:n,box:r}=i,o=e.maxPadding;if(!St(n)){i.size&&(e[n]-=i.size);const u=s[i.stack]||{size:0,count:1};u.size=Math.max(u.size,i.horizontal?r.height:r.width),i.size=u.size/u.count,e[n]+=i.size}r.getPadding&&gx(o,r.getPadding());const a=Math.max(0,t.outerWidth-B0(o,e,"left","right")),l=Math.max(0,t.outerHeight-B0(o,e,"top","bottom")),h=a!==e.w,c=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}function gk(e){const t=e.maxPadding;function i(s){const n=Math.max(t[s]-e[s],0);return e[s]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function _k(e,t){const i=t.maxPadding;function s(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(t[o],i[o])}),r}return s(e?["left","right"]:["top","bottom"])}function Lo(e,t,i,s){const n=[];let r,o,a,l,h,c;for(r=0,o=e.length,h=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,_k(a.horizontal,t));const{same:u,other:d}=mk(t,i,a,s);h|=u&&n.length,c=c||d,l.fullSize||n.push(a)}return h&&Lo(n,t,i,s)||c}function xl(e,t,i,s,n){e.top=i,e.left=t,e.right=t+s,e.bottom=i+n,e.width=s,e.height=n}function N0(e,t,i,s){const n=i.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,h=s[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/h.weight||1;if(a.horizontal){const u=t.w*c,d=h.size||l.height;xi(h.start)&&(o=h.start),l.fullSize?xl(l,n.left,o,i.outerWidth-n.right-n.left,d):xl(l,t.left+h.placed,o,u,d),h.start=o,h.placed+=u,o=l.bottom}else{const u=t.h*c,d=h.size||l.width;xi(h.start)&&(r=h.start),l.fullSize?xl(l,r,n.top,d,i.outerHeight-n.bottom-n.top):xl(l,r,t.top+h.placed,d,u),h.start=r,h.placed+=u,r=l.right}}t.x=r,t.y=o}var Ce={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,s){if(!e)return;const n=Re(e.options.layout.padding),r=Math.max(t-n.width,0),o=Math.max(i-n.height,0),a=pk(e.boxes),l=a.vertical,h=a.horizontal;Rt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const c=l.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/c,hBoxMaxHeight:o/2}),d=Object.assign({},n);gx(d,Re(s));const f=Object.assign({maxPadding:d,w:r,h:o,x:n.left,y:n.top},n),p=fk(l.concat(h),u);Lo(a.fullSize,f,u,p),Lo(l,f,u,p),Lo(h,f,u,p)&&Lo(l,f,u,p),gk(f),N0(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,N0(a.rightAndBottom,f,u,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Rt(a.chartArea,m=>{const g=m.box;Object.assign(g,e.chartArea),g.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class _x{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,s){}removeEventListener(t,i,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,s,n){return i=Math.max(0,i||t.width),s=s||t.height,{width:i,height:Math.max(0,n?Math.floor(i/n):s)}}isAttached(t){return!0}updateConfig(t){}}class yk extends _x{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Kl="$chartjs",bk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},U0=e=>e===null||e==="";function xk(e,t){const i=e.style,s=e.getAttribute("height"),n=e.getAttribute("width");if(e[Kl]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",U0(n)){const r=v0(e,"width");r!==void 0&&(e.width=r)}if(U0(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=v0(e,"height");r!==void 0&&(e.height=r)}return e}const yx=wO?{passive:!0}:!1;function vk(e,t,i){e.addEventListener(t,i,yx)}function wk(e,t,i){e.canvas.removeEventListener(t,i,yx)}function Sk(e,t){const i=bk[e.type]||e.type,{x:s,y:n}=Dn(e,t);return{type:i,chart:t,native:e,x:s!==void 0?s:null,y:n!==void 0?n:null}}function Bh(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function Ek(e,t,i){const s=e.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Bh(a.addedNodes,s),o=o&&!Bh(a.removedNodes,s);o&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}function Tk(e,t,i){const s=e.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Bh(a.removedNodes,s),o=o&&!Bh(a.addedNodes,s);o&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}const va=new Map;let G0=0;function bx(){const e=window.devicePixelRatio;e!==G0&&(G0=e,va.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function Ak(e,t){va.size||window.addEventListener("resize",bx),va.set(e,t)}function Ck(e){va.delete(e),va.size||window.removeEventListener("resize",bx)}function Mk(e,t,i){const s=e.canvas,n=s&&lp(s);if(!n)return;const r=Y1((a,l)=>{const h=n.clientWidth;i(a,l),h<n.clientWidth&&i()},window),o=new ResizeObserver(a=>{const l=a[0],h=l.contentRect.width,c=l.contentRect.height;h===0&&c===0||r(h,c)});return o.observe(n),Ak(e,r),o}function Ou(e,t,i){i&&i.disconnect(),t==="resize"&&Ck(e)}function Ik(e,t,i){const s=e.canvas,n=Y1(r=>{e.ctx!==null&&i(Sk(r,e))},e);return vk(s,t,n),n}class Pk extends _x{acquireContext(t,i){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(xk(t,i),s):null}releaseContext(t){const i=t.canvas;if(!i[Kl])return!1;const s=i[Kl].initial;["height","width"].forEach(r=>{const o=s[r];It(o)?i.removeAttribute(r):i.setAttribute(r,o)});const n=s.style||{};return Object.keys(n).forEach(r=>{i.style[r]=n[r]}),i.width=i.width,delete i[Kl],!0}addEventListener(t,i,s){this.removeEventListener(t,i);const n=t.$proxies||(t.$proxies={}),o={attach:Ek,detach:Tk,resize:Mk}[i]||Ik;n[i]=o(t,i,s)}removeEventListener(t,i){const s=t.$proxies||(t.$proxies={}),n=s[i];if(!n)return;({attach:Ou,detach:Ou,resize:Ou}[i]||wk)(t,i,n),s[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,s,n){return vO(t,i,s,n)}isAttached(t){const i=lp(t);return!!(i&&i.isConnected)}}function Rk(e){return!ox()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?yk:Pk}var Cl;let Gs=(Cl=class{constructor(){nt(this,"active",!1)}tooltipPosition(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}hasValue(){return so(this.x)&&so(this.y)}getProps(t,i){const s=this.$animations;if(!i||!s)return this;const n={};return t.forEach(r=>{n[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),n}},nt(Cl,"defaults",{}),nt(Cl,"defaultRoutes"),Cl);function Dk(e,t){const i=e.options.ticks,s=Ok(e),n=Math.min(i.maxTicksLimit||s,s),r=i.major.enabled?Fk(t):[],o=r.length,a=r[0],l=r[o-1],h=[];if(o>n)return Lk(t,h,r,o/n),h;const c=kk(r,t,n);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(vl(t,h,c,It(f)?0:a-f,a),u=0,d=o-1;u<d;u++)vl(t,h,c,r[u],r[u+1]);return vl(t,h,c,l,It(f)?t.length:l+f),h}return vl(t,h,c),h}function Ok(e){const t=e.options.offset,i=e._tickSize(),s=e._length/i+(t?0:1),n=e._maxLength/i;return Math.floor(Math.min(s,n))}function kk(e,t,i){const s=Bk(e),n=t.length/i;if(!s)return Math.max(n,1);const r=TD(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>n)return l}return Math.max(n,1)}function Fk(e){const t=[];let i,s;for(i=0,s=e.length;i<s;i++)e[i].major&&t.push(i);return t}function Lk(e,t,i,s){let n=0,r=i[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),n++,r=i[n*s])}function vl(e,t,i,s,n){const r=yt(s,0),o=Math.min(yt(n,e.length),e.length);let a=0,l,h,c;for(i=Math.ceil(i),n&&(l=n-s,i=l/Math.floor(l/i)),c=r;c<0;)a++,c=Math.round(r+a*i);for(h=Math.max(r,0);h<o;h++)h===c&&(t.push(e[h]),a++,c=Math.round(r+a*i))}function Bk(e){const t=e.length;let i,s;if(t<2)return!1;for(s=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==s)return!1;return s}const Nk=e=>e==="left"?"right":e==="right"?"left":e,H0=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,z0=(e,t)=>Math.min(t||e,e);function V0(e,t){const i=[],s=e.length/t,n=e.length;let r=0;for(;r<n;r+=s)i.push(e[Math.floor(r)]);return i}function Uk(e,t,i){const s=e.ticks.length,n=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(n),h;if(!(i&&(s===1?h=Math.max(l-r,o-l):t===0?h=(e.getPixelForTick(1)-l)/2:h=(l-e.getPixelForTick(n-1))/2,l+=n<t?h:-h,l<r-a||l>o+a)))return l}function Gk(e,t){Rt(e,i=>{const s=i.gc,n=s.length/2;let r;if(n>t){for(r=0;r<n;++r)delete i.data[s[r]];s.splice(0,n)}})}function To(e){return e.drawTicks?e.tickLength:0}function W0(e,t){if(!e.display)return 0;const i=de(e.font,t),s=Re(e.padding);return(Nt(e.text)?e.text.length:1)*i.lineHeight+s.height}function Hk(e,t){return _n(e,{scale:t,type:"scale"})}function zk(e,t,i){return _n(e,{tick:i,index:t,type:"tick"})}function Vk(e,t,i){let s=sp(e);return(i&&t!=="right"||!i&&t==="right")&&(s=Nk(s)),s}function Wk(e,t,i,s){const{top:n,left:r,bottom:o,right:a,chart:l}=e,{chartArea:h,scales:c}=l;let u=0,d,f,p;const m=o-n,g=a-r;if(e.isHorizontal()){if(f=Ee(s,r,a),St(i)){const _=Object.keys(i)[0],y=i[_];p=c[_].getPixelForValue(y)+m-t}else i==="center"?p=(h.bottom+h.top)/2+m-t:p=H0(e,i,t);d=a-r}else{if(St(i)){const _=Object.keys(i)[0],y=i[_];f=c[_].getPixelForValue(y)-g+t}else i==="center"?f=(h.left+h.right)/2-g+t:f=H0(e,i,t);p=Ee(s,o,n),u=i==="left"?-ie:ie}return{titleX:f,titleY:p,maxWidth:d,rotation:u}}class sr extends Gs{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:s,_suggestedMax:n}=this;return t=qe(t,Number.POSITIVE_INFINITY),i=qe(i,Number.NEGATIVE_INFINITY),s=qe(s,Number.POSITIVE_INFINITY),n=qe(n,Number.NEGATIVE_INFINITY),{min:qe(t,s),max:qe(i,n),minDefined:ee(t),maxDefined:ee(i)}}getMinMax(t){let{min:i,max:s,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:i,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,h=a.length;l<h;++l)o=a[l].controller.getMinMax(this,t),n||(i=Math.min(i,o.min)),r||(s=Math.max(s,o.max));return i=r&&i>s?s:i,s=n&&i>s?i:s,{min:qe(i,qe(s,i)),max:qe(s,qe(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Lt(this.options.beforeUpdate,[this])}update(t,i,s){const{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=QD(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?V0(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Dk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,s;this.isHorizontal()?(i=this.left,s=this.right):(i=this.top,s=this.bottom,t=!t),this._startPixel=i,this._endPixel=s,this._reversePixels=t,this._length=s-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Lt(this.options.afterUpdate,[this])}beforeSetDimensions(){Lt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Lt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Lt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Lt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s],r.label=Lt(i.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Lt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Lt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,s=z0(this.ticks.length,t.ticks.maxTicksLimit),n=i.minRotation||0,r=i.maxRotation;let o=n,a,l,h;if(!this._isVisible()||!i.display||n>=r||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,f=_e(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/s:f/(s-1),u+6>a&&(a=f/(s-(t.offset?.5:1)),l=this.maxHeight-To(t.grid)-i.padding-W0(t.title,this.chart.options.font),h=Math.sqrt(u*u+d*d),o=ep(Math.min(Math.asin(_e((c.highest.height+6)/a,-1,1)),Math.asin(_e(l/h,-1,1))-Math.asin(_e(d/h,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Lt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Lt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:s,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=W0(n,i.options.font);if(a?(t.width=this.maxWidth,t.height=To(r)+l):(t.height=this.maxHeight,t.width=To(r)+l),s.display&&this.ticks.length){const{first:h,last:c,widest:u,highest:d}=this._getLabelSizes(),f=s.padding*2,p=ki(this.labelRotation),m=Math.cos(p),g=Math.sin(p);if(a){const _=s.mirror?0:g*u.width+m*d.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{const _=s.mirror?0:m*u.width+g*d.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(h,c,g,m)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,s,n){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,h=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?h?(d=n*t.width,f=s*i.height):(d=s*t.height,f=n*i.width):r==="start"?f=i.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=i.width/2),this.paddingLeft=Math.max((d-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let c=i.height/2,u=t.height/2;r==="start"?(c=0,u=t.height):r==="end"&&(c=i.height,u=0),this.paddingTop=c+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Lt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,s;for(i=0,s=t.length;i<s;i++)It(t[i].label)&&(t.splice(i,1),s--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let s=this.ticks;i<s.length&&(s=V0(s,i)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,s){const{ctx:n,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(i/z0(i,s));let h=0,c=0,u,d,f,p,m,g,_,y,b,v,x;for(u=0;u<i;u+=l){if(p=t[u].label,m=this._resolveTickFontOptions(u),n.font=g=m.string,_=r[g]=r[g]||{data:{},gc:[]},y=m.lineHeight,b=v=0,!It(p)&&!Nt(p))b=Fh(n,_.data,_.gc,b,p),v=y;else if(Nt(p))for(d=0,f=p.length;d<f;++d)x=p[d],!It(x)&&!Nt(x)&&(b=Fh(n,_.data,_.gc,b,x),v+=y);o.push(b),a.push(v),h=Math.max(b,h),c=Math.max(v,c)}Gk(r,i);const T=o.indexOf(h),S=a.indexOf(c),A=M=>({width:o[M]||0,height:a[M]||0});return{first:A(0),last:A(i-1),widest:A(T),highest:A(S),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return MD(this._alignToPixels?En(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const s=i[t];return s.$context||(s.$context=zk(this.getContext(),t,s))}return this.$context||(this.$context=Hk(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=ki(this.labelRotation),s=Math.abs(Math.cos(i)),n=Math.abs(Math.sin(i)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*n?a/s:l/n:l*n<a*s?l/s:a/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,s=this.chart,n=this.options,{grid:r,position:o,border:a}=n,l=r.offset,h=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=To(r),f=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,g=m/2,_=function(L){return En(s,L,m)};let y,b,v,x,T,S,A,M,O,C,k,P;if(o==="top")y=_(this.bottom),S=this.bottom-d,M=y-g,C=_(t.top)+g,P=t.bottom;else if(o==="bottom")y=_(this.top),C=t.top,P=_(t.bottom)-g,S=y+g,M=this.top+d;else if(o==="left")y=_(this.right),T=this.right-d,A=y-g,O=_(t.left)+g,k=t.right;else if(o==="right")y=_(this.left),O=t.left,k=_(t.right)-g,T=y+g,A=this.left+d;else if(i==="x"){if(o==="center")y=_((t.top+t.bottom)/2+.5);else if(St(o)){const L=Object.keys(o)[0],I=o[L];y=_(this.chart.scales[L].getPixelForValue(I))}C=t.top,P=t.bottom,S=y+g,M=S+d}else if(i==="y"){if(o==="center")y=_((t.left+t.right)/2);else if(St(o)){const L=Object.keys(o)[0],I=o[L];y=_(this.chart.scales[L].getPixelForValue(I))}T=y-g,A=T-d,O=t.left,k=t.right}const w=yt(n.ticks.maxTicksLimit,u),E=Math.max(1,Math.ceil(u/w));for(b=0;b<u;b+=E){const L=this.getContext(b),I=r.setContext(L),N=a.setContext(L),F=I.lineWidth,D=I.color,G=N.dash||[],W=N.dashOffset,q=I.tickWidth,X=I.tickColor,st=I.tickBorderDash||[],ft=I.tickBorderDashOffset;v=Uk(this,b,l),v!==void 0&&(x=En(s,v,F),h?T=A=O=k=x:S=M=C=P=x,f.push({tx1:T,ty1:S,tx2:A,ty2:M,x1:O,y1:C,x2:k,y2:P,width:F,color:D,borderDash:G,borderDashOffset:W,tickWidth:q,tickColor:X,tickBorderDash:st,tickBorderDashOffset:ft}))}return this._ticksLength=u,this._borderValue=y,f}_computeLabelItems(t){const i=this.axis,s=this.options,{position:n,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:h,padding:c,mirror:u}=r,d=To(s.grid),f=d+c,p=u?-c:f,m=-ki(this.labelRotation),g=[];let _,y,b,v,x,T,S,A,M,O,C,k,P="middle";if(n==="top")T=this.bottom-p,S=this._getXAxisLabelAlignment();else if(n==="bottom")T=this.top+p,S=this._getXAxisLabelAlignment();else if(n==="left"){const E=this._getYAxisLabelAlignment(d);S=E.textAlign,x=E.x}else if(n==="right"){const E=this._getYAxisLabelAlignment(d);S=E.textAlign,x=E.x}else if(i==="x"){if(n==="center")T=(t.top+t.bottom)/2+f;else if(St(n)){const E=Object.keys(n)[0],L=n[E];T=this.chart.scales[E].getPixelForValue(L)+f}S=this._getXAxisLabelAlignment()}else if(i==="y"){if(n==="center")x=(t.left+t.right)/2-f;else if(St(n)){const E=Object.keys(n)[0],L=n[E];x=this.chart.scales[E].getPixelForValue(L)}S=this._getYAxisLabelAlignment(d).textAlign}i==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const w=this._getLabelSizes();for(_=0,y=a.length;_<y;++_){b=a[_],v=b.label;const E=r.setContext(this.getContext(_));A=this.getPixelForTick(_)+r.labelOffset,M=this._resolveTickFontOptions(_),O=M.lineHeight,C=Nt(v)?v.length:1;const L=C/2,I=E.color,N=E.textStrokeColor,F=E.textStrokeWidth;let D=S;o?(x=A,S==="inner"&&(_===y-1?D=this.options.reverse?"left":"right":_===0?D=this.options.reverse?"right":"left":D="center"),n==="top"?h==="near"||m!==0?k=-C*O+O/2:h==="center"?k=-w.highest.height/2-L*O+O:k=-w.highest.height+O/2:h==="near"||m!==0?k=O/2:h==="center"?k=w.highest.height/2-L*O:k=w.highest.height-C*O,u&&(k*=-1),m!==0&&!E.showLabelBackdrop&&(x+=O/2*Math.sin(m))):(T=A,k=(1-C)*O/2);let G;if(E.showLabelBackdrop){const W=Re(E.backdropPadding),q=w.heights[_],X=w.widths[_];let st=k-W.top,ft=0-W.left;switch(P){case"middle":st-=q/2;break;case"bottom":st-=q;break}switch(S){case"center":ft-=X/2;break;case"right":ft-=X;break}G={left:ft,top:st,width:X+W.width,height:q+W.height,color:E.backdropColor}}g.push({label:v,font:M,textOffset:k,options:{rotation:m,color:I,strokeColor:N,strokeWidth:F,textAlign:D,textBaseline:P,translation:[x,T],backdrop:G}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-ki(this.labelRotation))return t==="top"?"left":"right";let n="center";return i.align==="start"?n="left":i.align==="end"?n="right":i.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:s,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let h,c;return i==="left"?n?(c=this.right+r,s==="near"?h="left":s==="center"?(h="center",c+=l/2):(h="right",c+=l)):(c=this.right-a,s==="near"?h="right":s==="center"?(h="center",c-=l/2):(h="left",c=this.left)):i==="right"?n?(c=this.left+r,s==="near"?h="right":s==="center"?(h="center",c-=l/2):(h="left",c-=l)):(c=this.left+a,s==="near"?h="left":s==="center"?(h="center",c+=l/2):(h="right",c=this.right)):h="right",{textAlign:h,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:s,top:n,width:r,height:o}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(s,n,r,o),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const n=this.ticks.findIndex(r=>r.value===t);return n>=0?i.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const i=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,h,c)=>{!c.width||!c.color||(s.save(),s.lineWidth=c.width,s.strokeStyle=c.color,s.setLineDash(c.borderDash||[]),s.lineDashOffset=c.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(h.x,h.y),s.stroke(),s.restore())};if(i.display)for(r=0,o=n.length;r<o;++r){const l=n[r];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:s,grid:n}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,c,u,d;this.isHorizontal()?(h=En(t,this.left,o)-o/2,c=En(t,this.right,a)+a/2,u=d=l):(u=En(t,this.top,o)-o/2,d=En(t,this.bottom,a)+a/2,h=c=l),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(h,u),i.lineTo(c,d),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&gc(s,n);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,h=o.label,c=o.textOffset;Jn(s,h,0,c,l,a)}n&&_c(s)}drawTitle(){const{ctx:t,options:{position:i,title:s,reverse:n}}=this;if(!s.display)return;const r=de(s.font),o=Re(s.padding),a=s.align;let l=r.lineHeight/2;i==="bottom"||i==="center"||St(i)?(l+=o.bottom,Nt(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:h,titleY:c,maxWidth:u,rotation:d}=Wk(this,l,i,a);Jn(t,s.text,0,0,r,{color:s.color,maxWidth:u,rotation:d,textAlign:Vk(a,i,n),textBaseline:"middle",translation:[h,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,s=yt(t.grid&&t.grid.z,-1),n=yt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==sr.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let r,o;for(r=0,o=i.length;r<o;++r){const a=i[r];a[s]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return de(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class wl{constructor(t,i,s){this.type=t,this.scope=i,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let s;Yk(i)&&(s=this.register(i));const n=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,jk(t,o,s),this.override&&oe.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const i=this.items,s=t.id,n=this.scope;s in i&&delete i[s],n&&s in oe[n]&&(delete oe[n][s],this.override&&delete qn[s])}}function jk(e,t,i){const s=_a(Object.create(null),[i?oe.get(i):{},oe.get(t),e.defaults]);oe.set(t,s),e.defaultRoutes&&Xk(t,e.defaultRoutes),e.descriptors&&oe.describe(t,e.descriptors)}function Xk(e,t){Object.keys(t).forEach(i=>{const s=i.split("."),n=s.pop(),r=[e].concat(s).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");oe.route(r,n,l,a)})}function Yk(e){return"id"in e&&"defaults"in e}class $k{constructor(){this.controllers=new wl(Gi,"datasets",!0),this.elements=new wl(Gs,"elements"),this.plugins=new wl(Object,"plugins"),this.scales=new wl(sr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,s){[...i].forEach(n=>{const r=s||this._getRegistryForType(n);s||r.isForType(n)||r===this.plugins&&n.id?this._exec(t,r,n):Rt(n,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,i,s){const n=tp(t);Lt(s["before"+n],[],s),i[t](s),Lt(s["after"+n],[],s)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const s=this._typedRegistries[i];if(s.isForType(t))return s}return this.plugins}_get(t,i,s){const n=i.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var $i=new $k;class Zk{constructor(){this._init=[]}notify(t,i,s,n){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,i,s);return i==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,i,s,n){n=n||{};for(const r of t){const o=r.plugin,a=o[s],l=[i,n,r.options];if(Lt(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){It(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const s=t&&t.config,n=yt(s.options&&s.options.plugins,{}),r=Kk(s);return n===!1&&!i?[]:Jk(t,r,n,i)}_notifyStateChanges(t){const i=this._oldCache||[],s=this._cache,n=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(i,s),t,"stop"),this._notify(n(s,i),t,"start")}}function Kk(e){const t={},i=[],s=Object.keys($i.plugins.items);for(let r=0;r<s.length;r++)i.push($i.getPlugin(s[r]));const n=e.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];i.indexOf(o)===-1&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}function qk(e,t){return!t&&e===!1?null:e===!0?{}:e}function Jk(e,{plugins:t,localIds:i},s,n){const r=[],o=e.getContext();for(const a of t){const l=a.id,h=qk(s[l],n);h!==null&&r.push({plugin:a,options:Qk(e.config,{plugin:a,local:i[l]},h,o)})}return r}function Qk(e,{plugin:t,local:i},s,n){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Jd(e,t){const i=oe.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function tF(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function eF(e,t){return e===t?"_index_":"_value_"}function iF(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Nh(e,t){if(e==="x"||e==="y"||e==="r"||(e=t.axis||iF(t.position)||e.length>1&&Nh(e[0].toLowerCase(),t),e))return e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function sF(e,t){const i=qn[e.type]||{scales:{}},s=t.scales||{},n=Jd(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!St(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Nh(o,a),h=eF(l,n),c=i.scales||{};r[o]=Yo(Object.create(null),[{axis:l},a,c[l],c[h]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Jd(a,t),c=(qn[a]||{}).scales||{};Object.keys(c).forEach(u=>{const d=tF(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),Yo(r[f],[{axis:d},s[f],c[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];Yo(a,[oe.scales[a.type],oe.scale])}),r}function xx(e){const t=e.options||(e.options={});t.plugins=yt(t.plugins,{}),t.scales=sF(e,t)}function vx(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function nF(e){return e=e||{},e.data=vx(e.data),xx(e),e}const j0=new Map,wx=new Set;function Sl(e,t){let i=j0.get(e);return i||(i=t(),j0.set(e,i),wx.add(i)),i}const Ao=(e,t,i)=>{const s=pn(t,i);s!==void 0&&e.add(s)};class rF{constructor(t){this._config=nF(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=vx(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),xx(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Sl(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Sl(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Sl(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,s=this.type;return Sl(`${s}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const s=this._scopeCache;let n=s.get(t);return(!n||i)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,i,s){const{options:n,type:r}=this,o=this._cachedScopes(t,s),a=o.get(i);if(a)return a;const l=new Set;i.forEach(c=>{t&&(l.add(t),c.forEach(u=>Ao(l,t,u))),c.forEach(u=>Ao(l,n,u)),c.forEach(u=>Ao(l,qn[r]||{},u)),c.forEach(u=>Ao(l,oe,u)),c.forEach(u=>Ao(l,Zd,u))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),wx.has(i)&&o.set(i,h),h}chartOptionScopes(){const{options:t,type:i}=this;return[t,qn[i]||{},oe.datasets[i]||{},{type:i},oe,Zd]}resolveNamedOptions(t,i,s,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=X0(this._resolverCache,t,n);let l=o;if(aF(o,i)){r.$shared=!1,s=mn(s)?s():s;const h=this.createResolver(t,s,a);l=no(o,s,h)}for(const h of i)r[h]=l[h];return r}createResolver(t,i,s=[""],n){const{resolver:r}=X0(this._resolverCache,t,s);return St(i)?no(r,i,void 0,n):r}}function X0(e,t,i){let s=e.get(t);s||(s=new Map,e.set(t,s));const n=i.join();let r=s.get(n);return r||(r={resolver:rp(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,r)),r}const oF=e=>St(e)&&Object.getOwnPropertyNames(e).reduce((t,i)=>t||mn(e[i]),!1);function aF(e,t){const{isScriptable:i,isIndexable:s}=tx(e);for(const n of t){const r=i(n),o=s(n),a=(o||r)&&e[n];if(r&&(mn(a)||oF(a))||o&&Nt(a))return!0}return!1}var lF="4.2.1";const hF=["top","bottom","left","right","chartArea"];function Y0(e,t){return e==="top"||e==="bottom"||hF.indexOf(e)===-1&&t==="x"}function $0(e,t){return function(i,s){return i[e]===s[e]?i[t]-s[t]:i[e]-s[e]}}function Z0(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Lt(i&&i.onComplete,[e],t)}function cF(e){const t=e.chart,i=t.options.animation;Lt(i&&i.onProgress,[e],t)}function Sx(e){return ox()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ql={},K0=e=>{const t=Sx(e);return Object.values(ql).filter(i=>i.canvas===t).pop()};function uF(e,t,i){const s=Object.keys(e);for(const n of s){const r=+n;if(r>=t){const o=e[n];delete e[n],(i>0||r>t)&&(e[r+i]=o)}}}function dF(e,t,i,s){return!i||e.type==="mouseout"?null:s?t:e}function fF(e){const{xScale:t,yScale:i}=e;if(t&&i)return{left:t.left,right:t.right,top:i.top,bottom:i.bottom}}class Di{static register(...t){$i.add(...t),q0()}static unregister(...t){$i.remove(...t),q0()}constructor(t,i){const s=this.config=new rF(i),n=Sx(t),r=K0(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Rk(n)),this.platform.updateConfig(s);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,h=l&&l.height,c=l&&l.width;if(this.id=gD(),this.ctx=a,this.canvas=l,this.width=c,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Zk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=DD(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],ql[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}vs.listen(this,"complete",Z0),vs.listen(this,"progress",cF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:s,height:n,_aspectRatio:r}=this;return It(t)?i&&r?r:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return $i}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():x0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return _0(this.canvas,this.ctx),this}stop(){return vs.stop(this),this}resize(t,i){vs.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const s=this.options,n=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,i,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,x0(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Lt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Rt(i,(s,n)=>{s.id=n})}buildOrUpdateScales(){const t=this.options,i=t.scales,s=this.scales,n=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];i&&(r=r.concat(Object.keys(i).map(o=>{const a=i[o],l=Nh(o,a),h=l==="r",c=l==="x";return{options:a,dposition:h?"chartArea":c?"bottom":"left",dtype:h?"radialLinear":c?"category":"linear"}}))),Rt(r,o=>{const a=o.options,l=a.id,h=Nh(l,a),c=yt(a.type,o.dtype);(a.position===void 0||Y0(a.position,h)!==Y0(o.dposition))&&(a.position=o.dposition),n[l]=!0;let u=null;if(l in s&&s[l].type===c)u=s[l];else{const d=$i.getScale(c);u=new d({id:l,type:c,ctx:this.ctx,chart:this}),s[u.id]=u}u.init(a,t)}),Rt(n,(o,a)=>{o||delete s[a]}),Rt(s,o=>{Ce.configure(this,o,o.options),Ce.addBox(this,o)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,s=t.length;if(t.sort((n,r)=>n.index-r.index),s>i){for(let n=i;n<s;++n)this._destroyDatasetMeta(n);t.splice(i,s-i)}this._sortedMetasets=t.slice(0).sort($0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((s,n)=>{i.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=i.length;s<n;s++){const r=i[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Jd(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=$i.getController(a),{datasetElementType:h,dataElementType:c}=oe.datasets[a];Object.assign(l,{dataElementType:$i.getElement(c),datasetElementType:h&&$i.getElement(h)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Rt(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const s=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,c=this.data.datasets.length;h<c;h++){const{controller:u}=this.getDatasetMeta(h),d=!n&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),n||Rt(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort($0("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Rt(this.scales,t=>{Ce.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!l0(i,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:r}of i){const o=s==="_removeElements"?-r:r;uF(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),n=s(0);for(let r=1;r<i;r++)if(!l0(n,s(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ce.update(this,this.width,this.height,t);const i=this.chartArea,s=i.width<=0||i.height<=0;this._layers=[],Rt(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,s=this.data.datasets.length;i<s;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,s=this.data.datasets.length;i<s;++i)this._updateDataset(i,mn(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const s=this.getDatasetMeta(t),n={meta:s,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(i),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vs.has(this)?this.attached&&!vs.running(this)&&vs.start(this):(this.draw(),Z0({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resize(s,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,s=[];let n,r;for(n=0,r=i.length;n<r;++n){const o=i[n];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,s=t._clip,n=!s.disabled,r=fF(t)||this.chartArea,o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(n&&gc(i,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),t.controller.draw(),n&&_c(i),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return ba(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,s,n){const r=ck.modes[i];return typeof r=="function"?r(this,t,s,n):[]}getDatasetMeta(t){const i=this.data.datasets[t],s=this._metasets;let n=s.filter(r=>r&&r._dataset===i).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=_n(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!i.hidden}setDatasetVisibility(t,i){const s=this.getDatasetMeta(t);s.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,s){const n=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,n);xi(i)?(r.data[i].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?n:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),vs.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),_0(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete ql[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,s=(r,o)=>{i.addEventListener(this,r,o),t[r]=o},n=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Rt(this.options.events,r=>s(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,s=(l,h)=>{i.addEventListener(this,l,h),t[l]=h},n=(l,h)=>{t[l]&&(i.removeEventListener(this,l,h),delete t[l])},r=(l,h)=>{this.canvas&&this.resize(l,h)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),s("attach",a)},i.isAttached(this.canvas)?a():o()}unbindEvents(){Rt(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Rt(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,s){const n=s?"set":"remove";let r,o,a,l;for(i==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Dh(s,i)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,i))}notifyPlugins(t,i,s){return this._plugins.notify(this,t,i,s)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,s){const n=this.options.hover,r=(l,h)=>l.filter(c=>!h.some(u=>c.datasetIndex===u.datasetIndex&&c.index===u.index)),o=r(i,t),a=s?t:r(t,i);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,i){const s={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const r=this._handleEvent(t,i,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(r||s.changed)&&this.render(),this}_handleEvent(t,i,s){const{_active:n=[],options:r}=this,o=i,a=this._getActiveElements(t,n,s,o),l=wD(t),h=dF(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Lt(r.onHover,[t,a,this],this),l&&Lt(r.onClick,[t,a,this],this));const c=!Dh(a,n);return(c||i)&&(this._active=a,this._updateHoverStyles(a,n,i)),this._lastEvent=h,c}_getActiveElements(t,i,s,n){if(t.type==="mouseout")return[];if(!s)return i;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,n)}}nt(Di,"defaults",oe),nt(Di,"instances",ql),nt(Di,"overrides",qn),nt(Di,"registry",$i),nt(Di,"version",lF),nt(Di,"getChart",K0);function q0(){return Rt(Di.instances,e=>e._plugins.invalidate())}function pF(e,t,i){const{startAngle:s,pixelMargin:n,x:r,y:o,outerRadius:a,innerRadius:l}=t;let h=n/a;e.beginPath(),e.arc(r,o,a,s-h,i+h),l>n?(h=n/l,e.arc(r,o,l,i+h,s-h,!0)):e.arc(r,o,n,i+ie,s-ie),e.closePath(),e.clip()}function mF(e){return np(e,["outerStart","outerEnd","innerStart","innerEnd"])}function gF(e,t,i,s){const n=mF(e.options.borderRadius),r=(i-t)/2,o=Math.min(r,s*t/2),a=l=>{const h=(i-Math.min(r,l))*s/2;return _e(l,0,Math.min(r,h))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:_e(n.innerStart,0,o),innerEnd:_e(n.innerEnd,0,o)}}function _r(e,t,i,s){return{x:i+e*Math.cos(t),y:s+e*Math.sin(t)}}function Uh(e,t,i,s,n,r){const{x:o,y:a,startAngle:l,pixelMargin:h,innerRadius:c}=t,u=Math.max(t.outerRadius+s+i-h,0),d=c>0?c+s+i+h:0;let f=0;const p=n-l;if(s){const E=c>0?c-s:0,L=u>0?u-s:0,I=(E+L)/2,N=I!==0?p*I/(I+s):p;f=(p-N)/2}const m=Math.max(.001,p*u-i/zt)/u,g=(p-m)/2,_=l+g+f,y=n-g-f,{outerStart:b,outerEnd:v,innerStart:x,innerEnd:T}=gF(t,d,u,y-_),S=u-b,A=u-v,M=_+b/S,O=y-v/A,C=d+x,k=d+T,P=_+x/C,w=y-T/k;if(e.beginPath(),r){const E=(M+O)/2;if(e.arc(o,a,u,M,E),e.arc(o,a,u,E,O),v>0){const F=_r(A,O,o,a);e.arc(F.x,F.y,v,O,y+ie)}const L=_r(k,y,o,a);if(e.lineTo(L.x,L.y),T>0){const F=_r(k,w,o,a);e.arc(F.x,F.y,T,y+ie,w+Math.PI)}const I=(y-T/d+(_+x/d))/2;if(e.arc(o,a,d,y-T/d,I,!0),e.arc(o,a,d,I,_+x/d,!0),x>0){const F=_r(C,P,o,a);e.arc(F.x,F.y,x,P+Math.PI,_-ie)}const N=_r(S,_,o,a);if(e.lineTo(N.x,N.y),b>0){const F=_r(S,M,o,a);e.arc(F.x,F.y,b,_-ie,M)}}else{e.moveTo(o,a);const E=Math.cos(M)*u+o,L=Math.sin(M)*u+a;e.lineTo(E,L);const I=Math.cos(O)*u+o,N=Math.sin(O)*u+a;e.lineTo(I,N)}e.closePath()}function _F(e,t,i,s,n){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){Uh(e,t,i,s,l,n);for(let h=0;h<r;++h)e.fill();isNaN(a)||(l=o+(a%Ut||Ut))}return Uh(e,t,i,s,l,n),e.fill(),l}function yF(e,t,i,s,n){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:h,borderJoinStyle:c}=l,u=l.borderAlign==="inner";if(!h)return;u?(e.lineWidth=h*2,e.lineJoin=c||"round"):(e.lineWidth=h,e.lineJoin=c||"bevel");let d=t.endAngle;if(r){Uh(e,t,i,s,d,n);for(let f=0;f<r;++f)e.stroke();isNaN(a)||(d=o+(a%Ut||Ut))}u&&pF(e,t,d),r||(Uh(e,t,i,s,d,n),e.stroke())}class Jl extends Gs{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,s){const n=this.getProps(["x","y"],s),{angle:r,distance:o}=V1(n,{x:t,y:i}),{startAngle:a,endAngle:l,innerRadius:h,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),d=this.options.spacing/2,p=yt(u,l-a)>=Ut||ya(r,a,l),m=Ps(o,h+d,c+d);return p&&m}getCenterPoint(t){const{x:i,y:s,startAngle:n,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:h}=this.options,c=(n+r)/2,u=(o+a+h+l)/2;return{x:i+Math.cos(c)*u,y:s+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:s}=this,n=(i.offset||0)/4,r=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>Ut?Math.floor(s/Ut):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*n,Math.sin(a)*n);const l=1-Math.sin(Math.min(zt,s||0)),h=n*l;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,_F(t,this,h,r,o),yF(t,this,h,r,o),t.restore()}}nt(Jl,"id","arc"),nt(Jl,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),nt(Jl,"defaultRoutes",{backgroundColor:"backgroundColor"});function Ex(e,t,i=t){e.lineCap=yt(i.borderCapStyle,t.borderCapStyle),e.setLineDash(yt(i.borderDash,t.borderDash)),e.lineDashOffset=yt(i.borderDashOffset,t.borderDashOffset),e.lineJoin=yt(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=yt(i.borderWidth,t.borderWidth),e.strokeStyle=yt(i.borderColor,t.borderColor)}function bF(e,t,i){e.lineTo(i.x,i.y)}function xF(e){return e.stepped?WD:e.tension||e.cubicInterpolationMode==="monotone"?jD:bF}function Tx(e,t,i={}){const s=e.length,{start:n=0,end:r=s-1}=i,{start:o,end:a}=t,l=Math.max(n,o),h=Math.min(r,a),c=n<o&&r<o||n>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:h<l&&!c?s+h-l:h-l}}function vF(e,t,i,s){const{points:n,options:r}=t,{count:o,start:a,loop:l,ilen:h}=Tx(n,i,s),c=xF(r);let{move:u=!0,reverse:d}=s||{},f,p,m;for(f=0;f<=h;++f)p=n[(a+(d?h-f:f))%o],!p.skip&&(u?(e.moveTo(p.x,p.y),u=!1):c(e,m,p,d,r.stepped),m=p);return l&&(p=n[(a+(d?h:0))%o],c(e,m,p,d,r.stepped)),!!l}function wF(e,t,i,s){const n=t.points,{count:r,start:o,ilen:a}=Tx(n,i,s),{move:l=!0,reverse:h}=s||{};let c=0,u=0,d,f,p,m,g,_;const y=v=>(o+(h?a-v:v))%r,b=()=>{m!==g&&(e.lineTo(c,g),e.lineTo(c,m),e.lineTo(c,_))};for(l&&(f=n[y(0)],e.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=n[y(d)],f.skip)continue;const v=f.x,x=f.y,T=v|0;T===p?(x<m?m=x:x>g&&(g=x),c=(u*c+v)/++u):(b(),e.lineTo(v,x),p=T,u=0,m=g=x),_=x}b()}function Qd(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?wF:vF}function SF(e){return e.stepped?SO:e.tension||e.cubicInterpolationMode==="monotone"?EO:On}function EF(e,t,i,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,i,s)&&n.closePath()),Ex(e,t.options),e.stroke(n)}function TF(e,t,i,s){const{segments:n,options:r}=t,o=Qd(t);for(const a of n)Ex(e,r,a.style),e.beginPath(),o(e,t,a,{start:i,end:i+s-1})&&e.closePath(),e.stroke()}const AF=typeof Path2D=="function";function CF(e,t,i,s){AF&&!t.options.segment?EF(e,t,i,s):TF(e,t,i,s)}class Js extends Gs{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;mO(this._points,s,t,n,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=PO(this,this.options.segment))}first(){const t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){const t=this.segments,i=this.points,s=t.length;return s&&i[t[s-1].end]}interpolate(t,i){const s=this.options,n=t[i],r=this.points,o=ux(this,{property:i,start:n,end:n});if(!o.length)return;const a=[],l=SF(s);let h,c;for(h=0,c=o.length;h<c;++h){const{start:u,end:d}=o[h],f=r[u],p=r[d];if(f===p){a.push(f);continue}const m=Math.abs((n-f[i])/(p[i]-f[i])),g=l(f,p,m,s.stepped);g[i]=t[i],a.push(g)}return a.length===1?a[0]:a}pathSegment(t,i,s){return Qd(this)(t,this,i,s)}path(t,i,s){const n=this.segments,r=Qd(this);let o=this._loop;i=i||0,s=s||this.points.length-i;for(const a of n)o&=r(t,this,a,{start:i,end:i+s-1});return!!o}draw(t,i,s,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),CF(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}nt(Js,"id","line"),nt(Js,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),nt(Js,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),nt(Js,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function J0(e,t,i,s){const n=e.options,{[i]:r}=e.getProps([i],s);return Math.abs(t-r)<n.radius+n.hitRadius}class Ql extends Gs{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const n=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(i-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,i){return J0(this,t,"x",i)}inYRange(t,i){return J0(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!ba(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,Kd(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}nt(Ql,"id","point"),nt(Ql,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),nt(Ql,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ax(e,t){const{x:i,y:s,base:n,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,h,c,u;return e.horizontal?(u=o/2,a=Math.min(i,n),l=Math.max(i,n),h=s-u,c=s+u):(u=r/2,a=i-u,l=i+u,h=Math.min(s,n),c=Math.max(s,n)),{left:a,top:h,right:l,bottom:c}}function Qs(e,t,i,s){return e?0:_e(t,i,s)}function MF(e,t,i){const s=e.options.borderWidth,n=e.borderSkipped,r=Q1(s);return{t:Qs(n.top,r.top,0,i),r:Qs(n.right,r.right,0,t),b:Qs(n.bottom,r.bottom,0,i),l:Qs(n.left,r.left,0,t)}}function IF(e,t,i){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,r=Vn(n),o=Math.min(t,i),a=e.borderSkipped,l=s||St(n);return{topLeft:Qs(!l||a.top||a.left,r.topLeft,0,o),topRight:Qs(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Qs(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Qs(!l||a.bottom||a.right,r.bottomRight,0,o)}}function PF(e){const t=Ax(e),i=t.right-t.left,s=t.bottom-t.top,n=MF(e,i/2,s/2),r=IF(e,i/2,s/2);return{outer:{x:t.left,y:t.top,w:i,h:s,radius:r},inner:{x:t.left+n.l,y:t.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function ku(e,t,i,s){const n=t===null,r=i===null,a=e&&!(n&&r)&&Ax(e,s);return a&&(n||Ps(t,a.left,a.right))&&(r||Ps(i,a.top,a.bottom))}function RF(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function DF(e,t){e.rect(t.x,t.y,t.w,t.h)}function Fu(e,t,i={}){const s=e.x!==i.x?-t:0,n=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-s,o=(e.y+e.h!==i.y+i.h?t:0)-n;return{x:e.x+s,y:e.y+n,w:e.w+r,h:e.h+o,radius:e.radius}}class th extends Gs{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:s,backgroundColor:n}}=this,{inner:r,outer:o}=PF(this),a=RF(o.radius)?xa:DF;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Fu(o,i,r)),t.clip(),a(t,Fu(r,-i,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,Fu(r,i)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,i,s){return ku(this,t,i,s)}inXRange(t,i){return ku(this,t,null,i)}inYRange(t,i){return ku(this,null,t,i)}getCenterPoint(t){const{x:i,y:s,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(i+n)/2:i,y:r?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}nt(th,"id","bar"),nt(th,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),nt(th,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var OF=Object.freeze({__proto__:null,ArcElement:Jl,LineElement:Js,PointElement:Ql,BarElement:th});const tf=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Q0=tf.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function Cx(e){return tf[e%tf.length]}function Mx(e){return Q0[e%Q0.length]}function kF(e,t){return e.borderColor=Cx(t),e.backgroundColor=Mx(t),++t}function FF(e,t){return e.backgroundColor=e.data.map(()=>Cx(t++)),t}function LF(e,t){return e.backgroundColor=e.data.map(()=>Mx(t++)),t}function BF(e){let t=0;return(i,s)=>{const n=e.getDatasetMeta(s).controller;n instanceof Bn?t=FF(i,t):n instanceof qo?t=LF(i,t):n&&(t=kF(i,t))}}function t_(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function NF(e){return e&&(e.borderColor||e.backgroundColor)}var UF={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;const{data:{datasets:s},options:n}=e.config,{elements:r}=n;if(!i.forceOverride&&(t_(s)||NF(n)||r&&t_(r)))return;const o=BF(e);s.forEach(o)}};function GF(e,t,i,s,n){const r=n.samples||s;if(r>=i)return e.slice(t,t+i);const o=[],a=(i-2)/(r-2);let l=0;const h=t+i-1;let c=t,u,d,f,p,m;for(o[l++]=e[c],u=0;u<r-2;u++){let g=0,_=0,y;const b=Math.floor((u+1)*a)+1+t,v=Math.min(Math.floor((u+2)*a)+1,i)+t,x=v-b;for(y=b;y<v;y++)g+=e[y].x,_+=e[y].y;g/=x,_/=x;const T=Math.floor(u*a)+1+t,S=Math.min(Math.floor((u+1)*a)+1,i)+t,{x:A,y:M}=e[c];for(f=p=-1,y=T;y<S;y++)p=.5*Math.abs((A-g)*(e[y].y-M)-(A-e[y].x)*(_-M)),p>f&&(f=p,d=e[y],m=y);o[l++]=d,c=m}return o[l++]=e[h],o}function HF(e,t,i,s){let n=0,r=0,o,a,l,h,c,u,d,f,p,m;const g=[],_=t+i-1,y=e[t].x,v=e[_].x-y;for(o=t;o<t+i;++o){a=e[o],l=(a.x-y)/v*s,h=a.y;const x=l|0;if(x===c)h<p?(p=h,u=o):h>m&&(m=h,d=o),n=(r*n+a.x)/++r;else{const T=o-1;if(!It(u)&&!It(d)){const S=Math.min(u,d),A=Math.max(u,d);S!==f&&S!==T&&g.push({...e[S],x:n}),A!==f&&A!==T&&g.push({...e[A],x:n})}o>0&&T!==f&&g.push(e[T]),g.push(a),c=x,r=0,p=m=h,u=d=f=o}}return g}function Ix(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function e_(e){e.data.datasets.forEach(t=>{Ix(t)})}function zF(e,t){const i=t.length;let s=0,n;const{iScale:r}=e,{min:o,max:a,minDefined:l,maxDefined:h}=r.getUserBounds();return l&&(s=_e(Rs(t,r.axis,o).lo,0,i-1)),h?n=_e(Rs(t,r.axis,a).hi+1,s,i)-s:n=i-s,{start:s,count:n}}var VF={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){e_(e);return}const s=e.width;e.data.datasets.forEach((n,r)=>{const{_data:o,indexAxis:a}=n,l=e.getDatasetMeta(r),h=o||n.data;if(Fo([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const c=e.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||e.options.parsing)return;let{start:u,count:d}=zF(l,h);const f=i.threshold||4*s;if(d<=f){Ix(n);return}It(o)&&(n._data=h,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let p;switch(i.algorithm){case"lttb":p=GF(h,u,d,s,i);break;case"min-max":p=HF(h,u,d,s);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}n._decimated=p})},destroy(e){e_(e)}};function WF(e,t,i){const s=e.segments,n=e.points,r=t.points,o=[];for(const a of s){let{start:l,end:h}=a;h=cp(l,h,n);const c=ef(i,n[l],n[h],a.loop);if(!t.segments){o.push({source:a,target:c,start:n[l],end:n[h]});continue}const u=ux(t,c);for(const d of u){const f=ef(i,r[d.start],r[d.end],d.loop),p=cx(a,n,f);for(const m of p)o.push({source:m,target:d,start:{[i]:i_(c,f,"start",Math.max)},end:{[i]:i_(c,f,"end",Math.min)}})}}return o}function ef(e,t,i,s){if(s)return;let n=t[e],r=i[e];return e==="angle"&&(n=ti(n),r=ti(r)),{property:e,start:n,end:r}}function jF(e,t){const{x:i=null,y:s=null}=e||{},n=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=cp(o,a,n);const l=n[o],h=n[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:h.x,y:s})):i!==null&&(r.push({x:i,y:l.y}),r.push({x:i,y:h.y}))}),r}function cp(e,t,i){for(;t>e;t--){const s=i[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function i_(e,t,i,s){return e&&t?s(e[i],t[i]):e?e[i]:t?t[i]:0}function Px(e,t){let i=[],s=!1;return Nt(e)?(s=!0,i=e):i=jF(e,t),i.length?new Js({points:i,options:{tension:0},_loop:s,_fullLoop:s}):null}function s_(e){return e&&e.fill!==!1}function XF(e,t,i){let n=e[t].fill;const r=[t];let o;if(!i)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!ee(n))return n;if(o=e[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function YF(e,t,i){const s=qF(e);if(St(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return ee(n)&&Math.floor(n)===n?$F(s[0],t,n,i):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function $F(e,t,i,s){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=s?!1:i}function ZF(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:St(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function KF(e,t,i){let s;return e==="start"?s=i:e==="end"?s=t.options.reverse?t.min:t.max:St(e)?s=e.value:s=t.getBaseValue(),s}function qF(e){const t=e.options,i=t.fill;let s=yt(i&&i.target,i);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function JF(e){const{scale:t,index:i,line:s}=e,n=[],r=s.segments,o=s.points,a=QF(t,i);a.push(Px({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const h=r[l];for(let c=h.start;c<=h.end;c++)t3(n,o[c],a)}return new Js({points:n,options:{}})}function QF(e,t){const i=[],s=e.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const r=s[n];if(r.index===t)break;r.hidden||i.unshift(r.dataset)}return i}function t3(e,t,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n],{first:o,last:a,point:l}=e3(r,t,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(e.push(l),!a)break}}e.push(...s)}function e3(e,t,i){const s=e.interpolate(t,i);if(!s)return{};const n=s[i],r=e.segments,o=e.points;let a=!1,l=!1;for(let h=0;h<r.length;h++){const c=r[h],u=o[c.start][i],d=o[c.end][i];if(Ps(n,u,d)){a=n===u,l=n===d;break}}return{first:a,last:l,point:s}}class Rx{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,s){const{x:n,y:r,radius:o}=this;return i=i||{start:0,end:Ut},t.arc(n,r,o,i.end,i.start,!0),!s.bounds}interpolate(t){const{x:i,y:s,radius:n}=this,r=t.angle;return{x:i+Math.cos(r)*n,y:s+Math.sin(r)*n,angle:r}}}function i3(e){const{chart:t,fill:i,line:s}=e;if(ee(i))return s3(t,i);if(i==="stack")return JF(e);if(i==="shape")return!0;const n=n3(e);return n instanceof Rx?n:Px(n,s)}function s3(e,t){const i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function n3(e){return(e.scale||{}).getPointPositionForValue?o3(e):r3(e)}function r3(e){const{scale:t={},fill:i}=e,s=ZF(i,t);if(ee(s)){const n=t.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function o3(e){const{scale:t,fill:i}=e,s=t.options,n=t.getLabels().length,r=s.reverse?t.max:t.min,o=KF(i,t,r),a=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,r);return new Rx({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(t.getPointPositionForValue(l,o));return a}function Lu(e,t,i){const s=i3(t),{line:n,scale:r,axis:o}=t,a=n.options,l=a.fill,h=a.backgroundColor,{above:c=h,below:u=h}=l||{};s&&n.points.length&&(gc(e,i),a3(e,{line:n,target:s,above:c,below:u,area:i,scale:r,axis:o}),_c(e))}function a3(e,t){const{line:i,target:s,above:n,below:r,area:o,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),l==="x"&&r!==n&&(n_(e,s,o.top),r_(e,{line:i,target:s,color:n,scale:a,property:l}),e.restore(),e.save(),n_(e,s,o.bottom)),r_(e,{line:i,target:s,color:r,scale:a,property:l}),e.restore()}function n_(e,t,i){const{segments:s,points:n}=t;let r=!0,o=!1;e.beginPath();for(const a of s){const{start:l,end:h}=a,c=n[l],u=n[cp(l,h,n)];r?(e.moveTo(c.x,c.y),r=!1):(e.lineTo(c.x,i),e.lineTo(c.x,c.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(u.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function r_(e,t){const{line:i,target:s,property:n,color:r,scale:o}=t,a=WF(i,s,n);for(const{source:l,target:h,start:c,end:u}of a){const{style:{backgroundColor:d=r}={}}=l,f=s!==!0;e.save(),e.fillStyle=d,l3(e,o,f&&ef(n,c,u)),e.beginPath();const p=!!i.pathSegment(e,l);let m;if(f){p?e.closePath():o_(e,s,u,n);const g=!!s.pathSegment(e,h,{move:p,reverse:!0});m=p&&g,m||o_(e,s,c,n)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function l3(e,t,i){const{top:s,bottom:n}=t.chart.chartArea,{property:r,start:o,end:a}=i||{};r==="x"&&(e.beginPath(),e.rect(o,s,a-o,n-s),e.clip())}function o_(e,t,i,s){const n=t.interpolate(i,s);n&&e.lineTo(n.x,n.y)}var h3={id:"filler",afterDatasetsUpdate(e,t,i){const s=(e.data.datasets||[]).length,n=[];let r,o,a,l;for(o=0;o<s;++o)r=e.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Js&&(l={visible:e.isDatasetVisible(o),index:o,fill:YF(a,o,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,n.push(l);for(o=0;o<s;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=XF(n,o,i.propagate))},beforeDraw(e,t,i){const s=i.drawTime==="beforeDraw",n=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=n.length-1;o>=0;--o){const a=n[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&Lu(e.ctx,a,r))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const r=s[n].$filler;s_(r)&&Lu(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,i){const s=t.meta.$filler;!s_(s)||i.drawTime!=="beforeDatasetDraw"||Lu(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const a_=(e,t)=>{let{boxHeight:i=t,boxWidth:s=t}=e;return e.usePointStyle&&(i=Math.min(i,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(t,i)}},c3=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class l_ extends Gs{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,s){this.maxWidth=t,this.maxHeight=i,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=Lt(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(s=>t.filter(s,this.chart.data))),t.sort&&(i=i.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,n=de(s.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=a_(s,r);let h,c;i.font=n.string,this.isHorizontal()?(h=this.maxWidth,c=this._fitRows(o,r,a,l)+10):(c=this.maxHeight,h=this._fitCols(o,n,a,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,i,s,n){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],c=n+a;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-c;return this.legendItems.forEach((p,m)=>{const g=s+i/2+r.measureText(p.text).width;(m===0||h[h.length-1]+g+2*a>o)&&(u+=c,h[h.length-(m>0?0:1)]=0,f+=c,d++),l[m]={left:0,top:f,row:d,width:g,height:n},h[h.length-1]+=g+a}),u}_fitCols(t,i,s,n){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],c=o-t;let u=a,d=0,f=0,p=0,m=0;return this.legendItems.forEach((g,_)=>{const{itemWidth:y,itemHeight:b}=u3(s,i,r,g,n);_>0&&f+b+2*a>c&&(u+=d+a,h.push({width:d,height:f}),p+=d+a,m++,d=f=0),l[_]={left:p,top:f,col:m,width:y,height:b},d=Math.max(d,y),f+=b+a}),u+=d,h.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:s,labels:{padding:n},rtl:r}}=this,o=Vr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ee(s,this.left+n,this.right-this.lineWidths[a]);for(const h of i)a!==h.row&&(a=h.row,l=Ee(s,this.left+n,this.right-this.lineWidths[a])),h.top+=this.top+t+n,h.left=o.leftForLtr(o.x(l),h.width),l+=h.width+n}else{let a=0,l=Ee(s,this.top+t+n,this.bottom-this.columnSizes[a].height);for(const h of i)h.col!==a&&(a=h.col,l=Ee(s,this.top+t+n,this.bottom-this.columnSizes[a].height)),h.top=l,h.left+=this.left+n,h.left=o.leftForLtr(o.x(h.left),h.width),l+=h.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;gc(t,this),this._draw(),_c(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:s,ctx:n}=this,{align:r,labels:o}=t,a=oe.color,l=Vr(t.rtl,this.left,this.width),h=de(o.font),{padding:c}=o,u=h.size,d=u/2;let f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:p,boxHeight:m,itemHeight:g}=a_(o,u),_=function(T,S,A){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;n.save();const M=yt(A.lineWidth,1);if(n.fillStyle=yt(A.fillStyle,a),n.lineCap=yt(A.lineCap,"butt"),n.lineDashOffset=yt(A.lineDashOffset,0),n.lineJoin=yt(A.lineJoin,"miter"),n.lineWidth=M,n.strokeStyle=yt(A.strokeStyle,a),n.setLineDash(yt(A.lineDash,[])),o.usePointStyle){const O={radius:m*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:M},C=l.xPlus(T,p/2),k=S+d;J1(n,O,C,k,o.pointStyleWidth&&p)}else{const O=S+Math.max((u-m)/2,0),C=l.leftForLtr(T,p),k=Vn(A.borderRadius);n.beginPath(),Object.values(k).some(P=>P!==0)?xa(n,{x:C,y:O,w:p,h:m,radius:k}):n.rect(C,O,p,m),n.fill(),M!==0&&n.stroke()}n.restore()},y=function(T,S,A){Jn(n,A.text,T,S+g/2,h,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},b=this.isHorizontal(),v=this._computeTitleHeight();b?f={x:Ee(r,this.left+c,this.right-s[0]),y:this.top+c+v,line:0}:f={x:this.left+c,y:Ee(r,this.top+v+c,this.bottom-i[0].height),line:0},ax(this.ctx,t.textDirection);const x=g+c;this.legendItems.forEach((T,S)=>{n.strokeStyle=T.fontColor,n.fillStyle=T.fontColor;const A=n.measureText(T.text).width,M=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),O=p+d+A;let C=f.x,k=f.y;l.setWidth(this.width),b?S>0&&C+O+c>this.right&&(k=f.y+=x,f.line++,C=f.x=Ee(r,this.left+c,this.right-s[f.line])):S>0&&k+x>this.bottom&&(C=f.x=C+i[f.line].width+c,f.line++,k=f.y=Ee(r,this.top+v+c,this.bottom-i[f.line].height));const P=l.x(C);if(_(P,k,T),C=OD(M,C+p+d,b?C+O:this.right,t.rtl),y(l.x(C),k,T),b)f.x+=O+c;else if(typeof T.text!="string"){const w=h.lineHeight;f.y+=Dx(T,w)}else f.y+=x}),lx(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,s=de(i.font),n=Re(i.padding);if(!i.display)return;const r=Vr(t.rtl,this.left,this.width),o=this.ctx,a=i.position,l=s.size/2,h=n.top+l;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+h,u=Ee(t.align,u,this.right-d);else{const p=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);c=h+Ee(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=Ee(a,u,u+d);o.textAlign=r.textAlign(sp(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=s.string,Jn(o,i.text,f,c,s)}_computeTitleHeight(){const t=this.options.title,i=de(t.font),s=Re(t.padding);return t.display?i.lineHeight+s.height:0}_getLegendItemAt(t,i){let s,n,r;if(Ps(t,this.left,this.right)&&Ps(i,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(n=r[s],Ps(t,n.left,n.left+n.width)&&Ps(i,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){const i=this.options;if(!p3(t.type,i))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,r=c3(n,s);n&&!r&&Lt(i.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!r&&Lt(i.onHover,[t,s,this],this)}else s&&Lt(i.onClick,[t,s,this],this)}}function u3(e,t,i,s,n){const r=d3(s,e,t,i),o=f3(n,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function d3(e,t,i,s){let n=e.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),t+i.size/2+s.measureText(n).width}function f3(e,t,i){let s=e;return typeof t.text!="string"&&(s=Dx(t,i)),s}function Dx(e,t){const i=e.text?e.text.length+.5:0;return t*i}function p3(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var m3={id:"legend",_element:l_,start(e,t,i){const s=e.legend=new l_({ctx:e.ctx,options:i,chart:e});Ce.configure(e,s,i),Ce.addBox(e,s)},stop(e){Ce.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const s=e.legend;Ce.configure(e,s,i),s.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const s=t.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(i?0:void 0),c=Re(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:h.borderColor,pointStyle:s||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:o&&(a||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};let up=class extends Gs{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;const n=Nt(s.text)?s.text.length:1;this._padding=Re(s.padding);const r=n*de(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:i,left:s,bottom:n,right:r,options:o}=this,a=o.align;let l=0,h,c,u;return this.isHorizontal()?(c=Ee(a,s,r),u=i+t,h=r-s):(o.position==="left"?(c=s+t,u=Ee(a,n,i),l=zt*-.5):(c=r-t,u=Ee(a,i,n),l=zt*.5),h=n-i),{titleX:c,titleY:u,maxWidth:h,rotation:l}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const s=de(i.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:h}=this._drawArgs(r);Jn(t,i.text,0,0,s,{color:i.color,maxWidth:l,rotation:h,textAlign:sp(i.align),textBaseline:"middle",translation:[o,a]})}};function g3(e,t){const i=new up({ctx:e.ctx,options:t,chart:e});Ce.configure(e,i,t),Ce.addBox(e,i),e.titleBlock=i}var _3={id:"title",_element:up,start(e,t,i){g3(e,i)},stop(e){const t=e.titleBlock;Ce.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const s=e.titleBlock;Ce.configure(e,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const El=new WeakMap;var y3={id:"subtitle",start(e,t,i){const s=new up({ctx:e.ctx,options:i,chart:e});Ce.configure(e,s,i),Ce.addBox(e,s),El.set(e,s)},stop(e){Ce.removeBox(e,El.get(e)),El.delete(e)},beforeUpdate(e,t,i){const s=El.get(e);Ce.configure(e,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bo={average(e){if(!e.length)return!1;let t,i,s=0,n=0,r=0;for(t=0,i=e.length;t<i;++t){const o=e[t].element;if(o&&o.hasValue()){const a=o.tooltipPosition();s+=a.x,n+=a.y,++r}}return{x:s/r,y:n/r}},nearest(e,t){if(!e.length)return!1;let i=t.x,s=t.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),c=$d(t,h);c<n&&(n=c,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,s=l.y}return{x:i,y:s}}};function Yi(e,t){return t&&(Nt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ws(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function b3(e,t){const{element:i,datasetIndex:s,index:n}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:e,label:o,parsed:r.getParsed(n),raw:e.data.datasets[s].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function h_(e,t){const i=e.chart.ctx,{body:s,footer:n,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=de(t.bodyFont),h=de(t.titleFont),c=de(t.footerFont),u=r.length,d=n.length,f=s.length,p=Re(t.padding);let m=p.height,g=0,_=s.reduce((v,x)=>v+x.before.length+x.lines.length+x.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*h.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_){const v=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*v+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*c.lineHeight+(d-1)*t.footerSpacing);let y=0;const b=function(v){g=Math.max(g,i.measureText(v).width+y)};return i.save(),i.font=h.string,Rt(e.title,b),i.font=l.string,Rt(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,Rt(s,v=>{Rt(v.before,b),Rt(v.lines,b),Rt(v.after,b)}),y=0,i.font=c.string,Rt(e.footer,b),i.restore(),g+=p.width,{width:g,height:m}}function x3(e,t){const{y:i,height:s}=t;return i<s/2?"top":i>e.height-s/2?"bottom":"center"}function v3(e,t,i,s){const{x:n,width:r}=s,o=i.caretSize+i.caretPadding;if(e==="left"&&n+r+o>t.width||e==="right"&&n-r-o<0)return!0}function w3(e,t,i,s){const{x:n,width:r}=i,{width:o,chartArea:{left:a,right:l}}=e;let h="center";return s==="center"?h=n<=(a+l)/2?"left":"right":n<=r/2?h="left":n>=o-r/2&&(h="right"),v3(h,e,t,i)&&(h="center"),h}function c_(e,t,i){const s=i.yAlign||t.yAlign||x3(e,i);return{xAlign:i.xAlign||t.xAlign||w3(e,t,i,s),yAlign:s}}function S3(e,t){let{x:i,width:s}=e;return t==="right"?i-=s:t==="center"&&(i-=s/2),i}function E3(e,t,i){let{y:s,height:n}=e;return t==="top"?s+=i:t==="bottom"?s-=n+i:s-=n/2,s}function u_(e,t,i,s){const{caretSize:n,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,h=n+r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=Vn(o);let p=S3(t,a);const m=E3(t,l,h);return l==="center"?a==="left"?p+=h:a==="right"&&(p-=h):a==="left"?p-=Math.max(c,d)+n:a==="right"&&(p+=Math.max(u,f)+n),{x:_e(p,0,s.width-t.width),y:_e(m,0,s.height-t.height)}}function Tl(e,t,i){const s=Re(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function d_(e){return Yi([],ws(e))}function T3(e,t,i){return _n(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function f_(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const Ox={beforeTitle:bs,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,s=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return i[t.dataIndex]}return""},afterTitle:bs,beforeBody:bs,beforeLabel:bs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return It(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:bs,afterBody:bs,beforeFooter:bs,footer:bs,afterFooter:bs};function Le(e,t,i,s){const n=e[t].call(i,s);return typeof n>"u"?Ox[t].call(i,s):n}class sf extends Gs{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&i.options.animation&&s.animations,r=new dx(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=T3(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:s}=i,n=Le(s,"beforeTitle",this,t),r=Le(s,"title",this,t),o=Le(s,"afterTitle",this,t);let a=[];return a=Yi(a,ws(n)),a=Yi(a,ws(r)),a=Yi(a,ws(o)),a}getBeforeBody(t,i){return d_(Le(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:s}=i,n=[];return Rt(t,r=>{const o={before:[],lines:[],after:[]},a=f_(s,r);Yi(o.before,ws(Le(a,"beforeLabel",this,r))),Yi(o.lines,Le(a,"label",this,r)),Yi(o.after,ws(Le(a,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(t,i){return d_(Le(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:s}=i,n=Le(s,"beforeFooter",this,t),r=Le(s,"footer",this,t),o=Le(s,"afterFooter",this,t);let a=[];return a=Yi(a,ws(n)),a=Yi(a,ws(r)),a=Yi(a,ws(o)),a}_createItems(t){const i=this._active,s=this.chart.data,n=[],r=[],o=[];let a=[],l,h;for(l=0,h=i.length;l<h;++l)a.push(b3(this.chart,i[l]));return t.filter&&(a=a.filter((c,u,d)=>t.filter(c,u,d,s))),t.itemSort&&(a=a.sort((c,u)=>t.itemSort(c,u,s))),Rt(a,c=>{const u=f_(t.callbacks,c);n.push(Le(u,"labelColor",this,c)),r.push(Le(u,"labelPointStyle",this,c)),o.push(Le(u,"labelTextColor",this,c))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,i){const s=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const a=Bo[s.position].call(this,n,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=h_(this,s),h=Object.assign({},a,l),c=c_(this.chart,s,h),u=u_(s,h,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,s,n){const r=this.getCaretPosition(t,s,n);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(t,i,s){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:h,bottomLeft:c,bottomRight:u}=Vn(a),{x:d,y:f}=t,{width:p,height:m}=i;let g,_,y,b,v,x;return r==="center"?(v=f+m/2,n==="left"?(g=d,_=g-o,b=v+o,x=v-o):(g=d+p,_=g+o,b=v-o,x=v+o),y=g):(n==="left"?_=d+Math.max(l,c)+o:n==="right"?_=d+p-Math.max(h,u)-o:_=this.caretX,r==="top"?(b=f,v=b-o,g=_-o,y=_+o):(b=f+m,v=b+o,g=_+o,y=_-o),x=b),{x1:g,x2:_,x3:y,y1:b,y2:v,y3:x}}drawTitle(t,i,s){const n=this.title,r=n.length;let o,a,l;if(r){const h=Vr(s.rtl,this.x,this.width);for(t.x=Tl(this,s.titleAlign,s),i.textAlign=h.textAlign(s.titleAlign),i.textBaseline="middle",o=de(s.titleFont),a=s.titleSpacing,i.fillStyle=s.titleColor,i.font=o.string,l=0;l<r;++l)i.fillText(n[l],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,i,s,n,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:h,boxPadding:c}=r,u=de(r.bodyFont),d=Tl(this,"left",r),f=n.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=i.y+p;if(r.usePointStyle){const g={radius:Math.min(h,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=n.leftForLtr(f,h)+h/2,y=m+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Kd(t,g,_,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Kd(t,g,_,y)}else{t.lineWidth=St(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const g=n.leftForLtr(f,h-c),_=n.leftForLtr(n.xPlus(f,1),h-c-2),y=Vn(o.borderRadius);Object.values(y).some(b=>b!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,xa(t,{x:g,y:m,w:h,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),xa(t,{x:_,y:m+1,w:h-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(g,m,h,l),t.strokeRect(g,m,h,l),t.fillStyle=o.backgroundColor,t.fillRect(_,m+1,h-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,i,s){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:h,boxPadding:c}=s,u=de(s.bodyFont);let d=u.lineHeight,f=0;const p=Vr(s.rtl,this.x,this.width),m=function(A){i.fillText(A,p.x(t.x+f),t.y+d/2),t.y+=d+r},g=p.textAlign(o);let _,y,b,v,x,T,S;for(i.textAlign=o,i.textBaseline="middle",i.font=u.string,t.x=Tl(this,g,s),i.fillStyle=s.bodyColor,Rt(this.beforeBody,m),f=a&&g!=="right"?o==="center"?h/2+c:h+2+c:0,v=0,T=n.length;v<T;++v){for(_=n[v],y=this.labelTextColors[v],i.fillStyle=y,Rt(_.before,m),b=_.lines,a&&b.length&&(this._drawColorBox(i,t,v,p,s),d=Math.max(u.lineHeight,l)),x=0,S=b.length;x<S;++x)m(b[x]),d=u.lineHeight;Rt(_.after,m)}f=0,d=u.lineHeight,Rt(this.afterBody,m),t.y-=r}drawFooter(t,i,s){const n=this.footer,r=n.length;let o,a;if(r){const l=Vr(s.rtl,this.x,this.width);for(t.x=Tl(this,s.footerAlign,s),t.y+=s.footerMarginTop,i.textAlign=l.textAlign(s.footerAlign),i.textBaseline="middle",o=de(s.footerFont),i.fillStyle=s.footerColor,i.font=o.string,a=0;a<r;++a)i.fillText(n[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,i,s,n){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:h,height:c}=s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Vn(n.cornerRadius);i.fillStyle=n.backgroundColor,i.strokeStyle=n.borderColor,i.lineWidth=n.borderWidth,i.beginPath(),i.moveTo(a+u,l),o==="top"&&this.drawCaret(t,i,s,n),i.lineTo(a+h-d,l),i.quadraticCurveTo(a+h,l,a+h,l+d),o==="center"&&r==="right"&&this.drawCaret(t,i,s,n),i.lineTo(a+h,l+c-p),i.quadraticCurveTo(a+h,l+c,a+h-p,l+c),o==="bottom"&&this.drawCaret(t,i,s,n),i.lineTo(a+f,l+c),i.quadraticCurveTo(a,l+c,a,l+c-f),o==="center"&&r==="left"&&this.drawCaret(t,i,s,n),i.lineTo(a,l+u),i.quadraticCurveTo(a,l,a+u,l),i.closePath(),i.fill(),n.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,s=this.$animations,n=s&&s.x,r=s&&s.y;if(n||r){const o=Bo[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=h_(this,t),l=Object.assign({},o,this._size),h=c_(i,t,l),c=u_(t,l,h,i);(n._to!==c.x||r._to!==c.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(i);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Re(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,n,i),ax(t,i.textDirection),r.y+=o.top,this.drawTitle(r,t,i),this.drawBody(r,t,i),this.drawFooter(r,t,i),lx(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const s=this._active,n=t.map(({datasetIndex:a,index:l})=>{const h=this.chart.getDatasetMeta(a);if(!h)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:h.data[l],index:l}}),r=!Dh(s,n),o=this._positionChanged(n,i);(r||o)&&(this._active=n,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(t,r,i,s),a=this._positionChanged(o,t),l=i||!Dh(o,r)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,s,n){const r=this.options;if(t.type==="mouseout")return[];if(!n)return i;const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,i){const{caretX:s,caretY:n,options:r}=this,o=Bo[r.position].call(this,t,i);return o!==!1&&(s!==o.x||n!==o.y)}}nt(sf,"positioners",Bo);var A3={id:"tooltip",_element:sf,positioners:Bo,afterInit(e,t,i){i&&(e.tooltip=new sf({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ox},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},C3=Object.freeze({__proto__:null,Colors:UF,Decimation:VF,Filler:h3,Legend:m3,SubTitle:y3,Title:_3,Tooltip:A3});const M3=(e,t,i,s)=>(typeof t=="string"?(i=e.push(t)-1,s.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function I3(e,t,i,s){const n=e.indexOf(t);if(n===-1)return M3(e,t,i,s);const r=e.lastIndexOf(t);return n!==r?i:n}const P3=(e,t)=>e===null?null:_e(Math.round(e),0,t);function p_(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class nf extends sr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const s=this.getLabels();for(const{index:n,label:r}of i)s[n]===r&&s.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(It(t))return null;const s=this.getLabels();return i=isFinite(i)&&s[i]===t?i:I3(s,t,yt(i,t),this._addedLabels),P3(i,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),i||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const t=this.min,i=this.max,s=this.options.offset,n=[];let r=this.getLabels();r=t===0&&i===r.length-1?r:r.slice(t,i+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=i;o++)n.push({value:o});return n}getLabelForValue(t){return p_.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}nt(nf,"id","category"),nt(nf,"defaults",{ticks:{callback:p_}});function R3(e,t){const i=[],{bounds:n,step:r,min:o,max:a,precision:l,count:h,maxTicks:c,maxDigits:u,includeBounds:d}=e,f=r||1,p=c-1,{min:m,max:g}=t,_=!It(o),y=!It(a),b=!It(h),v=(g-m)/(u+1);let x=c0((g-m)/p/f)*f,T,S,A,M;if(x<1e-14&&!_&&!y)return[{value:m},{value:g}];M=Math.ceil(g/x)-Math.floor(m/x),M>p&&(x=c0(M*x/p/f)*f),It(l)||(T=Math.pow(10,l),x=Math.ceil(x*T)/T),n==="ticks"?(S=Math.floor(m/x)*x,A=Math.ceil(g/x)*x):(S=m,A=g),_&&y&&r&&AD((a-o)/r,x/1e3)?(M=Math.round(Math.min((a-o)/x,c)),x=(a-o)/M,S=o,A=a):b?(S=_?o:S,A=y?a:A,M=h-1,x=(A-S)/M):(M=(A-S)/x,$o(M,Math.round(M),x/1e3)?M=Math.round(M):M=Math.ceil(M));const O=Math.max(u0(x),u0(S));T=Math.pow(10,It(l)?O:l),S=Math.round(S*T)/T,A=Math.round(A*T)/T;let C=0;for(_&&(d&&S!==o?(i.push({value:o}),S<o&&C++,$o(Math.round((S+C*x)*T)/T,o,m_(o,v,e))&&C++):S<o&&C++);C<M;++C)i.push({value:Math.round((S+C*x)*T)/T});return y&&d&&A!==a?i.length&&$o(i[i.length-1].value,a,m_(a,v,e))?i[i.length-1].value=a:i.push({value:a}):(!y||A===a)&&i.push({value:A}),i}function m_(e,t,{horizontal:i,minRotation:s}){const n=ki(s),r=(i?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class Gh extends sr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return It(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this;const o=l=>n=i?n:l,a=l=>r=s?r:l;if(t){const l=os(n),h=os(r);l<0&&h<0?a(0):l>0&&h>0&&o(0)}if(n===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(n-l)}this.min=n,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),i=i||11),i&&(n=Math.min(i,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,o=R3(n,r);return t.bounds==="ticks"&&z1(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let i=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const n=(s-i)/Math.max(t.length-1,1)/2;i-=n,s+=n}this._startValue=i,this._endValue=s,this._valueRange=s-i}getLabelForValue(t){return ka(t,this.chart.options.locale,this.options.ticks.format)}}class rf extends Gh{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=ee(t)?t:0,this.max=ee(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,s=ki(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}nt(rf,"id","linear"),nt(rf,"defaults",{ticks:{callback:mc.formatters.numeric}});const wa=e=>Math.floor(qs(e)),An=(e,t)=>Math.pow(10,wa(e)+t);function g_(e){return e/Math.pow(10,wa(e))===1}function __(e,t,i){const s=Math.pow(10,i),n=Math.floor(e/s);return Math.ceil(t/s)-n}function D3(e,t){const i=t-e;let s=wa(i);for(;__(e,t,s)>10;)s++;for(;__(e,t,s)<10;)s--;return Math.min(s,wa(e))}function O3(e,{min:t,max:i}){t=qe(e.min,t);const s=[],n=wa(t);let r=D3(t,i),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=n>r?Math.pow(10,n):0,h=Math.round((t-l)*o)/o,c=Math.floor((t-l)/a/10)*a*10;let u=Math.floor((h-c)/Math.pow(10,r)),d=qe(e.min,Math.round((l+c+u*Math.pow(10,r))*o)/o);for(;d<i;)s.push({value:d,major:g_(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+c+u*Math.pow(10,r))*o)/o;const f=qe(e.max,d);return s.push({value:f,major:g_(f),significand:u}),s}class of extends sr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){const s=Gh.prototype.parse.apply(this,[t,i]);if(s===0){this._zero=!0;return}return ee(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=ee(t)?Math.max(0,t):null,this.max=ee(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ee(this._userMin)&&(this.min=t===An(this.min,0)?An(this.min,-1):An(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let s=this.min,n=this.max;const r=a=>s=t?s:a,o=a=>n=i?n:a;s===n&&(s<=0?(r(1),o(10)):(r(An(s,-1)),o(An(n,1)))),s<=0&&r(An(n,-1)),n<=0&&o(An(s,1)),this.min=s,this.max=n}buildTicks(){const t=this.options,i={min:this._userMin,max:this._userMax},s=O3(i,this);return t.bounds==="ticks"&&z1(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":ka(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=qs(t),this._valueRange=qs(this.max)-qs(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(qs(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}}nt(of,"id","logarithmic"),nt(of,"defaults",{ticks:{callback:mc.formatters.logarithmic,major:{enabled:!0}}});function af(e){const t=e.ticks;if(t.display&&e.display){const i=Re(t.backdropPadding);return yt(t.font&&t.font.size,oe.font.size)+i.height}return 0}function k3(e,t,i){return i=Nt(i)?i:[i],{w:VD(e,t.string,i),h:i.length*t.lineHeight}}function y_(e,t,i,s,n){return e===s||e===n?{start:t-i/2,end:t+i/2}:e<s||e>n?{start:t-i,end:t}:{start:t,end:t+i}}function F3(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),s=[],n=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?zt/r:0;for(let l=0;l<r;l++){const h=o.setContext(e.getPointLabelContext(l));n[l]=h.padding;const c=e.getPointPosition(l,e.drawingArea+n[l],a),u=de(h.font),d=k3(e.ctx,u,e._pointLabels[l]);s[l]=d;const f=ti(e.getIndexAngle(l)+a),p=Math.round(ep(f)),m=y_(p,c.x,d.w,0,180),g=y_(p,c.y,d.h,90,270);L3(i,t,f,m,g)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=B3(e,s,n)}function L3(e,t,i,s,n){const r=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),n.start<t.t?(l=(t.t-n.start)/o,e.t=Math.min(e.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function B3(e,t,i){const s=[],n=e._pointLabels.length,r=e.options,o=af(r)/2,a=e.drawingArea,l=r.pointLabels.centerPointLabels?zt/n:0;for(let h=0;h<n;h++){const c=e.getPointPosition(h,a+o+i[h],l),u=Math.round(ep(ti(c.angle+ie))),d=t[h],f=G3(c.y,d.h,u),p=N3(u),m=U3(c.x,d.w,p);s.push({x:c.x,y:f,textAlign:p,left:m,top:f,right:m+d.w,bottom:f+d.h})}return s}function N3(e){return e===0||e===180?"center":e<180?"left":"right"}function U3(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function G3(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function H3(e,t){const{ctx:i,options:{pointLabels:s}}=e;for(let n=t-1;n>=0;n--){const r=s.setContext(e.getPointLabelContext(n)),o=de(r.font),{x:a,y:l,textAlign:h,left:c,top:u,right:d,bottom:f}=e._pointLabelItems[n],{backdropColor:p}=r;if(!It(p)){const m=Vn(r.borderRadius),g=Re(r.backdropPadding);i.fillStyle=p;const _=c-g.left,y=u-g.top,b=d-c+g.width,v=f-u+g.height;Object.values(m).some(x=>x!==0)?(i.beginPath(),xa(i,{x:_,y,w:b,h:v,radius:m}),i.fill()):i.fillRect(_,y,b,v)}Jn(i,e._pointLabels[n],a,l+o.lineHeight/2,o,{color:r.color,textAlign:h,textBaseline:"middle"})}}function kx(e,t,i,s){const{ctx:n}=e;if(i)n.arc(e.xCenter,e.yCenter,t,0,Ut);else{let r=e.getPointPosition(0,t);n.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=e.getPointPosition(o,t),n.lineTo(r.x,r.y)}}function z3(e,t,i,s,n){const r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||i<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(n.dash),r.lineDashOffset=n.dashOffset,r.beginPath(),kx(e,i,o,s),r.closePath(),r.stroke(),r.restore())}function V3(e,t,i){return _n(e,{label:i,index:t,type:"pointLabel"})}class No extends Gh{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Re(af(this.options)/2),i=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(i,s)/2)}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!1);this.min=ee(t)&&!isNaN(t)?t:0,this.max=ee(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/af(this.options))}generateTickLabels(t){Gh.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,s)=>{const n=Lt(this.options.pointLabels.callback,[i,s],this);return n||n===0?n:""}).filter((i,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?F3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,s,n){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,s,n))}getIndexAngle(t){const i=Ut/(this._pointLabels.length||1),s=this.options.startAngle||0;return ti(t*i+ki(s))}getDistanceFromCenterForValue(t){if(It(t))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(It(t))return NaN;const i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){const i=this._pointLabels||[];if(t>=0&&t<i.length){const s=i[t];return V3(this.getContext(),t,s)}}getPointPosition(t,i,s=0){const n=this.getIndexAngle(t)-ie+s;return{x:Math.cos(n)*i+this.xCenter,y:Math.sin(n)*i+this.yCenter,angle:n}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:i,top:s,right:n,bottom:r}=this._pointLabelItems[t];return{left:i,top:s,right:n,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:i}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),kx(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,i=this.options,{angleLines:s,grid:n,border:r}=i,o=this._pointLabels.length;let a,l,h;if(i.pointLabels.display&&H3(this,o),n.display&&this.ticks.forEach((c,u)=>{if(u!==0){l=this.getDistanceFromCenterForValue(c.value);const d=this.getContext(u),f=n.setContext(d),p=r.setContext(d);z3(this,f,l,o,p)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const c=s.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=c;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),h=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,i=this.options,s=i.ticks;if(!s.display)return;const n=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!i.reverse)return;const h=s.setContext(this.getContext(l)),c=de(h.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),h.showLabelBackdrop){t.font=c.string,o=t.measureText(a.label).width,t.fillStyle=h.backdropColor;const u=Re(h.backdropPadding);t.fillRect(-o/2-u.left,-r-c.size/2-u.top,o+u.width,c.size+u.height)}Jn(t,a.label,0,-r,c,{color:h.color})}),t.restore()}drawTitle(){}}nt(No,"id","radialLinear"),nt(No,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:mc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),nt(No,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),nt(No,"descriptors",{angleLines:{_fallback:"grid"}});const bc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ue=Object.keys(bc);function W3(e,t){return e-t}function b_(e,t){if(It(t))return null;const i=e._adapter,{parser:s,round:n,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),ee(o)||(o=typeof s=="string"?i.parse(o,s):i.parse(o)),o===null?null:(n&&(o=n==="week"&&(so(r)||r===!0)?i.startOf(o,"isoWeek",r):i.startOf(o,n)),+o)}function x_(e,t,i,s){const n=Ue.length;for(let r=Ue.indexOf(e);r<n-1;++r){const o=bc[Ue[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-t)/(a*o.size))<=s)return Ue[r]}return Ue[n-1]}function j3(e,t,i,s,n){for(let r=Ue.length-1;r>=Ue.indexOf(i);r--){const o=Ue[r];if(bc[o].common&&e._adapter.diff(n,s,o)>=t-1)return o}return Ue[i?Ue.indexOf(i):0]}function X3(e){for(let t=Ue.indexOf(e)+1,i=Ue.length;t<i;++t)if(bc[Ue[t]].common)return Ue[t]}function v_(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:s,hi:n}=ip(i,t),r=i[s]>=t?i[s]:i[n];e[r]=!0}}function Y3(e,t,i,s){const n=e._adapter,r=+n.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+n.add(a,1,s))l=i[a],l>=0&&(t[l].major=!0);return t}function w_(e,t,i){const s=[],n={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],n[a]=o,s.push({value:a,major:!1});return r===0||!i?s:Y3(e,s,n,i)}class Sa extends sr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const s=t.time||(t.time={}),n=this._adapter=new rk._date(t.adapters.date);n.init(i),Yo(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:b_(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,s=t.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(h){!o&&!isNaN(h.min)&&(n=Math.min(n,h.min)),!a&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=ee(n)&&!isNaN(n)?n:+i.startOf(Date.now(),s),r=ee(r)&&!isNaN(r)?r:+i.endOf(Date.now(),s)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],s=t[t.length-1]),{min:i,max:s}}buildTicks(){const t=this.options,i=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,a=PD(n,r,o);return this._unit=i.unit||(s.autoSkip?x_(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):j3(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:X3(this._unit),this.initOffsets(n),t.reverse&&a.reverse(),w_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,s=0,n,r;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?i=1-n:i=(this.getDecimalForValue(t[1])-n)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=_e(i,0,o),s=_e(s,0,o),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const t=this._adapter,i=this.min,s=this.max,n=this.options,r=n.time,o=r.unit||x_(r.minUnit,i,s,this._getLabelCapacity(i)),a=yt(n.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,h=so(l)||l===!0,c={};let u=i,d,f;if(h&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,h?"day":o),t.diff(s,i,o)>1e5*a)throw new Error(i+" and "+s+" are too far apart with stepSize of "+a+" "+o);const p=n.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<s;d=+t.add(d,a,o),f++)v_(c,d,p);return(d===s||n.bounds==="ticks"||f===1)&&v_(c,d,p),Object.keys(c).sort((m,g)=>m-g).map(m=>+m)}getLabelForValue(t){const i=this._adapter,s=this.options.time;return s.tooltipFormat?i.format(t,s.tooltipFormat):i.format(t,s.displayFormats.datetime)}format(t,i){const n=this.options.time.displayFormats,r=this._unit,o=i||n[r];return this._adapter.format(t,o)}_tickFormatFunction(t,i,s,n){const r=this.options,o=r.ticks.callback;if(o)return Lt(o,[t,i,s],this);const a=r.time.displayFormats,l=this._unit,h=this._majorUnit,c=l&&a[l],u=h&&a[h],d=s[i],f=h&&u&&d&&d.major;return this._adapter.format(t,n||(f?u:c))}generateTickLabels(t){let i,s,n;for(i=0,s=t.length;i<s;++i)n=t[i],n.label=this._tickFormatFunction(n.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,s=this.ctx.measureText(t).width,n=ki(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const i=this.options.time,s=i.displayFormats,n=s[i.unit]||s.millisecond,r=this._tickFormatFunction(t,0,w_(this,[t],this._majorUnit),n),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,s;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(i=0,s=n.length;i<s;++i)t=t.concat(n[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,s;if(t.length)return t;const n=this.getLabels();for(i=0,s=n.length;i<s;++i)t.push(b_(this,n[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return j1(t.sort(W3))}}nt(Sa,"id","time"),nt(Sa,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Al(e,t,i){let s=0,n=e.length-1,r,o,a,l;i?(t>=e[s].pos&&t<=e[n].pos&&({lo:s,hi:n}=Rs(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[n]):(t>=e[s].time&&t<=e[n].time&&({lo:s,hi:n}=Rs(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[n]);const h=o-r;return h?a+(l-a)*(t-r)/h:a}class lf extends Sa{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Al(i,this.min),this._tableRange=Al(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:s}=this,n=[],r=[];let o,a,l,h,c;for(o=0,a=t.length;o<a;++o)h=t[o],h>=i&&h<=s&&n.push(h);if(n.length<2)return[{time:i,pos:0},{time:s,pos:1}];for(o=0,a=n.length;o<a;++o)c=n[o+1],l=n[o-1],h=n[o],Math.round((c+l)/2)!==h&&r.push({time:h,pos:o/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),s=this.getLabelTimestamps();return i.length&&s.length?t=this.normalize(i.concat(s)):t=i.length?i:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Al(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return Al(this._table,s*this._tableRange+this._minPos,!0)}}nt(lf,"id","timeseries"),nt(lf,"defaults",Sa.defaults);var $3=Object.freeze({__proto__:null,CategoryScale:nf,LinearScale:rf,LogarithmicScale:of,RadialLinearScale:No,TimeScale:Sa,TimeSeriesScale:lf});const Fx=[nk,OF,C3,$3];function Z3(e){let t,i,s,n,r;return{c(){t=J("div"),i=J("h2"),i.textContent="My Stats",s=vt(),n=J("div"),r=J("canvas"),U(i,"class","svelte-31sic0"),U(r,"class","svelte-31sic0"),U(n,"class","container svelte-31sic0"),U(t,"class","card svelte-31sic0")},m(o,a){lt(o,t,a),K(t,i),K(t,s),K(t,n),K(n,r),e[1](r)},p:ht,i:ht,o:ht,d(o){o&&at(t),e[1](null)}}}function K3(e,t,i){Di.register(...Fx);const s=JSON.parse(localStorage.getItem("userStats"));let n,r;const o=(d,f)=>{let p,m,g;const _=f.right-f.left,y=f.bottom-f.top;return(!g||p!==_||m!==y)&&(p=_,m=y,g=d.createLinearGradient(0,f.bottom,0,f.top),g.addColorStop(0,"#57ff54"),g.addColorStop(.5,"#f7ff54"),g.addColorStop(1,"#d60626")),g},a=(d,f)=>{let p,m,g;const _=f.right-f.left,y=f.bottom-f.top;return(!g||p!==_||m!==y)&&(p=_,m=y,g=d.createLinearGradient(0,f.bottom,0,f.top),g.addColorStop(0,"rgba(87, 255, 84, 0)"),g.addColorStop(.5,"rgba(247, 255, 84, 0.25)"),g.addColorStop(1,"rgba(214, 6, 38, 0.5)")),g},l=(d,f)=>{const p=d.createLinearGradient(f.left,0,f.right,0);return p.addColorStop(0,"rgba(59, 71, 88, 0.2)"),p.addColorStop(.5,"rgba(59, 71, 88, 0.5)"),p.addColorStop(1,"rgba(59, 71, 88, 0.2)"),p};let h={labels:s.scoreHistory.map((d,f)=>f),datasets:[{type:"line",data:s.scoreHistory,fill:{target:"origin",above(d){const f=d.chart,{ctx:p,chartArea:m}=f;if(m)return a(p,m)}},tension:.5,backgroundColor:"rgba(255, 255, 255, 0.2)",borderColor(d){const f=d.chart,{ctx:p,chartArea:m}=f;if(m)return o(p,m)}}]};const c={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"nearest",includeInivisible:!1},layout:{padding:{top:45}},plugins:{legend:{display:!1},tooltip:{displayColors:!1,xAlign:"center",titleMarginBottom:0,margin:10,yAlign:"bottom",titleAlign:"center",lineHeight:-5,backgroundColor:"#586A84",titleColor:"white",titleFont:{weight:"bold"},callbacks:{title:d=>`${d[0].raw}`,label:d=>""}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{display:!1}},y:{grid:{color(d){const f=d.chart,{ctx:p,chartArea:m}=f;if(m)return l(p,m)},lineWidth:1.5},border:{display:!1},beginAtZero:!1,ticks:{autoSkip:!1,maxTicksLimit:5,precision:0,maxRotation:0,color:"#3B4758",font:{size:12}}}}};oi(()=>{r=new Di(n.getContext("2d"),{type:"line",data:h,options:c})}),ao(()=>{r.destroy()});function u(d){es[d?"unshift":"push"](()=>{n=d,i(0,n)})}return[n,u]}class q3 extends ne{constructor(t){super(),se(this,t,K3,Z3,Jt,{})}}function J3(e){let t,i,s,n,r;return{c(){t=J("div"),i=J("h2"),i.textContent="Global Scores",s=vt(),n=J("div"),r=J("canvas"),U(i,"class","svelte-j4sdz"),U(r,"class","svelte-j4sdz"),U(n,"class","container svelte-j4sdz"),U(t,"class","card svelte-j4sdz")},m(o,a){lt(o,t,a),K(t,i),K(t,s),K(t,n),K(n,r),e[2](r)},p:ht,i:ht,o:ht,d(o){o&&at(t),e[2](null)}}}function Q3(e,t,i){Di.register(...Fx);let{globalScores:s=null}=t,n,r;const o=JSON.parse(localStorage.getItem("dailyData")).moves.length,a=(d,f)=>{let p,m,g;const _=f.right-f.left,y=f.bottom-f.top;return(!g||p!==_||m!==y)&&(p=_,m=y,g=d.createLinearGradient(0,f.bottom,0,f.top),g.addColorStop(0,"#57ff54"),g.addColorStop(.5,"#f7ff54"),g.addColorStop(1,"#d60626")),g};let l={labels:s.map((d,f)=>f),datasets:[{type:"bar",data:s,fill:!1,tension:.5,backgroundColor:d=>d.index===o?"#f1d324":"rgba(255, 255, 255, 0.75)",borderColor(d){const f=d.chart,{ctx:p,chartArea:m}=f;if(m)return a(p,m)}}]},h;const c={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"nearest",includeInivisible:!1},animation:{onComplete:()=>{h=!0},delay:d=>{let f=0;return d.type==="data"&&d.mode==="default"&&!h&&(f=d.dataIndex*10+d.datasetIndex*100),f}},layout:{padding:{top:45}},plugins:{legend:{display:!1},tooltip:{displayColors:!1,xAlign:"center",titleMarginBottom:0,margin:10,yAlign:"bottom",titleAlign:"center",lineHeight:-5,backgroundColor:"#586A84",titleColor:"white",titleFont:{weight:"bold"},callbacks:{title:d=>`Score: ${d[0].label}`,afterTitle:d=>`People: ${d[0].raw}`,label:d=>""}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{display:!1}},y:{grid:{display:!1},border:{display:!1},beginAtZero:!1,ticks:{autoSkip:!1,precision:0,maxTicksLimit:5,maxRotation:0,color:"rgba(255, 255, 255, 0.25)",font:{size:12}}}}};oi(()=>{r=new Di(n.getContext("2d"),{type:"line",data:l,options:c})}),ao(()=>{r.destroy()});function u(d){es[d?"unshift":"push"](()=>{n=d,i(0,n)})}return e.$$set=d=>{"globalScores"in d&&i(1,s=d.globalScores)},[n,s,u]}class tL extends ne{constructor(t){super(),se(this,t,Q3,J3,Jt,{globalScores:1})}}const Lx="en",Bx={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:["People's Republic of China","China"],CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:["Republic of the Congo","Congo"],CD:["Democratic Republic of the Congo","Congo"],CK:"Cook Islands",CR:"Costa Rica",CI:["Cote D'Ivoire","Ivory Coast"],HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:["Czech Republic","Czechia"],DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:["Republic of The Gambia","The Gambia","Gambia"],GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:["Islamic Republic of Iran","Iran"],IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"North Korea",KR:["South Korea","Korea, Republic of","Republic of Korea"],KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MK:["The Republic of North Macedonia","North Macedonia"],MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:["State of Palestine","Palestine"],PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:["Russian Federation","Russia"],RW:"Rwanda",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Eswatini",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:["Taiwan, Province of China","Taiwan"],TJ:"Tajikistan",TZ:["United Republic of Tanzania","Tanzania"],TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:["Türkiye","Turkey"],TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:["United Kingdom","UK","Great Britain"],US:["United States of America","United States","USA"],UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Vietnam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",AX:"Åland Islands",BQ:"Bonaire, Sint Eustatius and Saba",CW:"Curaçao",GG:"Guernsey",IM:"Isle of Man",JE:"Jersey",ME:"Montenegro",BL:"Saint Barthélemy",MF:"Saint Martin (French part)",RS:"Serbia",SX:"Sint Maarten (Dutch part)",SS:"South Sudan",XK:"Kosovo"},Nx={locale:Lx,countries:Bx},eL=Object.freeze(Object.defineProperty({__proto__:null,countries:Bx,default:Nx,locale:Lx},Symbol.toStringTag,{value:"Module"}));function S_(e,t,i){const s=e.slice();return s[3]=t[i].score,s[4]=t[i].countries,s[6]=i,s}function E_(e,t,i){const s=e.slice();return s[7]=t[i],s[9]=i,s}function iL(e){let t,i=e[3]+"",s;return{c(){t=J("p"),s=Oe(i),U(t,"class","svelte-jzvtc2")},m(n,r){lt(n,t,r),K(t,s)},p(n,r){r&1&&i!==(i=n[3]+"")&&si(s,i)},d(n){n&&at(t)}}}function sL(e){let t,i=e[3]+"",s;return{c(){t=J("p"),s=Oe(i),Qo(t,"color","#CD7F32"),U(t,"class","svelte-jzvtc2")},m(n,r){lt(n,t,r),K(t,s)},p(n,r){r&1&&i!==(i=n[3]+"")&&si(s,i)},d(n){n&&at(t)}}}function nL(e){let t,i=e[3]+"",s;return{c(){t=J("p"),s=Oe(i),Qo(t,"color","silver"),U(t,"class","svelte-jzvtc2")},m(n,r){lt(n,t,r),K(t,s)},p(n,r){r&1&&i!==(i=n[3]+"")&&si(s,i)},d(n){n&&at(t)}}}function rL(e){let t,i=e[3]+"",s;return{c(){t=J("p"),s=Oe(i),Qo(t,"color","gold"),U(t,"class","svelte-jzvtc2")},m(n,r){lt(n,t,r),K(t,s)},p(n,r){r&1&&i!==(i=n[3]+"")&&si(s,i)},d(n){n&&at(t)}}}function T_(e){let t,i,s,n,r,o,a;function l(u,d){return u[6]===0?rL:u[6]===1?nL:u[6]===2?sL:iL}let c=l(e)(e);return{c(){t=J("div"),i=J("img"),o=vt(),c.c(),a=vt(),_i(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${e[7].toLowerCase()}.svg`)||U(i,"src",s),U(i,"alt",n=e[1](e[7])),U(i,"title",r=e[1](e[7])),U(i,"class","svelte-jzvtc2"),U(t,"class","country svelte-jzvtc2")},m(u,d){lt(u,t,d),K(t,i),K(t,o),c.m(t,null),K(t,a)},p(u,d){d&1&&!_i(i.src,s=`https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/flags/4x3/${u[7].toLowerCase()}.svg`)&&U(i,"src",s),d&1&&n!==(n=u[1](u[7]))&&U(i,"alt",n),d&1&&r!==(r=u[1](u[7]))&&U(i,"title",r),c.p(u,d)},d(u){u&&at(t),c.d()}}}function A_(e){let t,i=e[4],s=[];for(let n=0;n<i.length;n+=1)s[n]=T_(E_(e,i,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();t=oo()},m(n,r){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,r);lt(n,t,r)},p(n,r){if(r&3){i=n[4];let o;for(o=0;o<i.length;o+=1){const a=E_(n,i,o);s[o]?s[o].p(a,r):(s[o]=T_(a),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}},d(n){Hh(s,n),n&&at(t)}}}function oL(e){let t,i,s,n,r=e[0],o=[];for(let a=0;a<r.length;a+=1)o[a]=A_(S_(e,r,a));return{c(){t=J("div"),i=J("h2"),i.textContent="Leader Board",s=vt(),n=J("div");for(let a=0;a<o.length;a+=1)o[a].c();U(i,"class","svelte-jzvtc2"),U(n,"class","board svelte-jzvtc2"),U(t,"class","card svelte-jzvtc2")},m(a,l){lt(a,t,l),K(t,i),K(t,s),K(t,n);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(n,null)},p(a,[l]){if(l&3){r=a[0];let h;for(h=0;h<r.length;h+=1){const c=S_(a,r,h);o[h]?o[h].p(c,l):(o[h]=A_(c),o[h].c(),o[h].m(n,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=r.length}},i:ht,o:ht,d(a){a&&at(t),Hh(o,a)}}}function aL(e,t,i){let{leaderBoard:s=[]}=t;Hr.registerLocale(Nx);let n=[];function r(o){return Hr.getName(o,"en",{select:"official"})}return e.$$set=o=>{"leaderBoard"in o&&i(2,s=o.leaderBoard)},e.$$.update=()=>{if(e.$$.dirty&5){i(0,n=[]);for(let o=0;o<s.length;o++)s[o].length>0&&n.push({score:o,countries:s[o]})}},[n,r,s]}class lL extends ne{constructor(t){super(),se(this,t,aL,oL,Jt,{leaderBoard:2})}}function hL(e){let t,i,s,n,r,o,a,l,h,c;return{c(){t=J("div"),i=J("h2"),s=Oe(e[0]),n=J("span"),n.textContent="h",r=vt(),o=Oe(e[1]),a=J("span"),a.textContent="m",l=vt(),h=Oe(e[2]),c=J("span"),c.textContent="s",U(n,"class","svelte-4aifb5"),U(a,"class","svelte-4aifb5"),U(c,"class","svelte-4aifb5"),U(i,"class","svelte-4aifb5"),U(t,"class","card svelte-4aifb5")},m(u,d){lt(u,t,d),K(t,i),K(i,s),K(i,n),K(i,r),K(i,o),K(i,a),K(i,l),K(i,h),K(i,c)},p(u,[d]){d&1&&si(s,u[0]),d&2&&si(o,u[1]),d&4&&si(h,u[2])},i:ht,o:ht,d(u){u&&at(t)}}}function cL(e,t,i){function s(){const u=Cs().utc().tz("Europe/Paris"),f=u.clone().endOf("day").diff(u,"second");return Math.floor(f/3600)}function n(){const u=Cs().utc().tz("Europe/Paris"),f=u.clone().endOf("day").diff(u,"second");return Math.floor(f%3600/60)}function r(){const u=Cs().utc().tz("Europe/Paris");return u.clone().endOf("day").diff(u,"second")%60}let o=s(),a=n(),l=r(),h;return oi(()=>{h=setInterval(()=>{i(0,o=s()),i(1,a=n()),i(2,l=r())},1e3)}),ao(()=>{clearInterval(h)}),[o,a,l]}class uL extends ne{constructor(t){super(),se(this,t,cL,hL,Jt,{})}}function dL(e){let t,i,s;return{c(){t=J("button"),t.textContent="Copy & Share",U(t,"class","svelte-xlgzd8")},m(n,r){lt(n,t,r),i||(s=Bt(t,"click",e[2]),i=!0)},p:ht,i:ht,o:ht,d(n){n&&at(t),i=!1,s()}}}const fL="⬛";function C_(e){const t=parseInt(e.slice(1),16),i=t>>16&255,s=t>>8&255,n=t&255;return[i,s,n]}function pL(e,t){const[i,s,n]=e,[r,o,a]=t;return Math.sqrt((i-r)**2+(s-o)**2+(n-a)**2)}function mL(e,t,i){const s=JSON.parse(localStorage.getItem("dailyData")),n=s.pieceMap,r=s.palette,o=[{char:"🟥",hex:"#FF0000"},{char:"🟧",hex:"#FFA500"},{char:"🟨",hex:"#FFFF00"},{char:"🟩",hex:"#008000"},{char:"🟦",hex:"#0000FF"},{char:"🟪",hex:"#800080"},{char:"🟫",hex:"#A52A2A"},{char:"⬜",hex:"#FFFFFF"}],a=["😎","😎","😎","😎","😎","😁","😁","😁","😃","😃","😃","🌟","🌟","🌟","🌟","✨","✨","✨","⚡","⚡","⚡","⚡","⚡","⚡","🦍","🦧"];function l(f){let p=1/0,m=null;for(const g of o){const _=pL(C_(f),C_(g.hex));_<p&&(p=_,m=g)}return m}function h(f){const p=[];for(const m of f){const g=l(m);p.push(g.char),o.splice(o.indexOf(g),1)}return p}let c="Solved in "+s.moves.length+" moves "+a[Math.floor(Math.random()*a.length)],u=[];return oi(()=>{const f=h(r);for(let p=0;p<n.length;p++){let m="";for(let g=0;g<n[p].length;g++){let _="";n[g][p]?_=f[r.indexOf(n[g][p].color)]:_=fL,m+=_}i(0,u=[...u,m])}}),[u,c,()=>navigator.clipboard.writeText(`${c}
${u.flat().join(`
`)}`)]}class gL extends ne{constructor(t){super(),se(this,t,mL,dL,Jt,{})}}function _L(e){let t;return{c(){t=J("div"),t.innerHTML='<h1 class="svelte-l0eta1">🎉 Victory! 🎉</h1>',U(t,"class","card svelte-l0eta1")},m(i,s){lt(i,t,s)},p:ht,i:ht,o:ht,d(i){i&&at(t)}}}class yL extends ne{constructor(t){super(),se(this,t,null,_L,Jt,{})}}function bL(e){let t,i,s,n,r,o,a,l,h,c,u,d,f,p;return t=new yL({}),s=new tL({props:{globalScores:e[1]}}),r=new lL({props:{leaderBoard:e[2]}}),a=new q3({}),h=new YR({}),u=new uL({}),f=new gL({}),{c(){Qt(t.$$.fragment),i=vt(),Qt(s.$$.fragment),n=vt(),Qt(r.$$.fragment),o=vt(),Qt(a.$$.fragment),l=vt(),Qt(h.$$.fragment),c=vt(),Qt(u.$$.fragment),d=vt(),Qt(f.$$.fragment)},m(m,g){Yt(t,m,g),lt(m,i,g),Yt(s,m,g),lt(m,n,g),Yt(r,m,g),lt(m,o,g),Yt(a,m,g),lt(m,l,g),Yt(h,m,g),lt(m,c,g),Yt(u,m,g),lt(m,d,g),Yt(f,m,g),p=!0},p(m,g){const _={};g&2&&(_.globalScores=m[1]),s.$set(_);const y={};g&4&&(y.leaderBoard=m[2]),r.$set(y)},i(m){p||($(t.$$.fragment,m),$(s.$$.fragment,m),$(r.$$.fragment,m),$(a.$$.fragment,m),$(h.$$.fragment,m),$(u.$$.fragment,m),$(f.$$.fragment,m),p=!0)},o(m){et(t.$$.fragment,m),et(s.$$.fragment,m),et(r.$$.fragment,m),et(a.$$.fragment,m),et(h.$$.fragment,m),et(u.$$.fragment,m),et(f.$$.fragment,m),p=!1},d(m){$t(t,m),m&&at(i),$t(s,m),m&&at(n),$t(r,m),m&&at(o),$t(a,m),m&&at(l),$t(h,m),m&&at(c),$t(u,m),m&&at(d),$t(f,m)}}}function xL(e){let t,i;return{c(){t=J("img"),_i(t.src,i=C1)||U(t,"src",i),U(t,"alt","Loading"),U(t,"class","svelte-yin8dz")},m(s,n){lt(s,t,n)},p:ht,i:ht,o:ht,d(s){s&&at(t)}}}function vL(e){let t,i,s,n;const r=[xL,bL],o=[];function a(l,h){return l[0]?1:0}return i=a(e),s=o[i]=r[i](e),{c(){t=J("div"),s.c(),U(t,"class","dashboard-container svelte-yin8dz")},m(l,h){lt(l,t,h),o[i].m(t,null),n=!0},p(l,[h]){let c=i;i=a(l),i===c?o[i].p(l,h):(me(),et(o[c],1,1,()=>{o[c]=null}),ge(),s=o[i],s?s.p(l,h):(s=o[i]=r[i](l),s.c()),$(s,1),s.m(t,null))},i(l){n||($(s),n=!0)},o(l){et(s),n=!1},d(l){l&&at(t),o[i].d()}}}function wL(e,t,i){const s="https://api.kubel.io";let n=null,r=null,o=null;return oi(()=>{gf.get(s+"/statistics").then(a=>{a.status===200&&(i(0,n=a.data),i(1,r=n.globalScores),i(2,o=n.leaderBoard))}).catch(a=>{console.error(a)})}),[n,r,o]}class SL extends ne{constructor(t){super(),se(this,t,wL,vL,Jt,{})}}function M_(e){let t,i;return t=new WR({}),{c(){Qt(t.$$.fragment)},m(s,n){Yt(t,s,n),i=!0},i(s){i||($(t.$$.fragment,s),i=!0)},o(s){et(t.$$.fragment,s),i=!1},d(s){$t(t,s)}}}function EL(e){let t,i;return t=new iS({}),{c(){Qt(t.$$.fragment)},m(s,n){Yt(t,s,n),i=!0},p:ht,i(s){i||($(t.$$.fragment,s),i=!0)},o(s){et(t.$$.fragment,s),i=!1},d(s){$t(t,s)}}}function TL(e){let t,i,s,n;const r=[ML,CL],o=[];function a(l,h){return!l[1]||l[3]?0:1}return t=a(e),i=o[t]=r[t](e),{c(){i.c(),s=oo()},m(l,h){o[t].m(l,h),lt(l,s,h),n=!0},p(l,h){let c=t;t=a(l),t===c?o[t].p(l,h):(me(),et(o[c],1,1,()=>{o[c]=null}),ge(),i=o[t],i?i.p(l,h):(i=o[t]=r[t](l),i.c()),$(i,1),i.m(s.parentNode,s))},i(l){n||($(i),n=!0)},o(l){et(i),n=!1},d(l){o[t].d(l),l&&at(s)}}}function AL(e){let t,i;return t=new fP({}),{c(){Qt(t.$$.fragment)},m(s,n){Yt(t,s,n),i=!0},p:ht,i(s){i||($(t.$$.fragment,s),i=!0)},o(s){et(t.$$.fragment,s),i=!1},d(s){$t(t,s)}}}function CL(e){let t,i,s,n;t=new uP({props:{mapData:JSON.parse(localStorage.getItem("dailyData"))}});let r=e[4]&&I_();return{c(){Qt(t.$$.fragment),i=vt(),r&&r.c(),s=oo()},m(o,a){Yt(t,o,a),lt(o,i,a),r&&r.m(o,a),lt(o,s,a),n=!0},p(o,a){o[4]?r?a&16&&$(r,1):(r=I_(),r.c(),$(r,1),r.m(s.parentNode,s)):r&&(me(),et(r,1,1,()=>{r=null}),ge())},i(o){n||($(t.$$.fragment,o),$(r),n=!0)},o(o){et(t.$$.fragment,o),et(r),n=!1},d(o){$t(t,o),o&&at(i),r&&r.d(o),o&&at(s)}}}function ML(e){let t,i;return t=new HR({}),t.$on("play",e[5]),{c(){Qt(t.$$.fragment)},m(s,n){Yt(t,s,n),i=!0},p:ht,i(s){i||($(t.$$.fragment,s),i=!0)},o(s){et(t.$$.fragment,s),i=!1},d(s){$t(t,s)}}}function I_(e){let t,i;return t=new SL({}),{c(){Qt(t.$$.fragment)},m(s,n){Yt(t,s,n),i=!0},i(s){i||($(t.$$.fragment,s),i=!0)},o(s){et(t.$$.fragment,s),i=!1},d(s){$t(t,s)}}}function IL(e){let t,i,s,n,r,o,a,l,h,c;i=new cS({});let u=e[2]&&M_();const d=[AL,TL,EL],f=[];function p(m,g){return m[0]==="Loading"?0:m[0]==="Loaded"?1:m[0]==="Error"?2:-1}return~(o=p(e))&&(a=f[o]=d[o](e)),h=new EP({}),{c(){t=J("main"),Qt(i.$$.fragment),s=vt(),u&&u.c(),n=vt(),r=J("div"),a&&a.c(),l=vt(),Qt(h.$$.fragment),U(r,"class","layout svelte-ibt4rk"),U(t,"id","app")},m(m,g){lt(m,t,g),Yt(i,t,null),K(t,s),u&&u.m(t,null),K(t,n),K(t,r),~o&&f[o].m(r,null),K(t,l),Yt(h,t,null),c=!0},p(m,[g]){m[2]?u?g&4&&$(u,1):(u=M_(),u.c(),$(u,1),u.m(t,n)):u&&(me(),et(u,1,1,()=>{u=null}),ge());let _=o;o=p(m),o===_?~o&&f[o].p(m,g):(a&&(me(),et(f[_],1,1,()=>{f[_]=null}),ge()),~o?(a=f[o],a?a.p(m,g):(a=f[o]=d[o](m),a.c()),$(a,1),a.m(r,null)):a=null)},i(m){c||($(i.$$.fragment,m),$(u),$(a),$(h.$$.fragment,m),c=!0)},o(m){et(i.$$.fragment,m),et(u),et(a),et(h.$$.fragment,m),c=!1},d(m){m&&at(t),$t(i),u&&u.d(),~o&&f[o].d(),$t(h)}}}function PL(e,t,i){let s,n,r;ui(e,_f,p=>i(2,s=p)),ui(e,sh,p=>i(3,n=p)),ui(e,oh,p=>i(4,r=p)),Cs.extend(ey),Cs.extend(iy);const o="https://api.kubel.io";let a="Loading",l,h=!1;const c=p=>{let m=localStorage.getItem("dailyData");return!(m===null||(m=JSON.parse(m),m.version!==p.version))},u=p=>{localStorage.removeItem("dailyData"),l=p;for(let m=0;m<p.pieceMap.length;m++)for(let g=0;g<p.pieceMap[m].length;g++)if(p.pieceMap[m][g]===0)p.pieceMap[m][g]=null;else{const y={id:`${m}-${g}`,color:p.palette[p.pieceMap[m][g]-1]};p.pieceMap[m][g]=y}l.moves=[],localStorage.setItem("dailyData",JSON.stringify(l))},d=()=>{gf.get(o+"/daily").then(p=>{if(p.status===200){if(!c(p.data)){u(p.data);let m=localStorage.getItem("userStats"),g;m&&(g=JSON.parse(m),g.dailyHistory=[],localStorage.setItem("userStats",JSON.stringify(g)))}i(0,a="Loaded")}else i(0,a="Error")}).catch(p=>{i(0,a="Error"),console.error(p)})};return oi(()=>{console.log(`   __ ____  _____  ______     _    
  / //_/ / / / _ )/ __/ /    (_)__ 
 / ,< / /_/ / _  / _// /___ / / _ \\
/_/|_|\\____/____/___/____(_)_/\\___/`),localStorage.getItem("userCountry")&&i(1,h=!0),setTimeout(()=>{d()},1e3)}),[a,h,s,n,r,()=>{i(1,h=!0),sh.set(!1)}]}class RL extends ne{constructor(t){super(),se(this,t,PL,IL,Jt,{})}}new RL({target:document.getElementById("app")})});export default DL();
